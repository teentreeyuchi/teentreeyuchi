/**!
 * IMPORTANT NOTE:
 *    This file is licensed only for use in providing the iCloud
 *    service or any part thereof, and is subject to the iCloud
 *    Terms and Conditions. You may not port this file to another
 *    platform without Apple's written consent.
 *
 *    Portions of this Apple Software may utilize copyrighted material under open source licenses.
 *    Please see the file at https://www.icloud.com/applications/photos3/1906Hotfix1/en-us/acknowledgements.txt for licensing information.
 */
!function(e,t,n,i){var r=e.__CW_IMG_URLS={};for(var a in n){var s=n[a];Object.defineProperty(r,a,{get:function(){return[t,(n=s,i=Math.ceil(e.devicePixelRatio),1===i?n:n.replace(/@\d{1}(?=x)/i,"@"+i))].join("/");var n,i}})}}(this,"/applications/photos3/1906Hotfix1/en-us/",{}),function(e,t,n,i){var r=e.URL||e.webkitURL,a=e.__CW_BLOB_URLS={};e.__CW_BLOBS_READY=!1;var s,o,c,l,u,d=["image/gif","image/png","image/jpeg","image/svg+xml"],h=3,p=!1,f=!1;function g(t){p=!1,e.__CW_BLOBS_READY=!1,v("__CW_SPRITE_ERROR",t)}function m(e,t,n){if(e.slice)return e.slice(t,n);var i=e.byteLength;if(t=t||0,n=n||i,0===i||t>=i||t>=n)return new ArrayBuffer(0);var r=Math.min(i-t,n-t),a=new ArrayBuffer(r);return new Uint8Array(a).set(new Uint8Array(e,t,r)),a}function v(e,t){var n=document.createEvent("Event");n.data=t,n.initEvent(e,!0,!0),document.dispatchEvent(n)}function _(e){var t=a[e],n=new RegExp("\\(blob_"+e+"\\)","gi");return function(){var e;o++,s=s.replace(n,"("+JSON.stringify(t)+")"),o===c&&((e=document.getElementById("cw-css"))||((e=document.createElement("link")).rel="stylesheet",e.id="cw-css"),e.onload=function(){v("__CW_CSS_LOADED"),s=null,f=!1},e.href="data:text/css;base64,"+btoa(unescape(encodeURIComponent(s))),document.head.appendChild(e))}}document.addEventListener("__CW_SPRITE_LOADED",function(){if(!f)if(f=!0,v("__CW_CSS_START"),s=".cw-alert .alert-icon{background-image:url(blob_1)}\n\n.cw-alert .alert-icon.info::after{background-image:url(blob_2)}\n\n.cw-alert .alert-icon.error::after{background-image:url(blob_3)}\n\n.cw-alert .alert-icon.checked::after{background-image:url(blob_4)}\n\n.cw-alert .alert-icon.sharing::after{background-image:url(blob_5)}\n\ncw-checkbox input[type=checkbox]:checked+label::before{background-image:url(blob_6)}\n\ncw-checkbox input[type=checkbox]:indeterminate+label::before{background-image:url(blob_7)}\n\n.cw-alert .photos-icon.alert-icon{background-image:url(blob_8)}\n\n.cw-popover-view.cosk-account-menu-popover .cw-up-arrow{background-image:url(blob_15)}\n\n.cmm-thank-you-page .logo{background-image:url(blob_17)}\n\n.cmm-legal-footer-content .apple-icon{background-image:url(blob_18)}\n\n.toolbar-slider.cw-slider.toolbar-zoom-slider::before{background-image:url(blob_23)}\n\n.toolbar-slider.cw-slider.toolbar-zoom-slider::after{background-image:url(blob_24)}\n\n.photos-popover-view .cw-popover-arrow.cw-up-arrow{background-image:url(blob_29)}\n\n.photos-popover-view .cw-popover-arrow.cw-down-arrow{background-image:url(blob_30)}\n\n.photos-popover-view .cw-popover-arrow.cw-right-arrow{background-image:url(blob_31)}\n\nfigure.participant-icon-view::after{background-image:url(blob_32)}\n\n.ck-sharing-touch-style .add-participants-view footer .cw-button.copy_link::before{background-image:url(blob_33)}\n\n.cw-alert .alert-icon.ck-sharing-error-icon{background-image:url(blob_34)}\n\n.cw-alert .alert-icon.ck-sharing-icon{background-image:url(blob_35)}\n\n.pok-oneup-view>.pok-next-button::after,.pok-oneup-view>.pok-previous-button::after{background-image:url(blob_38)}\n\n.pok-video-presenter-view .pok-video-play-button{background-image:url(blob_39)}\n\n.pok-video-presenter-view .pok-video-play-button.cw-being-hovered,.pok-video-presenter-view .pok-video-play-button:focus{background-image:url(blob_40)}\n\n.pok-video-presenter-view .pok-video-play-button.cw-being-pressed{background-image:url(blob_41)}\n\n.pok-video-presenter-view .pok-big-speaker-view{background-image:url(blob_42)}\n\n.pok-burst-presenter-view>.pok-enter-burst-button::before{background-image:url(blob_43)}\n\n.pok-burst-presenter-view>.pok-oneup-view .pok-burst-child-photo-presenter-view>.pok-promoted-from-burst-circle{background-image:url(blob_44)}\n\n.pok-burst-presenter-view>.pok-oneup-view .pok-burst-child-photo-presenter-view>.pok-promoted-from-burst-circle.pok-promoted{background-image:url(blob_45)}\n\n.pok-type-badge.slowmo{background-image:url(blob_46)}\n\n.pok-type-badge.time-lapse{background-image:url(blob_47)}\n\n.ck-sharing-transports-view.cw-segmented-control .cw-button.email::before{background-image:url(blob_48)}\n\n.ck-sharing-transports-view.cw-segmented-control .cw-button.copy-link::before{background-image:url(blob_49)}\n\n.ck-sharing-transports-view.cw-segmented-control .cw-button.schoolwork::before{background-image:url(blob_50)}\n\n\n.ck-sharing-touch-style .add-participants-view footer .cw-button.native_mail::before,.ck-sharing-touch-style .add-participants-view footer .cw-button.web_mail::before{background-image:url(blob_55)}\n\n.cw-tokenizedtextfield-view.show-error-indicator::after{background-image:url(blob_57)}\n\n\n\n\n\n\n.video-badge-adornment{background-image:url(blob_66)}\n\n.touch-style .selection-outline-or-checkmark-adornment::after,.selection-checkmark-adornment::after{background-image:url(blob_67)}\n\n.panorama-adornment{background-image:url(blob_69)}\n\n.panorama-adornment.vertical-panorama{background-image:url(blob_70)}\n\n.audio-adornment{background-image:url(blob_73)}\n\n".slice(),a&&(c=Object.keys(a).length),a&&c>0){o=0;var t=function(){var t="cw-img-container-r"+e.devicePixelRatio,n=document.getElementById(t);if(!n){(n=document.createElement("div")).setAttribute("aria-hidden",!0),n.id=t;var i=n.style;i.overflow="hidden",i.height="0",i.width="0",document.body.appendChild(n)}return n}();for(var n in a){var i=document.createElement("img");i.addEventListener("load",_(n)),i.src=a[n],t.appendChild(i)}}else f=!1}),l=e.devicePixelRatio,(u=n[l-1])||(u=n[0]),function t(n){if(!p){p=!0,v("__CW_SPRITE_START");var i=new XMLHttpRequest;i.open("GET","/applications/photos3/1906Hotfix1/en-us//"+n,!0),i.responseType="arraybuffer",i.onload=function(){!function(t){try{if(t&&t instanceof ArrayBuffer)for(var n=new DataView(t),i=n.byteLength,s=0;s<i;){var o=n.getUint16(s),c=n.getUint8(s+2),l=n.getUint32(s+3),u=m(t,s+=7,s+l),h=new Blob([u],{type:d[c-1]});a[o]=r.createObjectURL(h),s+=l}p=!1,e.__CW_BLOBS_READY=!0,v("__CW_SPRITE_LOADED")}catch(e){g(e)}}(i.response)},i.onerror=function(e){--h>0?t(n):g(e)},i.send()}}(u)}(this,0,["images@1x.bin","images@2x.bin","images@3x.bin"]),function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/applications/photos3/1906Hotfix1/en-us/",n(n.s=567)}([,,,function(e,t,n){var i=n(15),r=n(55),a=n(43),s=n(44),o=n(56),c=function(e,t,n){var l,u,d,h,p=e&c.F,f=e&c.G,g=e&c.S,m=e&c.P,v=e&c.B,_=f?i:g?i[t]||(i[t]={}):(i[t]||{}).prototype,b=f?r:r[t]||(r[t]={}),y=b.prototype||(b.prototype={});for(l in f&&(n=t),n)d=((u=!p&&_&&void 0!==_[l])?_:n)[l],h=v&&u?o(d,i):m&&"function"==typeof d?o(Function.call,d):d,_&&s(_,l,d,e&c.U),b[l]!=d&&a(b,l,h),m&&y[l]!=d&&(y[l]=d)};i.core=r,c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,e.exports=c},,,function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i={NATIVE_MAIL:"NATIVE_MAIL",WEB_MAIL:"WEB_MAIL",COPY_LINK:"COPY_LINK",SCHOOLWORK:"SCHOOLWORK"};Object.freeze(i)},,function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i={READ_ONLY:"READ_ONLY",READ_WRITE:"READ_WRITE",NONE:"NONE",MIXED:"MIXED"};Object.freeze(i)},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i={PUBLIC:"PUBLIC",PRIVATE:"PRIVATE"};Object.freeze(i)},,function(e,t,n){"use strict";var i=n(1185),r=n(69),a=n(784),s=n(1184),o=n(65),c=n(39),l=n(399),u=n(78),d=n(176),h=n(1219),p=n(74),f=n(66),g=n(1105),m=n(156),v=n(80),_=n(41),b=n(522),y=v.a.extend({successHandler:null,errorHandler:null,scope:null,db:_.c({readOnly:!0,get:function(){var e=r.b().getDatabaseForScope(this.scope).databaseInstance;if(!e)throw new o.a("No CK DB!");return e}}),chain:function(e){if("batchRequest"===e)this._chain=b.a.create({scope:this.scope});else{var t;this._chain=this._chain||this.db;for(var n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];this._chain=(t=this._chain)[e].apply(t,i)}return this},send:function(e){var t=this._chain||this.db;this._chain=null;for(var n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return t[e].apply(t,i).then(this.successHandler).catch(this.errorHandler)},staticMembers:{__QUALIFIED_CLASS_NAME__:"CKRequestWrapper"}}),I=n(70),w=n(47);n.d(t,"a",function(){return T});var S,C,O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},E=(S=i.a,(C=function(e){var t=S.create();try{e(t.resolve.bind(t),t.reject.bind(t))}catch(e){t.reject(e)}return t}).all=S.all.bind(S),C.race=S.race.bind(S),C.resolve=S.resolve.bind(S),C.reject=S.reject.bind(S),C),T=h.a.extend({mixinDependencies:[p.a],staticMembers:{ingestResponse:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.isRecordZoneChangesResponse,n=r.b();if(e.isRecordsResponse){var i=e.records,c=e.httpResponse.body.syncToken,l=e.zoneID,u=void 0===l?e.request.getBody().zoneID:l,d=f.a.findByZoneID(u);i&&i.length&&T.ingestRecords(d.pk,i,t),c&&u&&d===n.cplZoneID&&d.syncToken!==c&&(a.b.debug("Detected old syncToken; Triggering update."),n.update())}else if(e.isRecordZoneChangesResponse)for(var h=e.zones,p=0,g=h.length;p<g;p++){var m=h[p],v=m.zoneID,_=m.syncToken,b=m.records,y=f.a.findByZoneID(v);y!==n.cplZoneID&&(y.syncToken!==_&&y.updateSyncToken(_),T.ingestRecords(y.pk,b,!0),m.moreComing&&s.a(function(){return n.update()},500))}else e.isDatabaseChangesResponse?T._ingestDatabaseChangesResponse(e):o.b("Unable to ingest response, unrecognized response type");return e},_ingestDatabaseChangesResponse:function(e){var t,n=this;return(t=regeneratorRuntime.mark(function t(){var i,a,s,o,c,l,u,d,h,p,m,v,_;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(i=e.zones,a=i.length,s=[],o=[],c=0;c<a;c++)l=i[c],u=f.a.getDataValuesFromServiceValues(l,{scope:e.scope,database:e.scope}),s.push(u),u.deleted||o.push(u.pk);return d=r.b(),t.next=8,d.loadData(f.a,s,!1);case 8:h=g.a.find(e.scope),p=h.getDataHash(),m=g.a.getDataValuesFromServiceValues({syncToken:e.syncToken}),v=m.syncToken,_=A({},p,{syncToken:v,zones:[].concat(o)}),d.loadData(g.a,_,!1);case 13:case"end":return t.stop()}},t,n)}),function(){var e=t.apply(this,arguments);return new E(function(t,n){return function i(r,a){try{var s=e[r](a),o=s.value}catch(e){return void n(e)}if(!s.done)return E.resolve(o).then(function(e){i("next",e)},function(e){i("throw",e)});t(o)}("next")})})()},ingestRecords:function(e,t,n){t.length&&(n?T._ingestRecordsForChangesResponse(e,t):T._ingestRecordsForRead(e,t))},_ingestRecordsForRead:function(e,t){for(var n={},i=0,s=t.length;i<s;i++){var o=t[i],c=o.recordType;(n[c]||(n[c]=[])).push(o)}var l=r.b(),u=f.a.find(e).zoneID,d=function(t){if(!n.hasOwnProperty(t))return"continue";var i=n[t],r=m.a.getModelClassForRecordType(t);if(r&&r.isSerializableModel){var s=i.map(function(t){return r.getDataValuesFromServiceValues(t,{zone:e,zoneID:u})});l.loadData(r,s,!0)}else a.b.warn("BaseHandler#ingestRecords(): Unhandled incoming records: recordType="+t)};for(var h in n)d(h)},_ingestRecordsForChangesResponse:function(e,t){var n=r.b();c.a.pause();for(var i=0,s=t.length;i<s;i++){var o=t[i],h=o.recordName,p=m.a.getPrimaryKeyWithZonePK(e,h),g=void 0,v=void 0,_=void 0;if(o.deleted){if(_=n.findModelFromRecordNameOnly(e,h),this.deletedModels&&!_){for(var b=void 0,y=0;y<this.deletedModels.length;y++){var S=this.deletedModels[y];S.recordName===h&&(b=S,this.deletedModels.splice(y,1))}_=b}if(!_&&I.a.isWellFormedRecordName(h)&&(_=I.a.findOrCreatePlaceholder(p)),!_){a.b.debug("Ignoring untracked change record recordName="+h);continue}v=_.constructor;var C=_.recordType;g=void 0===C?v.CK_RECORD_TYPE:C}else{if(g=o.recordType,!(v=m.a.getModelClassForRecordType(g))){a.b.warn("Ignoring "+g+" change: "+h);continue}_=v.find(p)}var A=l.a(v,n.operationHandlers);if(void 0!==A&&"function"==typeof A.ingestChange){var E=void 0;if(!o.deleted){var T=f.a.find(e),M=v.getDataValuesFromServiceValues(o,{zone:e,zoneID:T.zoneID});if(_){var D=Object.assign({},_.getDataHash(),M);E=v.createFromDataHash(D)}else n.loadData(v,M,!0),E=v.find(p)}var L=o.created,N=o.modified,P="object"==(void 0===L?"undefined":O(L))&&"number"==typeof L.timestamp&&"object"==(void 0===N?"undefined":O(N))&&"number"==typeof N.timestamp&&L.timestamp===N.timestamp;if(_&&_.storeStatus!==u.b.CLEAN){var R=n.readOriginalData(_._cwStoreId),x=R&&v.createFromDataHash(R);d.f(x,this,"BaseHandler: originalModel"),A.ingestChange(E,x,P),d.e(x,this,"BaseHandler: originalModel")}else A.ingestChange(E,_,P);if(_)if(E){E.retain(this,"BaseHandler: model");var F=v!==w.a;n.loadData(v,E.getDataHash(),F),E.release(this,"BaseHandler: model")}else o.deleted&&(_.retain(this,"BaseHandler: model"),_.release(this,"BaseHandler: model"))}else a.b.error("No ingestChange handler recordType="+g)}c.a.resume()},__QUALIFIED_CLASS_NAME__:"BaseHandlerOperationHandler"},shouldIngestChangesOnResponse:!1,shouldIngestChangesAsChangeSet:!1,ckRequest:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:CloudKit.DatabaseScope.PRIVATE,i=e.context,r=(void 0===i?{}:i).scope,a=void 0===r?n:r;return y.create({successHandler:function(n){return t._handleSuccess(n,e)},errorHandler:function(n){return t.handleError(n,e)},scope:a})},baseCKOptions:function(e){return{atomic:!0,zoneID:e}},_handleSuccess:function(e,t){var n=this.processResponseErrors(e);return n?this.handleError(n,t):(this.shouldIngestChangesOnResponse&&this.constructor.ingestResponse(e,this.shouldIngestChangesAsChangeSet),e)},processResponseErrors:function(e){var t=e.errors;if(t&&t.length>0)return t[0]}})},function(e,t,n){"use strict";var i=n(854),r=n(87),a=n(39),s=r.b.extend({downstreamNodeManagerClass:r.b.prototype.downstreamNodeManagerClass.extend({isCacheable:!0}),upstreamNodeManagerClass:r.b.prototype.upstreamNodeManagerClass.extend({calculateValueForNode:function(e,t,n){var i=arguments,r=this.__s._$DA$calculateValueForNode.apply(this,i);if(void 0===r){var a=this.property,s=this.key;r!==a.getRawValueForObject(e,s)&&(a.clearCachedValueForObject(e,s),r=a._encodeValue(e,s,r),a.setRawValueForObject(e,s,r))}return r},__superMap:{_$DA$calculateValueForNode:"calculateValueForNode"}}),initializeNodeFlags:function(){var e=arguments;this.__s._$Oi$initializeNodeFlags.apply(this,e),this.downstreamNodeFlags&=~a.a.PULL_ON_FLUSH},defaultModelValue:void 0,dataKey:void 0,serviceKey:void 0,init:function(e){var t=arguments,n=void 0;if(e){var i=e.defaultValue;n=void 0===i?this.defaultModelValue:i,e.defaultValue=void 0}this.defaultModelValue=n,this.__s._$Zz$init.apply(this,t),null===this.dataKey&&(this.dataKey=void 0),null===this.serviceKey&&(this.serviceKey=void 0)},_materializeValue:function(e,t,n){var i=this.__s._$gi$_materializeValue.call(this,e,t,n);return void 0!==i?i:this.defaultModelValue},getRawValueForObject:function(e,t){var n=this.dataKey,i=void 0===n?t:n,r=e.getDataHash();if(void 0!==r)return r[i]},__superMap:{_$Oi$initializeNodeFlags:"initializeNodeFlags",_$Zz$init:"init",_$gi$_materializeValue:"_materializeValue"},staticMembers:{__QUALIFIED_CLASS_NAME__:"CachingModelProperty"}});n.d(t,"a",function(){return o}),n.d(t,"c",function(){return c}),n.d(t,"b",function(){return l}),n.d(t,"d",function(){return u});var o=s.extend({serviceValueGetter:function(e,t){return e[t]},serviceValueSetter:function(e,t,n){return e[t]=n},getDataValueFromServiceValue:void 0,getServiceValueFromDataValue:void 0,staticMembers:{__QUALIFIED_CLASS_NAME__:"SerializableModelProperty"}});function c(e){return o.create(e)}var l=o.extend.apply(o,i.c.mixins.concat([{staticMembers:{__QUALIFIED_CLASS_NAME__:"SerializableToOneRelationshipProperty"}}]));function u(e){return l.create(e)}i.b.mixins.concat([{staticMembers:{__QUALIFIED_CLASS_NAME__:"SerializableToManyRelationshipProperty"}}])},function(e,t,n){var i=n(19);e.exports=function(e){if(!i(e))throw TypeError(e+" is not an object!");return e}},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},,,function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){"use strict";n.r(t),n(979);var i=n(1125),r=n(34),a=n(41),s=n(65),o=n(784),c=n(1212),l=n(1169),u=n(1177),d=n(1170),h=n(36),p=n(180),f=n(1275),g=n(1185),m=n(1184),v=n(123),_=n(777),b=n(172),y=n(120),I=n(173),w=n(80),S=n(781),C=w.a.extend(S.a,{_cookieString:null,_cookiesObj:null,getCookies:function(){var e=document.cookie;if(this._cookieString===e)return this._cookiesObj;var t={};if(this._cookieString=e,e)for(var n=e.split(";"),i=0,r=n.length;i<r;i++){var a=n[i].split("="),s=a.shift().trim(),o=a.join("=").trim();t[s]=o}return this._cookiesObj=t},getCookie:function(e){return this.getCookies()[e]},removeCookie:function(e,t,n){var i=e+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT";t&&(i=i+"; domain="+t),n&&(i=i+"; path="+n),document.cookie=i},removeCookies:function(e,t,n){var i,r;if(e instanceof Array)for(i=0,r=e.length;i<r;i++)this.removeCookie(e[i],t,n);else{var a=document.cookie.split(";");for(i=0,r=a.length;i<r;i++){var s=a[i],o=s.indexOf("="),c=o>-1?s.substr(0,o):s;e.test(c)&&this.removeCookie(c,t,n)}}},setCookie:function(e,t){var n=e+"="+t+";";document.cookie=n},staticMembers:{__QUALIFIED_CLASS_NAME__:"CookieManager"}}),O=n(192),A=n(183),E=n(1128),T={trace:!1,logTrace:function(e){(this.trace||window.TRACE_ALL)&&o.b.debug(this+" "+e)}},M={mixinDependencies:[T],registerStateEnumGroup:function(e,t,n){var i=this._segs_registeredGroups;i||(i=this._segs_registeredGroups={}),i[e.id]||(i[e.id]={stateEnumGroup:e,currentState:t,fatalErrorState:n})},fatalErrorIfNotInState:function(e){var t=this._segs_registeredGroups[e.group.id];t||s.b("No state enum group registered for "+e);var n,i=t.currentState,r=t.fatalErrorState||null,a=arguments.length;for(n=0;n<a;n++)if(arguments[n].contains(i))return;r&&this.setState(r);var o=u.a(i)&&u.a(i.fullName)?i.fullName:"[unknown state]",c=1==a?" ":" either ",l=[];for(n=0;n<a;n++)l.push(arguments[n].fullName);var d=" Cannot perform operation. Expected state "+o+" to"+c+"be: "+l.join(", ");s.b(d,{source:this})},setState:function(e){var t=this._segs_registeredGroups[e.group.id];t||s.b("No state enum group registered for "+e);var n=t.currentState;t.currentState=e,this.logTrace("changed state from <"+n.fullName+"> to <"+e.fullName+">")},getCurrentStateForStateEnumGroup:function(e){var t=this._segs_registeredGroups[e.id];return t||s.b("No state enum group registered for "+e.name),t.currentState},transitionFromStateToState:function(e,t){this.fatalErrorIfNotInState(e),this.setState(t)}},D="0123456789ABCDEF";function L(e,t){var n="";t=!!t;for(var i=0;i<=7;i++)t&&i>0&&i%2==0&&(n+=" "),n+=D[(e&4026531840>>>4*i)>>>4*(7-i)];return n}var N=[4278190080,4294901760,4294967040,4294967280,4294967295],P=[24,16,8,4,0],R=function(e,t,n,i,r){this.name=e,this.value=t,this.level=i,this.parent=n||null,this.group=r||null;var a=t<<P[i];this.fullValue=n?n.fullValue+a:a,this.fullName=n?n.fullName+"."+e:e,this._nextSubstateValue=function(){var e=0;return function(){return e+=1}}(),r||Object.freeze(this)},x=R.prototype;function F(e,t){return new R(e,t,null,0)}x.equals=function(e){return e.fullValue===this.fullValue},x.substateOf=function(e){return!(this.level<=e.level)&&(this.fullValue&N[e.level])===e.fullValue},x.superstateOf=function(e){return!(this.level>=e.level)&&(e.fullValue&N[this.level])===this.fullValue},x.contains=function(e){return this.equals(e)||e.substateOf(this)},x.createSubstate=function(e){return new R(e,this._nextSubstateValue(),this,this.level+1,this.group)},x.toString=function(){var e=this.group,t=e?e.name+" State":"StateEnum",n=e?"":" <"+L(this.fullValue,!0)+">";return"["+t+": "+this.fullName+n+"]"};var k=1,V=function(e){this.items=[],this.name=e,this.id=k,k++};function j(e,t){var n=new V(e);t(function e(t,n){var i=1;return function(r,a){var s,o=(s=n?n.createSubstate(r):new R(r,i,null,0,t)).fullName.replace(".","");(t.items.push(s),t[o]=s,n&&(n[r]=s),i+=1,a)&&a(e(t,s))}}(n,null));for(var i=n.items,r=i.length,a=0;a<r;a++)Object.freeze(i[a]);return Object.freeze(n),n}var B=j("Application Driver",function(e){e("Inactive"),e("Activating",function(e){e("Init"),e("WaitAppPrepared"),e("Finalize")}),e("Active",function(e){e("Ready")}),e("Deactivating"),e("FatalError")}),U=B.Inactive,W=B.Activating,G=B.Active,H=B.Deactivating,$=B.FatalError,z=w.a.extend(T,M,{application:a.c({readOnly:!0}),state:a.c({readOnly:!0,get:function(){return this.getCurrentStateForStateEnumGroup(B)}}),init:function(e){if(this.__s._$KS$init.call(this,e),!e||!e.application)throw s.b("Cannot create driver. Requires application");this.registerStateEnumGroup(B,U,$)},activate:function(){this.transitionFromStateToState(U,W.Init),this.didStartInitialActivation()},applicationDidPrepareForLoad:function(){this.transitionFromStateToState(W.WaitAppPrepared,W.Finalize),this.didStartFinalizingActivation()},didStartInitialActivation:function(){},didFinishInitialActivation:function(){this.transitionFromStateToState(W.Init,W.WaitAppPrepared),this.get("application").prepareForLoad()},didStartFinalizingActivation:function(){},didFinishFinalizingActivation:function(){this.transitionFromStateToState(W.Finalize,G.Ready),this.get("application").didBecomeLoaded()},didStartDeactivation:function(){this.setState(H)},didFinishDeactivation:function(){this.setState(U)},__superMap:{_$KS$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"BaseApplicationDriver"}}),K=n(174),Q=n(1192),q=j("Channel",function(e){e("Closing"),e("Closed"),e("Opening"),e("Opened"),e("FatalError")}),Y=q.Closing,Z=q.Closed,J=q.Opening,X=q.Opened,ee=q.FatalError,te=w.a.extend(T,M,{window:a.c({readOnly:!0,get:function(){return this._window}}),state:a.c({readOnly:!0,get:function(){return this.getCurrentStateForStateEnumGroup(q)}}),init:function(e){e.window||this.fatalError("Cannot open channel. Requires window");var t=e.window;delete e.window,this.__s._$XZ$init.call(this,e),this._window=t,this.registerStateEnumGroup(q,Z,ee)},open:function(){this.transitionFromStateToState(Z,J),this.willOpen()},close:function(){this.transitionFromStateToState(X,Y),this.willClose()},willOpen:function(){},didOpen:function(){this.transitionFromStateToState(J,X)},willClose:function(){},didClose:function(){this.transitionFromStateToState(Y,Z)},__superMap:{_$XZ$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"RPCBaseChannel"}}),ne=te.extend({origin:a.c({readOnly:!0}),init:function(e){this.__s._$3k$init.call(this,e),e.origin||s.b("Cannot create output channel. Requires origin")},sendMessage:function(e){},__superMap:{_$3k$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"RPCBaseOutputChannel"}}),ie=ne.extend({willOpen:function(){this.didOpen()},willClose:function(){this.didClose()},sendMessage:function(e){var t=this.get("window"),n=this.get("origin");y.a.get("sharedInstance").get("isIE9OrLower")&&(e=JSON.stringify(e)),t.postMessage(e,n)},staticMembers:{__QUALIFIED_CLASS_NAME__:"RPCOutputChannel"}}),re=n(25),ae={windowCount:0,windowApplications:{},openWindowApplication:function(e,t,n){var i=this._getNextWindowId();e=this._addInstanceIdToURL(e,i);var r=window.open(e,t,n);return this.windowApplications[i]={window:r},i},_addInstanceIdToURL:function(e,t){var n="&";return-1===e.indexOf("#")&&(n="#"),e+n+"instanceId="+t},_getNextWindowId:function(){var e;return e="generating a new id",o.b.debug("WindowApplication: "+e),"window_"+this.windowCount++},windowApplicationIsRegistered:function(e){return!!this.windowApplications[e]},passWindowApplicationMessage:function(e,t){var n=this.windowApplications[e];if(n){var i=K.a(arguments);if(i=i.slice(2,i.length),n.didInitialize){var r={isCloudOSMessage:!0,methodName:t,args:i,isWindowApplicationMessage:!0};try{var a=n.window.CK.currentApplication;a?a._windowMessageWasReceived(Q.a(r)):ie.create({window:n.window,origin:re.a.getPath("cloudOSApplication.driver").getIOChannelOrigin()}).sendMessage(r)}catch(t){o.b.warn("postMessage: CK.WindowApplication "+e+" not properly loaded?")}}else this._registerWindowApplicationMessage(e,t,i)}else o.b.warn("Could not find a COSK.Utils.windowApplications with instanceId "+e)},windowApplicationDidInitialize:function(e){var t=this.windowApplications[e];t?t.didInitialize=!0:o.b.warn("There is no windowApplication for "+e)},passPendingWindowApplicationMessages:function(e){var t,n,i,r,a=this.windowApplications[e];if(a&&(t=a.messages))for(n=0,i=t.length;n<i;n++){var s=[e,(r=t[n]).method];this.passWindowApplicationMessage.apply(this,s.concat(r.args))}},_registerWindowApplicationMessage:function(e,t,n){var i,r=this.windowApplications[e];r&&((i=r.messages)||(i=[],r.messages=i),i.push({method:t,args:n}))},resolveInstanceIfNeeded:function(e){var t=this.windowApplications;if(!t[e])for(var n in t)if(t[n].window===e)return n;return e}},se={windowApplicationDidInitialize:function(e){var t=ae.resolveInstanceIfNeeded(e);ae.windowApplicationDidInitialize(t)},passPendingWindowApplicationMessages:function(e){var t=ae.resolveInstanceIfNeeded(e);ae.passPendingWindowApplicationMessages(t)}},oe={windowApplicationHasInitialized:function(e,t,n){e=ae.resolveInstanceIfNeeded(e);var i=re.a.getPath("cloudOSApplication.driver");ae.windowApplicationDidInitialize(e),n||ae.passWindowApplicationMessage(e,"_applicationShouldInvokeMain",i.get("cloudOSMethodNames"),i.get("cloudOSState")),ae.passPendingWindowApplicationMessages(e)},windowApplicationIsKnown:function(e){return e=ae.resolveInstanceIfNeeded(e),ae.windowApplicationIsRegistered(e)}},ce={mixinDependencies:[h.a],environment:null,showAppSwitcher:function(e){},showSpringBoard:function(){},showAccountSettings:function(){},performLogout:function(){},reload:function(){},showHelp:function(e){},recordStat:function(e,t){},beginStat:function(e,t){},endStat:function(e,t){},showLocalNotification:function(e){},invokeMethodOnCloudOS:function(e){},handleApplicationCrash:function(e,t){},exit:function(e,t){},setAppBanner:function(e){},openIWorkFile:function(e){},openIWorkDocument:function(e,t,n){},getValidateToken:function(){},isReadyToTerminateDidChange:function(e){},setStartupUrl:function(e){},setStartupInfo:function(e){},requestReceived:function(e,t,n){},refreshQuotaData:l.a,requestMeCard:l.a,setRoute:function(e){},setAppPreferences:function(e){},setAccountPreference:function(e,t){},revalidateUser:function(){},getConformingTypes:function(e){},fetchIcon:function(e,t,n,i){},fetchBlankFolderIcon:function(e,t,n){},fetchBlankFileIcon:function(e,t,n){},sendLocalNotification:function(e,t,n,i){},didReceiveSpecialResponse:function(e,t,n){},loadCloudKitJS:function(e){},replaceCurrentApp:function(e){},fetchAppUrl:function(e,t){}},le=n(177),ue=n(1226),de=n(1273),he=w.a.extend(h.a,{name:a.c(),url:r.b(),status:r.b(),staticMembers:{__QUALIFIED_CLASS_NAME__:"ServiceInfo"}}),pe=n(39),fe=n(119);function ge(e){return me(e)||ve(e)}function me(e){return/^([A-Z0-9\.\-\_\+])*([A-Z0-9\+\-\_])+\@[A-Z0-9]+([\-][A-Z0-9]+)*([\.][A-Z0-9\-]+){1,8}$/i.test(e)}function ve(e){return/^[0-9]{5,}$/.test(e)}function _e(e){var t=_e._phoneNumberRegex;if(!t){var n="0-9\\uff10-\\uff19\\u0660-\\u0669\\u06F0-\\u06F9\\u0966-\\u096F\\u09E6-\\u09FF\\u0E50-\\u0E59";_e._phoneNumberRegexAllDigits=new RegExp("^s*\\+?(["+n+"]+)s*$","gi"),t=_e._phoneNumberRegex=new RegExp("^s*([+\\(])?((["+n+"]+)([\\(\\)\\s\\-\\+\\.\\,\\#]{1,3}|x|ext))+(["+n+"]+)s*$","gi")}var i=_e._phoneNumberRegexAllDigits;return t.lastIndex=0,i.lastIndex=0,t.test(e)||i.test(e)}function be(e){return e&&e.replace(/[^0-9]/g,"")}function ye(e){for(var t=0,n=e&&e.length||0;t<n;++t){var i=e[t];if(i.isPrimary)return i}}var Ie=le.b("AppleIdEntryType",{PHONE_NUMBER:"PHONE_NUMBER",EMAIL:"EMAIL"}),we=w.a.extend(h.a,{staticMembers:{EMPTY_USER:null,statusCodes:{INACTIVE:0,FREE_QUALIFIED:2,FREE_NOT_QUALIFIED:3,LITE:4},__QUALIFIED_CLASS_NAME__:"User"},firstName:r.b(""),lastName:r.b(""),statusCode:r.b(),countryCode:r.b(),isChineseAccount:r.b({dependencies:["countryCode"],readOnly:!0,get:Object.assign(function(){return"CHN"===this.countryCode},{__CW__getter:function(e,t,n,i){return"CHN"===i.internalGet(this,t[0+n])}})}),SafariBookmarksHasMigratedToCloudKit:!1,loadInfo:function(e){pe.a.pause();for(var t=Object.keys(e),n=0,i=t.length;n<i;n++){var r=t[n];this.set(r,e[r])}pe.a.resume()},isServiceActive:function(e){return!!re.a.get("authBag").getServiceInfoFor(e)},displayName:r.b({dependencies:["firstName","lastName","displayablePrimaryAppleId"],readOnly:!0,get:Object.assign(function(){var e=this.get("appleIdEntries");if(!e)return Object(fe.a)({givenName:this.firstName,familyName:this.lastName,emailAddress:this.appleId});var t=ye(e),n=t&&t.type;return Object(fe.a)({givenName:this.firstName,familyName:this.lastName,emailAddress:n===Ie.EMAIL.value?t.value:null,phoneNumber:n===Ie.PHONE_NUMBER.value?t.formattedValue:null})},{__CW__getter:function(e,t,n,i){var r=this.get("appleIdEntries");if(!r)return Object(fe.a)({givenName:i.internalGet(this,t[0+n]),familyName:i.internalGet(this,t[1+n]),emailAddress:this.appleId});var a=ye(r),s=a&&a.type;return Object(fe.a)({givenName:i.internalGet(this,t[0+n]),familyName:i.internalGet(this,t[1+n]),emailAddress:s===Ie.EMAIL.value?a.value:null,phoneNumber:s===Ie.PHONE_NUMBER.value?a.formattedValue:null})}})}),appleId:r.b({dependencies:["appleIdEntries"],set:function(e){this._appleId=e},get:Object.assign(function(){var e=this.get("appleIdEntries");if(!e)return this._appleId;var t=ye(e);return t&&(t.type===Ie.PHONE_NUMBER.value?t.formattedValue:t.value)||""},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);if(!r)return this._appleId;var a=ye(r);return a&&(a.type===Ie.PHONE_NUMBER.value?a.formattedValue:a.value)||""}})}),normalizedPrimaryAppleId:r.b({dependencies:["appleIdEntries","appleId"],cacheable:!0,readOnly:!0,get:Object.assign(function(){var e=this.appleIdEntries;if(!e)return this.appleId;var t=ye(e);return t&&(t.type===Ie.PHONE_NUMBER.value?t.canonicalValue:t.value)||""},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);if(!r)return i.internalGet(this,t[1+n]);var a=ye(r);return a&&(a.type===Ie.PHONE_NUMBER.value?a.canonicalValue:a.value)||""}})}),displayablePrimaryAppleId:r.b({dependencies:["appleIdEntries","appleId"],cacheable:!0,readOnly:!0,get:Object.assign(function(){var e=this.appleIdEntries;if(!e)return this.appleId;var t=ye(e);return t&&(t.type===Ie.PHONE_NUMBER.value?t.formattedValue:t.value)||""},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);if(!r)return i.internalGet(this,t[1+n]);var a=ye(r);return a&&(a.type===Ie.PHONE_NUMBER.value?a.formattedValue:a.value)||""}})}),primaryAppleIdType:r.b({dependencies:["appleIdEntries"],readOnly:!0,cacheable:!0,get:Object.assign(function(){var e=this.appleIdEntries;if(!e){var t=this.normalizedPrimaryAppleId,n=void 0;return me(t)?n=Ie.EMAIL:_e(t)&&(n=Ie.PHONE_NUMBER),n}var i=ye(e);return i&&Ie.getItemForValue(i.type)},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);if(!r){var a=this.normalizedPrimaryAppleId,s=void 0;return me(a)?s=Ie.EMAIL:_e(a)&&(s=Ie.PHONE_NUMBER),s}var o=ye(r);return o&&Ie.getItemForValue(o.type)}})}),isPrimaryAppleIdTypePhoneNumber:r.b({readOnly:!0,cacheable:!0,dependencies:["primaryAppleIdType"],get:Object.assign(function(){return this.primaryAppleIdType===Ie.PHONE_NUMBER},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])===Ie.PHONE_NUMBER}})}),isPrimaryAppleIdTypeEmail:r.b({readOnly:!0,cacheable:!0,dependencies:["primaryAppleIdType"],get:Object.assign(function(){return this.primaryAppleIdType===Ie.EMAIL},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])===Ie.EMAIL}})}),primaryEmail:r.b(null),appleIdAliases:r.b(null),appleIdAlias:r.b(null),iCloudAppleIdAlias:null,appleIdEntries:r.b(null),dsid:null,isMyEmailAddressOrPhoneNumber:function(e){return!!e&&(e=(e||"").toLowerCase(),!!this._appleIdEmailsLookupTable[e]||!!_e(e)&&(e=be(e),!!this._appleIdPhoneNumbersLookupTable[e]))},_appleIdEmailsLookupTable:r.b({dependencies:["appleId","primaryEmail","appleIdAliases","appleIdEntries"],cacheable:!0,readOnly:!0,get:function(){return this._buildAppleIdLookupTable(Ie.EMAIL)}}),_appleIdPhoneNumbersLookupTable:r.b({dependencies:["appleId","primaryEmail","appleIdAliases","appleIdEntries"],cacheable:!0,readOnly:!0,get:function(){return this._buildAppleIdLookupTable(Ie.PHONE_NUMBER)}}),hasEmailAddress:r.b({dependencies:["_appleIdEmailsLookupTable"],cacheable:!0,readOnly:!0,get:Object.assign(function(){var e=this._appleIdEmailsLookupTable;return Object.keys(e).length>0},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return Object.keys(r).length>0}})}),_buildAppleIdLookupTable:function(e){var t,n,i={},r=this.appleIdEntries;if(r){for(t=0,n=r.length;t<n;++t){var a=r[t];e&&a.type!==e.value||(i[((a.type===Ie.PHONE_NUMBER.value?a.canonicalValue:a.value)||"").toLowerCase()]=!0)}return i}if(e===Ie.PHONE_NUMBER)return i;var s=this.appleId,o=this.primaryEmail,c=this.appleIdAliases;for(s&&(i[s.toLowerCase()]=!0),o&&(i[o.toLowerCase()]=!0),t=0,n=c&&c.length||0;t<n;++t){var l=c[t];l&&(i[l.toLowerCase()]=!0)}return i}});we.EMPTY_USER=we.create({firstName:"No",lastName:"User"});var Se=w.a.extend(h.a,{user:r.b(p.b(we)),clientInfo:a.c(),processAuthBag:function(e){if(e){var t=e.hasMinimumDeviceForPhotosWeb;void 0===t&&(t=!0),this.set("hasMinimumDeviceForPhotosWeb",t);var n=this.user;n.loadInfo(e.dsInfo),n.loadInfo(e.iCloudInfo),this.set("iCloudEnvironment",e.environment),this.set("isAppleInternal",!(!e.requestInfo||!e.requestInfo.isAppleInternal)),this.set("clientInfo",e.requestInfo),this.set("hsaTrustedBrowser",e.hsaTrustedBrowser),this.set("apps",e.apps),this.loadServicesInfo(e.webservices)}},apps:r.b(null),iCloudEnvironment:null,isAppleInternal:r.b(null),hsaTrustedBrowser:r.b(null),loadServicesInfo:function(e){var t,n,i;for(n in e||s.b("User.loadServicesInfo: `webservices` must be supplied"),t={},e)(i=Q.a(e[n])).name=n,t[n]=he.create(i);this.set("servicesInfo",t)},getServiceInfoFor:function(e){e||o.b.warn("User.getServiceInfoFor(): `serviceName` must be specified");var t=this.get("servicesInfo");return t?t[e]:null},getServiceUrlFor:function(e,t){var n,i=this.getServiceInfoFor(e),r=null;return i?(r=i.get("url")||null)||(n=I.a("User.getServiceUrlFor(): Could not find the URL for “%{name}”",{name:e})):n=I.a("User.getServiceUrlFor(): Could not find service information for “%{name}”",{name:e}),n&&(t?s.b(n):o.b.error(n)),r},servicesInfo:r.b(),hasMinimumDeviceForPhotosWeb:r.b(!1),staticMembers:{__QUALIFIED_CLASS_NAME__:"AuthBag"}}),Ce=w.a.extend(h.a,{timeStamp:r.b((new Date).getTime()),storageUsageByMedia:r.b(),totalStorageInBytes:r.b(),commerceStorageInBytes:r.b(),usedStorageInBytes:r.b(),compStorageInBytes:r.b(),overQuota:r.b(),paidQuota:r.b(),staticMembers:{__QUALIFIED_CLASS_NAME__:"QuotaInfo"}}),Oe=n(151),Ae=r.a.extend({cloudOSEnvironmentKey:null,processCloudOSValue:function(e,t){return e},clearUserState:function(e){return e},staticMembers:{__QUALIFIED_CLASS_NAME__:"EnvironmentProperty"}}),Ee=le.b("AuthenticationState",{NOT_AUTHENTICATED:0,PARTIALLY_AUTHENTICATED_HSA:1,AUTHENTICATED:2,PARTIALLY_AUTHENTICATED_MANAGED_APPLE_ID:3}),Te=w.a.extend(h.a,{accountMenu:Ae.create(),activeXFileVersion:Ae.create(),authBag:Ae.create({defaultValue:function(){return Se.create()},processCloudOSValue:function(e,t){return t.processAuthBag(e),t},clearUserState:function(){return Se.create()}}),clientId:Ae.create(),statSessionId:Ae.create(),versions:Ae.create(),currentlyActiveApplication:Ae.create(),route:Ae.create(),displayName:Ae.create(),accountPreferences:Ae.create(),appPreferences:Ae.create(),appParameters:Ae.create(),iCloudEnvironment:Ae.create({cloudOSEnvironmentKey:"environment"}),hostname:Ae.create(),isBeta:Ae.create(),isDeveloper:Ae.create(),isFuture:Ae.create(),isCarry:Ae.create(),isCarryUser:Ae.create(),requestedStartupUrl:Ae.create(),requestedStartupInfo:Ae.create(),userAuthenticationState:Ae.create(),userStatusCode:Ae.create(),pushToken:Ae.create(),defaultAssetHostname:Ae.create(),useAdditionalTopLevelClassNamesProvidedByCloudOS:Ae.create({defaultValue:!0}),isUserNotAuthenticated:r.b({readOnly:!0,dependencies:["userAuthenticationState"],get:Object.assign(function(){return this.userAuthenticationState===Ee.NOT_AUTHENTICATED.value},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])===Ee.NOT_AUTHENTICATED.value}})}),isUserPartiallyAuthenticated:r.b({readOnly:!0,dependencies:["userAuthenticationState"],get:Object.assign(function(){return this.userAuthenticationState===Ee.PARTIALLY_AUTHENTICATED_HSA.value},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])===Ee.PARTIALLY_AUTHENTICATED_HSA.value}})}),isUserAuthenticated:r.b({readOnly:!0,dependencies:["userAuthenticationState"],get:Object.assign(function(){return this.userAuthenticationState===Ee.AUTHENTICATED.value},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])===Ee.AUTHENTICATED.value}})}),isLiteAccount:r.b({readOnly:!0,dependencies:["userStatusCode"],get:Object.assign(function(){return 4===this.userStatusCode},{__CW__getter:function(e,t,n,i){return 4===i.internalGet(this,t[0+n])}})}),userIsAuthenticated:r.b({readOnly:!0,dependencies:["isUserAuthenticated"],get:Object.assign(function(){return this.get("isUserAuthenticated")},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])}})}),quotaData:Ae.create({defaultValue:function(){return Ce.create()},processCloudOSValue:function(e,t){return Ce.create(e)},clearUserState:function(){return Ce.create()}}),isUserOverQuota:r.b({readOnly:!0,dependencies:["quotaData"],get:Object.assign(function(){var e=this.quotaData;return e?e.get("overQuota"):null},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return r?r.get("overQuota"):null}})}),_environmentProperties:null,initializeClass:function(){var e=arguments;this.__s._$1hS$initializeClass.apply(this,e);var t=this.getMetadataByType(Ae),n=this._environmentProperties={};for(var i in t)if(t.hasOwnProperty(i)){var r=t[i];i=r.cloudOSEnvironmentKey||i,r.cloudOSEnvironmentKey=i,n[i]=r}},processCloudOSEnvironment:function(e){var t=this,n=g.a.create();if(!e)return n.resolve();for(var i in e)e.hasOwnProperty(i)&&this._processCloudOSEnvironmentProperty(i,e[i]);return this._processRegionFormattingRules(e).then(function(){var i=e.additionalClassNamesForBody;i&&t._setupAdditionalClassNamesProvidedByCloudOS(i),n.resolve()}),n},_processRegionFormattingRules:function(e){var t=g.a.create(),n=e.regionFormattingRules;if(n)if(e.regionFormattingRulesVersion===Oe.a.rulesVersion)o.b.info("RegionFormatter: registering CloudOS rules"),Oe.a.registerRegionFormat(n),t.resolve();else{var i=n.locale,r=e.regionFormattingRulesBaseUrl,a=this._getRegionFormattingHostInfo(r);o.b.info("RegionFormatter: version mismatch - loading new rules"),Oe.a.loadFormattingRules(a,i).then(function(){o.b.info("RegionFormatter: version mismatch - new rules loaded"),t.resolve()}).catch(function(e){s.b("Could not load default formatting rules (en-US)",e)})}else t.resolve();return t},_processCloudOSEnvironmentProperty:function(e,t){var n=this._environmentProperties[e];if(n&&n.processCloudOSValue){e=n.key;var i=this.get(e),r=n.processCloudOSValue.call(this,t,i);ue.a(this,e,r)}},_setupAdditionalClassNamesProvidedByCloudOS:function(e){if(this.useAdditionalTopLevelClassNamesProvidedByCloudOS&&e){var t=e.split(",");document.documentElement.classList.add(t)}},_getRegionFormattingHostInfo:function(e){var t=this.defaultAssetHostname;return e||(e="https://"+t+"/locales/"),de.a.create({urlString:e+Oe.a.rulesVersion,requestProperties:{useCredentialsIfCrossOrigin:!1}})},clearUserState:function(){var e=this.getMetadataByType(Ae);for(var t in e)if(e.hasOwnProperty(t)){var n=e[t];this.set(t,n.clearUserState(this.get(t)))}},__superMap:{_$1hS$initializeClass:"initializeClass"},staticMembers:{__QUALIFIED_CLASS_NAME__:"Environment"}}),Me=n(1187),De=n(1195),Le=n(1174),Ne=n(1193),Pe=te.extend({init:function(e){this.__s._$2x$init.call(this,e),this._allRegistedReceivers=[],this._registeredReceivers={}},addTargetActionForOrigin:function(e,t,n){var i=this._registeredReceivers[n];i||(i=this._registeredReceivers[n]=[]);var r={target:e,action:t};i.push(r),this._allRegistedReceivers.push(r)},removeTargetActionForOrigin:function(e,t,n){var i=this._registeredReceivers[n];this._removeTargetActionFromArray(e,t,i),this._removeTargetActionFromArray(e,t,this._allRegistedReceivers)},getTargetActionsForOrigin:function(e){return"*"===e?this._allRegistedReceivers:this._registeredReceivers[e]||null},dispatchMessage:function(e){var t=e.origin,n=this.getTargetActionsForOrigin(t),i=n?n.length:0,r=!1;this.logTrace("dispatching message from origin "+t);for(var a=0;a<i;a++){var o=n[a],c=o.target,l=o.action;v.a(l)&&(l=c[l],Le.a(l)||s.b("Cannot dispath message. No method '"+l+"' for target",{channel:this,action:l,message:e})),this.logTrace("dispatching message to target "+c),l.call(c,e),r=!0}r||this.logTrace("No target-action pair for message")},_removeTargetActionFromArray:function(e,t,n){for(var i=n.length,r=null,a=0;a<i;a++){var s=n[a];if(s.target===e&&s.action===t){r=s;break}}r&&Ne.a(r,n)},__superMap:{_$2x$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"RPCBaseInputChannel"}}),Re=w.a.extend({data:null,origin:null,source:null,originalEvent:null,staticMembers:{__QUALIFIED_CLASS_NAME__:"RPCMessageEvent"}}),xe=Pe.extend({init:function(e){this.__s._$3v$init.call(this,e),this._receivedMessageHandler=function(e){var t=e.data,n=e.origin,i=e.source;if(t&&n&&i){v.a(t)&&(t=JSON.parse(t));var r=Re.create({data:t,origin:n,originalEvent:e});r.set("source",i),this.dispatchMessage.call(this,r)}}.bind(this)},willOpen:function(){Me.a(this.window,"message",this._receivedMessageHandler),this.didOpen()},willClose:function(){De.a(this.window,"message",this._receivedMessageHandler),this.didClose()},__superMap:{_$3v$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"RPCInputChannel"}}),Fe={"https://www.icloud.com":!0,"https://beta.icloud.com":!0,"https://future.icloud.com":!0,"https://carry.icloud.com":!0,"https://www.icloud.com.cn":!0},ke=window,Ve=B.Activating.Init.createSubstate("WaitingForCloudOSRunMessage"),je=z.extend(ce,{_rpcCallbacks:p.b(Object),initiatedCloudKitJSLoading:!1,inputChannel:a.c({readOnly:!0}),outputChannel:a.c({readOnly:!0}),cloudOSMethodNames:null,cloudOSState:null,originForIO:null,environment:r.b(p.b(Te)),init:function(e){var t=arguments;this.__s._$21p$init.apply(this,t),window.CloudOS=oe,window.CK=se,this._cosMessageHandlers={},this._cosPendingMessages=[];var n=this.application;this.setCloudMessageHandler("_applicationShouldInvokeMain",this,this._cosMessagePrepareApplicationForLoad),this.setCloudMessageHandler("_cloudOSStateChange",this,this._cosMessageCloudOSStateChange),this.setCloudMessageHandler("_clearUserState",this,this._cosMessageClearUserState),this.setCloudMessageHandler("didFetchStartup",this,this._cloudosDidFetchStartup),this.setCloudMessageHandler("applicationWillBecomeActive",n,n.willBecomeActive),this.setCloudMessageHandler("applicationDidBecomeActive",n,n.didBecomeActive),this.setCloudMessageHandler("applicationWillSuspend",n,n.willBecomeSuspended),this.setCloudMessageHandler("applicationDidSuspend",n,n.didBecomeSuspended),this.setCloudMessageHandler("applicationShouldRefresh",n,n.shouldRefresh),this.setCloudMessageHandler("receiveMeCard",n,n.receiveMeCard),this.setCloudMessageHandler("userDidRevalidate",n,n.userDidRevalidate),this.setCloudMessageHandler("quotaDataDidChange",n,n.quotaDataDidChange),this.setCloudMessageHandler("quotaDataFailedToLoad",n,n.quotaDataFailedToLoad),this.setCloudMessageHandler("accountPreferencesDidChange",n,n.accountPreferencesDidChange),this.setCloudMessageHandler("didReceiveNotification",n,n.didReceiveNotification),this.setCloudMessageHandler("willResolveCKShortGUID",n,n.willResolveCKShortGUID),this.setCloudMessageHandler("didResolveCKShortGUID",n,n.didResolveCKShortGUID),this.setCloudMessageHandler("didFailToResolveCKShortGUID",n,n.didFailToResolveCKShortGUID),this.setCloudMessageHandler("didResolveCKShortGUIDWithoutAcceptance",n,n.didResolveCKShortGUIDWithoutAcceptance),this.setCloudMessageHandler("ckShortGUIDDidChange",n,n.ckShortGUIDDidChange),this.setCloudMessageHandler("didFetchAppUrl",n,n.didFetchAppUrl),this.setCloudMessageHandler("miniSpringboardDismissed",n,n.miniSpringboardDismissed),this.setCloudMessageHandler("_sleep",n,n._sleep),this.setCloudMessageHandler("_wake",n,n._wake),this.setCloudMessageHandler("_hasReceivedFocus",n,n._hasReceivedFocus),this.setCloudMessageHandler("_mouseMove",n,n._mouseMove),this.setCloudMessageHandler("_mouseUp",n,n._mouseUp)},loadInputChannelForWindow:function(e){var t=window["cosk.system.applicationDriver.loadInputChannelDelegate"];return t?(this.logTrace("using delegate to load input channel"),t(this,e)):xe.create({window:e})},loadOutputChannelForWindowWithOrigin:function(e,t){var n=window["cosk.system.applicationDriver.loadOutputChannelDelegate"];return n?(this.logTrace("using delegate to load output channel"),n(this,e,this.originForIO)):ie.create({window:e,origin:this.originForIO})},setCloudMessageHandler:function(e,t,n){this._cosMessageHandlers[e]={target:t,action:n}},didStartInitialActivation:function(){var e=arguments;this.__s._$35O$didStartInitialActivation.apply(this,e);var t=this._getInputChannelWindow(),n=void 0;for(n in Fe){var i=Fe[n]=this.loadInputChannelForWindow(t);i.addTargetActionForOrigin(this,"_handleIncomingCloudOSMessage",n),i.open()}this.logTrace("waiting for initial CloudOS message"),this.setState(Ve)},didStartFinalizingActivation:function(){var e=arguments;this.__s._$3EB$didStartFinalizingActivation.apply(this,e);var t=this._cosMessageHandlers;this._cosPendingMessages.forEach(function(e){var n=e.methodName,i=e.args,r=t[n],a=r.target;r.action.apply(a,i)}),this._cosPendingMessages=[],this._sendCloudOSMessage("applicationIsReady"),this.didFinishFinalizingActivation()},isReadyToTerminateDidChange:function(e){this._sendCloudOSMessage("isReadyToTerminateDidChange",e)},sendCloudOSMessage:function(e){e||(e={}),e.isCloudOSMessage||(e.isCloudOSMessage=!0),e.appName||(e.appName=this.application.name);var t=f.a();e.id=t;var n=this._rpcCallbacks,i=g.a.create();n[t]=i,m.a(function(e){var t=new Error("Timed out.");e.reject(t)},15e3,i);var r=this.outputChannel;return r?r.sendMessage(e):o.b.warn("Could not send message.",e),i},_handleIncomingCloudOSMessage:function(e){var t=e.data;if(!this.originForIO){var n=void 0;for(n in Fe)n!==e.origin?(Fe[n].close(),Fe[n]=!1):this._inputChannel=Fe[n];this.originForIO=e.origin}if(t.isCloudOSMessage){if(!this._outputChannel){var i=this.getIOChannelOrigin(),r=this._outputChannel=this.loadOutputChannelForWindowWithOrigin(e.source,i);this.logTrace("loaded output channel"),r.open()}var a=t.methodName,s=t.args;this.logTrace("Received CloudOS message "+a),this._dispatchCloudOSMessageForMethodName(a,s)}else o.b.debug("ApplicationDriver._handleIncomingCloudOSMessage: Received message not from CloudOS, ignoring.")},_dispatchCloudOSMessageForMethodName:function(e,t){var n=this,i=t[0],r=this._rpcCallbacks,a=r[i];if(a){delete r[i],this._rpcCallbacks=r,t.shift();var s=t.shift();try{a.resolve(s)}catch(e){this.handleApplicationCrash({error:e.message||""+e},o.b.stringifyRecordedLogMessages())}}else{var c=this._cosMessageHandlers[e];if(c){var l=c.target,u=c.action,d=!!l[u],h=v.a(u)?l[u]:u,p=function(e){n.handleApplicationCrash({error:e.message||""+e,action:u.toString(),isMethod:d},o.b.stringifyRecordedLogMessages())};try{var f=h.apply(l,t);f&&f.catch&&f.catch(p)}catch(e){p(e)}}else o.b.info(this+" No handler for CloudOS message "+e)}},_sendCloudOSMessage:function(e){this.logTrace("sending CloudOS message "+e);var t=_.a(arguments,1),n=this._createMessageForCloudOS(e,t),i=this.outputChannel;i?i.sendMessage(n):o.b.warn("Could not send message. "+n)},_sendCloudOSMessageWithPromise:function(e){this.logTrace("sending CloudOS message with promise "+e);var t=_.a(arguments,1),n=this._createMessageForCloudOS(e,t);return this.sendCloudOSMessage(n)},_createMessageForCloudOS:function(e,t){return{isCloudOSMessage:!0,methodName:e,appName:this.application.name,args:t,buildNumber:window.__CW_BUILD_INFO.buildNumber,masteringNumber:window.__CW_BUILD_INFO.masteringNumber}},getIOChannelOrigin:function(){return window["cosk.system.applicationDriver.ioChannelOrigin"]||this.originForIO},_getInputChannelWindow:function(){return window["cosk.system.applicationDriver.inputChannelWindow"]||ke},_cosMessagePrepareApplicationForLoad:function(e,t,n,i){var r=this;return this.fatalErrorIfNotInState(Ve),this.cloudOSMethodNames=e,this.cloudOSState=t,this.environment.processCloudOSEnvironment(t).then(function(){window.addEventListener("unload",function(){r.appWillUnload()}),r.didFinishInitialActivation()})},_cosMessageCloudOSStateChange:function(e){var t=this.environment;this._checkIfAppPreferencesChanged(e),t.processCloudOSEnvironment(e)},_cosMessageClearUserState:function(){this.environment.clearUserState()},_cloudosDidFetchStartup:function(e,t,n){var i=this.state,r=this.application;if(i.fullValue>=B.Activating.Finalize.fullValue){var a=r.didFetchStartup;a&&a.apply(r,[e,t,n])}else this._cosPendingMessages.push({methodName:"didFetchStartup",args:[e,t,n]})},_checkIfAppPreferencesChanged:function(e){var t=e.appPreferences,n=this.application,i=void 0;if(t)for(i in t)i===n.get("name")&&n.appPreferencesDidChange()},showAppSwitcher:function(e){e||(e=Be),this._sendCloudOSMessage("showAppSwitcher",{top:e.get("top"),left:e.get("left"),width:e.get("width"),height:e.get("height")})},showSpringBoard:function(){this._sendCloudOSMessage("showSpringBoard")},showAccountSettings:function(){this._sendCloudOSMessage("showAccountSettings")},performLogout:function(){this._sendCloudOSMessage("performLogout"),this.get("application").willBecomeUnloaded()},reload:function(){this._sendCloudOSMessage("reload"),this.get("application").willBecomeUnloaded()},appWillUnload:function(){var e=o.b.stringifyRecordedLogMessages();this._sendCloudOSMessage("appWillUnload",e)},recordStat:function(e,t){this._sendCloudOSMessage("recordStat",e,t)},requestSent:function(){this._sendCloudOSMessage("requestSent")},requestReceived:function(e,t,n,i){this._sendCloudOSMessage("requestReceived",e,t,n,i)},beginStat:function(e,t){this._sendCloudOSMessage("beginStat",e,t)},endStat:function(e,t){this._sendCloudOSMessage("endStat",e,t)},invokeMethodOnCloudOS:function(e){this._sendCloudOSMessage.apply(this,arguments)},handleApplicationCrash:function(e,t){var n=re.a.authBag,i=re.a.currentUser,r={};r.applicationName=re.a.cloudOSApplication.name,r.type="exception",r.buildNumber=__CW_BUILD_INFO.buildNumber,r.masteringNumber=__CW_BUILD_INFO.masteringNumber,r.environment=n.get("iCloudEnvironment"),r.isFatal=!0,r.time=new Date+"        ("+Date.now()+")",r.host=window.location.host,r.userAgent=navigator.userAgent+"",i&&(r.dsid=i.dsid),Object.assign(r,e),this._sendCloudOSMessage("handleApplicationCrash",r,t)},exit:function(e,t){this.get("state")!==B.Deactivating&&(this._sendCloudOSMessage("exit",e,t),this.get("application").willBecomeUnloaded())},showHelp:function(e){var t=re.a.currentUser.statusCode===we.statusCodes.LITE,n=b.c(),i="en"===n?"":"?lang="+n,r=y.a.sharedInstance.isChrome?705:675,a="http://help.apple.com/"+(t?"icloudwebonly":"icloud");a=a+"/"+i,e&&(a+="#"+e),window.open(a,"help","height="+r+",width=875,location=0,status=0,scrollbars=0")},setAppBanner:function(e){var t=this.application;this._sendCloudOSMessage("setAppBanner",e,t.name)},openIWorkFile:function(e){var t=e.appName,n=this.environment.defaultAssetHostname;t=t.replace(/-tef$/,"");var i=e.sharingToken,r=e.zone,a=e.documentId,s=re.a.currentUser.dsid,o=void 0;return i?o=I.a("//%{defaultAssetHostname}/%{appName}/%{sharingToken}",{defaultAssetHostname:n,appName:t,sharingToken:i}):a&&(o=I.a("//%{defaultAssetHostname}/%{appName}/docws:%{dsid}:%{zone}:%{docId}",{defaultAssetHostname:n,appName:t,dsid:s,zone:r,docId:a})),window.open(o,"_blank")},getValidateToken:function(){return C.create().getCookie("X-APPLE-WEBAUTH-VALIDATE")},setStartupUrl:function(e){this._sendCloudOSMessage("setStartupUrl",e),this.environment.requestedStartupUrl=e},setStartupInfo:function(e){this._sendCloudOSMessage("setStartupInfo",e),this.environment.requestedStartupInfo=e},refreshQuotaData:function(){this._sendCloudOSMessage("refreshQuotaData")},fetchIcon:function(e,t,n,i){return n||(n=O.a.sharedInstance.devicePixelRatio),this._sendCloudOSMessageWithPromise("fetchIcon",e,t,n,i)},getConformingTypes:function(e){return this._sendCloudOSMessageWithPromise("getConformingTypes",e)},fetchBlankFolderIcon:function(e,t,n){return n||(n="web"),this.fetchIcon("public.folder",e,t,n)},fetchBlankFileIcon:function(e,t,n){return n||(n="web"),this.fetchIcon("public.item",e,t,n)},requestMeCard:function(){this._sendCloudOSMessage("requestMeCard")},setRoute:function(e){this._sendCloudOSMessage("setRoute",e)},setTitle:function(e){this._sendCloudOSMessage("setTitle",e)},openIWorkDocument:function(e,t,n){var i={isCloudOSMessage:!0,methodName:"openFromSource",isWindowApplicationMessage:!0,args:{fileName:e,url:t,source:this.getPath("application.name")}},r="/iw/#open_from_source/"+n,a=ae.openWindowApplication(r,"_blank");ae.passWindowApplicationMessage(a,"openFromSource",i.args)},setAppPreferences:function(e){this._sendCloudOSMessage("setAppPreferences",e)},setAccountPreference:function(e,t){this._sendCloudOSMessage("setAccountPreference",e,t)},revalidateUser:function(){return this._sendCloudOSMessageWithPromise("revalidateUser")},didReceiveSpecialResponse:function(e,t,n){this._sendCloudOSMessage("didReceiveSpecialResponse",e,t,n)},sendLocalNotification:function(e,t,n,i){this._sendCloudOSMessage("sendLocalNotification",e,t,n,i)},loadCloudKitJS:function(e){var t=this.initiatedCloudKitJSLoading;if(!window.CloudKit&&!t){var n=e||re.a.environment.versions.cloudkitjs,i="cdn.apple-cloudkit.com";re.a.environment.isCarry&&(i="carry.icloud.com");var r="https://"+i+"/ck/"+n+"/cloudkit.js",a=document.createElement("script");a.setAttribute("src",r),document.head.appendChild(a),this.initiatedCloudKitJSLoading=!0}},isHostReachable:function(e){var t=A.a.create(e);return t.pathname="/blank.png",E.a.create({url:t}).send()},replaceCurrentApp:function(e){this._sendCloudOSMessage("replaceCurrentApp",e)},fetchAppUrl:function(e,t){this._sendCloudOSMessage("fetchAppUrl",e,t)},__superMap:{_$21p$init:"init",_$35O$didStartInitialActivation:"didStartInitialActivation",_$3EB$didStartFinalizingActivation:"didStartFinalizingActivation"},staticMembers:{__QUALIFIED_CLASS_NAME__:"ApplicationDriver"}}),Be={top:0,left:0,width:0,height:0,get:function(e){return this[e]}},Ue=n(191);Error.stackTraceLimit=1/0;var We=w.a.extend({init:function(){var e=arguments;this.__s._$64$init.apply(this,e)},error:null,handleException:function(){var e=this.get("_errorReportRequestBody");this.createModifiedErrorBodyBeforeSend&&(e=this.createModifiedErrorBodyBeforeSend(e)),re.a.get("cloudOSService").handleApplicationCrash(e,o.b.stringifyRecordedLogMessages())},createModifiedErrorBodyBeforeSend:null,_errorReportRequestBody:a.c({get:function(){var e=this.get("error"),t={};return t.error=e.message||""+e,t.errorContext=Ue.a(e.context),t.stack=this._truncateStack(e.stack),t.line=this._getErrorLineNumber(e),t}}),_truncateStack:function(e){if(!e)return e;var t=(e=e.trim()).split("\n"),n=t.length;if(n<=501)return e;var i=n-400-100;return t.splice(400,i,"... "+i+" lines truncated ..."),t.join("\n")},_getErrorLineNumber:function(e){var t=e.lineNumber||e.line;if(!t)try{var n=e.stack.split("\n")[1].split(":");t=n[n.length-2]}catch(e){t="Unknown"}return t},__superMap:{_$64$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"FatalExceptionHandler"}}),Ge=j("CloudOS Application",function(e){e("NotLoaded"),e("Loading",function(e){e("Init"),e("Prepare"),e("Finalize")}),e("Loaded",function(e){e("Prepared"),e("Activating"),e("Active"),e("Suspending"),e("Suspended")}),e("Unloading"),e("FatalError")}),He=Ge.NotLoaded,$e=Ge.Loading,ze=Ge.Loaded,Ke=Ge.Unloading,Qe=Ge.FatalError,qe=i.a.extend(T,M,{name:r.b({readOnly:!0}),cloudOSState:r.b({readOnly:!0,get:function(){return this.getCurrentStateForStateEnumGroup(Ge)}}),driver:a.c({readOnly:!0,get:function(){var e=this._driver;return e||(e=this._driver=this.loadDriver())||s.b("Error loading cloud OS application driver."),e}}),cloudOSService:r.b({readOnly:!0,strong:!0,get:function(){var e=this._cloudOSService;return e||(e=this._cloudOSService=this.loadCloudOSService())||s.b("Error loading cloud OS service"),e}}),isBeta:a.c({readOnly:!0,get:function(){return"beta.icloud.com"===window.location.host}}),isCarry:a.c({readOnly:!0,get:function(){return"carry.icloud.com"===window.location.host}}),isFuture:a.c({readOnly:!0,get:function(){return"future.icloud.com"===window.location.host}}),init:function(e){this.redirectToCloudOSIfNeeded(),e.name||s.b("Cannot create application. Requires a name"),this.registerStateEnumGroup(Ge,He,Qe),this.__s._$s7$init.call(this,e),o.b.outputMessagePrefix=this.get("capitalizedName")+":  ",re.a.set("cloudOSApplication",this)},capitalizedName:r.b({dependencies:["name"],readOnly:!0,get:Object.assign(function(){var e=this.name;return e&&(e="i"!==e.charAt(0)?c.a(e):"i"+c.a(e.substring(1))),e},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return r&&(r="i"!==r.charAt(0)?c.a(r):"i"+c.a(r.substring(1))),r}})}),loadDriver:function(){var e=window["cosk.application.loadDriverDelegate"];return e?(this.logTrace("using delegate to load driver"),e(this)):je.create({application:this})},loadCloudOSService:function(){var e=window["cosk.application.loadCloudOSServiceDelegate"];return e?(this.logTrace("using delegate to load CloudOS service"),e(this)):this.get("driver")},load:function(){this.transitionFromStateToState(He,$e.Init),this.get("driver").activate()},prepareForLoad:function(){this.transitionFromStateToState($e.Init,$e.Prepare)},didPrepareForLoad:function(){this.transitionFromStateToState($e.Prepare,$e.Finalize),this.get("driver").applicationDidPrepareForLoad()},didBecomeLoaded:function(){this.transitionFromStateToState($e.Finalize,ze.Prepared)},willBecomeActive:function(){this.fatalErrorIfNotInState(ze.Prepared,ze.Suspended),this.setState(ze.Activating)},didBecomeActive:function(){this.transitionFromStateToState(ze.Activating,ze.Active)},willBecomeSuspended:function(){this.transitionFromStateToState(ze.Active,ze.Suspending)},didBecomeSuspended:function(){this.transitionFromStateToState(ze.Suspending,ze.Suspended)},willBecomeUnloaded:function(){this.setState(Ke),this.get("driver").didStartDeactivation()},didBecomeUnloaded:function(){this.transitionFromStateToState(Ke,He),this.get("driver").didFinishDeactivation()},didFetchStartup:function(e,t,n){},quotaDataDidChange:l.a,quotaDataFailedToLoad:l.a,receiveMeCard:l.a,didReceiveNotification:l.a,isReadyToTerminate:r.b(!0),setIsReadyToTerminateBlock:function(e){u.a(e)||s.b("You must call setIsReadyToTerminateBlock with an identifying token.",this);var t=this._suddenTerminationBlockTokenSet;t||(t=this._suddenTerminationBlockTokenSet=new Set),t.add(e),this.isReadyToTerminate=!1},removeIsReadyToTerminateBlock:function(e){u.a(e)||s.b("You must call removeIsReadyToTerminateBlock with an identifying token.",this);var t=this._suddenTerminationBlockTokenSet;t||(t=this._suddenTerminationBlockTokenSet=new Set),t.delete(e),0===t.size&&(this.isReadyToTerminate=!0)},_suddenTerminationBlockTokenSet:null,shouldRefresh:function(){},toString:function(){return"["+d.a(this)+": "+this._name+"]"},fatalExceptionHandlerClass:We,handleException:function(e){var t=arguments;this.__s._$2vm$handleException.apply(this,t),this.fatalExceptionHandlerClass.create({error:e}).handleException()},_isReadyToTerminateDidChange:h.e("isReadyToTerminate",function(e){this._isReadyToTerminate=e;var t=this.get("cloudOSService");t&&t.isReadyToTerminateDidChange(e)}),transitionFromStateToState:function(){var e=arguments;this.__s._$35U$transitionFromStateToState.apply(this,e),this.propertyChanged("cloudOSState")},setState:function(){var e=arguments;this.__s._$371$setState.apply(this,e),this.propertyChanged("cloudOSState")},redirectToCloudOSIfNeeded:function(){var e=window.location.pathname;if(window===window.top&&"/"!==e){var t=e.match(/\/applications\/(.*?)\//);t&&t[1]&&(window.location="https://"+window.location.hostname+"/#"+t[1])}},appPreferencesDidChange:l.a,accountPreferencesDidChange:l.a,userDidRevalidate:l.a,didFetchAppUrl:l.a,willResolveCKShortGUID:l.a,didResolveCKShortGUID:l.a,didFailToResolveCKShortGUID:l.a,didResolveCKShortGUIDWithoutAcceptance:l.a,ckShortGUIDDidChange:l.a,miniSpringboardDismissed:l.a,_sleep:l.a,_wake:l.a,_hasReceivedFocus:l.a,_mouseMove:l.a,_mouseUp:l.a,__superMap:{_$s7$init:"init",_$2vm$handleException:"handleException",_$35U$transitionFromStateToState:"transitionFromStateToState",_$371$setState:"setState"},staticMembers:{__QUALIFIED_CLASS_NAME__:"Application"}}),Ye=w.a.extend({name:null,application:a.c({readOnly:!0,get:function(){var e=this._application;return e||(e=this._application=this.loadApplication()),e}}),init:function(e){this.__s._$My$init.call(this,e),re.a.set("launcher",this)},loadApplication:function(){return null},launch:function(){},willLaunchApplication:function(){},didLaunchApplication:function(){},__superMap:{_$My$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"BaseApplicationLauncher"}}),Ze=Ye.extend({launch:function(){var e=this.get("application");e?(this.willLaunchApplication(),e.load(),this.didLaunchApplication()):o.b.error(this+" Missing application. Cannot launch app")},staticMembers:{__QUALIFIED_CLASS_NAME__:"ApplicationLauncher"}}),Je=n(184),Xe=w.a.extend({origin:null,cloudOSHost:null,init:function(e){this.__s._$2u$init.call(this,e),this._registeredEventListeners=[],this._messageQueue=[],this._sendingMessage=!1},addEventListener:function(e,t){this._registeredEventListeners.push(t)},removeEventListener:function(e,t){var n=this._registeredEventListeners,i=n.indexOf(t);i>=0&&n.splice(i,1)},sendMessage:function(e,t){this._messageQueue.push({methodName:e,args:t||[]}),this._trySendingNextMesssage()},_trySendingNextMesssage:function(){if(!this._sendingMessage){var e=this._messageQueue;if(0!==e.length){var t=e.shift(),n=this;this._sendingMessage=!0,setTimeout(function(){t.isCloudOSMessage=!0;for(var e=n.origin,i=n.cloudOSHost,r=n._registeredEventListeners,a=0,s=r.length;a<s;a++){var o=r[a];o&&o.call(window,{data:t,source:i,origin:e})}n._sendingMessage=!1,n._trySendingNextMesssage()})}}},__superMap:{_$2u$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"ApplicationWindowProxy"}}),et=n(1283),tt=n(1135),nt=(n(981),n(409)),it=n(831),rt=n(121),at=n(1176),st=n(93),ot=n(789),ct=nt.a.extend(it.a,ot.b,{staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"cw-checkbox",children:[{type:"ELEMENT",tagname:"input",name:"controlElement",attributes:{id:{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"inputGUID",attributes:{},attribute:"id"},type:"checkbox"}},{type:"ELEMENT",tagname:"label",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"label",attributes:{}}],name:"labelElement",attributes:{for:{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"inputGUID",attributes:{},attribute:"for"}}}]}},className:"cw-ui-checkbox",__QUALIFIED_CLASS_NAME__:"Checkbox"},inputGUID:Object(r.b)({type:"string",defaultValue:function(){return Object(rt.a)(this)+"Input"}}),isChecked:Object(r.b)({type:"boolean",defaultValue:!1,didChange:function(e){"boolean"==typeof e?(this.controlElement.checked=e,this.controlElement.indeterminate=!1):this.controlElement.indeterminate=!0}}),defaultFocusElement:Object(st.c)("controlElement"),label:Object(r.b)(""),init:function(){var e=arguments;this.__s._$1_m$init.apply(this,e),Object(Me.a)(this.labelElement,"click",Object(at.a)(this.handleLabelClickEvent,this))},dispose:function(){var e=arguments;Object(De.a)(this.labelElement,"click",Object(at.a)(this.handleLabelClickEvent,this)),this.__s._$23h$dispose.apply(this,e)},change:function(e){this.isChecked=this.controlElement.checked},pointerDown:function(e){e.preventDefault()},handleLabelClickEvent:function(e){if(e.target===this.labelElement){e.preventDefault();var t=this.controlElement;t&&t.click()}},__superMap:{_$1_m$init:"init",_$23h$dispose:"dispose"}}),lt=et.a.extend({viewClass:tt.b.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",name:"alertIcon",classes:["alert-icon"]},{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"h1",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"message",attributes:{}}]},{type:"ELEMENT",tagname:"p",children:[{type:"VIEWOUTLET",tagname:"view",name:"hsaTrustedBrowserCheckbox"}]}],classes:["alert-text-container"]}],classes:["alert-main-content"]},{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"primaryButtonView"},{type:"ELEMENT",tagname:"span",classes:["divider",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"alternateButtonView",truevalue:"",falsevalue:"cw-hidden",attributes:{}}]},{type:"VIEWOUTLET",tagname:"view",name:"alternateButtonView"}]},{type:"VIEWOUTLET",tagname:"view",name:"otherButtonView"}],name:"buttonContainer",classes:["alert-button-container",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"primaryButtonView",truevalue:"has-primary-btn",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"alternateButtonView",truevalue:"has-alternate-btn",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"otherButtonView",truevalue:"has-other-btn",attributes:{}}]}],name:"alertView",classes:["cw-alert"],attributes:{role:{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"modalDialogRole",attributes:{},attribute:"role"},"aria-label":{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"alertViewArialLabel",attributes:{},attribute:"aria-label"},tabindex:"-1"}}],name:"modalView",classes:["cw-alert-modal",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isOpen",truevalue:"is-open",falsevalue:"is-closing",attributes:{}}]}}}),view:r.b({downstreamBindings:{hsaTrustedBrowserCheckbox:"(owner).hsaTrustedBrowserCheckbox"}}),showingLogoutAlert:r.b(),hsaTrustedBrowser:r.b(),iconNames:"icon-icloud",message:b.d("HSA.SignoutDialog.Title"),primaryButton:{title:b.d("HSA.SignoutDialog.SignoutButton"),action:"logout"},alternateButton:{title:b.d("Button.Cancel")},hsaTrustedBrowserCheckbox:r.b({defaultValue:p.b(ct,{label:b.d("HSA.SignoutDialog.CheckboxTitle"),additionalClassNames:["cw-theme","cw-checkbox","hsa-trusted-browser"]}),downstreamBindings:{isChecked:"(owner).hsaTrustedBrowser"}}),logout:function(){return!1},modalDialogDidDismiss:function(){var e=arguments;this.__s._$dz$modalDialogDidDismiss.apply(this,e),this.showingLogoutAlert=!1,this.view.enableAllButtons()},__superMap:{_$dz$modalDialogDidDismiss:"modalDialogDidDismiss"},staticMembers:{__QUALIFIED_CLASS_NAME__:"LogoutAlertViewController"}}),ut=le.b("EmbeddedCloudOSHost.State",["Inactive","LoggedOut","LoggingIn","LoggedIn","LoggingOut","Validating","FetchingPreferences"]),dt=[{action:"showAccountSettings",disableWhenCurrentApp:"settings",target:"CloudOS",title:"iCloud Settings"},{action:"performLogout",target:"CloudOS",title:"Sign Out"}],ht=w.a.extend(h.a,Je.a,{staticMembers:{State:ut,__QUALIFIED_CLASS_NAME__:"CloudOSHost"},state:a.c({readOnly:!0,get:function(){return this._state}}),isActive:a.c({readOnly:!0,get:function(){return this._state!==ut.Inactive}}),isLoggedOut:a.c({readOnly:!0,get:function(){return this._state===ut.LoggedOut}}),isLoggingOut:a.c({readOnly:!0,get:function(){return this._state===ut.LoggingOut}}),isLoggedIn:a.c({readOnly:!0,get:function(){return this._state===ut.LoggedIn}}),isLoggingIn:a.c({readOnly:!0,get:function(){return this._state===ut.LoggingIn}}),isFetchingPrefs:a.c({readOnly:!0,get:function(){return this._state===ut.FetchingPreferences}}),defaultAssetHostname:a.c({readOnly:!0,get:function(){var e=window.location.hostname;return"www"+e.substring(e.indexOf("."))}}),origin:a.c({set:function(e){this._origin=e||null},get:function(){var e=this._origin;return e||(e=this._origin=this.loadDefaultOrigin()),e}}),accountMenuItems:a.c({set:function(e){this._accountMenuItems=e||null},get:function(){var e=this._accountMenuItems;return e||(e=this._accountMenuItems=this.loadDefaultAccountMenuItems()),e}}),setupService:null,regionFormatProvider:null,init:function(e){this.__s._$13k$init.call(this,e),this._messageHandlers={},this._appWindowProxy=this.loadApplicationWindowProxy(),this._cloudOSWindowProxy=this.loadCloudOSWindowProxy(),this._state=ut.Inactive,this._userSession={},this.logoutAlertViewController.nextResponder=this,this.addMessageHandler("performLogout",this.performLogout.bind(this)),this.addMessageHandler("setAccountPreference",this.setAccountPreference.bind(this))},addMessageHandler:function(e,t){e&&t||pt("Invalid arguments. Cannot add message handler");var n=this._messageHandlers,i=n[e];i||(i=n[e]=[]),i.push(t)},activate:function(){this.isActive&&pt("Cannot activate. Invalid state");var e=this.origin,t=this._appWindowProxy,n=this._cloudOSWindowProxy;e||pt("Cannot activate. Host requires a valid origin"),t||pt("Cannot activate. Host requires an application window proxy object"),n||pt("Cannot activate. Host requires a CloudOS window proxy object"),this.regionFormatProvider||pt("Cannot activate. Host requires a region format provider"),n.target=this,n.action=this._handleIncomingCloudOSApplicationMessage,t.origin=e,t.cloudOSHost=n,window["cosk.system.applicationDriver.inputChannelWindow"]=t,this._state=ut.LoggedOut},loadApplicationWindowProxy:function(){return Xe.create()},loadCloudOSWindowProxy:function(){return gt.create()},loadDefaultAccountMenuItems:function(){return dt},loadDefaultOrigin:function(){var e=location.host.match(/^(www|beta|carry|future)\.icloud\.com[.cn]*$/);return"https://"+(e?e[0]:this.defaultAssetHostname)},login:function(e,t){var n=this;this.isLoggedOut||pt("Cannot login. Invalid state"),e&&t||pt("Cannot login. Host requires a user name and password"),this._state=ut.LoggingIn;var i=this.setupService;return i||pt("Cannot login. Host requires a setup service"),i.login(e,t).then(function(e){return n._completeLogin(e),g.a.resolve()}).catch(function(i){n._state=ut.LoggedOut;var r=ft("Failed to log in");return r.nextError=i,r.username=e,r.password=t,g.a.reject(r)})},_filterPreferences:function(e){for(var t=e.apps,n={accountPreferences:{},appPreferences:{}},i=function(){var e=t[r],i=e["app-id"],a=e["registry-version"];"account"===i?(e.keys.forEach(function(e){n.accountPreferences[e.name]=e.data}),n.accountPreferences.preferencesVersion=a):(n.appPreferences[i]={},e.keys.forEach(function(e){n.appPreferences[i][e.name]=e.data}),n.appPreferences[i].preferencesVersion=a)},r=0;r<t.length;r++)i();return n},_completeLogin:function(e,t){var n=this._userSession={authorizationBag:e};this._state=ut.LoggedIn;var i=this.regionFormatProvider.getFormattingRulesForLocale("en-us"),r={items:this.accountMenuItems},a=this._filterPreferences(t);this._accountPreferences=a.accountPreferences,this._appPreferences=a.appPreferences;var s={authBag:n.authorizationBag,regionFormattingRules:i,accountMenu:r,accountPreferences:a.accountPreferences,appPreferences:a.appPreferences};this._appWindowProxy.sendMessage("_applicationShouldInvokeMain",[null,s,null,null])},logout:function(){var e=this;this.isLoggedIn||this.isFetchingPrefs||pt("Cannot logout user. Invalid state"),this._state=ut.LoggingOut;var t={};re.a.currentUser.hsaEnabled&&(t.trustBrowser=this.hsaTrustedBrowser);var n=this.setupService;return n||pt("Cannot login. Host requires a setup service"),n.logout(t).then(function(){e._state=ut.LoggedOut,e._userSession={};var t=e.defaultAssetHostname,n=encodeURI(window.location.href);return window.location.href="https://"+t+"/#postLoginRedirectUrl="+n,g.a.resolve()}).catch(function(t){e._state=ut.LoggedIn;var n=ft("Failed to log out");n.nextError=t;var i=self._userSession;return n.username=i.username,n.password=i.password,g.a.reject(n)})},validate:function(){var e=this;this._state=ut.Validating;var t=this.setupService;return t||pt("Cannot validate. Host requires a setup service"),t.validate().then(function(t){return e.fetchPreferences(t),g.a.resolve()}).catch(function(t){e._state=ut.LoggedOut;var n=e.defaultAssetHostname,i=encodeURI(window.location.href),r=ft("Not logged in, redirecting to CloudOS to sign in...");return r.nextError=t,window.location.href="https://"+n+"/#postLoginRedirectUrl="+i,g.a.reject(r)})},fetchPreferences:function(e){var t=this;this._state=ut.FetchingPreferences;var n=this.keyValueService;return n||pt("Cannot fetch preferences. Host requires a Key Value Service"),n.getPreferences(e).then(function(n){return t._completeLogin(e,n),g.a.resolve()}).catch(function(e){o.b.warn("Unable to fetch preferences"),t.logout()})},sendMessage:function(e,t){this.isLoggedIn||pt("Cannot send message to application. Invalid state"),this._appWindowProxy.sendMessage(e,t)},sendWillBecomeActiveMessage:function(){this.sendMessage("applicationWillBecomeActive")},sendDidBecomeActiveMessage:function(){this.sendMessage("applicationDidBecomeActive")},sendQuotaDidChangeMessage:function(){this.sendMessage("quotaDataDidChange")},sendQuotaFailedToLoadMessage:function(){this.sendMessage("quotaDataFailedToLoad")},sendQuotaDataMessage:function(e){var t=[{quotaData:e}];this.sendMessage("_cloudOSStateChange",t)},_handleIncomingCloudOSApplicationMessage:function(e,t){var n=e.methodName;switch(n){case"applicationIsReady":return this.sendWillBecomeActiveMessage(),void this.sendDidBecomeActiveMessage()}var i=this._messageHandlers[n];i?i.forEach(function(n){n.call(null,e,t)}):o.b.warn("EmbeddedCloudOSHost: Unhandled application message '"+n+"'")},showingLogoutAlert:r.b(!1),hsaTrustedBrowser:r.b(re.a.bindingFor("authBag.hsaTrustedBrowser")),logoutAlertViewController:r.b({defaultValue:p.b(lt),downstreamBindings:{showingLogoutAlert:"(owner).showingLogoutAlert",hsaTrustedBrowser:"(owner).hsaTrustedBrowser"},strong:!0}),performLogout:function(){this.isLoggedOut||this.isLoggingOut||this.showingLogoutAlert?o.b.warn("Either the user is not logged in or logout process has already started. Ignoring new logout call."):(this.logoutAlertViewController.show(),this.showingLogoutAlert=!0)},setAccountPreference:function(e){var t=this,n=this.keyValueService;if(n||pt("Cannot set Account Preference. Host requires a setup service"),e.args){var i=e.args[0],r=e.args[1];return n.setAccountPreference(i,r).then(function(e){var n=t._filterPreferences(e).accountPreferences;t._accountPreferences.preferencesVersion=n.preferencesVersion,t.sendMessage("_cloudOSStateChange",[{accountPreferences:t._accountPreferences}]),o.b.info("Successfully saved account preference")}).catch(function(e){var t=ft("Failed to set account preference");return t.nextError=e,g.a.reject(t)})}o.b.info("No account preference to save")},__superMap:{_$13k$init:"init"}});function pt(e){s.b("EmbeddedCloudOSHost: "+e)}function ft(e){return new Error("EmbeddedCloudOSHost: "+e)}var gt=w.a.extend({target:null,action:null,postMessage:function(e,t){var n=this.target;this.action.call(n,e,t)},staticMembers:{__QUALIFIED_CLASS_NAME__:"CloudOSWindowProxy"}}),mt=w.a.extend({rules:a.c({set:function(e){this._regionFormattingRules=e},get:function(){var e=this._regionFormattingRules;return e||(e=this._regionFormattingRules=this.loadRegionFormattingRules(),this.didLoadRegionFormattingRules(e)),e}}),loadRegionFormattingRules:function(){return{locale:"en-US",date:{ca:["gregory","buddhist","chinese","coptic","dangi","ethioaa","ethiopic","generic","hebrew","indian","islamic","islamic-rgsa","islamic-tbla","islamic-umalqura","islamicc","japanese","persian","roc"],hourNo0:!0,hour12:!0,formats:[{weekday:"short",month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",second:"2-digit",pattern:"{weekday}, {month} {day}, {year}, {hour}:{minute}:{second}",pattern12:"{weekday}, {month} {day}, {year}, {hour}:{minute}:{second} {ampm}"},{weekday:"short",month:"short",day:"numeric",year:"numeric",pattern:"{weekday}, {month} {day}, {year}"},{month:"short",day:"numeric",year:"numeric",pattern:"{month} {day}, {year}"},{month:"numeric",day:"numeric",year:"numeric",pattern:"{month}/{day}/{year}"},{month:"numeric",year:"numeric",pattern:"{month}/{year}"},{month:"short",year:"numeric",pattern:"{month} {year}"},{month:"short",day:"numeric",pattern:"{month} {day}"},{month:"numeric",day:"numeric",pattern:"{month}/{day}"},{hour:"numeric",minute:"2-digit",second:"2-digit",pattern:"{hour}:{minute}:{second}",pattern12:"{hour}:{minute}:{second} {ampm}"},{hour:"numeric",minute:"2-digit",pattern:"{hour}:{minute}",pattern12:"{hour}:{minute} {ampm}"}],calendars:{buddhist:{months:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],short:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],long:["January","February","March","April","May","June","July","August","September","October","November","December"]},standaloneMonths:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],short:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],long:["January","February","March","April","May","June","July","August","September","October","November","December"]},days:{narrow:["Su","Mo","Tu","We","Th","Fr","Sa"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},standaloneDays:{narrow:["Su","Mo","Tu","We","Th","Fr","Sa"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},eras:{narrow:["BE"],short:["BE"],long:["BE"]},dayPeriods:{am:"AM",pm:"PM"}},chinese:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["Mo1","Mo2","Mo3","Mo4","Mo5","Mo6","Mo7","Mo8","Mo9","Mo10","Mo11","Mo12"],long:["Month1","Month2","Month3","Month4","Month5","Month6","Month7","Month8","Month9","Month10","Month11","Month12"]},standaloneMonths:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["Mo1","Mo2","Mo3","Mo4","Mo5","Mo6","Mo7","Mo8","Mo9","Mo10","Mo11","Mo12"],long:["Month1","Month2","Month3","Month4","Month5","Month6","Month7","Month8","Month9","Month10","Month11","Month12"]},days:{narrow:["Su","Mo","Tu","We","Th","Fr","Sa"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},standaloneDays:{narrow:["Su","Mo","Tu","We","Th","Fr","Sa"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},dayPeriods:{am:"AM",pm:"PM"}},coptic:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12","13"],short:["Tout","Baba","Hator","Kiahk","Toba","Amshir","Baramhat","Baramouda","Bashans","Paona","Epep","Mesra","Nasie"],long:["Tout","Baba","Hator","Kiahk","Toba","Amshir","Baramhat","Baramouda","Bashans","Paona","Epep","Mesra","Nasie"]},standaloneMonths:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12","13"],short:["Tout","Baba","Hator","Kiahk","Toba","Amshir","Baramhat","Baramouda","Bashans","Paona","Epep","Mesra","Nasie"],long:["Tout","Baba","Hator","Kiahk","Toba","Amshir","Baramhat","Baramouda","Bashans","Paona","Epep","Mesra","Nasie"]},days:{narrow:["Su","Mo","Tu","We","Th","Fr","Sa"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},standaloneDays:{narrow:["Su","Mo","Tu","We","Th","Fr","Sa"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},eras:{narrow:["ERA0","ERA1"],short:["ERA0","ERA1"],long:["ERA0","ERA1"]},dayPeriods:{am:"AM",pm:"PM"}},dangi:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["Mo1","Mo2","Mo3","Mo4","Mo5","Mo6","Mo7","Mo8","Mo9","Mo10","Mo11","Mo12"],long:["Month1","Month2","Month3","Month4","Month5","Month6","Month7","Month8","Month9","Month10","Month11","Month12"]},standaloneMonths:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["Mo1","Mo2","Mo3","Mo4","Mo5","Mo6","Mo7","Mo8","Mo9","Mo10","Mo11","Mo12"],long:["Month1","Month2","Month3","Month4","Month5","Month6","Month7","Month8","Month9","Month10","Month11","Month12"]},days:{narrow:["Su","Mo","Tu","We","Th","Fr","Sa"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},standaloneDays:{narrow:["Su","Mo","Tu","We","Th","Fr","Sa"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},dayPeriods:{am:"AM",pm:"PM"}},ethiopic:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12","13"],short:["Meskerem","Tekemt","Hedar","Tahsas","Ter","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehasse","Pagumen"],long:["Meskerem","Tekemt","Hedar","Tahsas","Ter","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehasse","Pagumen"]},standaloneMonths:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12","13"],short:["Meskerem","Tekemt","Hedar","Tahsas","Ter","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehasse","Pagumen"],long:["Meskerem","Tekemt","Hedar","Tahsas","Ter","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehasse","Pagumen"]},days:{narrow:["Su","Mo","Tu","We","Th","Fr","Sa"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},standaloneDays:{narrow:["Su","Mo","Tu","We","Th","Fr","Sa"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},eras:{narrow:["ERA0","ERA1"],short:["ERA0","ERA1"],long:["ERA0","ERA1"]},dayPeriods:{am:"AM",pm:"PM"}},ethioaa:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12","13"],short:["Meskerem","Tekemt","Hedar","Tahsas","Ter","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehasse","Pagumen"],long:["Meskerem","Tekemt","Hedar","Tahsas","Ter","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehasse","Pagumen"]},standaloneMonths:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12","13"],short:["Meskerem","Tekemt","Hedar","Tahsas","Ter","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehasse","Pagumen"],long:["Meskerem","Tekemt","Hedar","Tahsas","Ter","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehasse","Pagumen"]},days:{narrow:["Su","Mo","Tu","We","Th","Fr","Sa"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},standaloneDays:{narrow:["Su","Mo","Tu","We","Th","Fr","Sa"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},eras:{narrow:["ERA0"],short:["ERA0"],long:["ERA0"]},dayPeriods:{am:"AM",pm:"PM"}},generic:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"],long:["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"]},standaloneMonths:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"],long:["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"]},days:{narrow:["Su","Mo","Tu","We","Th","Fr","Sa"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},standaloneDays:{narrow:["Su","Mo","Tu","We","Th","Fr","Sa"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},eras:{narrow:["ERA0","ERA1"],short:["ERA0","ERA1"],long:["ERA0","ERA1"]},dayPeriods:{am:"AM",pm:"PM"}},gregory:{months:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],short:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],long:["January","February","March","April","May","June","July","August","September","October","November","December"]},standaloneMonths:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],short:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],long:["January","February","March","April","May","June","July","August","September","October","November","December"]},days:{narrow:["Su","Mo","Tu","We","Th","Fr","Sa"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},standaloneDays:{narrow:["Su","Mo","Tu","We","Th","Fr","Sa"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},eras:{narrow:["B","A","BCE","CE"],short:["BC","AD","BCE","CE"],long:["Before Christ","Anno Domini","Before Common Era","Common Era"]},dayPeriods:{am:"AM",pm:"PM"}},hebrew:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12","13","7"],short:["Tishri","Heshvan","Kislev","Tevet","Shevat","Adar I","Adar","Nisan","Iyar","Sivan","Tamuz","Av","Elul","Adar II"],long:["Tishri","Heshvan","Kislev","Tevet","Shevat","Adar I","Adar","Nisan","Iyar","Sivan","Tamuz","Av","Elul","Adar II"]},standaloneMonths:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12","13","7"],short:["Tishri","Heshvan","Kislev","Tevet","Shevat","Adar I","Adar","Nisan","Iyar","Sivan","Tamuz","Av","Elul","Adar II"],long:["Tishri","Heshvan","Kislev","Tevet","Shevat","Adar I","Adar","Nisan","Iyar","Sivan","Tamuz","Av","Elul","Adar II"]},days:{narrow:["Su","Mo","Tu","We","Th","Fr","Sa"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},standaloneDays:{narrow:["Su","Mo","Tu","We","Th","Fr","Sa"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},eras:{narrow:["AM"],short:["AM"],long:["AM"]},dayPeriods:{am:"AM",pm:"PM"}},indian:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["Chaitra","Vaisakha","Jyaistha","Asadha","Sravana","Bhadra","Asvina","Kartika","Agrahayana","Pausa","Magha","Phalguna"],long:["Chaitra","Vaisakha","Jyaistha","Asadha","Sravana","Bhadra","Asvina","Kartika","Agrahayana","Pausa","Magha","Phalguna"]},standaloneMonths:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["Chaitra","Vaisakha","Jyaistha","Asadha","Sravana","Bhadra","Asvina","Kartika","Agrahayana","Pausa","Magha","Phalguna"],long:["Chaitra","Vaisakha","Jyaistha","Asadha","Sravana","Bhadra","Asvina","Kartika","Agrahayana","Pausa","Magha","Phalguna"]},days:{narrow:["Su","Mo","Tu","We","Th","Fr","Sa"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},standaloneDays:{narrow:["Su","Mo","Tu","We","Th","Fr","Sa"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},eras:{narrow:["Saka"],short:["Saka"],long:["Saka"]},dayPeriods:{am:"AM",pm:"PM"}},islamic:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["Muh.","Saf.","Rab. I","Rab. II","Jum. I","Jum. II","Raj.","Sha.","Ram.","Shaw.","Dhuʻl-Q.","Dhuʻl-H."],long:["Muharram","Safar","Rabiʻ I","Rabiʻ II","Jumada I","Jumada II","Rajab","Shaʻban","Ramadan","Shawwal","Dhuʻl-Qiʻdah","Dhuʻl-Hijjah"]},standaloneMonths:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["Muh.","Saf.","Rab. I","Rab. II","Jum. I","Jum. II","Raj.","Sha.","Ram.","Shaw.","Dhuʻl-Q.","Dhuʻl-H."],long:["Muharram","Safar","Rabiʻ I","Rabiʻ II","Jumada I","Jumada II","Rajab","Shaʻban","Ramadan","Shawwal","Dhuʻl-Qiʻdah","Dhuʻl-Hijjah"]},days:{narrow:["Su","Mo","Tu","We","Th","Fr","Sa"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},standaloneDays:{narrow:["Su","Mo","Tu","We","Th","Fr","Sa"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},eras:{narrow:["AH"],short:["AH"],long:["AH"]},dayPeriods:{am:"AM",pm:"PM"}},islamicc:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["Muh.","Saf.","Rab. I","Rab. II","Jum. I","Jum. II","Raj.","Sha.","Ram.","Shaw.","Dhuʻl-Q.","Dhuʻl-H."],long:["Muharram","Safar","Rabiʻ I","Rabiʻ II","Jumada I","Jumada II","Rajab","Shaʻban","Ramadan","Shawwal","Dhuʻl-Qiʻdah","Dhuʻl-Hijjah"]},standaloneMonths:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["Muh.","Saf.","Rab. I","Rab. II","Jum. I","Jum. II","Raj.","Sha.","Ram.","Shaw.","Dhuʻl-Q.","Dhuʻl-H."],long:["Muharram","Safar","Rabiʻ I","Rabiʻ II","Jumada I","Jumada II","Rajab","Shaʻban","Ramadan","Shawwal","Dhuʻl-Qiʻdah","Dhuʻl-Hijjah"]},days:{narrow:["Su","Mo","Tu","We","Th","Fr","Sa"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},standaloneDays:{narrow:["Su","Mo","Tu","We","Th","Fr","Sa"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},eras:{narrow:["AH"],short:["AH"],long:["AH"]},dayPeriods:{am:"AM",pm:"PM"}},"islamic-rgsa":{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["Muh.","Saf.","Rab. I","Rab. II","Jum. I","Jum. II","Raj.","Sha.","Ram.","Shaw.","Dhuʻl-Q.","Dhuʻl-H."],long:["Muharram","Safar","Rabiʻ I","Rabiʻ II","Jumada I","Jumada II","Rajab","Shaʻban","Ramadan","Shawwal","Dhuʻl-Qiʻdah","Dhuʻl-Hijjah"]},standaloneMonths:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["Muh.","Saf.","Rab. I","Rab. II","Jum. I","Jum. II","Raj.","Sha.","Ram.","Shaw.","Dhuʻl-Q.","Dhuʻl-H."],long:["Muharram","Safar","Rabiʻ I","Rabiʻ II","Jumada I","Jumada II","Rajab","Shaʻban","Ramadan","Shawwal","Dhuʻl-Qiʻdah","Dhuʻl-Hijjah"]},days:{narrow:["Su","Mo","Tu","We","Th","Fr","Sa"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},standaloneDays:{narrow:["Su","Mo","Tu","We","Th","Fr","Sa"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},eras:{narrow:["AH"],short:["AH"],long:["AH"]},dayPeriods:{am:"AM",pm:"PM"}},"islamic-tbla":{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["Muh.","Saf.","Rab. I","Rab. II","Jum. I","Jum. II","Raj.","Sha.","Ram.","Shaw.","Dhuʻl-Q.","Dhuʻl-H."],long:["Muharram","Safar","Rabiʻ I","Rabiʻ II","Jumada I","Jumada II","Rajab","Shaʻban","Ramadan","Shawwal","Dhuʻl-Qiʻdah","Dhuʻl-Hijjah"]},standaloneMonths:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["Muh.","Saf.","Rab. I","Rab. II","Jum. I","Jum. II","Raj.","Sha.","Ram.","Shaw.","Dhuʻl-Q.","Dhuʻl-H."],long:["Muharram","Safar","Rabiʻ I","Rabiʻ II","Jumada I","Jumada II","Rajab","Shaʻban","Ramadan","Shawwal","Dhuʻl-Qiʻdah","Dhuʻl-Hijjah"]},days:{narrow:["Su","Mo","Tu","We","Th","Fr","Sa"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},standaloneDays:{narrow:["Su","Mo","Tu","We","Th","Fr","Sa"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},eras:{narrow:["AH"],short:["AH"],long:["AH"]},dayPeriods:{am:"AM",pm:"PM"}},"islamic-umalqura":{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["Muh.","Saf.","Rab. I","Rab. II","Jum. I","Jum. II","Raj.","Sha.","Ram.","Shaw.","Dhuʻl-Q.","Dhuʻl-H."],long:["Muharram","Safar","Rabiʻ I","Rabiʻ II","Jumada I","Jumada II","Rajab","Shaʻban","Ramadan","Shawwal","Dhuʻl-Qiʻdah","Dhuʻl-Hijjah"]},standaloneMonths:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["Muh.","Saf.","Rab. I","Rab. II","Jum. I","Jum. II","Raj.","Sha.","Ram.","Shaw.","Dhuʻl-Q.","Dhuʻl-H."],long:["Muharram","Safar","Rabiʻ I","Rabiʻ II","Jumada I","Jumada II","Rajab","Shaʻban","Ramadan","Shawwal","Dhuʻl-Qiʻdah","Dhuʻl-Hijjah"]},days:{narrow:["Su","Mo","Tu","We","Th","Fr","Sa"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},standaloneDays:{narrow:["Su","Mo","Tu","We","Th","Fr","Sa"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},eras:{narrow:["AH"],short:["AH"],long:["AH"]},dayPeriods:{am:"AM",pm:"PM"}},japanese:{months:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],short:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],long:["January","February","March","April","May","June","July","August","September","October","November","December"]},standaloneMonths:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],short:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],long:["January","February","March","April","May","June","July","August","September","October","November","December"]},days:{narrow:["Su","Mo","Tu","We","Th","Fr","Sa"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},standaloneDays:{narrow:["Su","Mo","Tu","We","Th","Fr","Sa"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},eras:{narrow:["Taika (645-650)","Hakuchi (650-671)","Hakuhō (672-686)","Shuchō (686-701)","Taihō (701-704)","Keiun (704-708)","Wadō (708-715)","Reiki (715-717)","Yōrō (717-724)","Jinki (724-729)","Tempyō (729-749)","Tempyō-kampō (749-749)","Tempyō-shōhō (749-757)","Tempyō-hōji (757-765)","Temphō-jingo (765-767)","Jingo-keiun (767-770)","Hōki (770-780)","Ten-ō (781-782)","Enryaku (782-806)","Daidō (806-810)","Kōnin (810-824)","Tenchō (824-834)","Jōwa (834-848)","Kajō (848-851)","Ninju (851-854)","Saiko (854-857)","Tennan (857-859)","Jōgan (859-877)","Genkei (877-885)","Ninna (885-889)","Kampyō (889-898)","Shōtai (898-901)","Engi (901-923)","Enchō (923-931)","Shōhei (931-938)","Tengyō (938-947)","Tenryaku (947-957)","Tentoku (957-961)","Ōwa (961-964)","Kōhō (964-968)","Anna (968-970)","Tenroku (970-973)","Ten-en (973-976)","Jōgen (976-978)","Tengen (978-983)","Eikan (983-985)","Kanna (985-987)","Ei-en (987-989)","Eiso (989-990)","Shōryaku (990-995)","Chōtoku (995-999)","Chōhō (999-1004)","Kankō (1004-1012)","Chōwa (1012-1017)","Kannin (1017-1021)","Jian (1021-1024)","Manju (1024-1028)","Chōgen (1028-1037)","Chōryaku (1037-1040)","Chōkyū (1040-1044)","Kantoku (1044-1046)","Eishō (1046-1053)","Tengi (1053-1058)","Kōhei (1058-1065)","Jiryaku (1065-1069)","Enkyū (1069-1074)","Shōho (1074-1077)","Shōryaku (1077-1081)","Eiho (1081-1084)","Ōtoku (1084-1087)","Kanji (1087-1094)","Kaho (1094-1096)","Eichō (1096-1097)","Shōtoku (1097-1099)","Kōwa (1099-1104)","Chōji (1104-1106)","Kashō (1106-1108)","Tennin (1108-1110)","Ten-ei (1110-1113)","Eikyū (1113-1118)","Gen-ei (1118-1120)","Hoan (1120-1124)","Tenji (1124-1126)","Daiji (1126-1131)","Tenshō (1131-1132)","Chōshō (1132-1135)","Hoen (1135-1141)","Eiji (1141-1142)","Kōji (1142-1144)","Tenyō (1144-1145)","Kyūan (1145-1151)","Ninpei (1151-1154)","Kyūju (1154-1156)","Hogen (1156-1159)","Heiji (1159-1160)","Eiryaku (1160-1161)","Ōho (1161-1163)","Chōkan (1163-1165)","Eiman (1165-1166)","Nin-an (1166-1169)","Kaō (1169-1171)","Shōan (1171-1175)","Angen (1175-1177)","Jishō (1177-1181)","Yōwa (1181-1182)","Juei (1182-1184)","Genryuku (1184-1185)","Bunji (1185-1190)","Kenkyū (1190-1199)","Shōji (1199-1201)","Kennin (1201-1204)","Genkyū (1204-1206)","Ken-ei (1206-1207)","Shōgen (1207-1211)","Kenryaku (1211-1213)","Kenpō (1213-1219)","Shōkyū (1219-1222)","Jōō (1222-1224)","Gennin (1224-1225)","Karoku (1225-1227)","Antei (1227-1229)","Kanki (1229-1232)","Jōei (1232-1233)","Tempuku (1233-1234)","Bunryaku (1234-1235)","Katei (1235-1238)","Ryakunin (1238-1239)","En-ō (1239-1240)","Ninji (1240-1243)","Kangen (1243-1247)","Hōji (1247-1249)","Kenchō (1249-1256)","Kōgen (1256-1257)","Shōka (1257-1259)","Shōgen (1259-1260)","Bun-ō (1260-1261)","Kōchō (1261-1264)","Bun-ei (1264-1275)","Kenji (1275-1278)","Kōan (1278-1288)","Shōō (1288-1293)","Einin (1293-1299)","Shōan (1299-1302)","Kengen (1302-1303)","Kagen (1303-1306)","Tokuji (1306-1308)","Enkei (1308-1311)","Ōchō (1311-1312)","Shōwa (1312-1317)","Bunpō (1317-1319)","Genō (1319-1321)","Genkyō (1321-1324)","Shōchū (1324-1326)","Kareki (1326-1329)","Gentoku (1329-1331)","Genkō (1331-1334)","Kemmu (1334-1336)","Engen (1336-1340)","Kōkoku (1340-1346)","Shōhei (1346-1370)","Kentoku (1370-1372)","Bunchũ (1372-1375)","Tenju (1375-1379)","Kōryaku (1379-1381)","Kōwa (1381-1384)","Genchũ (1384-1392)","Meitoku (1384-1387)","Kakei (1387-1389)","Kōō (1389-1390)","Meitoku (1390-1394)","Ōei (1394-1428)","Shōchō (1428-1429)","Eikyō (1429-1441)","Kakitsu (1441-1444)","Bun-an (1444-1449)","Hōtoku (1449-1452)","Kyōtoku (1452-1455)","Kōshō (1455-1457)","Chōroku (1457-1460)","Kanshō (1460-1466)","Bunshō (1466-1467)","Ōnin (1467-1469)","Bunmei (1469-1487)","Chōkyō (1487-1489)","Entoku (1489-1492)","Meiō (1492-1501)","Bunki (1501-1504)","Eishō (1504-1521)","Taiei (1521-1528)","Kyōroku (1528-1532)","Tenmon (1532-1555)","Kōji (1555-1558)","Eiroku (1558-1570)","Genki (1570-1573)","Tenshō (1573-1592)","Bunroku (1592-1596)","Keichō (1596-1615)","Genwa (1615-1624)","Kan-ei (1624-1644)","Shōho (1644-1648)","Keian (1648-1652)","Shōō (1652-1655)","Meiryaku (1655-1658)","Manji (1658-1661)","Kanbun (1661-1673)","Enpō (1673-1681)","Tenwa (1681-1684)","Jōkyō (1684-1688)","Genroku (1688-1704)","Hōei (1704-1711)","Shōtoku (1711-1716)","Kyōhō (1716-1736)","Genbun (1736-1741)","Kanpō (1741-1744)","Enkyō (1744-1748)","Kan-en (1748-1751)","Hōryaku (1751-1764)","Meiwa (1764-1772)","An-ei (1772-1781)","Tenmei (1781-1789)","Kansei (1789-1801)","Kyōwa (1801-1804)","Bunka (1804-1818)","Bunsei (1818-1830)","Tenpō (1830-1844)","Kōka (1844-1848)","Kaei (1848-1854)","Ansei (1854-1860)","Man-en (1860-1861)","Bunkyū (1861-1864)","Genji (1864-1865)","Keiō (1865-1868)","M","T","S","H"],short:["Taika (645-650)","Hakuchi (650-671)","Hakuhō (672-686)","Shuchō (686-701)","Taihō (701-704)","Keiun (704-708)","Wadō (708-715)","Reiki (715-717)","Yōrō (717-724)","Jinki (724-729)","Tempyō (729-749)","Tempyō-kampō (749-749)","Tempyō-shōhō (749-757)","Tempyō-hōji (757-765)","Temphō-jingo (765-767)","Jingo-keiun (767-770)","Hōki (770-780)","Ten-ō (781-782)","Enryaku (782-806)","Daidō (806-810)","Kōnin (810-824)","Tenchō (824-834)","Jōwa (834-848)","Kajō (848-851)","Ninju (851-854)","Saiko (854-857)","Tennan (857-859)","Jōgan (859-877)","Genkei (877-885)","Ninna (885-889)","Kampyō (889-898)","Shōtai (898-901)","Engi (901-923)","Enchō (923-931)","Shōhei (931-938)","Tengyō (938-947)","Tenryaku (947-957)","Tentoku (957-961)","Ōwa (961-964)","Kōhō (964-968)","Anna (968-970)","Tenroku (970-973)","Ten-en (973-976)","Jōgen (976-978)","Tengen (978-983)","Eikan (983-985)","Kanna (985-987)","Ei-en (987-989)","Eiso (989-990)","Shōryaku (990-995)","Chōtoku (995-999)","Chōhō (999-1004)","Kankō (1004-1012)","Chōwa (1012-1017)","Kannin (1017-1021)","Jian (1021-1024)","Manju (1024-1028)","Chōgen (1028-1037)","Chōryaku (1037-1040)","Chōkyū (1040-1044)","Kantoku (1044-1046)","Eishō (1046-1053)","Tengi (1053-1058)","Kōhei (1058-1065)","Jiryaku (1065-1069)","Enkyū (1069-1074)","Shōho (1074-1077)","Shōryaku (1077-1081)","Eiho (1081-1084)","Ōtoku (1084-1087)","Kanji (1087-1094)","Kaho (1094-1096)","Eichō (1096-1097)","Shōtoku (1097-1099)","Kōwa (1099-1104)","Chōji (1104-1106)","Kashō (1106-1108)","Tennin (1108-1110)","Ten-ei (1110-1113)","Eikyū (1113-1118)","Gen-ei (1118-1120)","Hoan (1120-1124)","Tenji (1124-1126)","Daiji (1126-1131)","Tenshō (1131-1132)","Chōshō (1132-1135)","Hoen (1135-1141)","Eiji (1141-1142)","Kōji (1142-1144)","Tenyō (1144-1145)","Kyūan (1145-1151)","Ninpei (1151-1154)","Kyūju (1154-1156)","Hogen (1156-1159)","Heiji (1159-1160)","Eiryaku (1160-1161)","Ōho (1161-1163)","Chōkan (1163-1165)","Eiman (1165-1166)","Nin-an (1166-1169)","Kaō (1169-1171)","Shōan (1171-1175)","Angen (1175-1177)","Jishō (1177-1181)","Yōwa (1181-1182)","Juei (1182-1184)","Genryuku (1184-1185)","Bunji (1185-1190)","Kenkyū (1190-1199)","Shōji (1199-1201)","Kennin (1201-1204)","Genkyū (1204-1206)","Ken-ei (1206-1207)","Shōgen (1207-1211)","Kenryaku (1211-1213)","Kenpō (1213-1219)","Shōkyū (1219-1222)","Jōō (1222-1224)","Gennin (1224-1225)","Karoku (1225-1227)","Antei (1227-1229)","Kanki (1229-1232)","Jōei (1232-1233)","Tempuku (1233-1234)","Bunryaku (1234-1235)","Katei (1235-1238)","Ryakunin (1238-1239)","En-ō (1239-1240)","Ninji (1240-1243)","Kangen (1243-1247)","Hōji (1247-1249)","Kenchō (1249-1256)","Kōgen (1256-1257)","Shōka (1257-1259)","Shōgen (1259-1260)","Bun-ō (1260-1261)","Kōchō (1261-1264)","Bun-ei (1264-1275)","Kenji (1275-1278)","Kōan (1278-1288)","Shōō (1288-1293)","Einin (1293-1299)","Shōan (1299-1302)","Kengen (1302-1303)","Kagen (1303-1306)","Tokuji (1306-1308)","Enkei (1308-1311)","Ōchō (1311-1312)","Shōwa (1312-1317)","Bunpō (1317-1319)","Genō (1319-1321)","Genkyō (1321-1324)","Shōchū (1324-1326)","Kareki (1326-1329)","Gentoku (1329-1331)","Genkō (1331-1334)","Kemmu (1334-1336)","Engen (1336-1340)","Kōkoku (1340-1346)","Shōhei (1346-1370)","Kentoku (1370-1372)","Bunchū (1372-1375)","Tenju (1375-1379)","Kōryaku (1379-1381)","Kōwa (1381-1384)","Genchū (1384-1392)","Meitoku (1384-1387)","Kakei (1387-1389)","Kōō (1389-1390)","Meitoku (1390-1394)","Ōei (1394-1428)","Shōchō (1428-1429)","Eikyō (1429-1441)","Kakitsu (1441-1444)","Bun-an (1444-1449)","Hōtoku (1449-1452)","Kyōtoku (1452-1455)","Kōshō (1455-1457)","Chōroku (1457-1460)","Kanshō (1460-1466)","Bunshō (1466-1467)","Ōnin (1467-1469)","Bunmei (1469-1487)","Chōkyō (1487-1489)","Entoku (1489-1492)","Meiō (1492-1501)","Bunki (1501-1504)","Eishō (1504-1521)","Taiei (1521-1528)","Kyōroku (1528-1532)","Tenmon (1532-1555)","Kōji (1555-1558)","Eiroku (1558-1570)","Genki (1570-1573)","Tenshō (1573-1592)","Bunroku (1592-1596)","Keichō (1596-1615)","Genwa (1615-1624)","Kan-ei (1624-1644)","Shōho (1644-1648)","Keian (1648-1652)","Shōō (1652-1655)","Meiryaku (1655-1658)","Manji (1658-1661)","Kanbun (1661-1673)","Enpō (1673-1681)","Tenwa (1681-1684)","Jōkyō (1684-1688)","Genroku (1688-1704)","Hōei (1704-1711)","Shōtoku (1711-1716)","Kyōhō (1716-1736)","Genbun (1736-1741)","Kanpō (1741-1744)","Enkyō (1744-1748)","Kan-en (1748-1751)","Hōryaku (1751-1764)","Meiwa (1764-1772)","An-ei (1772-1781)","Tenmei (1781-1789)","Kansei (1789-1801)","Kyōwa (1801-1804)","Bunka (1804-1818)","Bunsei (1818-1830)","Tenpō (1830-1844)","Kōka (1844-1848)","Kaei (1848-1854)","Ansei (1854-1860)","Man-en (1860-1861)","Bunkyū (1861-1864)","Genji (1864-1865)","Keiō (1865-1868)","Meiji","Taishō","Shōwa","Heisei"],long:["Taika (645-650)","Hakuchi (650-671)","Hakuhō (672-686)","Shuchō (686-701)","Taihō (701-704)","Keiun (704-708)","Wadō (708-715)","Reiki (715-717)","Yōrō (717-724)","Jinki (724-729)","Tempyō (729-749)","Tempyō-kampō (749-749)","Tempyō-shōhō (749-757)","Tempyō-hōji (757-765)","Temphō-jingo (765-767)","Jingo-keiun (767-770)","Hōki (770-780)","Ten-ō (781-782)","Enryaku (782-806)","Daidō (806-810)","Kōnin (810-824)","Tenchō (824-834)","Jōwa (834-848)","Kajō (848-851)","Ninju (851-854)","Saiko (854-857)","Tennan (857-859)","Jōgan (859-877)","Genkei (877-885)","Ninna (885-889)","Kampyō (889-898)","Shōtai (898-901)","Engi (901-923)","Enchō (923-931)","Shōhei (931-938)","Tengyō (938-947)","Tenryaku (947-957)","Tentoku (957-961)","Ōwa (961-964)","Kōhō (964-968)","Anna (968-970)","Tenroku (970-973)","Ten-en (973-976)","Jōgen (976-978)","Tengen (978-983)","Eikan (983-985)","Kanna (985-987)","Ei-en (987-989)","Eiso (989-990)","Shōryaku (990-995)","Chōtoku (995-999)","Chōhō (999-1004)","Kankō (1004-1012)","Chōwa (1012-1017)","Kannin (1017-1021)","Jian (1021-1024)","Manju (1024-1028)","Chōgen (1028-1037)","Chōryaku (1037-1040)","Chōkyū (1040-1044)","Kantoku (1044-1046)","Eishō (1046-1053)","Tengi (1053-1058)","Kōhei (1058-1065)","Jiryaku (1065-1069)","Enkyū (1069-1074)","Shōho (1074-1077)","Shōryaku (1077-1081)","Eiho (1081-1084)","Ōtoku (1084-1087)","Kanji (1087-1094)","Kaho (1094-1096)","Eichō (1096-1097)","Shōtoku (1097-1099)","Kōwa (1099-1104)","Chōji (1104-1106)","Kashō (1106-1108)","Tennin (1108-1110)","Ten-ei (1110-1113)","Eikyū (1113-1118)","Gen-ei (1118-1120)","Hoan (1120-1124)","Tenji (1124-1126)","Daiji (1126-1131)","Tenshō (1131-1132)","Chōshō (1132-1135)","Hoen (1135-1141)","Eiji (1141-1142)","Kōji (1142-1144)","Tenyō (1144-1145)","Kyūan (1145-1151)","Ninpei (1151-1154)","Kyūju (1154-1156)","Hogen (1156-1159)","Heiji (1159-1160)","Eiryaku (1160-1161)","Ōho (1161-1163)","Chōkan (1163-1165)","Eiman (1165-1166)","Nin-an (1166-1169)","Kaō (1169-1171)","Shōan (1171-1175)","Angen (1175-1177)","Jishō (1177-1181)","Yōwa (1181-1182)","Juei (1182-1184)","Genryuku (1184-1185)","Bunji (1185-1190)","Kenkyū (1190-1199)","Shōji (1199-1201)","Kennin (1201-1204)","Genkyū (1204-1206)","Ken-ei (1206-1207)","Shōgen (1207-1211)","Kenryaku (1211-1213)","Kenpō (1213-1219)","Shōkyū (1219-1222)","Jōō (1222-1224)","Gennin (1224-1225)","Karoku (1225-1227)","Antei (1227-1229)","Kanki (1229-1232)","Jōei (1232-1233)","Tempuku (1233-1234)","Bunryaku (1234-1235)","Katei (1235-1238)","Ryakunin (1238-1239)","En-ō (1239-1240)","Ninji (1240-1243)","Kangen (1243-1247)","Hōji (1247-1249)","Kenchō (1249-1256)","Kōgen (1256-1257)","Shōka (1257-1259)","Shōgen (1259-1260)","Bun-ō (1260-1261)","Kōchō (1261-1264)","Bun-ei (1264-1275)","Kenji (1275-1278)","Kōan (1278-1288)","Shōō (1288-1293)","Einin (1293-1299)","Shōan (1299-1302)","Kengen (1302-1303)","Kagen (1303-1306)","Tokuji (1306-1308)","Enkei (1308-1311)","Ōchō (1311-1312)","Shōwa (1312-1317)","Bunpō (1317-1319)","Genō (1319-1321)","Genkyō (1321-1324)","Shōchū (1324-1326)","Kareki (1326-1329)","Gentoku (1329-1331)","Genkō (1331-1334)","Kemmu (1334-1336)","Engen (1336-1340)","Kōkoku (1340-1346)","Shōhei (1346-1370)","Kentoku (1370-1372)","Bunchū (1372-1375)","Tenju (1375-1379)","Kōryaku (1379-1381)","Kōwa (1381-1384)","Genchū (1384-1392)","Meitoku (1384-1387)","Kakei (1387-1389)","Kōō (1389-1390)","Meitoku (1390-1394)","Ōei (1394-1428)","Shōchō (1428-1429)","Eikyō (1429-1441)","Kakitsu (1441-1444)","Bun-an (1444-1449)","Hōtoku (1449-1452)","Kyōtoku (1452-1455)","Kōshō (1455-1457)","Chōroku (1457-1460)","Kanshō (1460-1466)","Bunshō (1466-1467)","Ōnin (1467-1469)","Bunmei (1469-1487)","Chōkyō (1487-1489)","Entoku (1489-1492)","Meiō (1492-1501)","Bunki (1501-1504)","Eishō (1504-1521)","Taiei (1521-1528)","Kyōroku (1528-1532)","Tenmon (1532-1555)","Kōji (1555-1558)","Eiroku (1558-1570)","Genki (1570-1573)","Tenshō (1573-1592)","Bunroku (1592-1596)","Keichō (1596-1615)","Genwa (1615-1624)","Kan-ei (1624-1644)","Shōho (1644-1648)","Keian (1648-1652)","Shōō (1652-1655)","Meiryaku (1655-1658)","Manji (1658-1661)","Kanbun (1661-1673)","Enpō (1673-1681)","Tenwa (1681-1684)","Jōkyō (1684-1688)","Genroku (1688-1704)","Hōei (1704-1711)","Shōtoku (1711-1716)","Kyōhō (1716-1736)","Genbun (1736-1741)","Kanpō (1741-1744)","Enkyō (1744-1748)","Kan-en (1748-1751)","Hōryaku (1751-1764)","Meiwa (1764-1772)","An-ei (1772-1781)","Tenmei (1781-1789)","Kansei (1789-1801)","Kyōwa (1801-1804)","Bunka (1804-1818)","Bunsei (1818-1830)","Tenpō (1830-1844)","Kōka (1844-1848)","Kaei (1848-1854)","Ansei (1854-1860)","Man-en (1860-1861)","Bunkyū (1861-1864)","Genji (1864-1865)","Keiō (1865-1868)","Meiji","Taishō","Shōwa","Heisei"]},dayPeriods:{am:"AM",pm:"PM"}},persian:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Dey","Bahman","Esfand"],long:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Dey","Bahman","Esfand"]},standaloneMonths:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Dey","Bahman","Esfand"],long:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Dey","Bahman","Esfand"]},days:{narrow:["Su","Mo","Tu","We","Th","Fr","Sa"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},standaloneDays:{narrow:["Su","Mo","Tu","We","Th","Fr","Sa"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},eras:{narrow:["AP"],short:["AP"],long:["AP"]},dayPeriods:{am:"AM",pm:"PM"}},roc:{months:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],short:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],long:["January","February","March","April","May","June","July","August","September","October","November","December"]},standaloneMonths:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],short:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],long:["January","February","March","April","May","June","July","August","September","October","November","December"]},days:{narrow:["Su","Mo","Tu","We","Th","Fr","Sa"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},standaloneDays:{narrow:["Su","Mo","Tu","We","Th","Fr","Sa"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},eras:{narrow:["Before R.O.C.","Minguo"],short:["Before R.O.C.","Minguo"],long:["Before R.O.C.","Minguo"]},dayPeriods:{am:"AM",pm:"PM"}}},defaultTimeFormats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultDateFormats:{full:"EEEE, MMMM d, y",long:"MMMM d, y",medium:"MMM d, y",short:"M/d/yy"}},number:{nu:["latn"],patterns:{decimal:{positivePattern:"{number}",negativePattern:"-{number}"},currency:{positivePattern:"{currency}{number}",negativePattern:"-{currency}{number}"},percent:{positivePattern:"{number}%",negativePattern:"-{number}%"}},symbols:{latn:{decimal:".",group:",",nan:"NaN",percent:"%",infinity:"∞",exponent:"E"}},currencies:{AUD:"A$",BRL:"R$",CAD:"CA$",CNY:"CN¥",EUR:"€",GBP:"£",HKD:"HK$",ILS:"₪",INR:"₹",JPY:"¥",KRW:"₩",MXN:"MX$",NZD:"NZ$",THB:"฿",TWD:"NT$",USD:"$",VND:"₫",XAF:"FCFA",XCD:"EC$",XOF:"CFA",XPF:"CFPF"},currencyCode:"USD"}}},didLoadRegionFormattingRules:function(e){},getFormattingRulesForLocale:function(e){return this.rules},staticMembers:{__QUALIFIED_CLASS_NAME__:"MockRegionFormatProvider"}}),vt={_generateURLForPath:function(e,t){var n=this.clientBuildNumber,i=this.clientMasteringNumber,r="";return n&&(r="?clientBuildNumber="+n,i&&(r+="&clientMasteringNumber="+i)),e+t+r}},_t=w.a.extend(vt,{clientBuildNumber:null,clientMasteringNumber:null,login:function(e,t){var n={apple_id:e,password:t,extended_login:!1},i=E.a.create({url:this._generateURLForPath("/setup/ws/1/login"),method:"POST",body:n,useCredentialsIfCrossOrigin:!0});return i.setHeader("Content-Type","text/plain"),i.send().then(function(){return{authorizationBag:i.response.body,sessionInfo:{}}}).catch(function(e){var t=bt("Failed login request",e);return t.request=i,t.status=i.response.status,g.a.reject(t)})},logout:function(e){var t=this._request=E.a.create({url:this._generateURLForPath("/setup/ws/1/logout"),method:"POST",body:e,useCredentialsIfCrossOrigin:!0});return t.setHeader("Content-Type","text/plain"),t.send().catch(function(e){var n=bt("Failed logout request",e);return n.request=t,n.status=t.response.status,g.a.reject(n)})},validate:function(){var e=E.a.create({url:this._generateURLForPath("/setup/ws/1/validate"),method:"POST",body:{},useCredentialsIfCrossOrigin:!0,shouldReportSuccess:!0,shouldReportFailure:!0});return e.send().then(function(){return e.response.body}).catch(function(t){var n=bt("Faild validate request",t);return n.request=e,n.status=e.response.status,g.a.reject(n)})},_generateURLForPath:function(e){return this.__s._$lW$_generateURLForPath.call(this,"https://setup.icloud.com",e)},__superMap:{_$lW$_generateURLForPath:"_generateURLForPath"},staticMembers:{__QUALIFIED_CLASS_NAME__:"RuntimeSetupService"}});function bt(e,t){var n=new Error("RuntimeSetupService: "+e);return n.nextError=t,n}var yt=w.a.extend(vt,{clientBuildNumber:null,clientMasteringNumber:null,getPreferences:function(e){var t=this,n=e.appsOrder;n.unshift("account");var i=E.a.create({url:this._generateURLForPath("/json/sync",e),method:"POST",body:this._generateBodyForPrefs(n),useCredentialsIfCrossOrigin:!0});return i.setHeader("Content-Type","text/plain"),i.send().then(function(){return i.response.body}).catch(function(e){var n=t.createError("Failed key value service request",e);return n.request=i,n.status=i.response.status,g.a.reject(n)})},setAccountPreference:function(e,t){var n=this,i=re.a.environment.accountPreferences,r=i.preferencesVersion,a={},s=void 0;return a[e]=t,i[e]=t,(s=E.a.create({url:this._generateURLForPath("/json/sync"),method:"POST",body:this._generateBodyForPrefs(["account"],a,r),useCredentialsIfCrossOrigin:!0})).setHeader("Content-Type","text/plain"),s.send().then(function(){return s.response.body}).catch(function(e){var t=n.createError("Failed key value service request",e);return t.request=s,t.status=s.response.status,g.a.reject(t)})},createError:function(e,t){var n=new Error("KeyValueService: "+e);return n.nextError=t,n},_generateURLForPath:function(e,t){var n;if(n=t?t.webservices.keyvalue.url:re.a.environment.authBag.servicesInfo.keyvalue.url)return this.__s._$iT$_generateURLForPath.call(this,n,e)},_generateBodyForPrefs:function(e,t,n){return{"service-id":"appleprefs",apps:e.map(function(e){var i={"app-id":e,"registry-version":n||""};if(t){i.keys=[];var r=void 0;for(r in t)i.keys.push({name:r,data:t[r]})}return i})}},__superMap:{_$iT$_generateURLForPath:"_generateURLForPath"},staticMembers:{__QUALIFIED_CLASS_NAME__:"KeyValueService"}}),It=Ye.extend({launch:function(){var e=_t.create(),t=mt.create(),n=yt.create(),i=ht.create({setupService:e,regionFormatProvider:t,keyValueService:n});i.activate();var r=this.get("application");r?(this.willLaunchApplication(),r.load(),this.didLaunchApplication(),i.validate().catch(function(e){o.b.error("Failed to launch application. Embedded CloudOS host failed to log in.",e)})):o.b.error(this+" Missing application. Cannot launch app")},staticMembers:{__QUALIFIED_CLASS_NAME__:"WindowApplicationLauncher"}}),wt=w.a.extend({init:function(){var e=arguments;this._attachments=[],this.__s._$4m$init.apply(this,e)},_windowInstanceId:null,openWindow:function(){re.a.get("currentUser").isServiceActive("mail")?this._windowInstanceId=ae.openWindowApplication(this.get("_mailComposeURL"),"","width=810,height=677,status=no,toolbar=no"):s.b("Trying to compose email for user without active mail service")},closeWindow:function(){var e,t;this._windowInstanceId&&(e=ae.windowApplications[this._windowInstanceId])&&(t=e.window)&&t.close()},_mailComposeURL:a.c({readOnly:!0,get:function(){var e=b.c();b.a.sharedInstance.isRTL&&(e=this.getPath("COSK.globals.environment.accountPreferences.secondaryLocale")||"en-us");return"https://"+window.location.hostname+"/message/current/"+e+"/index.html#compose?willPM=true"}}),to:a.c(""),cc:a.c(""),bcc:a.c(""),subject:a.c(""),body:a.c(""),addAttachment:function(e,t,n,i){this.get("_attachments").push({fileName:e,type:t,size:n,url:i})},_attachments:null,addAttachments:function(e){this._attachments=this._attachments.concat(e)},populateFields:function(){this.get("hasValidAttachments")||s.b("You must supply property `type` (mime-type) for every attachment.");var e={to:this.get("to"),subject:this.get("subject"),body:this.get("body"),cc:this.get("cc"),bcc:this.get("bcc"),attachments:this._attachments,appName:re.a.cloudOSApplication.capitalizedName};ae.passWindowApplicationMessage(this._windowInstanceId,"populateFields",e)},hasValidAttachments:a.c({readOnly:!0,get:function(){var e=this._attachments;if(e)for(var t=0,n=e.length;t<n;t++)if(!e[t].type)return!1;return!0}}),__superMap:{_$4m$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"ComposeEmailController"}}),St={getJSONAuthorizationBagForCredentials:function(e,t){}},Ct={getPreferences:function(){},setPreferences:function(e,t){}},Ot=w.a.extend({authBag:a.c({set:function(e){this._authBag=e},get:function(){var e=this._authBag;return e||(e=this._authBag=this.loadAuthorizationBag(),this.didLoadAuthorizationBag(e)),e}}),loadAuthorizationBag:function(){return{isExtendedLogin:!1,webservices:{},dsInfo:{firstName:"",lastName:"",fullName:"",primaryEmail:"",appleId:"",dsid:"1",aDsID:"",primaryEmailVerified:!0,iCloudAppleIdAlias:"",appleIdAlias:"",locale:"en-us_US",hasICloudQualifyingDevice:!0,isPaidDeveloper:!1,"gilligan-invited":"true","gilligan-enabled":"true",statusCode:2,brMigrated:!1,languageCode:"en-us",locked:!1,appleIdAliases:[]},environment:"ICLOUD3",appsOrder:[],pcsServiceIdentitiesIncluded:!0,apps:{},requestInfo:{region:"CA",isAppleInternal:!0,timeZone:"PST",country:"US"},pcsEnabled:!0,version:1}},didLoadAuthorizationBag:function(e){},getJSONAuthorizationBagForCredentials:function(e,t){return this.authBag},staticMembers:{__QUALIFIED_CLASS_NAME__:"MockAuthorizationBagProvider"}}),At=w.a.extend({authorizationBagProvider:a.c({set:function(e){this._authBagProvider=e},get:function(){var e=this._authBagProvider;return e||(e=this._authBagProvider=this.loadAuthorizationBagProvider()),e}}),loadAuthorizationBagProvider:function(){return BR.CloudOS.MockAuthorizationBagProvider.create()},login:function(e,t){var n=this.authorizationBagProvider.getJSONAuthorizationBagForCredentials(e,t),i=g.a.create();return setTimeout(function(){i.resolve({authorizationBag:n,session:{}})}),i},logout:function(e){var t=g.a.create();return setTimeout(function(){t.resolve()}),t},staticMembers:{__QUALIFIED_CLASS_NAME__:"MockSetupService"}}),Et={getFormattingRulesForLocale:function(e){}},Tt={login:function(e,t){},logout:function(e){},validate:function(e){}},Mt=n(258),Dt=A.a.extend(Mt.a,{staticMembers:{generateShardedHostname:function(e,t){return e.replace(/cvws/,"cvws-00"+t)},__QUALIFIED_CLASS_NAME__:"ContentVendorURL"}}),Lt=n(91),Nt=n(309),Pt=n(110),Rt=n(164),xt=w.a.extend(S.a,{isFormData:function(e){return e instanceof FormData&&void 0!==e},isBlob:function(e){return e instanceof Blob},isFile:function(e){return e instanceof File},isFileList:function(e){return e instanceof FileList},blobSlice:function(e,t,n,i){var r=Blob.prototype;return(r.slice||r.webKitSlice||r.mozSlice).call(e,t,n,i)},staticMembers:{__QUALIFIED_CLASS_NAME__:"FileAPI"}}),Ft=n(86),kt=n(411),Vt=E.a.extend(h.a,{init:function(){var e=arguments;this.__s._$Ij$init.apply(this,e),this.get("transport")!==kt.a.get("sharedInstance")&&Object(s.b)("Attempting a file upload from an unsupported browser.",this);var t=this.uploadProgress;t.bytesTotal=this._totalSize||0,this.on(Ft.b.SUCCEEDED,function(){t.bytesTransferred=t.bytesTotal})},method:Ft.a.POST,body:Object(r.b)({set:function(e){return this.generateFormDataFromBody(e)},didChange:l.a}),files:Object(p.b)(Array),bodySerializer:null,shouldTrackUploadProgress:!0,formKey:"files",generateFormDataFromBody:function(e){var t=xt.get("sharedInstance");if(t.isFormData(e)||!e)return e;var n=t.isFileList(e),i=t.isFile(e),r=t.isBlob(e);i||n||r||Object(s.b)("Must provide either a File or FileList.",{fileOrFileList:e});var a=new FormData;return this._totalSize=0,n?Array.prototype.forEach.call(e,function(e){this.appendFileToFormData(e,a)},this):this.appendFileToFormData(e,a),a},appendFileToFormData:function(e,t){var n=this.get("formKey"),i=y.a.get("sharedInstance");!e.size&&i.get("isIE")&&i.get("majorVersion")<=10?t.append(n,""):t.append(n,e),this._totalSize+=e.size||0,this.files.push(e)},__superMap:{_$Ij$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"UploadRequest"}}).extend(Pt.a,{staticMembers:{__QUALIFIED_CLASS_NAME__:"UploadRequest"}}),jt=n(1276),Bt=n(1134),Ut=n(414),Wt=n(1182),Gt=n(788),Ht=n(790),$t=n(410),zt=(n(485),n(200).a.extend({action:null,callAction:function(){this.sendEvent("accountMenuItemWasSelected",this.action)},staticMembers:{className:"cosk-ui-title-bar-account-menu-item-view",__QUALIFIED_CLASS_NAME__:"AccountMenuItemView"}})),Kt=nt.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"MULTIVIEWOUTLET",tagname:"views",name:"accountMenuItemViews"}],classes:["cosk-account-menu"]},className:"cosk-ui-title-bar-account-menu-view",__QUALIFIED_CLASS_NAME__:"AccountMenu"},desiredSize:r.b({strong:!0,defaultValue:p.b(Ht.a,{width:100,height:100})}),minimumSize:r.b({strong:!0,binding:st.c("desiredSize")}),accountMenuItemViews:p.b($t.b),accountMenuItems:r.b(p.b(Array)),_accountMenuItemsObserver:h.f("accountMenuItems",function(e){var t=this.get("accountMenuItemViews");if(t.splice(0,t.get("length")),e){var n=e.length,i=0;for(i=0;i<n;i++)t.push(zt.create(e[i]))}}),_remeasureIfNeeded:h.f("isAttached","_accountMenuItemsObserver",function(){if(this.get("isAttached")){this.get("style").set("width","auto").set("height","auto");var e=this.get("element"),t=this.get("desiredSize");t.set("width",e.offsetWidth),t.set("height",e.offsetHeight),this.get("style").set("width","").set("height","")}})}),Qt=Gt.a.extend({viewClass:Kt,accountMenuItems:r.b({dependencies:[re.a.bindingFor("environment.accountMenu")],readOnly:!0,get:Object.assign(function(){var e=re.a.environment.accountMenu;return e&&e.items?e.items:[]},{__CW__getter:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return r&&r.items?r.items:[]}})}),createView:function(){return this.get("viewClass").create({accountMenuItems:this.bindingFor("accountMenuItems")})},accountMenuItemWasSelected:function(e){return re.a.get("cloudOSService").invokeMethodOnCloudOS(e),!1},showAccountSettings:function(){var e=re.a.get("cloudOSService");e.showAccountSettings.call(e)},signOut:function(){var e=re.a.get("cloudOSService");e.performLogout.call(e)},staticMembers:{__QUALIFIED_CLASS_NAME__:"AccountMenuViewController"}}),qt=jt.b.extend({allowedLayouts:[Bt.a],viewClass:Ut.b.extend({additionalClassNames:Wt.a(["cosk-account-menu-popover"])}),arrowLength:26,desiredSize:st.c("contentController.view.desiredSize"),minimumSize:st.c("contentController.view.minimumSize"),createView:function(){var e=arguments,t=this.__s._$9l$createView.apply(this,e);return Yt.create({popoverView:t})},accountMenuItemWasSelected:function(e){return this.hide(),!0},updateLayout:function(){this.propertyChanged("anchor")},contentController:r.b({defaultValue:function(){return Qt.create()}}),modalTap:function(){this.toggle()},__superMap:{_$9l$createView:"createView"},staticMembers:{__QUALIFIED_CLASS_NAME__:"AccountMenuPopoverViewController"}}),Yt=nt.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"popoverView"}],classes:["cosk-account-menu-modal"]},className:"cosk-ui-title-bar-view-controllers-modal-view",__QUALIFIED_CLASS_NAME__:"ModalView"},layout:r.b(),anchorLayout:r.b(),arrowLength:r.b(),arrowWidth:r.b(),arrowAlignment:r.b(),horizontalAlignment:r.b(),verticalAlignment:r.b(),popoverView:r.b({downstreamBindings:{layout:"(owner).layout",anchorLayout:"(owner).anchorLayout",arrowLength:"(owner).arrowLength",arrowWidth:"(owner).arrowWidth",arrowAlignment:"(owner).arrowAlignment",horizontalAlignment:"(owner).horizontalAlignment",verticalAlignment:"(owner).verticalAlignment"}}),contentView:r.b(st.c("popoverView.contentView")),pointerDown:function(e){return this.sendEvent("modalTap"),!0}}),Zt=(n(486),n(395),n(1141)),Jt=n(1188),Xt=nt.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"svg",children:[{type:"ELEMENT",tagname:"path",namespace:"http://www.w3.org/2000/svg",attributes:{d:"M5.5,6.34852814 L0.651471863,1.5 L1.5,0.651471863 L5.5,4.65147186 L9.5,0.651471863 L10.3485281,1.5 L5.5,6.34852814 Z"}}],classes:["cosk-chevron-icon"],namespace:"http://www.w3.org/2000/svg",attributes:{width:"11px",height:"7px",viewBox:"0 0 11 7",version:"1.1",xlink:"http://www.w3.org/1999/xlink"}},className:"cosk-ui-title-bar-chevron-view",__QUALIFIED_CLASS_NAME__:"ChevronView"}}),en=n(986),tn=n(987),nn=nt.a.extend(Zt.a,{staticMembers:{template:{type:"ELEMENT",tagname:"span",children:[{type:"ELEMENT",tagname:"span",classes:["cosk-icloud-logo"],name:"logoEl"},{type:"ELEMENT",tagname:"span",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"appName",attributes:{signal:"appNameDidRender"}}],classes:["cosk-app-display-name"],attributes:{title:{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"appSwitcherTooltip",attributes:{},attribute:"title"}}},{type:"VIEWOUTLET",tagname:"view",name:"chevronView"}],classes:["cosk-app-switcher-trigger"]},className:"cosk-ui-title-bar-app-switcher-trigger-view",__QUALIFIED_CLASS_NAME__:"AppSwitcherButton"},additionalClassNames:Wt.a(["large-display-text"]),init:function(){var e=arguments;this.__s._$Fw$init.apply(this,e),this.logoEl.innerHTML=re.a.currentUser.isChineseAccount?tn:en},chevronView:p.b(Xt),appName:r.b(),appSwitcherTooltip:r.b({get:function(){return b.d("Toolbar.AppSwitcher.Tooltip")}}),action:"showAppSwitcher",showAppSwitcher:function(e){var t=this.getPath("parent.rect"),n=re.a.get("cloudOSService"),i=Jt.a.create({top:t.bottom,left:t.left+t.width/2,width:1,height:1});n.showAppSwitcher(i)},__superMap:{_$Fw$init:"init"}}),rn=nt.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"appSwitcherTriggerView"}],classes:["cosk-app-name"]},className:"cosk-ui-title-bar-app-name-view",__QUALIFIED_CLASS_NAME__:"AppNameView"},appName:r.b(),appSwitcherTriggerView:r.b({defaultValue:function(){return nn.create({appName:this.bindingFor("appName")})}}),preferredWidth:r.b({dependencies:["appSwitcherTriggerView.isAttached","appSwitcherTriggerView.appNameDidRender"],readOnly:!0,get:Object.assign(function(){if(this.getPath("appSwitcherTriggerView.isAttached")){var e,t;t=(e=this.get("style")).getInline("width"),e.set("width","auto");var n=this.get("element").offsetWidth;return e.set("width",t),n}},{__CW__getter:function(e,t,n,i){if(i.internalGetPath(this,t[0+n])){var r,a;a=(r=this.get("style")).getInline("width"),r.set("width","auto");var s=this.get("element").offsetWidth;return r.set("width",a),s}}})})}),an=nt.a.extend(Zt.a,{staticMembers:{template:{type:"ELEMENT",tagname:"span",children:[{type:"ELEMENT",tagname:"span",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"displayName",attributes:{}}],classes:["cosk-display-name"]},{type:"VIEWOUTLET",tagname:"view",name:"chevronView"}],classes:["cosk-user-display-name-wrapper"]},className:"cosk-ui-title-bar-display-name-view",__QUALIFIED_CLASS_NAME__:"AccountNameButton"},additionalClassNames:Wt.a(["large-display-text"]),chevronView:p.b(Xt),displayName:r.b(),action:"toggleAccountMenu",accountMenuPopoverController:r.b({defaultValue:function(){return qt.create().retain()}}),tooltip:b.d("Toolbar.Button.Action.UserAction"),dispose:function(){var e=arguments;this.get("accountMenuPopoverController").release(),this.__s._$Ho$dispose.apply(this,e)},updateLayout:function(){this.get("accountMenuPopoverController").updateLayout()},toggleAccountMenu:function(){this.get("accountMenuPopoverController").toggle(this)},writeNameToDOMForMeasurement:function(e){this.get("element").querySelector(".cosk-display-name").childNodes[0].data=e},__superMap:{_$Ho$dispose:"dispose"}}),sn=n(988),on=nt.a.extend(Zt.a,{staticMembers:{template:{type:"ELEMENT",tagname:"div",classes:["cosk-help-icon"],name:"iconEl"},className:"cosk-ui-title-bar-help-view",__QUALIFIED_CLASS_NAME__:"HelpButton"},init:function(){var e=arguments;this.__s._$6J$init.apply(this,e),this.iconEl.innerHTML=sn},action:"showHelp",tooltip:b.d("Button.Help.Tooltip"),owner:r.b(),showHelp:function(e){re.a.get("cloudOSService").get("showHelp").call(this,this.get("helpAnchor"))},__superMap:{_$6J$init:"init"}}),cn=n(1238),ln=(n(989),nt.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"displayNameView"},{type:"ELEMENT",tagname:"span",classes:["cosk-user-splitter"]},{type:"VIEWOUTLET",tagname:"view",name:"helpView"}],classes:["cosk-user-view"],styles:{width:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"widthStyle",attributes:{},unit:null,property:"width"}}},className:"cosk-ui-title-bar-user-view",__QUALIFIED_CLASS_NAME__:"AccountView"},width:r.b("auto"),widthStyle:r.b({dependencies:["width"],readOnly:!0,get:Object.assign(function(){var e=this.width;return"auto"===e?e:e+"px"},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return"auto"===r?r:r+"px"}})}),helpAnchor:r.b(),helpView:p.b(on.extend({helpAnchor:r.b(st.c("owner.helpAnchor"))})),displayName:r.b({cacheable:!0,dependencies:["widthOptions","width"],readOnly:!0,get:Object.assign(function(){var e=this.widthOptions;if(this.width,!e)return"";var t,n=e.longName,i=e.shortName;return t=cn.a(n.value)?n.value:i.value,this.set("_displayName",t),t},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);if(i.internalGet(this,t[1+n]),!r)return"";var a,s=r.longName,o=r.shortName;return a=cn.a(s.value)?s.value:o.value,this.set("_displayName",a),a}})}),displayNameView:r.b({defaultValue:function(){return an.create({displayName:this.bindingFor("displayName")})}}),widthOptions:r.b({cacheable:!0,dependencies:["isAttached","displayNameView",re.a.bindingFor("currentUser.firstName"),re.a.bindingFor("currentUser.lastName")],readOnly:!0,get:Object.assign(function(){var e=this.isAttached,t=this.displayNameView,n=re.a.currentUser.firstName,i=re.a.currentUser.lastName;if(!e)return null;var r,a,s,o,c,l=Object(fe.a)({givenName:n}),u=Object(fe.a)({givenName:n,familyName:i}),d=this.get("element"),h=d.style;return r=d.style.width,a=this.get("_displayName")||u,s=h.position,h.width="auto",h.position="absolute",t.writeNameToDOMForMeasurement(l),o=d.offsetWidth,t.writeNameToDOMForMeasurement(u),c=d.offsetWidth,h.width=r,h.position=s,t.writeNameToDOMForMeasurement(a),{shortName:{width:o,value:l},longName:{width:c,value:u}}},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]),s=i.internalGetPath(this,t[2+n]),o=i.internalGetPath(this,t[3+n]);if(!r)return null;var c,l,u,d,h,p=Object(fe.a)({givenName:s}),f=Object(fe.a)({givenName:s,familyName:o}),g=this.get("element"),m=g.style;return c=g.style.width,l=this.get("_displayName")||f,u=m.position,m.width="auto",m.position="absolute",a.writeNameToDOMForMeasurement(p),d=g.offsetWidth,a.writeNameToDOMForMeasurement(f),h=g.offsetWidth,m.width=c,m.position=u,a.writeNameToDOMForMeasurement(l),{shortName:{width:d,value:p},longName:{width:h,value:f}}}})}),_displayName:null,updateLayout:function(){this.get("displayNameView").updateLayout()}})),un=n(345),dn={persistAfterLogoutSuffix:".persist",getValueFromSessionStorage:function(e){return this._getValueFromStorage("sessionStorage",e)},setValueInSessionStorage:function(e,t){return this._setValueInStorage("sessionStorage",e,t)},removeValueInSessionStorage:function(e){return this._removeValueInStorage("sessionStorage",e)},getKeysInSessionStorage:function(){return this._getKeysInStorage("sessionStorage")},clearSessionStorage:function(){return this._clearStorage("sessionStorage")},getValueFromLocalStorage:function(e,t){return this._getValueFromStorage("localStorage",e,t)},setValueInLocalStorage:function(e,t,n){return this._setValueInStorage("localStorage",e,t,n)},removeValueInLocalStorage:function(e,t){return t&&(e+=this.persistAfterLogoutSuffix),this._removeValueInStorage("localStorage",e)},getKeysInLocalStorage:function(){return this._getKeysInStorage("localStorage")},clearLocalStorage:function(){return this._clearStorage("localStorage",!0)},_getStorageObject:function(e){try{return window[e]}catch(t){o.b.warn("Could not get storage object for %@: %@",e,t)}},_getValueFromStorage:function(e,t,n){var i,r,a=null,s=this._getStorageObject(e);return s&&s.getItem&&((i=(r=re.a.cloudOSApplication)?r.name:"iCloud")&&(t=i+"."+t),n&&(t+=this.persistAfterLogoutSuffix),a=s.getItem(t)),a},_setValueInStorage:function(e,t,n,i){var r,a,s=!1,o=this._getStorageObject(e);if(o&&o.setItem){(r=(a=re.a.cloudOSApplication)?a.name:"iCloud")&&(t=r+"."+t),i&&(t+=this.persistAfterLogoutSuffix);try{o.setItem(t,n),s=!0}catch(e){}}return s},_getKeysInStorage:function(e){var t,n,i,r,a=[],s=this._getStorageObject(e);if(s)for(r in(n=(t=re.a.cloudOSApplication)?t.name:"iCloud")&&(n+="."),i=n?n.length:0,s)0===r.indexOf(n)&&a.push(r.substring(i));return a}},hn=n(340),pn=function(e,t){return re.a.get("authBag").getServiceUrlFor(e,t)},fn=function(e,t){Storage.setValueInSessionStorage("reloadReason",e),"PROD"!==re.a.environment.iCloudEnvironment&&Storage.setValueInSessionStorage("preReloadLogMessages",o.b.stringifyRecordedLogMessages()),t?window.location=t:window.location.reload(),re.a.isReloading=!0},gn=qe.extend({run:function(){var e=arguments;this.cloudOSState===Ge.NotLoaded&&this.load();var t=null;try{window.opener&&window.opener.CloudOS&&(t=window.opener.CloudOS)}catch(e){o.b.debug("Cannot get the Opener window."+e.message)}var n=window.location.hash.split("instanceId=")[1];if(n){var i=window.location,r=i.hash;r=(r=r.split("&instanceId=")[0]).split("#instanceId=")[0];var a=window.history;a&&a.replaceState?a.replaceState(null,null,i.pathname+i.search+r):i.hash=r}t&&t.windowApplicationIsKnown(n||window)?(o.b.debug("COSK.WindowApplication: Asking parent CloudOS to be initialized"),t.windowApplicationHasInitialized(n||window,this.get("name"))):(o.b.debug("COSK.WindowApplication: Starting stand-alone"),o.b.debug("COSK.WindowApplication: To be implemented")),this.__s._$ZK$run.apply(this,e)},prepareForLoad:function(){var e=arguments;"en-us"!==b.c()&&(C.get("sharedInstance").setCookie("X-APPLE-WEB-USERLOCALE","en-us"),"en-us"!==Storage.getValueFromSessionStorage("didRefreshToLocale")?(Storage.setValueInSessionStorage("didRefreshToLocale","en-us"),fn("prepareForLoad: Changing locale")):o.b.warn("Already attempted refresh to locale en-us")),this.__s._$s0$prepareForLoad.apply(this,e)},willBecomeActive:function(){},didBecomeActive:function(){},willBecomeSuspended:function(){},didBecomeSuspended:function(){},__superMap:{_$ZK$run:"run",_$s0$prepareForLoad:"prepareForLoad"},staticMembers:{__QUALIFIED_CLASS_NAME__:"WindowApplication"}});n.d(t,"CloudOSApplicationStateEnum",function(){return Ge}),n.d(t,"Application",function(){return qe}),n.d(t,"BackwardCompatibleCK",function(){return se}),n.d(t,"BackwardCompatibleCloudOS",function(){return oe}),n.d(t,"BackwardCompatibleWindowApplication",function(){return ae}),n.d(t,"ApplicationLauncher",function(){return Ze}),n.d(t,"BaseApplicationLauncher",function(){return Ye}),n.d(t,"WindowApplicationLauncher",function(){return It}),n.d(t,"CloudOSServiceProtocol",function(){return ce}),n.d(t,"ComposeEmailController",function(){return wt}),n.d(t,"RPCChannelStateEnum",function(){return q}),n.d(t,"RPCBaseChannel",function(){return te}),n.d(t,"RPCBaseInputChannel",function(){return Pe}),n.d(t,"RPCBaseOutputChannel",function(){return ne}),n.d(t,"RPCInputChannel",function(){return xe}),n.d(t,"RPCMessageEvent",function(){return Re}),n.d(t,"RPCOutputChannel",function(){return ie}),n.d(t,"AdditionalRequestParams",function(){return vt}),n.d(t,"ApplicationWindowProxy",function(){return Xe}),n.d(t,"AuthorizationBagProviderProtocol",function(){return St}),n.d(t,"CloudOSHost",function(){return ht}),n.d(t,"KeyValueService",function(){return yt}),n.d(t,"KeyValueServiceProtocol",function(){return Ct}),n.d(t,"MockAuthorizationBagProvider",function(){return Ot}),n.d(t,"MockRegionFormatProvider",function(){return mt}),n.d(t,"MockSetupService",function(){return At}),n.d(t,"RegionFormatProviderProtocol",function(){return Et}),n.d(t,"RuntimeSetupService",function(){return _t}),n.d(t,"SetupServiceProtocol",function(){return Tt}),n.d(t,"AuthBag",function(){return Se}),n.d(t,"Environment",function(){return Te}),n.d(t,"QuotaInfo",function(){return Ce}),n.d(t,"ServiceInfo",function(){return he}),n.d(t,"AppleIdEntryType",function(){return Ie}),n.d(t,"User",function(){return we}),n.d(t,"ContentVendorURL",function(){return Dt}),n.d(t,"Request",function(){return Lt.a}),n.d(t,"RequestReportingSupport",function(){return Nt.a}),n.d(t,"RequestSupport",function(){return Pt.a}),n.d(t,"ShardedURLSupport",function(){return Mt.a}),n.d(t,"URL",function(){return Rt.a}),n.d(t,"UploadRequest",function(){return Vt}),n.d(t,"EnumGroup",function(){return V}),n.d(t,"createEnumGroup",function(){return j}),n.d(t,"EnumGroupSupport",function(){return M}),n.d(t,"EnumItem",function(){return R}),n.d(t,"createEnumMainState",function(){return F}),n.d(t,"EXIT_NON_FATAL",function(){return 0}),n.d(t,"EXIT_FATAL_ERROR",function(){return 1}),n.d(t,"EXIT_STARTUP_ERROR",function(){return 2}),n.d(t,"EXIT_PCS_MISSING",function(){return 3}),n.d(t,"EXIT_PCS_INVALID",function(){return 4}),n.d(t,"ApplicationDriver",function(){return je}),n.d(t,"ApplicationDriverStateEnum",function(){return B}),n.d(t,"BaseApplicationDriver",function(){return z}),n.d(t,"TraceSupport",function(){return T}),n.d(t,"AccountMenuPopoverViewController",function(){return qt}),n.d(t,"AccountMenuViewController",function(){return Qt}),n.d(t,"LogoutAlertViewController",function(){return lt}),n.d(t,"AccountMenuItemView",function(){return zt}),n.d(t,"AccountMenu",function(){return Kt}),n.d(t,"AppNameView",function(){return rn}),n.d(t,"AppSwitcherButton",function(){return nn}),n.d(t,"ChevronView",function(){return Xt}),n.d(t,"AccountNameButton",function(){return an}),n.d(t,"HelpButton",function(){return on}),n.d(t,"AccountView",function(){return ln}),n.d(t,"CKRequest",function(){return un.a}),n.d(t,"FatalExceptionHandler",function(){return We}),n.d(t,"region",function(){return Oe.a}),n.d(t,"Storage",function(){return dn}),n.d(t,"addRootDomainQueryParameterHackAsAppropriate",function(){return hn.a}),n.d(t,"displayNameFor",function(){return fe.a}),n.d(t,"getUrlForServiceName",function(){return pn}),n.d(t,"intToHexString",function(){return L}),n.d(t,"matchesFormatOfAppleId",function(){return ge}),n.d(t,"matchesFormatOfEmailAddress",function(){return me}),n.d(t,"matchesFormatOfPhoneNumberAppleId",function(){return ve}),n.d(t,"matchesFormatOfPhoneNumber",function(){return _e}),n.d(t,"normalizePhoneNumber",function(){return be}),n.d(t,"reloadWithReason",function(){return fn}),n.d(t,"WindowApplication",function(){return gn}),n.d(t,"globals",function(){return re.a})},function(e,t,n){"use strict";var i=n(172);i.b(i.c(),{"CKSharing.UnexpectedTerminationMessage":"An unexpected error occurred.","CKSharing.Busy.LoadingParticipants.Description":"Loading…","CKSharing.Busy.Loading.Description":"Loading…","CKSharing.Sending.Description":"Preparing…","CKSharing.Dialog.Button.OK":"OK","CKSharing.Dialog.Button.Continue":"Continue","CKSharing.Dialog.Button.Cancel":"Cancel","CKSharing.Dialog.Button.Done":"Done","CKSharing.ErrorDialog.ACCESS_DENIED.Message":"Your request couldn’t be completed.","CKSharing.ErrorDialog.ACCESS_DENIED.Description.CloudKit":"This account has restrictions on the people you can share with.","CKSharing.ErrorDialog.ACCESS_DENIED.Description.Keynote":"This account has restrictions on the people you can share presentations with.","CKSharing.ErrorDialog.ACCESS_DENIED.Description.Notes":"This account has restrictions on the people you can share notes with.","CKSharing.ErrorDialog.ACCESS_DENIED.Description.Numbers":"This account has restrictions on the people you can share spreadsheets with.","CKSharing.ErrorDialog.ACCESS_DENIED.Description.Pages":"This account has restrictions on the people you can share documents with.","CKSharing.ErrorDialog.ACCESS_DENIED.Description.Drive":"This account has restrictions on the people you can share files with.","CKSharing.ErrorDialog.ACCESS_DENIED.Description.Photos":"This account has restrictions on the people you can share photos with.","CKSharing.ErrorDialog.AddingParticipants.MAIL_ADD_PARTICIPANTS_FAILED.Message":"Cannot send message.","CKSharing.ErrorDialog.AddingParticipants.MAIL_ADD_PARTICIPANTS_FAILED.Description":"One or more participants cannot be invited because of an error.","CKSharing.ErrorDialog.DESTROY.Message":"Sharing couldn’t be stopped.","CKSharing.ErrorDialog.UPDATE.Message":"Share options couldn’t be changed.","CKSharing.ErrorDialog.INVITE_TO_PRIVATE.VIA_EMAIL.TO_PERSON.Message":"Your invitation couldn’t be sent.","CKSharing.ErrorDialog.INVITE_TO_PRIVATE.VIA_EMAIL.TO_PEOPLE.Message":"Your invitations couldn’t be sent.","CKSharing.ErrorDialog.INVITE_TO_PRIVATE.VIA_UNKNOWN.Message":"People couldn’t be added.","CKSharing.ErrorDialog.INVITE_TO_PUBLIC.Message.CloudKit":"This can’t be shared right now.","CKSharing.ErrorDialog.INVITE_TO_PUBLIC.Message.Keynote":"This presentation can’t be shared right now.","CKSharing.ErrorDialog.INVITE_TO_PUBLIC.Message.Notes":"This note can’t be shared right now.","CKSharing.ErrorDialog.INVITE_TO_PUBLIC.Message.Numbers":"This spreadsheet can’t be shared right now.","CKSharing.ErrorDialog.INVITE_TO_PUBLIC.Message.Pages":"This document can’t be shared right now.","CKSharing.ErrorDialog.INVITE_TO_PUBLIC.Message.Drive":"This file can’t be shared right now.","CKSharing.ErrorDialog.INVITE_TO_PUBLIC.Message.Photos":"These photos can’t be shared right now.","CKSharing.ErrorDialog.INVITE_TO_PUBLIC.Message.Photos.Compact":"Photos Could Not Be Shared","CKSharing.ErrorDialog.SEND_LINK.Message.CloudKit":"The link can’t be sent right now.","CKSharing.ErrorDialog.SEND_LINK.Message.Keynote":"The link to this presentation can’t be sent right now.","CKSharing.ErrorDialog.SEND_LINK.Message.Notes":"The link to this note can’t be sent right now.","CKSharing.ErrorDialog.SEND_LINK.Message.Numbers":"The link to this spreadsheet can’t be sent right now.","CKSharing.ErrorDialog.SEND_LINK.Message.Pages":"The link to this document can’t be sent right now.","CKSharing.ErrorDialog.SEND_LINK.Message.Drive":"The link to this file can’t be sent right now.","CKSharing.ErrorDialog.CONFLICT.Description":"Changes were made on another device. Please try again.","CKSharing.ErrorDialog.UNKNOWN_ERROR.Description":"There may be a problem with the server. Please try again later.","CKSharing.ErrorDialog.UNKNOWN_ERROR.Description.Compact":"Please try again later.","CKSharing.ErrorDialog.TOO_MANY_INVITEES.Message":"You’ve reached the maximum number of invites.","CKSharing.ErrorDialog.TOO_MANY_INVITEES.Description":"New invitations can’t be sent. Reduce the number of people you’re inviting or have previously invited, then try again.","CKSharing.ErrorDialog.ADDED_ONLY_YOURSELF.Message":"You can’t share to your own iCloud email address.","CKSharing.ErrorDialog.ADDED_ONLY_YOURSELF.Description":"Enter other people’s email addresses or phone numbers, then try again.","CKSharing.ErrorDialog.ADDED_ONLY_YOURSELF_EMAIL.Description":"Enter other people’s email addresses, then try again.","CKSharing.ErrorDialog.ValidateTokens.ONE_INVALID_TOKEN.Message":"“%{value}” is not a valid email address or phone number.","CKSharing.ErrorDialog.ValidateTokens.ONE_INVALID_TOKEN.OVER_SIZE.Ellipsis":"…","CKSharing.ErrorDialog.ValidateTokens.ONE_INVALID_TOKEN.Description":"Please enter a valid email address or phone number, then try sharing again.","CKSharing.ErrorDialog.ValidateTokens.SOME_INVALID_TOKENS.Message":"Some email addresses or phone numbers you entered are not valid.","CKSharing.ErrorDialog.ValidateTokens.SOME_INVALID_TOKENS.Description":"Please enter valid email addresses or phone numbers, then try sharing again.","CKSharing.ErrorDialog.ValidateTokens.ALL_INVALID_TOKENS.Message":"The email addresses or phone numbers you entered are not valid.","CKSharing.ErrorDialog.ValidateTokens.ALL_INVALID_TOKENS.Description":"Please enter valid email addresses or phone numbers, then try sharing again.","CKSharing.ErrorDialog.ValidateTokens.Email.ONE_INVALID_TOKEN.Message":"“%{value}” is not a valid email address.","CKSharing.ErrorDialog.ValidateTokens.Email.ONE_INVALID_TOKEN.Description":"Please enter a valid email address, then try sharing again.","CKSharing.ErrorDialog.ValidateTokens.Email.SOME_INVALID_TOKENS.Message":"Some email addresses you entered are not valid.","CKSharing.ErrorDialog.ValidateTokens.Email.SOME_INVALID_TOKENS.Description":"Please enter valid email addresses, then try sharing again.","CKSharing.ErrorDialog.ValidateTokens.Email.ALL_INVALID_TOKENS.Message":"The email addresses you entered are not valid.","CKSharing.ErrorDialog.ValidateTokens.Email.ALL_INVALID_TOKENS.Description":"Please enter valid email addresses, then try sharing again.","CKSharing.ErrorDialog.OKButton.Title":"OK","CKSharing.ErrorDialog.MailComposer.LoadTimeout.Message":"Cannot open iCloud Mail.","CKSharing.ErrorDialog.MailComposer.LoadTimeout.Description":"There may be a problem with the server. Please try again later.","CKSharing.ConfirmationDialog.PublicToPrivate.Message":"Change to invite only?","CKSharing.ConfirmationDialog.PublicToPrivate.Description.CloudKit.WithTitle":"Only you will have access to “%{shareTitle}” until you invite people.","CKSharing.ConfirmationDialog.PublicToPrivate.Description.CloudKit.WithoutTitle":"Only you will have access until you invite people.","CKSharing.ConfirmationDialog.PublicToPrivate.Description.Drive":"Everyone will be removed from this file and it will be deleted from iCloud Drive on all of their devices.","CKSharing.ConfirmationDialog.PublicToPrivate.Description.Pages":"Everyone will be removed from this document and it will be deleted from iCloud Drive on all of their devices.","CKSharing.ConfirmationDialog.PublicToPrivate.Description.Keynote":"Everyone will be removed from this presentation and it will be deleted from iCloud Drive on all of their devices.","CKSharing.ConfirmationDialog.PublicToPrivate.Description.Numbers":"Everyone will be removed from this spreadsheet and it will be deleted from iCloud Drive on all of their devices.","CKSharing.ConfirmationDialog.StopSharing.Message.CloudKit":"Stop sharing?","CKSharing.ConfirmationDialog.StopSharing.Message.Drive":"Stop sharing this file?","CKSharing.ConfirmationDialog.StopSharing.Message.Pages":"Stop sharing this document?","CKSharing.ConfirmationDialog.StopSharing.Message.Keynote":"Stop sharing this presentation?","CKSharing.ConfirmationDialog.StopSharing.Message.Numbers":"Stop sharing this spreadsheet?","CKSharing.ConfirmationDialog.StopSharing.Message.Notes":"Stop sharing this note?","CKSharing.ConfirmationDialog.StopSharing.Description.CloudKit.WithTitle":"If you stop sharing, other people will no longer have access to “%{shareTitle}”.","CKSharing.ConfirmationDialog.StopSharing.Description.CloudKit.WithoutTitle":"If you stop sharing, other people will no longer have access.","CKSharing.ConfirmationDialog.StopSharing.Description.Drive":"If you stop sharing, other people will no longer have access to this file and it will be deleted from iCloud Drive on all of their devices.","CKSharing.ConfirmationDialog.StopSharing.Description.Pages":"If you stop sharing, other people will no longer have access to this document and it will be deleted from iCloud Drive on all of their devices.","CKSharing.ConfirmationDialog.StopSharing.Description.Keynote":"If you stop sharing, other people will no longer have access to this presentation and it will be deleted from iCloud Drive on all of their devices.","CKSharing.ConfirmationDialog.StopSharing.Description.Numbers":"If you stop sharing, other people will no longer have access to this spreadsheet and it will be deleted from iCloud Drive on all of their devices.","CKSharing.ConfirmationDialog.StopSharing.Description.Notes":"If you stop sharing, other people will no longer have access to this note and it will be deleted on all of their devices.","CKSharing.ConfirmationDialog.RemoveYourself.Message.CloudKit":"Are you sure you want to remove yourself?","CKSharing.ConfirmationDialog.RemoveYourself.Message.Drive":"Are you sure you want to remove yourself from this shared file?","CKSharing.ConfirmationDialog.RemoveYourself.Message.Pages":"Are you sure you want to remove yourself from this shared document?","CKSharing.ConfirmationDialog.RemoveYourself.Message.Keynote":"Are you sure you want to remove yourself from this shared presentation?","CKSharing.ConfirmationDialog.RemoveYourself.Message.Numbers":"Are you sure you want to remove yourself from this shared spreadsheet?","CKSharing.ConfirmationDialog.RemoveYourself.Message.Notes":"Are you sure you want to remove yourself from this shared note?","CKSharing.ConfirmationDialog.RemoveYourself.Description.CloudKit.WithTitle":"This will remove you from “%{shareTitle}”.","CKSharing.ConfirmationDialog.RemoveYourself.Description.CloudKit.WithoutTitle":"You will no longer have access.","CKSharing.ConfirmationDialog.RemoveYourself.Description.Drive":"Removing yourself from this shared file will delete the document from iCloud Drive on all your devices.","CKSharing.ConfirmationDialog.RemoveYourself.Description.Pages":"Removing yourself from this shared document will delete the document from iCloud Drive on all your devices.","CKSharing.ConfirmationDialog.RemoveYourself.Description.Keynote":"Removing yourself from this shared presentation will delete the presentation from iCloud Drive on all your devices.","CKSharing.ConfirmationDialog.RemoveYourself.Description.Numbers":"Removing yourself from this shared spreadsheet will delete the spreadsheet from iCloud Drive on all your devices.","CKSharing.ConfirmationDialog.RemoveYourself.Description.Notes":"Removing yourself from this shared note will delete the note from all your devices.","CKSharing.ConfirmationDialog.RemoveFinalParticipant.Message":"Are you sure you want to remove “%{name}”?","CKSharing.ConfirmationDialog.RemoveFinalParticipant.Description":"Removing the only invited participant will stop sharing.","CKSharing.SummaryText.OwnerAdmin.Private.RW.WOption":"Only people you invite can make changes","CKSharing.SummaryText.OwnerAdmin.Private.RO.WOption":"Only people you invite can view","CKSharing.SummaryText.OwnerAdmin.Private.Mixed.WOption":"Only people you invite can open","CKSharing.SummaryText.OwnerAdmin.Private.RW.NoOption":"People you invite can make changes.","CKSharing.SummaryText.OwnerAdmin.Private.RO.NoOption":"People you invite can view.","CKSharing.SummaryText.OwnerAdmin.Private.Mixed.NoOption":"People you invite can open.","CKSharing.SummaryText.OwnerAdmin.Public.RW.WOption":"Anyone with the link can make changes","CKSharing.SummaryText.OwnerAdmin.Public.RO.WOption":"Anyone with the link can view","CKSharing.SummaryText.OwnerAdmin.Public.RW.NoOption":"Anyone with the link can make changes.","CKSharing.SummaryText.OwnerAdmin.Public.RO.NoOption":"Anyone with the link can view.","CKSharing.SummaryText.Participant.Private.RW":"Only %{ownerName} can invite people.","CKSharing.SummaryText.Participant.Private.RO":"Only %{ownerName} can invite people.","CKSharing.SummaryText.Participant.Private.Mixed":"Only %{ownerName} can invite people.","CKSharing.SummaryText.Participant.Public.RW":"Anyone with the link can make changes.","CKSharing.SummaryText.Participant.Public.RO":"Anyone with the link can view.","CKSharing.PermissionsCombo.AllowEditing":"Can make changes","CKSharing.PermissionsCombo.ViewOnly":"View only","CKSharing.PermissionsCombo.Mixed":"Mixed","CKSharing.ManageShare.Title":"People","CKSharing.ManageShare.Button.AddPeople":"Add People","CKSharing.ManageShare.Button.SendLink":"Send Link","CKSharing.ManageShare.Button.CopyLink":"Copy Link","CKSharing.ManageShare.Button.ShareOptions":"Share Options","CKSharing.ManageShare.Button.Close":"Done","CKSharing.ManageShare.Button.StopSharing":"Stop Sharing","CKSharing.ManageShare.List.Label.Owner":" (Owner)","CKSharing.ManageShare.List.Label.Me":" (Me)","CKSharing.ManageShare.ParticipantSettings.ShowContactCard":"Show Contact Card","CKSharing.ManageShare.ParticipantSettings.CopyEmail":"Copy Email","CKSharing.ManageShare.ParticipantSettings.CopyPhoneNumber":"Copy Phone Number","CKSharing.ManageShare.ParticipantSettings.CanEdit":"Can Make Changes","CKSharing.ManageShare.ParticipantSettings.ViewOnly":"View Only","CKSharing.ManageShare.ParticipantSettings.RemoveAccess":"Remove Access","CKSharing.ManageShare.ParticipantSettings.RemoveMe":"Remove Me","CKSharing.ManageShare.StatusText.Invited":"Invited","CKSharing.ManageShare.StatusText.ViewOnly":"View Only","CKSharing.ManageShare.Settings.AllPermissionsToggle.Label":"Set All Permissions","CKSharing.ManageShare.Settings.AllPermissionsToggle.ReadWrite":"Allow editing","CKSharing.ManageShare.Settings.AllPermissionsToggle.ReadOnly":"View only","CKSharing.InitiateShare.Title":"Add People","CKSharing.AddParticipants.Title.AddPeople":"Add People","CKSharing.AddParticipants.Title.SendLink":"Send Link","CKSharing.AddParticipants.Subtitle.MultipleTransports":"Choose how you’d like to send your invitation:","CKSharing.AddParticipants.Subtitle.SingleTransport.Public.CloudKit":"Share this with others, then send them the link.","CKSharing.AddParticipants.Subtitle.SingleTransport.Public.Keynote":"Share this presentation with others, then send them the link.","CKSharing.AddParticipants.Subtitle.SingleTransport.Public.Numbers":"Share this spreadsheet with others, then send them the link.","CKSharing.AddParticipants.Subtitle.SingleTransport.Public.Pages":"Share this document with others, then send them the link.","CKSharing.AddParticipants.Subtitle.SingleTransport.Public.Drive":"Share this file with others, then send them the link.","CKSharing.AddParticipants.Subtitle.SingleTransport.Private.CloudKit":"Share this with others, then send them the link.","CKSharing.AddParticipants.Subtitle.SingleTransport.Private.Keynote":"Add people to this presentation, then send them the link.","CKSharing.AddParticipants.Subtitle.SingleTransport.Private.Notes":"Add people to this note, then send them the link.","CKSharing.AddParticipants.Subtitle.SingleTransport.Private.Numbers":"Add people to this spreadsheet, then send them the link.","CKSharing.AddParticipants.Subtitle.SingleTransport.Private.Pages":"Add people to this document, then send them the link.","CKSharing.AddParticipants.Subtitle.SingleTransport.Private.Drive":"Add people to this file, then send them the link.","CKSharing.AddParticipants.CurrentlyLoggedUser.NameAndAppleId":"%{displayName} (%{appleId})","CKSharing.AddParticipants.CurrentlyLoggedUser.NameOrAppleId":"%{nameOrAppleId}","CKSharing.AddParticipants.AccessLabel.Title":"Who can access:","CKSharing.AddParticipants.AllowLabel.Title":"Permission:","CKSharing.AddParticipants.Transports.CopyLinkButton.Title":"Copy Link","CKSharing.AddParticipants.Transports.EmailButton.Title":"Email","CKSharing.AddParticipants.Transports.SchoolworkButton.Title":"Schoolwork","CKSharing.AddParticipants.ShareSettingsDisclosureButton.Title":"Share Options","CKSharing.AddParticipants.CancelButton.Title":"Cancel","CKSharing.AddParticipants.OKButton.Share.Title":"Share","CKSharing.AddParticipants.OKButton.CopyLink.Title":"Copy Link","CKSharing.AddParticipants.InvitationsTextField.Placeholder":"Email addresses or phone numbers","CKSharing.AddParticipants.Public":"Anyone with the link","CKSharing.AddParticipants.Private":"Only people you invite","CKSharing.AddParticipants.Email.Subject.AppName":"Shared from %{appName}","CKSharing.AddParticipants.Email.Subject.ShareTitle":"“%{shareTitle}”","CKSharing.AddParticipants.Email.Bodyprefix.OwnerAdmin.Keynote":"Open my shared presentation:","CKSharing.AddParticipants.Email.Bodyprefix.OwnerAdmin.Notes":"Open my shared note:","CKSharing.AddParticipants.Email.Bodyprefix.OwnerAdmin.Numbers":"Open my shared spreadsheet:","CKSharing.AddParticipants.Email.Bodyprefix.OwnerAdmin.Pages":"Open my shared document:","CKSharing.AddParticipants.Email.Bodyprefix.OwnerAdmin.Drive":"Open my shared file:","CKSharing.AddParticipants.Email.Bodyprefix.OwnerAdmin.Photos":"Open my shared photos:","CKSharing.AddParticipants.Email.Bodyprefix.Participant.Keynote":"Open this shared presentation:","CKSharing.AddParticipants.Email.Bodyprefix.Participant.Notes":"Open this shared note:","CKSharing.AddParticipants.Email.Bodyprefix.Participant.Numbers":"Open this shared spreadsheet:","CKSharing.AddParticipants.Email.Bodyprefix.Participant.Pages":"Open this shared document:","CKSharing.AddParticipants.Email.Bodyprefix.Participant.Drive":"Open this shared file:","ConfirmNativeMail.CloseButton":"Close","ConfirmNativeMail.ConfirmButton":"Open Mail","ConfirmNativeMail.Message.Keynote.Expanded":"Shared presentation is ready.","ConfirmNativeMail.Message.Notes.Expanded":"Shared note is ready.","ConfirmNativeMail.Message.Numbers.Expanded":"Shared spreadsheet is ready.","ConfirmNativeMail.Message.Pages.Expanded":"Shared document is ready.","ConfirmNativeMail.Message.Drive.Expanded":"Shared file is ready.","ConfirmNativeMail.Message.Photos.Compact":"Shared Photos are Ready","ConfirmNativeMail.Message.Photos.Expanded":"Shared photos are ready.","ConfirmNativeMail.Message.CloudKit.Expanded":"Ready to send.","ConfirmNativeMail.Description":"Open your mail client to send your iCloud link.","CKSharing.AddParticipants.CopyLink.OwnerAdmin.Title.Keynote":"Here’s the link to your presentation.","CKSharing.AddParticipants.CopyLink.OwnerAdmin.Title.Notes":"Here’s the link to your note.","CKSharing.AddParticipants.CopyLink.OwnerAdmin.Title.Numbers":"Here’s the link to your spreadsheet.","CKSharing.AddParticipants.CopyLink.OwnerAdmin.Title.Pages":"Here’s the link to your document.","CKSharing.AddParticipants.CopyLink.OwnerAdmin.Title.Drive":"Here’s the link to your file.","CKSharing.AddParticipants.CopyLink.OwnerAdmin.Title.Photos":"Here’s the link to your shared photos.","CKSharing.AddParticipants.CopyLink.OwnerAdmin.Title.CloudKit":"Here’s the link.","CKSharing.AddParticipants.CopyLink.OwnerAdmin.Subtitle.Public.ReadOnly.Keynote":"Anyone with the link will be able to view it.","CKSharing.AddParticipants.CopyLink.OwnerAdmin.Subtitle.Public.ReadOnly.Numbers":"Anyone with the link will be able to view it.","CKSharing.AddParticipants.CopyLink.OwnerAdmin.Subtitle.Public.ReadOnly.Pages":"Anyone with the link will be able to view it.","CKSharing.AddParticipants.CopyLink.OwnerAdmin.Subtitle.Public.ReadOnly.Drive":"Anyone with the link will be able to view it.","CKSharing.AddParticipants.CopyLink.OwnerAdmin.Subtitle.Public.ReadOnly.CloudKit":"Anyone with the link will be able to view.","CKSharing.AddParticipants.CopyLink.OwnerAdmin.Subtitle.Public.ReadWrite.Keynote":"Anyone with the link will be able to make changes.","CKSharing.AddParticipants.CopyLink.OwnerAdmin.Subtitle.Public.ReadWrite.Numbers":"Anyone with the link will be able to make changes.","CKSharing.AddParticipants.CopyLink.OwnerAdmin.Subtitle.Public.ReadWrite.Pages":"Anyone with the link will be able to make changes.","CKSharing.AddParticipants.CopyLink.OwnerAdmin.Subtitle.Public.ReadWrite.Drive":"Anyone with the link will be able to make changes.","CKSharing.AddParticipants.CopyLink.OwnerAdmin.Subtitle.Public.ReadWrite.CloudKit":"Anyone with the link will be able to make changes.","CKSharing.AddParticipants.CopyLink.OwnerAdmin.Subtitle.Private.ReadOnly.Keynote":"Only the people you invited will be able to view it.","CKSharing.AddParticipants.CopyLink.OwnerAdmin.Subtitle.Private.ReadOnly.Notes":"Only the people you invited will be able to view it.","CKSharing.AddParticipants.CopyLink.OwnerAdmin.Subtitle.Private.ReadOnly.Numbers":"Only the people you invited will be able to view it.","CKSharing.AddParticipants.CopyLink.OwnerAdmin.Subtitle.Private.ReadOnly.Pages":"Only the people you invited will be able to view it.","CKSharing.AddParticipants.CopyLink.OwnerAdmin.Subtitle.Private.ReadOnly.Drive":"Only the people you invited will be able to view it.","CKSharing.AddParticipants.CopyLink.OwnerAdmin.Subtitle.Private.ReadOnly.CloudKit":"Only the people you invited will be able to view.","CKSharing.AddParticipants.CopyLink.OwnerAdmin.Subtitle.Private.Mixed.Keynote":"Only the people you invited will be able to open it.","CKSharing.AddParticipants.CopyLink.OwnerAdmin.Subtitle.Private.Mixed.Notes":"Only the people you invited will be able to open it.","CKSharing.AddParticipants.CopyLink.OwnerAdmin.Subtitle.Private.Mixed.Numbers":"Only the people you invited will be able to open it.","CKSharing.AddParticipants.CopyLink.OwnerAdmin.Subtitle.Private.Mixed.Pages":"Only the people you invited will be able to open it.","CKSharing.AddParticipants.CopyLink.OwnerAdmin.Subtitle.Private.Mixed.Drive":"Only the people you invited will be able to open it.","CKSharing.AddParticipants.CopyLink.OwnerAdmin.Subtitle.Private.Mixed.CloudKit":"Only the people you invited will be able to open.","CKSharing.AddParticipants.CopyLink.OwnerAdmin.Subtitle.Private.ReadWrite.Keynote":"Only the people you invited will be able to make changes.","CKSharing.AddParticipants.CopyLink.OwnerAdmin.Subtitle.Private.ReadWrite.Notes":"Only the people you invited will be able to make changes.","CKSharing.AddParticipants.CopyLink.OwnerAdmin.Subtitle.Private.ReadWrite.Numbers":"Only the people you invited will be able to make changes.","CKSharing.AddParticipants.CopyLink.OwnerAdmin.Subtitle.Private.ReadWrite.Pages":"Only the people you invited will be able to make changes.","CKSharing.AddParticipants.CopyLink.OwnerAdmin.Subtitle.Private.ReadWrite.Drive":"Only the people you invited will be able to make changes.","CKSharing.AddParticipants.CopyLink.OwnerAdmin.Subtitle.Private.ReadWrite.CloudKit":"Only the people you invited will be able to make changes.","CKSharing.AddParticipants.CopyLink.Participant.Title.Keynote":"Here’s the link to this presentation.","CKSharing.AddParticipants.CopyLink.Participant.Title.Notes":"Here’s the link to this note.","CKSharing.AddParticipants.CopyLink.Participant.Title.Numbers":"Here’s the link to this spreadsheet.","CKSharing.AddParticipants.CopyLink.Participant.Title.Pages":"Here’s the link to this document.","CKSharing.AddParticipants.CopyLink.Participant.Title.Drive":"Here’s the link to this file.","CKSharing.AddParticipants.CopyLink.Participant.Title.CloudKit":"Here’s the link.","CKSharing.AddParticipants.CopyLink.Participant.Subtitle.Public.ReadOnly.Keynote":"Anyone with the link will be able to view it.","CKSharing.AddParticipants.CopyLink.Participant.Subtitle.Public.ReadOnly.Numbers":"Anyone with the link will be able to view it.","CKSharing.AddParticipants.CopyLink.Participant.Subtitle.Public.ReadOnly.Pages":"Anyone with the link will be able to view it.","CKSharing.AddParticipants.CopyLink.Participant.Subtitle.Public.ReadOnly.Drive":"Anyone with the link will be able to view it.","CKSharing.AddParticipants.CopyLink.Participant.Subtitle.Public.ReadOnly.CloudKit":"Anyone with the link will be able to view.","CKSharing.AddParticipants.CopyLink.Participant.Subtitle.Public.ReadWrite.Keynote":"Anyone with the link will be able to make changes.","CKSharing.AddParticipants.CopyLink.Participant.Subtitle.Public.ReadWrite.Numbers":"Anyone with the link will be able to make changes.","CKSharing.AddParticipants.CopyLink.Participant.Subtitle.Public.ReadWrite.Pages":"Anyone with the link will be able to make changes.","CKSharing.AddParticipants.CopyLink.Participant.Subtitle.Public.ReadWrite.Drive":"Anyone with the link will be able to make changes.","CKSharing.AddParticipants.CopyLink.Participant.Subtitle.Public.ReadWrite.CloudKit":"Anyone with the link will be able to make changes.","CKSharing.AddParticipants.CopyLink.Participant.Subtitle.Private.Keynote":"Only people %{ownerDisplayName} invited will be able to access it.","CKSharing.AddParticipants.CopyLink.Participant.Subtitle.Private.Notes":"Only people %{ownerDisplayName} invited will be able to access it.","CKSharing.AddParticipants.CopyLink.Participant.Subtitle.Private.Numbers":"Only people %{ownerDisplayName} invited will be able to access it.","CKSharing.AddParticipants.CopyLink.Participant.Subtitle.Private.Pages":"Only people %{ownerDisplayName} invited will be able to access it.","CKSharing.AddParticipants.CopyLink.Participant.Subtitle.Private.Drive":"Only people %{ownerDisplayName} invited will be able to access it.","CKSharing.AddParticipants.CopyLink.Participant.Subtitle.Private.CloudKit":"Only people %{ownerDisplayName} invited will have access.","CKSharing.AddParticipants.CopyLink.CopyButton.Title":"Copy Link","CKSharing.AddParticipants.CopyLink.CloseButton.Title":"Close","CKSharing.AddParticipants.TokenItemMenu.EditEmail":"Edit Address","CKSharing.AddParticipants.TokenItemMenu.RemoveEmail":"Remove Address","CKSharing.AddParticipants.TokenItemMenu.EditPhone":"Edit Phone Number","CKSharing.AddParticipants.TokenItemMenu.RemovePhone":"Remove Phone Number","CKSharing.AddParticipants.TokenItemMenu.EditUnknown":"Edit","CKSharing.AddParticipants.TokenItemMenu.RemoveUnknown":"Remove","CKSharing.AddParticipants.TokenItemMenu.AutocompleteItem.Title":"%{field} (%{label})","CKSharing.AddParticipants.TokenItemView.Add":"Add:","CKSharing.CopyEmailOrPhone.Title.Phone":"Phone Number","CKSharing.CopyEmailOrPhone.Title.Email":"Email Address","CKSharing.CopyEmailOrPhone.Subtitle.Phone":"Click the phone number to select it.","CKSharing.CopyEmailOrPhone.Subtitle.Email":"Click the email address to select it.","CKSharing.Offline.Title":"You’re Offline","CKSharing.Offline.Description":"Check your Internet connection.","CKSharing.RichLink.NoShareTitle":"Shared from %{appName}","CKSharing.iWork.Pages":"Pages","CKSharing.iWork.Keynote":"Keynote","CKSharing.iWork.Numbers":"Numbers"})},,,function(e,t,n){var i=n(293)("wks"),r=n(231),a=n(15).Symbol,s="function"==typeof a;(e.exports=function(e){return i[e]||(i[e]=s&&a[e]||(s?a:r)("Symbol."+e))}).store=i},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n(80),r=n(36),a=n(34),s=n(93),o=i.a.extend(r.a,{cloudOSApplication:a.b(),cloudOSService:a.b({dependencies:["cloudOSApplication.cloudOSService"],readOnly:!0,strong:!0,get:Object.assign(function(){return this.getPath("cloudOSApplication.cloudOSService")||null},{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])||null}})}),environment:a.b(s.c("cloudOSService.environment")),authBag:a.b(s.c("cloudOSService.environment.authBag")),currentUser:a.b(s.c("cloudOSService.environment.authBag.user")),isReloading:a.b(!1)}).create()},function(e,t,n){e.exports=!n(18)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t,n){var i=n(14),r=n(440),a=n(60),s=Object.defineProperty;t.f=n(26)?Object.defineProperty:function(e,t,n){if(i(e),t=a(t,!0),i(n),r)try{return s(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var i=n(62),r=Math.min;e.exports=function(e){return e>0?r(i(e),9007199254740991):0}},function(e,t,n){"use strict";var i=n(172);i.b(i.c(),{"AddToLibraryButton.Mobile.Selection.Mode.Active.Title":"Add","AddToLibraryButton.Mobile.Selection.Mode.Inactive.Title":"Add All","AddToLibraryButton.Desktop.Selection.Mode.Active.Title":"Add To Library","AddToLibraryButton.Desktop.Selection.Mode.Inactive.Title":"Add All To Library","DownloadButton.Title":"Download","Action.Sheet.Button.Cancel":"Cancel","CreateShareButton.Title.All":"Share All","CreateShareButton.Title.Partial":"Share","StopSharingButton.Title":"Stop Sharing","StopSharingButton.Alert.Message":"Remove iCloud Link","StopSharingButton.Alert.Description":"Access to these shared photos will be removed from iCloud immediately.","StopSharingButton.Alert.Button.Confirm":"Stop Sharing","StopSharingButton.Alert.Button.Cancel":"Cancel","StopSharingButton.Error.Alert.Message":"Unable to Remove iCloud Link","StopSharingButton.Error.Alert.Button":"OK","UnableToImport.Error.Alert.Message":"Download Only","UnableToImport.Error.Alert.Description":"Downloading photos to your device is the only currently available option.","UnableToImport.Error.Alert.Button":"OK","Import.Error.Alert.Message":"Photos could not be added to your library.","Import.Error.Alert.Description":"Photos could not be added to your library at this time due to an error. Please try again later.","Import.Error.Alert.Button":"OK","CMMReceiver.UnauthenticatedSigninDialog.Message":"Add To Library or Download","CMMReceiver.UnauthenticatedSigninDialog.Button.Cancel":"Cancel","CMMReceiver.UnauthenticatedSigninDialog.Button.Download":"Download","CMMReceiver.UnauthenticatedSigninDialog.Button.SignInAndImport":"Sign In and Import","CMMReceiver.UnauthenticatedSigninDialog.Description.Photos.1":"If you use iCloud Photos you can sign in and add this photo to your library.","CMMReceiver.UnauthenticatedSigninDialog.Description.Photos.2":"If you use iCloud Photos you can sign in and add these photos to your library.","CMMReceiver.UnauthenticatedSigninDialog.Description.Photos.More":"If you use iCloud Photos you can sign in and add these photos to your library.","CMMReceiver.UnauthenticatedSigninDialog.Description.Videos.1":"If you use iCloud Photos you can sign in and add this video to your library.","CMMReceiver.UnauthenticatedSigninDialog.Description.Videos.2":"If you use iCloud Photos you can sign in and add these videos to your library.","CMMReceiver.UnauthenticatedSigninDialog.Description.Videos.More":"If you use iCloud Photos you can sign in and add these videos to your library.","CMMReceiver.UnauthenticatedSigninDialog.Description.Items.1":"If you use iCloud Photos you can sign in and add this item to your library.","CMMReceiver.UnauthenticatedSigninDialog.Description.Items.2":"If you use iCloud Photos you can sign in and add these items to your library.","CMMReceiver.UnauthenticatedSigninDialog.Description.Items.More":"If you use iCloud Photos you can sign in and add these items to your library.","CMMReceiver.Close.Button.Text":"Close","CMMReceiver.Close.Button.Tooltip":"Close","CMMReceiver.Return.To.Shared.Photos.Button.Text":"Return to shared photos","CMMReceiver.Return.To.Shared.Photos.Button.Tooltip":"Return to shared photos","CMMReceiver.Download.Page.Title":"Your download will begin shortly…","CMMReceiver.Download.Page.Description":"Check your downloads folder for:","CMM.InitiateShare.Title":"How would you like to share your photos?","CMM.InitiateShare.Subtitle":"Anyone with access to your shared photo link will be able to view the photos.","CMM.InitiateShare.Subject.From.ShareName.PHOTOS":"Photos from %{ShareName}","CMM.InitiateShare.Subject.From.ShareName.VIDEOS":"Videos from %{ShareName}","CMM.InitiateShare.Subject.From.ShareName.ITEMS":"Items from %{ShareName}","CMM.InitiateShare.Subject.From.Date.PHOTOS":"Photos from %{Date}","CMM.InitiateShare.Subject.From.Date.VIDEOS":"Videos from %{Date}","CMM.InitiateShare.Subject.From.Date.ITEMS":"Items from %{Date}","CMM.InitiateShare.Body.From.ShareName.Photos.1":"View one photo from %{ShareName}","CMM.InitiateShare.Body.From.ShareName.Photos.2":"View two photos from %{ShareName}","CMM.InitiateShare.Body.From.ShareName.Photos.More":"View %{count} photos from %{ShareName}","CMM.InitiateShare.Body.From.ShareName.Videos.1":"View one video from %{ShareName}","CMM.InitiateShare.Body.From.ShareName.Videos.2":"View two videos from %{ShareName}","CMM.InitiateShare.Body.From.ShareName.Videos.More":"View %{count} videos from %{ShareName}","CMM.InitiateShare.Body.From.ShareName.Items.1":"View one item from %{ShareName}","CMM.InitiateShare.Body.From.ShareName.Items.2":"View two items from %{ShareName}","CMM.InitiateShare.Body.From.ShareName.Items.More":"View %{count} items from %{ShareName}","CMM.InitiateShare.Body.From.Date.Photos.1":"View one photo from %{Date}","CMM.InitiateShare.Body.From.Date.Photos.2":"View two photos from %{Date}","CMM.InitiateShare.Body.From.Date.Photos.More":"View %{count} photos from %{Date}","CMM.InitiateShare.Body.From.Date.Videos.1":"View one video from %{Date}","CMM.InitiateShare.Body.From.Date.Videos.2":"View two videos from %{Date}","CMM.InitiateShare.Body.From.Date.Videos.More":"View %{count} videos from %{Date}","CMM.InitiateShare.Body.From.Date.Items.1":"View one item from %{Date}","CMM.InitiateShare.Body.From.Date.Items.2":"View two items from %{Date}","CMM.InitiateShare.Body.From.Date.Items.More":"View %{count} items from %{Date}","ReviewTitleView.OriginatorTitle.You":"Shared by you","ReviewTitleView.OriginatorTitle.Name":"Shared by %{name}","ReviewTitleView.NumberOfSelectedItems.0":"0 selected","ReviewTitleView.NumberOfSelectedItems.1":"1 selected","ReviewTitleView.NumberOfSelectedItems.2":"2 selected","ReviewTitleView.NumberOfSelectedItems.More":"%{count} selected","ReviewTitleView.NumberOfAvailableItems.0":"0 of %{assetCount} available","ReviewTitleView.NumberOfAvailableItems.1":"1 of %{assetCount} available","ReviewTitleView.NumberOfAvailableItems.2":"2 of %{assetCount} available","ReviewTitleView.NumberOfAvailableItems.More":"%{count} of %{assetCount} available","ShareBackFooter.Content.Title":"Share Back","ShareBackFooter.Content.Question":"Share your photos from %{shareTitle}?","ShareBackFooter.Content.Default.Question":"Share your photos?","ShareBackFooter.Action.Button.Title":"View","ShareBackFooter.Action.Button.Close":"Dismiss","ReportSpamButton.Title":"Report this content","ReportSpamButton.Title.Confirmed":"Content Reported","ReportSpamAlertView.Title":"Report This Content","ReportSpamAlertView.Description":"Your feedback helps improve this service.","ReportSpamAlertView.Cancel":"Cancel","ReportSpamAlertView.Confirm":"Send to Apple","LegalFooterView.AppleDotComUrl.Href":"https://www.apple.com/","LegalFooterView.AppleDotComUrl.Title":"Apple.com","LegalFooterView.Text.Fragment.PrivacyUrl.Href":"https://www.apple.com/privacy/","LegalFooterView.Text.Fragment.PrivacyUrl.Title":"Privacy Policy","LegalFooterView.Text.Fragment.TermsUrl.Href":"https://www.apple.com/legal/icloud/ww/","LegalFooterView.Text.Fragment.TermsUrl.Title":"Terms & Conditions","LegalFooterView.Text.Fragment.Copyright":"Copyright © %{year} Apple Inc. All rights reserved.","LegalFooterView.Text.Desktop":"%{privacyAnchorTag}  |  %{termsAnchorTag}  |  %{copyrightText}","LegalFooterView.Text.Mobile":"%{privacyAnchorTag}  |  %{termsAnchorTag}\n%{copyrightText}","ModeSelectionButton.Cancel":"Cancel","ModeSelectionButton.Select":"Select","SelectAllButton.SelectAll":"Select All","SelectAllButton.DeselectAll":"Deselect All","ImportJob.Preparing":"Preparing…","ImportJob.AddingPhotos.1":"Adding 1 photo…","ImportJob.AddingPhotos.2":"Adding 2 photos…","ImportJob.AddingPhotos.More":"Adding %{count} photos…","ImportJob.AddingVideos.1":"Adding 1 video…","ImportJob.AddingVideos.2":"Adding 2 videos…","ImportJob.AddingVideos.More":"Adding %{count} videos…","ImportJob.AddingItems.1":"Adding 1 item…","ImportJob.AddingItems.2":"Adding 2 items…","ImportJob.AddingItems.More":"Adding %{count} items…","ReciprocateTitleView.ShareWithOriginator":"Share with %{originatorName}","ReviewTitleView.NumberOfPhotos.0":"0 photos","ReviewTitleView.NumberOfPhotos.1":"1 photo","ReviewTitleView.NumberOfPhotos.2":"2 photos","ReviewTitleView.NumberOfPhotos.More":"%{count} photos","ReviewTitleView.NumberOfVideos.0":"0 videos","ReviewTitleView.NumberOfVideos.1":"1 video","ReviewTitleView.NumberOfVideos.2":"2 videos","ReviewTitleView.NumberOfVideos.More":"%{count} videos","ReviewTitleView.NumberOfItems.0":"0 items","ReviewTitleView.NumberOfItems.1":"1 item","ReviewTitleView.NumberOfItems.2":"2 items","ReviewTitleView.NumberOfItems.More":"%{count} items","Review.AddAssets.Done":"Done","ImportSuccess.Placard.Photos.1":"1 photo added","ImportSuccess.Placard.Photos.2":"2 photos added","ImportSuccess.Placard.Photos.More":"%{count} photos added","ImportSuccess.Placard.Videos.1":"1 video added","ImportSuccess.Placard.Videos.2":"2 videos added","ImportSuccess.Placard.Videos.More":"%{count} videos added","ImportSuccess.Placard.Items.1":"1 item added","ImportSuccess.Placard.Items.2":"2 items added","ImportSuccess.Placard.Items.More":"%{count} items added","IncompleteStatePageView.Sharing.Incomplete.Photos.1":"Waiting for a photo shared by %{originatorName}","IncompleteStatePageView.Sharing.Incomplete.Photos.2":"Waiting for 2 photos shared by %{originatorName}","IncompleteStatePageView.Sharing.Incomplete.Photos.More":"Waiting for %{count} photos shared by %{originatorName}","IncompleteStatePageView.Check":"Please check back soon.","IncompleteStatePageView.Sharing.Incomplete.Videos.1":"Waiting for a video shared by %{originatorName}","IncompleteStatePageView.Sharing.Incomplete.Videos.2":"Waiting for two videos shared by %{originatorName}","IncompleteStatePageView.Sharing.Incomplete.Videos.More":"Waiting for %{count} videos shared by %{originatorName}","IncompleteStatePageView.Sharing.Incomplete.Items.1":"Waiting for an item shared by %{originatorName}","IncompleteStatePageView.Sharing.Incomplete.Items.2":"Waiting for two items shared by %{originatorName}","IncompleteStatePageView.Sharing.Incomplete.Items.More":"Waiting for %{count} items shared by %{originatorName}","ImportSuccess.Alert.Message.Photos":"Successfully added.","ImportSuccess.Alert.Description.Photos.0":"0 photos added to your library.","ImportSuccess.Alert.Description.Photos.1":"1 photo added to your library.","ImportSuccess.Alert.Description.Photos.2":"2 photos added to your library.","ImportSuccess.Alert.Description.Photos.More":"%{count} photos added to your library.","ImportSuccess.Alert.Description.Videos.0":"0 videos added to your library.","ImportSuccess.Alert.Description.Videos.1":"1 video added to your library.","ImportSuccess.Alert.Description.Videos.2":"2 videos added to your library.","ImportSuccess.Alert.Description.Videos.More":"%{count} videos added to your library.","ImportSuccess.Alert.Description.Items.0":"0 items added to your library.","ImportSuccess.Alert.Description.Items.1":"1 item added to your library.","ImportSuccess.Alert.Description.Items.2":"2 items added to your library.","ImportSuccess.Alert.Description.Items.More":"%{count} items added to your library.","ImportSuccess.Alert.Button.Dismiss":"Dismiss","ImportSuccess.Alert.Button.GoToPhotos":"View Photos","ImportSuccess.Alert.Button.OK":"OK","CMMReceiver.DotDotDotMenu.Cancel":"Cancel","CMMReceiver.DotDotDotMenu.CopyLink":"Copy iCloud Link","CMMReceiver.DotDotDotMenu.ShareBack":"Share Back","OneUp.Navbar.Button.Download.Text":"Download","OneUp.Navbar.Button.Download.Tooltip":"Download","OneUp.Navbar.Button.Import.Text":"Add to Library","OneUp.Navbar.Button.Import.Tooltip":"Add to library","OneUp.Navbar.Button.Thumbstrip.Tooltip":"Show or hide thumbnails","CMMReceiver.OneUp.Adding":"ADDING...","CMMReceiver.OneUp.Added":"ADDED"})},,function(e,t,n){var i=n(61);e.exports=function(e){return Object(i(e))}},function(e,t,n){"use strict";n.d(t,"c",function(){return l}),n.d(t,"a",function(){return u}),n.d(t,"b",function(){return h});var i=n(174),r=n(65),a=n(1169),s=n(1173),o=n(1170),c=n(121);function l(e){var t=Object(i.a)(arguments,0,1);return e.define.apply(e,t)}var u=n(68).a.extend({staticMembers:{define:function(){return this.create.apply(this,arguments)},_ancestorGuids:[],__QUALIFIED_CLASS_NAME__:"Metadata"},value:void 0,initializeMember:function(e,t){return e.hasMixin(h)||Object(r.b)("cannot add metadata to a class without CW.MetadataSupport"),e.registerMetadata(t,this,!0),this.getValue(e,t)},wasRegistered:a.a,getValue:function(e,t){return this.value},requiresSupport:null,allowedOnClass:!1,allowedOnInstance:!0,allowAtExtend:!0,allowAtRuntime:!1,allowAtCreate:!1,isOnlyMetadataForKey:!0}),d={initializeMember:function(){return{}}},h={staticMembers:{init:function(e){var t=this.prototype;p(this),p(t),this.__s._$2Kh$init.call(this,e),t.initializeClass(),this.initializeClass(),this.initializeInstance()},_metadataByType:d,_metadataByKey:d,registerMetadata:f,getMetadataByType:m,getMetadata:v,initializeClass:a.a,initializeInstance:a.a,initializeRuntime:a.a,__superMap:{_$2Kh$init:"init"}},init:function(e){this.__s._$32l$init.call(this,e),this.initializeInstance()},_metadataByType:d,_metadataByKey:d,registerMetadata:f,getMetadataByType:m,getMetadata:v,initializeClass:a.a,initializeInstance:a.a,initializeRuntime:a.a,__superMap:{_$32l$init:"init"}};function p(e){if(!e.hasOwnProperty("_metadataByType")){for(var t=e._metadataByType,n={},i=Object.keys(t),r=i.length,a=0;a<r;a++){var s=i[a];n[s]=Object.create(t[s])}e._metadataByType=n;var o=e._metadataByKey;e._metadataByKey=Object.create(o)}}function f(e,t,n){e||Object(r.b)("'key' is required"),t||Object(r.b)("'metadata' is required"),Object(s.a)(t,u)||Object(r.b)("Metadata must inherit from CW.Metadata");var i=t.key;i&&i!==e&&Object(r.b)("metadata cannot be registered on key '"+e+"'; it is already registered for a different key '"+i);var a=this.isClass,l=this.constructor,d=t.requiresSupport;d&&!(a?this:l).kindOf(d)&&Object(r.b)("This class does not mix in the required support for metadata of type "+Object(o.a)(t)+".",{metadata:t,requiresSupport:d});var h=this.isInitialized,f=t.allowAtExtend,g=t.allowAtCreate;if(a)t.allowedOnClass||Object(r.b)("This metadata cannot be added to a class because `allowedOnClass` is false (key: '"+e+"', class: "+this+", metadata: "+t.constructor+").",{key:e,onClass:this,metadata:t}),h||f||g||Object(r.b)("New static metadata may not be added at extend time when `allowAtExtend` and `allowAtCreate` are false (key: '"+e+"', class: "+this+", metadata: "+t.constructor+").",{key:e,onClass:this,metadata:t});else{t.allowedOnInstance||Object(r.b)("This metadata cannot be added to an instance because `allowedOnInstance` is false (key: '"+e+"', instance of: "+l+", metadata: "+t.constructor+").",{key:e,instance:this,metadata:t});var m=l.isInitialized;m||h||f||Object(r.b)("New metadata may not be added in extend when `allowAtExtend` is false (key: '"+e+"', instance of: "+l+", metadata: "+t.constructor+").",{key:e,instance:this,metadata:t}),!m||h||g||Object(r.b)("New metadata may not be added in create when `allowAtCreate` is false (key: '"+e+"', instance of: "+l+", metadata: "+t.constructor+").",{key:e,instance:this,metadata:t})}h&&(t.allowAtRuntime?this.initializeRuntime():Object(r.b)("New metadata may not be added at runtime when `allowAtRuntime` is false (key: '"+e+"', instance: "+this+", metadata: "+t.constructor+").",{key:e,instance:this,metadata:t}));var v=t.constructor,_=this._metadataByKey[e];_&&_.isOnlyMetadataForKey&&t.isOnlyMetadataForKey&&!t.instanceOf(_.constructor)&&Object(r.b)("isOnlyMetadataForKey metadata may only be overridden if the new value is the same type or a subclass (key: '"+e+"', target: "+this+", metadata: "+t.constructor+").",{key:e,target:this,metadata:t}),p(this);var b=this._metadataByKey,y=this._metadataByType;t.isOnlyMetadataForKey||(_=null);var I=void 0;if(v.hasOwnProperty("_ancestorGuids"))I=v._ancestorGuids;else{I=v._ancestorGuids=[];for(var w=v.ancestors,S=w.length,C=0;C<S&&w[C]!==u;C++);for(C++;C<S;C++){var O=w[C];I.push(Object(c.a)(O))}I.push(Object(c.a)(v))}var A=I.length;if(!_){var E=y[I[0]];E&&(_=E[e])}for(var T=0;T<A;T++){var M=I[T],D=y[M];D||(y[M]=D={}),D[e]=t}if(t.isOnlyMetadataForKey&&(b[e]=t),t.key=e,!n){var L=t.getValue(this,e);void 0!==L&&(this[e]=L)}t.wasRegistered(this,e,_)}var g={};function m(e){return this._metadataByType[Object(c.a)(e)]||g}function v(e){return this._metadataByKey[e]}},function(e,t,n){"use strict";n.d(t,"a",function(){return K});var i,r,a=n(1185),s=n(69),o=n(92),c=n(65),l=n(1173),u=n(34),d=n(36),h=n(78),p=n(93),f=n(854),g=n(180),m=n(1203),v=n(176),_=n(793),b=n(1223),y=n(169),I=n(206),w=n(554),S=n(157),C=n(145),O=n(160),A=n(400),E=n(158),T=n(50),M=n(109),D=n(878),L=n(89),N=n(40),P=n(47),R=n(70),x=n(149),F=n(331),k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},V=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},j=(i=a.a,(r=function(e){var t=i.create();try{e(t.resolve.bind(t),t.reject.bind(t))}catch(e){t.reject(e)}return t}).all=i.all.bind(i),r.race=i.race.bind(i),r.resolve=i.resolve.bind(i),r.reject=i.reject.bind(i),r);function B(e){return function(){var t=e.apply(this,arguments);return new j(function(e,n){return function i(r,a){try{var s=t[r](a),o=s.value}catch(e){return void n(e)}if(!s.done)return j.resolve(o).then(function(e){i("next",e)},function(e){i("throw",e)});e(o)}("next")})}}var U,W,G=CloudKit.QueryFilterComparator.EQUALS,H=b.a.STRING.name,$=void 0,z=void 0,K=M.a.extend({mixinDependencies:[I.a],staticMembers:{init:function(){$=n(113),this.__s._$XZ$init.call(this)},CK_RECORD_TYPE:"CPLAlbum",ROOT_RECORD_NAME:"----Root-Folder----",loadPredefinedContainers:function(e){var t=s.b(),n=K.getPrimaryKey(e,K.ROOT_RECORD_NAME),i=[],r=[],a=-K.PredefinedNames.length,c=K.PredefinedNames,l=Array.isArray(c),u=0;for(c=l?c:c[Symbol.iterator]();;){var d;if(l){if(u>=c.length)break;d=c[u++]}else{if((u=c.next()).done)break;d=u.value}var h=d,p=K.getPrimaryKey(e,h),f={pk:p,recordName:h,recordType:K.CK_RECORD_TYPE,albumType:A.a.PREDEFINED_SMART.value,sortType:K.QueryInfoByPredefinedName[h].sortType.value,sortAscending:K.QueryInfoByPredefinedName[h].sortAscending,zoneID:e.zoneID,zone:e.pk,position:a};i.push(p),r.push(f),a+=1}var g=[{pk:n,recordName:K.ROOT_RECORD_NAME,recordType:K.CK_RECORD_TYPE,albumType:A.a.FOLDER.value,sortType:void 0,sortAscending:void 0,containers:i,zoneID:e.zoneID,zone:e.pk}].concat(r);t.loadData(K,g,!0);var m=g.map(function(e){return e.pk});return o.a.create(m,K,t)},QueryInfoByPredefinedName:U={MOMENTS:{itemListRecordType:"CPLAssetAndMasterByAssetDateWithoutHiddenOrDeleted",indexCountId:"CPLAssetByAssetDateWithoutHiddenOrDeleted",sortType:O.a.CREATION_DATE,sortAscending:!1,isMediaMemberOf:function(e){return!e.isHidden&&!e.isDeleted&&(!e.burstId||e.isBurst||e.isPromotedFromBurst)}},PHOTOS:{itemListRecordType:"CPLAssetAndMasterByAddedDate",indexCountId:"CPLAssetByAddedDate",sortType:O.a.IMPORT_DATE,sortAscending:!0,isMediaMemberOf:function(e){return!e.isDeleted&&(!e.burstId||e.isBurst||e.isPromotedFromBurst)}},FAVORITES:{itemListRecordType:"CPLAssetAndMasterInSmartAlbumByAssetDate",itemListFilterBy:{fieldName:"smartAlbum",comparator:G,fieldValue:{type:H,value:"FAVORITE"}},indexCountId:"CPLAssetInSmartAlbumByAssetDate:Favorite",sortType:O.a.CREATION_DATE,sortAscending:!0,isMediaMemberOf:function(e){return!e.isHidden&&!e.isDeleted&&e.isFavorite}},VIDEOS:{itemListRecordType:"CPLAssetAndMasterInSmartAlbumByAssetDate",itemListFilterBy:{fieldName:"smartAlbum",comparator:G,fieldValue:{type:H,value:"VIDEO"}},indexCountId:"CPLAssetInSmartAlbumByAssetDate:Video",sortType:O.a.CREATION_DATE,sortAscending:!0,isMediaMemberOf:function(e,t){return!e.isHidden&&!e.isDeleted&&t.dataClassType===E.a.MOVIE}},LIVE:{itemListRecordType:"CPLAssetAndMasterInSmartAlbumByAssetDate",itemListFilterBy:{fieldName:"smartAlbum",comparator:G,fieldValue:{type:H,value:"LIVE"}},indexCountId:"CPLAssetInSmartAlbumByAssetDate:Live",sortType:O.a.CREATION_DATE,sortAscending:!0,isMediaMemberOf:function(e){return!e.isHidden&&!e.isDeleted&&e.assetSubtype===S.a.PHOTO_SUPPORTING_VIDEO}},EXPOSURE:{itemListRecordType:"CPLAssetAndMasterInSmartAlbumByAssetDate",itemListFilterBy:{fieldName:"smartAlbum",comparator:G,fieldValue:{type:H,value:"EXPOSURE"}},indexCountId:"CPLAssetInSmartAlbumByAssetDate:Exposure",sortType:O.a.CREATION_DATE,sortAscending:!0,isMediaMemberOf:function(e){var t=e.adjustmentRenderTypes[0];return!e.isHidden&&!e.isDeleted&&t===C.a.LONG_EXPOSURE}},PANORAMAS:{itemListRecordType:"CPLAssetAndMasterInSmartAlbumByAssetDate",itemListFilterBy:{fieldName:"smartAlbum",comparator:G,fieldValue:{type:H,value:"PANORAMA"}},indexCountId:"CPLAssetInSmartAlbumByAssetDate:Panorama",sortType:O.a.CREATION_DATE,sortAscending:!0,isMediaMemberOf:function(e){return!e.isHidden&&!e.isDeleted&&e.assetSubtype===S.a.PHOTO_PANORAMA}},TIMELAPSE:{itemListRecordType:"CPLAssetAndMasterInSmartAlbumByAssetDate",itemListFilterBy:{fieldName:"smartAlbum",comparator:G,fieldValue:{type:H,value:"TIMELAPSE"}},indexCountId:"CPLAssetInSmartAlbumByAssetDate:Timelapse",sortType:O.a.CREATION_DATE,sortAscending:!0,isMediaMemberOf:function(e){return!e.isHidden&&!e.isDeleted&&e.assetSubtype===S.a.VIDEO_TIMELAPSE}},SLOMO:{itemListRecordType:"CPLAssetAndMasterInSmartAlbumByAssetDate",itemListFilterBy:{fieldName:"smartAlbum",comparator:G,fieldValue:{type:H,value:"SLOMO"}},indexCountId:"CPLAssetInSmartAlbumByAssetDate:Slomo",sortType:O.a.CREATION_DATE,sortAscending:!0,isMediaMemberOf:function(e){return!e.isHidden&&!e.isDeleted&&e.assetSubtype===S.a.VIDEO_SLOWMO}},DEPTH:{itemListRecordType:"CPLAssetAndMasterInSmartAlbumByAssetDate",itemListFilterBy:{fieldName:"smartAlbum",comparator:G,fieldValue:{type:H,value:"DEPTH"}},indexCountId:"CPLAssetInSmartAlbumByAssetDate:Depth",sortType:O.a.CREATION_DATE,sortAscending:!0,isMediaMemberOf:function(e){return!e.isHidden&&!e.isDeleted&&e.isSDOF}},BURSTS:{itemListRecordType:"CPLBurstStackAssetAndMasterByAssetDate",indexCountId:"CPLAssetBurstStackAssetByAssetDate",sortType:O.a.CREATION_DATE,sortAscending:!0,isMediaMemberOf:function(e){return!e.isHidden&&!e.isDeleted&&e.isBurst}},SCREENSHOT:{itemListRecordType:"CPLAssetAndMasterInSmartAlbumByAssetDate",itemListFilterBy:{fieldName:"smartAlbum",comparator:G,fieldValue:{type:H,value:"SCREENSHOT"}},indexCountId:"CPLAssetInSmartAlbumByAssetDate:Screenshot",sortType:O.a.CREATION_DATE,sortAscending:!0,isMediaMemberOf:function(e){return!e.isHidden&&!e.isDeleted&&e.assetSubtype===S.a.PHOTO_SCREENSHOT}},ANIMATED:{itemListRecordType:"CPLAssetAndMasterInSmartAlbumByAssetDate",itemListFilterBy:{fieldName:"smartAlbum",comparator:G,fieldValue:{type:H,value:"ANIMATED"}},indexCountId:"CPLAssetInSmartAlbumByAssetDate:Animated",sortType:O.a.CREATION_DATE,sortAscending:!0,isMediaMemberOf:function(e){var t=e.adjustmentRenderTypes[0];return!(e.isHidden||e.isDeleted||t!==C.a.AUTOLOOP&&t!==C.a.MIRROR)}},HIDDEN:{itemListRecordType:"CPLAssetAndMasterHiddenByAssetDate",indexCountId:"CPLAssetHiddenByAssetDate",sortType:O.a.CREATION_DATE,sortAscending:!0,isMediaMemberOf:function(e){return e.isHidden&&!e.isDeleted&&(!e.burstId||e.isBurst||e.isPromotedFromBurst)}},DELETED:{itemListRecordType:"CPLAssetAndMasterDeletedByExpungedDate",indexCountId:"CPLAssetDeletedByExpungedDate",sortType:O.a.TRASH_DATE,sortAscending:!1,isMediaMemberOf:function(e){var t=Date.now();return e.isDeleted&&!e.isExpunged&&e.dateExpunged>t&&(!e.burstId||e.isBurst||e.isPromotedFromBurst)}}},PredefinedNames:z=Object.keys(U),PredefinedName:W=z.reduce(function(e,t){return(e[t]=t)&&e},{}),getQueryIndexCountId:function(e,t){if(t!==A.a.FOLDER){var n=U[e];return void 0!==n?n.indexCountId:"CPLContainerRelationNotDeletedByAssetDate:"+e}return"CPLAlbumNotDeleted:"+(e!==K.ROOT_RECORD_NAME?e:"")},isQueryIndexCountIdForContainers:function(e){return""===e||e.startsWith("CPLAlbumNotDeleted:")},getQueryItemListRecordType:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:O.a.MANUAL,n=U[e];return n?n.itemListRecordType:t===O.a.MANUAL?"CPLContainerRelationLiveByPosition":"CPLContainerRelationLiveByAssetDate"},getQueryItemListFilterBy:function(e){var t=U[e];return t?t.itemListFilterBy:{fieldName:"parentId",comparator:G,fieldValue:{value:e,type:H}}},_predefinedNameByIndexCountId:function(){var e={};for(var t in U)e[U[t].indexCountId]=t;return e}(),getRecordNameFromIndexCountId:function(e){var t=K._predefinedNameByIndexCountId[e];if(t)return t;var n=e.indexOf(":");if(-1===n)throw new c.a("Unhandled indexCountId="+e);return n===e.length-1?"----Root-Folder----":e.slice(n+1)},list:function(e){var t=e.parentPK;return K.find(t).list(e)},performOperation:function(e,t){var n=this,i=arguments;if(e!==s.a.READ.LOAD)return this.__s._$5Td$performOperation.apply(this,i);for(var r=t.primaryKeys,o=[],c=[],l=this.PredefinedName.DELETED,u=0,d=r.length;u<d;u++){var h=r[u];h.endsWith(l)&&M.a.getRecordNameFromPrimaryKey(h)===l?o.push(this.__s._$5Td$performOperation.call(this,T.a.Container.CountItemsInIndex,{containerPK:h,preset:"NOT_EXPUNGED_BY_DATE"})):c.push(h)}return c.length>0&&o.push(this.__s._$5Td$performOperation.call(this,e,V({},t,{primaryKeys:c}))),a.a.all(o).then(function(){return n.findByPrimaryKeys(r)})},getIsLoadedWithItems:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.b(),n=this.getDataHashForPrimaryKey(e,t);if(!(n instanceof Object))return!1;var i=n.containers,r=void 0===i?n.medias:i;return Array.isArray(r)},getIsLoaded:function(e){var t=arguments;return this.__s._$67C$getIsLoaded.apply(this,t)&&this.getIsLoadedWithItems(e)},loadKeyMedia:function(e,t){return N.a.loadKey(e,t)},isPlaceholderKeyMedia:function(e){return!l.a(e,N.a)},isSystemAlbumRecordName:function(e){return e in this.PredefinedName},MAX_POSITION_VALUE:Number.MAX_SAFE_INTEGER-1024,MIN_POSITION_VALUE:1024,DESIRED_POSITION_SPACING:1024,DESIRED_POSITION_SPACING_ALBUM:2,getPositionGivenLastPosition:function(e){return e?e===this.MAX_POSITION_VALUE?this.MAX_POSITION_VALUE:e+this.DESIRED_POSITION_SPACING:this.MIN_POSITION_VALUE},getPositionGivenFirstPosition:function(e){return e?0===e?0:e-this.DESIRED_POSITION_SPACING_ALBUM:this.MAX_POSITION_VALUE},_getPositionFromObject:function(e){return e?e.position:void 0},_getDateFromObject:function(e){return e?e.date:void 0},_getAddedDateFromObject:function(e){return e?e.addedDate:void 0},_getDateExpungedFromObject:function(e){return e?e.dateExpunged:void 0},pollInstances:function(e){this.reload({primaryKeys:e.map(function(e){return e.getPrimaryKey()})})},__superMap:{_$XZ$init:"init",_$5Td$performOperation:"performOperation",_$67C$getIsLoaded:"getIsLoaded"},__QUALIFIED_CLASS_NAME__:"Container"},_getPositionFromMedia:function(e){return K._getPositionFromObject(R.a.findForItemInContainer(this.zone.pk,e.recordName,this.recordName))},_findMediaInsertIndex:function(e){var t=this.sortType,n=this.medias,i=void 0;switch(t){case O.a.TITLE:case O.a.LAST_MODIFIED_DATE:case O.a.IMPORT_DATE:i=K._getAddedDateFromObject;break;case O.a.TRASH_DATE:i=K._getDateExpungedFromObject;break;case O.a.CREATION_DATE:i=K._getDateFromObject;break;case O.a.MANUAL:i=this._getContainerPositionFromMedia;break;default:throw c.b("Unexpected container="+this.recordName+" with sortType="+t)}return Object(D.a)(n,e,this.sortAscending?D.c:D.d,n.objectAt,i)},addMediaRef:function(e){var t=s.b(),n=this.getDataHash(),i=n.pk,r=n.recordType,a=n.recordName,o=n.medias;if(o||(o=[]),-1===o.indexOf(e.pk)){var c=this._findMediaInsertIndex(e),l=0===c||void 0!==o[c-1]?e.pk:void 0,u=o.slice(0);u.splice(c,0,l);var d={recordName:a,recordType:r,pk:i,medias:u};t.loadData(this.constructor,d,!0)}},removeMediaRef:function(e){var t=s.b(),n=this.getDataHash(),i=n.pk,r=n.recordType,a=n.recordName,o=n.medias;o||(o=[]);var c=o.indexOf(e.pk);if(-1!==c){var l=o.slice(0);l.splice(c,1);var u={recordName:a,recordType:r,pk:i,medias:l};t.loadData(this.constructor,u,!0)}},_findContainerInsertIndex:function(e){var t=e.parent.containers;return Object(D.a)(t,e,D.c,t.objectAt,K._getPositionFromObject)},addContainerRef:function(e){var t=s.b(),n=this.getDataHash(),i=n.pk,r=n.recordName,a=n.recordType,o=n.containers;if(o||(o=[]),-1===o.indexOf(e.pk)){var c=this._findContainerInsertIndex(e),l=0===c||void 0!==o[c-1]?e.pk:void 0,u=o.slice(0);u.splice(c,0,l);var d={pk:i,recordType:a,recordName:r,containers:u};t.loadData(this.constructor,d,!0)}},removeContainerRef:function(e){var t=s.b(),n=this.getDataHash(),i=n.pk,r=n.recordName,a=n.recordType,o=n.containers;o||(o=[]);var c=o.indexOf(e.pk);if(-1!==c){var l=o.slice(0);l.splice(c,1);var u={pk:i,recordType:a,recordName:r,containers:l};t.loadData(this.constructor,u,!0)}},histogram:u.b({strong:!0}),invalidateHistogramOnMediasChange:d.f({inputs:["medias.length"],callback:function(e){e>=0&&(this.histogram=null)}}),loadHistogram:function(){var e=this;return B(regeneratorRuntime.mark(function t(){var n,i,r,a,s,o,c,l,u;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.histogram){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,x.a.loadFromContainerPKs([e.pk]);case 4:for(n=t.sent,i=n.firstItem.cplAssetDistribution,r=F.a.fromObject(i),a=r.buckets,s=a.length,o=0,c=0,l=s;c<l;c++)(u=a[c]).startIndex=o,o+=u.count;e.histogram=r;case 12:case"end":return t.stop()}},t,e)}))()},loadMediasForDateRangeEfficiently:function(e,t,n){var i=this;return B(regeneratorRuntime.mark(function r(){var a,c,l,u,d,h,p;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,x.a.getRankRangeFromDates(i.pk,e,t);case 2:if("object"!==(void 0===(a=r.sent)?"undefined":k(a))||"number"!=typeof a.startRank||"number"!=typeof a.endRank){r.next=10;break}return c=a.startRank,l=a.endRank,u=i._calculateStartAndEndRank(c,l,n),d=u.first,h=u.last,r.next=8,i.loadMediasForRange(d,h);case 8:return p=i._getStoreIdsForMediasWithinDateRange(d,h,e,t),r.abrupt("return",o.a.createFromStoreIds(p,N.a,s.b()));case 10:return r.abrupt("return",o.a.create());case 11:case"end":return r.stop()}},r,i)}))()},_calculateStartAndEndRank:function(e,t,n){var i=e>t,r=i?t:e,a=i?e:t,s=t;return a-r>n&&(s=a===e?a-n:r+n),{first:e<s?e:s,last:e<s?s:e}},_getStoreIdsForMediasWithinDateRange:function(e,t,n,i){var r=n<i?n:i,a=n<i?i:n,s=this.getDataHash().medias,o=[],c=e,l=t,u=1;n>i&&(c=t,l=e,u=-1);for(var d=c;d!==l+u;d+=u){var p=s[d];if(p){var f=N.a.getDataHashForPrimaryKey(p).asset,g=P.a.getDataHashForPrimaryKey(f).assetDate;g&&g>=r&&g<=a&&o.push(h.a.getStoreIdForPrimaryKey(N.a,p))}}return o},albumType:y.j(A.a,{readOnly:!0}),type:u.b(p.c("albumType")),isPredefinedSmartAlbum:Object(L.e)("type",A.a.PREDEFINED_SMART),isFolder:Object(L.e)("type",A.a.FOLDER),isNormalAlbum:Object(L.e)("type",A.a.NORMAL),isRootFolder:Object(L.e)("recordName","----Root-Folder----"),isMomentsAlbum:Object(L.e)("recordName",W.MOMENTS),isRecentlyDeletedAlbum:Object(L.e)("recordName",W.DELETED),isHiddenAlbum:Object(L.e)("recordName",W.HIDDEN),isBurstsAlbum:Object(L.e)("recordName",W.BURSTS),isLiveAlbum:Object(L.e)("recordName",W.LIVE),isScreenshotAlbum:Object(L.e)("recordName",W.SCREENSHOT),isTimelapseAlbum:Object(L.e)("recordName",W.TIMELAPSE),isSlomoAlbum:Object(L.e)("recordName",W.SLOMO),isVideosAlbum:Object(L.e)("recordName",W.VIDEOS),isPanoramasAlbum:Object(L.e)("recordName",W.PANORAMAS),isFavoritesAlbum:Object(L.e)("recordName",W.FAVORITES),isAllPhotosAlbum:Object(L.e)("recordName",W.PHOTOS),albumName:u.b({dependencies:["_albumNameEnc","_name"],get:Object.assign(function(){return this._albumNameEnc||this._name},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])||i.internalGet(this,t[1+n])}}),set:Object.assign(function(e){return this._albumNameEnc=e},{__CW__setter:function(e,t,n,i,r){return n[0+i]=e}}),writeDependencySetPathMap:["false"]}),name:u.b(p.c("albumName")),_albumNameEnc:y.m({dataKey:"albumNameEnc"}),_name:y.e({dataKey:"name",readOnly:!0}),position:y.e(),sortType:Object(L.d)(["_sortType","_sortTypeExt"]),_sortType:y.j(O.a,{readOnly:!0,dataKey:"sortType"}),_sortTypeExt:y.j(O.a,{readOnly:!0,dataKey:"sortTypeExt",defaultValue:O.a.MANUAL}),sortAscending:y.b(),parent:u.b({dependencies:["parentId"],get:Object.assign(function(){var e=this.constructor.getPrimaryKey(this.zone,this.parentId);return K.find(e)},{__CW__getter:function(e,t,n,i){var r=this.constructor.getPrimaryKey(this.zone,i.internalGet(this,t[0+n]));return K.find(r)}}),set:Object.assign(function(e){if("----Root-Folder----"!==this.recordName)return this.parentId=e?e.recordName:void 0},{__CW__setter:function(e,t,n,i,r){if("----Root-Folder----"!==this.recordName)return n[0+i]=e?e.recordName:void 0}}),writeDependencySetPathMap:["false"]}),parentId:y.e({defaultValue:"----Root-Folder----"}),canBeDeleted:u.b({readOnly:!0,dependencies:["isFolder","isNormalAlbum"],get:Object.assign(function(){return this.isFolder||this.isNormalAlbum||this.isUserCreatedSmartAlbum},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])||i.internalGet(this,t[1+n])||this.isUserCreatedSmartAlbum}})}),containers:f.a.toMany({type:"(self)"}),onContainersDidChange:d.f({inputs:["containers","containers.contentsDidChange"],callback:function(e,t){if(e&&t&&!this.isRootFolder&&!this.isPredefinedSmartAlbum){var n=t.context;n&&0!==n.length&&this.reloadKeyMediasIfLoaded()}}}),medias:f.a.toMany({type:N.a}),onMediasDidChange:d.f({inputs:["medias","medias.contentsDidChange"],callback:function(e,t){if(e&&t){var n=t.context;n&&0!==n.length&&this.reloadKeyMediaIfLoaded()}}}),keyMedia:u.b({dependencies:["keyMediaByUser","keyMediaBySystem"],readOnly:!0,get:Object.assign(function(){return this.keyMediaByUser||this.keyMediaBySystem},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])||i.internalGet(this,t[1+n])}}),didChange:function(e){if(e){var t=this.parent;!t||t.isRootFolder||t.isPredefinedSmartAlbum||t.ensureKeyMedias()}}}),keyMediaByUser:u.b({strong:!0,type:N.a}),keyMediaBySystem:u.b({strong:!0,type:N.a}),keyMedias:u.b({defaultValue:g.b(m.a),strong:!0,type:m.a}),ensureKeyMedia:function(){return this.loadKeyMedia()},ensureKeyMedias:function(){return this.loadKeyMedias()},_loadChildKeyMedias:function(){var e=this,t=this.containers;if(!t.length)return a.a.resolve();var n=[],i=[];return t.forEach(function(e,t){e&&(e.isNormalAlbum?i.push(e.loadKeyMedia().then(function(){return n[t]=e.keyMedia})):e.isFolder&&i.push(e.ensureKeyMedias().then(function(){return n[t]=e})))}),a.a.all(i).then(function(){for(var t,i=[],r=0,a=n.length;r<a;r++){var s=n[r];if(s){if(i.length>=4)break;l.a(s,K)?i.push(e._findKeyMediaForUserFolder(s)):i.push(s)}}return(t=e.keyMedias).splice.apply(t,[0,e.keyMedias.length].concat(i))})},_findKeyMediaForUserFolder:function(e){var t=void 0;return function e(n){if(!t){var i=void 0,r=void 0,a=n.containers.length;for(i=0;i<a;i++)if(r=n.containers.objectAt(i),l.a(r,K)&&r.isFolder&&r.keyMedias.length&&(t=r.keyMedias.objectAt(0)))return void t.retain(this,"_findKeyMediaForUserFolder: keyMedia");for(i=0;i<a;i++)r=n.containers.objectAt(i),l.a(r,K)&&r.isFolder&&e.call(this,r)}}.call(this,e),v.d(t,this,"_findKeyMediaForUserFolder: keyMedia"),t},firstMediaByDate:u.b({strong:!0}),lastMediaByDate:u.b({strong:!0}),loadMediasForIndices:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:N.a.HydrationLevel.FULL;return B(regeneratorRuntime.mark(function i(){var r,a,s;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:i.next=2;break;case 2:if(r=t.medias,!((a=t._getUnloadedMediaIndices(r,e)).length>0)){i.next=12;break}return s=w.a(a),i.next=11,t._loadMediaRanges(s,n);case 11:return i.abrupt("return",i.sent);case 12:case"end":return i.stop()}},i,t)}))()},loadMediasForRange:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:N.a.HydrationLevel.FULL;return N.a.list({containerPK:this.pk,first:e,last:t,hydrationLevel:n}).catch(function(e){throw e})},loadFirstAndLastMediasByDate:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N.a.HydrationLevel.FULL,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return B(regeneratorRuntime.mark(function i(){var r,o,c,l,u,d,h,p,f;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(r=s.b(),o=r.cplZone.syncToken,n||e._loadFirstAndLastMediasByDateSyncToken!==o){i.next=4;break}return i.abrupt("return",[e.firstMediaByDate,e.lastMediaByDate]);case 4:if(e.recordName!==K.PredefinedName.PHOTOS){i.next=14;break}return c=r.cplSystemContainersMap.get(K.PredefinedName.MOMENTS),i.next=8,c.loadFirstAndLastMediasByDate(t,n);case 8:return l=i.sent,e._loadFirstAndLastMediasByDateSyncToken=o,u=l[0],d=l[1],e.firstMediaByDate=u,e.lastMediaByDate=d,i.abrupt("return",l);case 14:return i.next=16,a.a.all([e._loadFirstMediaByDate(t),e._loadLastMediaByDate(t)]);case 16:return h=i.sent,e._loadFirstAndLastMediasByDateSyncToken=o,p=h[0],f=h[1],e.firstMediaByDate=p,e.lastMediaByDate=f,v.e(p,e,"_loadFirstMediaByQueryType: returned media"),v.e(f,e,"_loadLastMediaByQueryType: returned media"),i.abrupt("return",h);case 24:case"end":return i.stop()}},i,e)}))()},_loadFirstAndLastMediasByDateSyncToken:void 0,_loadFirstMediaByDate:function(e){var t=this;return this.medias.length?N.a.list({containerPK:this.pk,first:0,last:Number.MAX_SAFE_INTEGER,hydrationLevel:e,limit:1,queryType:$.MediaListOperationHandler.QueryType.DATE,sortType:O.a.CREATION_DATE}).then(function(e){var n=e.objectAt(0);return v.f(n,t,"_loadFirstMediaByQueryType: returned media"),n}).catch(function(e){throw e}):a.a.resolve()},loadLastContainerRelationByPosition:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N.a.HydrationLevel.FULL;return this._loadLastMediaByQueryType(t,$.MediaListOperationHandler.QueryType.POSITION).then(function(t){if(t){var n=t.primaryAsset.recordName;return v.e(t,e,"_loadLastMediaByQueryType: returned media"),R.a.findForItemInContainer(e.zone.pk,n,e.recordName)}})},loadLastContainerByPosition:function(){var e=this;return this.list().then(function(){var t=void 0;return e.containers.forEach(function(e){(!t||t.position<e.position)&&(t=e)}),t})},loadFirstContainerByPosition:function(){var e=this;return this.list().then(function(){var t=void 0;return e.containers.forEach(function(e){(e.isNormalAlbum||e.isFolder)&&(!t||t.position>e.position)&&(t=e)}),t})},_loadLastMediaByDate:function(e){return this._loadLastMediaByQueryType(e,$.MediaListOperationHandler.QueryType.DATE)},_loadLastMediaByQueryType:function(e,t){var n=this;return this.medias.length?N.a.list({containerPK:this.pk,first:Number.MAX_SAFE_INTEGER,last:0,hydrationLevel:e,limit:1,queryType:t,sortType:O.a.CREATION_DATE}).then(function(e){var t=e.objectAt(0);return v.f(t,n,"_loadLastMediaByQueryType: returned media"),t}).catch(function(e){throw e}):a.a.resolve()},loadAll:function(){return this.list.apply(this,arguments)},list:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.isForcedFetch,i=void 0!==n&&n;if(this.type!==A.a.FOLDER)return a.a.resolve();if(void 0!==this._listPromise)return this._listPromise;var r=s.b().cplZone;return i||"string"!=typeof this._listSyncToken||this._listSyncToken!==r.syncToken?(this._listPromise=K.performOperation(s.a.READ.LIST,V({},t,{parentPK:this.pk})).then(function(t){return e._listSyncToken=r.syncToken,t}).finally(function(){e._listPromise=void 0}),this.recordName===K.ROOT_RECORD_NAME||!i&&this._loadSyncToken===r.syncToken?this._listPromise:this.load({isForcedFetch:i,isDelayable:!1}).then(function(){return e._listPromise})):a.a.resolve(this.containers)},_listPromise:void 0,_listSyncToken:void 0,relist:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.list(V({},e,{isForcedFetch:!0}))},loadKeyMedia:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N.a.HydrationLevel.FULL,n=arguments[1];if(void 0!==this._loadKeyMediaPromise)return this._loadKeyMediaPromise;var i=s.b().cplZone;return n||"string"!=typeof this._loadKeyMediaSyncToken||this._loadKeyMediaSyncToken!==i.syncToken?this._loadKeyMediaPromise=K.loadKeyMedia(this.pk,t).then(function(n){return n?(e.keyMediaBySystem=void 0,n):e.load().then(function(){return e._loadLastMediaByDate(t)}).then(function(t){return e.keyMediaByUser=void 0,e.keyMediaBySystem=t,v.e(t,e,"_loadLastMediaByQueryType: returned media"),t})}).finally(function(){e._loadKeyMediaSyncToken=i.syncToken,e._loadKeyMediaPromise=void 0}):a.a.resolve(this.keyMedia)},_loadKeyMediaPromise:void 0,_loadKeyMediaSyncToken:void 0,reloadKeyMediaIfLoaded:function(){return this._loadKeyMediaSyncToken?this.loadKeyMedia():a.a.resolve()},loadKeyMedias:function(e){var t=this;if(void 0!==this._loadKeyMediasPromise)return this._loadKeyMediasPromise;var n=s.b().cplZone;return e||"string"!=typeof this._loadKeyMediasSyncToken||this._loadKeyMediasSyncToken!==n.syncToken?this._loadKeyMediasPromise=this.load({isForcedFetch:e}).then(function(){return t.list({isForcedFetch:e})}).then(function(){return t._loadChildKeyMedias()}).finally(function(){t._loadKeyMediasSyncToken=n.syncToken,t._loadKeyMediasPromise=void 0}):a.a.resolve(this.keyMedias)},_loadKeyMediasPromise:void 0,_loadKeyMediasSyncToken:void 0,reloadKeyMediasIfLoaded:function(){return this._loadKeyMediasSyncToken?(this.keyMedias.length=0,this.loadKeyMedias()):a.a.resolve()},removeItems:function(e){return this._removeOrDeleteItems({items:e,shouldDeleteItems:!1})},deleteItems:function(e){return this._removeOrDeleteItems({items:e,shouldDeleteItems:!0})},_removeOrDeleteItems:function(e){var t=e.items,n=e.shouldDeleteItems,i=t.length;if(!i)return a.a.resolve();for(var r=_.a.from(t),o=this.recordName,c=this.isFolder,l=this.isNormalAlbum,u=this.isRootFolder,d=s.b(),h=[],p=!1,f=0;f<i;f++){var g=r.objectAt(f);if(c||u)g.isDeleted=!0,p=!0;else if(l){n&&(g.delete(),p=!0);for(var m=g.containerRelations,v=m.length,b=0;b<v;b++){var y=m.objectAt(b);if(y.containerId===o){h.push({primaryKey:y.recordName,modelClass:m._modelClass}),y.delete(),p=!0;break}}}else g.delete(),p=!0}return p?d.commit().then(function(e){return h.forEach(function(e){d.removeData(e.modelClass,e.primaryKey)}),e}):a.a.resolve()},init:function(){var e=arguments;this.__s._$Iyv$init.apply(this,e),this.retain()},_loadMediaRanges:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:N.a.HydrationLevel.FULL;return a.a.all(e.map(function(e){return t.loadMediasForRange(e[0],e[1],n)}))},_getUnloadedMediaIndices:function(e,t){var n=[],i=t,r=Array.isArray(i),a=0;for(i=r?i:i[Symbol.iterator]();;){var s;if(r){if(a>=i.length)break;s=i[a++]}else{if((a=i.next()).done)break;s=a.value}var o=s;void 0===e.storeIdForObjectAt(o)&&n.push(o)}return n},loadMediasByDateRange:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:N.a.HydrationLevel.FULL;return N.a.list({containerPK:this.pk,first:e,last:t,hydrationLevel:i,limit:n,queryType:$.MediaListOperationHandler.QueryType.DATE})},__superMap:{_$Iyv$init:"init"}})},function(e,t,n){"use strict";var i=n(41),r=n(176),a=n(779),s=n(1173),o=n(1177),c=n(65),l=n(123),u=n(1169),d=n(93),h=n(39),p=n(84),f=p.a.extend({debugType:"Strong",validateDescendantDownstreamNodeManager:function(e,t,n){e.reference===r.c&&this._throwValidationError(e,t,"Illegal binding (reference strength) from `%{key}` (to `%{parentKey}`): You cannot bind a weak and a strong property together.")},staticMembers:{__QUALIFIED_CLASS_NAME__:"BaseDownstreamStrongNodeManager"}}).extend({debugType:"Strong",init:function(){var e=arguments;this.__s._$Co$init.apply(this,e),this._referenceDescriptorComputedCache="Observable strong ref for `"+this.key+"` (downstream cached value)"},_referenceDescriptorComputedCache:void 0,_manageForCalculateValueForNode:function(e,t,n){Object(r.f)(n,e,this._referenceDescriptorComputedCache)},previousValueWasReplaced:function(e,t,n){Object(r.e)(n,e,this._referenceDescriptorComputedCache)},nodeWillFree:function(e,t){Object(r.e)(h.a.getDataForNode(t),e,this._referenceDescriptorComputedCache)},__superMap:{_$Co$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"DownstreamStrongNodeManager"}}),g=f.extend({debugType:"Strong Computed",init:function(){var e=arguments;this.__s._$Zk$init.apply(this,e),this._referenceDescriptorComputedCache="Observable strong ref for `"+this.key+"` (downstream cached computed value)"},__superMap:{_$Zk$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"DownstreamStrongComputedNodeManager"}}),m=p.a.extend({debugType:"Unsafe",validateDescendantDownstreamNodeManager:function(e,t,n){e.reference!==r.b&&this._throwValidationError(e,t,"Illegal binding (reference strength) from `%{key}` (to `%{parentKey}`): You cannot bind a %{reference} property up to an unsafe one.")},staticMembers:{__QUALIFIED_CLASS_NAME__:"DownstreamUnsafeNodeManager"}}),v=p.a.extend({debugType:"Weak",validateDescendantDownstreamNodeManager:function(e,t,n){e.reference===r.a&&this._throwValidationError(e,t,"Illegal binding (reference strength) from `%{key}` (to `%{parentKey}`): You cannot bind a weak and a strong property together.")},staticMembers:{__QUALIFIED_CLASS_NAME__:"DownstreamWeakNodeManager"}}),_=v.extend({debugType:"Weak Computed",_manageForCalculateValueForNode:function(e,t,n){var i=this.key,a=e._weakReferenceTokens[i];Object(r.h)(t,a),e._weakReferenceTokens[i]=Object(r.g)(n,e,e.weaklyReferencedObjectWasDisposed,i)},nodeWillFree:function(e,t){var n=this.key,i=e._weakReferenceTokens[n],a=h.a.getDataForNode(t);Object(r.h)(a,i)},staticMembers:{__QUALIFIED_CLASS_NAME__:"DownstreamWeakComputedNodeManager"}}),b=n(36),y=n(85),I=y.b.extend({debugType:"ReadOnly",flushNode:function(e,t){var n=h.a.getStateDataForNode(t),i=h.a.getStateIDForNode(t);Object(c.b)("Cannot write to read-only property: "+this.key,{object:e,value:n,parentID:i})},staticMembers:{__QUALIFIED_CLASS_NAME__:"UpstreamReadOnlyNodeManager"}}),w=I.extend({debugType:"ReadOnly Strong",nodeWillFree:function(e,t){var n=h.a.getDataForNode(t);Object(r.e)(n,e,"Observable strong ref for `"+this.key+"` (read-only default value)")},staticMembers:{__QUALIFIED_CLASS_NAME__:"UpstreamReadOnlyStrongNodeManager"}}),S=y.b.extend({debugType:"Strong",init:function(e){var t=arguments;this.__s._$9W$init.apply(this,t);var n=this.key;this._stateArrayReferenceDescriptor="Observable strong ref for `"+n+"` (upstream state preprocessing storage)",this._ownValueReferenceDescriptor="Observable strong ref for `"+n+"` (upstream own-value storage)"},_manageForWasDirtiedByParent:function(e,t){Object(r.e)(e,t,this._stateArrayReferenceDescriptor)},_manageForWasDirtiedBySelf:function(e,t,n){var i=this._stateArrayReferenceDescriptor;Object(r.f)(e,n,i),Object(r.e)(t,n,i)},_manageForCalculateValueForNode:function(e,t,n){Object(r.f)(e,n,this._ownValueReferenceDescriptor),Object(r.e)(t,n,this._stateArrayReferenceDescriptor)},previousValueWasReplaced:function(e,t,n){Object(r.e)(n,e,this._ownValueReferenceDescriptor)},nodeWillFree:function(e,t){var n=h.a.getStateDataForNode(t),i=h.a.getDataForNode(t);Object(r.e)(n,e,this._stateArrayReferenceDescriptor),Object(r.e)(i,e,this._ownValueReferenceDescriptor)},_stateArrayReferenceDescriptor:void 0,_ownValueReferenceDescriptor:void 0,__superMap:{_$9W$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"UpstreamStrongNodeManager"}}),C=y.b.extend({calculateValueForNode:function(e,t,n,i){var a=arguments,s=this.key,o=e._weakReferenceTokens,c=o[s],l=h.a.getDataForNode(t);Object(r.h)(l,c);var u=this.__s._$KP$calculateValueForNode.apply(this,a);return o[s]=Object(r.g)(u,e,e.weaklyReferencedObjectWasDisposed,s),u},nodeWillFree:function(e,t){var n=this.key,i=e._weakReferenceTokens[n],a=h.a.getDataForNode(t);Object(r.h)(a,i)},__superMap:{_$KP$calculateValueForNode:"calculateValueForNode"},staticMembers:{__QUALIFIED_CLASS_NAME__:"UpstreamWeakRootValueNodeManager"}});n.d(t,"a",function(){return T}),n.d(t,"b",function(){return D});var O,A=[],E="_cw_itselfProperty",T=i.a.extend({staticMembers:{isInsideSetter:!1,getDependencyValuesAsTempArray:function(e,t,n,i){A.length=0;for(var r=0;r<t.length;r++){var a=t[r+n];h.a._sanitizeNodeID(a)>0&&(A[r]=i.internalGet(e,a))}return A},__QUALIFIED_CLASS_NAME__:"ObservableProperty"},readOnly:null,cacheable:void 0,binding:void 0,downstreamBindings:null,dependencies:null,writeDependencies:null,bindings:null,writeBindings:null,_valueCount:0,didChange:null,isComputedProperty:!1,isDependentComputedProperty:!1,isRootValueProperty:!1,requiresSupport:b.a,downstreamNodeManagerClass:null,upstreamNodeManagerClass:null,downstreamNodeManager:null,upstreamNodeManager:null,weakRootValueUpstreamNodeManager:null,init:function(e){Object(s.a)(e,d.a)&&(e={binding:e}),this.__s._$B2l$init.call(this,e)},getValue:function(e,t){var n=this.binding||this.defaultValue;return void 0===n&&(this.get||this.set)&&Object(s.a)(e[i.b.staticMembers.defaultValuePrefix+t],d.a)?null:n},inheritFrom:function(e){var t=arguments;this.__s._$BIj$inheritFrom.apply(this,t),this.didChange||(this.didChange=e.didChange),e.hasOwnProperty("cacheable")&&!this.hasOwnProperty("cacheable")&&(this.cacheable=e.cacheable);var n=e.downstreamBindings;if(n){var i=this.downstreamBindings;this.downstreamBindings=i?Object.assign(Object.create(n),i):n}},wasRegistered:function(e,t,n){var i=arguments;this.__s._$Be3$wasRegistered.apply(this,i),this._validateProvidedInitValues(e,t),this._validateProvidedAccessors(t),this.reference!==r.c||this.readOnly||(this._setRootValueNodeManagerIfNeeded=this._setRootValueNodeManagerIfNeededWeakWritable,this._setBoundNodeManagerIfNeeded=this._setBoundNodeManagerIfNeededWeakWritable),this.setUpManagers(),t=(t=t.replace(/\\/g,"\\\\")).replace(/\./g,"\\."),this._ownBinding=Object(d.c)(t),this.initializeNodeFlags(),this._setUpDidChangeObserver(e,t)},_validateProvidedInitValues:function(e,t){var n=this.binding,i=this.defaultValue;Object(o.a)(n)&&Object(o.a)(i)&&Object(c.b)("You can't define an observable property with both a binding and a defaultValue (%{key}).",{key:t,property:this}),Object(s.a)(i,d.a)&&Object(c.b)("You can’t pass bindings into a property definition on `defaultValue`; you must pass it in on `binding` (%{key}).",{binding:n,property:this,key:t}),Object(l.a)(n)&&(this.binding=Object(d.c)(n));var r=this.computedDownstreamBindings=[],a=this.downstreamBindings;for(var u in a){var h=a[u];if(Object(o.a)(h)){if(Object(l.a)(h)&&(h=Object(d.c)(h)),Object(s.a)(h,d.a)){var p=h.rootObject;if(p){if(p===d.b){h.rootObject=null;var f=h.components;0===f.length&&(f.push(E),e.getMetadata(E)||e.registerMetadata(E,O))}r.push({upstreamSide:h,downstreamSide:Object(d.c)(t+"."+u)});continue}Object(c.b)("Right side of downstream bindings must either explicitly specify a root object or begin with `'(owner).'`: `'%{path}'`",{path:h.path})}Object(c.b)("Right side of downstream bindings must be a string or a binding",{binding:h})}}},_validateProvidedAccessors:function(e){var t=this.dependencies,n=this.writeDependencies,i=t&&t.length>0,a=n?n.length>0:i,s=this.isDependentComputedProperty=i||a,o=this.reference;i&&this.usesBuiltinGet&&Object(c.b)("Computed properties with dependencies must provide a getter (%{key}).",{property:this,dependencies:t,key:e}),a&&this.usesBuiltinSet&&!this.readOnly&&Object(c.b)("Computed properties with (explicit or implicit) write-dependencies must either include a setter or be marked readOnly (%{key}).",{property:this,dependencies:t,key:e}),this.isComputedProperty&&o===r.c&&Object(c.b)("Computed properties may not be WEAK references (%{key}).",{property:this,dependencies:t,key:e}),!1!==this.cacheable||o===r.b||this.typeIsPrimitive||Object(c.b)("Non-cacheable, non-primitively-typed properties may not be STRONG or WEAK references; you must manage them yourself. (%{key}).",{property:this,key:e}),s&&(n&&(this.writeBindings=d.a.createForPaths(this.writeDependencies)),this.bindings=d.a.createForPaths(this.dependencies))},_setUpDidChangeObserver:function(e,t){if(this.didChange){var n="_"+t+"_didChangeObserver";e.registerMetadata(n,Object(b.f)(t,this.didChange))}},setUpManagers:function(){var e=this.upstreamNodeManagerClass,t=this.downstreamNodeManagerClass,n=this.reference;e||(e=this.readOnly?n===r.a?w:I:n===r.a?S:y.b),t||(t=n===r.a?this.usesBuiltinGet||!1===this.cacheable?this.typeIsPrimitive?p.a:f:g:n===r.c?this.usesBuiltinGet||!1===this.cacheable?v:_:m),this.upstreamNodeManager=e.create(this),this.downstreamNodeManager=t.create(this),n===r.c&&(this.weakRootValueUpstreamNodeManager=C.create(this))},initializeNodeFlags:function(){var e=this.upstreamNodeFlags,t=this.downstreamNodeFlags;if(-1===e||-1===t){var n=this.reference;n===r.a&&this.typeIsPrimitive&&(n=r.b),-1===e&&(e=h.a.DIRTY_TRACKING|h.a.RELATIONSHIPS|h.a.PULL_ON_FREE,this.readOnly&&(e|=h.a.FLUSH),n!==r.c&&n!==r.a||(e|=h.a.PULL_ON_FLUSH),n===r.a&&(e|=h.a.PREVIOUS_VALUE_TRACKING),n!==r.b&&(e|=h.a.FREE),this.upstreamNodeFlags=e),-1===t&&(t=h.a.RELATIONSHIPS,n===r.b||this.usesBuiltinGet||!1===this.cacheable||(t|=h.a.FREE,n===r.a&&(t|=h.a.PREVIOUS_VALUE_TRACKING)),n===r.a&&(t|=h.a.PREVIOUS_VALUE_TRACKING,t|=h.a.FREE),this.downstreamNodeFlags=t)}},upstreamNodeFlags:-1,downstreamNodeFlags:-1,initForObject:function(e,t){var n,i=arguments,a=h.a.NULL_INDEX,s=h.a.NULL_INDEX,o=this.downstreamNodeManager;n=this.reference===r.c&&this.isRootValueProperty?this.weakRootValueUpstreamNodeManager:this.upstreamNodeManager,a=e.allocNode(o,this.downstreamNodeFlags),e.downstreamNodes[t]=a,s=e.allocNode(n,this.upstreamNodeFlags),e.upstreamNodes[t]=s,e.addConnectable(this,a,s),this.__s._$Gai$initForObject.apply(this,i)},setInitialValueForObject:function(e,t,n){var i=e.downstreamNodes[t],a=e.upstreamNodes[t];if(h.a.getManagerForNode(i).setUpNode(e,i),h.a.getManagerForNode(a).setUpNode(e,a),Object(s.a)(n,d.a)){var o=n;this.isDependentComputedProperty&&Object(c.b)("Dependent computed properties cannot be created with a binding (%{key}).",{property:this,key:t,object:e}),h.a.setDataForNode(o,i)}else this.readOnly?(this.reference===r.a&&Object(r.f)(n,e,"Observable strong ref for `"+t+"` (read-only default value)"),h.a.setDataForNode(n,a)):void 0!==n&&h.a.passValueToNode(n,a)},connect:function(e,t,n){this.isRootValueProperty=!this.isDependentComputedProperty,this._configurePropertyAsRootValue(t,n);var i=this._ownBinding;if(this.isDependentComputedProperty){var r,a,s,o=this.bindings,l=this.writeBindings,u=n>=0&&void 0!==h.a.getStateDataForNode(n);if(o&&(r=o.length)>0)for(a=0;a<r;a++)s=o[a],d.a.hookUpBinding(e,s,i,u,!0,d.a.DONT_CONNECT,d.a.CONNECT)||Object(c.b)("Unable to connect dependency for computed property (key: "+this.key+", dependency: "+s.path+").",{object:e,property:this,key:this.key,dependency:s.path});if(l&&(r=l.length)>0)for(a=0;a<r;a++)s=l[a],d.a.hookUpBinding(e,s,i,u,!0,d.a.CONNECT,d.a.DONT_CONNECT)||Object(c.b)("Unable to connect write dependency for computed property (key: "+this.key+", dependency: "+s.path+").",{object:e,property:this,key:this.key,dependency:s.path})}else{var p;t>=0&&(p=h.a.getDataForNode(t)),p&&p.instanceOf&&p.instanceOf(d.a)&&(this.isRootValueProperty=!1,this.bind(e,p),h.a.setDataForNode(void 0,t),n&&h.a.setDataForNode(void 0,n))}for(var f=this.computedDownstreamBindings,g=f.length,m=0;m<g;m++){var v=f[m];d.a.hookUpBinding(e,v.upstreamSide,v.downstreamSide,!1,!0)}},_configurePropertyAsRootValue:function(e,t){h.a.addChildToNode(e,t,!0),this._setRootValueNodeManagerIfNeeded(e,t)},_setRootValueNodeManagerIfNeeded:u.a,_setRootValueNodeManagerIfNeededWeakWritable:function(e,t){h.a.setManagerForNode(this.weakRootValueUpstreamNodeManager,t)},bind:function(e,t){var n=this.key;this.isDependentComputedProperty&&Object(c.b)("Cannot bind property %{key}. Properties with dependencies cannot be bound.",{property:this,key:this.key,object:e});var i=e.downstreamNodes[n],r=e.upstreamNodes[n];this._disconnectNodes(i,r),this._configurePropertyAsBound(i,r);var a=t;t&&t.instanceOf&&t.instanceOf(d.a)||(a=d.a.create(a)),d.a.hookUpBinding(e,a,this._ownBinding,!1,!0)||Object(c.b)("Unable to bind property (key: "+this.key+", binding: "+a.path+").",{object:e,property:this,key:this.key,binding:a,path:a.path}),e.isConnected&&h.a.triggerFlush()},_configurePropertyAsBound:function(e,t){this._setBoundNodeManagerIfNeeded(e,t)},_setBoundNodeManagerIfNeeded:u.a,_setBoundNodeManagerIfNeededWeakWritable:function(e,t){h.a.setManagerForNode(this.upstreamNodeManager,t)},unbind:function(e){var t=this.key;this.isDependentComputedProperty&&Object(c.b)("Cannot unbind property %{key}. Properties with dependencies cannot be unbound.",{property:this,key:this.key,object:e});var n=e.downstreamNodes[t],i=e.upstreamNodes[t];this._disconnectNodes(n,i),this._configurePropertyAsRootValue(n,i),h.a.passValueToNode(void 0,i),e.isConnected&&h.a.triggerFlush()},_disconnectNodes:function(e,t){t>0&&h.a.disconnectChildrenFromNode(t),h.a.disconnectParentsFromNode(e)},_getter:null,_setter:null,_setUpInternalAccessors:function(){var e=this.key,t=i.b.staticMembers.defaultValuePrefix+e;this._getter=function(){if(!this.hasOwnProperty("propertiesAreInitialized"))return this[t];var n=T.isInsideSetter;T.isInsideSetter=!1;var i=this.downstreamNodes[e],r=h.a.getValueForNode(i);return T.isInsideSetter=n,r},this.readOnly?this._setter=function(n){this.hasOwnProperty("propertiesAreInitialized")?Object(c.b)("Cannot write to read-only property: "+e,{object:this,value:n}):this[t]=n}:this._setter=function(n){if(this.hasOwnProperty("propertiesAreInitialized")){var i=T.isInsideSetter;T.isInsideSetter=!0;var r=this.upstreamNodes[e];i&&h.a.nodeIsDirty(r)?h.a.passValueToNode(n,r):h.a.setValueForNode(n,r),T.isInsideSetter=i}else this[t]=n}},internalGet:M,internalGetPath:M,_synthesizeInternalGet:u.a,setUpNativeAccessors:function(e,t){Object.defineProperty(e,t,{get:this._getter,set:this._setter,configurable:!0})},getForObject:function(e,t){return this._getter.call(e)},setForObject:function(e,t,n){return this._setter.call(e,n)},disposeForObject:function(e,t){},__superMap:{_$B2l$init:"init",_$BIj$inheritFrom:"inheritFrom",_$Be3$wasRegistered:"wasRegistered",_$Gai$initForObject:"initForObject"}});function M(e,t){return h.a.getValueForNode(t)}var D=function(e){return T.define.apply(T,arguments)};O=D({defaultValue:a.a,readOnly:!0})},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){"use strict";var i=n(32),r=n(41),a=n(65),s=n(775),o=n(1174),c=n(1173),l=n(1169),u=n(778),d=n(780),h=u.a.extend({staticMembers:{_beginBatchSetter:function(){return d.a.begin()},__QUALIFIED_CLASS_NAME__:"BatchSetterForObject"}}),p=n(93),f=n(39),g=n(94),m=n(68),v=n(122),_=0,b=1,y=2,I=m.a.extend(v.a,{didFire:!1,_fireState:!1,previousValues:null,context:null,type:"",initFromPool:function(e){e&&Object(s.a)(e)&&(this.type=e.type||"",this.didFire=e.didFire||!1,this.forceFire=e.forceFire||!1,this.previousValues=e.previousValues||null,this.context=e.context||null,this._fireState=e._fireState||_)},staticMembers:{__QUALIFIED_CLASS_NAME__:"SignalEvent"}}),w=n(34);n.d(t,"a",function(){return O}),n.d(t,"c",function(){return M}),n.d(t,"b",function(){return L}),n.d(t,"f",function(){return P}),n.d(t,"e",function(){return R}),n.d(t,"d",function(){return F}),n.d(t,"g",function(){return V});var S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},C={isObservable:!0,initializeInstance:function(){this._nodes=[];var e=this.upstreamNodes={},t=this.downstreamNodes={};this._connectables=[],this._connectableTargets=[],f.a.pause(),this.initializeObservers(e,t),this.initializeSignals(e,t),this.__s._$TR$initializeInstance.call(this),this._connectAllConnectables(),f.a.triggerFlush(),f.a.resume()},initializeObservers:function(e,t){var n=this.getMetadataByType(M);for(var i in n){var r=n[i],a=this.allocNode(r.manager,f.a.PULL_ON_FLUSH|f.a.NOTIFY);t[i]=a,this.addConnectable(r,a,f.a.NULL_INDEX)}},initializeSignals:function(e,t){var n=this.getMetadataByType(F);for(var i in n){var r=n[i],a=this.allocNode(r,f.a.PULL_ON_FLUSH|f.a.NOTIFY);r.initializeEvent(a),e[i]=t[i]=a}},upstreamNodes:null,downstreamNodes:null,_connectables:null,_connectableTargets:null,isConnected:!1,addConnectable:function(e,t,n){this.isConnected?e.connect(this,t,n):(this._connectables.push(e),this._connectableTargets.push(t),this._connectableTargets.push(n))},_connectAllConnectables:function(){var e,t=this._connectables,n=this._connectableTargets,i=t.length,r=f.a.NULL_INDEX,a=f.a.NULL_INDEX;for(e=0;e<i;e++)r=n[2*e],a=n[2*e+1],t[e].connect(this,r,a);this._connectables=this._connectableTargets=null,this.isConnected=!0},allocNode:function(e,t){var n=f.a.allocNode(e,this,t);return this._nodes.push(n),n},freeNode:function(e){var t=this._nodes,n=t.indexOf(e);n>=0?t.splice(n,1):Object(a.b)("CW.Observable `freeNode` called with a node not managed by this Observable!",{nodeID:e,observable:this}),f.a.freeNode(e)},dispose:function(){var e,t=this._nodes,n=t.length,i=f.a.NULL_INDEX;for(e=0;e<n;e++)i=t[e],f.a.freeNode(i);this._nodes=null,this.downstreamNodes=null,this.upstreamNodes=null,this.__s._$2VI$dispose.call(this)},observe:function(){for(var e,t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];var r=n[0];return(e=Object(s.a)(r)?L.create(this,r):L.create.apply(L,[this].concat(n,[!0]))).connect(),e},listen:function(){for(var e,t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];var r=n[0];return(e=Object(s.a)(r)?N.create(this,r):N.create.apply(N,[this].concat(n,[!1]))).connect(),e},bindingFor:function(e){return p.a.create(e,this)},propertyChanged:function(e){var t=this.downstreamNodes[e];"number"!=typeof t&&Object(a.b)("propertyChanged must be called with the key of an observable property (key: "+e+", object: "+this+").",{object:this,key:e}),f.a.setNodeToDirtyFromParent(t)},bind:function(e,t){var n=this.getMetadataByType(w.a);if(n){var i=n[e];i||Object(a.b)("Bind must be called on an observable property",e),i.bind(this,t)}return this},unbind:function(e){var t=this.getMetadataByType(w.a);if(t){var n=t[e];n||Object(a.b)("Unbind must be called on an observable property",e),n.unbind(this)}return this},beginBatchSet:function(){return h.begin(this)},__superMap:{_$TR$initializeInstance:"initializeInstance",_$2VI$dispose:"dispose"}},O=S({staticMembers:S({},C)},C,{mixinDependencies:[i.b,r.b]}),A=g.a.extend({_onlyFireIfChanged:!0,_debug_dependencyNames:null,_debug_key:null,_observedTypes:null,_observesSignals:!0,init:function(e,t,n){this.__s._$4oX$init.call(this),void 0===n&&(n=!0),Object(o.a)(t)||Object(a.b)("Cannot create CW.ObserverNodeManager without an observer function to call when there is a change."),this.observer=t,this._inputCount=e,this._inputCollectorPool=[],this._observedTypes=new Array(e),n||(this._onlyFireIfChanged=n,this.invokeObserverCallback=this._actuallyInvokeObserverCallback)},calculateValueForNode:function(e,t,n){n||Object(a.b)("Observers should not be set directly, they must pull from their parents.",t);var i=this._getInputCollectorFromPool();f.a.pullDataFromParents(t,i);var r=f.a.getDataForNode(t);if(r||!T(t)){var s=r;return r._fireState!==y?s=this.invokeObserverCallback(e,i,r,t):(r._fireState=_,E(i,r)),this._returnInputCollectorToPool(i),s}},invokeObserverCallback:function(e,t,n,i){return n._fireState===b||this._didObservedValuesChange(t,n.previousValues)?this._actuallyInvokeObserverCallback(e,t,n,i):(n.didFire=!1,n)},notifyNode:function(e,t){f.a.getDataForNode(t).didFire=!1},_actuallyInvokeObserverCallback:function(e,t,n,i){n._fireState=_,E(t,n);var r=w.a.isInsideSetter;return w.a.isInsideSetter=!1,this._substituteSignalInputsIfNeccessary(t),this.observer.apply(e,t),w.a.isInsideSetter=r,function(e,t){var n=f.a.getDataForNode(e);if(n||!T(e)){var i=I.create({previousValues:n.previousValues,_fireState:_,didFire:!0});return i.retain(),n.previousValues=null,n.release(),i}}(i)},_substituteSignalInputsIfNeccessary:function(e){if(this._observesSignals){for(var t,n,i=!1,r=this._observedTypes,a=0;a<e.length;a++)void 0===(t=r[a])&&void 0!==(t=this._getValueType(e[a]))&&(r[a]=t),1===t?((n=e[a])&&!n.didFire&&(e[a]=void 0),i=!0):void 0===t&&(i=!0);this._observesSignals=i}},_didObservedValuesChange:function(e,t){var n=e,i=t;if(n.length!==i.length)return!0;for(var r,a,s=this._observedTypes,o=n.length,c=0;c<o;c++)if(r=s[c],a=n[c],void 0===r&&(r=s[c]=this._getValueType(a)),1===r){if(a&&a.didFire)return!0}else if(a!==i[c])return!0;return!1},_getValueType:function(e){return void 0===e?void 0:Object(c.a)(e,I)?1:2},addDebugInfoForNode:function(e,t,n){t.type="Observer",t.object=e,t.key=this._debug_key||"(Anonymous)",t.dependencyNames=this._debug_dependencyNames,t.toString=function(){return this.object+"."+this.key},t.name=t.toString()},_getInputCollectorFromPool:function(){var e=this._inputCollectorPool;return e.length>0?e.pop():new Array(this._inputCount)},_returnInputCollectorToPool:function(e){for(var t=e.length,n=0;n<t;n++)e[n]=void 0;this._inputCollectorPool.push(e)},__superMap:{_$4oX$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"ObserverNodeManager"}});function E(e,t){for(var n=t.previousValues,i=e.length,r=0;r<i;r++)n[r]=e[r]}function T(e){if(f.a.nodeIsFreeing(e))return!0;Object(a.b)("An observer with node %{nodeID} was corrupted (node data was lost)",{nodeID:e})}var M=i.a.extend({init:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=void 0,r=void 0,a=void 0,c=this.notifyOnCreate,l=t[0];if(Object(s.a)(l))i=l.inputs,r=l.callback,void 0!==l.notifyOnCreate&&(c=l.notifyOnCreate),void 0!==l.onlyFireIfChanged&&(a=l.onlyFireIfChanged);else{var u=(i=t).pop();Object(o.a)(u)||(void 0!==u&&(c=u),u=i.pop()),r=u}this.inputs=i,this.callback=r,this.bindings=p.a.createForPaths(i),this.manager=this.managerClass.create(i.length,r,a),this.manager._debug_inputNames=i,this.notifyOnCreate=c,this.__s._$8P6$init.call(this)},wasRegistered:function(e,t){var n=arguments;this.__s._$8Rd$wasRegistered.apply(this,n),this.manager._debug_key=t},getValue:function(e,t){return function(){var e=this.downstreamNodes[t],n=f.a.getDataForNode(e);!n&&T(e)||(n._fireState=b,f.a.setNodeToDirtyFromParent(e))}},notifyOnCreate:!0,manager:null,managerClass:A,requiresSupport:O,bindings:null,inputs:null,callback:null,allowAtCreate:!0,connect:function(e,t){for(var n,i=this.bindings,r=this.notifyOnCreate,s=0,o=i.length;s<o;s++)n=i[s],p.a.hookUpDownstreamNode(e,n,t,!0)||Object(a.b)("Observer could not hook up to one of its observed properties.",{object:e,observer:this,binding:n,bindingPath:n.path});var c=I.create({previousValues:[],_fireState:r?b:y});c.retain(),f.a.setDataForNode(c,t),e.isConnected&&f.a.triggerFlush()},__superMap:{_$8P6$init:"init",_$8Rd$wasRegistered:"wasRegistered"},staticMembers:{__QUALIFIED_CLASS_NAME__:"ObserverMetadata"}}),D=M.extend({notifyOnCreate:!1,staticMembers:{__QUALIFIED_CLASS_NAME__:"ListenerMetadata"}}),L=M.extend({node:-1,init:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];e&&e.hasMixin&&e.hasMixin(O)||Object(a.b)("A CW.Observer must be defined on an observable object.",{owningObject:e,inputs:n}),this.owningObject=e;var r=n[0];Object(s.a)(r)?this.__s._$B9S$init.call(this,r):this.__s._$B9S$init.apply(this,n),this.node=e.allocNode(this.manager,f.a.PULL_ON_FLUSH)},connect:function(){return this.__s._$BFk$connect.call(this,this.owningObject,this.node)},disconnect:function(){f.a.disconnectParentsFromNode(this.node)},__superMap:{_$B9S$init:"init",_$BFk$connect:"connect"},staticMembers:{__QUALIFIED_CLASS_NAME__:"Observer"}}),N=L.extend({notifyOnCreate:!1,staticMembers:{__QUALIFIED_CLASS_NAME__:"Listener"}}),P=function(){return M.define.apply(M,arguments)},R=function(){return D.define.apply(D,arguments)},x={key:"Signal Not Set Sentinel"},F=i.a.extend({requiresSupport:O,isCacheable:!0,notifyNode:function(e,t){var n=f.a.getDataForNode(t);n.context=null,n.didFire=!1,this.didPropagate.call(e)},calculateValueForNode:function(e,t,n){var i=f.a.getStateDataForNode(t);if(n){f.a.setStateDataForNode(x,t);var r=f.a.getStateIDForNode(t);f.a.getValueForNode(r),i=f.a.getStateDataForNode(t)}return i=i===x?f.a.getDataForNode(t):k(t,this._debug_key,i),this.willPropagate.call(e,i),i},validateDescendantDownstreamNodeManager:l.a,getValue:function(e,t){return function(e){var n=this.downstreamNodes[t];if(void 0!==n){var i=e;w.a.isInsideSetter&&f.a.nodeIsDirty(n)?f.a.passValueToNode(i,n):f.a.setValueForNode(i,n)}}},didPropagate:l.a,willPropagate:l.a,wasRegistered:function(e,t){var n=arguments;this.__s._$DF8$wasRegistered.apply(this,n),this._debug_key=t},addDebugInfoForNode:function(e,t,n){t.type="Signal",t.object=e,t.key=this._debug_key,t.toString=function(){return this.object+"."+this.key},t.name=t.toString()},initializeEvent:function(e){var t=k(e,this._debug_key,null);t.didFire=!1,f.a.setDataForNode(t,e),f.a.setStateDataForNode(x,e)},__superMap:{_$DF8$wasRegistered:"wasRegistered"},staticMembers:{__QUALIFIED_CLASS_NAME__:"SignalMetadata"}}),k=function(e,t,n){var i=f.a.getDataForNode(e),r=I.create({type:t,context:n,didFire:!0});return r.retain(),i&&i.release(),r},V=function(){return F.create.apply(F,arguments)}},,,function(e,t,n){"use strict";n.d(t,"a",function(){return Ge});var i=n(1169),r=n(65),a=3,s=~a,o=4,c=8,l=16,u=32,d=64,h=128,p=256,f=512,g=2048,m=8192,v=16384,_=0,b=1,y=2,I=3,w=-1,S=0,C=1,O=0,A=1,E=256,T=new Int16Array(1024),M=1,D=1024,L=new Array(1024),N=new Int32Array(2048),P=2048,R=new Int32Array(2048),x=new Int32Array(2048),F=0,k=2,V=2048,j=w,B=new Array(1024),U=new Array(1024),W=new Array(1024),G=new Int32Array(1024),H=2048,$=new Int32Array(256),z=0,K=256,Q=new Int32Array(256),q=0,Y=256,Z=[],J=-1;function X(){var e;return-1===J?e=new Int32Array(E):(e=Z[J],J--),e[0]=1,e}var ee=X(),te=new Int32Array(E),ne=0,ie=E,re=!Int16Array,ae=re?i.a:function(){D*=2,H*=2;var e=new Int16Array(D);e.set(T);var t=new Int32Array(H);t.set(G),T=e,G=t},se=re?i.a:function(){P*=2;var e=new Int32Array(P);e.set(N),N=e;var t=new Int32Array(P);t.set(R),R=t},oe=re?i.a:function(){V*=2;var e=new Int32Array(V);e.set(x),x=e},ce=re?i.a:function(){K*=2,Y*=2;var e=new Int32Array(K);e.set($),$=e;var t=new Int32Array(Y);t.set(Q),Q=t},le=re?i.a:function(){ie*=2;var e=new Int32Array(ie);e.set(te),te=e},ue=re?i.a:function(){var e=2*ee.length,t=new Int32Array(e);t.set(ee),ee=t},de=0,he=0;function pe(e){return e&d&&!(e&o)}function fe(e,t){pe(T[e])&&L[e].didRemoveParentFromNode(B[e],e,t,R[(e<<1)+S])}function ge(e,t){pe(T[e])&&L[e].didRemoveChildFromNode(B[e],e,t,R[(e<<1)+C])}function me(e,t){T[e]&d&&L[e].willRemoveChildFromNode(B[e],e,t,R[(e<<1)+C])}function ve(e,t){pe(T[e])&&L[e].willRemoveParentFromNode(B[e],e,t,R[(e<<1)+S])}function _e(){if(!(de>0||he>0)){var e=0,t=q;for(e=0;e<t;e++)be(Q[e]),Q[e]=w;q=0}}function be(e){z>=K&&ce(),$[z++]=e}function ye(e,t){var n=N[t],i=w;j!==w?(i=0|j,j=x[j+A]):(i=0|F,(F+=k)>V&&oe()),x[i+O]=e,x[i+A]=n,N[t]=i,R[t]++}function Ie(e,t){for(var n=N[t],i=w;n!==w;){if(x[n+O]===e){i!==w?x[i+A]=x[n+A]:N[t]=x[n+A],x[n+A]=j,j=n,R[t]--;break}i=n,n=x[n+A]}}function we(e,t,n){de++;for(var i=(e<<1)+t,r=N[i],a=t===S?C:S,s=r;s!==w;){var c=x[s];t===S?(n&&ve(e,c),me(c,e)):(n&&me(e,c),ve(c,e)),s=x[s+A]}if(s=r,N[i]=w,R[i]=0,s!==w)for(;;){var l=x[s];T[l]&o||Ie(e,(l<<1)+a),t===S?(n&&fe(e,l),ge(l,e)):(n&&ge(e,l),fe(l,e));var u=x[s+A];if(u===w){x[s+A]=j,j=r;break}s=u}de--,_e()}function Se(e){return B[e]}function Ce(e,t){var n=T[e];T[e]=n&s|t}function Oe(e,t){var n=T[e];return T[e]=n|t,T[e]}function Ae(e,t){var n=T[e];return T[e]=n&~t,T[e]}function Ee(e,t){Me(e,t,e,y)}function Te(e,t){Me(e,void 0,t,I)}function Me(e,t,n,i,s){We(e)||Object(r.b)("Tried to dirty an undefined node");var o=T[e],c=o&a;c!==b||o&v||Object(r.b)("Cycle found in dataflow graph");var d=o&p,h=d&&c===y?Fe(e):void 0;Ce(e,b),ke(t,e),Ve(n,e),d&&(i===I?L[e].wasDirtiedByParent(Se(e),e,t,h):i===y&&L[e].wasDirtiedBySelf(Se(e),e,t,h)),s||(De(e),function(e){var t=T[e];!(t&l||t&u||t&g)||t&m||(ee.length<=ee[0]&&ue(),ee[ee[0]]=e,ee[0]++,Oe(e,m))}(e)),Ce(e,i)}function De(e,t){var n=T[e];if(!t&&n&h)!function(e){T[e]&v||(ie<=ne&&le(),te[ne]=e,ne++,Oe(e,v))}(e);else for(var i=(e<<1)+C,r=R[i],a=N[i],s=r-1;a!==w;)t&&!t[s]||Te(x[a+O],e),s--,a=x[a+A]}function Le(){for(var e,t=0;t<ne;t++)De(e=te[t],L[e].getActiveChildrenForNode(e));for(var n=0;n<ne;n++)Ae(e=te[n],v);ne=0}function Ne(){if(!(he>0)){de++;var e=ee,t=e[0];ee=X();var n,i,r=0,a=0;for(n=1;n<t;n++)Ae(r=e[n],m);for(n=1;n<t;n++)r=e[n],a=T[r],r===w||a&o||(a&l&&L[r].flushNode(B[r],r),a&g&&Pe(r));for(n=1;n<t;n++)r=e[n],a=T[r],r===w||a&o||a&u&&L[r].notifyNode(B[r],r);i=e,Z[++J]=i,de--,_e()}}function Pe(e){We(e)||Object(r.b)("Tried to getValue for an undefined node");var t=T[e];if(t&o)return Re(e);var n=t&a,i=L[e],s=i.isCacheable;if(n===_&&s)return Re(e);var c=n===I||!s,l=Se(e),u=i.calculateValueForNode(l,e,c);Ce(e,_),ke(void 0,e);var d,h=t&f;return h&&(d=Re(e)),s&&xe(u,e),h&&i.previousValueWasReplaced(l,e,d),u}function Re(e){return U[e]}function xe(e,t){U[t]=e}function Fe(e){return W[e]}function ke(e,t){W[t]=e}function Ve(e,t){G[t]=e}function je(e,t){void 0===t&&(t=0);var n,i=T[e];switch(i&a){case _:n="CLEAN";break;case b:n="DIRTYING";break;case y:n="DIRTY_SELF";break;case I:n="DIRTY_PARENT"}function r(e){for(var n,i=[];e!==w;)n=x[e+O],t>0?i.unshift(je(n,t-1)):i.unshift(n),e=x[e+A];return i}var s=e<<1,f=r(N[s+A]),g=r(N[s+O]),m=L[e],v={id:e,wantsFlush:!!(i&l),wantsNotify:!!(i&u),wantsFreeTracking:!!(i&c),wantsRelationshipTracking:!!(i&d),wantsActiveChildren:!!(i&h),wantsDirtyTracking:!!(i&p),isFreeing:!!(i&o),status:n,children:f,parents:g,manager:m,data:U[e],context:B[e],stateData:W[e],stateID:G[e]};return m&&m.addDebugInfoForNode&&m.addDebugInfoForNode(B[e],v,e),v}function Be(e,t,n){void 0===t&&(t=0),void 0===n&&(n=e.length-1);for(var i=[],r=t;r<=n&&!(r>=e.length);r++)i.push(je(e[r]));return i}function Ue(e,t,n){var i="";return e[t].forEach(function(e){var r=(e&&void 0!==e.id?e.id:e)+(e&&e.status?" ("+e.status+")":"")+": "+e.toString();i+=n+r+"\n",e&&e[t]&&(i+=Ue(e,t,n+"  "))}),i}function We(e){return void 0!==e&&null!==e&&e!==w}var Ge={NULL_INDEX:w,dumpNode:je,dumpChildren:function(e,t){return void 0===t&&(t=7),"Children of "+e+":\n"+Ue(je(e,t),"children","")},dumpParents:function(e,t){return void 0===t&&(t=7),"Parents of "+e+":\n"+Ue(je(e,t),"parents","")},dumpNodes:Be,dumpNodeNames:function(e,t,n){return Be(e,t,n).map(function(e){return(e&&void 0!==e.id?e.id:e)+":"+e.toString()})},dumpNodesWithData:function(e){var t=[];return U.forEach(function(n,i){n===e&&t.push(i)}),t},dumpNodesWithStateData:function(e){var t=[];return W.forEach(function(n,i){n===e&&t.push(i)}),t},debugNextCycle:function(){},dumpStack:function(){return{stack:[],nodes:{}}},setNodeBit:Oe,removeNodeBit:Ae,addChildToNode:function(e,t,n){var i=(e<<1)+S;ye(e,(t<<1)+C),ye(t,i),function(e,t){pe(T[e])&&L[e].didAddChildToNode(B[e],e,t,R[(e<<1)+C])}(t,e),function(e,t){pe(T[e])&&L[e].didAddParentToNode(B[e],e,t,R[(e<<1)+S])}(e,t),n&&Te(e,t)},removeChildFromNode:function(e,t,n){me(t,e),ve(e,t),Ie(e,(t<<1)+C),Ie(t,(e<<1)+S),ge(t,e),fe(e,t),n&&Te(e,t)},setValueForNode:function(e,t){Ee(t,e),Le(),Ne()},setValuesForNodes:function(){arguments.length%2!=0&&Object(r.b)("Invalid number of arguments on setValuesForNodes, arguments should be a paired list of nodeIDs and values.",arguments);for(var e=0;e<arguments.length;e+=2)Ee(arguments[e+1],arguments[e]);Le(),Ne()},setNodeToDirtyFromParent:function(e){Te(e,w),Le(),Ne()},passValueToNode:function(e,t){Me(t,e,t,y,!0)},getValueForNode:Pe,getDataForNode:Re,setDataForNode:xe,getStateDataForNode:Fe,setStateDataForNode:ke,getStateIDForNode:function(e){return G[e]},setStateIDForNode:Ve,getContextForNode:Se,setContextForNode:function(e,t){B[t]=e},getManagerForNode:function(e){return L[e]},setManagerForNode:function(e,t){L[t]=e},getParentIDs:function(e,t,n){for(var i=n||0,r=(e<<1)+S,a=R[r],s=N[r],o=a-1+i,c=o+1;c<t.length;c++)t[c]=w;for(;s!==w;){var l=x[s+O];t[o]=l,o--,s=x[s+A]}return t},getChildrenIDs:function(e,t,n){for(var i=n||0,r=(e<<1)+C,a=R[r],s=N[r],o=a-1+i,c=o+1;c<t.length;c++)t[c]=w;for(;s!==w;){var l=x[s+O];t[o]=l,o--,s=x[s+A]}return t},getChildIndex:function(e,t){for(var n=(t<<1)+C,i=N[n],r=R[n]-1;i!==w;){if(x[i+O]===e)return r;i=x[i+A],r--}return w},getParentIndex:function(e,t){for(var n=(e<<1)+S,i=N[n],r=R[n]-1;i!==w;){if(x[i+O]===t)return r;i=x[i+A],r--}return w},FLUSH:l,NOTIFY:u,RELATIONSHIPS:d,FREE:c,ACTIVE_CHILDREN:h,DIRTY_TRACKING:p,PREVIOUS_VALUE_TRACKING:f,PULL_ON_FLUSH:g,PULL_ON_FREE:1024,allocNode:function(e,t,n){var i=0,r=w;i|=n|=0,z>0?r=$[--z]:(r=M++,M>D&&(ae(),se())),T[r]=i;var a=r<<1+S,s=a+C;return N[a]=w,N[s]=w,R[a]=0,R[s]=0,L[r]=e,B[r]=t,U[r]=void 0,W[r]=void 0,G[r]=w,r},freeNode:function(e){var t=T[e];if(1024&t){var n=t&a;n!==y&&n!==I||Pe(e)}Oe(e,o),we(e,S,!1),we(e,C,!1),t&c&&L[e].nodeWillFree(B[e],e),L[e]=U[e]=B[e]=W[e]=void 0,G[e]=w,de>0||he>0?(q>=Y&&ce(),Q[q++]=e):be(e)},disconnectParentsFromNode:function(e){we(e,S,!0)},disconnectChildrenFromNode:function(e){we(e,C,!0)},pullDataFromParents:function(e,t){for(var n=(e<<1)+S,i=R[n],r=N[n],a=i-1,s=a+1;s<t.length;s++)t[s]=void 0;for(;r!==w;){var o=x[r+O];t[a]=Pe(o),a--,r=x[r+A]}return t},triggerFlush:Ne,pause:function(){he++},resume:function(){0==--he&&Ne()},_sanitizeNodeID:function(e){return null!==e&&void 0!==e||(e=w),0|e},nodeIsDirty:function(e){var t=T[e]&a;return t&y||t&I},nodeIsFreeing:function(e){return T[e]&o},isValidNodeID:We}},function(e,t,n){"use strict";var i,r,a=n(1185),s=n(87),o=n(177),c=n(69),l=n(34),u=n(784),d=n(854),h=n(93),p=n(92),f=n(36),g=n(106),m=n(153),v=n(397),_=n(156),b=n(774),y=n(1206),I=n(46),w=n(88),S=n(39),C=(n(396),n(65)),O=n(1184),A=n(155),E=n(853),T=n(412),M=(i=a.a,(r=function(e){var t=i.create();try{e(t.resolve.bind(t),t.reject.bind(t))}catch(e){t.reject(e)}return t}).all=i.all.bind(i),r.race=i.race.bind(i),r.resolve=i.resolve.bind(i),r.reject=i.reject.bind(i),r);function D(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/jpeg";return P(e,t,n,.75)}n(851);var L,N,P=(L=regeneratorRuntime.mark(function e(t,n,i,r){var s,o,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=I.h.getInstance(),e.next=3,Object(E.a)(function(e){var n=I.d.getInstance(),o=Math.round((t.naturalWidth||t.width)*e),c=Math.round((t.naturalHeight||t.height)*e);n.width=o,n.height=c,Object(T.a)(n.getContext("2d"),t,0,0,o,c);var l=a.a.create();return n.toBlob(function(t){I.d.disposeInstance(n),s[e]=t,l.resolve(t.size)},i,r),l},n,0,1,.05*n,0,1/Math.max(t.width,t.height));case 3:return o=e.sent,c=s[o],I.h.disposeInstance(s),e.abrupt("return",c);case 7:case"end":return e.stop()}},e,this)}),N=function(){var e=L.apply(this,arguments);return new M(function(t,n){return function i(r,a){try{var s=e[r](a),o=s.value}catch(e){return void n(e)}if(!s.done)return M.resolve(o).then(function(e){i("next",e)},function(e){i("throw",e)});t(o)}("next")})},function(e,t,n,i){return N.apply(this,arguments)});function R(e){var t=I.h.getInstance(),n=t.promise=a.a.create(),i=t.fileReader=new FileReader;return i.onload=t.handleLoad=Object(A.b)(x,void 0,t).retain(),i.onerror=t.handleError=Object(A.b)(F,void 0,t).retain(),i.readAsArrayBuffer(e),n}var x=function(e,t){e.promise.resolve(t.target.result),k(e)},F=function(e,t){var n=new Error("Couldn’t load blob to read as ArrayBuffer.");n.event=t,e.promise.reject(n),k(e)},k=function(e){e.fileReader.onload=e.fileReader.onerror=null,e.handleLoad.release(),e.handleError.release(),I.h.disposeInstance(e)},V=n(243),j=n(246),B=n(222),U=n(99),W=function(){var e=a.a,t=function(t){var n=e.create();try{t(n.resolve.bind(n),n.reject.bind(n))}catch(e){n.reject(e)}return n};return t.all=e.all.bind(e),t.race=e.race.bind(e),t.resolve=e.resolve.bind(e),t.reject=e.reject.bind(e),t}(),G={mixinDependencies:[j.a],staticMembers:{resetAllDerivatives:function(){for(var e,t=this.constructor.TODO_ALL_MATERIALIZED_INSTANCES_IN_STORE,n=0;e=t[n];n++)e[n].resetDerivatives()},_requestsWithLoggingSent:0,sendingRequestWithLogging:function(){this._requestsWithLoggingSent+=1},shouldSendRequestWithLogging:function(){return this._requestsWithLoggingSent<=U.a.numberOfDerivativesToLogTimingFor}},_derivativeSet:null,_loadedDerivativeSet:null,addDerivative:function(e){(this._derivativeSet||(this._derivativeSet=H.getInstance())).add(e),this.derivativeMayHaveLoaded(e)},removeDerivative:function(e){var t=!1,n=void 0;(n=this._derivativeSet)&&(n.remove(e),n.length||(H.disposeInstance(n),this._derivativeSet=null)),(n=this._loadedDerivativeSet)&&(t=n.contains(e),n.remove(e),n.length||(H.disposeInstance(n),this._loadedDerivativeSet=null)),t&&(S.a.pause(),e.synthesizedFromDerivativeId&&this.syntheticDerivativeDidUnload(),this.derivativeDidUnload(),S.a.resume())},derivativeMayHaveLoaded:function(e){if(e.isLoaded){var t=this._loadedDerivativeSet||(this._loadedDerivativeSet=H.getInstance()),n=!t.contains(e);t.add(e),n&&(S.a.pause(),e.synthesizedFromDerivativeId&&this.syntheticDerivativeDidLoad(),this.derivativeDidLoad(),S.a.resume())}},derivativeDidLoad:f.g(),derivativeDidUnload:f.g(),syntheticDerivativeDidLoad:f.g(),syntheticDerivativeDidUnload:f.g(),resetDerivatives:function(){var e=arguments;this.__s._$1To$resetDerivatives.apply(this,e);var t=this._derivativeSet;if(t)for(var n,i=0;n=t.items[i];i++)n.resetForChangeset()},derivativeInfoForGeometricLength:function(e,t,n){e<=0&&(e=1),e||(e=1/0);var i=this.getDerivativeInfoSubset(t),r=i&&i.length,a=this._loadedDerivativeSet&&this._loadedDerivativeSet.byId;if(!r||n&&!a)return null;for(var s=null,o=0;o<r&&(n&&!a[i[o].derivativeId]||!((s=i[o]).geometricLength>=e));o++);return s},derivativeInfoForDerivativeId:function(e){var t=this.derivativeInfosByDerivativeId;return t?t[e]:null},snapGeometricLength:function(e,t,n){var i=this.derivativeInfoForGeometricLength(e,t,n);return i?i.geometricLength:NaN},getLoadedDerivative:function(e){return this._loadedDerivativeSet&&this._loadedDerivativeSet.byId[e&&e.derivativeId||e]||null},getDerivative:function(e){var t=e.derivativeId?e:this.derivativeInfoForDerivativeId(e),n=this._derivativeSet&&this._derivativeSet.byId;return t?n&&n[t.derivativeId]||V.a.create(t,this.constructor):null},isDerivativeLoaded:function(e){return Boolean(this.getLoadedDerivative(e,!0))},getBestLoadedDerivative:function(e,t){var n=this.derivativeInfoForGeometricLength(e,t,!0);return n?this.getLoadedDerivative(n):null},getBestDerivative:function(e,t){var n=this.derivativeInfoForGeometricLength(e,t);return n?this.getDerivative(n):null},requestDerivative:function(e,t,n,i){if(this.earliestDerivativeURLExpiry<Date.now()){this.retain(this);var r=B.a.create().retain(this),s=A.a(this._continueOrHaltDerivativeLoadAfterURLReload,this,e.derivativeId||e,t,r);return(this._derivativeURLReloadPromise||(this._derivativeURLReloadPromise=(o=this,Q.push(o),1===Q.length&&O.a(q,1e3),a.a.create()))).then(s,s),r}var o,c=e,l=Number(c)===c?this.derivativeInfoForGeometricLength(c,t):c.derivativeId?c:this.derivativeInfoForDerivativeId(c);if(!l){var u=n||B.a.create().retain(this).autorelease(this);return u.reject(new Error("Media lacks compatible derivatives.")),u}var d=this.getLoadedDerivative(l);!d&&t&&(d=this.getBestLoadedDerivative(l.geometricLength,t)),(!d||d.geometricLength<l.geometricLength)&&(d=V.a.create(l,this.constructor));var h=d._load(n),p=this.master.computedDynamicResJPEGMedRes;if(p&&!i&&"JPEGMed"===d.derivativeName&&this.constructor.shouldSendRequestWithLogging()&&!l.reflectsEdits){var f=this.requestDerivative(e,t,n,!0);f.dynamicResJPEGMedRes=p,f.shouldAddTimingToRequestForLoggingPurposes=!0,h.shouldAddTimingToRequestForLoggingPurposes=!0,f.loggingRequestId=this.constructor._requestsWithLoggingSent,h.loggingRequestId=this.constructor._requestsWithLoggingSent,this.constructor.sendingRequestWithLogging()}return h},_continueOrHaltDerivativeLoadAfterURLReload:function(e,t,n){this._derivativeURLReloadPromise=null,this.propertyChanged("serverDerivativeInfos"),this.earliestDerivativeURLExpiry<Date.now()?n.reject(new Error("Failed to load Media metadata.")):this.requestDerivative(e,t,n),n.autorelease(this),this.release(this)},createBestImageBelowFileSize:function(e){var t,n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"image/jpeg";return(t=regeneratorRuntime.mark(function t(){var r,a,s,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.requestDerivative(1500);case 2:return r=t.sent,t.next=5,D(r.drawableEntity,e,i);case 5:return a=t.sent,t.next=8,R(a);case 8:return s=t.sent,o=new Uint8Array(s),t.abrupt("return",o);case 11:case"end":return t.stop()}},t,n)}),function(){var e=t.apply(this,arguments);return new W(function(t,n){return function i(r,a){try{var s=e[r](a),o=s.value}catch(e){return void n(e)}if(!s.done)return W.resolve(o).then(function(e){i("next",e)},function(e){i("throw",e)});t(o)}("next")})})()},_debug_display:function(e){},__superMap:{_$1To$resetDerivatives:"resetDerivatives"}},H=I.b.extend({createInstance:function(){var e=new w.a;return e.byId={},e.clear=$,e.add=z,e.remove=K,e},disposeInstance:function(e){var t=arguments;e.length&&C.b("Disposing a derivativeSet that stilli has derivatives in it. A derivative likely failed to retain its Media."),this.__s._$6MJ$disposeInstance.apply(this,t)},__superMap:{_$6MJ$disposeInstance:"disposeInstance"}}).create(),$=C.b.bind(void 0,"Cannot `clear` a derivativeSet."),z=function(e){w.a.prototype.add.call(this,e)&&(this.byId[e.derivativeId]=e)},K=function(e){w.a.prototype.remove.call(this,e)&&delete this.byId[e.derivativeId]},Q=[];function q(){if(Q.length){var e=Q[0].constructor.reload({primaryKeys:Q.map(function(e){return e.pk})});Q.forEach(function(t){return t._derivativeURLReloadPromise.resolve(e)}),Q.length=0}}var Y=n(80),Z=n(180),J=n(41),X=n(1217),ee=Y.a.extend({tileCanvases:Z.b(Array),indicesByMediaPK:Z.b(Object),unusedIndices:Z.b(Array),materializedMediasByMediaPK:Z.b(Object),usedLength:0,tileSize:128,thumbSize:128,maxPixelCount:8388608,maxTileCount:J.c({set:function(e){this.maxPixelCount=this.tileSize*this.tileSize*e},get:function(){return this.maxPixelCount/this.tileSize/this.tileSize}}),maxThumbCount:J.c({set:function(e){this.maxPixelCount=this.thumbSize*this.thumbSize*e},get:function(){return this.maxPixelCount/this.thumbSize/this.thumbSize}}),thumbCountPerTile:J.c({readOnly:!0,get:function(){return this.tileSize*this.tileSize/this.thumbSize/this.thumbSize}}),thumbsAcrossTile:J.c({readOnly:!0,get:function(){return this.tileSize/this.thumbSize}}),numericalMetadata:Z.b(Array),stringMetadata:Z.b(Array),otherMetadata:Z.b(Array),leastRecentlyUsedIndex:-1,mostRecentlyUsedIndex:-1,_tileCanvasForIndex:function(e){var t=e/this.thumbCountPerTile|0,n=this.tileCanvases[t];return n||((n=this.tileCanvases[t]=document.createElement("canvas")).width=n.height=this.tileSize,n._context=n.getContext("2d")),n},addDerivativeIfNeeded:function(e){var t=e.info;if(t){var n=this.indicesByMediaPK[t.mediaPK];(void 0===n||t._outdateCount>this._getInfoOutdateCount(n))&&(void 0!==n&&this.purgeIndex(n),this.addDerivative(e))}},addDerivative:function(e){var t=e.info;if(t){var n=t.mediaPK;this.indicesByMediaPK[n]&&C.b("Attempting to record two TinyThumb derivatives for the same media.");var i=this.unusedIndices.pop();void 0===i&&(i=this.usedLength),i===this.maxThumbCount?(this.purgeIndex(this.leastRecentlyUsedIndex),i=this.unusedIndices.pop()):this.usedLength++,i===this.usedLength-1&&this._resetDataAtIndex(i,!0);var r=this._setPixels(i,e);this._setWidth(i,r.width),this._setHeight(i,r.height),this._setNextLessRecentlyUsedIndex(i,this.mostRecentlyUsedIndex),this._setNextMoreRecentlyUsedIndex(i,-1),this._setMediaPK(i,n),this._setInfoMimeType(i,t.mimeType),this._setInfoReflectsEdits(i,t.reflectsEdits?1:0),this._setInfoOutdateCount(i,t._outdateCount),this._setInfoDerivativeId(i,t.derivativeId),this._setInfoSynthesizedFromDerivativeId(i,t.synthesizedFromDerivativeId||""),-1!==this.mostRecentlyUsedIndex&&this._setNextMoreRecentlyUsedIndex(this.mostRecentlyUsedIndex,i),this.mostRecentlyUsedIndex=i,-1===this.leastRecentlyUsedIndex&&(this.leastRecentlyUsedIndex=i),this.indicesByMediaPK[n]=i}},purgeIndex:function(e){var t=this._getMediaPK(e);delete this.indicesByMediaPK[t],this._closeLinkedListGapAroundIndex(e),this._resetDataAtIndex(e),this.unusedIndices.push(e)},bumpIndex:function(e){this._getMediaPK(e)||C.b("Cannot bump a tinyThumbStore index that is not storing any data."),this._closeLinkedListGapAroundIndex(e),this._setNextMoreRecentlyUsedIndex(e,-1),this._setNextLessRecentlyUsedIndex(e,this.mostRecentlyUsedIndex),this.mostRecentlyUsedIndex=e},_closeLinkedListGapAroundIndex:function(e){var t=this._getNextMoreRecentlyUsedIndex(e),n=this._getNextLessRecentlyUsedIndex(e);-1!==t?this._setNextLessRecentlyUsedIndex(t,n):this.mostRecentlyUsedIndex=n,-1!==n?this._setNextMoreRecentlyUsedIndex(n,t):this.leastRecentlyUsedIndex=t},_resetDataAtIndex:function(e,t){this._setWidth(e,0),this._setHeight(e,0),this._setNextLessRecentlyUsedIndex(e,-1),this._setNextMoreRecentlyUsedIndex(e,-1),this._setMediaPK(e,""),this._setInfoMimeType(e,""),this._setInfoReflectsEdits(e,0),this._setInfoOutdateCount(e,-1),this._setInfoDerivativeId(e,""),this._setInfoSynthesizedFromDerivativeId(e,""),t||this._setPixels(e,null)},_getWidth:function(e){return this.numericalMetadata[e*oe+te]},_setWidth:function(e,t){this.numericalMetadata[e*oe+te]=t},_getHeight:function(e){return this.numericalMetadata[e*oe+ne]},_setHeight:function(e,t){this.numericalMetadata[e*oe+ne]=t},_getNextMoreRecentlyUsedIndex:function(e){return this.numericalMetadata[e*oe+re]},_setNextMoreRecentlyUsedIndex:function(e,t){this.numericalMetadata[e*oe+re]=t},_getNextLessRecentlyUsedIndex:function(e){return this.numericalMetadata[e*oe+ie]},_setNextLessRecentlyUsedIndex:function(e,t){this.numericalMetadata[e*oe+ie]=t},_getMediaPK:function(e){return this.stringMetadata[e*he+ce]},_setMediaPK:function(e,t){this.stringMetadata[e*he+ce]=t},_getInfoMimeType:function(e){return this.stringMetadata[e*he+le]},_setInfoMimeType:function(e,t){this.stringMetadata[e*he+le]=t},_getInfoReflectsEdits:function(e){return this.numericalMetadata[e*oe+ae]},_setInfoReflectsEdits:function(e,t){this.numericalMetadata[e*oe+ae]=t},_getInfoOutdateCount:function(e){return this.numericalMetadata[e*oe+se]},_setInfoOutdateCount:function(e,t){this.numericalMetadata[e*oe+se]=t},_getInfoDerivativeId:function(e){return this.stringMetadata[e*he+ue]},_setInfoDerivativeId:function(e,t){this.stringMetadata[e*he+ue]=t},_getInfoSynthesizedFromDerivativeId:function(e){return this.stringMetadata[e*he+de]},_setInfoSynthesizedFromDerivativeId:function(e,t){this.stringMetadata[e*he+de]=t},_setPixels:function(e,t){var n=this._tileCanvasForIndex(e)._context,i=e%this.thumbCountPerTile,r=this.thumbSize,a=this.thumbsAcrossTile,s=r*(i%a),o=r*(i/a|0);if(!t)return n.clearRect(s,o,r,r),null;var c=X.d(t.physicalWidth,t.physicalHeight,r,r,pe),l=c.width=Math.round(c.width),u=c.height=Math.round(c.height);return t.drawIntoContext(n,s,o,l,u),c},staticMembers:{__QUALIFIED_CLASS_NAME__:"TinyThumbStore"}}),te=0,ne=1,ie=2,re=3,ae=4,se=5,oe=6,ce=0,le=1,ue=2,de=3,he=4,pe={},fe=ee.create(),ge={mixinDependencies:[G],staticMembers:{suspendDerivativeCreations:function(){me++},resumeDerivativeCreations:function(){--me<=0&&(me=0,_e())}},getBestLoadedDerivative:function(){var e=arguments,t=this.__s._$NY$getBestLoadedDerivative.apply(this,e);return t&&(t._stopgap_shouldCache=!0),t},requestDownsample:function(e,t){if(U.a.enableDerivativeDownsampling){var n=this.constructor.isDerivativeSubsetKey(t)?t:null,i=n?this.getBestLoadedDerivative(e,n):t;i&&we(i.geometricLength,e)&&this.scheduleDerivativeCreation(Ie(e),n||i.derivativeId)}},_cleanUpAndOrCancelPendingDerivativeCreations:function(){ve.remove(this);var e=this._pendingDerivativeCreations;if(e){var t=I.c;e.forEach(t.disposeInstance,t),t.disposeInstance(e),this._pendingDerivativeCreations=null}},scheduleDerivativeCreation:function(){for(var e=I.c,t=this._pendingDerivativeCreations||(this._pendingDerivativeCreations=e.getInstance()),n=b.a(e.getInstance(),arguments),i=!1,r=t.length;r--;){for(var a=t[r],s=!0,o=Math.max(a.length,n.length);o--;)if(n[o]!==a[o]){s=!1;break}if(s){i=!0;break}}i||(t.push(n),ve.add(this),_e())},createDerivative:function(e,t,n,i){var r=this.constructor.isDerivativeSubsetKey(t)&&t,a=r?null:this.derivativeInfoForDerivativeId(t),s=r?this.getBestLoadedDerivative(e,r):a?this.getLoadedDerivative(a):null;return e&&s&&(n||we(s.geometricLength,e))?s.createResampledDerivative(e,n,i):null},_doPendingDerivativeCreations:function(){var e=this._pendingDerivativeCreations;if(e){for(var t=e.length;t--;){var n=e[t];this.createDerivative.apply(this,n)}this._cleanUpAndOrCancelPendingDerivativeCreations()}},cleanup:function(){var e=arguments;this._cleanUpAndOrCancelPendingDerivativeCreations(),this.__s._$2zl$cleanup.apply(this,e)},__superMap:{_$NY$getBestLoadedDerivative:"getBestLoadedDerivative",_$2zl$cleanup:"cleanup"}},me=0,ve=new w.a;function _e(){be||(be=y.a(ye))}var be=0;function ye(){if(be&&(window.cancelAnimationFrame(be),be=0),!(me>0)&&ve.length){var e=Date.now()+5;do{ve.oneItem._doPendingDerivativeCreations()}while(ve.length&&Date.now()<e);ve.length&&_e()}}function Ie(e){return Math.min(Math.pow(2,Math.ceil(Math.log(e)/Math.log(2))),1.5*Math.pow(2,Math.ceil(Math.log(e/1.5)/Math.log(2))))}function we(e,t){var n=Ie(t);return Ie(e)>=2*n&&(n>fe.thumbSize||!fe.usedLength)}var Se={mixinDependencies:[G,ge]},Ce=n(1133),Oe=function(e){if(null===e)return"";var t=Math.round(e/1e3),n=t%60,i=t/60%60|0,r=t/3600|0;return 0===r&&0===i&&0===n&&(n=1),r?r+":"+Ae(i)+":"+Ae(n):i+":"+Ae(n)},Ae=function(e){return("00"+e).slice(-2)},Ee=n(154),Te=n(83),Me=n(25),De=n(139),Le=n(250),Ne=n(157),Pe=n(158),Re=n(50),xe=n(260),Fe=n(67),ke=n(47),Ve=n(70),je=n(261),Be=n(159);n.d(t,"a",function(){return We}),n.d(t,"b",function(){return He});var Ue=function(){var e=a.a,t=function(t){var n=e.create();try{t(n.resolve.bind(n),n.reject.bind(n))}catch(e){n.reject(e)}return n};return t.all=e.all.bind(e),t.race=e.race.bind(e),t.resolve=e.resolve.bind(e),t.reject=e.reject.bind(e),t}(),We=s.a.extend({mixinDependencies:[g.a,m.a,v.a,je.b,Se,xe.a],staticMembers:{HydrationLevel:o.b("HydrationLevel",{META:3,FULL:7,ALL:99}),Type:o.b("Type",{IMAGE:"image",SCREENSHOT:"screenshot",PANORAMA:"panorama",LIVE_PHOTO:"live-photo",BURST:"burst",SDOF:"sdof",VIDEO:"video",SLOWMO:"slowmo",TIMELAPSE:"time-lapse",AUDIO:"audio",OTHER:"other"}),genericTypeForSpecificType:function(e){switch(e){case this.Type.IMAGE:case this.Type.SCREENSHOT:case this.Type.PANORAMA:case this.Type.LIVE_PHOTO:case this.Type.SDOF:case this.Type.BURST:return this.Type.IMAGE;case this.Type.VIDEO:case this.Type.TIMELAPSE:case this.Type.SLOWMO:case this.Type.AUDIO:return this.Type.VIDEO;case this.Type.OTHER:default:return this.Type.OTHER}},load:function(){var e,t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(e=regeneratorRuntime.mark(function e(){var i,r,a,s,o,l,u,d,h,p,f,g,m,v;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.isForcedFetch,r=void 0!==i&&i,a=n.hydrationLevel,s=void 0===a?We.HydrationLevel.FULL:a,o=n.primaryKeys,l=_.a.getZonePrimaryKeyFromPrimaryKey(o[0]),e.next=6,ke.a.load({primaryKeys:o,isForcedFetch:r,hydrationLevel:s});case 6:return u=c.b(),d=o.map(function(e){return _.a.getPrimaryKeyWithZonePK(l,u.readDataForPrimaryKey(ke.a,e).masterRefRecordName)}),e.next=10,Fe.a.load({primaryKeys:d,isForcedFetch:r,hydrationLevel:s});case 10:for(h=[],p=0,f=o.length;p<f;p++)g=o[p],m=d[p],(v=u.readDataForPrimaryKey(t,g)||t.getRawHash(g,s)).hydrationLevel=s.name,v.asset=g,v.master=m,h[p]=v;return u.loadData(t,h),e.abrupt("return",t.findByPrimaryKeys(o));case 14:case"end":return e.stop()}},e,t)}),function(){var t=e.apply(this,arguments);return new Ue(function(e,n){return function i(r,a){try{var s=t[r](a),o=s.value}catch(e){return void n(e)}if(!s.done)return Ue.resolve(o).then(function(e){i("next",e)},function(e){i("throw",e)});e(o)}("next")})})()},loadKey:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:We.HydrationLevel.FULL;return this.performOperation(Re.a.Media.LoadKey,{parentPK:e,hydrationLevel:t})},findByAssetPK:function(e){return We.find(e)},findOrCreateByAssetPK:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:We.HydrationLevel.FULL,n=We.find(e);if(n)return n;var i="Media: findOrCreateByAssetPK",r=ke.a.find(e);if(r){r.retain(this,i);var a=_.a.getPrimaryKey(r.zone,r.masterRefRecordName),s=Fe.a.find(a);if(r.release(this,i),s){s.retain(this,i);var o=c.b(),l=this.getRawHash(e,t);l.master=a,s.release(this,i),l.asset=e;var u=t!==We.HydrationLevel.FULL;return o.loadData(this,l,u),We.find(l.pk).retain(this,i).autorelease(this,i)}}},getRawHash:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.pk=e,n.hydrationLevel=t.name,n.master=void 0,n.asset=void 0,n},feedbackService:l.b({strong:!0,readOnly:!0,get:function(){var e=c.b();return e&&e.feedbackService}}),FeedbackErrorType:l.b({strong:!0,readOnly:!0,get:function(){var e=c.b();return e&&e.FeedbackErrorType}}),timingService:l.b({strong:!0,readOnly:!0,get:function(){var e=c.b();return e&&e.timingService}}),repairMedia:function(e){var t=Me.a.environment,n=(void 0===t?{}:t).authBag,i=(void 0===n?{}:n).servicesInfo,r=(void 0===i?{}:i).uploadimagews,a=(void 0===r?{}:r).url;if("string"==typeof a&&a.length>0)return this.performOperation(Re.a.Media.Repair,{primaryKeys:e});u.b.debug("Media/Repair: Could not find UploadImageWS webservice to begin repair.")},__QUALIFIED_CLASS_NAME__:"Media"},removeContainerRelationRef:function(e){var t=e.pk,n=c.b(),i=this.getDataHash(),r=i.pk,a=i.containerRelations;a||(a=[]);var s=a.indexOf(t);if(-1===s)return u.b.warn("Unexpected ref mgmt: rm ContainerRelation "+t+" from "+r);var o=a.slice(0);o.splice(s,1);var l={pk:r,containerRelations:o};n.loadData(this.constructor,l,!0)},addContainerRelationRef:function(e){var t=e.pk,n=c.b(),i=this.getDataHash(),r=i.pk,a=i.containerRelations;if(a||(a=[]),-1===a.indexOf(t)){var s=a.slice(0);s.push(t);var o={pk:r,containerRelations:s};n.loadData(this.constructor,o,!0)}},pk:s.c({isPrimaryKey:!0,readOnly:!0}),hydrationLevel:l.b(),master:d.a.toOne({type:Fe.a,strong:!0,readOnly:!0}),asset:d.a.toOne({type:ke.a,strong:!0,readOnly:!0}),primaryMaster:l.b({dependencies:["master"],strong:!0,readOnly:!0,get:Object.assign(function(){return this.master},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])}})}),primaryAsset:l.b({dependencies:["asset"],strong:!0,readOnly:!0,get:Object.assign(function(){return this.asset},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])}})}),date:l.b(h.c("primaryAsset.assetDate")),timeZoneOffset:l.b({dependencies:["primaryAsset","primaryMaster"],readOnly:!0,get:function(){var e=this.primaryAsset,t=this.primaryMaster;if(e&&t){var n=e.timeZoneOffset,i=t.mediaMetaDataEnc;if(!n&&0!==n&&i){var r=i.DateStamp,a=i.TimeStamp,s=i.DateTimeOriginal;if(!r||!a||!s)return;var o=s.split(" ",2),c=o[0],l=o[1];n=-(new Date(r.replace(/:/g,"-")+"T"+a)-new Date(c.replace(/:/g,"-")+"T"+l))/1e3}return n}}}),addedDate:l.b(h.c("primaryAsset.addedDate")),locationLatitude:l.b(h.c("primaryAsset.locationLatitude")),locationLongitude:l.b(h.c("primaryAsset.locationLongitude")),_locationLatitudeReducedPrecision:l.b({readOnly:!0,dependencies:["locationLatitude"],get:Object.assign(function(){var e=this.locationLatitude;return Number.isFinite(e)?e.toFixed(6):void 0},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return Number.isFinite(r)?r.toFixed(6):void 0}})}),_locationLongitudeReducedPrecision:l.b({readOnly:!0,dependencies:["locationLongitude"],get:Object.assign(function(){var e=this.locationLongitude;return Number.isFinite(e)?e.toFixed(6):void 0},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return Number.isFinite(r)?r.toFixed(6):void 0}})}),caption:l.b(h.c("primaryAsset.captionEnc")),specificType:l.b({readOnly:!0,dependencies:["primaryMaster.dataDidChange","primaryAsset.dataDidChange","primaryMaster.dataClassType","primaryMaster.itemType","primaryAsset.isBurst","isLivePhoto","primaryAsset.assetSubtype"],get:Object.assign(function(){var e=this.constructor.Type,t=this.primaryMaster,n=this.primaryAsset;if(!t||!n)return e.OTHER;switch(t.dataClassType){case Pe.a.IMAGE:if(n.isBurst)return e.BURST;if(n.isSDOF)return e.SDOF;switch(n.assetSubtype){case Ne.a.PHOTO_PANORAMA:return e.PANORAMA;case Ne.a.PHOTO_SCREENSHOT:return e.SCREENSHOT;default:return this.isLivePhoto?e.LIVE_PHOTO:e.IMAGE}case Pe.a.MOVIE:switch(n.assetSubtype){case Ne.a.VIDEO_SLOWMO:return e.SLOWMO;case Ne.a.VIDEO_TIMELAPSE:return e.TIMELAPSE;case Ne.a.NONE:default:return e.VIDEO}case Pe.a.AUDIO:return e.AUDIO;case Pe.a.UNKNOWN:return"com.adobe.pdf"===this.getPath("primaryMaster.itemType")?e.IMAGE:e.OTHER;default:return u.b.warn("Unexpected Master DataClassType "+t.dataClassType),e.OTHER}},{__CW__getter:function(e,t,n,i){var r=this.constructor.Type,a=this.primaryMaster,s=this.primaryAsset;if(!a||!s)return r.OTHER;switch(a.dataClassType){case Pe.a.IMAGE:if(s.isBurst)return r.BURST;if(s.isSDOF)return r.SDOF;switch(s.assetSubtype){case Ne.a.PHOTO_PANORAMA:return r.PANORAMA;case Ne.a.PHOTO_SCREENSHOT:return r.SCREENSHOT;default:return i.internalGet(this,t[5+n])?r.LIVE_PHOTO:r.IMAGE}case Pe.a.MOVIE:switch(s.assetSubtype){case Ne.a.VIDEO_SLOWMO:return r.SLOWMO;case Ne.a.VIDEO_TIMELAPSE:return r.TIMELAPSE;case Ne.a.NONE:default:return r.VIDEO}case Pe.a.AUDIO:return r.AUDIO;case Pe.a.UNKNOWN:return"com.adobe.pdf"===i.internalGetPath(this,t[3+n])?r.IMAGE:r.OTHER;default:return u.b.warn("Unexpected Master DataClassType "+a.dataClassType),r.OTHER}}})}),durationString:l.b({readOnly:!0,dependencies:["primaryAsset.duration"],get:Object.assign(function(){var e=this.getPath("primaryAsset.duration");return e?Oe(e):""},{__CW__getter:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return r?Oe(r):""}})}),isEdited:l.b(h.c("primaryAsset.isEdited")),isLivePhoto:l.b(h.c("primaryAsset.isLivePhoto")),isHEVCVideo:l.b(h.c("primaryMaster.isHEVCVideo")),isHEICImage:l.b(h.c("primaryMaster.isHEICImage")),isHdr:l.b({readOnly:!0,dependencies:["primaryAsset.assetHDRType"],get:Object.assign(function(){var e=this.getPath("primaryAsset.assetHDRType");return e&&e!==Le.a.NONE&&e!==Le.a.EV0},{__CW__getter:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return r&&r!==Le.a.NONE&&r!==Le.a.EV0}})}),isSDOF:l.b(h.c("primaryAsset.isSDOF")),type:l.b(h.c("primaryMaster.dataClassType")),subtype:l.b(h.c("primaryAsset.assetSubtype")),genericType:l.b({readOnly:!0,dependencies:["specificType"],get:Object.assign(function(){return this.constructor.genericTypeForSpecificType(this.specificType)},{__CW__getter:function(e,t,n,i){return this.constructor.genericTypeForSpecificType(i.internalGet(this,t[0+n]))}})}),cannotHaveImageDerivative:l.b({readOnly:!0,dependencies:["specificType","genericType"],get:Object.assign(function(){return this.specificType===this.constructor.Type.AUDIO||this.genericType===this.constructor.Type.OTHER},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])===this.constructor.Type.AUDIO||i.internalGet(this,t[1+n])===this.constructor.Type.OTHER}})}),dimensions:l.b({readOnly:!0,dependencies:["primaryMaster.dataDidChange","primaryAsset.dataDidChange","renderableImageDerivativeInfos","areClientDerivativesDirty"],get:Object.assign(function(){var e=this._dimensions_lastRet;e&&I.c.autodisposeInstance(e),this._dimensions_lastRet=null;var t=this.primaryAsset,n=this.primaryMaster;if(!t||!n)return null;var i=I.c.getInstance();if(this._dimensions_lastRet=i,this.areClientDerivativesDirty){var r=this.renderableImageDerivativeInfos,a=r&&r[r.length-1];if(a)return i[0]=a.width,i[1]=a.height,i}else for(var s=t.getDataHash(),o=s;o;o=o===s?n.getDataHash():null)if(i.push.apply(i,He(o,o!==s)),i.length)return i;return this.cannotHaveImageDerivative||u.b.warn("While trying to ascertain dimensions, could not find a single derivative on asset or master. Media PK "+this.pk),i[0]=640,i[1]=400,i},{__CW__getter:function(e,t,n,i){var r=this._dimensions_lastRet;r&&I.c.autodisposeInstance(r),this._dimensions_lastRet=null;var a=this.primaryAsset,s=this.primaryMaster;if(!a||!s)return null;var o=I.c.getInstance();if(this._dimensions_lastRet=o,i.internalGet(this,t[3+n])){var c=this.renderableImageDerivativeInfos,l=c&&c[c.length-1];if(l)return o[0]=l.width,o[1]=l.height,o}else for(var d=a.getDataHash(),h=d;h;h=h===d?s.getDataHash():null)if(o.push.apply(o,He(h,h!==d)),o.length)return o;return this.cannotHaveImageDerivative||u.b.warn("While trying to ascertain dimensions, could not find a single derivative on asset or master. Media PK "+this.pk),o[0]=640,o[1]=400,o}})}),width:l.b({readOnly:!0,dependencies:["dimensions"],get:Object.assign(function(){return this.dimensions[0]},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])[0]}})}),height:l.b({readOnly:!0,dependencies:["dimensions"],get:Object.assign(function(){return this.dimensions[1]},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])[1]}})}),aspectRatio:l.b({readOnly:!0,dependencies:["width","height"],get:Object.assign(function(){return this.width/this.height},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])/i.internalGet(this,t[1+n])}})}),isFavorite:l.b(h.c("primaryAsset.isFavorite")),isHidden:l.b(h.c("primaryAsset.isHidden")),dateExpunged:l.b(h.c("primaryAsset.dateExpunged")),burstCount:l.b({readOnly:!0,dependencies:["burstMedias.length","isBurst"],get:Object.assign(function(){if(!this.isBurst)return 0;var e=this.getPath("burstMedias.length");return e||Ee.b(A.a(this._getBurstCount,this)),e},{__CW__getter:function(e,t,n,i){if(!i.internalGet(this,t[1+n]))return 0;var r=i.internalGetPath(this,t[0+n]);return r||Ee.b(A.a(this._getBurstCount,this)),r}})}),burstMedias:d.a.toMany({type:"(self)"}),isPreparingBurstMediasArray:l.b({defaultValue:0,didChange:function(e){!e&&this._ipbma_isRetained&&(this._ipbma_isRetained=!1,this.autorelease(this,"self-retain for isPreparingBurstMediasArray")),e&&!this._ipbma_isRetained&&(this._ipbma_isRetained=!0,this.retain(this,"self-retain for isPreparingBurstMediasArray"))}}),_decrement_isPreparingBurstMediasArray:Te.a(function(){this.isPreparingBurstMediasArray--}),_getBurstCount:function(){if(!this.isBurst)return a.a.resolve(0);var e=this.constructor.performOperation(Re.a.Media.BurstCount,{burstId:this.primaryAsset.burstId,parentMediaPK:this.pk});return this.isPreparingBurstMediasArray++,e.then(this._decrement_isPreparingBurstMediasArray,this._decrement_isPreparingBurstMediasArray),e},loadBurstMediasForRange:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this.isBurst||0===this.burstCount)return u.b.warn("This media is not a burst."),a.a.resolve([]);for(var i=n,r=this.burstMedias._array,s=e;s<=t&&!i;s++)void 0===r[s]&&(i=!0);if(i){var o=this.constructor.performOperation(Re.a.Media.BurstList,{burstId:this.primaryAsset.burstId,parentMediaPK:this.pk,first:e,last:t});return this.isPreparingBurstMediasArray++,o.then(this._decrement_isPreparingBurstMediasArray,this._decrement_isPreparingBurstMediasArray),o}if(Math.abs(t-e)<this.burstCount){var c=this.burstMedias.storeIds.slice(e,t),l=p.a.createFromStoreIds(c,We);return a.a.resolve(l)}return a.a.resolve(this.burstMedias)},commitBurstPromotionAlterations:function(e){var t=e;if(!Object.keys(t).length)return a.a.resolve();var n=I.c,i=n.getAutodisposingInstance(),r=n.getAutodisposingInstance(),s=n.getAutodisposingInstance(),o=this.burstMedias,l=o&&o.length;if(!l)return a.a.reject();for(var u=0;u<l;u++){var d=o.objectAt(u);if(d){d.retain(this,"preparing to commit burst alterations");var h=d.primaryAsset;if(h){if(h.retain(this,"preparing to commit burst alterations"),(r[u]=i[u]=h.compositeBurstFlags)&De.a.UNKNOWN.value)return a.a.reject();var p=t[d.pk];void 0!==p&&p!==h.isPromotedFromBurst&&(s[u]=p),d.release(this,"preparing to commit burst alterations"),h.release(this,"preparing to commit burst alterations")}}}if(!s.length)return a.a.resolve();for(var f=De.a.NOT_PICKED.value,g=De.a.AUTO_PICKED.value,m=De.a.USER_FAVORITE.value,v=De.a.STACK.value,_=De.a.FIRST_PICKED.value,b=0;b<l;b++){var y=i[b];y&v&&(y&=~v);var w=s[b];!0===w?(y|=m,y&=~f):!1===w&&((y&=~m)&g||(y|=f)),i[b]=y}for(var S=-1,C=0;C<l&&-1===S;C++){var O=i[C];O&_&&!(O&m)&&(S=C)}for(var A=0;A<l&&-1===S;A++){var E=i[A];E&g&&!(E&m)&&(S=A)}for(var T=0;T<l&&-1===S;T++)i[T]&m||(S=T);for(var M=0;M<l&&-1===S;M++)i[M]&_&&(S=M);for(var D=0;D<l&&-1===S;D++)i[D]&g&&(S=D);-1===S&&(S=0),i[S]|=v;for(var L=0;L<l;L++){var N=i[L];N!==r[L]&&(o.objectAt(L).retain(this,"commit burst alterations").autorelease(this,"commit burst alterations").primaryAsset.retain(this,"commit burst alterations").autorelease(this,"commit burst alterations").compositeBurstFlags=N)}return c.b().commit()},isBurst:l.b(h.c("primaryAsset.isBurst")),isPromotedFromBurst:l.b(h.c("primaryAsset.isPromotedFromBurst")),isAutopickedInBurst:l.b(h.c("primaryAsset.isAutopickedInBurst")),_recordLoadTiming:f.f("derivativeDidLoad",function(e){if(e&&!this._hasAlreadySeenFirstDerivative){var t=this.constructor.feedbackService;t&&t.report("derivativeRendered"),this._hasAlreadySeenFirstDerivative=!0,Ge++;var n=this.constructor.timingService;switch(Ge){case 1:n&&n.report&&n.report("Load1");break;case 10:n&&n.report&&n.report("Load10");break;case 100:n&&n.report&&n.report("Load100")}}}),recover:function(){this.primaryAsset.isDeleted=!1},delete:function(){var e=this.primaryAsset;this.isPromotedFromBurst?e.compositeBurstFlags=De.a.NOT_PICKED.value:(e.isBurst&&this.deleteOrPermanentlyDeleteBurst(e,!0),e.isDeleted=!0)},updatePromotedItemsOnExpunge:function(e){e.forEach(function(e){e&&e.primaryAsset&&e.primaryAsset.burstId&&(e.primaryAsset.burstId="",e.primaryAsset.burstFlags=De.a.NOT_IN_BURST,e.primaryAsset.burstFlagsExt=De.a.NOT_IN_BURST,e.primaryAsset.isDeleted||(e.primaryAsset.isDeleted=!0),e.primaryAsset.isExpunged=!0,e.primaryAsset.save())})},updatePromotedItemsOnDelete:function(e){e.forEach(function(e){e&&e.primaryAsset&&e.primaryAsset.burstId&&(e.primaryAsset.isDeleted=!0)})},permanentlyDelete:function(){var e=this.primaryAsset;e.isBurst&&this.deleteOrPermanentlyDeleteBurst(e,!1),e.isExpunged=!0},deleteOrPermanentlyDeleteBurst:function(e,t){var n=this,i=this.burstMedias.length;if(i)return this.loadBurstMediasForRange(0,i-1).then(function(){return t?n.updatePromotedItemsOnDelete(n.burstMedias):n.updatePromotedItemsOnExpunge(n.burstMedias)});this._getBurstCount().then(function(){var e=n.burstMedias.length;return n.loadBurstMediasForRange(0,e-1).then(function(){return t?n.updatePromotedItemsOnDelete(n.burstMedias):n.updatePromotedItemsOnExpunge(n.burstMedias)})})},containerRelations:d.a.toMany({type:Ve.a}),_maintainDirtyDerivativeDimensionsOverride:f.f("areClientDerivativesDirty","dimensions",function(e,t){e?$e[this.id]=t:delete $e[this.id]})}),Ge=0;function He(e,t){var n=$e[e.recordName];if(n)return n;var i=I.c.getAutodisposingInstance();return t&&e.resOriginalWidth?(e.originalOrientation>=5?i.push(e.resOriginalHeight,e.resOriginalWidth):i.push(e.resOriginalWidth,e.resOriginalHeight),i):e.resJPEGFullWidth?(i.push(e.resJPEGFullWidth,e.resJPEGFullHeight),i):e.resJPEGLargeWidth?(i.push(e.resJPEGLargeWidth,e.resJPEGLargeHeight),i):e.resJPEGMedWidth?(i.push(e.resJPEGMedWidth,e.resJPEGMedHeight),i):e.resJPEGThumbWidth?(i.push(e.resJPEGThumbWidth,e.resJPEGThumbHeight),i):i}Be.a.shouldUseH2ForDeriviativeLoading?Ce.a.sharder.configureOrigin({origin:"https://cvws.icloud-content.com",shardCount:1,maxRequestsPerShard:12,applyShardToOrigin:function(){return"https://cvws-h2.icloud-content.com"}}):Ce.a.sharder.configureOrigin({origin:"https://cvws.icloud-content.com",shardCount:3,maxRequestsPerShard:4,applyShardToOrigin:function(e,t){var n=("00"+(t+1)).slice(-3),i=e.indexOf(".");return e.substring(0,i)+"-"+n+e.substring(i)}});var $e={}},function(e,t,n){"use strict";var i=n(775),r=n(1173),a=n(65),s=n(1169),o=n(1178),c=n(1174),l=n(772),u=n(773),d=n(1172),h=n(175),p=n(32),f=n(68),g=n(176),m=n(123),v=n(1175),_=n(1176),b=n(179),y=n(1177),I=n(177),w=n(178),S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function C(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function O(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function A(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var E,T=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];A(this,e);var i=t.length;if(!Array.isArray(t)||i<=1)throw new a.a("Must provide 2 or more types to a union/intersection type",{providedTypes:t});for(var r=0;r<i;r++){var s=t[r];if(!n){if(void 0===s)throw new a.a("Cannot create intersection with undefined",{providedTypes:t,index:r});if(null===s)throw new a.a("Cannot create intersection with null",{providedTypes:t,index:r})}if("any"===s)throw new a.a("Cannot create union/intersection with any",{providedTypes:t,index:r})}this.providedTypes=t}return e.prototype.toString=function(){return this.types||this._processTypes(),this.types.map(function(e){return e.toString()}).join(", ")},e.prototype._processTypes=function(){for(var e=this.providedTypes,t=[],n=[],i=0,r=e.length;i<r;i++){var s=e[i];if(null!=s){var o=D(s);n.push(o);var c=M(o);if(!c)throw new a.a("Cannot get validator for unrecognized type: "+o,{providedTypes:e,types:n,validators:t,index:i});t.push(c)}}this.validators=t,this.types=n},e}();function M(e){var t,n,a=void 0;if("integer"===e)a=N;else if("number"===e)a=L;else if("string"===e)a=m.a;else if("boolean"===e)a=v.a;else if("hash"===e)a=i.a;else if(Object(r.a)(e,T))a=Object(_.a)(e.validate,e);else if(Object(r.a)(e,I.a))n=e,a=function(e){return Object(r.a)(e,w.a)&&n.items.some(function(t){return t.contains(e)})};else if(e.isClass)a=function(e){return function(t){var n;return t.isObject&&((n=t.constructor)===e||n.subclassOf(e))}}(e);else if("function"===(t=void 0===e?"undefined":S(e))||E(e))a=function(e){return function(t){return t instanceof e}}(e);else{if("object"!==t)return;a=function(e){return function(t){return t.hasMixin&&t.hasMixin(e)}}(e)}return function(e){return function(t){return!Object(y.a)(t)||e.call(this,t)}}(a)}function D(e,t){switch(void 0===e&&Object(a.b)('Error defining property "%{key}". You must specify a type.',{property:t,key:t.key}),e){case Number:e="number";break;case String:e="string";break;case Boolean:e="boolean";break;case"object":e=Object;break;case"function":e=Function}return e}function L(e){return Object(b.a)(e)&&!Number.isNaN(e)}function N(e){return(0|e)===e||Number.isInteger(e)}(function(e){function t(n){return A(this,t),C(this,e.call(this,n,!0))}O(t,e),t.prototype.validate=function(e){return this.validators||this._processTypes(),this.validators.some(function(t){return t(e)})},t.prototype.toString=function(){return"union of "+e.prototype.toString.call(this)}})(T),function(e){function t(n){return A(this,t),C(this,e.call(this,n,!1))}O(t,e),t.prototype.validate=function(e){return this.validators||this._processTypes(),this.validators.every(function(t){return t(e)})},t.prototype.toString=function(){return"intersection of "+e.prototype.toString.call(this)}}(T),E="function"!=typeof XMLHttpRequest?function(e){return e.prototype&&e.prototype.constructor}:s.a;var P=n(416),R=n(778),x=n(779),F=n(180),k=n(311);n.d(t,"a",function(){return j}),n.d(t,"c",function(){return W}),n.d(t,"b",function(){return G});var V={},j=p.a.extend(h.a,{staticMembers:{create:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=arguments,r=this.__s._$3IA$create.apply(this,i);return r._originalArgs=t,r},__superMap:{_$3IA$create:"create"},__QUALIFIED_CLASS_NAME__:"Property"},readOnly:!1,defaultValue:void 0,_hasBeenUsed:!1,initializeMember:function(){var e=arguments;return this._hasBeenUsed?this.clone():this.__s._$3kf$initializeMember.apply(this,e)},clone:function(){var e;return(e=this.constructor).create.apply(e,this._originalArgs)},set:null,_transformedSet:null,get:null,_transformedGet:null,setterReturnArray:[],usesBuiltinGet:!1,usesBuiltinSet:!1,isComputedProperty:!1,type:null,typeIsPrimitive:!1,strong:!1,weak:!1,unsafe:!1,reference:"",validators:null,init:function(e){if(Object(i.a)(e)){this.defaultValue=e.defaultValue;var t={};for(var n in e)"defaultValue"!==n&&(t[n]=e[n]);this.__s._$5_D$init.call(this,t)}else this.defaultValue=e,this.__s._$5_D$init.call(this);var a=this.validators;if(a)for(var s=a.length,o=0;o<s;++o){var c=a[o];Object(r.a)(c,k.a)||(a[o]=c.create())}},requiresSupport:G,allowedOnClass:!0,getValue:function(){return this.defaultValue},_ivar:null,_getParamOffset:0,_setParamOffset:0,_callsGetSuper:!1,_callsSetSuper:!1,_validateType:function(){return!0},_manageSwappingValues:function(e,t,n){var i="Strong ref for `"+this.key+"`";Object(g.f)(n,e,i),Object(g.e)(t,e,i)},_referenceId:void 0,wasRegistered:function(e,t,n){var i=arguments;this._hasBeenUsed=!0;var r=this.get;if(r&&r.__CW__getter){var s=r.__superMap,o=this.__superMap;for(var c in s)o[c]="_transformedGet"}var l=this.set;if(l&&l.__CW__setter){var u=l.__superMap,d=this.__superMap;for(var h in u)d[h]="_transformedSet"}this.__s._$7N7$wasRegistered.apply(this,i),n&&this._inheritFromSuperMap(e,n,t),this.writeDependencies||!this.dependencies||this.readOnly||(this.writeDependencies=this.dependencies),n&&this.inheritFrom(n),this._setUpInternalVariables(t),this._synthesizeInternalMethods(),this._setUpReferenceFlag(e,t),this.reference===g.c&&this.defaultValue&&Object(a.b)("A weak-reference property may not provide a default value ('%{key})'.",{key:t,object:e}),this._setUpReferenceManagers(),this._moveDefaultValuesToPrepareForNativeAccessors(e,t),e[G.staticMembers.defaultValuePrefix+t]=e[t],this.setUpNativeAccessors(e,t)},inheritFrom:function(e){this.get||e.usesBuiltinGet||(this.get=e.get),this.set||e.usesBuiltinSet||(this.set=e.set),e.dependencies&&(this.dependencies?this._callsGetSuper&&(this.dependencies=e.dependencies.concat(this.dependencies),this._getParamOffset=e.dependencies.length):this.dependencies=e.dependencies),e.writeDependencies&&(this.writeDependencies?this._callsGetSuper&&(this.writeDependencies=e.writeDependencies.concat(this.writeDependencies),this._setParamOffset=e.writeDependencies.length):this.writeDependencies=e.writeDependencies),e.hasOwnProperty("readOnly")&&!this.hasOwnProperty("readOnly")&&(this.readOnly=e.readOnly),e.hasOwnProperty("strong")&&!this.hasOwnProperty("strong")&&(this.strong=e.strong),e.hasOwnProperty("weak")&&!this.hasOwnProperty("weak")&&(this.weak=e.weak),e.hasOwnProperty("unsafe")&&!this.hasOwnProperty("unsafe")&&(this.unsafe=e.unsafe)},_inheritFromSuperMap:function(e,t,n){var i=e.__s,r=this.__superMap;for(var a in r){var s=r[a];if("get"===s||"_transformedGet"===s)s="_transformedGet",this._callsGetSuper=!0;else{if("set"!==s&&"_transformedSet"!==s)continue;s="_transformedSet",this._callsSetSuper=!0}i[a]=t[s]}},_setUpReferenceFlag:function(e,t){var n=this.strong,i=this.weak,r=this.unsafe;n?(i&&Object(a.b)("Cannot define a property as both strong and weak.",{key:t,object:e}),r&&Object(a.b)("Cannot define a property as both strong and unsafe.",{key:t,object:e}),this.reference=g.a):i?(r&&Object(a.b)("Cannot define a property as both weak and unsafe.",{key:t,object:e}),this.reference=g.c):this.reference=g.b},_setUpReferenceManagers:function(){var e=this.reference;e===g.b||this.typeIsPrimitive?this._manageSwappingValues=s.a:e===g.c&&(this._manageSwappingValues=U,this._setUpWeakRefHashIfNeeded=B)},_setUpInternalVariables:function(e){this._ivar="_"+e},_moveDefaultValuesToPrepareForNativeAccessors:function(e,t){var n=G.staticMembers.defaultValuePrefix;e.hasOwnProperty(t)&&(e[n+t]=e[t])},_synthesizeInternalMethods:function(){if(this._synthesizeAccessors(),this._synthesizeInternalSet(),this._fillSetPathMap(),function(e){var t=e.type;if(null!==t&&"any"!==t){var n=D(t,e);n!==t&&(e.type=n);var i=M(n);if(!i)throw new a.a('Cannot create property "%{key}" with unknown type `%{type}`.',{property:e,key:e.key,type:n});"integer"!==n&&"number"!==n&&"string"!==n&&"boolean"!==n||(e.typeIsPrimitive=!0),e._validateType=i}}(this),this._setUpInternalAccessors(),this.getForObject||this._synthesizeGetForObject(),!this.setForObject){var e=this.writeDependencies;e&&(this.setterReturnArray=new Array(e.length)),this._synthesizeSetForObject()}},_synthesizeAccessors:function(){var e=this.get;if(e){var t=e.__CW__getter||e,n=this._getParamOffset;this._transformedGet=function(e,i,r,a){return t.call(this,e,i,n,a)}}else this.usesBuiltinGet=!0,this._transformedGet=this.get=o.a;var i=this.set;if(i){var r=i.__CW__setter||i,a=this._setParamOffset;this._transformedSet=function(e,t,n,i,s){return r.call(this,e,t,n,a,s)}}else this.usesBuiltinSet=!0,this._transformedSet=this.set=o.a;this.isComputedProperty=!this.usesBuiltinGet||!this.usesBuiltinSet},_fillSetPathMap:function(){var e=this.writeDependencySetPathMap;e||(e=this.writeDependencySetPathMap=[!1]);for(var t=e.length,n=0;n<t;n++)e[n]=e[n]?this.internalSetPath:this.internalSet},initForObject:function(e,t){this._setUpWeakRefHashIfNeeded(e,t)},_setUpWeakRefHashIfNeeded:s.a,setInitialValueForObject:function(e,t,n){void 0!==n&&this.setForObjectReadWrite(e,t,n)},disposeForObject:function(e,t){var n=this._ivar;this._manageSwappingValues(e,e[n]),e[n]=void 0},setUpNativeAccessors:function(e,t){var n=this,i=this.setForObject,r=this.getForObject;Object.defineProperty(e,t,{get:function(e){return r.call(n,this,t)},set:function(e){return i.call(n,this,t,e)},configurable:!0})},_setUpInternalAccessors:s.a,getForObject:null,_synthesizeGetForObject:function(){var e=this.dependencies,t=this._transformedGet,n=this,i=G.staticMembers.defaultValuePrefix+this.key,r=this._ivar;this.getForObject=function(a,s){return a.hasOwnProperty("propertiesAreInitialized")?t.call(a,a[r],e,0,n):a[i]}},setForObject:null,setForObjectReadWrite:null,_synthesizeSetForObject:function(){var e=this.writeDependencies,t=this.setterReturnArray,n=this._transformedSet,i=this,r=this._validateType,s=t.length,o=this.writeDependencySetPathMap;this.clearSetterReturnArray(t);var c=this._ivar,l=G.staticMembers.defaultValuePrefix+this.key;this.setForObjectReadWrite=function(u,d,h){if(u.hasOwnProperty("propertiesAreInitialized")){var p=u[c],f=n.call(u,h,p,t,0,i);r.call(u,f)||Object(a.b)("Type error: cannot set value `%{value}` to property `%{key}` on %{object}.",{object:u,key:d,value:f,setValue:h}),u[c]=f;for(var g=0;g<s;g++)t[g]!==V&&o[g](u,e[g],t[g]);return this._manageSwappingValues(u,p,f),this.clearSetterReturnArray(t),f}u[l]=h},this.readOnly?this.setForObject=function(e,t,n){e.hasOwnProperty("propertiesAreInitialized")?Object(a.b)("Cannot set `"+t+"`: it is read-only.",{key:t,object:e,property:this,value:n}):e[l]=n}:this.setForObject=this.setForObjectReadWrite},clearSetterReturnArray:function(e){for(var t=e.length,n=0;n<t;n++)e[n]=V},internalGet:function(e,t){return e.get(t)},internalGetPath:function(e,t){return e.getPath(t)},_synthesizeInternalSet:function(){var e=this._ivar;this.internalSet=function(t,n,i){return"$value"===n?(t[e]=i,i):t.set(n,i)}},internalSet:null,internalSetPath:function(e,t,n){return e.setPath(t,n)},__superMap:{_$3kf$initializeMember:"initializeMember",_$5_D$init:"init",_$7N7$wasRegistered:"wasRegistered"}});function B(e,t){var n=e._weakReferenceTokens;n||(n=e._weakReferenceTokens={}),n[t]=f.b}function U(e,t,n){var i=this.key,r=e._weakReferenceTokens,a=r[i];Object(g.h)(t,a);var s=Object(g.g)(n,e,e.weaklyReferencedObjectWasDisposed,i);r[i]=s}var W=function(e){return j.define.apply(j,arguments)},G={mixinDependencies:[F.a,P.a],staticMembers:{get:Q,set:q,setPath:z,getPath:K,getPropertiesAsObject:Y,setPropertiesWithObject:Z,getPropertiesAsArray:J,setPropertiesWithArrays:X,weaklyReferencedObjectWasDisposed:ee,_weakReferenceTokens:null,initializeClass:function(){this.__s._$Dzq$initializeClass.call(this),H.call(this)},initializeInstance:function(){this.__s._$E2H$initializeInstance.call(this),$.call(this)},defaultValuePrefix:"__CW__",propertiesAreInitialized:!1,__superMap:{_$Dzq$initializeClass:"initializeClass",_$E2H$initializeInstance:"initializeInstance"}},initializeClass:function(){this.__s._$EAl$initializeClass.call(this),H.call(this)},initializeInstance:function(){this.__s._$EDl$initializeInstance.call(this),$.call(this)},dispose:function(){var e,t=arguments,n=this._properties;for(e in n)n[e].disposeForObject(this,e);this.__s._$EOs$dispose.apply(this,t)},get:Q,set:q,setPath:z,getPath:K,getPropertiesAsObject:Y,setPropertiesWithObject:Z,getPropertiesAsArray:J,setPropertiesWithArrays:X,weaklyReferencedObjectWasDisposed:ee,_weakReferenceTokens:null,propertiesAreInitialized:!1,beginBatchSet:function(){return R.a.begin(this)},__superMap:{_$EAl$initializeClass:"initializeClass",_$EDl$initializeInstance:"initializeInstance",_$EOs$dispose:"dispose"}};function H(){this._properties=this.getMetadataByType(j)}function $(){var e,t,n=this.getMetadataByType(j),i=G.staticMembers.defaultValuePrefix;for(e in n){var r=n[e];r.initForObject&&r.initForObject(this,e)}for(e in this.propertiesAreInitialized=!0,n){var a=n[e];t=this[i+e],Object(c.a)(t)&&(t=t.call(this)),t===x.a&&(t=this),a.setInitialValueForObject&&a.setInitialValueForObject(this,e,t)}}function z(e,t){var n=Object(l.a)(e,this);return n||Object(a.b)("cannot call set on null or undefined object",{object:this,path:e,value:t}),function(e,t,n){e&&(e[t]=n)}(n,Object(u.a)(e),t),this}function K(e){return Object(d.a)(this,e)}function Q(e){var t=this._properties[e];return t?t.getForObject(this,e):this[e]}function q(e,t){var n=this._properties[e];return n?n.setForObject(this,e,t):this[e]=t,this}function Y(){for(var e={},t=0;t<arguments.length;t++)e[arguments[t]]=this.get(arguments[t]);return e}function Z(e){for(var t in e)e.hasOwnProperty(t)&&this.set(t,e[t]);return this}function J(){return Array.prototype.map.call(arguments,this.get,this)}function X(e,t){e.length>t.length&&Object(a.b)("Not enough values to set");for(var n=0;n<e.length;n++)this.set(e[n],t[n]);return this}function ee(e,t){t.set(this,e,null)}},,function(e,t,n){var i=n(27),r=n(230);e.exports=n(26)?function(e,t,n){return i.f(e,t,r(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var i=n(15),r=n(43),a=n(48),s=n(231)("src"),o=Function.toString,c=(""+o).split("toString");n(55).inspectSource=function(e){return o.call(e)},(e.exports=function(e,t,n,o){var l="function"==typeof n;l&&(a(n,"name")||r(n,"name",t)),e[t]!==n&&(l&&(a(n,s)||r(n,s,e[t]?""+e[t]:c.join(String(t)))),e===i?e[t]=n:o?e[t]?e[t]=n:r(e,t,n):(delete e[t],r(e,t,n)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[s]||o.call(this)})},function(e,t,n){var i=n(3),r=n(18),a=n(61),s=/"/g,o=function(e,t,n,i){var r=String(a(e)),o="<"+t;return""!==n&&(o+=" "+n+'="'+String(i).replace(s,"&quot;")+'"'),o+">"+r+"</"+t+">"};e.exports=function(e,t){var n={};n[e]=t(o),i(i.P+i.F*r(function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}),"String",n)}},function(e,t,n){"use strict";n.d(t,"b",function(){return g}),n.d(t,"a",function(){return b}),n.d(t,"c",function(){return A}),n.d(t,"h",function(){return E}),n.d(t,"g",function(){return T}),n.d(t,"i",function(){return M}),n.d(t,"f",function(){return D}),n.d(t,"d",function(){return L}),n.d(t,"e",function(){return N});var i=n(208),r=n(80),a=n(41),s=n(181),o=n(65),c=n(154),l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},d=function(e,t){this.instance=e,this.ownerPool=t};Object.assign(d.prototype=Object.create(null),{instance:void 0,ownerPool:void 0,isDisposed:!0,isSlatedForAutodispose:!1,retainCount:0,retain:function(){this.retainCount++},release:function(){0==--this.retainCount&&this.ownerPool.disposeInstance(this.instance)},autorelease:function(){i.b(this)}});var h=new WeakMap,p={retainInstance:function(e){h.get(e).retain()},releaseInstance:function(e){h.get(e).release()},autoreleaseInstance:function(e){h.get(e).autorelease()}},f=u({staticMembers:u({},p)},p),g=r.a.extend(f,{_desiredClass:void 0,_isDesiredClassCWClass:void 0,_pool:void 0,activeInstanceCount:a.c({readOnly:!0,get:function(){return this._activeInstanceCount}}),_activeInstanceCount:0,pooledInstanceCount:a.c({readOnly:!0,get:function(){return this._pool.length}}),init:function(e){this._pool=[],this.__s._$pu$init.call(this),this._desiredClass=e,this._isDesiredClassCWClass=s.a(e)},getInstance:function(){var e=this._pool.pop(),t=void 0;return e?t=h.get(e):(e=this.createInstance(),t=new d(e,this),h.set(e,t)),t.isDisposed=!1,this._activeInstanceCount++,e},getAutodisposingInstance:function(){var e=this.getInstance();return this.autodisposeInstance(e),e},autodisposeInstance:function(e){var t=h.get(e);t.isSlatedForAutodispose||(t.isSlatedForAutodispose=!0,m.push(e),v||(v=Object(c.b)(_)))},createInstance:function(){return this._isDesiredClassCWClass?this._desiredClass.create():new this._desiredClass},disposeInstance:function(e){var t=h.get(e);t.retainCount&&o.b("Manually disposing ref-counted instance to pool: "+this),t.isSlatedForAutodispose&&o.b("Manually disposing auto-disposing instance to pool: "+this),t.isDisposed&&o.b("Over-disposing to pool: "+this),t.isDisposed=!0,this._activeInstanceCount--,this._pool.push(e)},__superMap:{_$pu$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"Pool"}}),m=[],v=null,_=function(){for(var e=m.length;e--;){var t=m[e],n=h.get(t),i=n.ownerPool;n.isSlatedForAutodispose=!1,i.disposeInstance(t)}m.length=0,v=null},b=g.extend({createInstance:function(){return[]},getInstance:function(){var e=arguments,t=this.__s._$20x$getInstance.apply(this,e);return t.length&&o.b("ArrayPool#getInstance is returning an array of length > 0. This indicates usage of a disposed instance."),t},disposeInstance:function(e){var t=arguments;this.__s._$24q$disposeInstance.apply(this,t),e.length=0},getInstanceFromSlice:function(e,t,n){var i=e.length,r=void 0===t?0:t,a=void 0===n?i:n;r<0&&(r=Math.max(i+r,0)),a<0&&(a=Math.max(i+a,0));for(var s=this.getInstance(),o=r;o<a&&o<i;o++)s.push(e[o]);return s},getAutodisposingInstanceFromSlice:function(){var e=this.getInstanceFromSlice.apply(this,arguments);return this.autodisposeInstance(e),e},getInstanceFromParams:function(){for(var e=this.getInstance(),t=0,n=arguments.length;t<n;t++)e[t]=arguments[t];return e},getAutodisposingInstanceFromParams:function(){var e=this.getInstanceFromParams.apply(this,arguments);return this.autodisposeInstance(e),e},getInstanceFromMap:function(e,t,n){for(var i=this.getInstance(),r=0,a=e.length;r<a;r++)i.push(t.call(n,e[r],r));return i},getAutodisposingInstanceFromMap:function(){var e=this.getInstanceFromMap.apply(this,arguments);return this.autodisposeInstance(e),e},getInstanceFromFilter:function(e,t,n){for(var i=this.getInstance(),r=0,a=e.length;r<a;r++){var s=e[r];t.call(n,s,r)&&i.push(s)}return i},getAutodisposingInstanceFromFilter:function(){var e=this.getInstanceFromFilter.apply(this,arguments);return this.autodisposeInstance(e),e},getInstanceFromUniquesOfParams:function(){for(var e=this.getInstance(),t=M.getInstance(),n=0,i=0,r=arguments.length;n<r;n++){var a=arguments[n];t.has(a)||(t.add(a),e[i++]=a)}return M.disposeInstance(t),e},getAutodisposingInstanceFromUniquesOfParams:function(){var e=this.getInstanceFromUniquesOfParams.apply(this,arguments);return this.autodisposeInstance(e),e},getInstanceFromUniquesOfArray:function(e){return this.getInstanceFromUniquesOfParams.apply(this,e)},getAutodisposingInstanceFromUniquesOfArray:function(){var e=this.getInstanceFromUniquesOfArray.apply(this,arguments);return this.autodisposeInstance(e),e},__superMap:{_$20x$getInstance:"getInstance",_$24q$disposeInstance:"disposeInstance"},staticMembers:{__QUALIFIED_CLASS_NAME__:"ArrayPool"}}),y=g.extend({createInstance:function(){return{}},disposeInstance:function(e){var t=arguments;for(var n in this.__s._$2x1$disposeInstance.apply(this,t),e)e.hasOwnProperty(n)&&delete e[n]},getInstanceWithProperties:function(){for(var e=this.getInstance(),t=0,n=arguments.length;t<n;t+=2)e[arguments[t]]=arguments[t+1];return e},getAutodisposingInstanceWithProperties:function(){var e=this.getInstanceWithProperties.apply(this,arguments);return this.autodisposeInstance(e),e},getInstanceFromObject:function(e){var t=this.getInstance(),n=arguments.length,i="object"===l(arguments[1]);if(i||n>2)for(var r=i?0:1,a=i?arguments[1]:arguments,s=r,o=a.length;s<o;s++){var c=a[s];t[c]=e[c]}else for(var u in e)e.hasOwnProperty(u)&&(t[u]=e[u]);return t},getAutodisposingInstanceFromObject:function(){var e=this.getInstanceFromObject.apply(this,arguments);return this.autodisposeInstance(e),e},__superMap:{_$2x1$disposeInstance:"disposeInstance"},staticMembers:{__QUALIFIED_CLASS_NAME__:"ObjectPool"}}),I=g.extend({createInstance:function(){return new Map},disposeInstance:function(e){var t=arguments;this.__s._$3Nt$disposeInstance.apply(this,t),e.clear()},__superMap:{_$3Nt$disposeInstance:"disposeInstance"},staticMembers:{__QUALIFIED_CLASS_NAME__:"MapPool"}}),w=g.extend({createInstance:function(){return new Set},disposeInstance:function(e){var t=arguments;this.__s._$3Sm$disposeInstance.apply(this,t),e.clear()},getInstanceFromParams:function(){for(var e=this.getInstance(),t=0,n=arguments.length;t<n;t++)e.add(arguments[t]);return e},getAutodisposingInstanceFromParams:function(){var e=this.getInstanceFromParams.apply(this,arguments);return this.autodisposeInstance(e),e},getInstanceFromArray:function(e){return this.getInstanceFromParams.apply(this,e)},getAutodisposingInstanceFromArray:function(){var e=this.getInstanceFromArray.apply(this,arguments);return this.autodisposeInstance(e),e},__superMap:{_$3Sm$disposeInstance:"disposeInstance"},staticMembers:{__QUALIFIED_CLASS_NAME__:"SetPool"}}),S=g.extend({createInstance:function(){return new Image},disposeInstance:function(e){var t=arguments;this.__s._$3ho$disposeInstance.apply(this,t),e.removeAttribute("src")},__superMap:{_$3ho$disposeInstance:"disposeInstance"},staticMembers:{__QUALIFIED_CLASS_NAME__:"ImagePool"}}),C=g.extend({createInstance:function(){return document.createElement("canvas")},disposeInstance:function(e){var t=arguments;this.__s._$3ur$disposeInstance.apply(this,t),e.width=e.height=0},getInstanceAtSize:function(e,t){var n=this.getInstance();return n.width=e,n.height=t,n},getAutodisposingInstanceAtSize:function(){var e=this.getInstanceAtSize.apply(this,arguments);return this.autodisposeInstance(e),e},getInstanceFromImage:function(e,t,n){var i=void 0,r=void 0,a=2===arguments.length?t:void 0;a?(i=Math.round(a*(e.naturalWidth||e.width)),r=Math.round(a*(e.naturalHeight||e.height))):(i=t||e.naturalWidth||e.width,r=n||e.naturalHeight||e.height);var s=this.getInstanceAtSize(i,r);return s.getContext("2d").drawImage(e,0,0,i,r),s},getAutodisposingInstanceFromImage:function(){var e=this.getInstanceFromImage.apply(this,arguments);return this.autodisposeInstance(e),e},__superMap:{_$3ur$disposeInstance:"disposeInstance"},staticMembers:{__QUALIFIED_CLASS_NAME__:"CanvasPool"}}),O=g.extend({createInstance:function(){return document.createElement("div")},disposeInstance:function(e){var t=arguments;this.__s._$4Jt$disposeInstance.apply(this,t),e.style.cssText&&(e.style.cssText=""),e.className&&(e.className="");var n=e.parentNode;n&&n.removeChild(e)},__superMap:{_$4Jt$disposeInstance:"disposeInstance"},staticMembers:{__QUALIFIED_CLASS_NAME__:"DivPool"}}),A=b.create(),E=y.create(),T=I.create(),M=w.create(),D=S.create(),L=C.create(),N=O.create()},function(e,t,n){"use strict";var i=n(169),r=n(34),a=n(36),s=n(145),o=n(139),c=n(250),l=n(264),u=n(157),d=n(177),h=d.b("AssetVideoComplementVisibilityState",{DEFAULT:0,HIDDEN:1,EVALUATED:2,EXPLICIT:4,FULL_EDITING_SUPPORT:8}),p=d.b("FigEXIFCustomRenderedValue",{NotCustom:0,Custom:1,HDRImage:2,HDRPlusEV0_HDRImage:3,HDRPlusEV0_EV0Image:4,PanoramaImage:6,SDOFImage:7,SDOFPlusOriginal_SDOFImage:8,SDOFPlusOriginal_OriginalImage:9}),f=d.b("LivePhotoEffectType",{BOUNCE:"bounce",EXPOSURE:"exposure",LIVE:"live",LOOP:"loop"}),g=n(330),m=n(261),v=n(260),_=n(109),b=n(89);n.d(t,"a",function(){return y});var y=_.a.extend(g.a,v.a,m.a,{staticMembers:{CK_RECORD_TYPE:"CPLAsset",isContentDifferent:function(e,t){for(var n=["resJPEGFullFingerprint","resJPEGMedFingerprint","resJPEGThumbFingerprint","resVidFullFingerprint","resVidMedFingerprint","resVidSmallFingerprint","resSidecarFingerprint"],i=0,r=n.length;i<r;i++){var a=n[i];if(e[a]!==t[a])return!0}return!1},getDataValuesFromServiceValues:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=arguments,n=this.__s._$is$getDataValuesFromServiceValues.apply(this,t),i=n._locationV2Enc,r=n._locationEnc,a=void 0===r?i:r;if(void 0!==a){var s=a.lat,o=a.lon;void 0!==s&&void 0!==o&&(n.locationLatitude=parseFloat(s),n.locationLongitude=parseFloat(o))}return n._receiptTimestamp=Date.now(),n},__superMap:{_$is$getDataValuesFromServiceValues:"getDataValuesFromServiceValues"},__QUALIFIED_CLASS_NAME__:"Asset"},masterRefRecordName:i.h({serviceKey:"masterRef",serviceSubKey:"recordName",readOnly:!0}),_adjustmentRenderType:i.e({serviceKey:"adjustmentRenderType",readOnly:!0}),adjustmentRenderTypes:r.b({readOnly:!0,dependencies:["_adjustmentRenderType"],get:Object.assign(function(){return I(this._adjustmentRenderType||0,4).map(function(e){return s.a.getItemForValue(e)})},{__CW__getter:function(e,t,n,i){return I(i.internalGet(this,t[0+n])||0,4).map(function(e){return s.a.getItemForValue(e)})}})}),livePhotoEffectType:r.b({readOnly:!0,dependencies:["adjustmentRenderTypes"],get:function(){if(this.isLivePhoto)return function(e){switch(e){case s.a.AUTOLOOP:return f.LOOP;case s.a.LONG_EXPOSURE:return f.EXPOSURE;case s.a.MIRROR:return f.BOUNCE;default:return f.LIVE}}(this.adjustmentRenderTypes[0])}}),assetDate:i.e({readOnly:!0}),addedDate:i.e({readOnly:!0}),dateExpunged:i.e({readOnly:!0,defaultValue:1/0}),isFavorite:i.b(),isHidden:i.b(),orientation:i.j(l.a,{readOnly:!0,defaultValue:l.a.NORMAL}),duration:i.e({readOnly:!0}),_assetSubtype:i.j(u.a,{serviceKey:"assetSubtype",readOnly:!0}),_assetSubtypeV2:i.j(u.a,{serviceKey:"assetSubtypeV2",readOnly:!0}),assetSubtype:Object(b.d)(["_assetSubtypeV2","_assetSubtype"],u.a.NONE),assetHDRType:i.j(c.a,{readOnly:!0}),burstFlags:i.e(),burstFlagsExt:i.e(),burstId:i.e(),isBurst:r.b({readOnly:!0,dependencies:["burstId","compositeBurstFlags"],get:Object.assign(function(){return!!this.burstId&&Boolean(this.compositeBurstFlags&o.a.STACK.value)},{__CW__getter:function(e,t,n,i){return!!i.internalGet(this,t[0+n])&&Boolean(i.internalGet(this,t[1+n])&o.a.STACK.value)}})}),compositeBurstFlags:r.b({dependencies:["burstFlags","burstFlagsExt"],get:Object.assign(function(){return 31&this.burstFlags|2147483616&this.burstFlagsExt},{__CW__getter:function(e,t,n,i){return 31&i.internalGet(this,t[0+n])|2147483616&i.internalGet(this,t[1+n])}}),set:Object.assign(function(e){this.burstFlags=2147483616&this._burstFlags|31&e,this.burstFlagsExt=31&this._burstFlagsExt|2147483616&e},{__CW__setter:function(e,t,n,i,r){n[0+i]=2147483616&this._burstFlags|31&e,n[1+i]=31&this._burstFlagsExt|2147483616&e}}),writeDependencySetPathMap:["false","false"]}),isPromotedFromBurst:r.b({readOnly:!0,dependencies:["compositeBurstFlags"],get:Object.assign(function(){return Boolean(this.compositeBurstFlags&o.a.USER_FAVORITE.value)},{__CW__getter:function(e,t,n,i){return Boolean(i.internalGet(this,t[0+n])&o.a.USER_FAVORITE.value)}})}),isAutopickedInBurst:r.b({readOnly:!0,dependencies:["compositeBurstFlags"],get:Object.assign(function(){return Boolean(this.compositeBurstFlags&o.a.AUTO_PICKED.value)},{__CW__getter:function(e,t,n,i){return Boolean(i.internalGet(this,t[0+n])&o.a.AUTO_PICKED.value)}})}),burstTypes:r.b({readOnly:!0,dependencies:["burstFlags","burstFlagsExt"],get:function(){var e=this.burstFlags,t=this.burstFlagsExt,n=[];return e&&(n=n.concat(this._burstFlagsTypes)),t&&(n=n.concat(this._burstFlagsExtTypes)),n}}),_setBurstFlagValues:a.f("burstFlags","burstFlagsExt",function(e,t){this._burstFlags=e,this._burstFlagsExt=t}),_setCompositeBurstFlagValue:a.f("compositeBurstFlags",function(e){this._compositeBurstFlags=e}),_burstFlagsTypes:r.b({readOnly:!0,dependencies:["burstFlags"],get:Object.assign(function(){return I(this.burstFlags,6)},{__CW__getter:function(e,t,n,i){return I(i.internalGet(this,t[0+n]),6)}})}),_burstFlagsExtTypes:r.b({readOnly:!0,dependencies:["burstFlagsExt"],get:Object.assign(function(){return I(this.burstFlagsExt,6)},{__CW__getter:function(e,t,n,i){return I(i.internalGet(this,t[0+n]),6)}})}),promoteBurstAsset:function(){if(this.isBurst&&this.burstFlags){var e=this._burstFlagsTypes.filter(function(e){return e!==o.a.STACK.value}).concat([o.a.USER_FAVORITE.value]);this.burstFlags=e.reduce(function(e,t){return e|t})}},captionEnc:i.l(),_locationEnc:i.i({serviceKey:"locationEnc"}),_locationV2Enc:i.i({serviceKey:"locationV2Enc"}),locationLatitude:i.e({readOnly:!0}),locationLongitude:i.e({readOnly:!0}),adjustmentType:i.e({readOnly:!0}),isEdited:r.b({readOnly:!0,dependencies:["resJPEGFullResDownloadUrl","resJPEGLargeResDownloadUrl","resJPEGMedResDownloadUrl","resJPEGThumbResDownloadUrl","resVidFullResDownloadUrl","resVidMedResDownloadUrl","resVidSmallResDownloadUrl","resSidecarResDownloadUrl"],get:Object.assign(function(){return!!(this.resJPEGFullResDownloadUrl||this.resJPEGLargeResDownloadUrl||this.resJPEGMedResDownloadUrl||this.resJPEGThumbResDownloadUrl||this.resVidFullResDownloadUrl||this.resVidMedResDownloadUrl||this.resVidSmallResDownloadUrl||this.resSidecarResDownloadUrl)},{__CW__getter:function(e,t,n,i){return!!(i.internalGet(this,t[0+n])||i.internalGet(this,t[1+n])||i.internalGet(this,t[2+n])||i.internalGet(this,t[3+n])||i.internalGet(this,t[4+n])||i.internalGet(this,t[5+n])||i.internalGet(this,t[6+n])||i.internalGet(this,t[7+n]))}})}),timeZoneOffset:i.e({readOnly:!0,type:"integer"}),isLivePhoto:r.b({readOnly:!0,dependencies:["vidComplDurValue"],get:Object.assign(function(){return this.vidComplDurValue>0},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])>0}})}),livePhotoKeyFrameDisplayTime:r.b({readOnly:!0,dependencies:["vidComplDispValue","vidComplDispScale"],get:Object.assign(function(){return this.vidComplDispValue/this.vidComplDispScale},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])/i.internalGet(this,t[1+n])}})}),livePhotoDuration:r.b({readOnly:!0,dependencies:["vidComplDurValue","vidComplDurScale"],get:Object.assign(function(){return this.vidComplDurValue/this.vidComplDurScale},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])/i.internalGet(this,t[1+n])}})}),vidComplDurValue:i.e({readOnly:!0}),vidComplDurScale:i.e({readOnly:!0}),vidComplDispValue:i.e({readOnly:!0}),vidComplDispScale:i.e({readOnly:!0}),vidComplVisibilityState:i.e({readOnly:!0}),isLivePhotoPlayEnabled:r.b({readOnly:!0,dependencies:["vidComplVisibilityState"],get:Object.assign(function(){var e=this.vidComplVisibilityState&h.FULL_EDITING_SUPPORT.value,t=this.vidComplVisibilityState&h.EXPLICIT.value,n=this.vidComplVisibilityState&h.HIDDEN.value;return e?!t:!n},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n])&h.FULL_EDITING_SUPPORT.value,a=i.internalGet(this,t[0+n])&h.EXPLICIT.value,s=i.internalGet(this,t[0+n])&h.HIDDEN.value;return r?!a:!s}})}),isSDOF:r.b({readOnly:!0,dependencies:["customRenderedValue","adjustmentRenderTypes"],get:Object.assign(function(){var e=this.customRenderedValue,t=-1!==this.adjustmentRenderTypes.indexOf(s.a.PORTRAIT);return e===p.SDOFImage||e===p.SDOFPlusOriginal_SDOFImage||t},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=-1!==i.internalGet(this,t[1+n]).indexOf(s.a.PORTRAIT);return r===p.SDOFImage||r===p.SDOFPlusOriginal_SDOFImage||a}})}),isSDOFOriginal:r.b({readOnly:!0,dependencies:["customRenderedValue"],get:Object.assign(function(){return this.customRenderedValue===p.SDOFPlusOriginal_OriginalImage},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])===p.SDOFPlusOriginal_OriginalImage}})}),customRenderedValue:i.j(p,{readOnly:!0})});function I(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32;if(e<2)return[e];for(var n=[],i=0;i<t;i++){var r=1<<i;e&r&&n.push(r)}return n}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){"use strict";var i=n(65),r={staticMembers:{init:function(e){return this.isAbstract&&!this.hasOwnProperty("isAbstract")&&(this.isAbstract=!1),this.__s._$EB$init.call(this,e)},isAbstract:!0,__superMap:{_$EB$init:"init"}},init:function(e){this.constructor.isAbstract?Object(i.b)("this class cannot be instantiated because it is abstract"):this.__s._$KL$init.call(this,e)},__superMap:{_$KL$init:"init"}},a=n(32);n.d(t,"a",function(){return s}),n.d(t,"b",function(){return c});var s={mixinDependencies:[r,a.b],initializeClass:function(){var e=o(this),t=this.constructor;t.isAbstract=!!e,t.missingRequires=e,this.__s._$uN$initializeClass.call(this)},staticMembers:{initializeClass:function(){var e=o(this);this.isAbstract=this.isAbstract||!!e,this.missingRequires+=e,this.__s._$12W$initializeClass.call(this)},__superMap:{_$12W$initializeClass:"initializeClass"}},init:function(e){this.constructor.isAbstract?Object(i.b)(this+" cannot be instantiated because it is abstract. Missing keys: "+this.constructor.missingRequires):this.__s._$18v$init.call(this,e)},__superMap:{_$uN$initializeClass:"initializeClass",_$18v$init:"init"}};function o(e){var t=e.getMetadataByType(c),n="";for(var i in t)t[i].validate(e,i)||(n+="\n    "+i);return n}var c=a.a.extend({validate:function(e,t){return t in e},requiresSupport:s,isOnlyMetadataForKey:!1,allowedOnClass:!0,staticMembers:{__QUALIFIED_CLASS_NAME__:"Required"}})},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=n(177).b("CPLOperationTypes",function(e){e("Media",function(e){e("LoadKey"),e("BatchLoadKey"),e("BurstCount"),e("BurstList"),e("Repair")}),e("Container",function(e){e("BatchLoad"),e("CountItemsInIndex")})})},function(e,t,n){var i=n(274),r=n(61);e.exports=function(e){return i(r(e))}},function(e,t,n){var i=n(275),r=n(230),a=n(51),s=n(60),o=n(48),c=n(440),l=Object.getOwnPropertyDescriptor;t.f=n(26)?l:function(e,t){if(e=a(e),t=s(t,!0),c)try{return l(e,t)}catch(e){}if(o(e,t))return r(!i.f.call(e,t),e[t])}},function(e,t,n){var i=n(48),r=n(31),a=n(370)("IE_PROTO"),s=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=r(e),i(e,a)?e[a]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?s:null}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n(1174),r=n(49).b.extend({requiredKey:null,validate:function(e,t){if(this._validating)return this._validating=!1,!1;this._validating=!0;var n,r=e[t];if(Object(i.a)(r)&&r!==this.default)return this._validating=!1,!0;if(t=this.requiredKey||t,Array.isArray(t)){n=!0;for(var a=t.length,s=0;s<a;s++)n=n&&this._validate(e,t[s])}else n=this._validate(e,t);return this._validating=!1,n},_validating:!1,_validate:function(e,t){var n=e.getMetadataByType(r)[t],a=e[t];return n?n.validate(e,t):Object(i.a)(a)},getValue:function(){return this.default},default:void 0,staticMembers:{__QUALIFIED_CLASS_NAME__:"RequiredMethod"}})},function(e,t){var n=e.exports={version:"2.5.7"};"number"==typeof __e&&(__e=n)},function(e,t,n){var i=n(35);e.exports=function(e,t,n){if(i(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,r){return e.call(t,n,i,r)}}return function(){return e.apply(t,arguments)}}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){"use strict";var i=n(18);e.exports=function(e,t){return!!e&&i(function(){t?e.call(null,function(){},1):e.call(null)})}},function(e,t,n){"use strict";var i=n(172);i.b(i.c(),{"Status.LastUpdated":"Updated %{lastUpdated}","Media.Count.0.0.0.0":"0 Photos","Media.Count.0.0.0.1":"0 Photos (1 Remaining)","Media.Count.0.0.0.2":"0 Photos (2 Remaining)","Media.Count.0.0.0.More":"0 Photos (%{remainingCount} Remaining)","Media.Count.0.0.1.0":"1 Other Item","Media.Count.0.0.1.1":"1 Other Item (1 Remaining)","Media.Count.0.0.1.2":"1 Other Item (2 Remaining)","Media.Count.0.0.1.More":"1 Other Item (%{remainingCount} Remaining)","Media.Count.0.0.2.0":"2 Other Items","Media.Count.0.0.2.1":"2 Other Items (1 Remaining)","Media.Count.0.0.2.2":"2 Other Items (2 Remaining)","Media.Count.0.0.2.More":"2 Other Items (%{remainingCount} Remaining)","Media.Count.0.0.More.0":"%{otherItemsCount} Other Items","Media.Count.0.0.More.1":"%{otherItemsCount} Other Items (1 Remaining)","Media.Count.0.0.More.2":"%{otherItemsCount} Other Items (2 Remaining)","Media.Count.0.0.More.More":"%{otherItemsCount} Other Items (%{remainingCount} Remaining)","Media.Count.0.1.0.0":"1 Video","Media.Count.0.1.0.1":"1 Video (1 Remaining)","Media.Count.0.1.0.2":"1 Video (2 Remaining)","Media.Count.0.1.0.More":"1 Video (%{remainingCount} Remaining)","Media.Count.0.1.1.0":"1 Video, 1 Other Item","Media.Count.0.1.1.1":"1 Video, 1 Other Item (1 Remaining)","Media.Count.0.1.1.2":"1 Video, 1 Other Item (2 Remaining)","Media.Count.0.1.1.More":"1 Video, 1 Other Item (%{remainingCount} Remaining)","Media.Count.0.1.2.0":"1 Video, 2 Other Items","Media.Count.0.1.2.1":"1 Video, 2 Other Items (1 Remaining)","Media.Count.0.1.2.2":"1 Video, 2 Other Items (2 Remaining)","Media.Count.0.1.2.More":"1 Video, 2 Other Items (%{remainingCount} Remaining)","Media.Count.0.1.More.0":"1 Video, %{otherItemsCount} Other Items","Media.Count.0.1.More.1":"1 Video, %{otherItemsCount} Other Items (1 Remaining)","Media.Count.0.1.More.2":"1 Video, %{otherItemsCount} Other Items (2 Remaining)","Media.Count.0.1.More.More":"1 Video, %{otherItemsCount} Other Items (%{remainingCount} Remaining)","Media.Count.0.2.0.0":"2 Videos","Media.Count.0.2.0.1":"2 Videos (1 Remaining)","Media.Count.0.2.0.2":"2 Videos (2 Remaining)","Media.Count.0.2.0.More":"2 Videos (%{remainingCount} Remaining)","Media.Count.0.2.1.0":"2 Videos, 1 Other Item","Media.Count.0.2.1.1":"2 Videos, 1 Other Item (1 Remaining)","Media.Count.0.2.1.2":"2 Videos, 1 Other Item (2 Remaining)","Media.Count.0.2.1.More":"2 Videos, 1 Other Item (%{remainingCount} Remaining)","Media.Count.0.2.2.0":"2 Videos, 2 Other Items","Media.Count.0.2.2.1":"2 Videos, 2 Other Items (1 Remaining)","Media.Count.0.2.2.2":"2 Videos, 2 Other Items (2 Remaining)","Media.Count.0.2.2.More":"2 Videos, 2 Other Items (%{remainingCount} Remaining)","Media.Count.0.2.More.0":"2 Videos, %{otherItemsCount} Other Items","Media.Count.0.2.More.1":"2 Videos, %{otherItemsCount} Other Items (1 Remaining)","Media.Count.0.2.More.2":"2 Videos, %{otherItemsCount} Other Items (2 Remaining)","Media.Count.0.2.More.More":"2 Videos, %{otherItemsCount} Other Items (%{remainingCount} Remaining)","Media.Count.0.More.0.0":"%{videosCount} Videos","Media.Count.0.More.0.1":"%{videosCount} Videos (1 Remaining)","Media.Count.0.More.0.2":"%{videosCount} Videos (2 Remaining)","Media.Count.0.More.0.More":"%{videosCount} Videos (%{remainingCount} Remaining)","Media.Count.0.More.1.0":"%{videosCount} Videos, 1 Other Item","Media.Count.0.More.1.1":"%{videosCount} Videos, 1 Other Item (1 Remaining)","Media.Count.0.More.1.2":"%{videosCount} Videos, 1 Other Item (2 Remaining)","Media.Count.0.More.1.More":"%{videosCount} Videos, 1 Other Item (%{remainingCount} Remaining)","Media.Count.0.More.2.0":"%{videosCount} Videos, 2 Other Items","Media.Count.0.More.2.1":"%{videosCount} Videos, 2 Other Items (1 Remaining)","Media.Count.0.More.2.2":"%{videosCount} Videos, 2 Other Items (2 Remaining)","Media.Count.0.More.2.More":"%{videosCount} Videos, 2 Other Items (%{remainingCount} Remaining)","Media.Count.0.More.More.0":"%{videosCount} Videos, %{otherItemsCount} Other Items","Media.Count.0.More.More.1":"%{videosCount} Videos, %{otherItemsCount} Other Items (1 Remaining)","Media.Count.0.More.More.2":"%{videosCount} Videos, %{otherItemsCount} Other Items (2 Remaining)","Media.Count.0.More.More.More":"%{videosCount} Videos, %{otherItemsCount} Other Items (%{remainingCount} Remaining)","Media.Count.1.0.0.0":"1 Photo","Media.Count.1.0.0.1":"1 Photo (1 Remaining)","Media.Count.1.0.0.2":"1 Photo (2 Remaining)","Media.Count.1.0.0.More":"1 Photo (%{remainingCount} Remaining)","Media.Count.1.0.1.0":"1 Photo, 1 Other Item","Media.Count.1.0.1.1":"1 Photo, 1 Other Item (1 Remaining)","Media.Count.1.0.1.2":"1 Photo, 1 Other Item (2 Remaining)","Media.Count.1.0.1.More":"1 Photo, 1 Other Item (%{remainingCount} Remaining)","Media.Count.1.0.2.0":"1 Photo, 2 Other Items","Media.Count.1.0.2.1":"1 Photo, 2 Other Items (1 Remaining)","Media.Count.1.0.2.2":"1 Photo, 2 Other Items (2 Remaining)","Media.Count.1.0.2.More":"1 Photo, 2 Other Items (%{remainingCount} Remaining)","Media.Count.1.0.More.0":"1 Photo, %{otherItemsCount} Other Items","Media.Count.1.0.More.1":"1 Photo, %{otherItemsCount} Other Items (1 Remaining)","Media.Count.1.0.More.2":"1 Photo, %{otherItemsCount} Other Items (2 Remaining)","Media.Count.1.0.More.More":"1 Photo, %{otherItemsCount} Other Items (%{remainingCount} Remaining)","Media.Count.1.1.0.0":"1 Photo, 1 Video","Media.Count.1.1.0.1":"1 Photo, 1 Video (1 Remaining)","Media.Count.1.1.0.2":"1 Photo, 1 Video (2 Remaining)","Media.Count.1.1.0.More":"1 Photo, 1 Video (%{remainingCount} Remaining)","Media.Count.1.1.1.0":"1 Photo, 1 Video, 1 Other Item","Media.Count.1.1.1.1":"1 Photo, 1 Video, 1 Other Item (1 Remaining)","Media.Count.1.1.1.2":"1 Photo, 1 Video, 1 Other Item (2 Remaining)","Media.Count.1.1.1.More":"1 Photo, 1 Video, 1 Other Item (%{remainingCount} Remaining)","Media.Count.1.1.2.0":"1 Photo, 1 Video, 2 Other Items","Media.Count.1.1.2.1":"1 Photo, 1 Video, 2 Other Items (1 Remaining)","Media.Count.1.1.2.2":"1 Photo, 1 Video, 2 Other Items (2 Remaining)","Media.Count.1.1.2.More":"1 Photo, 1 Video, 2 Other Items (%{remainingCount} Remaining)","Media.Count.1.1.More.0":"1 Photo, 1 Video, %{otherItemsCount} Other Items","Media.Count.1.1.More.1":"1 Photo, 1 Video, %{otherItemsCount} Other Items (1 Remaining)","Media.Count.1.1.More.2":"1 Photo, 1 Video, %{otherItemsCount} Other Items (2 Remaining)","Media.Count.1.1.More.More":"1 Photo, 1 Video, %{otherItemsCount} Other Items (%{remainingCount} Remaining)","Media.Count.1.2.0.0":"1 Photo, 2 Videos","Media.Count.1.2.0.1":"1 Photo, 2 Videos (1 Remaining)","Media.Count.1.2.0.2":"1 Photo, 2 Videos (2 Remaining)","Media.Count.1.2.0.More":"1 Photo, 2 Videos (%{remainingCount} Remaining)","Media.Count.1.2.1.0":"1 Photo, 2 Videos, 1 Other Item","Media.Count.1.2.1.1":"1 Photo, 2 Videos, 1 Other Item (1 Remaining)","Media.Count.1.2.1.2":"1 Photo, 2 Videos, 1 Other Item (2 Remaining)","Media.Count.1.2.1.More":"1 Photo, 2 Videos, 1 Other Item (%{remainingCount} Remaining)","Media.Count.1.2.2.0":"1 Photo, 2 Videos, 2 Other Items","Media.Count.1.2.2.1":"1 Photo, 2 Videos, 2 Other Items (1 Remaining)","Media.Count.1.2.2.2":"1 Photo, 2 Videos, 2 Other Items (2 Remaining)","Media.Count.1.2.2.More":"1 Photo, 2 Videos, 2 Other Items (%{remainingCount} Remaining)","Media.Count.1.2.More.0":"1 Photo, 2 Videos, %{otherItemsCount} Other Items","Media.Count.1.2.More.1":"1 Photo, 2 Videos, %{otherItemsCount} Other Items (1 Remaining)","Media.Count.1.2.More.2":"1 Photo, 2 Videos, %{otherItemsCount} Other Items (2 Remaining)","Media.Count.1.2.More.More":"1 Photo, 2 Videos, %{otherItemsCount} Other Items (%{remainingCount} Remaining)","Media.Count.1.More.0.0":"1 Photo, %{videosCount} Videos","Media.Count.1.More.0.1":"1 Photo, %{videosCount} Videos (1 Remaining)","Media.Count.1.More.0.2":"1 Photo, %{videosCount} Videos (2 Remaining)","Media.Count.1.More.0.More":"1 Photo, %{videosCount} Videos (%{remainingCount} Remaining)","Media.Count.1.More.1.0":"1 Photo, %{videosCount} Videos, 1 Other Item","Media.Count.1.More.1.1":"1 Photo, %{videosCount} Videos, 1 Other Item (1 Remaining)","Media.Count.1.More.1.2":"1 Photo, %{videosCount} Videos, 1 Other Item (2 Remaining)","Media.Count.1.More.1.More":"1 Photo, %{videosCount} Videos, 1 Other Item (%{remainingCount} Remaining)","Media.Count.1.More.2.0":"1 Photo, %{videosCount} Videos, 2 Other Items","Media.Count.1.More.2.1":"1 Photo, %{videosCount} Videos, 2 Other Items (1 Remaining)","Media.Count.1.More.2.2":"1 Photo, %{videosCount} Videos, 2 Other Items (2 Remaining)","Media.Count.1.More.2.More":"1 Photo, %{videosCount} Videos, 2 Other Items (%{remainingCount} Remaining)","Media.Count.1.More.More.0":"1 Photo, %{videosCount} Videos, %{otherItemsCount} Other Items","Media.Count.1.More.More.1":"1 Photo, %{videosCount} Videos, %{otherItemsCount} Other Items (1 Remaining)","Media.Count.1.More.More.2":"1 Photo, %{videosCount} Videos, %{otherItemsCount} Other Items (2 Remaining)","Media.Count.1.More.More.More":"1 Photo, %{videosCount} Videos, %{otherItemsCount} Other Items (%{remainingCount} Remaining)","Media.Count.2.0.0.0":"2 Photos","Media.Count.2.0.0.1":"2 Photos (1 Remaining)","Media.Count.2.0.0.2":"2 Photos (2 Remaining)","Media.Count.2.0.0.More":"2 Photos (%{remainingCount} Remaining)","Media.Count.2.0.1.0":"2 Photos, 1 Other Item","Media.Count.2.0.1.1":"2 Photos, 1 Other Item (1 Remaining)","Media.Count.2.0.1.2":"2 Photos, 1 Other Item (2 Remaining)","Media.Count.2.0.1.More":"2 Photos, 1 Other Item (%{remainingCount} Remaining)","Media.Count.2.0.2.0":"2 Photos, 2 Other Items","Media.Count.2.0.2.1":"2 Photos, 2 Other Items (1 Remaining)","Media.Count.2.0.2.2":"2 Photos, 2 Other Items (2 Remaining)","Media.Count.2.0.2.More":"2 Photos, 2 Other Items (%{remainingCount} Remaining)","Media.Count.2.0.More.0":"2 Photos, %{otherItemsCount} Other Items","Media.Count.2.0.More.1":"2 Photos, %{otherItemsCount} Other Items (1 Remaining)","Media.Count.2.0.More.2":"2 Photos, %{otherItemsCount} Other Items (2 Remaining)","Media.Count.2.0.More.More":"2 Photos, %{otherItemsCount} Other Items (%{remainingCount} Remaining)","Media.Count.2.1.0.0":"2 Photos, 1 Video","Media.Count.2.1.0.1":"2 Photos, 1 Video (1 Remaining)","Media.Count.2.1.0.2":"2 Photos, 1 Video (2 Remaining)","Media.Count.2.1.0.More":"2 Photos, 1 Video (%{remainingCount} Remaining)","Media.Count.2.1.1.0":"2 Photos, 1 Video, 1 Other Item","Media.Count.2.1.1.1":"2 Photos, 1 Video, 1 Other Item (1 Remaining)","Media.Count.2.1.1.2":"2 Photos, 1 Video, 1 Other Item (2 Remaining)","Media.Count.2.1.1.More":"2 Photos, 1 Video, 1 Other Item (%{remainingCount} Remaining)","Media.Count.2.1.2.0":"2 Photos, 1 Video, 2 Other Items","Media.Count.2.1.2.1":"2 Photos, 1 Video, 2 Other Items (1 Remaining)","Media.Count.2.1.2.2":"2 Photos, 1 Video, 2 Other Items (2 Remaining)","Media.Count.2.1.2.More":"2 Photos, 1 Video, 2 Other Items (%{remainingCount} Remaining)","Media.Count.2.1.More.0":"2 Photos, 1 Video, %{otherItemsCount} Other Items","Media.Count.2.1.More.1":"2 Photos, 1 Video, %{otherItemsCount} Other Items (1 Remaining)","Media.Count.2.1.More.2":"2 Photos, 1 Video, %{otherItemsCount} Other Items (2 Remaining)","Media.Count.2.1.More.More":"2 Photos, 1 Video, %{otherItemsCount} Other Items (%{remainingCount} Remaining)","Media.Count.2.2.0.0":"2 Photos, 2 Videos","Media.Count.2.2.0.1":"2 Photos, 2 Videos (1 Remaining)","Media.Count.2.2.0.2":"2 Photos, 2 Videos (2 Remaining)","Media.Count.2.2.0.More":"2 Photos, 2 Videos (%{remainingCount} Remaining)","Media.Count.2.2.1.0":"2 Photos, 2 Videos, 1 Other Item","Media.Count.2.2.1.1":"2 Photos, 2 Videos, 1 Other Item (1 Remaining)","Media.Count.2.2.1.2":"2 Photos, 2 Videos, 1 Other Item (2 Remaining)","Media.Count.2.2.1.More":"2 Photos, 2 Videos, 1 Other Item (%{remainingCount} Remaining)","Media.Count.2.2.2.0":"2 Photos, 2 Videos, 2 Other Items","Media.Count.2.2.2.1":"2 Photos, 2 Videos, 2 Other Items (1 Remaining)","Media.Count.2.2.2.2":"2 Photos, 2 Videos, 2 Other Items (2 Remaining)","Media.Count.2.2.2.More":"2 Photos, 2 Videos, 2 Other Items (%{remainingCount} Remaining)","Media.Count.2.2.More.0":"2 Photos, 2 Videos, %{otherItemsCount} Other Items","Media.Count.2.2.More.1":"2 Photos, 2 Videos, %{otherItemsCount} Other Items (1 Remaining)","Media.Count.2.2.More.2":"2 Photos, 2 Videos, %{otherItemsCount} Other Items (2 Remaining)","Media.Count.2.2.More.More":"2 Photos, 2 Videos, %{otherItemsCount} Other Items (%{remainingCount} Remaining)","Media.Count.2.More.0.0":"2 Photos, %{videosCount} Videos","Media.Count.2.More.0.1":"2 Photos, %{videosCount} Videos (1 Remaining)","Media.Count.2.More.0.2":"2 Photos, %{videosCount} Videos (2 Remaining)","Media.Count.2.More.0.More":"2 Photos, %{videosCount} Videos (%{remainingCount} Remaining)","Media.Count.2.More.1.0":"2 Photos, %{videosCount} Videos, 1 Other Item","Media.Count.2.More.1.1":"2 Photos, %{videosCount} Videos, 1 Other Item (1 Remaining)","Media.Count.2.More.1.2":"2 Photos, %{videosCount} Videos, 1 Other Item (2 Remaining)","Media.Count.2.More.1.More":"2 Photos, %{videosCount} Videos, 1 Other Item (%{remainingCount} Remaining)","Media.Count.2.More.2.0":"2 Photos, %{videosCount} Videos, 2 Other Items","Media.Count.2.More.2.1":"2 Photos, %{videosCount} Videos, 2 Other Items (1 Remaining)","Media.Count.2.More.2.2":"2 Photos, %{videosCount} Videos, 2 Other Items (2 Remaining)","Media.Count.2.More.2.More":"2 Photos, %{videosCount} Videos, 2 Other Items (%{remainingCount} Remaining)","Media.Count.2.More.More.0":"2 Photos, %{videosCount} Videos, %{otherItemsCount} Other Items","Media.Count.2.More.More.1":"2 Photos, %{videosCount} Videos, %{otherItemsCount} Other Items (1 Remaining)","Media.Count.2.More.More.2":"2 Photos, %{videosCount} Videos, %{otherItemsCount} Other Items (2 Remaining)","Media.Count.2.More.More.More":"2 Photos, %{videosCount} Videos, %{otherItemsCount} Other Items (%{remainingCount} Remaining)","Media.Count.More.0.0.0":"%{photosCount} Photos","Media.Count.More.0.0.1":"%{photosCount} Photos (1 Remaining)","Media.Count.More.0.0.2":"%{photosCount} Photos (2 Remaining)","Media.Count.More.0.0.More":"%{photosCount} Photos (%{remainingCount} Remaining)","Media.Count.More.0.1.0":"%{photosCount} Photos, 1 Other Item","Media.Count.More.0.1.1":"%{photosCount} Photos, 1 Other Item (1 Remaining)","Media.Count.More.0.1.2":"%{photosCount} Photos, 1 Other Item (2 Remaining)","Media.Count.More.0.1.More":"%{photosCount} Photos, 1 Other Item (%{remainingCount} Remaining)","Media.Count.More.0.2.0":"%{photosCount} Photos, 2 Other Items","Media.Count.More.0.2.1":"%{photosCount} Photos, 2 Other Items (1 Remaining)","Media.Count.More.0.2.2":"%{photosCount} Photos, 2 Other Items (2 Remaining)","Media.Count.More.0.2.More":"%{photosCount} Photos, 2 Other Items (%{remainingCount} Remaining)","Media.Count.More.0.More.0":"%{photosCount} Photos, %{otherItemsCount} Other Items","Media.Count.More.0.More.1":"%{photosCount} Photos, %{otherItemsCount} Other Items (1 Remaining)","Media.Count.More.0.More.2":"%{photosCount} Photos, %{otherItemsCount} Other Items (2 Remaining)","Media.Count.More.0.More.More":"%{photosCount} Photos, %{otherItemsCount} Other Items (%{remainingCount} Remaining)","Media.Count.More.1.0.0":"%{photosCount} Photos, 1 Video","Media.Count.More.1.0.1":"%{photosCount} Photos, 1 Video (1 Remaining)","Media.Count.More.1.0.2":"%{photosCount} Photos, 1 Video (2 Remaining)","Media.Count.More.1.0.More":"%{photosCount} Photos, 1 Video (%{remainingCount} Remaining)","Media.Count.More.1.1.0":"%{photosCount} Photos, 1 Video, 1 Other Item","Media.Count.More.1.1.1":"%{photosCount} Photos, 1 Video, 1 Other Item (1 Remaining)","Media.Count.More.1.1.2":"%{photosCount} Photos, 1 Video, 1 Other Item (2 Remaining)","Media.Count.More.1.1.More":"%{photosCount} Photos, 1 Video, 1 Other Item (%{remainingCount} Remaining)","Media.Count.More.1.2.0":"%{photosCount} Photos, 1 Video, 2 Other Items","Media.Count.More.1.2.1":"%{photosCount} Photos, 1 Video, 2 Other Items (1 Remaining)","Media.Count.More.1.2.2":"%{photosCount} Photos, 1 Video, 2 Other Items (2 Remaining)","Media.Count.More.1.2.More":"%{photosCount} Photos, 1 Video, 2 Other Items (%{remainingCount} Remaining)","Media.Count.More.1.More.0":"%{photosCount} Photos, 1 Video, %{otherItemsCount} Other Items","Media.Count.More.1.More.1":"%{photosCount} Photos, 1 Video, %{otherItemsCount} Other Items (1 Remaining)","Media.Count.More.1.More.2":"%{photosCount} Photos, 1 Video, %{otherItemsCount} Other Items (2 Remaining)","Media.Count.More.1.More.More":"%{photosCount} Photos, 1 Video, %{otherItemsCount} Other Items (%{remainingCount} Remaining)","Media.Count.More.2.0.0":"%{photosCount} Photos, 2 Videos","Media.Count.More.2.0.1":"%{photosCount} Photos, 2 Videos (1 Remaining)","Media.Count.More.2.0.2":"%{photosCount} Photos, 2 Videos (2 Remaining)","Media.Count.More.2.0.More":"%{photosCount} Photos, 2 Videos (%{remainingCount} Remaining)","Media.Count.More.2.1.0":"%{photosCount} Photos, 2 Videos, 1 Other Item","Media.Count.More.2.1.1":"%{photosCount} Photos, 2 Videos, 1 Other Item (1 Remaining)","Media.Count.More.2.1.2":"%{photosCount} Photos, 2 Videos, 1 Other Item (2 Remaining)","Media.Count.More.2.1.More":"%{photosCount} Photos, 2 Videos, 1 Other Item (%{remainingCount} Remaining)","Media.Count.More.2.2.0":"%{photosCount} Photos, 2 Videos, 2 Other Items","Media.Count.More.2.2.1":"%{photosCount} Photos, 2 Videos, 2 Other Items (1 Remaining)","Media.Count.More.2.2.2":"%{photosCount} Photos, 2 Videos, 2 Other Items (2 Remaining)","Media.Count.More.2.2.More":"%{photosCount} Photos, 2 Videos, 2 Other Items (%{remainingCount} Remaining)","Media.Count.More.2.More.0":"%{photosCount} Photos, 2 Videos, %{otherItemsCount} Other Items","Media.Count.More.2.More.1":"%{photosCount} Photos, 2 Videos, %{otherItemsCount} Other Items (1 Remaining)","Media.Count.More.2.More.2":"%{photosCount} Photos, 2 Videos, %{otherItemsCount} Other Items (2 Remaining)","Media.Count.More.2.More.More":"%{photosCount} Photos, 2 Videos, %{otherItemsCount} Other Items (%{remainingCount} Remaining)","Media.Count.More.More.0.0":"%{photosCount} Photos, %{videosCount} Videos","Media.Count.More.More.0.1":"%{photosCount} Photos, %{videosCount} Videos (1 Remaining)","Media.Count.More.More.0.2":"%{photosCount} Photos, %{videosCount} Videos (2 Remaining)","Media.Count.More.More.0.More":"%{photosCount} Photos, %{videosCount} Videos (%{remainingCount} Remaining)","Media.Count.More.More.1.0":"%{photosCount} Photos, %{videosCount} Videos, 1 Other Item","Media.Count.More.More.1.1":"%{photosCount} Photos, %{videosCount} Videos, 1 Other Item (1 Remaining)","Media.Count.More.More.1.2":"%{photosCount} Photos, %{videosCount} Videos, 1 Other Item (2 Remaining)","Media.Count.More.More.1.More":"%{photosCount} Photos, %{videosCount} Videos, 1 Other Item (%{remainingCount} Remaining)","Media.Count.More.More.2.0":"%{photosCount} Photos, %{videosCount} Videos, 2 Other Items","Media.Count.More.More.2.1":"%{photosCount} Photos, %{videosCount} Videos, 2 Other Items (1 Remaining)","Media.Count.More.More.2.2":"%{photosCount} Photos, %{videosCount} Videos, 2 Other Items (2 Remaining)","Media.Count.More.More.2.More":"%{photosCount} Photos, %{videosCount} Videos, 2 Other Items (%{remainingCount} Remaining)","Media.Count.More.More.More.0":"%{photosCount} Photos, %{videosCount} Videos, %{otherItemsCount} Other Items","Media.Count.More.More.More.1":"%{photosCount} Photos, %{videosCount} Videos, %{otherItemsCount} Other Items (1 Remaining)","Media.Count.More.More.More.2":"%{photosCount} Photos, %{videosCount} Videos, %{otherItemsCount} Other Items (2 Remaining)","Media.Count.More.More.More.More":"%{photosCount} Photos, %{videosCount} Videos, %{otherItemsCount} Other Items (%{remainingCount} Remaining)","Alert.OK.Button.Title":"OK","Alert.Cancel.Button.Title":"Cancel","Alert.Remove.Button.Title":"Remove","Alert.Delete.Button.Title":"Delete","Alert.Expunge.Button.Title":"Delete","Alert.Download.Button.Title":"Download","Alert.Delete.Folder.Button.Title":"Delete Folder","Alert.Delete.Album.Button.Title":"Delete Album","Alert.Remove.Item.Message.1":"Remove item from album?","Alert.Remove.Item.Message.More":"Remove %{count} items from album?","Alert.Remove.Item.Description.1":"This item will be removed from this album, but will remain in your photo library.","Alert.Remove.Item.Description.More":"These items will be removed from this album, but will remain in your photo library.","Alert.Remove.Item.Failed.Message.1":"Unable to remove item.","Alert.Remove.Item.Failed.Message.More":"Unable to remove items.","Alert.Remove.Item.Failed.Description.1":"An item could not be removed due to a server error.","Alert.Remove.Item.Failed.Description.More":"Some items could not be removed due to a server error.","Alert.Delete.Item.Message.1":"Delete 1 item from all your devices?","Alert.Delete.Item.Message.More":"Delete %{count} items from all your devices?","Alert.Delete.Item.Description.1":"This item will be deleted from iCloud Photos on all your devices.","Alert.Delete.Item.Description.More":"These items will be deleted from iCloud Photos on all your devices.","Alert.Delete.Item.Failed.Message.1":"Unable to delete item.","Alert.Delete.Item.Failed.Message.More":"Unable to delete items.","Alert.Delete.Item.Failed.Description.1":"An item could not be deleted due to a server error.","Alert.Delete.Item.Failed.Description.More":"Some items could not be deleted due to a server error.","Alert.Expunge.Item.Message.1":"Are you sure you want to delete this item permanently?","Alert.Expunge.Item.Message.More":"Are you sure you want to delete these %{count} items permanently?","Alert.Expunge.Item.Description.1":"This action cannot be undone","Alert.Expunge.Item.Description.More":"This action cannot be undone","Alert.Expunge.Item.Description":"This action cannot be undone.","Alert.Expunge.Item.Failed.Message.1":"Unable to delete item.","Alert.Expunge.Item.Failed.Message.More":"Unable to delete items.","Alert.Expunge.Item.Failed.Description.1":"An item could not be deleted due to a server error.","Alert.Expunge.Item.Failed.Description.More":"Some items could not be deleted due to a server error.","Alert.Delete.Promoted.From.Burst.Message.1":"This photo is part of a burst. It will be removed from the photo grid, but will remain in the burst.","Alert.Delete.Promoted.From.Burst.Message.More":"These photos are part of a burst. They will be removed from the photo grid, but will remain in the burst.","Alert.Delete.Some.Promoted.From.Burst.Message.More":"Some photos are part of a burst. They will be removed from the photo grid, but will remain in the burst.","Alert.Delete.Photo.Description.1":"This photo will be deleted from iCloud Photos on all your devices.","Alert.Delete.Photo.Description.More":"These photos will be deleted from iCloud Photos on all your devices.","Month.Year.Range.Same.Month.Same.Year":"%{startDate:MMMM} <span>%{startDate:YYYY}</span>","Month.Year.Range.Diff.Month.Same.Year":"%{startDate:MMMM} – %{endDate:MMMM} <span>%{startDate:YYYY}</span>","Month.Year.Range.Diff.Year":"%{startDate:MMMM} <span>%{startDate:YYYY} –</span> %{endDate:MMMM} <span>%{endDate:YYYY}</span>","Grid.View.Header.Item.Count.1":"1 Item","Grid.View.Header.Item.Count.2":"2 Items","Grid.View.Header.Item.Count.More":"%{count} Items","Grid.View.Header.Album.Description":"%{monthYearRange}  ·  %{itemCount}","Grid.View.Header.NumberOfSelectedItems.1":"1 Selected","Grid.View.Header.NumberOfSelectedItems.2":"2 Selected","Grid.View.Header.NumberOfSelectedItems.More":"%{count} Selected","Grid.View.Header.Deselect.All.Title":"Deselect All","Grid.View.Header.Deselect.All.Tooltip":"Clear the current selection","Grid.View.Header.Album.Count.1":"1 Album","Grid.View.Header.Album.Count.2":"2 Albums","Grid.View.Header.Album.Count.More":"%{count} Albums","Grid.View.Header.Folder.Count.1":"1 Folder","Grid.View.Header.Folder.Count.2":"2 Folders","Grid.View.Header.Folder.Count.More":"%{count} Folders","Grid.View.Header.Album.Folders.Count":"%{albumCount}, %{folderCount}","Grid.View.Header.Recently.Deleted.Note":"Photos and videos show the days remaining before deletion. After that time, items will be permanently deleted. This may take up to 40 days.","Grid.View.Header.Recently.Deleted.Description":"%{itemCount}  ·  %{note}","Navbar.OneUp.Title.Date":"%{date:MMMM} %{date:d}","Navbar.OneUp.Title.Date.Day.Of.Week":"%{date:EEEE}","Navbar.OneUp.Title.DateWithYear":"%{date:MMMM} %{date:d}, %{date:y}","Navbar.OneUp.Title.DateShort":"%{date:MMM} %{date:d}","Navbar.OneUp.Title.DateWithYearShort":"%{date:MMM} %{date:d}, %{date:y}","Navbar.OneUp.Title.Time":"%{date:h}:%{date:mm} %{date:a}","Navbar.OneUp.Title.TimeShort":"%{date:h}:%{date:mm} %{date:a}","Navbar.OneUp.Title.DateAndTime":"%{dateString} · %{timeString}","Navbar.OneUp.Title.Subtitle.DateAndPosition":"%{date} · %{position} of %{total}","Navbar.OneUp.Title.Subtitle.PositionOnly":"%{position} of %{total}","Slider.ToolbarSlider.Tooltip.FitsInWindow":"Fit","Selection.Title.Empty":"Select Items","Selection.Title.Items.1":"1 Item Selected","Selection.Title.Items.2":"2 Items Selected","Selection.Title.Items.More":"%{count} Items Selected","Selection.Title.Photos.1":"1 Photo Selected","Selection.Title.Photos.2":"2 Photos Selected","Selection.Title.Photos.More":"%{count} Photos Selected","Selection.Title.Videos.1":"1 Video Selected","Selection.Title.Videos.2":"2 Videos Selected","Selection.Title.Videos.More":"%{count} Videos Selected","Selection.Limit.Alert.Message":"Too many items selected","Selection.Limit.Alert.Description.Share":"Unable to share more than %{limit} items at a time. Please reduce your selection.","Selection.Limit.Alert.Description.Delete":"Unable to delete more than %{limit} items at a time. Please reduce your selection.","Selection.Limit.Alert.Description.Remove":"Unable to remove more than %{limit} items at a time. Please reduce your selection.","Selection.Limit.Alert.Description.Expunge":"Unable to delete more than %{limit} items at a time. Please reduce your selection.","Selection.Limit.Alert.Description.Download":"Unable to download more than %{limit} items at a time. Please reduce your selection.","Selection.Limit.Alert.Description.AddToAlbum":"Unable to add more than %{limit} items at a time. Please reduce your selection.","Selection.Limit.Alert.Description.Favorite":"Unable to favorite more than %{limit} items at a time. Please reduce your selection.","Selection.Limit.Alert.Description.Recover":"Unable to recover more than %{limit} items at a time. Please reduce your selection.","Selection.Limit.Alert.Description.Generic":"Unable to perform actions on more than %{limit} items at a time. Please reduce your selection.","SelectionCheckmark.Deselect.Photo":"Deselect this photo","SelectionCheckmark.Deselect.Video":"Deselect this video","SelectionCheckmark.Deselect.Item":"Deselect this item","SelectionCheckmark.Select.Photo":"Select this photo","SelectionCheckmark.Select.Video":"Select this video","SelectionCheckmark.Select.Item":"Select this item","Moments.Grid.Header.Toggle.Selection.Select":"Select","Moments.Grid.Header.Toggle.Selection.Deselect":"Deselect","Moments.Grid.Header.Toggle.Selection.Select.Tooltip":"Select all the items in this Moment","Moments.Grid.Header.Toggle.Selection.Deselect.Tooltip":"Deselect all the items in this Moment","Download.ArchiveName.Default":"iCloud Photos","Download.ArchiveName.From.Name":"iCloud Photos from %{name}","Download.ArchiveName.From.Date":"iCloud Photos from %{date}","Download.Error.Alert.Message":"Photos could not be downloaded.","Download.Error.Alert.Description":"Photos could not be downloaded at this time due to an error. Please try again later.","Download.Error.Alert.Button":"OK","Transaction.Progress.Preparing":"Preparing","Transaction.Progress.Processing":"Processing"})},function(e,t,n){var i=n(19);e.exports=function(e,t){if(!i(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!i(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!i(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!i(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t){var n=Math.ceil,i=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?i:n)(e)}},function(e,t,n){var i=n(3),r=n(55),a=n(18);e.exports=function(e,t){var n=(r.Object||{})[e]||Object[e],s={};s[e]=t(n),i(i.S+i.F*a(function(){n(1)}),"Object",s)}},function(e,t,n){var i=n(56),r=n(274),a=n(31),s=n(28),o=n(387);e.exports=function(e,t){var n=1==e,c=2==e,l=3==e,u=4==e,d=6==e,h=5==e||d,p=t||o;return function(t,o,f){for(var g,m,v=a(t),_=r(v),b=i(o,f,3),y=s(_.length),I=0,w=n?p(t,y):c?p(t,0):void 0;y>I;I++)if((h||I in _)&&(m=b(g=_[I],I,v),e))if(n)w[I]=m;else if(m)switch(e){case 3:return!0;case 5:return g;case 6:return I;case 2:w.push(g)}else if(u)return!1;return d?-1:l||u?u:w}}},function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return a});var i=n(173),r=function(e,t){var n=void 0;return e instanceof Error?n=e:(e&&(e=Object(i.a)(e,t)),n=new Error(e)),n.context=t,n},a=function(e,t){throw new r(e,t)}},function(e,t,n){"use strict";n.d(t,"a",function(){return v});var i=n(87),r=n(69),a=n(854),s=n(106),o=n(398),c=n(112),l=n(153),u=n(397),d=n(427),h=n(13),p=n(169),f=n(107),g=n(328),m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},v=i.a.extend({mixinDependencies:[s.a,o.a,c.a,l.a,u.a,d.a],staticMembers:{getPrimaryKey:function(e){return f.a.getZoneIdString(e)},getOwnerRecordNameFromPrimaryKey:function(e){return f.a.getOwnerRecordNameFromZoneIdString(e)},getZoneNameFromPrimaryKey:function(e){return f.a.getZoneNameFromFromZoneIdString(e)},getPartsFromPrimaryKey:function(e){return{ownerRecordName:v.getOwnerRecordNameFromPrimaryKey(e),zoneName:v.getZoneNameFromPrimaryKey(e)}},getPrimaryKeyFromParts:function(e){var t=e.ownerRecordName,n=e.zoneName;return this.getPrimaryKey({ownerRecordName:t,zoneName:n})},findByZoneID:function(e){var t=v.getPrimaryKey(e);return v.find(t)},getDataValuesFromServiceValues:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.b(),i=this.__s._$14t$getDataValuesFromServiceValues.call(this,e,t);return i.originalScope=i.scope,i.pk=v.getPrimaryKey(i.zoneID),i.syncTokenLastUpdated=Date.now(),!0===n.isRecordOwnedByCurrentUser(i)&&(i.scope=CloudKit.DatabaseScope.PRIVATE),i},updateSyncToken:function(e,t){var n=r.b(),i=n.readDataForPrimaryKey(v,e),a=m({},i,{syncToken:t,syncTokenLastUpdated:Date.now()});return n.loadData(v,a,!1)},fetchRecordZoneChanges:function(e){return this.performOperation("fetchRecordZoneChanges",e)},fetchRecords:function(e){return this.performOperation("fetchRecords",e)},generateZipURLForRecords:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=this.find(e).scope;return this.performOperation(g.b,m({},n,{zonePK:e,scope:i,archiveName:t}))},__superMap:{_$14t$getDataValuesFromServiceValues:"getDataValuesFromServiceValues"},__QUALIFIED_CLASS_NAME__:"Zone"},scope:i.c({readOnly:!0}),originalScope:i.c({readOnly:!0}),zoneID:Object(p.f)({readOnly:!0,type:f.a}),syncToken:Object(h.c)({readOnly:!0}),syncTokenLastUpdated:i.c({readOnly:!0}),database:a.a.toOne({type:"Database"}),deleted:Object(h.c)({readOnly:!0}),updateSyncToken:function(e){return v.updateSyncToken(this.getPrimaryKey(),e)},fetchRecordZoneChanges:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.constructor.fetchRecordZoneChanges(m({zonePK:this.pk,syncToken:this.syncToken},e))},load:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.constructor.load(m({},e,{scope:this.scope}))}})},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return g});var i=n(169),r=n(34),a=n(264),s=n(158),o=n(869),c=n(500),l=n(330),u=n(261),d=n(260),h=n(109),p=n(89),f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},g=h.a.extend(l.a,d.a,u.a,f({staticMembers:{CK_RECORD_TYPE:"CPLMaster",getDataValuesFromServiceValues:function(e){var t=arguments,n=this.__s._$Q3$getDataValuesFromServiceValues.apply(this,t);n&&(n._receiptTimestamp=Date.now());var i=e.pluginFields;return i&&i.dynamic_resJPEGMedRes&&(n.dynamicResJPEGMedRes=i.dynamic_resJPEGMedRes.value),n},__superMap:{_$Q3$getDataValuesFromServiceValues:"getDataValuesFromServiceValues"},__QUALIFIED_CLASS_NAME__:"Master"},itemType:i.e({readOnly:!0}),codec:i.e({readOnly:!0}),isHEICImage:r.b({readOnly:!0,dependencies:["itemType"],get:Object.assign(function(){var e=this.itemType;return"public.heic"===e||"public.heif"===e},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return"public.heic"===r||"public.heif"===r}})}),isHEVCVideo:r.b({readOnly:!0,dependencies:["codec"],get:Object.assign(function(){return"hevc"===String(this.codec).toLowerCase()},{__CW__getter:function(e,t,n,i){return"hevc"===String(i.internalGet(this,t[0+n])).toLowerCase()}})}),dataClassType:i.j(s.a,{readOnly:!0,defaultValue:s.a.IMAGE}),mediaMetaDataType:i.j(c.a,{readOnly:!0}),mediaMetaDataEnc:i.k({readOnly:!0}),filenameEnc:i.l({readOnly:!0}),originalOrientation:i.j(a.a,{readOnly:!0,defaultValue:a.a.NORMAL}),importedBy:i.j(o.a,{readOnly:!0,defaultValue:o.a.UNKNOWN}),dynamicResJPEGMedRes:i.e({readOnly:!0}),computedDynamicResJPEGMedRes:r.b({readOnly:!0,dependencies:["dynamicResJPEGMedRes","filenameEnc"],get:function(){var t=this.dynamicResJPEGMedRes,n=this.filenameEnc;if(t){var i=e.encodeURIComponent(n);return t.replace("${f}",i)}}})},Object(p.a)("resOriginal"),Object(p.a)("resOriginalAlt"),Object(p.a)("resOriginalVidCompl")))}).call(this,n(6))},function(e,t,n){"use strict";n.d(t,"b",function(){return d}),n.d(t,"a",function(){return h}),n.d(t,"c",function(){return S});var i=n(65),r=n(1169),a=n(1170),s=n(208),o=n(1171),c=n(1172),l=n(122),u="__s",d=0,h={isClass:!0,name:null,isNamed:null,mixins:[],ancestors:[],superclass:null,create:function(){var e=new this.Constructor;return e.init.apply(e,arguments),e._baseInitCalled||Object(i.b)("Base init was never invoked. Overridden init methods must always call `super()`."),e.isInitialized=!0,e},mixinWasApplied:r.a,isInitialized:!0,extend:function(){var e=Object.create(this),t=e.prototype=Object.create(e.prototype);e.isInitialized=!1,t.isInitialized=!1,e.mixins=e.mixins.slice();var n=function(){};return n.prototype=t,e.Constructor=n,t.constructor=e,e.ancestors=this.ancestors.slice(),e.ancestors.push(this),e.superclass=this,f(e,arguments),e._baseInitCalled=!1,t._baseInitCalled=!1,e.init(),e._baseInitCalled||Object(i.b)("Base init was never invoked. Overridden init methods must always call `super()`."),e.isInitialized=!0,e},init:function(){this._baseInitCalled=!0},hasMixin:function(e){return this.mixins.indexOf(e)>=0},subclassOf:function(e){return this.ancestors.indexOf(e)>=0},kindOf:function(e){return!!e&&(this.hasMixin(e)||this.subclassOf(e)||this===e)},toString:function(){return"[Class "+Object(a.a)(this)+"]"},toJSON:function(){return this.toString()},prototype:{_cwGUID:"",init:function(e){var t;arguments.length>1&&Object(i.b)("Default initializer supports at most one argument. If you would like to apply a mixin it should be done when calling .extend()."),w(this,e),this.trackReferences&&((t=this)._trackRetain=v,t._trackRelease=_,t.referenceTracker={}),this._baseInitCalled=!0},_baseInitCalled:!1,_metadataKeysForCreate:null,isObject:!0,isInitialized:!0,isDisposing:!1,isDisposed:!1,_retainCount:0,retain:function(e,t){this.isDisposed&&Object(i.b)("Cannot retain an object that has already been disposed.",{object:this,type:this.constructor.name,referencer:e,description:t}),this._retainCount++,this._trackRetain(e,t);var n=this._autoreleaseForTransferToken;return isNaN(n)||(this._autoreleaseForTransferToken=NaN,Object(s.a)(this,n)),this},release:function(e,t){var n=--this._retainCount,r=this._autoreleaseForTransferToken;return isNaN(r)||(this._autoreleaseForTransferToken=NaN),this._trackRelease(e,t),n<0&&Object(i.b)("Cannot release an object more times than it has been retained.",{object:this,type:this.constructor.name,referencer:e,description:t,referenceTracker:this.referenceTracker,overreleasedReference:this.overreleasedReference}),0===n&&(this.cleanup(),this._baseCleanupCalled||Object(i.b)("Base cleanup was never invoked. Overridden cleanup methods must always call `$super()`.",this),this._baseCleanupCalled=!1,this._captureDisposingObjectForPool(),this.isPooled?(this.didEnterPool(),this._baseDidEnterPoolCalled||Object(i.b)("Base didEnterPool was never invoked. Overridden didEnterPool methods must always call `$super()`.",this),this._baseDidEnterPoolCalled=!1):(this.isDisposing=!0,this.dispose(),this._baseDisposeCalled||Object(i.b)("Base dispose was never invoked. Overridden dispose methods must always call `$super()`.",this),this.isDisposing=!1,this.isDisposed=!0)),this},autorelease:function(e,t){return Object(s.b)(this,e,t),this},_autoreleaseForTransfer:function(e,t){return this._autoreleaseForTransferToken=Object(s.b)(this,e,t),this},_autoreleaseForTransferToken:NaN,trackReferences:!1,referenceTracker:null,overreleasedReference:null,cleanup:function(){!function(e){var t=e._weakReferences;if(t){var n,i,r,a,s=t.length,o=S._bestBatchSetterClass.begin();for(n=0;n<s;n+=3)(r=t[n])&&(i=t[n+1],a=t[n+2],i.call(r,a,o));o.end(),t.length=0}}(this),this._baseCleanupCalled=!0},didEnterPool:function(){this._baseDidEnterPoolCalled=!0},dispose:function(){this._baseDisposeCalled=!0},_baseCleanupCalled:!1,_baseDidEnterPoolCalled:!1,_baseDisposeCalled:!1,_captureDisposingObjectForPool:r.a,registerWeakReference:function(e,t,n){var i,r=this._weakReferences;if(r){var a=this._weakReferenceAvailableIndicesLength;a>=0?(i=this._weakReferenceAvailableIndices[a],this._weakReferenceAvailableIndicesLength=a-1):i=r.length+1}else r=this._weakReferences=[],this._weakReferenceAvailableIndices=[],this._weakReferenceAvailableIndicesLength=-1,i=1;return r[i-1]=e,r[i]=t,r[i+1]=n,i},deregisterWeakReference:function(e){var t=this._weakReferences;t[e-1]||(e===d?Object(i.b)("Attempted to deregister the null weak reference token.",this):Object(i.b)("Cannot deregister a weak reference that wasn't registered or was previously deregistered.",this)),t[e-1]=t[e]=t[e+1]=null,this._weakReferenceAvailableIndices[++this._weakReferenceAvailableIndicesLength]=e},_weakReferences:null,_weakReferenceAvailableIndices:null,_weakReferenceAvailableIndicesLength:-1,_trackRetain:r.a,_trackRelease:r.a,hasMixin:function(e){return this.constructor.hasMixin(e)},instanceOf:function(e){if(!e)return!1;if(e.isClass){var t=e&&e.Constructor;return!!t&&this instanceof t}return this.hasMixin(e)}}};Object.defineProperties(h,{name:{get:function(){return Object(a.a)(this)}},isNamed:{get:function(){return this.hasOwnProperty("__QUALIFIED_CLASS_NAME__")}}});var p=function(){};function f(e,t){var n,r,a=t.length;for(n=0;n<a;n++)(r=t[n])||Object(i.b)("Error: attempting to mixin undefined as a mixin to "+e.toString()+"."),r.isClass&&Object(i.b)("Error: attempting to mixin class "+r.toString()+" as a mixin to "+e.toString()+". Cannot use classes as mixins.",{class:e,mixin:r}),e.hasMixin(r)||g(e,r);return e}function g(e,t){var n,i,r;return(n=t.mixinDependencies)&&f(e,n),e.mixins.push(t),m(e,i=t.staticMembers),w(e,i),m(r=e.prototype,t),w(r,t),e.mixinWasApplied(t),e}function m(e,t){if(t){var n=t.__superMap,i=e[u];for(var r in i=i?Object.create(i):{},n){var a=n[r];i[r]=e[a]}e[u]=i}}p.prototype=h.prototype,h.Constructor=p,h.prototype.constructor=h;var v=function(e,t){var n=b(this.referenceTracker,e,t),i=++n.referenceCount;n.highestReferenceCount=Math.max(i,n.highestReferenceCount);var r=I();n.timestamps.push(r)},_=function(e,t){var n=b(this.referenceTracker,e,t),i=--n.referenceCount,r=0-I();n.timestamps.push(r),i<0&&(n.hasOverreleased=!0,this.overreleasedReference=n)};function b(e,t,n){var i=t?Object(a.a)(t):"Unknown referencer",r=n?n+" - "+i:i,s=e[r];return s||(s=e[r]={descriptor:r,referenceCount:0,highestReferenceCount:0,timestamps:[],hasOverreleased:!1}),s}var y,I=(y=Date.now(),function(){return(Date.now()-y)/1e3});function w(e,t){if(t){var n=Object.getOwnPropertyNames(t);n.push.apply(n,Object.getOwnPropertySymbols(t));for(var i=n.length,r=0;r<i;r++){var a=n[r];if("staticMembers"!==a&&"mixinDependencies"!==a){for(var s=t[a];s&&s.initializeMember;)s=s.initializeMember(e,a);void 0!==s&&(e[a]=s)}}}}var S=h.extend(l.a,{staticMembers:{begin:function(){var e=this.create();return e.retain(e,C),e._isReady=!0,e},_bestBatchSetterClass:null,init:function(){var e=arguments;this.__s._$B4R$init.apply(this,e),this._bestBatchSetterClass=this},__superMap:{_$B4R$init:"init"},__QUALIFIED_CLASS_NAME__:"NonObservableBatchSetter"},begin:function(){Object(i.b)("BatchSetter Begin must be called on the class, reusing BatchSetter objects is not allowed.")},set:function(e,t,n){this._isReady||Object(i.b)("BatchSetter Begin must be called on the class before calling set, reusing BatchSetter objects is not allowed. (Path: %{path})",{path:t,object:e,value:n}),e&&t||Object(i.b)("BatchSetter Set requires a path and an object. (Path: %{path}, Object: %{object})",{path:t,object:e,value:n});var r={rootObject:e,path:t,value:n};return this._toSetArray.push(r),this},setIfChanged:function(e,t,n){return this._isReady||Object(i.b)("BatchSetter.begin must be called on the class before calling set, reusing BatchSetter objects is not allowed. (Path: %{path}, Object: %{object})",{path:t,object:e,value:n}),n!==this._getOldValue(e,t)&&this.set(e,t,n),this},end:function(){this._performSet(this._toSetArray),this._toSetArray.length=0,this._isReady=!1;var e=this._pointerTuple;e[0]=e[1]=null,this.release(this,C)},init:function(){var e=arguments;this.__s._$Bk5$init.apply(this,e),this._toSetArray=[],this._pointerTuple=new Array(2)},_isReady:!1,_toSetArray:null,_pointerTuple:null,_performSet:function(e){for(var t=this._pointerTuple,n=0,i=e.length;n<i;n++){var r=e[n],a=r.value,s=this._resolvePointer(r,t);s[0][s[1]]=a}},_resolvePointer:function(e,t){for(var n=Object(o.a)(e.path),i=e.rootObject,r=n.length,a=0;a<r-1;a++)i=i[n[a]];return t[0]=i,t[1]=n[r-1],t},_getOldValue:function(e,t){for(var n=this._toSetArray,i=n.length-1;i>=0;i--){var r=n[i],a=r.rootObject,s=r.path,o=r.value;if(a===e&&s===t)return o}return Object(c.a)(e,t)},__superMap:{_$Bk5$init:"init"}}),C="BatchSetter: self-reference for the duration"},function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"d",function(){return d}),n.d(t,"c",function(){return p}),n.d(t,"b",function(){return g}),n.d(t,"e",function(){return m});var i=n(177),r=n(1170),a=Object(i.b)("STATUS",function(e){e("LOADED",function(e){e("RELOADING",function(e){e("QUEUED"),e("ACTIVE")})}),e("NOT_LOADED",function(e){e("LOADING",function(e){e("QUEUED"),e("ACTIVE")}),e("ERRORED"),e("MIXED_STATE")})}),s=(a.LOADED,a.NOT_LOADED),o=(s.LOADING,s.ERRORED,s.MIXED_STATE,Object(i.b)("ACTIONS",function(e){e("READ",function(e){e("LOAD"),e("LIST")}),e("WRITE",function(e){e("CREATE"),e("UPDATE"),e("DESTROY"),e("BULK")})})),c=o.READ,l=(c.LOAD,c.LIST,o.WRITE),u=(l.CREATE,l.UPDATE,l.DESTROY,l.BULK,[]);function d(){return u}var h={};function p(e){if(void 0===h[e])for(var t=0,n=u.length;t<n;t++){var i=u[t],a=Object(r.a)(i);if(a===e){h[a]=i;break}}return h[e]}var f=void 0;function g(){return f}function m(e){var t=f;return e&&e.retain&&e.retain(),f=e,t&&t.release&&t.release(),f}},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n(427),r=n(169),a=n(109),s=a.a.extend({mixinDependencies:[i.a],staticMembers:{CK_RECORD_TYPE:"CPLContainerRelation",RECORD_NAME_RE:/^(\S+)-IN-(\S+)$/,isWellFormedRecordName:function(e){return s.RECORD_NAME_RE.test(e)},getItemAndContainerFromRecordName:function(e){var t=e.match(s.RECORD_NAME_RE);if(t)return{itemId:t[1],containerId:t[2]}},getPartsFromPrimaryKey:function(e){var t=arguments,n=this.__s._$bs$getPartsFromPrimaryKey.apply(this,t),i=this.getItemAndContainerFromRecordName(n.recordName);return Object.assign(n,i)},getPrimaryKeyFromParts:function(e){return"string"==typeof e.recordName?this.__s._$lO$getPrimaryKeyFromParts.call(this,e):this.__s._$lO$getPrimaryKeyFromParts.call(this,{zone:e.zone,recordName:this.getRecordNameForItemInContainer(e.itemId,e.containerId)})},getRecordNameForItemInContainer:function(e,t){return e+"-IN-"+t},findForItemInContainer:function(e,t,n){var i=this.getRecordNameForItemInContainer(t,n),r=a.a.getPrimaryKeyWithZonePK(e,i);return this.find(r)},__superMap:{_$bs$getPartsFromPrimaryKey:"getPartsFromPrimaryKey",_$lO$getPrimaryKeyFromParts:"getPrimaryKeyFromParts"},__QUALIFIED_CLASS_NAME__:"ContainerRelation"},containerId:r.e({readOnly:!0}),itemId:r.e({readOnly:!0}),position:r.e({readOnly:!0}),isKeyAsset:r.b({readOnly:!0})})},function(e,t,n){"use strict";n.d(t,"a",function(){return f}),n.d(t,"b",function(){return m}),n(474);var i=n(180),r=n(1272),a=n(36),s=n(775),o=n(65),c=n(1169),l=n(123),u=n(111),d=n(182),h=n(252),p=n(1183),f={mixinDependencies:[n(217).a],staticMembers:{init:function(e){this.__s._$1JE$init.call(this,e);var t,n=this.template;if(n){Object(s.a)(n)||Object(o.b)("Template must be a $template");var i=0;!this.hasOwnProperty("template")&&n.classes&&(i=n.classes.length);var r=this._templateExtensionsArray;if(r){for(var l=r.length,u=0;u<l;u++)n=g(n,r[u]);this.template=n,delete this._templateExtensionsArray,(t=r).length=0,O.push(t)}var d=n.classes;if(d)for(var h=i,p=d.length;h<p;h++)if("string"==typeof d[h]){this.className=!1;break}this.registerOutletAndSubOutlets(n);var f=this._handledOutlets,m=this.superclass._handledOutlets,v=this.prototype;for(var _ in m)if(m[_]&&!f[_])if(v.getMetadata(_).outletProperty)Object(o.b)("Template error: template redefined with missing outlet: %{outletName}. If you are implementing this property in a different way, you may suppress this error by redefining the property in your subclass.",{outletName:_});else{var b="_"+_+"OutletObserver";v.registerMetadata(b,Object(a.f)(_,c.a))}}},_templateExtensionsArray:null,mixinWasApplied:function(){var e=this.templateExtensions;if(e){var t=this._templateExtensionsArray;t||(t=this._templateExtensionsArray=O.length>0?O.pop():[]),t.push(e),delete this.templateExtensions}},template:{type:"ELEMENT",tagname:"div"},templateExtensions:null,_nodeHandlers:{},_getNodeHandler:function(e){var t=e.type.toLowerCase(),n=this._nodeHandlers[t];return t&&!n&&Object(o.b)("No handler for template node type: "+t),n},registerOutletAndSubOutlets:function(e,t){if(Object(l.a)(e))return e;var n=this._getNodeHandler(e),i=n.register;i&&(e.parent=t,i.call(n,this,e))},renderNodeAndSubNodes:function(e,t){if(Object(l.a)(e))return e;var n=this._getNodeHandler(e),i=n.render;return i||Object(o.b)("No render handler for template node type: "+e.type),i.call(n,this,t,e)},_handledOutlets:Object(i.b)(Object),_outletWasRegistered:function(e){this._handledOutlets[e]=!0},__superMap:{_$1JE$init:"init"}},init:function(e){var t=arguments;(this.element=this.generateElementNode()).view=this,this.__s._$3UC$init.apply(this,t)},_getRenderedTemplate:function(e,t){var n=e._renderedValue;return n||(n=e._renderedValue=r.a.create()),n.get(t)},generateElementNode:function(){var e=this.constructor.template;if(e){var t=this.document,n=this._getRenderedTemplate(e,t);return n||(n=this.constructor.renderNodeAndSubNodes(e,t),e._renderedValue.set(t,n)),n.cloneNode(!0)}},__superMap:{_$3UC$init:"init"}};function g(e,t){var n=m(e);for(var i in t){var r=t[i];if(Object(u.a)(r))for(var a=r.length,c=0;c<a;c++)S(n,i,r[c]);else Object(s.a)(r)?S(n,i,r):Object(o.b)("Template extension must be a $template or an array of $templates.")}return n}function m(e){return Object(d.b)(e,y)}var v=Object(h.a)(["attribute","attributes","children","classes","data","falsevalue","index","name","namespace","property","styles","tagname","truevalue","type","unit"]),_=Object(h.a)(["styles","classes","attributes","children"]);function b(e,t){return _[t]?I:y}function y(e,t,n){return v[n]?Object(d.b)(e,b(0,n)):d.a}function I(e,t,n){return Object(d.b)(e,b(0,n))}var w="ext";function S(e,t,n){n=m(n);var i,r,a=(i=e,r=i._namesCache,r||(i._namesCache=r=function e(t,n){if(t){var i=t.name;if(i){var r=n[i];r&&t!==r?Object(o.b)("invalid node name: '"+i+"' is already used"):n[i]=t}var a=t.children;if(a)for(var s=a.length,c=0;c<s;c++)e(a[c],n);return n}}(i,{root:i})),r)[t];a||Object(o.b)("unable to find outlet with name "+t+" to extend"),n.tagname!==w&&(a.tagname=n.tagname),a.attributes=Object(p.a)(a.attributes,n.attributes),a.styles=Object(p.a)(a.styles,n.styles),a.children=C(a.children,n.children),a.classes=C(a.classes,n.classes)}function C(){for(var e,t=arguments.length,n=0;n<t;n++){var i=arguments[n];i&&(e=e?e.concat(i):i)}return e}var O=[]},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n(68),r=n(1169),a=i.a.extend({nodeType:"",generateLookupFunction:function(e,t){return function(n){return n=n.childNodes[e.index],t(n)}},initializeMember:function(e,t){var n=this.nodeType.toLowerCase();e._nodeHandlers[n]=this},render:r.a,register:r.a,staticMembers:{__QUALIFIED_CLASS_NAME__:"TemplateHandler"}})},function(e,t,n){"use strict";n.d(t,"b",function(){return c}),n.d(t,"a",function(){return d}),n.d(t,"c",function(){return h}),n(59);var i=n(775),r=n(172),a=n(151),s={count:0},o=void 0;function c(e){if(void 0===o)try{o=a.a.getNumberFormatter().format}catch(e){var t=void 0!==window.Intl&&window.Intl!==window.IntlPolyfill;o=t?new Intl.NumberFormat(window.navigator.language).format:String}return o(e)}var l=new Map,u={};function d(e,t){var n=l.get(t);if(void 0!==n)return n(e);var i=JSON.stringify(t),r=u[i];if(void 0!==r)return r(e);var s=void 0;try{s=a.a.getDateTimeFormatter(t).format}catch(e){s=void 0!==window.Intl&&window.Intl!==window.IntlPolyfill?new Intl.DateTimeFormat(window.navigator.language,t).format:Date}return l.set(t,s),u[i]=s,s(e)}function h(e,t){var n=i.a(t)?0|t.count:t,a=n===t?s:t,o=e[Math.min(n,e.length-1)];return a.count=c(n),r.d(o,a)}},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var i,r,a=n(1185),s=n(69),o=n(65),c=n(1184),l=n(329),u=(i=a.a,(r=function(e){var t=i.create();try{e(t.resolve.bind(t),t.reject.bind(t))}catch(e){t.reject(e)}return t}).all=i.all.bind(i),r.race=i.race.bind(i),r.resolve=i.resolve.bind(i),r.reject=i.reject.bind(i),r),d={retryDelayTimes:[5e3,1e4,15e3,3e4],shouldThrowMaxRetryFatalError:!0,retryRequest:function(e,t){var n,i=this;return(n=regeneratorRuntime.mark(function n(){var r,u,d,h,p,f,g,m,v;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(r=s.b().feedbackService,u=t._retryCount,h=d=void 0===u?0:u,t._retryCount=++d,p=d>i.retryDelayTimes.length,r&&r.report("ckRetryCount",{retryErrorCode:e.ckErrorCode,retryAfterValue:e.retryAfter,retryOperationType:String(t.type),retryUUID:e.uuid,retryCount:d,retryCountMaxReached:p}),!p){n.next=12;break}if(!1!==i.shouldThrowMaxRetryFatalError){n.next=10;break}throw new l.a(e);case 10:return o.b("Retry-able error",e),n.abrupt("return");case 12:return f=e.retryAfter,g=Number.isSafeInteger(f)&&f>0,m=g?1e3*f:i.retryDelayTimes[h],v=a.a.create(),c.a(function(){i.action(t).then(function(e){return v.resolve(e)}).catch(function(e){return v.reject(e)})},m),n.abrupt("return",v);case 19:case"end":return n.stop()}},n,i)}),function(){var e=n.apply(this,arguments);return new u(function(t,n){return function i(r,a){try{var s=e[r](a),o=s.value}catch(e){return void n(e)}if(!s.done)return u.resolve(o).then(function(e){i("next",e)},function(e){i("throw",e)});t(o)}("next")})})()},contextError:function(e,t){var n=arguments;if(e.ckErrorCode===CloudKit.CKError.ATOMIC_ERROR)return this.retryRequest(e,t);this.__s._$s9$contextError.apply(this,n)},serverError:function(e,t){return this.retryRequest(e,t)},__superMap:{_$s9$contextError:"contextError"}}},function(e,t,n){"use strict";n.d(t,"c",function(){return h}),n.d(t,"a",function(){return p}),n.d(t,"b",function(){return g});var i=n(1178),r=n(1169),a=n(1171),s=n(1173),o=n(252),c=n(36),l=n(34);function u(e,t){for(var n=i.a;t.parent;)n=e._getNodeHandler(t).generateLookupFunction(t,n),t=t.parent;return n}function d(e,t){return t(e)}function h(e,t,n,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:r.a,h=t.name,p=e.prototype,f="_"+h+"OutletObserver",g=p.getMetadataByType(c.c),m=void 0,v=void 0,_=void 0;if(g.hasOwnProperty(f)){var b=g[f];m=b.transforms,v=b.paths,_=b.sideEffects}else{m=[],v=[],_=[];var y="_render"+h+"Outlet";p[y]=function(e){for(var t=v.length,n=this.element,i=[],r=0;r<t;r++)i[r]=d(n,v[r]);(this[y]=function(e){for(var n=0;n<t;n++){var r=m[n].call(this,i[n],e);r&&(i[n]=r),_[n].call(this,r,e)}}).call(this,e)};var I=Object(a.a)(h)[0];Object(s.a)(p.getMetadata(I),l.a)||(i||(i={}),i.outletProperty=!0,p.registerMetadata(I,l.a.define(i)));var w=function(e){this[y](e)};w.displayName=h+" template outlet observer";var S=Object(c.f)({inputs:[h],callback:w});S.transforms=m,S.paths=v,S.sideEffects=_,p.registerMetadata(f,S),e._outletWasRegistered(I)}var C=t.attributes;if(C){var O=C.signal;O&&p.registerMetadata(O,Object(c.f)(f,r.a))}m.push(n),_.push(o),v.push(u(e,t))}function p(e){if(e.hasOwnProperty("validvalues")){var t=Object(o.a)(e.validvalues);return function(e){if(t[e])return e}}if(e.hasOwnProperty("truevalue")){var n=e.truevalue;if(e.hasOwnProperty("falsevalue")){var i=e.falsevalue;return function(e){return e?n:i}}return function(e){if(e)return n}}return f}var f=function(e){return e};function g(e,t,n){var i=u(e,n);e.prototype.registerMetadata(t,Object(l.b)({readOnly:!0,dependencies:["element"],get:Object.assign(function(){return d(this.element,i)},{__CW__getter:function(e,t,n,r){return d(r.internalGet(this,t[0+n]),i)}})}))}},function(e,t,n){"use strict";n.d(t,"a",function(){return b});var i,r,a=n(1185),s=n(80),o=n(36),c=n(781),l=n(34),u=n(69),d=n(93),h=n(784),p=n(1169),f=n(423),g=n(271),m=n(150),v=(i=a.a,(r=function(e){var t=i.create();try{e(t.resolve.bind(t),t.reject.bind(t))}catch(e){t.reject(e)}return t}).all=i.all.bind(i),r.race=i.race.bind(i),r.resolve=i.resolve.bind(i),r.reject=i.reject.bind(i),r);function _(e){return function(){var t=e.apply(this,arguments);return new v(function(e,n){return function i(r,a){try{var s=t[r](a),o=s.value}catch(e){return void n(e)}if(!s.done)return v.resolve(o).then(function(e){i("next",e)},function(e){i("throw",e)});e(o)}("next")})}}var b=s.a.extend(o.a,c.a,{mixinDependencies:[f.a],initialize:function(){var e=g.a.defaultInstance;e.delegate=this,this._user=e.user},isAuthenticated:l.b({readOnly:!0,dependencies:["user"],get:Object.assign(function(){return void 0!==this.user},{__CW__getter:function(e,t,n,i){return void 0!==i.internalGet(this,t[0+n])}}),didChange:function(e){var t=u.b();void 0!==t&&(!0===e?(t.isStartupFetchingCplZone=!0,t.isStartupFetchingCplContainers=!0,t.startup(!0)):t.shutdownCpl())}}),isAuthenticating:l.b(!1),user:l.b({readOnly:!0,binding:d.c("_user")}),authenticate:function(){var e=this;return _(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.isAuthenticating=!0,t.next=3,g.a.defaultInstance.authenticate();case 3:if(n=t.sent,e.isAuthenticating=!1,!n.isFailed){t.next=8;break}return h.b.error("Unable to authenticate user"),t.abrupt("return",!1);case 8:if(!n.isCancelled){t.next=10;break}return t.abrupt("return",!1);case 10:return t.next=12,u.b().startup();case 12:return t.abrupt("return",!0);case 13:case"end":return t.stop()}},t,e)}))()},unauthenticate:function(){var e=this;return _(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.defaultInstance.unauthenticate();case 2:if(!e.sent.error){e.next=6;break}return h.b.error("Unable to unauthenticate user"),e.abrupt("return",!1);case 6:return e.abrupt("return",!0);case 7:case"end":return e.stop()}},t,e)}))()},_user:l.b({strong:!0,type:m.a}),authenticationStepDidComplete:p.a,authenticationDidComplete:function(e){this._user=e.user},staticMembers:{__QUALIFIED_CLASS_NAME__:"SignInService"}})},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var i=n(49),r=n(54),a=n(80),s=n(180),o=n(1185),c=n(96),l={mixinDependencies:[i.a],action:r.a.create()},u=a.a.extend(l,{dependencies:Object(s.b)([]),run:function(e){var t=this,n=e.initializerPromises,i=this.constructor,r=n.get(i);if(r)return r;var a=this.dependencies.map(function(t){return t.create().run(e)});return r=o.a.all(a).then(function(){return t.action(e)}).catch(Object(c.a)(function(e){throw e})),n.set(i,r),r},staticMembers:{__QUALIFIED_CLASS_NAME__:"AppInitializer"}})},function(e,t,n){"use strict";n.d(t,"a",function(){return f}),n.d(t,"b",function(){return g});var i=n(80),r=n(180),a=n(177),s=n(36),o=n(65),c=n(798),l=n(1192),u=n(152),d=n(263),h=n(69),p=n(92),f=i.a.extend(s.a,{staticMembers:{getStoreIdForPrimaryKey:function(e,t){return e||Object(o.b)("CW.Data.Store.getStoreIdForPrimaryKey: No model class provided.",{store:this}),t||Object(o.b)("CW.Data.Store.getStoreIdForPrimaryKey: No primary key provided.",{store:this,modelClass:e}),this.getPrimaryKeysToStoreIds(e)[t]||this.registerPrimaryKey(e,t)},setPrimaryKeyForStoreId:function(e,t){e||Object(o.b)("CW.Data.Store.setPrimaryKeyForStoreId: No storeId provided.",{store:this}),t||Object(o.b)("CW.Data.Store.setPrimaryKeyForStoreId: No primary key provided.",{store:this});var n=f.getModelClassForStoreId(e);n||Object(o.b)("CW.Data.Store.setPrimaryKeyForStoreId: No model class could be found for storeId: %{storeId}",{store:this,storeId:e}),this.registerPrimaryKey(n,t,e)},getModelClassForStoreId:function(e){return f.storeIdsToModelClass[e]},getPrimaryKeyForStoreId:function(e){return f.storeIdsToPrimaryKey[e]},getPrimaryKeysToStoreIds:function(e){var t=e.primaryKeysToStoreIds;if(!t){var n=this.modelClassToPrimaryKeysToStoreIds;(t=n.get(e))||(t={},n.set(e,t)),e.primaryKeysToStoreIds=t}return t},storeIdsToModelClass:{},storeIdsToPrimaryKey:{},modelClassToPrimaryKeysToStoreIds:new Map,resetStoreIds:function(){var e=this.storeIdsToModelClass,t=Object.values(e),n=Array.isArray(t),i=0;for(t=n?t:t[Symbol.iterator]();;){var r;if(n){if(i>=t.length)break;r=t[i++]}else{if((i=t.next()).done)break;r=i.value}r.primaryKeysToStoreIds=null}this.storeIdsToModelClass={},this.storeIdsToPrimaryKey={},this.modelClassToPrimaryKeysToStoreIds=new Map},registerPrimaryKey:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:++m,i=this.storeIdsToPrimaryKey,r=i[n];if(t===r)return n;var a=this.getPrimaryKeysToStoreIds(e);return a[t]=n,this.storeIdsToModelClass[n]=e,r&&delete a[r],i[n]=t,n},__QUALIFIED_CLASS_NAME__:"Store"},autocommit:!1,forkOnRead:!1,dataDidChangeForPrimaryKeysIsEnabled:!1,commit:function(){Object(o.b)("CW.Store#commit is not implemented. Only stores mixing in CW.DataManager may commit at this time.")},commitStoreIds:function(e){Object(o.b)("CW.Store#commitStoreIds is not implemented. Only stores mixing in CW.DataManager may commit at this time.")},commitPrimaryKeys:function(e,t){Object(o.b)("CW.Store#commitPrimaryKeys is not implemented. Only stores mixing in CW.DataManager may commit at this time.")},MergeStrategy:void 0,getStoreStatus:function(e,t){e||Object(o.b)("CW.Data.Store#getStoreStatus: No model class provided.",{store:this}),t||Object(o.b)("CW.Data.Store#getStoreStatus: No primary key provided.",{store:this,modelClass:e});var n=this.constructor.getStoreIdForPrimaryKey(e,t);if(this.isDataForked(n)){var i=g.DIRTY,r=this._changes,a=r&&r.getChangeForStoreId(n),s=a&&a.changeType;return s===h.a.WRITE.CREATE?i.CREATED:s===h.a.WRITE.UPDATE?i.UPDATED:s===h.a.WRITE.DESTROY?i.DESTROYED:i.READ}return null===this.readData(n)?g.CLEAN.DESTROYED:g.CLEAN},getModel:function(e,t){e||Object(o.b)("CW.Data.Store#getModel: No model class provided.",{store:this}),t||Object(o.b)("CW.Data.Store#getModel: No primary key provided.",{store:this,modelClass:e});var n=this.constructor.getStoreIdForPrimaryKey(e,t);if(this.hasDataFor(n))return this.materializeModel(n)},getAllModels:function(e){var t=this;e||Object(o.b)("CW.Data.Store#getAllModels: No model class provided.",{store:this});var n=Array.from(Object.values(this.constructor.getPrimaryKeysToStoreIds(e))).filter(function(e){return t.hasDataFor(e)});return p.a.createFromStoreIds(n,e,this)},materializeModel:function(e){e||Object(o.b)("CW.Data.Store#materializedModel: No store ID provided.",{store:this});var t=this._materializedModels,n=t[e];if(!n&&this.hasDataFor(e)){var i=this.constructor.getModelClassForStoreId(e);i||Object(o.b)("CW.Data.Store#materializeModel: No model class defined for store ID: `"+e+"`",{store:this,storeId:e}),this.constructor.getPrimaryKeyForStoreId(e)||Object(o.b)("CW.Data.Store#materializeModel: No primary key defined for store ID: `"+e+"`",{store:this,modelClass:i,storeId:e}),n=i.createWithStore(this,e),t[e]=n}return n&&n.isPooled&&n.constructor.reclaim(n),n},getExistingModel:function(e){return this._materializedModels[e]},hasExistingModel:function(e){return!!this.getExistingModel(e)},linkModel:function(e,t,n){var i,r;e||Object(o.b)("CW.Data.Store#linkModel: No model provided.",{store:this}),t||(r=e.constructor,void 0!==(i=e.getPrimaryKey())&&null!==i||!n||(i=n[r.getDataKeyForKey(r.primaryKey)]),t=this.constructor.getStoreIdForPrimaryKey(r,i));var a=e._cwStore;if(a){if(a===this)return;Object(o.b)("CW.Data.Store#linkModel: Model has previously been linked to a store.",{store:this,storeId:t,model:e,primaryKey:i,previousStore:a,newStore:this})}this.hasDataFor(t)||(this.writeData(t,n||e.getDataHash()),delete e.__cwDataHash),e._cwStore=this;var s=this._materializedModels;s[t]&&Object(o.b)("CW.Data.Store#linkModel: Attempting to register model that already exists.",{store:this,storeId:t,modelClass:r,primaryKey:i,previousRegisteredModel:s[t],newRegisteredModel:e}),s[t]=e,e._cwStoreId=t},unlinkModel:function(e){e||Object(o.b)("CW.Data.Store#unlinkModel: No model provided.",{store:this}),e._cwStore=null;var t=this._materializedModels;t&&delete t[e._cwStoreId],e._cwStoreId=null},deleteModels:function(e,t){var n;if(Array.isArray(t))for(var i=0,r=t.length;i<r;i++){var a=t[i];n=this.constructor.getStoreIdForPrimaryKey(e,a),this.deleteData(n)}else n=this.constructor.getStoreIdForPrimaryKey(e,t),this.deleteData(n);this.dataDidChange()},dataDidChange:Object(s.g)(),didChangeDataForStoreIds:function(e){var t=this;if(this.dataDidChangeForPrimaryKeysIsEnabled&&0!==e.length){var n=e.reduce(function(e,n){var i=t.constructor.getPrimaryKeyForStoreId(n),r=t.constructor.getModelClassForStoreId(n);return e.has(r)?e.get(r).add(i):e.set(r,new Set([i])),e},new Map);this.dataDidChangeForPrimaryKeys(n)}},dataDidChangeForPrimaryKeys:Object(s.g)(),readData:function(e){if(this.forkOnRead){this._forkIfNeeded(e);var t=this._materializedModels[e];t&&t.propertyChanged("storeStatus")}return this._dataHashes[e]},readDataForPrimaryKey:function(e,t){var n=this.constructor.getStoreIdForPrimaryKey(e,t);return this.readData(n)},readOriginalData:function(e){var t=this._originalDataHashes;if(t)return t[e]},willWriteData:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this._forkIfNeeded(e,t)},didWriteData:function(e){this.recordChangeToData(e),this.didChangeDataForStoreIds([e])},writeData:function(e,t){this.willWriteData(e,!1),this._dataHashes[e]=t,this.didWriteData(e)},writeDataProperty:function(e,t,n){var i=this._dataHashes;if(this.hasDataFor(e)){var r=i[e][t];if(Object(c.a)(r,n))return}this.willWriteData(e);var a=i[e];a||(a=i[e]={}),a[t]=n,this.didWriteData(e)},updateData:function(e,t){if(this.hasDataFor(e)){this.willWriteData(e);var n=this._dataHashes[e];for(var i in t)n[i]=t[i];this.didWriteData(e)}else this.writeData(e,t)},resetData:function(e){delete this._dataHashes[e];var t=this._originalDataHashes;t&&delete t[e],this.didChangeDataForStoreIds([e])},resetAllData:function(){for(var e=this._dataHashes,t=Object.keys(e),n=0,i=t.length;n<i;n++)delete e[t[n]];delete this._originalDataHashes,this.didChangeDataForStoreIds(t)},deleteData:function(e){return this.writeData(e,null)},hasDataFor:function(e){return!!this._dataHashes[e]},isDataForked:function(e){return this._dataHashes.hasOwnProperty(e)},_dataHashes:Object(r.b)(Object),_materializedModels:Object(r.b)(Object),_originalDataHashes:null,_autocommitOnChange:Object(s.f)("dataDidChange",function(){this.autocommit&&this._changes&&this._changes.length>0&&this.commit()}),_forkIfNeeded:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!this.isDataForked(e)){var n=this._dataHashes,i=n[e];return(this._originalDataHashes||(this._originalDataHashes={}))[e]=Object(l.a)(i),n[e]=i&&t?Object(l.a)(i):{},!0}return!1},recordChangeToData:function(e){if(!e)throw Object(o.b)("Recording changes in Store for non-existent storeId",{storeId:e});var t=this.readOriginalData(e),n=this.readData(e),i=d.a.create(e,t,n);(this._changes||(this._changes=u.a.create())).recordChange(i);var r=this._materializedModels[e];return r&&r.propertyChanged("storeStatus"),i},_changes:null}),g=Object(a.b)("STATUS",function(e){e("CLEAN",function(e){e("DESTROYED")}),e("DIRTY",function(e){e("READ"),e("CREATED"),e("UPDATED"),e("DESTROYED")})}),m=0},function(e,t,n){"use strict";var i=n(87),r=n(34),a=n(1277),s=n(80).a.extend({nestingPairs:{'"':'"',"'":"'","<":">","[":"]","(":")","{":"}"},escapeCharacters:{"\\":!0},delimiters:{",":!0,";":!0},tokenClasses:{},staticMembers:{valueForNode:function e(t){if("string"==typeof t)return t;for(var n=[],i=0;i<t.length;++i)n.push(e(t[i]));return n.join("")},visit:function e(t,n,i,r){if(r=r||[],"string"==typeof t)return i&&i.push(t),n(t,t,r);r.push(t);for(var a=[],s=0;s<t.length;++s)e(t[s],n,a,r);r.pop();var o=a.join("");return i&&i.push(o),n(t,o,r)},__QUALIFIED_CLASS_NAME__:"TreeTokenizer"},classifyCharacter:function(e){var t=this.tokenClasses;for(var n in t)if(t[n].test(e))return n},ascend:function(e){e&&this.currentNode.push(e),this.groupInterDelimiterContent(this.currentNode),this.terminators.pop();var t=this.parentNodes.pop();t&&(this.currentNode=t)},descend:function(e,t){this.terminators.push(t),this.parentNodes.push(this.currentNode);var n=[e];this.currentNode.push(n),this.currentNode=n},newToken:function(){var e=this.token;e&&(this.currentNode.push(e),this.token="")},groupInterDelimiterContent:function(e){for(var t=0,n=e.length-1;n>t&&e[n]===this.nestingPairs[e[t]];)++t,--n;for(var i=!1,r=n;r>=t;--r){var a=e[r];"string"==typeof a&&this.delimiters[a]&&(i=!0,n-r>1&&e.splice(r+1,n-r,e.slice(r+1,n+1)),n=r-1)}i&&n>1&&e.splice(t,n-t+1,e.slice(t,n+1))},build:function(e){this.rootNode=[],this.currentNode=this.rootNode,this.parentNodes=[],this.terminators=[],this.token="";for(var t=void 0,n=void 0,i=void 0,r=0,a=e.length;r<a;++r){if(t=n,n=e.charAt(r),!this.escapeCharacters[t]){if(this.delimiters[n]){this.newToken(),this.currentNode.push(n);continue}if(n===this.terminators[this.terminators.length-1]){this.newToken(),this.ascend(n);continue}var s=this.nestingPairs[n];if(s){this.newToken(),this.descend(n,s);continue}}var o=this.classifyCharacter(n);o!==i&&(i=o,this.newToken()),this.token+=n}for(this.newToken();this.parentNodes.length;)this.ascend();return this.groupInterDelimiterContent(this.rootNode),this.rootNode}});n.d(t,"a",function(){return o});var o=i.a.extend({staticMembers:{currentUserRecordName:r.b(),isCurrentUserUnauthenticated:r.b(),createFromString:function(e){return this.create(w(e))},isValidEmailAddress:_,splitAddressString:function e(t){if(t=(t||"").trim(),/[\r\n]+/.test(t)){for(var n=t.split(/\s*[\r\n]+\s*/),i=[],r=n&&n.length||0,a=0;a<r;++a){var o=n[a];o&&(i=i.concat(e(o)))}return i}if(!/[,;]+/.test(t))return[t];t=y(t,m);for(var c=v.build(t),l=[],u="",d=c.length,h=0;h<d;++h){var p=s.valueForNode(c[h]);if(/^[\s,;]+$/.test(p)){var f=w(u).lookupInfo;!f||f.phoneNumber||f.emailAddress?(l.push(u.trim()),u=""):u+=p}else u+=p}return l.push(u.trim()),l},__QUALIFIED_CLASS_NAME__:"UserIdentity"},userRecordName:i.c(),lookupInfo:i.c(),nameComponents:i.c(),givenName:r.b({dependencies:["nameComponents"],readOnly:!0,get:Object.assign(function(){var e=this.nameComponents;return e?e.givenName:null},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return r?r.givenName:null}})}),familyName:r.b({dependencies:["nameComponents"],readOnly:!0,get:Object.assign(function(){var e=this.nameComponents;return e?e.familyName:null},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return r?r.familyName:null}})}),emailAddress:r.b({dependencies:["lookupInfo"],readOnly:!0,get:Object.assign(function(){var e=this.lookupInfo;return e?e.emailAddress:null},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return r?r.emailAddress:null}})}),phoneNumber:r.b({dependencies:["lookupInfo"],readOnly:!0,get:Object.assign(function(){var e=this.lookupInfo;return e?e.phoneNumber:null},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return r?r.phoneNumber:null}})}),formattedPhoneNumber:r.b({dependencies:["phoneNumber"],readOnly:!0,get:Object.assign(function(){var e=this.phoneNumber;if(!e)return"";var t=e;/^\s*\+/.test(t)||(t="+"+t);var n=this._phoneNumberFormatterResults;if(n&&n.input===t)return n.output;var i=this;return a.a.sharedInstance.format(t).then(function(e){i._phoneNumberFormatterResults=e,i.propertyChanged("formattedPhoneNumber")}).catch(function(t){return i._phoneNumberFormatterResults=null,e}),e},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);if(!r)return"";var s=r;/^\s*\+/.test(s)||(s="+"+s);var o=this._phoneNumberFormatterResults;if(o&&o.input===s)return o.output;var c=this;return a.a.sharedInstance.format(s).then(function(e){c._phoneNumberFormatterResults=e,c.propertyChanged("formattedPhoneNumber")}).catch(function(e){return c._phoneNumberFormatterResults=null,r}),r}})})});function c(e){return e&&e===o.currentUserRecordName}o.prototype.registerMetadata("isCurrentlyLoggedInUser",r.b({allowAtCreate:!0,readOnly:!0,dependencies:["userRecordName",o.bindingFor("currentUserRecordName")],get:Object.assign(function(){return c(this.userRecordName)},{__CW__getter:function(e,t,n,i){return c(i.internalGet(this,t[0+n]))}})}));var l=/[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,30}/gi,u=/[a-z\u007E-\uFFFF0-9._%+-]+@[a-z\u007E-\uFFFF0-9.-]+\.[a-z\u007E-\uFFFF]{2,30}/gi,d=/([a-z\u007E-\uFFFF0-9._%+-]+@[a-z\u007E-\uFFFF0-9.-]+\.[a-z\u007E-\uFFFF]{2,30}\s*){2,}/gi,h="0-9\\uff10-\\uff19\\u0660-\\u0669\\u06F0-\\u06F9\\u0966-\\u096F\\u09E6-\\u09FF\\u0E50-\\u0E59",p=new RegExp("([+\\(])?((["+h+"]+)([\\(\\)\\s\\-\\+\\.\\,]{1,3}|x|ext))+(["+h+"]+)","gi"),f=new RegExp("([+\\(])?(["+h+"]+)(([\\(\\)\\s\\-\\+\\.\\,]{1,3}|x|ext)(["+h+"a-z]+))+","gi"),g=new RegExp("\\+?(["+h+"]+)","gi"),m={"<":">","(":")","{":"}","'":"'",'"':'"'},v=s.create();function _(e){l.lastIndex=0;var t=l.exec(e);return!(!t||1!==t.length||t[0]!==e)}function b(e,t,n,i,r,a){t.lastIndex=0;var s=t.exec(e),o=s&&s[0].trim();if(r&&o&&(o=r(o)),!o)return e;i[n]=o;var c=e.indexOf(o),l=c+o.length,u=e.substr(0,c).trim(),d=e.substr(l).trim();if(a)for(;d.charAt(0)===a[u.charAt(u.length-1)]&&d.charAt(0);)u=u.substr(0,u.length-1),d=d.substr(1);return u+d}function y(e,t){for(e=e.trim();e.charAt(e.length-1)===t[e.charAt(0)];)e=e.substr(1,e.length-2);return e}function I(e,t){var n=e=(e=(e=y(e,m)).replace(/^[,;\s]*(.*)[,;\s]*$/,"$1")).replace(/,\s*[A-Z]+$/i,""),i="",r=/^(.*)\s(\S+)\s*$/.exec(e);r&&3===r.length&&(n=r[2],i=r[1]),t.familyName=n.trim(),t.givenName=i.trim()}function w(e){var t={nameComponents:{},lookupInfo:{}};return e=e.replace(/[\u00A0\u1680\u180e\u2000-\u2009\u200a\u200b\u202f\u205f\u3000]/g," "),d.lastIndex=0,d.test(e)?(I(e,t.nameComponents),t):(e=function(e,t){var n=b(e,u,"emailAddress",t,null,m);return _(t.emailAddress)?n:(delete t.emailAddress,e)}(e,t.lookupInfo),t.lookupInfo.emailAddress||(e=function(e,t){function n(e){return e.replace(new RegExp("[^"+h+"]","g"),"").length>=5?e:null}return e=b(e,p,"phoneNumber",t,n,m),t.phoneNumber?e:(e=b(e,f,"phoneNumber",t,function(e){return e.replace(new RegExp("[^"+h+"]","g"),"").length+e.replace(/[^A-Za-z]/g,"").length>=5?e:null},m),t.phoneNumber?e:e=b(e,g,"phoneNumber",t,n,m))}(e,t.lookupInfo)),I(e,t.nameComponents),t)}},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n(1170),r=n(121),a=n(68),s=n(41),o=a.a.extend(s.b,{toString:function(){return"[Object "+Object(i.a)(this)+":"+Object(r.a)(this)+"]"},staticMembers:{__QUALIFIED_CLASS_NAME__:"CoreObject"}})},function(e,t,n){"use strict";n.d(t,"b",function(){return u}),n.d(t,"a",function(){return p});var i=n(177),r=n(80),a=n(49),s=n(122),o=n(41),c=n(54),l=n(186),u=Object(i.b)("GestureRecognizerState",function(e){e("Possible"),e("Failed"),e("Ended"),e("Began"),e("Changed"),e("Cancelled")}),d=u.Possible,h=u.Failed,p=r.a.extend(a.a,s.a,{delegate:l.a,event:"",shouldPreventDefault:!0,location:null,ignore:function(e){this.sequence.gestureRecognizerIgnoredPointerId(this,e.pointerId)},isEnabled:!0,state:Object(o.c)({type:u,defaultValue:d,set:function(e){if(this._isDone&&e!==h)throw new Error("GestureRecognizer: cannot set `state`. The state machine has already finished.");var t=this._stateMachine.next(e),n=t.value,i=t.done;n&&(e=n),i&&!this._isDone&&(this._isDone=!0),this._state=e;var r=this.sequence;return r&&r.gestureRecognizerStateChanged(this,e),this._state}}),view:null,pointerDown:c.a.define(),pointerMove:c.a.define(),pointerUp:c.a.define(),pointerCancel:c.a.define(),reset:function(){this._isDone=!1,this.sequence=null,this._initializeStateMachine()},shouldBegin:function(){return this.delegate.gestureRecognizerShouldBegin(this)},shouldReceive:function(e){return this.delegate.gestureRecognizerShouldReceive(this,e)},shouldRecognizeSimultaneouslyWith:function(e){return this.delegate.gestureRecognizerShouldRecognizeSimultaneouslyWith(this,e)},shouldRequireFailureOf:function(e){return this.delegate.gestureRecognizerShouldRequireFailureOf(this,e)},shouldBeRequiredToFailBy:function(e){return this.delegate.gestureRecognizerShouldBeRequiredToFailBy(this,e)},gestureWasRecognized:function(){var e=this.event;if(!e)throw new Error("GestureRecognizer: event may not be empty");this.view.sendEvent(e,this)},stateGenerator:null,_initializeStateMachine:function(){this._stateMachine=this.stateGenerator(this),this._stateMachine.next(),this.state=d},init:function(){var e=arguments;this._stateMachine=this.stateGenerator(this),this._stateMachine.next(),this.__s._$5EZ$init.apply(this,e)},initFromPool:function(){var e=arguments;this._initializeStateMachine(),this.__s._$5Fw$initFromPool.apply(this,e)},didEnterPool:function(){this.reset();var e=this.constructor.prototype;this.isEnabled=e.isEnabled,this.shouldPreventDefault=e.shouldPreventDefault,this.__s._$5Li$didEnterPool.call(this)},dispose:function(){this._isDone=!1,this.__s._$5O3$dispose.call(this)},_stateMachine:null,_isDone:!1,sequence:Object(o.c)({strong:!0}),__superMap:{_$5EZ$init:"init",_$5Fw$initFromPool:"initFromPool",_$5Li$didEnterPool:"didEnterPool",_$5O3$dispose:"dispose"},staticMembers:{__QUALIFIED_CLASS_NAME__:"GestureRecognizer"}})},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n(41),r=n(354).a.extend({metadataType:i.a,staticMembers:{__QUALIFIED_CLASS_NAME__:"RequiredProperty"}})},function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return s});var i=n(41),r=n(96);function a(e){return i.c(function(){return function(){if(!this.isDisposed)return e.apply(this,arguments)}.bind(this)})}function s(e){return i.c(function(){return r.a(function(){if(!this.isDisposed)return e.apply(this,arguments)}).bind(this)})}},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n(68),r=n(1169),a=n(1173),s=n(65),o=n(39),c=n(94).a.extend({debugType:"Base",property:null,key:null,init:function(e){this.property=e,this.key=e.key,this.get=e._transformedGet,this.internalGet=e.internalGet,void 0!==e.cacheable&&(this.isCacheable=e.cacheable),this.dependencyCount=e.dependencies?e.dependencies.length:0,this.readOnly=e.readOnly,this.reference=e.reference,this.collectors=[],this.collectorsCount=0,this.validateType=e._validateType,e.isDependentComputedProperty&&(this._validateNewParent=r.a,this.isDependentComputedProperty=!0),this.__s._$lO$init.call(this)},isDependentComputedProperty:!1,readOnly:!1,validateType:null,get:null,internalGet:null,setUpNode:r.a,calculateValueForNode:function(e,t,n){var r=o.a.getDataForNode(t),c=this.getCollector();o.a.getParentIDs(t,c);for(var l=o.a.getValueForNode(c[0]),u=1;u<c.length;u++)c[u-1]=c[u];c[c.length-1]=o.a.NULL_INDEX;var d=this.get.call(e,l,c,0,this.property);if(this.releaseCollector(c),!this.validateType(d)){var h=this.property.type;Object(a.a)(d,i.a)?Object(s.b)('Type error: cannot return %{value} (an instance of %{constructor}) from observable property "%{key}" of %{object} which expected a %{type}. Value passed type check at `set` time, but was transformed inappropriately by an upstream property’s getter or setter.',{object:e,key:this.key,value:d,constructor:d.constructor,type:h}):Object(s.b)('Type error: cannot return value %{value} from observable property "%{key}" of %{object} which expected a %{type}. Value passed type check at `set` time, but was transformed inappropriately by an upstream property’s getter or setter.',{object:e,key:this.key,value:d,type:h})}return this._manageForCalculateValueForNode(e,r,d),d},_manageForCalculateValueForNode:r.a,didAddParentToNode:function(e,t,n){this._validateNewParent(t,n)},_validateNewParent:function(e,t){o.a.getManagerForNode(t).validateDescendantDownstreamNodeManager(this,e,t)},validateDescendantDownstreamNodeManager:r.a,_throwValidationError:function(e,t,n){Object(s.b)(n,{reference:e.reference,parentReference:this.reference,key:e.key,object:o.a.getContextForNode(t),parentKey:this.key,property:e.property})},dependencyCount:null,collectors:null,collectorsCount:0,getCollector:function(){return this.collectorsCount>0?this.collectors[--this.collectorsCount]:new Array(this.dependencyCount)},releaseCollector:function(e){var t,n=this.dependencyCount;for(t=0;t<n;t++)e[t]=null;this.collectors[this.collectorsCount++]=e},addDebugInfoForNode:function(e,t,n){t.type=this.debugType+" Downstream Node",t.object=e,t.key=this.key,t.toString=function(){return e+"."+this.key+" (Downstream)"},t.name=t.toString()},__superMap:{_$lO$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"DownstreamNodeManager"}})},function(e,t,n){"use strict";n.d(t,"a",function(){return c}),n.d(t,"b",function(){return l});var i=n(68),r=n(1169),a=n(65),s=n(1173),o=n(39),c={},l=n(94).a.extend({debugType:"Base",key:null,init:function(e){e&&(this.property=e,this.key=e.key,this.set=e._transformedSet,this.internalGet=e.internalGet,this.validateType=e._validateType,this._valueOffsetCount=1,this.setterReturnArray=new Array(e.writeDependencies?e.writeDependencies.length:e.dependencies?e.dependencies.length:0),this.clearReturnArray(this.setterReturnArray)),this.dependencyCollector=[],this.__s._$dx$init.call(this)},property:null,isCacheable:!0,validateType:null,reference:null,set:null,internalGet:null,_valueOffsetCount:0,setUpNode:r.a,validateDescendantDownstreamNodeManager:function(e,t,n){e.property!==this.property&&Object(a.b)("A property’s upstream node may only connect to the downstream node for the same property (key: %{key}, downstream property key: {%downstreamKey}). …If you get this error, please contact the CoreWeb team, as you’ve discovered a unicorn.",{key:this.key,downstreamKey:e.key})},willRemoveChildFromNode:function(e,t,n){o.a.getValueForNode(t)},wasDirtiedByParent:function(e,t,n,i){this._manageForWasDirtiedByParent(i,e)},_manageForWasDirtiedByParent:r.a,wasDirtiedBySelf:function(e,t,n,i){this._manageForWasDirtiedBySelf(n,i,e)},_manageForWasDirtiedBySelf:r.a,calculateValueForNode:function(e,t,n){var r,l=o.a.getDataForNode(t);if(n){var u=o.a.getStateIDForNode(t);if((r=this.pullDataFromParent(t,u))===c)return l}else r=o.a.getStateDataForNode(t),o.a.setStateDataForNode(void 0,t);var d=this.setterReturnArray,h=this.set.call(e,r,l,d,0,this.property);if(!this.validateType(h)){var p=this.property.type;Object(s.a)(h,i.a)?Object(a.b)('Type error: cannot set value `%{value}` (an instance of %{constructor}) to observable property "%{key}" of %{object} which expected a %{type}. (Note that `set` may have been called on a downstream property.)',{object:e,key:this.key,value:h,constructor:h.constructor,setValue:r,type:p}):Object(a.b)('Type error: cannot set value `%{value}` to observable property "%{key}" of %{object} which expected a %{type}. (Note that `set` may have been called on a downstream property.)',{object:e,key:this.key,value:h,setValue:r,type:p})}return this.passValuesToChildren(t,d,h),this.clearReturnArray(d),this._manageForCalculateValueForNode(h,r,e),h},_manageForCalculateValueForNode:r.a,pullDataFromParent:function(e,t){if(o.a.getStateDataForNode(e)===c){var n=o.a.getManagerForNode(t).property,i=n.key;n.dependencies!==n.writeDependencies?Object(a.b)("Infinite loop detected in the %{property} observable property. This is likely because you are attempting to get the write dependency '%{key}' inside your setter.",{key:this.key,property:i}):Object(a.b)("Infinite loop detected in the %{property} observable property. Try adding a writeDependencies array that contains only the dependencies you actually write to (not %{key}).",{key:this.key,property:i})}return o.a.setStateDataForNode(c,e),t<0&&Object(a.b)("Couldn't tell which parent set the upstream node (%{node})",{node:e}),o.a.getValueForNode(t),o.a.getStateDataForNode(e)},clearReturnArray:function(e){for(var t=e.length,n=0;n<t;n++)e[n]=c},passValuesToChildren:function(e,t,n){var i=this.dependencyCollector;o.a.getChildrenIDs(e,i);for(var r=this._valueOffsetCount,a=t.length,s=0;s<a;s++){var l=i[s+r];t[s]!==c&&l>=0&&o.a.getStateIDForNode(l)===e&&o.a.passValueToNode(t[s],l)}o.a.passValueToNode(n,i[0])},dependencyCollector:null,setterReturnArray:null,addDebugInfoForNode:function(e,t,n){t.type=this.debugType+" Upstream Node",t.object=e,t.key=this.key,t.toString=function(){return e+"."+this.key+" (Upstream)"},t.name=t.toString()},__superMap:{_$dx$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"UpstreamNodeManager"}})},function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"a",function(){return r});var i={WILLSEND:"willSend",SENT:"didSend",SUCCEEDED:"didSucceed",FAILED:"didFail",COMPLETED:"didComplete",ABORTED:"didAbort",FINALIZED:"didFinalize",UNSENT:"unsent",SENDING:"sending",TIMEDOUT:"timedout",PROGRESS:"didProgress"},r={GET:"GET",PATCH:"PATCH",POST:"POST",PUT:"PUT",DELETE:"DELETE"}},function(e,t,n){"use strict";n.d(t,"a",function(){return D}),n.d(t,"b",function(){return N}),n.d(t,"c",function(){return V});var i=n(36),r=n(1200),a=n(39),s=n(34),o=n(84),c=n(85),l=n(410),u=n(80),d=n(1185),h=n(41),p=n(178),f=n(177),g=n(65),m=n(1192),v=n(1213),_=n(1191),b=n(1173),y=n(1174),I=n(1178),w=n(69),S=n(424),C=n(226),O=n(396),A=n(92),E=n(78),T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},M=new Map,D=u.a.extend(i.a,r.a,S.a,{staticMembers:{getStoreIdForPrimaryKey:function(e){return E.a.getStoreIdForPrimaryKey(this,e)},setPrimaryKeyForStoreId:function(e,t){return E.a.setPrimaryKeyForStoreId(e,t)},replacePrimaryKeyInStore:function(e,t){var n=this.getStoreIdForPrimaryKey(e);return this.setPrimaryKeyForStoreId(n,t)},primaryKeysToStoreIds:null,find:function(e,t){return e||Object(g.b)("CW.Data.Model.find: No primary key provided.",{modelClass:this}),(t=t||Object(w.b)())||Object(g.b)("CW.Data.Model.find: No store provided and no Data Manager has been created.",{modelClass:this,primaryKey:e}),t.getModel(this,e)},findAll:function(e){return(e=e||Object(w.b)())||Object(g.b)("CW.Data.Model.findAll: No store provided and no Data Manager has been created.",{modelClass:this}),e.getAllModels(this)},findByPrimaryKeys:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object(w.b)(),i=n.constructor,r=e.map(function(e){return i.getStoreIdForPrimaryKey(t,e)});return A.a.createFromStoreIds(r,this,n)},findOrCreatePlaceholder:function(e,t){e||Object(g.b)("CW.Data.Model.findOrCreatePlaceholder: No primary key provided.",{modelClass:this});var n=this.find(e,t);return n||(n=this.createPlaceholder(e,t)),n},createFromDataHash:function(e,t,n){if(!e)return this.createWithStore(t,n);var i=Object(m.a)(e);return i[L]=!0,this.create(i,t,n)},createWithStore:function(e,t){return this.create(null,e,t)},createPlaceholder:function(e,t){var n;e||Object(g.b)("CW.Data.Model.createPlaceholder: No primary key provided.",{modelClass:this});var i=Object(w.b)();i||Object(g.b)("CW.Data.Model.createPlaceholder: No Data Manager has been created.",{modelClass:this,primaryKey:e});var r=((n={})[this.getDataKeyForKey(this.primaryKey)]=e,n);return i.loadData(this,r,!0),this.find(e,t||i)},createEmbedded:function(e,t,n){a.a.pause();var i=this.create();return i._cwParent=e,i._cwParentKey=t,i._cwParentIndex=n,i.retain(),a.a.resume(),i},hasMaterializedInstance:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object(w.b)(),n=this.getStoreIdForPrimaryKey(e);return t.hasExistingModel(n)},performOperation:function(e,t){e||Object(g.b)("CW.Data.Model.performOperation: No operation name provided.",{modelClass:this,operationType:this,operationContext:t});var n=Object(w.b)();return n||Object(g.b)("CW.Data.Model.performOperation: No Data Manager has been created.",{modelClass:this,operationType:this,operationName:e,operationContext:t}),n.performOperation({type:this,operation:{type:e,context:t||{}}})},load:function(e,t){e||Object(g.b)("CW.Data.Model.load: No primary key(s) provided.",{modelClass:this});var n,i,r=Object(w.b)();if(r||Object(g.b)("CW.Data.Model.load: No Data Manager has been created.",{modelClass:this,primaryKey:e}),t)return this.performOperation(w.a.READ.LOAD,{primaryKeys:e});if(Array.isArray(e)){for(var a,s,o=A.a.create(e,this),c=0,l=e.length;c<l;c++){var u=e[c];r.getNetworkStatus(this,u)!==C.a.IDLE&&(a=a||[],(i=r.getActiveTransactions(this,u))&&i.length>0)?a.push.apply(a,i):r.getLoadStatus(this,u)!==O.a.LOADED&&(s=s||[]).push(u)}if(s){var h=this.performOperation(w.a.READ.LOAD,{primaryKeys:s});(a=a||[]).push(h)}return n=d.a.create(),a?d.a.all(a).then(function(){n.resolve(o)},function(e){n.reject(e)}):(n.resolve(o),n)}return r.getNetworkStatus(this,e)!==C.a.IDLE&&(n=d.a.create(),(i=r.getActiveTransactions(this,e))&&i.length>0)?d.a.all(i).then(function(){n.resolve(this.find(e))}.bind(this),function(e){n.reject(e)}):r.getLoadStatus(this,e)===O.a.LOADED?d.a.resolve(this.find(e)):this.performOperation(w.a.READ.LOAD,{primaryKeys:e})},loadAll:function(){return this.performOperation(w.a.READ.LIST)},destroy:function(e,t){e||Object(g.b)("CW.Data.Model.destroy: No primary key(s) provided.",{modelClass:this}),(t=t||Object(w.b)())||Object(g.b)("CW.Data.Model.destroy: No store provided and no Data Manager has been created.",{modelClass:this,primaryKeys:e}),t.deleteModels(this,e)},getKeyForDataKey:function(e){e||Object(g.b)("CW.Data.Model.getKeyForDataKey: No data key provided.",{modelClass:this});var t=this.__cwDataKeyMap;return t&&t[e]||e},getDataKeyForKey:function(e){e||Object(g.b)("CW.Data.Model.getDataKeyForKey: No key provided.",{modelClass:this});var t=this.prototype.getMetadata(e);return t&&t.dataKey||e},primaryKey:null,init:function(){var e=arguments;this.__s._$5o8$init.apply(this,e),this.primaryKeysToStoreIds=null,Object(w.d)().push(this)},_setKeyForDataKey:function(e,t){var n=this.__cwDataKeyMap;(n?this.hasOwnProperty("__cwDataKeyMap")?n:this.__cwDataKeyMap=Object.create(n):this.__cwDataKeyMap={})[t]=e},_registerDataActionHandler:function(e,t){M.set(e,t)},__superMap:{_$5o8$init:"init"},__QUALIFIED_CLASS_NAME__:"Model"},networkStatus:Object(s.b)({get:function(){var e=this.getPrimaryKey();e||Object(g.b)("CW.Data.Model#networkStatus: No primary key.",{modelClass:this.constructor,model:this});var t=Object(w.b)();return t||Object(g.b)("CW.Data.Model#networkStatus: No Data Manager has been created.",{modelClass:this.constructor,model:this,primaryKey:e}),t.getNetworkStatus(this.constructor,e)}}),loadStatus:Object(s.b)({get:function(){var e=this.getPrimaryKey();e||Object(g.b)("CW.Data.Model#loadStatus: No primary key.",{modelClass:this.constructor,model:this});var t=Object(w.b)();return t||Object(g.b)("CW.Data.Model#loadStatus: No Data Manager has been created.",{modelClass:this.constructor,model:this,primaryKey:e}),t.getLoadStatus(this.constructor,e)}}),storeStatus:Object(s.b)({cacheable:!1,get:function(){var e=this.getPrimaryKey();e||Object(g.b)("CW.Data.Model#storeStatus: No primary key.",{modelClass:this.constructor,model:this});var t=this._cwStore;return t||Object(g.b)("CW.Data.Model#storeStatus: No store linked to model.",{modelClass:this.constructor,model:this,primaryKey:e}),t.getStoreStatus(this.constructor,e)}}),isStoreModel:Object(h.c)({readOnly:!0,get:function(){return!!this._cwStore}}),parentModel:Object(h.c)({readOnly:!0,get:function(){return this._cwParent}}),isEmbeddedModel:Object(h.c)({readOnly:!0,get:function(){return!!this.parentModel}}),embeddedKeyPathArray:Object(h.c)({readOnly:!0,get:function(){if(this.isEmbeddedModel){for(var e=[],t=this;t.isEmbeddedModel;)e=[t._cwParentKey],void 0!==t._cwParentIndex&&e.push(t._cwParentIndex),t=t._cwParent;return e}}}),embeddedKeyPath:Object(h.c)({readOnly:!0,get:function(){return this.embeddedKeyPathArray.join(".")}}),embeddedRoot:Object(h.c)({readOnly:!0,get:function(){for(var e=this;e.isEmbeddedModel;)e=e._cwParent;return e}}),hasDataForKey:function(e){var t=this.getDataHash();return t&&void 0!==t[e]},load:function(){var e=this.getPrimaryKey();return e||Object(g.b)("CW.Data.Model#load: No primary key.",{modelClass:this.constructor,model:this}),this.constructor.load(e)},reload:function(){var e=this.getPrimaryKey();return e||Object(g.b)("CW.Data.Model#reload: No primary key.",{modelClass:this.constructor,model:this}),this.constructor.load(e,!0)},save:function(){var e=this._cwStore;return e||Object(g.b)("CW.Data.Model#save: No store linked to model.",{modelClass:this.constructor,model:this,primaryKey:this.getPrimaryKey()}),e.commit()},saveWithoutRelated:function(){var e=this._cwStore;return e||Object(g.b)("CW.Data.Model#save: No store linked to model.",{modelClass:this.constructor,model:this,primaryKey:this.getPrimaryKey()}),e.commitStoreIds(this._cwStoreId)},reset:function(){this.isStoreModel||Object(g.b)("CW.Data.Model.reset: Cannot reset a non-store model.",{modelClass:this.constructor,model:this}),this._cwStore.resetData(this._cwStoreId)},destroy:function(){var e=this.getPrimaryKey();e||Object(g.b)("CW.Data.Model#destroy: No primary key.",{modelClass:this.constructor,model:this}),this.constructor.destroy(e,this._cwStore)},replaceData:function(e){var t=this.getDataHash(),n=this._cwStore;n?n.writeData(this._cwStoreId,e):this.__cwDataHash=e;var i=this.getDataHash(),r=Object(v.a)(t,i);if(r){var a={diff:Object(v.a)(t,e),originalData:t,updatedData:this.getDataHash()},s=Object(_.a)([],r.added,r.removed,r.updated);this._notifyOnDataAction(s,a)}},updateData:function(e){var t=Object(m.a)(this.getDataHash()),n=this._cwStore;if(n)n.updateData(this._cwStoreId,e);else{var i=this.getDataHash();for(var r in e)i[r]=e[r]}var a=this.getDataHash(),s={diff:Object(v.a)(t,a),originalData:t,updatedData:a};this._notifyOnDataAction(Object.keys(e),s)},_notifyOnDataAction:function(e,t){a.a.pause();for(var n=this.constructor,i=0,r=e.length;i<r;i++){var s=n.getKeyForDataKey(e[i]),o=this.getMetadata(s);if(o){var c=M.get(o.constructor);c?c(this,s,t):this.propertyChanged(s)}}a.a.resume()},toJSON:function(){return Object(m.a)(this.getDataHash())},_cwStore:null,_cwStoreId:null,_cwParent:null,_cwParentKey:null,getDataHash:function(){var e=this._cwParent;if(e){var t=this._cwParentKey,n=this._cwParentIndex,i=e.getDataHash();if(!i)return;return(i=i[t])&&void 0!==n&&(i=i[n]),i}var r=this._cwStore;return r?r.readData(this._cwStoreId):this.__cwDataHash||(this.__cwDataHash={})},getPrimaryKey:function(){var e=this.constructor.primaryKey;return e||Object(g.b)("CW.Data.Model#getPrimaryKey: No primary key property defined.",{modelClass:this.constructor,model:this}),this.get(e)},init:function(e,t,n){var i=void 0,r=void 0;if(e)if(e[L])delete e[L],i=e;else{var a=this.getMetadataByType(N);for(var s in i={},r=Object(m.a)(e),a){var o=a[s],c=o.dataKey||s,l=r[s];void 0!==l&&(i[c]=o._encodeValue(this,c,l),delete r[s])}}t?this._cwStore||t.linkModel(this,n,i):this.__cwDataHash=i,this.__s._$BDa$init.call(this,r)},dispose:function(){var e=arguments,t=this._cwStore;t&&t.unlinkModel(this),this.__s._$BHZ$dispose.apply(this,e)},notifyOfDataChange:function(){var e;this.dataDidChange.apply(this,arguments),this.isEmbeddedModel&&(e=this._cwParent).notifyOfDataChange.apply(e,arguments)},propertyChanged:function(e){var t=this.getMetadata(e);if(t){var n=t.clearCachedValueForObject;n&&n.call(t,this,e),this.__s._$BTX$propertyChanged.call(this,e)}},dataDidLoad:Object(i.g)(),dataDidChange:Object(i.g)(),_dataDidChangeDidFire:Object(i.e)("dataDidChange",function(){var e=this._cwStore;e&&e.dataDidChange()}),__superMap:{_$BDa$init:"init",_$BHZ$dispose:"dispose",_$BTX$propertyChanged:"propertyChanged"}}),L=Symbol("PURE_MODEL_DATA"),N=s.a.extend({requiresSupport:D,type:null,isPrimaryKey:!1,dataKey:null,encode:null,decode:null,setInitialValueForObject:function(e,t,n){var i=arguments;void 0!==n&&Object(g.b)("Initial values are not supported on ModelProperties: "+e+"#"+t,{object:e,key:t,initialValue:n}),this.__s._$C6K$setInitialValueForObject.apply(this,i)},downstreamNodeManagerClass:o.a.extend({calculateValueForNode:function(e,t,n){if(n){var i=a.a.getStateIDForNode(t);a.a._sanitizeNodeID(i)>0&&a.a.getValueForNode(i)}var r=this.key,s=this.property,o=s.getRawValueForObject(e,r);return s._materializeValue(e,r,o)},isCacheable:!1}),upstreamNodeManagerClass:c.b.extend({calculateValueForNode:function(e,t,n){var i;if(n){var r=a.a.getStateIDForNode(t);(i=this.pullDataFromParent(t,r))===c.a&&(i=a.a.getDataForNode(t))}else i=a.a.getStateDataForNode(t);var s=this.key,o=this.property;return i!==o._getCachedValueForObject(e,s)&&(o.clearCachedValueForObject(e,s),i=o._encodeValue(e,s,i),o.setRawValueForObject(e,s,i)),i},notifyNode:function(e,t){var n=this.key,i=a.a.getDataForNode(t);e.dataDidChange(n,i)}}),init:function(e){var t=arguments;e&&void 0!==e.defaultValue&&(this._hadDefaultValue=!0,delete e.defaultValue),this.__s._$Ci0$init.apply(this,t)},initializeNodeFlags:function(){var e=arguments;this.__s._$Cj0$initializeNodeFlags.apply(this,e),this.upstreamNodeFlags|=a.a.PULL_ON_FLUSH|a.a.NOTIFY},setRawValueForObject:function(e,t,n){if(t=this.dataKey||t,e.isStoreModel)e._cwStore.writeDataProperty(e._cwStoreId,t,n);else if(e.isEmbeddedModel){for(var i=e._cwParent,r=i;r.isEmbeddedModel;)r=r._cwParent;var a=r._cwStore,s=r._cwStoreId;a&&a.willWriteData(s);var o=e.getDataHash();o||Object(g.b)("Can't write value for key to undefined data hash",{key:t,value:n,object:e,type:e.constructor}),o[t]=n,a&&a.didWriteData(s),i.notifyOfDataChange()}else{var c=e.getDataHash();c||Object(g.b)("Can't write value for key to undefined data hash",{key:t,value:n,object:e,type:e.constructor}),c[t]=n}return n},getRawValueForObject:function(e,t){var n,i=this.dataKey||t,r=e.getDataHash();return r&&(n=r[i]),void 0===n?null:n},_encodeValue:function(e,t,n){var i,r,a,s=e.__cwMaterializedValues,o=s&&s[t],c=Object(b.a)(n,D);return o&&c&&(function(e){var t=e._cwParent;t||Object(g.b)("CW.Data.Model#detachFromParent: Model is not attached to a parent.",{embeddedModel:e});var n=t.getDataHash(),i=e._cwParentKey;e.__cwDataHash=n[i],n[i]=null,e._cwParent=null,e._cwParentKey=null,e.release()}(o),this.clearCachedValueForObject(e,t)),c?(r=n,a=t,(i=e)||Object(g.b)("CW.Data.ModelProperty#attachToParent: No parent model provided.",{embeddedModel:r,parentKey:a}),r||Object(g.b)("CW.Data.ModelProperty#attachToParent: No embedded model provided.",{parentModel:i,parentKey:a}),a||Object(g.b)("CW.Data.ModelProperty#attachToParent: No parent key provided.",{parentModel:i,embeddedModel:r}),i.getDataHash()[a]=r.getDataHash(),r._cwParent=i,r._cwParentKey=a,delete r.__cwDataHash,r.retain(),this._setCachedValueForObject(e,t,n),n=n.getDataHash()):Object(b.a)(n,p.a)&&(n=n.value),Object(y.a)(this.encode)&&(n=this.encode.call(e,n)),n&&n.toJSON?n.toJSON():n},_materializeValue:function(e,t,n){var i=this._getCachedValueForObject(e,t);if(void 0!==i)return i;var r=this.type,a=(Object(y.a)(this.decode)?this.decode:function(e,t){var n=String(e).toLowerCase();return e===Boolean||"boolean"===n?P:e===String||"string"===n?R:e===Array||"array"===n||e===l.b||"cw.observablearray"===n||t instanceof Array?x:e===Date||"date"===n?F:Object(b.a)(e,f.a)?k:I.a}(r,n)).call(e,n,r),s=a!==n;if(Object(b.a)(a,l.b)){var o=this.dataKey||t;a.listen("contentsDidChange",function(n){var i=e.getDataHash()[o];i||(i=e.getDataHash()[o]=[]),n.context.forEach(function(e){e.operation===l.b.INSERT?i.splice(e.index,0,e.item):i.splice(e.index,1)}),e.notifyOfDataChange(t,a)})}return s&&(this._setCachedValueForObject(e,t,a),a&&a.retain&&a.retain()),a},clearCachedValueForObject:function(e,t){var n=this._getCachedValueForObject(e,t);n&&n.release&&n.release(),e.__cwMaterializedValues&&delete e.__cwMaterializedValues[t]},_getCachedValueForObject:function(e,t){var n=e.__cwMaterializedValues;return n&&n[t]},_setCachedValueForObject:function(e,t,n){var i=e.__cwMaterializedValues;return i||(i=e.__cwMaterializedValues={}),i[t]=n},wasRegistered:function(e,t){var n=arguments,i=this.type;i&&(this.type=null),this.__s._$Eyn$wasRegistered.apply(this,n),i&&(this.type=i);var r=e.constructor,a=this.dataKey;if(a&&a!==t&&r._setKeyForDataKey(t,a),this.isPrimaryKey){var s=r.primaryKey;s&&s!==t&&Object(g.b)("CW.Data.ModelProperty#wasRegistered: Models cannot define multiple primary keys.",{existingPrimaryKey:s,newPrimaryKey:t,modelClass:r}),r.primaryKey=t}this._hadDefaultValue&&Object(g.b)("Default values are not supported on ModelProperties: "+e+"#"+t,{object:e,key:t})},_hadDefaultValue:!1,__superMap:{_$C6K$setInitialValueForObject:"setInitialValueForObject",_$Ci0$init:"init",_$Cj0$initializeNodeFlags:"initializeNodeFlags",_$Eyn$wasRegistered:"wasRegistered"},staticMembers:{__QUALIFIED_CLASS_NAME__:"ModelProperty"}});function P(e){return!!e}function R(e){return null===e?null:void 0!==e?String(e):void 0}function x(e){return l.b.create(e)}function F(e){return"string"==typeof e&&(e=Date.parse(e)),e?new Date(e):null}function k(e,t){return t.getItemForValue(e)}var V=function(e){return"object"!==(void 0===e?"undefined":T(e))&&(e={defaultValue:e}),N.create(e)}},function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return a});var i={},r=function(e){e!==i&&this.init.apply(this,arguments)};Object.assign(r.prototype,{init:function(){this.items=[],this._indexMap=new Map},toArray:function(){return this.items.slice()},add:function(e){if(!e)throw new Error("Cannot add nonexistents to a FastArraySet.");var t=this.items,n=this._indexMap,i=n.get(e);return!(i>=0||(i=t.length++,n.set(e,i),t[i]=e,0))},remove:function(e){if(!e)return!1;var t=this.items,n=this._indexMap,i=n.get(e);if(void 0===i)return!1;var r=t.length,a=void 0;return i!==r&&(a=t[r-1],t[i]=a,n.set(a,i)),n.delete(e),t[r-1]=null,--t.length,!0},clear:function(){for(var e=this.items,t=this._indexMap,n=e.length,i=0;i<n;i++)t.delete(e[i]),e[i]=null;e.length=0},contains:function(e){return(e&&this._indexMap.get(e))>=0},clone:function(){var e=new this.constructor;return e.addSet(this),e},subtractSet:function(e){for(var t=e.length,n=e.items,i=0;i<t;i++)this.remove(n[i]);return this},intersectSet:function(e){for(var t=this.items,n=t.length,i=0;i<n;i++){var r=t[i];e.contains(r)||this.remove(r)}return this},addSet:function(e){for(var t=e.length,n=e.items,i=0;i<t;i++)this.add(n[i]);return this}}),Object.defineProperty(r.prototype,"oneItem",{get:function(){var e=this.items;return e[e.length-1]},set:function(){throw new Error("Cannot assign `oneItem` to a FastArraySet")}}),Object.defineProperty(r.prototype,"length",{get:function(){return this.items.length},set:function(){throw new Error("Cannot assign `length` to a FastArraySet")}}),Object.defineProperty(r.prototype,"size",{get:function(){return this.items.length},set:function(){throw new Error("Cannot assign `size` to a FastArraySet")}});var a=function(e){e!==i&&this.init.apply(this,arguments)};!function(){var e=a.prototype=new r(i);e.constructor=a;var t=e.init;e.init=function(e){return this.retainReason=e,t.call(this)};var n=e.add;e.add=function(e){var t=n.call(this,e);return t&&e&&e.retain&&e.retain(this,this.retainReason||"occupying FastStrongArraySet"),t};var s=e.remove;e.remove=function(e){var t=s.call(this,e);return t&&e&&e.release&&e.release(this,this.retainReason||"occupying FastStrongArraySet"),t};var o=e.clear;e.clear=function(){for(var e=this.items,t=0,n=e.length;t<n;t++){var i=e[t];i&&i.release&&i.release(this,this.retainReason||"occupying FastStrongArraySet")}return o.call(this)}}()},function(e,t,n){"use strict";n.d(t,"e",function(){return l}),n.d(t,"d",function(){return u}),n.d(t,"a",function(){return d}),n.d(t,"b",function(){return h}),n.d(t,"c",function(){return f});var i=n(169),r=n(34),a=n(1177),s=n(249),o=n(142),c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};function l(e,t){return r.b({readOnly:!0,dependencies:[e],get:Object.assign(function(){return this[e]===t},{__CW__getter:function(e,n,i,r){return r.internalGetPath(this,n[0+i])===t}})})}function u(e,t){return r.b({dependencies:e,readOnly:!0,get:function(){for(var n=0,i=e.length;n<i;n++){var r=e[n],s=this.getPath(r);if(a.a(s))return s}return t}})}function d(e){var t,n;return c(((t={})[e+"Width"]=i.e({readOnly:!0}),t[e+"Height"]=i.e({readOnly:!0}),t[e+"FileType"]=i.e({readOnly:!0}),t[e+"Fingerprint"]=i.e({readOnly:!0}),t[e+"MimeType"]=i.e({readOnly:!0,serviceKey:e+"FileType",getDataValueFromServiceValue:function(e){return e&&Object(s.c)(e)}}),t),i.g(e+"Res",((n={})[e+"ResSize"]="size",n[e+"ResDownloadUrl"]="downloadURL",n)))}function h(e,t){for(var n={},i=0,r=t.length;i<r;i++){var a=e+t[i];Object.assign(n,d(a))}return n}var p=i.a.extend({ProtobufClass:void 0,getDataValueFromServiceValue:function(e){var t=o.util.base64,n=new Uint8Array(t.length(e));return t.decode(e,n,0),this.ProtobufClass.decode(n).toJSON()},readOnly:!0,staticMembers:{__QUALIFIED_CLASS_NAME__:"DecodedProtobufFromEncryptedCKModelProperty"}}),f=function(e){return p.create(e)}},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n(1278),r=n(34),a=n(248),s=i.a.extend({staticMembers:{storageKey:"photos-grid-kit"},implicitDesktopSelectionMode:i.a.booleanProperty(!0),alwaysForceSquareCells:i.a.booleanProperty(!1),debugPropertyPathDisplayedOnPhotoItems:i.a.stringProperty(""),uiSizeClassCompactHeightThreshold:r.b(a.a.bindingFor("uiSizeClassCompactHeightThreshold")),uiSizeClassCompactWidthThreshold:r.b(a.a.bindingFor("uiSizeClassCompactWidthThreshold")),uiSizeClassCompactInset:i.a.numberProperty(22),uiSizeClassRegularInset:i.a.numberProperty(52),uiSizeIPhone4LandscapeWidth:i.a.numberProperty(480),uiSizeIPhoneSELandscapeWidth:i.a.numberProperty(568),uiSizeIPad129LandscapeWidth:i.a.numberProperty(1366),uiPhotosMaxWidthDesktop:i.a.numberProperty(950),uiPhotosGridGutterDesktop:i.a.numberProperty(16),uiPhotosDefaultItemSideSize:i.a.numberProperty(132),uiPhotosItemMinSpacing:i.a.numberProperty(12),uiPhotosColumnCountIPhone3GSLike:i.a.numberProperty(4),uiPhotosColumnCountIPhone4Like:i.a.numberProperty(6),uiPhotosColumnCountIPad129Like:i.a.numberProperty(8),uiPhotosColumnCountCompact:i.a.numberProperty(7),uiPhotosColumnCountDesktop:i.a.numberProperty(4),moments_ensureEntireRangeImmediately:i.a.booleanProperty(!1),moments_cluster_size:i.a.numberProperty(250)}).create()},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n(1128),r=n(180),a=n(784),s=n(110),o=i.a.extend(s.a,{useCredentialsIfCrossOrigin:!0,willSend:function(){this.url.isCOSKUrl&&this.url.setCOSQueryParameters()},copyKeys:r.b(Array),copy:function(){for(var e=this.copyKeys,t=this.constructor.create(),n=0,i=e.length;n<i;n++){var r=e[n];t[r]=this[r]}return t._statusEventListeners?a.b.warn("New request has event handlers, old handlers not copied."):t._statusEventListeners=this._statusEventListeners,t},staticMembers:{__QUALIFIED_CLASS_NAME__:"Request"}})},function(e,t,n){"use strict";var i=n(175),r=n(41),a=n(1185),s=n(410),o=n(34),c=n(182),l=n(65),u=n(1173),d=n(1197),h=n(80),p=n(806),f=n(36),g=n(1177),m=n(775),v=n(87),_=h.a.extend(f.a,p.a,{store:Object(o.b)(),modelClass:Object(o.b)(),encode:function(e){if(!Object(g.a)(e))return e;var t=this.store.constructor;return Object(u.a)(e,v.a)?t.getStoreIdForPrimaryKey(e.constructor,e.getPrimaryKey()):Object(m.a)(e)?t.getStoreIdForPrimaryKey(e.type,e.id):t.getStoreIdForPrimaryKey(this.modelClass,e)},decode:function(e){return Object(g.a)(e)?this.store.materializeModel(e):e},staticMembers:{__QUALIFIED_CLASS_NAME__:"ModelStoreIdSerializer"}}),b=n(69);n.d(t,"a",function(){return y});var y=s.b.extend(i.a,{store:Object(r.c)(),modelClass:Object(r.c)(),loadObjectAt:function(e){var t=this.objectAt(e);return t?t.load():a.a.reject("No object at index: "+e)},loadAll:function(){for(var e=this,t=new Map,n=0,i=this.length;n<i;n++){var r=this.modelClassForObjectAt(n),s=t.get(r)||[];t.set(r,s),s.push(this.primaryKeyForObjectAt(n))}if(1===t.size){var o=t.entries().next().value,c=o[0],l=o[1];return c.load(l)}var u=[],d=t.entries(),h=Array.isArray(d),p=0;for(d=h?d:d[Symbol.iterator]();;){var f;if(h){if(p>=d.length)break;f=d[p++]}else{if((p=d.next()).done)break;f=p.value}var g=f,m=g[0],v=g[1];u.push(m.load(v))}return a.a.all(u).then(function(){return e})},storeIdForObjectAt:function(e){return this._array[e]},modelClassForObjectAt:function(e){var t=this.storeIdForObjectAt(e);return this.store.constructor.getModelClassForStoreId(t)},primaryKeyForObjectAt:function(e){var t=this.storeIdForObjectAt(e);return this.store.constructor.getPrimaryKeyForStoreId(t)},storeDataForObjectAt:function(e){var t=this.storeIdForObjectAt(e);return this.store.readData(t)},isObjectAtIndexMaterialized:function(e){var t=this.storeIdForObjectAt(e);return this.store.hasExistingModel(t)},storeIds:Object(o.b)({dependencies:["length"],readOnly:!0,get:function(){return Object(c.b)(this._array)}}),spliceStoreIds:function(e,t){for(var n=arguments.length,i=Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];return this._array.splice.apply(this._array,arguments)},addEach:function(e){var t=arguments;if(!e||e.constructor!==y)return this.__s._$1ch$addEach.apply(this,t);if(this.constructor!==y)return this.__s._$1ch$addEach.apply(this,t);var n=e._array,i=this.length,r=n.length;this.itemsWillChange(),this.itemsWillBeInserted(i,r);var a=this._array;a.length+=r;for(var s=0;s<r;s++)a[s+i]=n[s];this.itemsWereInserted(i,r),this.itemsDidChange()},filter:function(e,t){e||Object(l.b)("CW.Data.ModelArray#filter: No filter function provided: %{modelArray}",{modelArray:this});var n=this.store;n||Object(l.b)("CW.Data.ModelArray#filter: Model arrays must be store backed to be filtered: %{modelArray}",{filterFunction:e,modelArray:this});for(var i=void 0,r=void 0,a=!0,s=[],o=0,c=this.length;o<c;o++){var u=this.storeIdForObjectAt(o),d=this.modelClassForObjectAt(o),h=this.store.getExistingModel(u),p=void 0;if(!h){p=(i=i||new Map).get(d);var f=this.storeDataForObjectAt(o);p||(p=d.create().retain(this,"filter: tempModel")),i.set(d,p),p.replaceData(f)}e.call(t,h||p,o,this)&&(s.push(u),r&&r!==d&&(a=!1),r=d)}if(i){var g=i.values(),m=Array.isArray(g),v=0;for(g=m?g:g[Symbol.iterator]();;){var _;if(m){if(v>=g.length)break;_=g[v++]}else{if((v=g.next()).done)break;_=v.value}_.release(this,"filter: tempModel")}}return this.constructor.createFromStoreIds(s,a?r:null,n)},clone:function(){return this.constructor.createFromStoreIds(this._array,this.modelClass,this.store)},serializer:Object(o.b)(function(){return _.create({store:this.store,modelClass:this.modelClass})}),staticMembers:{createFromStoreIds:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1],n=arguments[2],i=this.create(void 0,t,n);return i._array=e.slice(),i},createFromIterable:function(e){var t=void 0,n=void 0,i=void 0,r=!0;if(Object(u.a)(e,y))return e.clone();var a=e.map(function(e,a){var s=e._cwStore,o=e.constructor;i&&i!==o&&(r=!1),i=o,t=t||s,n=n||t.constructor,t!==s&&Object(l.b)("CW.Data.ModelArray.createFromIterable: Expected a model in "+t+" but found a model in "+s+" at index "+a);var c=e.getPrimaryKey();return n.getStoreIdForPrimaryKey(o,c)});return Array.isArray(a)||(a=a.toArray()),Object(d.a)(a)&&Object(l.b)("CW.Data.ModelArray.createFromIterable: Cannot create from an empty iterable"),this.createFromStoreIds(a,r?i:null,t)},__QUALIFIED_CLASS_NAME__:"ModelArray"},init:function(e,t,n){this.modelClass=t,this.store=n||Object(b.b)(),this.__s._$3z1$init.call(this,e)},constructNewInstance:function(){return this.constructor.create([],this.modelClass,this.store)},indexOf:function(e){var t=this._array;return t?t.indexOf(e._cwStoreId):-1},__superMap:{_$1ch$addEach:"addEach",_$3z1$init:"init"}})},function(e,t,n){"use strict";var i=n(177),r=n(68),a=n(123),s=n(65),o=n(1171),c=n(39),l=n(84),u=n(85),d=n(94),h=n(34),p=[],f=[],g=[],m=[],v=[],_=[],b=[],y=0,I=[],w=0;function S(){var e;return e=w>0?I[--w]:y++,p[e]=c.a.NULL_INDEX,f[e]=void 0,m[e]=void 0,g[e]=c.a.NULL_INDEX,v[e]=c.a.NULL_INDEX,_[e]=c.a.NULL_INDEX,b[e]=c.a.NULL_INDEX,e}var C=d.a.extend({staticMembers:{init:function(){var e=arguments;this.__s._$1wJ$init.apply(this,e),this.managers={}},instanceFor:function(e,t){var n=this.managers[t];return n||(n=this.managers[t]=this.create(e,t)),n},__superMap:{_$1wJ$init:"init"},__QUALIFIED_CLASS_NAME__:"ChainedLookupNodeManager"},type:"ChainedLookupNodeManager",lookupID:"",init:function(e,t){this.__s._$2KW$init.call(this),this.lookupID=this.type+": "+t,this.key=e,this.lookupPath=t},setUpForObject:function(e,t,n){var i=t.downstreamNodes,r=this.lookupID,a=c.a._sanitizeNodeID(i[r]);if(a<0){i[r]=a=t.allocNode(this,c.a.PULL_ON_FLUSH|c.a.FREE);var s=S();p[s]=n,c.a.addChildToNode(a,n,!0),c.a.setDataForNode(s,a)}return a},calculateValueForNode:function(e,t,n){var i=c.a.getDataForNode(t),r=m[c.a.getValueForNode(p[i])];c.a.getParentIDs(t,A);var a=A[1];if(r!==f[i]){if(a>=0&&c.a.removeChildFromNode(t,a),a=c.a.NULL_INDEX,r){var s=this.key,o=r.downstreamNodes;o&&(a=c.a._sanitizeNodeID(o[s])),a>=0?c.a.addChildToNode(t,a,!1):N(this.key,this.lookupPath,r)}f[i]=r}return m[i]=a>0?c.a.getValueForNode(a):void 0,i},nodeWillFree:function(e,t){!function(e){p[e]=c.a.NULL_INDEX,g[e]=c.a.NULL_INDEX,f[e]=void 0,m[e]=void 0,v[e]=c.a.NULL_INDEX,_[e]=c.a.NULL_INDEX,b[e]=c.a.NULL_INDEX,I[w++]=e}(c.a.getDataForNode(t))},addDebugInfoForNode:function(e,t,n){t.type=this.type,t.object=e,t.key=this.lookupID,t.toString=function(){return this.object+"."+this.key},t.name=t.toString()},__superMap:{_$2KW$init:"init"}}),O=C.extend({staticMembers:{instanceFor:function(e){var t=this.managers[e];return t||(t=this.managers[e]=this.create(e)),t},__QUALIFIED_CLASS_NAME__:"ChainedLookupRootNodeManager"},type:"ChainedLookupRootNodeManager",init:function(e){this.__s._$4I_$init.call(this,e,e)},setUpForObject:function(e,t){var n,i=t.downstreamNodes,r=this.lookupID,a=c.a._sanitizeNodeID(i[r]);if(a<0){(n=c.a._sanitizeNodeID(i[this.key]))<0&&Object(s.b)("Chained binding could not look up key on object (key: "+this.key+", object: "+t+").",{key:this.key,object:t}),i[r]=a=t.allocNode(this,c.a.PULL_ON_FLUSH|c.a.FREE);var o=S();c.a.setDataForNode(o,a),f[o]=t,c.a.addChildToNode(a,n,!0)}return a},calculateValueForNode:function(e,t,n){var i=c.a.getDataForNode(t);c.a.getParentIDs(t,A);var r=A[0],a=c.a.getValueForNode(r);return m[i]=a,i},__superMap:{_$4I_$init:"init"}}),A=[0,0],E=[0],T=d.a.extend({calculateValueForNode:function(e,t,n){if(n){var i=c.a.getDataForNode(t),r=b[i];c.a.getValueForNode(r),c.a.getParentIDs(t,A);var a,s=A[1];return c.a._sanitizeNodeID(s)>0&&(a=c.a.getValueForNode(s)),a}return c.a.getStateDataForNode(t)},isCacheable:!1,addDebugInfoForNode:function(e,t,n){t.type="ChainedLookupProxyNode (downstream)",t.object=e,t.key="[downstream proxy]",t.toString=function(){return this.object+"[downstream proxy]"},t.name=t.toString()},validateDescendantDownstreamNodeManager:function(e,t,n){c.a.getParentIDs(n,A);var i=A[1];i!==c.a.NULL_INDEX&&c.a.getManagerForNode(i).validateDescendantDownstreamNodeManager(e,t,i)},didAddParentToNode:function(e,t,n,i){if(1!==i){c.a.getChildrenIDs(t,E);var r=E[0];if(r!==c.a.NULL_INDEX){var a=c.a.getManagerForNode(r);a.isDependentComputedProperty||a.instanceOf(l.a)&&c.a.getManagerForNode(n).validateDescendantDownstreamNodeManager(a,r,n)}}}}).create(),M=u.b.extend({calculateValueForNode:function(e,t,n){var i=c.a.getDataForNode(t);c.a.getChildrenIDs(t,E);var r,a=E[0];if(!c.a.isValidNodeID(a))return i;if(n){var s=c.a.getStateIDForNode(t);r=this.pullDataFromParent(t,s)}else r=c.a.getStateDataForNode(t);return r!==u.a&&c.a.passValueToNode(r,a),i},addDebugInfoForNode:function(e,t,n){t.type="ChainedLookupProxyNode (upstream)",t.object=e,t.key="[upstream proxy]",t.toString=function(){return this.object+"[upstream proxy]"},t.name=t.toString()}}).create(),D=C.extend({type:"ChainedLookupTerminalNodeManager",connectUpstreamProxyNodeToLookedUpNodes:function(e,t,n){c.a.addChildToNode(e,t,n)},connectDownstreamProxyNodeToLookedUpNodes:function(e,t){c.a.addChildToNode(e,t,!1)},disconnectProxyNodeFromLookupUpNodes:function(e,t){c.a.removeChildFromNode(e,t)},getDownstreamProxyNode:function(e){var t=e.downstreamNodes,n=this.lookupID,i=c.a._sanitizeNodeID(t[n]),r=c.a.getDataForNode(i);return v[r]},getUpstreamProxyNode:function(e){var t=e.downstreamNodes,n=this.lookupID,i=c.a._sanitizeNodeID(t[n]),r=c.a.getDataForNode(i);return _[r]},setUpForObject:function(e,t,n,i){var r,a,s,o=t.downstreamNodes,l=this.lookupID,u=c.a._sanitizeNodeID(o[l]);return u<=0&&(o[l]=u=t.allocNode(this,c.a.PULL_ON_FLUSH|c.a.FREE|c.a.RELATIONSHIPS),r=S(),c.a.setDataForNode(r,u),b[r]=u,p[r]=n,a=t.allocNode(T,c.a.RELATIONSHIPS),o["Downstream Proxy for "+l]=a,v[r]=a,c.a.setDataForNode(r,a),c.a.addChildToNode(a,u,!1),s=t.allocNode(M,c.a.RELATIONSHIPS),t.upstreamNodes["Upstream Proxy for "+l]=s,_[r]=s,c.a.setDataForNode(r,s),this._shouldFlushUpstream=!!i,c.a.addChildToNode(u,n,!0)),u},getPreviouslyProxiedDownstreamNode:function(e){return c.a.getParentIDs(e,A),A[1]},calculateValueForNode:function(e,t,n){var i=c.a.getDataForNode(t),r=m[c.a.getValueForNode(p[i])],a=f[i];if(r!==a){f[i]=r;var s=this.key,o=_[i],l=v[i],u=this.getPreviouslyProxiedDownstreamNode(l),d=g[i];if(a&&(g[i]=c.a.NULL_INDEX,this.disconnectFromPreviousProperty(a,s,d,u,o,l)),r){var h,b,y=r.downstreamNodes;y&&(h=c.a._sanitizeNodeID(y[s])),(y=r.upstreamNodes)&&(b=c.a._sanitizeNodeID(y[s])),this.hookUpToNewProperty(r,s,b,h,o,l),g[i]=b}}return this._shouldFlushUpstream=!1,i},disconnectFromPreviousProperty:function(e,t,n,i,r,a){a>=0&&i>=0&&this.disconnectProxyNodeFromLookupUpNodes(a,i),r>=0&&n>=0&&this.disconnectProxyNodeFromLookupUpNodes(n,r)},hookUpToNewProperty:function(e,t,n,i,r,a){i>0?(n>0&&this.connectUpstreamProxyNodeToLookedUpNodes(n,r,this._shouldFlushUpstream),this.connectDownstreamProxyNodeToLookedUpNodes(a,i)):N(this.key,this.lookupPath,e)},staticMembers:{__QUALIFIED_CLASS_NAME__:"ChainedLookupTerminalNodeManager"}}),L=D.extend({init:function(e,t){t+="Downstream",this.__s._$Aef$init.call(this,e,t)},connectUpstreamProxyNodeToLookedUpNodes:function(e,t,n){c.a.addChildToNode(t,e,n)},connectDownstreamProxyNodeToLookedUpNodes:function(e,t){c.a.addChildToNode(t,e,!0)},getPreviouslyProxiedDownstreamNode:function(e){return c.a.getChildrenIDs(e,E),E[0]},disconnectProxyNodeFromLookupUpNodes:function(e,t){c.a.removeChildFromNode(t,e)},disconnectFromPreviousProperty:function(e,t){e.isDisposed||e.unbind(t)},hookUpToNewProperty:function(e,t,n,i,r,a){var s=arguments,o=e.getMetadataByType(h.a)[t];o||N(this.key,this.lookupPath,e),o._disconnectNodes(i,n),o._configurePropertyAsBound(i,n),this.__s._$BDC$hookUpToNewProperty.apply(this,s),c.a.triggerFlush()},nodeWillFree:function(e,t){var n=arguments,i=this.key,r=c.a.getDataForNode(t),a=f[r];a&&(a.isDisposed||(a.unbind(i),this.__s._$BOV$nodeWillFree.apply(this,n)))},__superMap:{_$Aef$init:"init",_$BDC$hookUpToNewProperty:"hookUpToNewProperty",_$BOV$nodeWillFree:"nodeWillFree"},staticMembers:{__QUALIFIED_CLASS_NAME__:"DownstreamChainedLookupTerminalNodeManager"}});function N(e,t,n){var i;i=n&&n.constructor?"an instance of "+n.constructor.toString():n?n+"":"a missing object ("+n+")",Object(s.b)("Attempted to bind or observe a non-observable property: '"+e+"' on "+i+", via path '"+t+"'.",{key:e,lookupPath:t,object:n})}n.d(t,"b",function(){return x}),n.d(t,"a",function(){return F}),n.d(t,"c",function(){return V});var P={upstreamNode:0,downstreamNode:0,clear:function(){this.upstreamNode=0,this.downstreamNode=0}},R=Object(i.b)("BindingConnection",function(e){e("CONNECT"),e("DONT_CONNECT"),e("OPTIONAL")}),x=Symbol("CW.OWNER"),F=r.a.extend(R.toStaticMixin(),{staticMembers:{createForPaths:function(e){var t,n,i=e?e.length:0,r=new Array(i);if(!e)return r;for(t=0;t<i;t++)(n=e[t]).instanceOf&&n.instanceOf(this)||(n=this.create(n)),r[t]=n;return r},hookUpBinding:function(e,t,n,i,r,s,o){t&&Object(a.a)(t)&&(t=this.create(t)),n&&Object(a.a)(n)&&(n=this.create(n)),void 0===s&&(s=this.OPTIONAL),void 0===o&&(o=this.CONNECT),P.clear(),k(e,t,i,!0,P);var l=P.upstreamNode,u=P.downstreamNode;P.clear(),k(e,n,i,!1,P);var d=P.upstreamNode,h=P.downstreamNode;if(o!==this.DONT_CONNECT)if(u>0&&h>0)c.a.addChildToNode(h,u,r);else if(o===this.CONNECT)return!1;if(s!==this.DONT_CONNECT)if(l>0&&d>0)c.a.addChildToNode(l,d,i);else if(s===this.CONNECT)return!1;return!0},hookUpDownstreamNode:function(e,t,n,i){P.clear(),k(e,t,!1,!0,P);var r=P.downstreamNode;return!(r<=0||(c.a.addChildToNode(n,r,i),0))},__QUALIFIED_CLASS_NAME__:"Binding"},rootObject:null,path:"",components:null,init:function(e,t){this.__s._$3Tm$init.call(this),e||Object(s.b)("Cannot create CW.Binding with no path.",{path:e});var n=!1;"."===e[0]&&(n=!0,e=e.substring(1));var i=Object(o.a)(e),r=i[0];n||("global"===r||"🌐"===r?(t=window,i.shift()):"(owner)"===r&&(t&&Object(s.b)("Cannot create a CW.Binding relative to (owner): %{path}. It already has a root object.",{rootObject:t,path:e}),t=x,i.shift())),t!==x&&0===i.length&&Object(s.b)("Cannot create CW.Binding with an invalid path ('%{path}').",{path:e,rootObject:t}),this.components=i,this.path=i.join("."),t&&(this.rootObject=t)},__superMap:{_$3Tm$init:"init"}});function k(e,t,n,i,r){var a,o=t.components,l=o.length,u=0,d=t.rootObject||e;for(d===x&&Object(s.b)("CW.Binding cannot resolve path %{path}. (owner) was specified, but a value was not provided.",{path:t.path}),a=o[u];d&&(!d.downstreamNodes||!d.downstreamNodes.hasOwnProperty(a));)d=d[a],a=o[++u];if(!d||u===l){var h=o.join(".");Object(s.b)("No observable properties found along binding path ("+h+").",{object:e,path:h})}return u===l-1?function(e,t,n){var i=e.upstreamNodes[t];(i=c.a._sanitizeNodeID(i))>0&&(n.upstreamNode=i);var r=e.downstreamNodes[t];return(r=c.a._sanitizeNodeID(r))>0&&(n.downstreamNode=r),n}(d,a,r):function(e,t,n,i,r,a,s){var o,c,l=n.length,u=n[i],d=u;for(o=O.instanceFor(u).setUpForObject(e,t),i++;i<l-1;i++)d+="."+(u=n[i]),o=C.instanceFor(u,d).setUpForObject(e,t,o);return d+="."+(u=n[i]),(c=a?D.instanceFor(u,d):L.instanceFor(u,d)).setUpForObject(e,t,o,r),s.downstreamNode=c.getDownstreamProxyNode(t),s.upstreamNode=c.getUpstreamProxyNode(t),s}(e,d,o,u,n,i,r)}function V(e){return F.create(e)}},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n(68),r=n(1169),a=i.a.extend({debugType:"Base",isCacheable:!0,calculateValueForNode:null,previousValueWasReplaced:r.a,flushNode:r.a,notifyNode:r.a,didAddParentToNode:r.a,didRemoveParentFromNode:r.a,didAddChildToNode:r.a,didRemoveChildFromNode:r.a,willRemoveChildFromNode:r.a,willRemoveParentFromNode:r.a,validateDescendantDownstreamNodeManager:r.a,wasDirtiedByParent:r.a,wasDirtiedBySelf:r.a,nodeWillFree:r.a,addDebugInfoForNode:r.a,staticMembers:{__QUALIFIED_CLASS_NAME__:"NodeManager"}})},function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return a});var i=n(1182),r={MOUSE:"mouse",PEN:"pen",TOUCH:"touch"},a=n(313).a.extend({staticMembers:{nativePropertiesToCopy:Object(i.a)(["pointerId","width","height","pressure","tiltX","tiltY","pointerType","isPrimary"]),eventPropertiesToCopy:Object(i.a)(["pointerId","width","height","pressure","tiltX","tiltY","pointerType","isPrimary"]),__QUALIFIED_CLASS_NAME__:"PointerEvent"},pointerId:0,width:0,height:0,pressure:0,tiltX:0,tiltY:0,pointerType:"",isPrimary:!1})},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n(314),r=n(1143),a=[];function s(e){var t=Object(i.a)(e);return t||((t=function(){var t=arguments.length;a.length=t+0-0;for(var n=0,i=0;n<t;n++,i++)a[i]=arguments[n];var s=a;return Object(r.b)(e,s,this)})._exceptionHandling_wrappedFunction=!0,t._exceptionHandling_inputFunction=e,e._exceptionHandling_wrappedFunction=t,t)}},function(e,t,n){"use strict";var i=n(177),r=n(49),a=n(34),s=n(54),o=n(788),c=n(41),l=n(172),u=n(1185),d=n(167),h=n(1177),p=n(9);function f(e,t,n){if(!h.a(e))return"";var i=e.loggedInUserCanEditShare,r="CKSharing.SummaryText";switch(r+=i?".OwnerAdmin":".Participant",r+=e.isPublic?".Public":".Private",n||e.effectivePermission){case p.a.READ_WRITE:r+=".RW";break;case p.a.READ_ONLY:r+=".RO";break;case p.a.MIXED:r+=".Mixed"}return i?l.d(r+"."+t):l.d(r,{ownerName:e.owner.displayName})}n(21);var g=n(265),m=n(101),v=n(114),_=n(103);n.d(t,"d",function(){return b}),n.d(t,"c",function(){return y}),n.d(t,"b",function(){return I}),n.d(t,"a",function(){return w});var b=i.b("ShareState",{NONE:0,NEW:1,NEW_SAVING:2,LOADING:3,LOADED:4,LOADED_DIRTY:5,LOADED_SAVING:6,DESTROYING:7,DESTROYED:8}),y=i.b("OperationType",{INITIATE_SHARE:"CREATE",ADD_PARTICIPANTS:"ADD_PEOPLE_TO",MANAGE_SHARE:"UPDATE"}),I={mixinDependencies:[r.a],ioService:a.b({strong:!0}),isLoading:a.b({dependencies:["state"],readOnly:!0,get:Object.assign(function(){return this.state===b.LOADING},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])===b.LOADING}})}),isDestroying:a.b({dependencies:["state"],readOnly:!0,get:Object.assign(function(){return this.state===b.DESTROYING},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])===b.DESTROYING}})}),isSavingShare:a.b({dependencies:["state"],readOnly:!0,get:Object.assign(function(){return this.state===b.NEW_SAVING||this.state===b.LOADED_SAVING},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])===b.NEW_SAVING||i.internalGet(this,t[0+n])===b.LOADED_SAVING}})}),cacheingProvideRootRecordFunction:null,setUp:s.a.define(),settings:a.b({type:d.a}),share:a.b(null),state:a.b({dependencies:["_state"],readOnly:!0,get:Object.assign(function(){return this._state},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])}})}),_state:a.b({defaultValue:b.NONE}),permissionValueForAddingParticipants:a.b(),summaryTextWOption:a.b({readOnly:!0,dependencies:["permissionValueForAddingParticipants","settings.defaultPermission","share","share.loggedInUserCanEditShare","share.isPublic","share.effectivePermission","share.owner","share.owner.displayName"],get:Object.assign(function(){return f(this.share,"WOption",this._computePermissionForSummaryText())},{__CW__getter:function(e,t,n,i){return f(i.internalGet(this,t[2+n]),"WOption",this._computePermissionForSummaryText())}})}),summaryTextNoOption:a.b({readOnly:!0,dependencies:["permissionValueForAddingParticipants","settings.defaultPermission","share","share.loggedInUserCanEditShare","share.isPublic","share.effectivePermission","share.owner","share.owner.displayName"],get:Object.assign(function(){return f(this.share,"NoOption",this._computePermissionForSummaryText())},{__CW__getter:function(e,t,n,i){return f(i.internalGet(this,t[2+n]),"NoOption",this._computePermissionForSummaryText())}})}),_computePermissionForSummaryText:function(){var e=this.permissionValueForAddingParticipants,t=this.share,n=t&&t.effectivePermission;e&&"MIXED"!==n||(e=n);var i=this.settings;return e||i&&i.defaultPermission}},w=o.a.extend(I,{operationType:c.c(),transport:a.b(),cancelOnUnrecoverableError:function(e){var t=e.error;this.sendEvent("cancel",t)},createShare:function(e){var t=this,n=this.share,i=this.cacheingProvideRootRecordFunction,r=this.settings,a={didUpdateRootRecord:r.didUpdateRootRecord,provideRootRecordForUpdate:i,provideLatestRootRecordAfterUpdateConflict:r.provideLatestRootRecordAfterUpdateConflict},s={didUpdateRootRecord:r.didUpdateRootRecord,provideRootRecordForUpdate:i,provideLatestRootRecordAfterUpdateConflict:r.provideLatestRootRecordAfterUpdateConflict,didUpdateShareRecord:r.didUpdateShareRecord,proposedShareRecordName:r.proposedShareRecordName},o=this.ioService,c=null==n.shortGUID?i().then(function(e){return o.createShortGUID(e,a)}):i();this._state=b.NEW_SAVING;var l=c.then(function(e){n.forRecord=e}).then(o.createShare.bind(o,s)).then(function(e){return t._state=b.LOADED,t.share=e,e});if(e)return l;var u={operationType:"INVITE_TO_"+(n.isPublic?"PUBLIC":"PRIVATE.VIA_UNKNOWN"),appName:r.shareItemType,interactionMode:r.primaryInteractionMode};return l.catch(Object(m.a)(u,r.notificationService,r.logService))},validateInviteesToAddToShare:function(e,t){if(this.checkAndDisplayErrorForInvalidInvitees(e,t))return!1;if(this.checkIfAllInviteesAreCurrentUser(e)){var n=void 0;return t&&(n="ADDED_ONLY_YOURSELF_EMAIL"),this.settings.notificationService.error("ADDED_ONLY_YOURSELF",{locNamespace:"CKSharing.ErrorDialog",descriptionKey:n}),!1}return!this.checkIfTooManyInvitees(this.share,e)||(this.settings.notificationService.error("TOO_MANY_INVITEES",{locNamespace:"CKSharing.ErrorDialog"}),!1)},checkIfTooManyInvitees:function(e,t){if(!e||e.isPublic)return!1;var n=e.participants,i=(n.length||0)-1;i+=t&&t.length||0;var r={};n.forEach(function(e){var t=e.userIdentity;r[t.emailAddress||t.phoneNumber]=!0});var a=0;t&&t.forEach(function(e){var t=e.userIdentity;r[t.emailAddress||t.phoneNumber]?++a:r[t.emailAddress||t.phoneNumber]=!0});var s=this.settings.maxNumberOfInvitees;return i-a>s},checkAndDisplayErrorForInvalidInvitees:function(e,t){var n,i=e.length,r=0;return e&&e.forEach(function(e){var i=e.userIdentity;(!i||!i.emailAddress&&t||!i.emailAddress&&!i.phoneNumber)&&(++r,n||(n=e.displayName))}),this.displayInvalidInviteesAlert(r,i,n,t)},displayInvalidInviteesAlert:function(e,t,n,i){if(!e)return!1;var r="ALL_INVALID_TOKENS",a={locNamespace:"CKSharing.ErrorDialog.ValidateTokens"+(i?".Email":"")};if(1===e){if(r="ONE_INVALID_TOKEN",n.length>69){var s=n.length,o=n.substr(0,34),c=n.substr(s-34,34);n=o+l.d("CKSharing.ErrorDialog.ValidateTokens.ONE_INVALID_TOKEN.OVER_SIZE.Ellipsis")+c}a.messageFormatValues={value:n}}else e!==t&&(r="SOME_INVALID_TOKENS");return this.settings.notificationService.error(r,a),!0},checkIfAllInviteesAreCurrentUser:function(e){return!!(e&&e.length&&e.every)&&e.every(this.checkIfInviteeIsCurrentUser.bind(this))},checkIfInviteeIsCurrentUser:function(e){var t=this.settings.loggedInUserIdentity.appleId,n=Object(v.a)(e.userIdentity.emailAddress),i=Object(_.a)(e.userIdentity.phoneNumber);return n&&n===t||i&&i===t},saveShare:function(e){var t,n=this.share,i=this.operationType;if(i&&(i===y.INITIATE_SHARE?t="InitiatingNewShare":i===y.ADD_PARTICIPANTS&&(t="AddingParticipantsToShare"),t)){var r=this.settings,a=this.transport;a.value&&(a=a.value),r.logService.recordStat(t,{appName:r.appName,transport:a})}return null==n.recordName?this.createShare(e):this.updateShare(e)},setUp:function(){var e=this,t=this.settings,n=this.share;if(n){this._state=b.LOADED;var i=t.shareRecordFields;return i&&n.assignFieldUpdates(i),this.permissionValueForAddingParticipants||(this.permissionValueForAddingParticipants=Object(g.a)(n.effectivePermission,t.supportedPermissions)),this.sendEvent("sharingUIIsReady"),u.a.resolve()}this._state=b.LOADING;var r=this.ioService;return this.cacheingProvideRootRecordFunction().then(function(e){return e.share&&e.share.recordName?e:r.fetchDataRecord(e.recordName)}).then(function(n){if(!n.share||!n.share.recordName)throw new Error("Record does not contain share information.");return e.ioService.fetchShareRecord(n.share.recordName).then(function(n){e._state=b.LOADED;var i=t.shareRecordFields;i&&n.assignFieldUpdates(i),e.share=n,e.permissionValueForAddingParticipants=Object(g.a)(e.share.effectivePermission,t.supportedPermissions),e.sendEvent("sharingUIIsReady")})}).catch(function(t){e.sendEvent("cancel",t)})},updateShare:function(e){var t=this,n=this.settings,i={didUpdateRootRecord:n.didUpdateRootRecord,willUpdateShareRecord:n.willUpdateShareRecord,didUpdateShareRecord:n.didUpdateShareRecord};t._state=b.LOADED_SAVING;var r=t.ioService.updateShare(i).then(function(e){return t.sendEvent("shareWasUpdated",e,!0),t._state=b.LOADED,e});if(e)return r;var a={operationType:"UPDATE",appName:n.shareItemType,interactionMode:n.primaryInteractionMode};return r.catch(Object(m.a)(a,n.notificationService,n.logService))},staticMembers:{__QUALIFIED_CLASS_NAME__:"BaseShareViewController"}})},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(e){function t(n){!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return i.name="MessagingArgumentError",i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(n(241).a)},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n(1278),r=n(34),a=n(1125),s=n(197),o=i.a.extend({staticMembers:{storageKey:"derivatives"},maxConcurrentImageRequestCount:i.a.numberProperty(24),extraImageRequestDelayMax:i.a.numberProperty(0),extraImageRequestDelayMin:i.a.numberProperty(0),enableDerivativeCache:i.a.booleanProperty(!0),enableDerivativeDownsampling:i.a.booleanProperty(!0),maxStoredMegapixelsMouse:i.a.numberProperty(100),maxStoredMegapixelsInBackgroundMouse:i.a.numberProperty(40),maxStoredMegapixelsTouch:i.a.numberProperty(33),maxStoredMegapixelsInBackgroundTouch:i.a.numberProperty(15),maxStoredMegapixelsHalfLife:i.a.numberProperty(5e3),maxStoredMegapixelsLinearBleed:i.a.numberProperty(1),maxStoredMegapixels:r.b({readOnly:!0,dependencies:["_isTouch","maxStoredMegapixelsTouch","maxStoredMegapixelsMouse"],get:Object.assign(function(){return this._isTouch?this.maxStoredMegapixelsTouch:this.maxStoredMegapixelsMouse},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?i.internalGet(this,t[1+n]):i.internalGet(this,t[2+n])}})}),maxStoredMegapixelsInBackground:r.b({readOnly:!0,dependencies:["_isTouch","maxStoredMegapixelsInBackgroundTouch","maxStoredMegapixelsInBackgroundMouse"],get:Object.assign(function(){return this._isTouch?this.maxStoredMegapixelsInBackgroundTouch:this.maxStoredMegapixelsInBackgroundMouse},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?i.internalGet(this,t[1+n]):i.internalGet(this,t[2+n])}})}),_isTouch:r.b({readOnly:!0,dependencies:[a.a.bindingFor("application.primaryInteractionMode")],get:Object.assign(function(){return a.a.getPath("application.primaryInteractionMode")===s.a.TOUCH},{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])===s.a.TOUCH}})}),numberOfDerivativesToLogTimingFor:i.a.numberProperty(10)}).create()},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i={TOUCH:"TOUCH",MOUSE:"MOUSE"};Object.freeze(i)},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n(144),r=n(338);function a(e,t,n){return function(a){if(!(a.isCKError||a instanceof i.a))throw a;var s=void 0,o={locNamespace:"CKSharing.ErrorDialog",interactionMode:e.interactionMode},c=Object(r.a)(a),l=CloudKit.CKError,u=e.operationType,d=a.ckErrorCode;if("POLL_SHARE"!==u){switch(c){case l.ACCESS_DENIED:case"MANAGED_APPLE_ID_RESTRICTED":s=l.ACCESS_DENIED,o.descriptionLocSuffix="Description."+e.appName;break;case l.AUTHENTICATION_FAILED:case l.AUTHENTICATION_REQUIRED:throw a;case l.CONFLICT:case"OP_LOCK_FAILURE":case l.NOT_FOUND:s=u,"INVITE_TO_PUBLIC"!==u&&"SEND_LINK"!==u||(o.messageLocSuffix="Message."+e.appName),o.descriptionKey=l.CONFLICT;break;case l.ZONE_NOT_FOUND:s=e.operationType,o.descriptionKey=l.NOT_FOUND,o.descriptionLocSuffix="Description."+e.appName;break;default:if(s=e.operationType,"INVITE_TO_PUBLIC"!==u&&"SEND_LINK"!==u||(o.messageLocSuffix="Message."+e.appName),o.descriptionKey=l.UNKNOWN_ERROR,n){var h,p=a.isCKError?" response from the server.":" response from the customer";h={name:a.name,message:a.message,ckErrorCode:d,operationType:u},n.recordStat("CloudKit Sharing Framework: Unhandled "+d+p,h)}}t&&t.error(s,o)}}}},function(e,t,n){"use strict";n.d(t,"a",function(){return h});var i=n(784),r=n(156),a=n(169),s=n(47),o=n(70),c=n(400),l=n(67),u=n(40),d=Array.from(new Set([].concat(l.a.serviceKeys,s.a.serviceKeys))).sort(),h={systemContainerItemServiceKeys:d,containerItemServiceKeys:Array.from(new Set([].concat(d,o.a.serviceKeys))).sort(),getDesiredKeys:function(e,t){return e.isPredefinedSmartAlbum?this.systemContainerItemServiceKeys:this.containerItemServiceKeys},getRawHashesForRecordsByType:function(e,t,n){for(var a=[],c=[],d={},h=[],p=[],f=[],g=0,m=t.length;g<m;g++){var v=t[g],_=v.recordType;switch(_){case l.a.CK_RECORD_TYPE:var b=l.a.getDataValuesFromServiceValues(v,{zone:e});h.push(b),d[b.recordName]=b;break;case s.a.CK_RECORD_TYPE:var y=s.a.getDataValuesFromServiceValues(v,{zone:e});p.push(y);var I=y.pk,w=I;a.push(w);var S=u.a.getRawHash(w,n);S.master=r.a.getPrimaryKeyWithZonePK(e,y.masterRefRecordName),S.asset=I,c.push(S);break;case o.a.CK_RECORD_TYPE:var C=o.a.getDataValuesFromServiceValues(v,{zone:e});f.push(C);break;default:i.b.warn("Media/List: Ignoring unknown recordType="+_);continue}}return{mediaPKs:a,mediaHashes:c,masterHashes:h,assetHashes:p,containerRelationHashes:f}},getIsContainerRecordUsable:function(e){var t=a.d(e,"albumType");return this.getIsContainerAlbumTypeUsable(t)},getIsContainerAlbumTypeUsable:function(e){return e!==c.a.SMART.value}}},function(e,t,n){"use strict";function i(e){return(e=(e=(e||"").toLowerCase()).replace(/./g,function(e){return r[e]||e}))&&e.replace(/[^0-9+]/g,"")}n.d(t,"a",function(){return i});var r={"０":"0","１":"1","２":"2","３":"3","４":"4","５":"5","６":"6","７":"7","８":"8","９":"9","٠":"0","١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","۰":"0","۱":"1","۲":"2","۳":"3","۴":"4","۵":"5","۶":"6","۷":"7","۸":"8","۹":"9","०":"0","१":"1","२":"2","३":"3","४":"4","५":"5","६":"6","७":"7","८":"8","९":"9","০":"0","১":"1","২":"2","৩":"3","৪":"4","৫":"5","৬":"6","৭":"7","৮":"8","৿":"9","๐":"0","๑":"1","๒":"2","๓":"3","๔":"4","๕":"5","๖":"6","๗":"7","๘":"8","๙":"9",a:"2",b:"2",c:"2",d:"3",e:"3",f:"3",g:"4",h:"4",i:"4",j:"5",k:"5",l:"5",m:"6",n:"6",o:"6",p:"7",q:"7",r:"7",s:"7",t:"8",u:"8",v:"8",w:"9",x:"9",y:"9",z:"9"}},function(e,t,n){"use strict";n.d(t,"b",function(){return l}),n.d(t,"a",function(){return u});var i=n(775),r=n(217),a=n(72),s=n(71),o=n(75),c=n(125),l=a.a.extend({nodeType:"ELEMENT",register:function(e,t,n){if(!n){var i=t.name;i&&Object(o.b)(e,i,t)}var r,a,s=t.classes;if(s){var c=s.length;for(a=0;a<c;a++)e.registerOutletAndSubOutlets(s[a],t)}var l=t.styles;if(l)for(r in l)e.registerOutletAndSubOutlets(l[r],t);var u=t.attributes;if(u)for(r in u){var d=u[r];e.registerOutletAndSubOutlets(d,t)}var h=t.children;if(h){var p=h.length;for(a=0;a<p;a++){var f=h[a];f.index=a,e.registerOutletAndSubOutlets(f,t)}}},render:function(e,t,n){var r,a,s=n.namespace,o=n.tagname,l=s?t.createElementNS(s,o):t.createElement(o),u=n.classes;if(u){var d=l.classList,h=u.length;for(a=0;a<h;a++){var p=e.renderNodeAndSubNodes(u[a],t);p&&d.add(p)}}var f=n.styles;if(f)for(r in f)Object(c.a)(l,r,e.renderNodeAndSubNodes(f[r],t));var g=n.attributes;if(g)for(r in g){var m,v=g[r];(m=Object(i.a)(v)?v.namespace:null)?l.setAttributeNS(m,r,e.renderNodeAndSubNodes(v,t)):l.setAttribute(r,e.renderNodeAndSubNodes(v,t))}var _=n.children;if(_){var b=_.length;for(a=0;a<b;a++){var y=_[a];y.index=a,l.appendChild(e.renderNodeAndSubNodes(y,t))}}return l},staticMembers:{__QUALIFIED_CLASS_NAME__:"_ElementHandler"}}),u={mixinDependencies:[s.a,r.a],staticMembers:{handler:l.create()}}},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n(36),r=n(34),a={mixinDependencies:[i.a],viewportWidth:r.b(0),viewportHeight:r.b(0)}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n(69),r={staticMembers:{getDataHashForPrimaryKey:function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.b()).readDataForPrimaryKey(this,e)},getDataHashForStoreId:function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.b()).readData(e)}}}},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n(80),r=n(41),a=i.a.extend({staticMembers:{getZoneIdString:function(e){return e.ownerRecordName+":"+e.zoneName},getFromZonePK:function(e){var t=e.split(":");return{ownerRecordName:t[0],zoneName:t[1]}},getOwnerRecordNameFromZoneIdString:function(e){var t=e.indexOf(":");return e.substring(0,t)},getZoneNameFromFromZoneIdString:function(e){var t=e.indexOf(":");return e.substring(t+1)},isSameZoneID:function(e,t){return e.ownerRecordName===t.ownerRecordName&&e.zoneName===t.zoneName},__QUALIFIED_CLASS_NAME__:"ZoneID"},ownerRecordName:r.c(),zoneName:r.c("_defaultZone")})},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i={MarkerSegments:{SOI:65496,APP0:65504,APP1:65505,APP2:65506,DQT:65499,DHT:65476,DRI:65501,SOF:65472,SOS:65498,EOI:65497},Tiff:{34665:"ExifOffset",34853:"GPSOffset",40965:"InteroperabilityOffset",274:"Orientation",271:"Make",272:"Model",305:"Software",256:"ImageWidth",257:"ImageLength",270:"ImageDescription"},Exif:{40962:"PixelXDimension",40963:"PixelYDimension",34675:"ICCProfile",40961:"ColorSpace",41987:"WhiteBalance",33437:"FNumber",37383:"MeteringMode",37386:"FocalLength",34855:"ISOSpeedRatings",37377:"ShutterSpeed",33434:"ExposureTime",37380:"ExposureBiasValue",37500:"MakerNote",42036:"LensModel"},GPS:{1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude"},AppleMakerNotes:{10:"HDRImageType",11:"BurstUUID",17:"LivePhotosUUID"}}},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n(156),r=n(169),a=i.a.extend({staticMembers:{_isAbstract:!0,__QUALIFIED_CLASS_NAME__:"Record"},isDeleted:r.b(),isExpunged:r.b(),dateExpunged:r.e({readOnly:!0}),remappedRef:r.h({serviceKey:"remappedRef",serviceSubKey:"recordName",readOnly:!0})})},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var i=n(784),r=n(41),a=n(34),s=n(164),o=n(309),c=n(25),l={mixinDependencies:[o.a],staticMembers:{requestLoggingLevel:i.a.LOG_LEVEL_DEBUG},shouldReportFailure:r.c({get:function(e){return"boolean"==typeof e?e:421!==this.getPath("response.status")}}),URLClass:s.a,specialResponseStatuses:[401,421,423,503],finalize:function(){var e=arguments;this.__s._$Sb$finalize.apply(this,e);var t=this.get("response");if(t){var n=t.get("status");-1!==this.specialResponseStatuses.indexOf(n)&&this._specialResponseWasReceived()}},_specialResponseWasReceived:function(){var e=this.get("response"),t=e.get("status"),n=e.get("body"),i=JSON.stringify(n),r={serviceName:this.url.serviceName,timeTaken:Date.now()-this.sentAt};c.a.get("cloudOSService").didReceiveSpecialResponse(t,i,r)},url:a.b({defaultValue:function(){return this.URLClass.create()}}),__superMap:{_$Sb$finalize:"finalize"}}},function(e,t,n){"use strict";function i(e){return!!Array.isArray(e)||!!e&&"[object Arguments]"===Object.prototype.toString.call(e)}n.d(t,"a",function(){return i})},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n(41),r=n(13),a={staticMembers:{isSerializableModel:!0,serializableModelPropertyMap:i.c({readOnly:!0,get:function(){var e=this._serializableModelPropertyMap;return void 0===e?this._serializableModelPropertyMap=this._getSerializableModelPropertyMap():e}}),_getSerializableModelPropertyMap:function(){var e=this.prototype.getMetadataByType(r.a),t={};for(var n in e)t[n]=e[n];return t},_serializableModelPropertyMap:void 0,serializableModelPropertyNames:i.c({readOnly:!0,get:function(){var e=this._serializableModelPropertyNames;return void 0===e?this._serializableModelPropertyNames=this._getSerializableModelPropertyNames():e}}),_getSerializableModelPropertyNames:function(){var e=this.serializableModelPropertyMap;return Object.getOwnPropertyNames(e)},_serializableModelPropertyNames:void 0,serviceKeys:i.c({readOnly:!0,get:function(){var e=this._serviceKeys;return void 0===e?this._serviceKeys=this._getServiceKeys():e}}),_getServiceKeys:function(){for(var e=new Set,t=this.serializableModelPropertyNames,n=this.serializableModelPropertyMap,i=0,a=t.length;i<a;i++){var s=t[i],o=n[s];if(o instanceof r.a.Constructor){var c=o.dataKey,l=void 0===c?s:c,u=o.serviceKey,d=void 0===u?l:u;e.add(d)}}return Array.from(e).sort()},_serviceKeys:void 0,getDataValuesFromServiceValues:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.serializableModelPropertyNames,i=this.serializableModelPropertyMap,r=0,a=n.length;r<a;r++){var s=n[r],o=i[s],c=o.dataKey,l=void 0===c?s:c,u=o.serviceKey,d=void 0===u?l:u,h=o.serviceValueGetter(e,d),p="function"==typeof o.getDataValueFromServiceValue?o.getDataValueFromServiceValue(h):h;void 0===p&&l in t||(t[l]=p)}return t},getServiceValuesFromDataValues:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2],i=void 0!==n;void 0===t.fields&&(t.fields={});for(var r=this.serializableModelPropertyNames,a=this.serializableModelPropertyMap,s=0,o=r.length;s<o;s++){var c=r[s],l=a[c],u=l.dataKey,d=void 0===u?c:u;if(!i||n.includes(d)){var h=l.serviceKey,p=void 0===h?d:h,f=e[d],g="function"==typeof l.getServiceValueFromDataValue?l.getServiceValueFromDataValue(f):f;!i&&l.readOnly||"function"!=typeof l.serviceValueSetter||l.serviceValueSetter(t,p,g)}}return t}},getServiceValuesFromDataValues:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.constructor.getServiceValuesFromDataValues(this.getDataHash(),t,e)}}},function(e,t,n){"use strict";n.r(t),n.d(t,"MediaListOperationHandler",function(){return T});var i,r,a=n(1223),s=n(74),o=n(156),c=n(1185),l=n(65),u=n(69),d=n(92),h=n(1219),p=n(160),f=n(102),g=n(33),m=n(70),v=n(67),_=n(47),b=n(40),y=n(159),I=(i=c.a,(r=function(e){var t=i.create();try{e(t.resolve.bind(t),t.reject.bind(t))}catch(e){t.reject(e)}return t}).all=i.all.bind(i),r.race=i.race.bind(i),r.resolve=i.resolve.bind(i),r.reject=i.reject.bind(i),r),w=CloudKit.QueryFilterComparator.EQUALS,S=a.a.STRING.name,C=a.a.INT64.name,O=a.a.TIMESTAMP.name,A=y.a.minMediasForRangeRequest,E=y.a.maxMediasForRangeRequest,T=h.a.extend({mixinDependencies:[s.a],staticMembers:{avgRecordsPerItemForPairs:2,avgRecordsPerItemForTriples:3,itemsMin:A,itemsMax:E,_getRecordsLimit:function(e,t){var n=t in g.a.PredefinedName;return 1===e?e*(n?2:3):Math.max(Math.min(e,T.itemsMax),T.itemsMin)*(n?this.avgRecordsPerItemForPairs:this.avgRecordsPerItemForTriples)|0},QueryType:{RANK:"RANK",DATE:"DATE",POSITION:"POSITION"},getQueryFilterBy:function(e,t,n){switch(n){case T.QueryType.RANK:return[{fieldName:"startRank",comparator:w,fieldValue:{value:e,type:C}},{fieldName:"direction",comparator:w,fieldValue:{value:e<=t?"ASCENDING":"DESCENDING",type:S}}];case T.QueryType.POSITION:return[{fieldName:"startPosition",comparator:w,fieldValue:{value:e,type:C}},{fieldName:"endPosition",comparator:w,fieldValue:{value:t,type:C}}];case T.QueryType.DATE:return[{fieldName:"startDate",comparator:w,fieldValue:{value:e,type:O}},{fieldName:"endDate",comparator:w,fieldValue:{value:t,type:O}}];default:throw new l.a("Media/List: Improper use of API: unexpected queryType value="+n)}},__QUALIFIED_CLASS_NAME__:"MediaListOperationHandler"},handlesType:u.a.READ.LIST,action:function(e,t){var n,i=this;return(n=regeneratorRuntime.mark(function n(){var r,a,s,c,l,h,y,I,w,S,C,O,A,E,M,D,L,N,P,R,x,F,k,V,j,B,U,W,G,H,$,z,K,Q,q,Y,Z,J,X,ee,te,ne,ie,re,ae,se,oe,ce,le,ue,de,he,pe,fe,ge,me,ve,_e,be,ye,Ie,we,Se,Ce,Oe;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:r=e.context,a=r.containerPK,n.next=4;break;case 4:s=g.a.find(a),c=s.zone,l=s.recordName,h=r.first,y=r.last,I=r.hydrationLevel,w=r.limit,S=r.queryType,C=void 0===S?T.QueryType.RANK:S,O=r.sortType,A=void 0===O?s.sortType||p.a.MANUAL:O,E=r.sortAscending,M=void 0===E?s.sortAscending:E,n.next=9;break;case 9:D=C===T.QueryType.RANK,L=u.b(),N=L.getDatabaseForScope(c.scope).databaseInstance,P=g.a.getQueryItemListRecordType(l,A),R=I.value<b.a.HydrationLevel.FULL.value,x=f.a.getDesiredKeys(s,I),F=h<=y?1:-1,k=Math.abs(y-h)+1,V=Math.min(k,w||Number.MAX_SAFE_INTEGER),j=A===p.a.MANUAL,U=(B=D&&(j?!M:M))?s.medias.length-1-h:h,W=B?s.medias.length-1-y:y,G={recordType:P,filterBy:T.getQueryFilterBy(U,W,C)},(H=g.a.getQueryItemListFilterBy(l))&&G.filterBy.push(H),$={zoneID:c.zoneID,desiredKeys:x,resultsLimit:T._getRecordsLimit(w||V,l)},n.prev=26,z=G,K=0,Q=[];case 30:return n.next=32,N.performQuery(z,$);case 32:if(!(q=n.sent).hasErrors){n.next=49;break}Y=q.errors,Z=Array.isArray(Y),J=0,Y=Z?Y:Y[Symbol.iterator]();case 35:if(!Z){n.next=41;break}if(!(J>=Y.length)){n.next=38;break}return n.abrupt("break",49);case 38:X=Y[J++],n.next=45;break;case 41:if(!(J=Y.next()).done){n.next=44;break}return n.abrupt("break",49);case 44:X=J.value;case 45:ee=X,i.handleError(ee,e,t);case 47:n.next=35;break;case 49:for(te=f.a.getRawHashesForRecordsByType(c.pk,q.records,I),ne=te.mediaPKs,ie=te.mediaHashes,re=te.masterHashes,ae=te.assetHashes,se=te.containerRelationHashes,oe=h+K*F,K+=ie.length,T.N?++T.N:T.N=1,L.loadData(m.a,se,R),L.loadData(v.a,re,R),L.loadData(_.a,ae,R),ce=0,le=se.length;ce<le;ce++)for(ue=se[ce],de=ue.recordName,he=ue.itemId,pe=0,fe=ie.length;pe<fe;pe++)ge=ie[pe],L.readDataForPrimaryKey(_.a,ge.asset).recordName===he&&(me=ge.containerRelations,ve=void 0===me?ge.containerRelations=[]:me,_e=o.a.getPrimaryKeyWithZonePK(c.pk,de),ve.push(_e));return n.next=60,L.loadData(b.a,ie,R);case 60:be=n.sent,Q.push.apply(Q,be),D&&(Ie=s.getDataHash(),we=Ie.medias,Se={pk:s.pk,medias:Array.isArray(we)?[].concat(we):[]},Ce=ne,s.isRecentlyDeletedAlbum&&ie.length>we.length&&(Ce=ne.slice(0,we.length)),(ye=Se.medias).splice.apply(ye,[oe,Ce.length].concat(Ce)),L.loadData(g.a,Se,!0)),z=q,K<V&&(Oe=V-K,$.resultsLimit=T._getRecordsLimit(Oe,l));case 65:if(!0===z.moreComing&&K<V){n.next=30;break}case 66:return n.abrupt("return",d.a.createFromStoreIds(Q,b.a,L));case 69:return n.prev=69,n.t0=n.catch(26),n.abrupt("return",i.handleError(n.t0,e,t));case 72:case"end":return n.stop()}},n,i,[[26,69]])}),function(){var e=n.apply(this,arguments);return new I(function(t,n){return function i(r,a){try{var s=e[r](a),o=s.value}catch(e){return void n(e)}if(!s.done)return I.resolve(o).then(function(e){i("next",e)},function(e){i("throw",e)});t(o)}("next")})})()}})},function(e,t,n){"use strict";function i(e){return(e||"").trim().toLowerCase()}n.d(t,"a",function(){return i})},function(e,t,n){"use strict";n(277);var i=n(34),r=n(180),a=n(93),s=n(120),o=n(81),c=n(36),l=n(125),u=n(1184),d=n(1182),h=n(902),p=n(192),f=n(124),g=n(784),m=n(46),v=[],_=function(e){if(e||(e=document.createElement("div")),"CANVAS"===e.tagName)return e.setCSSSize=A,C(e.getContext("2d")),e;for(var t=y.length,n=void 0;t--;)n=y[t],b.hasOwnProperty(n)&&(e[n]=b[n]);return I._init.call(e),e},b={maximumTileSize:1920,tileOverlap:10,_backingWidth:300,_backingHeight:150,getContext:function(e){if("2d"!==e)throw new Error("Only 2D canvases are supported by TiledCanvas.");return this._context?this._context:(this._context=new D(this),C(this._context),this._context)},toDataURL:function(){var e,t=this._canvases,n=t.length;if(1===n)return(e=t[0]).toDataURL.apply(e,arguments);var i=T.getInstance(),r=i._tc_context;i.width=this._backingWidth,i.height=this._backingHeight;var a=void 0,s=void 0;for(a=0;a<n;a++)s=t[a],r.drawImage(s,s._tc_left,s._tc_top);var o=i.toDataURL.apply(i,arguments);return T.disposeInstance(i),o},setCSSSize:function(e,t){e=e||0===e?Math.round(e):void 0,t=t||0===t?Math.round(t):void 0,this._cssWidth=e,this._cssHeight=t,I._doSubcanvasLayout.call(this)},_tc_drawIntoContext:function(e,t,n,i,r,a,s,o,c){switch(arguments.length){case 3:a=t,s=n,o=i=this._backingWidth,c=r=this._backingHeight,t=0,n=0;break;case 5:a=t,s=n,o=i,c=r,t=0,n=0,i=this._backingWidth,r=this._backingHeight;break;case 9:break;default:throw new Error("Unexpected number of arguments passed to _tc_drawIntoContext.")}if(e!==this._context||!I._drawIntoOwnContext.call(this,t,n,i,r,a,s,o,c)){var l=this._canvases,u=l.length,d=void 0,h=void 0,p=void 0,f=void 0,g=void 0,m=void 0,v=void 0,_=void 0,b=void 0,y=void 0,w=void 0,S=void 0,C=void 0,O=void 0;for(d=0;d<u;d++)p=(h=l[d])._tc_left,f=h._tc_top,g=h._tc_width,m=h._tc_height,w=a+((v=Math.max(p,t))-t)/i*o,S=s+((_=Math.max(f,n))-n)/r*c,C=(b=Math.min(p+g,t+i)-v)*(o/i),O=(y=Math.min(f+m,n+r)-_)*(c/r),_-=f,(v-=p)>=0&&_>=0&&b>0&&y>0&&v+b<=h._tc_width&&_+y<=h._tc_height&&e.drawImage(h,v,_,b,y,w,S,C,O)}}},y=Object.keys(b),I={_init:function(){this._canvases=[],this._transformStack=[],this._currentTransform=[1,0,0,1,0,0],this._isTransformed=!1,Object.defineProperty(this,"width",w),Object.defineProperty(this,"height",S),I._doSubcanvasLayout.call(this,!0)},_doSubcanvasLayout:function(e){if(this._backingWidth&&this._backingHeight){var t=this._backingWidth,n=this._backingHeight,i=void 0===this._cssWidth?t:this._cssWidth,r=void 0===this._cssHeight?n:this._cssHeight,a=i/t,s=r/n,o=p.a.sharedInstance.devicePixelRatio,c=this.maximumTileSize,u=Math.ceil(this.tileOverlap/o)*o,d=Math.ceil(t/(c-u-1)),h=Math.ceil(n/(c-u-1)),f=Math.ceil((t/d+u|0)/o)*o,g=Math.ceil((n/h+u|0)/o)*o,m=this._canvases,v=h*d,_=void 0,b=void 0,y=void 0,w=void 0,S=void 0,C=void 0,O=void 0,A=void 0;for(_=0;_<v;_++)b=m[_]||(m[_]=T.getInstanceAndAppendToElement(this)),O=(S=_%d|0)*(f-u),S<d-1?y=f:O=t-(y=Math.ceil((t-O)/o)*o),A=(C=_/d|0)*(g-u),C<h-1?w=g:A=n-(w=Math.ceil((n-A)/o)*o),(e||y!==b.width)&&(b.width=y),w!==b.height&&(b.height=w),l.a(b).set("width",y/o).set("height",w/o).translate(O*a,A*s).scale(a*o,s*o),b._tc_left=O,b._tc_top=A,b._tc_width=y,b._tc_height=w;for(_=v;_<m.length;_++)(b=m[_])&&T.disposeInstance(b);m.length=v,I._applyCurrentTransformToContexts.call(this),l.a(this).set("width",i).set("height",r)}else I._clearBackingStores.call(this)},_clearBackingStores:function(){var e=this._canvases,t=e.length,n=void 0,i=void 0;for(n=0;n<t;n++)((i=e[n]).width||i.height)&&(i.width=i.height=0)},_setContextProperty:function(e,t){var n=this._canvases,i=n.length,r=void 0;for(r=0;r<i;r++)n[r]._tc_context[e]=t},_callContextMethod:function(e,t){var n=this._canvases,i=n.length,r=void 0,a=void 0,s=void 0;for(r=0;r<i;r++){var o;a=(o=n[r]._tc_context)[e].apply(o,t),r&&f.a(a)&&s!==a&&g.b.warn("Calling query method `"+e+"` on a context for a TiledCanvas instance, and the individual contexts are returning differing values."),s=a}return a},_takeContextDrawImage:function(e,t,n,i,r,a,s,o,c){switch(arguments.length){case 3:a=t,s=n,o=i=e.naturalWidth||e.width,c=r=e.naturalHeight||e.height,t=0,n=0;break;case 5:a=t,s=n,o=i,c=r,t=0,n=0,i=e.naturalWidth||e.width,r=e.naturalHeight||e.height;break;case 9:break;default:throw new Error("Unexpected number of arguments passed to _tc_drawIntoContext.")}var l=this._canvases,u=l.length,d=void 0,h=void 0,p=void 0,f=void 0,g=void 0,m=void 0;for(d=0;d<u;d++)p=(h=l[d])._tc_left,f=h._tc_top,g=h._tc_width,m=h._tc_height,(E(p,f,g,m,a,s,o,c)||this._isTransformed)&&h._tc_context.drawImage(e,t,n,i,r,a,s,o,c)},_drawIntoOwnContext:function(e,t,n,i,r,a,s,o){var c;if(!E(e,t,n,i,r,a,s,o)&&!this._isTransformed)return!1;if(1===this._canvases.length)return!1;var l=this._context,u=this._tiledTempBufferContext;u||(u=this._tiledTempBufferContext=(new _).getContext("2d"));var d=u.canvas,h=d.width=this._backingWidth,p=d.height=this._backingHeight;return(c=u).setTransform.apply(c,this._currentTransform),u.drawImage(this,e,t,n,i,r,a,s,o),this._isTransformed?(l.save(),l.setTransform(1,0,0,1,0,0),l.drawImage(d,0,0),l.restore()):(r=Math.max(0,r),s=Math.min(s,h-r),a=Math.max(0,a),o=Math.min(o,p-a),l.drawImage(d,r,a,s,o,r,a,s,o)),d.width=d.height=0,!0},_takeContextTransform:function(e,t,n,i,r,a){var s=this._currentTransform,o=s[0]*e+s[2]*t,c=s[1]*e+s[3]*t,l=s[0]*n+s[2]*i,u=s[1]*n+s[3]*i,d=s[0]*r+s[2]*a+s[4],h=s[1]*r+s[3]*a+s[5];s[0]=o,s[1]=c,s[2]=l,s[3]=u,s[4]=d,s[5]=h,I._applyCurrentTransformToContexts.call(this)},_takeContextSetTransform:function(e,t,n,i,r,a){var s=this._currentTransform;s[0]=e,s[1]=t,s[2]=n,s[3]=i,s[4]=r,s[5]=a;for(var o=this._transformStack;o.length;)M.disposeInstance(o.pop());I._applyCurrentTransformToContexts.call(this)},_takeContextSave:function(){var e=M.getInstanceForTransform(this._currentTransform);this._transformStack.push(e)},_takeContextRestore:function(){var e=this._transformStack.pop();e&&(M.disposeInstance(this._currentTransform),this._currentTransform=e,I._applyCurrentTransformToContexts.call(this))},_applyCurrentTransformToContexts:function(){var e=this._currentTransform;this._isTransformed=1!==e[0]||1!==e[3]||e[1]||e[2]||e[4]||e[5];var t=this._canvases,n=t.length,i=void 0,r=void 0,a=void 0;for(i=0;i<n;i++){var s;(a=(r=t[i])._tc_context).setTransform(1,0,0,1,0,0),a.translate(-r._tc_left,-r._tc_top),(s=a).transform.apply(s,e)}}},w={configurable:!1,enumerable:!0,get:function(){return this._backingWidth},set:function(e){this._backingWidth=0|e,I._doSubcanvasLayout.call(this,!0)}},S={configurable:!1,enumerable:!0,get:function(){return this._backingHeight},set:function(e){this._backingHeight=0|e,I._doSubcanvasLayout.call(this,!0)}},C=function(e){if(e.drawImage!==O)return e._preTiledAcceptanceDrawImage=e.drawImage,e.drawImage=O,e},O=function(e){if("DIV"!==e.tagName)return this._preTiledAcceptanceDrawImage.apply(this,arguments);var t=e._tc_drawIntoContext,n=void 0;if(t){var i=arguments.length;v.length=i+0-0;for(var r=0,a=0;r<i;r++,a++)v[a]=arguments[r];return(n=v)[0]=this,t.apply(e,n)}},A=function(e,t){l.a(this).set("width",e).set("height",t)},E=function(e,t,n,i,r,a,s,o){return e<r+s&&e+n>r&&t<a+o&&t+i>a},T=m.b.extend({createInstance:function(){var e=document.createElement("canvas");return e._tc_context=e.getContext("2d"),l.a(e).set("position","absolute").set("top",0).set("left",0).set("transform-origin","0 0"),e},disposeInstance:function(e){var t=arguments;this.__s._$ABM$disposeInstance.apply(this,t),e.width=e.height=0,e._tc_context.setTransform(1,0,0,1,0,0);var n=e.parentNode;n&&n.removeChild(e)},getInstanceAndAppendToElement:function(e){var t=this.getInstance();return e.appendChild(t),t},__superMap:{_$ABM$disposeInstance:"disposeInstance"}}).create(),M=m.b.extend({createInstance:function(){return new Array(6)},getInstanceForTransform:function(e,t,n,i,r,a){var s=this.getInstance();return 1===arguments.length&&(t=e[1],n=e[2],i=e[3],r=e[4],a=e[5],e=e[0]),s[0]=e,s[1]=t,s[2]=n,s[3]=i,s[4]=r,s[5]=a,s}}).create(),D=function(e){this.canvas=e};function L(e,t,n){var i={};for(var r in n)n.hasOwnProperty(r)&&"value"!==r&&"writable"!==r&&(i[r]=n[r]);i.get=function(){return this.canvas._canvases[0]._tc_context[t]},i.set=function(e){return I._setContextProperty.call(this.canvas,t,e),e},Object.defineProperty(e,t,i)}function N(e,t){e[t]=function(){return I._callContextMethod.call(this.canvas,t,arguments)}}D.prototype={constructor:D,canvas:null,save:function(){I._takeContextSave.call(this.canvas)},restore:function(){I._takeContextRestore.call(this.canvas)},transform:function(e,t,n,i,r,a){void 0===a&&this._throwTypeError("transform",6),I._takeContextTransform.call(this.canvas,e,t,n,i,r,a)},setTransform:function(e,t,n,i,r,a){void 0===a&&this._throwTypeError("setTransform",6),I._takeContextSetTransform.call(this.canvas,e,t,n,i,r,a)},translate:function(e,t){void 0===t&&this._throwTypeError("translate",2),I._takeContextTransform.call(this.canvas,1,0,0,1,e,t)},scale:function(e,t){void 0===t&&this._throwTypeError("scale",2),I._takeContextTransform.call(this.canvas,e,0,0,t,0,0)},rotate:function(e){void 0===e&&this._throwTypeError("rotate",1);var t=Math.sin(e),n=Math.cos(e);I._takeContextTransform.call(this.canvas,n,t,-t,n,0,0)},drawImage:function(){I._takeContextDrawImage.apply(this.canvas,arguments)},_throwTypeError:function(e,t){throw new TypeError("Failed to execute '"+e+"' on 'TiledCanvasContext': "+t+" argument"+(1===t?"":"s")+" required.")}},function(){var e=D.prototype,t=document.createElement("canvas").getContext("2d"),n=void 0,i=void 0,r=void 0;for(i in t)e.hasOwnProperty(i)||"webkitImageSmoothingEnabled"!==i&&(n=Object.getOwnPropertyDescriptor(t,i)||Object.getOwnPropertyDescriptor(CanvasRenderingContext2D.prototype,i),r=t[i],!n||!n.writable&&!n.set||r instanceof Function||L(e,i,n),r instanceof Function&&N(e,i))}();var P=n(842).b.extend({numberOfTapsRequired:2,tapDistanceThreshold:50,isEventTooFar:function(e){var t=arguments;if("pointerUp"===e.cwType){var n=this.location,i=n.x,r=n.y,a=e.clientX,s=e.clientY;return Math.sqrt(Math.pow(a-i,2)+Math.pow(s-r,2))>this.tapDistanceThreshold}return this.__s._$HV$isEventTooFar.apply(this,t)},__superMap:{_$HV$isEventTooFar:"isEventTooFar"},staticMembers:{__QUALIFIED_CLASS_NAME__:"DoubleTapGestureRecognizer"}}),R=n(882),x=n(154),F=n(83),k=n(412),V=n(197),j=n(1138),B=n(1225),U=n(41),W=n(1127),G=n(1244),H=n(1217),$=n(409),z=n(122),K=n(1169),Q=n(1241),q=n(1243),Y=n(410),Z=n(1003),J=(n(1006),$.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"MULTIVIEWOUTLET",tagname:"views",name:"badges"}],classes:["badges-container-view",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isHidden",truevalue:"is-hidden",attributes:{}}]},__QUALIFIED_CLASS_NAME__:"BadgesContainerView"},badges:i.b(),isHidden:i.b()})),X=(n(1004),J.extend({staticMembers:{className:"bottom-right-badges-view",__QUALIFIED_CLASS_NAME__:"BottomRightBadgesView"}})),ee={staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"VIEWOUTLET",tagname:"view",name:"bottomRightBadgesView"}]}}},bottomRightBadgesView:i.b({readOnly:!0,strong:!0,dependencies:["bottomRightBadges.length"],get:Object.assign(function(){return this.getPath("bottomRightBadges.length")>0?this._bottomRightBadgesView:void 0},{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])>0?this._bottomRightBadgesView:void 0}})}),bottomRightBadgeViewClasses:i.b([]),bottomRightBadges:Z.a({source:"bottomRightBadgeViewClasses",desiredOutputType:Y.b,outputForInput:function(e){return e.create({presenterView:this})}}),_bottomRightBadgesView:i.b({readOnly:!0,strong:!0,get:function(){return X.create({badges:this.bindingFor("bottomRightBadges"),isHidden:this.bindingFor("shouldHideMainDerivative")})}}),_setPositionOnBottomRightBadges:c.f({inputs:["bottomRightBadgesView","pinnedImageRight","pinnedImageBottom"],callback:function(e,t,n){if(void 0!==e){var i=t+10,r=n+10;l.a(this._bottomRightBadgesView.element).set("position","absolute").set("right",i).set("bottom",r)}}})},te=(n(1008),J.extend({staticMembers:{className:"top-left-badges-view",__QUALIFIED_CLASS_NAME__:"TopLeftBadgesView"}})),ne={isPinchZoomInProgress:i.b(),unzoomedZoomLevel:i.b(),zoomLevel:i.b(),shouldHideMainDerivative:i.b(),staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"VIEWOUTLET",tagname:"view",name:"topLeftBadgesView"}]}}},topLeftBadgesView:i.b({readOnly:!0,strong:!0,dependencies:["topLeftBadges.length"],get:Object.assign(function(){return this.getPath("topLeftBadges.length")>0?this._topLeftBadgesView:void 0},{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])>0?this._topLeftBadgesView:void 0}})}),topLeftBadgeViewClasses:i.b([]),topLeftBadges:Z.a({source:"topLeftBadgeViewClasses",desiredOutputType:Y.b,outputForInput:function(e){return e.create({presenterView:this})}}),_topLeftSortedBadges:i.b({readOnly:!0,strong:!0,dependencies:["topLeftBadges","topLeftBadges.contentsDidChange"],get:Object.assign(function(){var e=this.topLeftBadges.toArray();return e.sort(function(e,t){return(e.badgeOrder||0)-(t.badgeOrder||0)}),Y.b.create(e)},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]).toArray();return r.sort(function(e,t){return(e.badgeOrder||0)-(t.badgeOrder||0)}),Y.b.create(r)}})}),_topLeftBadgesView:i.b({readOnly:!0,strong:!0,get:function(){return te.create({badges:this.bindingFor("_topLeftSortedBadges"),isHidden:this.bindingFor("_isTopLeftBadgesViewHidden")})}}),_isTopLeftBadgesViewHidden:i.b({readOnly:!0,dependencies:["shouldHideMainDerivative","isPinchZoomInProgress","primaryInteractionMode","zoomLevel","unzoomedZoomLevel"],get:Object.assign(function(){return this.shouldHideMainDerivative||this.isPinchZoomInProgress||this.primaryInteractionMode===V.a.TOUCH&&this.zoomLevel!==this.unzoomedZoomLevel},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])||i.internalGet(this,t[1+n])||i.internalGet(this,t[2+n])===V.a.TOUCH&&i.internalGet(this,t[3+n])!==i.internalGet(this,t[4+n])}})}),_setPositionOnTopLeftBadges:c.f({inputs:["topLeftBadgesView","topLeftBadgesView.isAttached","pinnedImageLeft","pinnedImageTop","primaryInteractionMode"],callback:function(e,t,n,i,r){if(void 0!==e&&t){var a=this._topLeftBadgesView.element,s=a.offsetWidth,o=a.offsetHeight,c=void 0,u=void 0;r===V.a.TOUCH&&(s+7<n||o+7<i)?(c=7,u=7):(c=n+10,u=i+10),l.a(a).set("position","absolute").set("left",c).set("top",u)}}})},ie=$.a.extend({mixinDependencies:[z.a,Q.a,q.a,ee,ne],staticMembers:{template:{type:"ELEMENT",tagname:"div",classes:["pok-media-presenter-view"]},__QUALIFIED_CLASS_NAME__:"MediaPresenterView"},primaryInteractionMode:i.b(),media:i.b({strong:!0}),isAloneInParent:i.b(!0),isTargetInParent:i.b(!0),isShowingInParent:i.b(!0),isSteadyInParent:i.b(!0),isBackgroundablySteadyInParent:i.b(!0),isSteadilyAloneInParent:i.b({readOnly:!0,dependencies:["isSteadyInParent","isAloneInParent"],get:Object.assign(function(){return this.isSteadyInParent&&this.isAloneInParent},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])&&i.internalGet(this,t[1+n])}})}),isBackgroundablySteadilyAloneInParent:i.b({readOnly:!0,dependencies:["isBackgroundablySteadyInParent","isAloneInParent"],get:Object.assign(function(){return this.isBackgroundablySteadyInParent&&this.isAloneInParent},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])&&i.internalGet(this,t[1+n])}})}),wantsUIControl:i.b({readOnly:!0,dependencies:["wantsFullUIControl","isZoomedIn"],get:Object.assign(function(){return this.wantsFullUIControl||this.isZoomedIn},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])||i.internalGet(this,t[1+n])}})}),wantsFullUIControl:i.b(!1),canZoom:i.b(!1),minZoomLevel:i.b(NaN),maxZoomLevel:i.b(NaN),zoomSteps:i.b(null),zoomLevel:i.b({dependencies:["unzoomedZoomLevel","canZoom"],get:Object.assign(function(e){return e&&this.canZoom?e:this.unzoomedZoomLevel},{__CW__getter:function(e,t,n,i){return e&&i.internalGet(this,t[1+n])?e:i.internalGet(this,t[0+n])}}),writeDependencies:[],set:function(e){if(!this.canZoom)return NaN;var t=this.unzoomedZoomLevel;return isNaN(t)?NaN:Math.abs(e-t)/t<.01?NaN:e},didChange:K.a}),unzoomedZoomLevel:i.b(NaN),isZoomed:i.b({readOnly:!0,dependencies:["canZoom","zoomLevel","unzoomedZoomLevel"],get:Object.assign(function(){return!!this.canZoom&&this.zoomLevel!==this.unzoomedZoomLevel},{__CW__getter:function(e,t,n,i){return!!i.internalGet(this,t[0+n])&&i.internalGet(this,t[1+n])!==i.internalGet(this,t[2+n])}})}),isZoomedIn:i.b({readOnly:!0,dependencies:["isZoomed","zoomLevel","unzoomedZoomLevel"],get:Object.assign(function(){return!!this.isZoomed&&this.zoomLevel>this.unzoomedZoomLevel},{__CW__getter:function(e,t,n,i){return!!i.internalGet(this,t[0+n])&&i.internalGet(this,t[1+n])>i.internalGet(this,t[2+n])}})}),initFromPool:function(e){this.__s._$2Qb$initFromPool.call(this),this.media=e},cleanup:function(){var e=arguments;this.media=null,this.zoomLevel=0,this.__s._$2TM$cleanup.apply(this,e)},__superMap:{_$2Qb$initFromPool:"initFromPool",_$2TM$cleanup:"cleanup"}}),re=n(881),ae=re.a.extend({primaryInteractionMode:i.b(),renewVisibility:function(){var e=arguments;this.primaryInteractionMode!==V.a.TOUCH?this.__s._$8U$renewVisibility.apply(this,e):this._opacity=0},__superMap:{_$8U$renewVisibility:"renewVisibility"},staticMembers:{__QUALIFIED_CLASS_NAME__:"HiddenTouchHorizontalScrollIndicatorView"}}),se=re.b.extend({primaryInteractionMode:i.b(),renewVisibility:function(){var e=arguments;this.primaryInteractionMode!==V.a.TOUCH?this.__s._$GL$renewVisibility.apply(this,e):this._opacity=0},__superMap:{_$GL$renewVisibility:"renewVisibility"},staticMembers:{__QUALIFIED_CLASS_NAME__:"HiddenTouchVerticalScrollIndicatorView"}}),oe=ie.extend(j.a,B.a,W.a,G.a).extend({horizontalScrollIndicatorClass:ae,verticalScrollIndicatorClass:se,horizontalScrollIndicator:i.b({downstreamBindings:{primaryInteractionMode:"(owner).primaryInteractionMode"}}),verticalScrollIndicator:i.b({downstreamBindings:{primaryInteractionMode:"(owner).primaryInteractionMode"}}),_unzoomPhotoWhenPhotoExitsView:c.f("isAttached",function(e){e||this.zoomToFitWithoutAnimation()}),dpr:i.b(p.a.sharedInstance.bindingFor("devicePixelRatio")),translationX:i.b(),imageLeft:i.b({readOnly:!0,dependencies:["_zoomedImagePosition"],get:Object.assign(function(){return this._zoomedImagePosition[0]},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])[0]}})}),imageTop:i.b({readOnly:!0,dependencies:["_zoomedImagePosition"],get:Object.assign(function(){return this._zoomedImagePosition[1]},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])[1]}})}),imageWidth:i.b({readOnly:!0,dependencies:["_zoomedImageDimensions"],get:Object.assign(function(){return this._zoomedImageDimensions[0]},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])[0]}})}),imageHeight:i.b({readOnly:!0,dependencies:["_zoomedImageDimensions"],get:Object.assign(function(){return this._zoomedImageDimensions[1]},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])[1]}})}),pinnedImageLeft:i.b({readOnly:!0,dependencies:["insetLeft","imageLeft"],get:Object.assign(function(){return Math.max(this.insetLeft,this.imageLeft)},{__CW__getter:function(e,t,n,i){return Math.max(i.internalGet(this,t[0+n]),i.internalGet(this,t[1+n]))}})}),pinnedImageRight:i.b({readOnly:!0,dependencies:["viewportWidth","pinnedImageLeft","pinnedImageWidth"],get:Object.assign(function(){return this.viewportWidth-this.pinnedImageLeft-this.pinnedImageWidth},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])-i.internalGet(this,t[1+n])-i.internalGet(this,t[2+n])}})}),pinnedImageTop:i.b({readOnly:!0,dependencies:["insetTop","imageTop"],get:Object.assign(function(){return Math.max(this.insetTop,this.imageTop)},{__CW__getter:function(e,t,n,i){return Math.max(i.internalGet(this,t[0+n]),i.internalGet(this,t[1+n]))}})}),pinnedImageBottom:i.b({readOnly:!0,dependencies:["viewportHeight","pinnedImageTop","pinnedImageHeight"],get:Object.assign(function(){return this.viewportHeight-this.pinnedImageTop-this.pinnedImageHeight},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])-i.internalGet(this,t[1+n])-i.internalGet(this,t[2+n])}})}),pinnedImageWidth:i.b({readOnly:!0,dependencies:["insetWidth","imageWidth"],get:Object.assign(function(){return Math.min(this.insetWidth,this.imageWidth)},{__CW__getter:function(e,t,n,i){return Math.min(i.internalGet(this,t[0+n]),i.internalGet(this,t[1+n]))}})}),pinnedImageHeight:i.b({readOnly:!0,dependencies:["insetHeight","imageHeight"],get:Object.assign(function(){return Math.min(this.insetHeight,this.imageHeight)},{__CW__getter:function(e,t,n,i){return Math.min(i.internalGet(this,t[0+n]),i.internalGet(this,t[1+n]))}})}),zoomAnimationDuration:U.c(200),defaultMinZoomLevel:i.b(.5),minZoomLevel:i.b({readOnly:!0,dependencies:["unzoomedZoomLevel","defaultMinZoomLevel"],get:Object.assign(function(){return Math.min(this.defaultMinZoomLevel,this.unzoomedZoomLevel)},{__CW__getter:function(e,t,n,i){return Math.min(i.internalGet(this,t[1+n]),i.internalGet(this,t[0+n]))}})}),defaultMaxZoomLevel:i.b(4),maxZoomLevel:i.b({readOnly:!0,dependencies:["unzoomedZoomLevel","defaultMaxZoomLevel"],get:Object.assign(function(){return Math.max(this.unzoomedZoomLevel,this.defaultMaxZoomLevel)},{__CW__getter:function(e,t,n,i){return Math.max(i.internalGet(this,t[0+n]),i.internalGet(this,t[1+n]))}})}),bestEffort100PercentZoomLevel:i.b({readOnly:!0,dependencies:["minZoomLevel","maxZoomLevel"],get:Object.assign(function(){return Math.max(this.minZoomLevel,Math.min(this.maxZoomLevel,1))},{__CW__getter:function(e,t,n,i){return Math.max(i.internalGet(this,t[0+n]),Math.min(i.internalGet(this,t[1+n]),1))}})}),zoomSteps:i.b({readOnly:!0,dependencies:["minZoomLevel","maxZoomLevel","unzoomedZoomLevel"],get:function(){var e=this._zoomSteps_lastRet;e&&(this._zoomSteps_lastRet=null,m.c.disposeInstance(e));var t=this.minZoomLevel,n=this.maxZoomLevel,i=this.unzoomedZoomLevel;if(!t||!n||!i)return null;for(var r=m.c.getInstanceFromParams(t),a=Math.log(2),s=Math.log(n)/a,o=t===i,c=Math.ceil(Math.log(t)/a);c<s;c++){var l=Math.pow(2,c),u=2*l/3,d=3*l/2;u<1&&u>t&&(Math.abs(u-i)>=.01?r.push(u):(o||r.push(i),o=!0)),Math.abs(l-i)>=.01?r.push(l):(o||r.push(i),o=!0),d>1&&d<n&&(Math.abs(d-i)>=.01?r.push(d):(o||r.push(i),o=!0))}return!o&&i>t&&i<n&&(r.push(i),r.sort(de)),r[r.length-1]!==n&&r.push(n),this._zoomSteps_lastRet=r}}),nextHigherZoomLevel:i.b({readOnly:!0,dependencies:["zoomLevel","zoomSteps","_animTargetZoomLevel"],writeDependencies:[],get:Object.assign(function(){var e=this.zoomSteps;if(!e)return NaN;for(var t=Math.max(this.zoomLevel,this._animTargetZoomLevel||-1/0),n=0;n<e.length;n++)if(e[n]>t+1e-5)return e[n];return NaN},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[1+n]);if(!r)return NaN;for(var a=Math.max(i.internalGet(this,t[0+n]),i.internalGet(this,t[2+n])||-1/0),s=0;s<r.length;s++)if(r[s]>a+1e-5)return r[s];return NaN}})}),nextLowerZoomLevel:i.b({readOnly:!0,dependencies:["zoomLevel","zoomSteps","_animTargetZoomLevel"],writeDependencies:[],get:Object.assign(function(){var e=this.zoomSteps;if(!e)return NaN;for(var t=Math.min(this.zoomLevel,this._animTargetZoomLevel||1/0),n=e.length-1;n>=0;n--)if(e[n]<t-1e-5)return e[n];return NaN},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[1+n]);if(!r)return NaN;for(var a=Math.min(i.internalGet(this,t[0+n]),i.internalGet(this,t[2+n])||1/0),s=r.length-1;s>=0;s--)if(r[s]<a-1e-5)return r[s];return NaN}})}),zoomInOneStep:function(){var e=this.nextHigherZoomLevel;e&&(this._animTargetZoomLevel=e)},zoomOutOneStep:function(){var e=this.nextLowerZoomLevel;e&&(this._animTargetZoomLevel=e)},zoomTo1:function(){var e=this.bestEffort100PercentZoomLevel;e&&(this._animTargetZoomLevel=e)},zoomToFit:function(){var e=this.unzoomedZoomLevel;e&&(this._animTargetZoomLevel=e)},slowZoomToFit:function(){var e=this.unzoomedZoomLevel,t=this.zoomAnimationDuration;this.zoomAnimationDuration=400,e&&(this._animTargetZoomLevel=e),this.zoomAnimationDuration=t},zoomToFitWithoutAnimation:function(){this.isZoomed&&(this.zoomLevel=void 0)},zoomToLevel:function(e){this._animTargetZoomLevel=e},slowZoomToLevel:function(e){var t=this.zoomAnimationDuration;this.zoomAnimationDuration=400,this._animTargetZoomLevel=e,this.zoomAnimationDuration=t},toggleZoom:function(){var e=this.bestEffort100PercentZoomLevel,t=this.unzoomedZoomLevel,n=this._animTargetZoomLevel===t||this.zoomLevel===t?e:t;n&&(this._animTargetZoomLevel=n)},clearZoomOffsets:function(){if(0!==this.zoomOffsetLeft&&this.canScrollX){var e=this.scrollX+this.zoomOffsetLeft;e>0&&e<this.scrollRangeX&&(this.scrollX=e,this.zoomOffsetLeft=0)}if(0!==this.zoomOffsetTop&&this.canScrollY){var t=this.scrollY+this.zoomOffsetTop;t>0&&t<this.scrollRangeY&&(this.scrollY=t,this.zoomOffsetTop=0)}0!==this.zoomOffsetLeft&&this.animate("zoomOffsetLeft",0,200),0!==this.zoomOffsetTop&&this.animate("zoomOffsetTop",0,200)},_animatedZoomLevel:W.b(0),_animTargetZoomLevel:i.b(0),_animateZoomLevel:c.f("_animTargetZoomLevel",function(e){var t=this.zoomAnimationDuration;e!==this._animatedZoomLevel&&this.animate("_animatedZoomLevel",e,t)}),_updateRealZoomLevelToAnimation:c.f("_animatedZoomLevel",function(e){e&&(this._isWritingZoomLevel=!0,this.zoomLevel!==e&&(this.zoomLevel=e),this._isWritingZoomLevel=!1)}),_updateAnimationToRealZoomLevel:c.f("zoomLevel",function(e){this._isWritingZoomLevel||(this._animTargetZoomLevel!==e&&(this._animTargetZoomLevel=e),this._animatedZoomLevel!==e&&(this._animatedZoomLevel=e))}),unzoomedZoomLevel:i.b({readOnly:!0,dependencies:["insetWidth","insetHeight","media.width","media.height"],get:Object.assign(function(){var e=this.insetWidth,t=this.insetHeight,n=this.getPath("media.width"),i=this.getPath("media.height"),r=H.d(n,i,e,t,ce),a=Math.round(Math.min(n,r.width)),s=Math.round(Math.min(i,r.height));return a&&s?r.height%1?a/n:s/i:NaN},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]),s=i.internalGetPath(this,t[2+n]),o=i.internalGetPath(this,t[3+n]),c=H.d(s,o,r,a,ce),l=Math.round(Math.min(s,c.width)),u=Math.round(Math.min(o,c.height));return l&&u?c.height%1?l/s:u/o:NaN}})}),width:a.c("viewportWidth"),height:a.c("viewportHeight"),scrollRangeX:i.b({readOnly:!0,dependencies:["imageWidth","insetLeft","insetRight","viewportWidth"],get:Object.assign(function(){return Math.max(0,this.imageWidth+this.insetLeft+this.insetRight-this.viewportWidth)},{__CW__getter:function(e,t,n,i){return Math.max(0,i.internalGet(this,t[0+n])+i.internalGet(this,t[1+n])+i.internalGet(this,t[2+n])-i.internalGet(this,t[3+n]))}})}),scrollRangeY:i.b({readOnly:!0,dependencies:["imageHeight","insetTop","insetBottom","viewportHeight"],get:Object.assign(function(){return Math.max(0,this.imageHeight+this.insetTop+this.insetBottom-this.viewportHeight)},{__CW__getter:function(e,t,n,i){return Math.max(0,i.internalGet(this,t[0+n])+i.internalGet(this,t[1+n])+i.internalGet(this,t[2+n])-i.internalGet(this,t[3+n]))}})}),scrollMaxX:i.b({readOnly:!0,dependencies:["scrollRangeX","viewportWidth"],get:Object.assign(function(){return this.scrollRangeX+this.viewportWidth},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])+i.internalGet(this,t[1+n])}})}),scrollMaxY:i.b({readOnly:!0,dependencies:["scrollRangeY","viewportHeight"],get:Object.assign(function(){return this.scrollRangeY+this.viewportHeight},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])+i.internalGet(this,t[1+n])}})}),_zoomedImageDimensions:i.b({readOnly:!0,dependencies:["media.width","media.height","zoomLevel","isZoomed","insetWidth","insetHeight"],get:Object.assign(function(){var e=this._zoomedImageDimensions_lastOwnRet;e&&(m.c.disposeInstance(e),this._zoomedImageDimensions_lastOwnRet=null);var t=this.getPath("media.width"),n=this.getPath("media.height"),i=this.zoomLevel,r=this.insetWidth,a=this.insetHeight;if(!(r&&a&&i&&t&&n))return le;var s=t*i,o=n*i;this.isZoomed?(s<=r&&(s=2*Math.round(s/2)),o<=a&&(o=2*Math.round(o/2))):(s=Math.round(s),o=Math.round(o));var c=m.c.getInstance();return c[0]=s,c[1]=o,this._zoomedImageDimensions_lastOwnRet=c},{__CW__getter:function(e,t,n,i){var r=this._zoomedImageDimensions_lastOwnRet;r&&(m.c.disposeInstance(r),this._zoomedImageDimensions_lastOwnRet=null);var a=i.internalGetPath(this,t[0+n]),s=i.internalGetPath(this,t[1+n]),o=i.internalGet(this,t[2+n]),c=i.internalGet(this,t[4+n]),l=i.internalGet(this,t[5+n]);if(!(c&&l&&o&&a&&s))return le;var u=a*o,d=s*o;i.internalGet(this,t[3+n])?(u<=c&&(u=2*Math.round(u/2)),d<=l&&(d=2*Math.round(d/2))):(u=Math.round(u),d=Math.round(d));var h=m.c.getInstance();return h[0]=u,h[1]=d,this._zoomedImageDimensions_lastOwnRet=h}})}),_zoomedImagePosition:i.b({readOnly:!0,dependencies:["imageWidth","imageHeight","insetLeft","insetTop","insetWidth","insetHeight","scrollX","scrollY","zoomOffsetLeft","zoomOffsetTop"],get:Object.assign(function(){var e=this._zoomedImagePosition_lastOwnRet;e&&(m.c.disposeInstance(e),this._zoomedImagePosition_lastOwnRet=null);var t=this.imageWidth,n=this.imageHeight,i=this.insetWidth,r=this.insetHeight;if(!(t&&n&&i&&r))return ue;var a=this.insetLeft,s=this.insetTop,o=this.scrollX,c=this.scrollY,l=t<=i?a+Math.round(i/2-t/2):a-o,u=n<=r?s+Math.round(r/2-n/2):s-c,d=m.c.getInstance();return d[0]=l-this.zoomOffsetLeft,d[1]=u-this.zoomOffsetTop,this._zoomedImagePosition_lastOwnRet=d},{__CW__getter:function(e,t,n,i){var r=this._zoomedImagePosition_lastOwnRet;r&&(m.c.disposeInstance(r),this._zoomedImagePosition_lastOwnRet=null);var a=i.internalGet(this,t[0+n]),s=i.internalGet(this,t[1+n]),o=i.internalGet(this,t[4+n]),c=i.internalGet(this,t[5+n]);if(!(a&&s&&o&&c))return ue;var l=i.internalGet(this,t[2+n]),u=i.internalGet(this,t[3+n]),d=i.internalGet(this,t[6+n]),h=i.internalGet(this,t[7+n]),p=a<=o?l+Math.round(o/2-a/2):l-d,f=s<=c?u+Math.round(c/2-s/2):u-h,g=m.c.getInstance();return g[0]=p-i.internalGet(this,t[8+n]),g[1]=f-i.internalGet(this,t[9+n]),this._zoomedImagePosition_lastOwnRet=g}})}),_validateScrollOnContentOrContainerResize:c.f("scrollMaxX","scrollMaxY","width","height",function(e,t,n,i){e&&t&&n&&i&&this.validateScrollPosition()}),scrollXFraction:i.b({readOnly:!0,dependencies:["scrollX","scrollRangeX"],get:Object.assign(function(){return this.scrollX/this.scrollRangeX},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])/i.internalGet(this,t[1+n])}})}),scrollYFraction:i.b({readOnly:!0,dependencies:["scrollY","scrollRangeY"],get:Object.assign(function(){return this.scrollY/this.scrollRangeY},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])/i.internalGet(this,t[1+n])}})}),canScrollX:i.b(a.c("canScrollHorizontally")),canScrollY:i.b(a.c("canScrollVertically")),_defaultZoomAnchorX:i.b({dependencies:["mouseX","insetCenterX"],readOnly:!0,get:Object.assign(function(){return this.mouseX||this.insetCenterX},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])||i.internalGet(this,t[1+n])}})}),desiredZoomAnchorX:i.b(),zoomAnchorX:U.c({readOnly:!0,get:function(){return void 0!==this.desiredZoomAnchorX?this.desiredZoomAnchorX:this._defaultZoomAnchorX}}),_defaultZoomAnchorY:i.b({dependencies:["mouseY","insetCenterY"],readOnly:!0,get:Object.assign(function(){return this.mouseY||this.insetCenterY},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])||i.internalGet(this,t[1+n])}})}),desiredZoomAnchorY:i.b(),zoomAnchorY:U.c({readOnly:!0,get:function(){return void 0!==this.desiredZoomAnchorY?this.desiredZoomAnchorY:this._defaultZoomAnchorY}}),zoomOffsetLeft:W.b(0),zoomOffsetTop:W.b(0),allowImageOffsetWhileZooming:i.b(!1),_correctScrollPositionForImageSizeChange:c.f("imageLeft","imageTop","imageWidth","imageHeight","isZoomed",function(){var e=this.imageTop,t=this.imageLeft,n=this.imageWidth,i=this.imageHeight,r=this.isZoomed,a=this._cspfzc_last_imageTop,s=this._cspfzc_last_imageLeft,o=this._cspfzc_last_imageWidth,c=this._cspfzc_last_imageHeight;if(this._cspfzc_last_imageTop=e,this._cspfzc_last_imageLeft=t,this._cspfzc_last_imageWidth=n,this._cspfzc_last_imageHeight=i,r&&n!==o&&i!==c){var l=this.zoomAnchorX,u=this.zoomAnchorY,d=t-(l-(l-s)/o*n),h=e-(u-(u-a)/c*i),p=this.allowImageOffsetWhileZooming&&!this.canScrollX,f=this.allowImageOffsetWhileZooming&&!this.canScrollY,g=d,m=h;p&&(g=0,this.zoomOffsetLeft+=.9*d),f&&(m=0,this.zoomOffsetTop+=.9*h),this.attemptScrollBy(g,m),this._cspfzc_last_imageLeft=this.imageLeft,this._cspfzc_last_imageTop=this.imageTop}}),handleScroll:function(e){var t=arguments;if(!e||!e.shiftKey&&!e.altKey)return this.__s._$9Mk$handleScroll.apply(this,t);this.zoomLevel=Math.max(this.minZoomLevel,Math.min(this.maxZoomLevel,this.zoomLevel*(1+e.deltaY/100)))},_maintainOwnElementPositionStyling:c.f("translationX",function(e){this.style.translateDevicePixels(e||0,0).layerBack()}),__superMap:{_$9Mk$handleScroll:"handleScroll"}}).extend({gestureRecognizerShouldReceive:function(e){var t=arguments;return e!==this.scrollGestureRecognizer?this.__s._$9YO$gestureRecognizerShouldReceive.apply(this,t):Boolean(this.canScrollX||this.canScrollY)},__superMap:{_$9YO$gestureRecognizerShouldReceive:"gestureRecognizerShouldReceive"},staticMembers:{__QUALIFIED_CLASS_NAME__:"VisualPresenterView"}}),ce={},le=[NaN,NaN],ue=[NaN,NaN];function de(e,t){return e-t}var he=n(1178),pe=n(325),fe=$.a.extend(W.a,{staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"canvas",name:"canvas",styles:{position:"absolute",left:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"negativePadding",attributes:{},unit:"px",property:"left"},top:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"negativePadding",attributes:{},unit:"px",property:"top"},width:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"paddedSize",attributes:{},unit:"px",property:"width"},height:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"paddedSize",attributes:{},unit:"px",property:"height"}}}],classes:["tocw-progress-pie-view"],styles:{position:"absolute","pointer-events":"none",height:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"size",attributes:{},unit:"px",property:"height"},width:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"size",attributes:{},unit:"px",property:"width"}}},className:"to-cw-ui-progress-pie-view",__QUALIFIED_CLASS_NAME__:"ProgressPieView"},init:function(){var e=arguments;this.__s._$FK$init.apply(this,e),this._canvas=this.canvas,this._context=this._canvas.getContext("2d")},size:i.b(25),strokeWeight:i.b(.08),effectiveStrokeWeight:i.b({readOnly:!0,dependencies:["strokeWeight","size"],get:Object.assign(function(){var e=this.strokeWeight;return e<.25?e*this.size:e},{__CW__getter:function(e,t,n,i){var r=this.strokeWeight;return r<.25?r*i.internalGet(this,t[1+n]):r}})}),color:i.b("white"),unfilledColor:i.b("rgba(0, 0, 0, 0.2)"),shadowBlur:i.b(3),shadowColor:i.b("rgba(0, 0, 0, 0.2)"),shadowOffsetY:i.b(2),shadowOffsetX:i.b(0),hasShadow:i.b({readOnly:!0,dependencies:["shadowBlur","shadowOffsetX","shadowOffsetY","shadowColor"],get:Object.assign(function(){return(this.shadowOffsetX||this.shadowOffsetY||this.shadowBlur)&&!me(this.shadowColor)},{__CW__getter:function(e,t,n,i){return(i.internalGet(this,t[1+n])||i.internalGet(this,t[2+n])||i.internalGet(this,t[0+n]))&&!me(i.internalGet(this,t[3+n]))}})}),progress:i.b(0),shouldShowError:i.b(!1),dpr:i.b(p.a.sharedInstance.bindingFor("devicePixelRatio")),padding:i.b({readOnly:!0,dependencies:["shadowBlur","shadowOffsetX","shadowOffsetY"],get:Object.assign(function(){return this.shadowBlur+Math.max(Math.abs(this.shadowOffsetX),Math.abs(this.shadowOffsetY))},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])+Math.max(Math.abs(i.internalGet(this,t[1+n])),Math.abs(i.internalGet(this,t[2+n])))}})}),paddedSize:i.b({readOnly:!0,dependencies:["padding","size"],get:Object.assign(function(){return 2*this.padding+this.size},{__CW__getter:function(e,t,n,i){return 2*i.internalGet(this,t[0+n])+i.internalGet(this,t[1+n])}})}),negativePadding:i.b({readOnly:!0,dependencies:["padding"],get:Object.assign(function(){return-this.padding},{__CW__getter:function(e,t,n,i){return-i.internalGet(this,t[0+n])}})}),backingCenter:i.b({readOnly:!0,dependencies:["backingPaddedSize"],get:Object.assign(function(){return this.backingPaddedSize/2},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])/2}})}),backingRadius:i.b({readOnly:!0,dependencies:["backingSize"],get:Object.assign(function(){return this.backingSize/2},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])/2}})}),backingSize:ge("size",Math.floor),backingPaddedSize:ge("paddedSize",Math.ceil),backingEffectiveStrokeWeight:ge("effectiveStrokeWeight",Math.ceil),backingShadowBlur:ge("shadowBlur",Math.ceil),backingShadowOffsetY:ge("shadowOffsetY",Math.ceil),backingShadowOffsetX:ge("shadowOffsetX",Math.ceil),renderedProgress:W.b(0),progressAnimationTime:500,_animateRenderedProgress:c.f("progress",function(e){!e||1===e&&0===this.renderedProgress?this.renderedProgress=e:this.getFinalValue("renderedProgress")!==e&&this.animate("renderedProgress",e,this.progressAnimationTime)}),_redraw:c.f({inputs:["renderedProgress","shouldShowError","size","paddedSize","padding","hasShadow","shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY","color","unfilledColor","dpr"],callback:function(e,t,n,i,r,a,s,o,c,l,u,d,h){var p=this._canvas,f=this._context;if(p&&f&&n&&i&&r&&h){var g=Math.ceil(h*i);p.width!==g||p.height!==g?p.width=p.height=g:f.clearRect(0,0,g,g),f.save(),me(d)||this._drawUnfilledCircle(f),f.shadowBlur=a?this.backingShadowBlur:0,f.shadowOffsetX=a?this.backingShadowOffsetX:0,f.shadowOffsetY=a?this.backingShadowOffsetY:0,f.shadowColor=a?this.shadowColor:"transparent";var m=Object(pe.a)(g,g),v=m.getContext("2d");this._drawOuterCircle(v),this.shouldShowError?this._drawErrorStroke(v):this._drawPie(v,e),v.globalCompositeOperation="source-in",v.fillStyle=this.color,v.fillRect(0,0,g,g),v.globalCompositeOperation="source-over",f.drawImage(m,0,0),f.restore()}}}),_drawUnfilledCircle:function(e){var t=this.backingCenter,n=this.backingCenter,i=this.backingRadius-this.backingEffectiveStrokeWeight/2;e.save(),e.beginPath(),e.moveTo(t,n),e.lineTo(t,n-i),e.arc(t,n,i,0,2*Math.PI,!1),e.lineTo(t,n),e.fillStyle=this.unfilledColor,e.fill(),e.closePath(),e.restore()},_drawErrorStroke:function(e){var t=this.backingCenter,n=this.backingCenter,i=this.backingEffectiveStrokeWeight,r=this.backingRadius-i/2;e.save(),e.translate(t,n),e.rotate(Math.PI/4),e.fillStyle="black",e.fillRect(-r,-i/2,2*r,i),e.restore()},_drawPie:function(e,t){var n=this.backingCenter,i=this.backingCenter,r=this.backingRadius-this.backingEffectiveStrokeWeight/2,a=2*Math.PI*.75,s=(.75+t)*(2*Math.PI);e.save(),e.beginPath(),e.moveTo(n,i),e.lineTo(n,i-r),e.arc(n,i,r,a,s,!1),e.lineTo(n,i),e.fillStyle="black",e.fill(),e.closePath(),e.restore()},_drawOuterCircle:function(e){e.save(),e.beginPath(),e.arc(this.backingCenter,this.backingCenter,this.backingRadius,0,2*Math.PI),e.fillStyle="black",e.fill(),e.closePath(),e.beginPath(),e.arc(this.backingCenter,this.backingCenter,this.backingRadius-this.backingEffectiveStrokeWeight,0,2*Math.PI),e.fillStyle="black",e.globalCompositeOperation="destination-out",e.fill(),e.closePath(),e.restore()},__superMap:{_$FK$init:"init"}});function ge(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:he.a,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return i.b({readOnly:!0,dependencies:[e,"dpr"],get:Object.assign(function(){return t(this[e]*this.dpr*n)/n},{__CW__getter:function(e,i,r,a){return t(a.internalGetPath(this,i[0+r])*a.internalGet(this,i[1+r])*n)/n}})})}function me(e){return"transparent"===e||"rgba(0,0,0,0)"===e.replace(/\s+/g,"")}var ve=n(219),_e=fe.extend(ve.a,{staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",classes:["pok-progress-pie"],styles:{opacity:{type:"STYLEOUTLET",bindingtype:"IFBINDING",name:"shouldShow",truevalue:"1",falsevalue:"0",attributes:{},unit:null,property:"opacity"}}}},__QUALIFIED_CLASS_NAME__:"SpecialPPVProgressPieView"},presenterView:i.b(),init:function(){var e=arguments;this.__s._$Fw$init.apply(this,e),this.style.set("transition","opacity 0.2s")},progress:i.b({readOnly:!0,dependencies:["presenterView.imageDerivativeLoader.totalProgress","canShow"],get:Object.assign(function(){return this.canShow?.25+.75*(this.getPath("presenterView.imageDerivativeLoader.totalProgress")||0):0},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[1+n])?.25+.75*(i.internalGetPath(this,t[0+n])||0):0}})}),shouldShowError:a.c("presenterView.imageDerivativeLoader.shouldShowError"),requiresDerivativeToShow:i.b(!0),canShow:i.b({readOnly:!0,dependencies:["requiresDerivativeToShow","presenterView.isBackgroundablySteadilyAloneInParent","presenterView.derivative"],get:Object.assign(function(){return this.presenterView.isBackgroundablySteadilyAloneInParent&&(!this.requiresDerivativeToShow||this.presenterView.derivative)},{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[1+n])&&(!i.internalGet(this,t[0+n])||i.internalGetPath(this,t[2+n]))}})}),shouldShow:i.b({readOnly:!0,dependencies:["renderedProgress","shouldShowError","canShow"],writeDependencies:[],get:Object.assign(function(){return(this.renderedProgress<1||this.shouldShowError)&&this.canShow},{__CW__getter:function(e,t,n,i){return(i.internalGet(this,t[0+n])<1||i.internalGet(this,t[1+n]))&&i.internalGet(this,t[2+n])}})}),color:i.b("white"),unfilledColor:i.b("rgba(0, 0, 0, 0.2)"),shadowColor:i.b("rgba(0, 0, 0, 0.2)"),size:i.b(25),__superMap:{_$Fw$init:"init"}}),be=_e.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",classes:["pok-center-large"],styles:{left:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"left",attributes:{},unit:"px",property:"left"},top:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"top",attributes:{},unit:"px",property:"top"}}}},__QUALIFIED_CLASS_NAME__:"SpecialLargePPVProgressPieView"},requiresDerivativeToShow:i.b(!1),color:i.b("rgba(0, 0, 0, 0.1)"),unfilledColor:i.b("transparent"),shadowColor:i.b("transparent"),size:i.b({readOnly:!0,dependencies:["presenterView.imageWidth","presenterView.insetWidth","presenterView.imageHeight","presenterView.insetHeight"],get:Object.assign(function(){return Math.round(.2*Math.min(this.getPath("presenterView.imageWidth"),this.getPath("presenterView.insetWidth"),this.getPath("presenterView.imageHeight"),this.getPath("presenterView.insetHeight")))},{__CW__getter:function(e,t,n,i){return Math.round(.2*Math.min(i.internalGetPath(this,t[0+n]),i.internalGetPath(this,t[1+n]),i.internalGetPath(this,t[2+n]),i.internalGetPath(this,t[3+n])))}})}),left:i.b({readOnly:!0,dependencies:["size","presenterView.insetCenterX"],get:Object.assign(function(){return Math.round(this.getPath("presenterView.insetCenterX")-this.size/2)},{__CW__getter:function(e,t,n,i){return Math.round(i.internalGetPath(this,t[1+n])-i.internalGet(this,t[0+n])/2)}})}),top:i.b({readOnly:!0,dependencies:["size","presenterView.insetCenterY"],get:Object.assign(function(){return Math.round(this.getPath("presenterView.insetCenterY")-this.size/2)},{__CW__getter:function(e,t,n,i){return Math.round(i.internalGetPath(this,t[1+n])-i.internalGet(this,t[0+n])/2)}})})}),ye=n(172),Ie=3,we=1,Se=12,Ce=10,Oe=16,Ae=25,Ee=3,Te=6,Me=4,De=3,Le=10,Ne=12,Pe="rgba(255, 255, 255, 0.7)",Re="rgb(0, 0, 0)",xe="rgb(0, 0, 0)";var Fe={};function ke(e,t,n){if(je[e]&&je[e][t]&&je[e][t][n])return je[e][t][n];var i=n?Math.round(Ne*e):Math.round(Le*e),r=Ve.font="400 "+i+"px "+l.a(document.body).get("font-family"),a=Ve.measureText(t);je[e]||(je[e]={}),je[e][t]||(je[e][t]={});var s=n?Se+Me:0,o=n?Ae*e:Oe*e,c=n?Te:Ee;return je[e][t][n]={width:(c+s)*e+Math.round(a.width)+c*e,height:Math.round(o),textWidth:a.width,textHeight:.73*i,textFont:r}}var Ve=document.createElement("canvas").getContext("2d"),je={},Be=n(1010),Ue=new Image;Ue.src=Be,Ue.onload=function(){this.cubeImageLoaded=!0};var We=$.a.extend(ve.a,{staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"canvas",classes:["pok-canvas-badge"],name:"badgeElement",attributes:{width:"0",height:"0"}}],classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isHidden",truevalue:"cw-hidden",attributes:{}}]},__QUALIFIED_CLASS_NAME__:"CanvasBadgeView"},isHidden:i.b(),displayString:i.b(),icon:i.b(),_maintainBadgeElement:c.f({inputs:["isAttached","presenterView.dpr"],callback:function(e,t){if(e){var n=this.displayString,i=this.badgeElement,r=this.icon;if(this._lastRenderedBadgeDPR!==t){this._lastRenderedBadgeDPR=t,this._lastRenderedBadgeDisplayString=n;var a=ke(t,n,!0);i.width=a.width,i.height=a.height,function(e,t,n,i,r,a){var s=Fe[i]?Fe[i][r]&&Fe[i][r][a]:void 0;if(!s){Fe[i]||(Fe[i]={}),Fe[i][r]||(Fe[i][r]={});var o=document.createElement("canvas"),c=o.getContext("2d");Fe[i][r][a]=o,s=o;var l=ke(i,r,a);o.width=l.width,o.height=l.height,function(e,t,n,i,r,a){var s=ke(i,r,a),o=s.width,c=s.height,l=De*i;e.beginPath(),e.moveTo(0+l,0),e.arcTo(0+o,0,0+o,0+c,l),e.arcTo(0+o,0+c,0,0+c,l),e.arcTo(0,0+c,0,0,l),e.arcTo(0,0,0+o,0,l),e.closePath(),e.fillStyle=Pe,e.fill();var u=a?Te:Ee;if(u*=i,a)if("SDOF"===a){var d=Math.ceil(Ue.height*i),h=Math.ceil(Ue.width*i),p=Ae*i/2-d/2;e.drawImage(Ue,Math.round(p),p,h,d)}else{var f=Ie-1,g=i*we,m=i*Se,v=i*Ce,_=0+u,b=0+c/2-v/2|0,y=m-2*f*g,I=v-2*f*g;e.fillStyle=Re;for(var w=0;w<Ie;w++)e.fillRect(_+2*w*g,b+2*w*g,y,g),e.fillRect(_+2*w*g,b+2*w*g+g,g,I-g);e.fillRect(_+2*f*g+g,b+v-g,y-g,g),e.fillRect(_+m-g,b+v-I+g,g,I-2*g)}e.font=s.textFont,e.fillStyle=xe,e.fillText(r,0+o-u-s.textWidth,0+(c+s.textHeight)/2)}(c,0,0,i,r,a)}e.drawImage(s,t,n)}(i.getContext("2d"),0,0,t,n,r),l.a(i).set("transform-origin","0 0").scale(1/t,1/t),l.a(this.element).set("width",a.width/t).set("height",a.height/t)}}}})}),Ge=We.extend({displayString:i.b(ye.d("Badge.HDR")),icon:i.b("HDR"),isHidden:i.b({readOnly:!0,dependencies:["presenterView.media.isHdr"],get:Object.assign(function(){return!this.getPath("presenterView.media.isHdr")},{__CW__getter:function(e,t,n,i){return!i.internalGetPath(this,t[0+n])}})}),staticMembers:{__QUALIFIED_CLASS_NAME__:"HDRBadgeView"}}),He=We.extend({displayString:i.b(ye.d("Badge.SDOF")),icon:i.b("SDOF"),isHidden:i.b({readOnly:!0,dependencies:["presenterView.media.isSDOF"],get:Object.assign(function(){return!this.getPath("presenterView.media.isSDOF")},{__CW__getter:function(e,t,n,i){return!i.internalGetPath(this,t[0+n])}})}),staticMembers:{__QUALIFIED_CLASS_NAME__:"SDOFBadgeView"}}),$e=n(186),ze=n(202),Ke=o.a.extend(c.a).extend({stateGenerator:ze.a,currentZoomLevel:i.b(),unzoomedZoomLevel:i.b(),maxAllowedZoomLevel:i.b(),_gestureStartZoomLevel:void 0,_trackedPointerLocations:r.b(Map),_maxPinchZoomLevel:U.c({get:function(){return Math.min(this.maxAllowedZoomLevel,4*this.unzoomedZoomLevel)}}),pointerDown:function(e){this._updatePointerLocation(e)},pointerMove:function(e){if(this._updatePointerLocation(e),2===this._trackedPointerLocations.size)this.state===o.b.Possible?(this._gestureStartZoomLevel=this.pinchZoomLevel,this.state=o.b.Began):this.state=o.b.Changed;else if(1===this._trackedPointerLocations.size){var t=this._trackedPointerLocations.values().next().value;Math.abs(t.currentX-t.initialX)>3&&(this.state=o.b.Failed)}},pointerUp:function(e){this._finishZoomGesture(e)},pointerCancel:function(e){this._finishZoomGesture(e)},_finishZoomGesture:function(e){this._updatePointerLocation(e,!0),this.state===o.b.Changed||this.state===o.b.Began?this.state=o.b.Ended:this.state=o.b.Failed},reset:function(){var e=arguments;this._trackedPointerLocations.clear(),this.__s._$10Q$reset.apply(this,e)},pinchZoomLevel:U.c({readOnly:!0,get:function(){var e=this._gestureStartZoomLevel,t=this.state,n=this.currentZoomLevel,i=this.unzoomedZoomLevel,r=this._maxPinchZoomLevel,a=void 0;if(void 0===e)a=n;else if(t!==o.b.Began&&t!==o.b.Changed)a=Math.min(r,Math.max(n,i));else{var s=this._zoomScaleFactor;(a=e*s)<i&&s<1?(a=i-.5*(i-a),a=Math.max(.1*i,a)):a>r&&s>1&&(a=r+.5*(a-r))}return a}}),_zoomScaleFactor:U.c({readOnly:!0,get:function(){var e=this._getPointerDistances();return e?e.currentDistance/e.initialDistance:0}}),anchorPoint:U.c({get:function(){var e=0,t=0;if(this._getPointerDistances()){var n=this._getPointerDistances().initialMidpoint;e=n.x,t=n.y}return{x:e,y:t}}}),_updatePointerLocation:function(e,t){var n=e.pointerId,i=e.clientX,r=e.clientY;if(n){var a=this._trackedPointerLocations;if(t)a.delete(n);else{var s=a.get(n);(s||2!==a.size)&&(s||(s={initialX:i,initialY:r},a.set(n,s)),s.currentX=i,s.currentY=r)}}},_getPointerDistances:function(){var e=this._trackedPointerLocations;if(2===e.size){var t=e.values(),n=t.next().value,i=t.next().value,r=i.initialX-n.initialX,a=i.initialY-n.initialY,s=i.currentX-n.currentX,o=i.currentY-n.currentY;return{initialDistance:Math.sqrt(r*r+a*a),currentDistance:Math.sqrt(s*s+o*o),initialMidpoint:{x:(n.initialX+i.initialX)/2,y:(n.initialY+i.initialY)/2},currentMidpoint:{x:(n.currentX+i.currentX)/2,y:(n.currentY+i.currentY)/2}}}},__superMap:{_$10Q$reset:"reset"},staticMembers:{__QUALIFIED_CLASS_NAME__:"PinchToZoomGestureRecognizer"}}),Qe={mixinDependencies:[$e.a],primaryInteractionMode:i.b(),unzoomedZoomLevel:i.b(),zoomLevel:i.b(),maxZoomLevel:i.b(),canZoom:i.b(),init:function(){var e=arguments;this.__s._$C3$init.apply(this,e),this.pinchToZoomGR=Ke.extend({unzoomedZoomLevel:this.bindingFor("unzoomedZoomLevel"),currentZoomLevel:this.bindingFor("zoomLevel"),maxAllowedZoomLevel:this.bindingFor("maxZoomLevel")}).create({event:"pinchToZoom",delegate:this}),this.addGestureRecognizer(this.pinchToZoomGR)},pinchToZoomGR:U.c({strong:!0}),isPinchZoomInProgress:i.b(),pinchToZoom:function(e){var t=e.state,n=e.pinchZoomLevel,i=e.anchorPoint;if(t===o.b.Began&&(this.allowImageOffsetWhileZooming=!0),t===o.b.Ended)this.allowImageOffsetWhileZooming=!1,n!==this.zoomLevel&&this.zoomToLevel(n),this.clearZoomOffsets();else{var r=this._convertAnchorPointToView(i);this.desiredZoomAnchorX=r.x,this.desiredZoomAnchorY=r.y,this.zoomLevel=n}this.isPinchZoomInProgress=t===o.b.Began||t===o.b.Changed},doubleTapZoom:function(e){if(this.zoomIsAllowed()){var t=void 0;if(this.zoomLevel===this.unzoomedZoomLevel){var n=this._convertAnchorPointToView(e);this.desiredZoomAnchorX=n.x,this.desiredZoomAnchorY=n.y,t=Math.min(this.maxZoomLevel,3*this.unzoomedZoomLevel),this.slowZoomToLevel(t)}else this.slowZoomToFit()}},_convertAnchorPointToView:function(e){var t=this.element.getBoundingClientRect();return{x:e.x-t.left,y:e.y-t.top}},zoomIsAllowed:function(){return this.primaryInteractionMode===V.a.TOUCH&&this.canZoom},gestureRecognizerShouldReceive:function(e,t){var n=arguments;return!(e===this.pinchToZoomGR&&!this.zoomIsAllowed())&&this.__s._$1FD$gestureRecognizerShouldReceive.apply(this,n)},__superMap:{_$C3$init:"init",_$1FD$gestureRecognizerShouldReceive:"gestureRecognizerShouldReceive"}};n.d(t,"a",function(){return qe});var qe=oe.extend(Qe).extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",classes:["pok-main-canvas"],name:"_tiledCanvasElement"},{type:"ELEMENT",tagname:"div",classes:["pok-derivative-container"],name:"derivativeContainer"}],classes:["pok-derivative-display-elements-positioner"],name:"derivativeDisplayElementsPositioner"}],classes:["pok-derivative-display-elements-clipper"],name:"derivativeDisplayElementsClipper"},{type:"VIEWOUTLET",tagname:"view",name:"largeProgressPieView"}],classes:["pok-photo-presenter-view",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"shouldHideMainDerivative",truevalue:"hide-main-derivative",attributes:{}}]}},__QUALIFIED_CLASS_NAME__:"PhotoPresenterView"},prettyPaintDelay:150,_lastPaintTime:0,canHoldDerivatives:i.b(!0),shouldHideMostProminentDisplayOfMediaWithPK:i.b(),isParallaxEffectEnabled:i.b(!1),shouldHideMainDerivative:i.b({readOnly:!0,dependencies:["media.pk","shouldHideMostProminentDisplayOfMediaWithPK"],get:Object.assign(function(){return this.getPath("media.pk")===this.shouldHideMostProminentDisplayOfMediaWithPK},{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])===i.internalGet(this,t[1+n])}})}),canvas:i.b({readOnly:!0,dependencies:["_tiledCanvasElement"],get:Object.assign(function(){var e=this._tiledCanvasElement;if(!e)return e;var t=new _(e);return t.width=t.height=0,t},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);if(!r)return r;var a=new _(r);return a.width=a.height=0,a}})}),imageDerivativeLoader:i.b({strong:!0,defaultValue:r.b(h.a.extend({shouldCorrectForDevicePixelRatio:!0,width:a.c("owner.imageWidth"),height:a.c("owner.imageHeight"),media:i.b({readOnly:!0,dependencies:["owner.canHoldDerivatives","owner.media"],get:Object.assign(function(){return this.getPath("owner.canHoldDerivatives")?this.getPath("owner.media"):void 0},{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])?i.internalGetPath(this,t[1+n]):void 0}})}),areRequestsAllowed:i.b({readOnly:!0,dependencies:["owner.isSteadyInParent","owner.isBackgroundablySteadyInParent"],get:Object.assign(function(){return this.getPath("owner.isSteadyInParent")||this.getPath("owner.isBackgroundablySteadyInParent")},{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])||i.internalGetPath(this,t[1+n])}})}),allowsShrinking:i.b({readOnly:!0,dependencies:["owner.isShowingInParent"],get:Object.assign(function(){return!this.getPath("owner.isShowingInParent")},{__CW__getter:function(e,t,n,i){return!i.internalGetPath(this,t[0+n])}})}),priority:i.b({readOnly:!0,dependencies:["owner.isTargetInParent"],get:Object.assign(function(){return this.getPath("owner.isTargetInParent")?105e3:115e3},{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])?105e3:115e3}})})}))}),derivative:i.b(a.c("imageDerivativeLoader.derivative")),shouldRenderUsingImageApproach:i.b({readOnly:!0,dependencies:["derivative","derivative.internalImageUser"],get:Object.assign(function(){var e=this.derivative;if(!e)return!0;var t=s.a.sharedInstance;if(t.isEdge||t.isIE)return!1;if(e.geometricLength>3072&&!t.isChrome)return!1;if(t.isSafari||t.isFirefox)return!1;if("IMG"!==e.getPath("element.tagName"))return!1;var n=this.getPath("derivative.internalImageUser");return!n||n===this},{__CW__getter:function(e,t,n,i){var r=this.derivative;if(!r)return!0;var a=s.a.sharedInstance;if(a.isEdge||a.isIE)return!1;if(r.geometricLength>3072&&!a.isChrome)return!1;if(a.isSafari||a.isFirefox)return!1;if("IMG"!==r.getPath("element.tagName"))return!1;var o=i.internalGetPath(this,t[1+n]);return!o||o===this}})}),init:function(){var e=arguments;this.__s._$1Yb$init.apply(this,e),this.oneUpDoubleTapGR=P.create({event:"oneUpDoubleTap",delegate:this}),this.addGestureRecognizer(this.oneUpDoubleTapGR)},cleanup:function(){var e=arguments;this._isCleaningUpForPool=!0,this._ul_canvasCSSWidth=this._ul_canvasCSSHeight=this._ul_canvasXScale=this._ul_canvasYScale=this._ul_canvasLeft=this._ul_canvasTop=this._ul_derivativeId=this._ul_isZoomed=this._ul_dpr=this._ul_canvasWidth=this._ul_canvasHeight=void 0,clearTimeout(this._prettyPaintTimeout),this._lastPaintTime=0,this.canZoom=!1,this.canvas.width=this.canvas.height=0,this.__s._$1mf$cleanup.apply(this,e),this._isCleaningUpForPool=!1},oneUpDoubleTap:function(e){e.state===o.b.Ended&&(this.shouldHideMainDerivative||(this.primaryInteractionMode!==V.a.TOUCH?this.sendEvent("userDidDoubleTapInOneUp"):this.doubleTapZoom(e.location)))},_raiseCanZoomWhenAppropriate:c.f("unzoomedZoomLevel","derivative",function(){if(!this._isCleaningUpForPool)return void 0!==this.overrideZoom?this.overrideZoom:void(this.derivative&&!this.canZoom&&(this.canZoom=!0))}),imageSizeTracker:i.b({strong:!0,defaultValue:r.b(R.a,{zeroSpeedCutoff:3,emaHalfLife:.2})}),_provideDeltaToImageSizeTracker:c.f("imageWidth","imageHeight",function(e,t){var n=e+t,i=this._pdtist_last_imageSize;this._pdtist_last_imageSize=n;var r=n-i;r&&this.imageSizeTracker.handleDelta(r)}),isImageSizeStationary:i.b(a.c("imageSizeTracker.isStationary")),isRenderDisabled:function(){return!this.media},_renderSelfWhenNeeded:c.f("imageLeft","imageTop","imageWidth","imageHeight","derivative","isZoomed","dpr","isShowingInParent","isBackgroundablySteadyInParent","isImageSizeStationary","shouldRenderUsingImageApproach",function(){this.renderSelfSoon()}),renderSelfSoon:function(){this._renderSelfTimeout&&x.a(this._renderSelfTimeout),this._renderSelfTimeout=x.b(this._renderSelfNow)},_renderSelfNow:F.a(function(){this._renderSelfTimeout=null,this.renderSelf()}),renderSelf:function(){clearTimeout(this._prettyPaintTimeout);var e=this.imageWidth,t=this.imageHeight,n=this.isShowingInParent,i=this.isBackgroundablySteadyInParent;if(e&&t&&(n||i)){var r=this.isRenderDisabled(),a=this.shouldRenderUsingImageApproach,s=!r&&!a;this.canvas.style.display=s?"block":"none",s?this._renderSelfWithCanvas():this.canvas.width=this.canvas.height=0;var o=!r&&a;this.derivativeContainer.style.display=o?"block":"none",o&&this._renderSelfWithImage()}},_renderSelfWithImage:function(){var e=this.derivativeContainer,t=l.a(e),n=this.imageWidth,i=this.imageHeight,r=this.imageLeft,a=this.imageTop,s=this.derivative,o=this.isZoomed,c=this.dpr,u=void 0,d=void 0;!s||!o&&this.isImageSizeStationary?(u=Math.min(Math.ceil(c*n),s?s.physicalWidth:1/0),d=Math.min(Math.ceil(c*i),s?s.physicalHeight:1/0)):(u=s.physicalWidth,d=s.physicalHeight);var h=u/c,p=d/c,f=n/h,g=i/p,m=r,v=a;t.set("position","absolute").set("background-color","#eeeeee").set("transform-origin","0 0").set("width",h).set("height",p).layerBack().translateDevicePixels(m,v).scale(f,g)},_maintainDerivativeContainerContents:c.f({inputs:["derivative","shouldRenderUsingImageApproach"],callback:function(e,t){var n=t&&e;if(!n||n.internalImageUser!==this){var i=this._appendedImagelike;i&&(i.parentNode.removeChild(i),i.style.cssText="",i.release(this));var r=this._appendedImagelike=n&&n.checkOutAppendableImagelike(this).retain(this);r&&(r.style.cssText="position: absolute; left: 0; top: 0; width: 100%; height: 100%;",this.derivativeContainer.appendChild(r))}}}),_maintainDerivativeOffsetForParallaxEffect:c.f({inputs:["isParallaxEffectEnabled","translationX","insetLeft","insetRight","imageLeft","imageTop","imageWidth","imageHeight","pinnedImageLeft","pinnedImageRight"],callback:function(e,t,n,i,r,a,s,o,c,u){var d=this.derivativeDisplayElementsPositioner,h=this.derivativeDisplayElementsClipper;if(!e)return l.a(d).clear("transform").clear("left").clear("top"),void l.a(h).clear("overflow").clear("left").clear("top").clear("width").clear("height");var p=(t=t||0)<0?n-(c-Math.abs(t)):i-(u-Math.abs(t)),f=(t<0?1:-1)*Math.max(0,p*(1/8));l.a(d),l.a(d).translateX(f).layerBack().set("left",-r).set("top",-a),l.a(h).set("overflow","hidden").set("left",r).set("top",a).set("width",s).set("height",o)}}),_renderSelfWithCanvas:function(){var e=this.canvas,t=l.a(e),n=this.imageWidth,i=this.imageHeight,r=this.imageLeft,a=this.imageTop,s=this.derivative,o=this.isZoomed,c=this.dpr,d=e.getContext("2d"),h=void 0,p=void 0;!s||!o&&this.isImageSizeStationary?(h=Math.min(Math.ceil(c*n),s?s.physicalWidth:1/0),p=Math.min(Math.ceil(c*i),s?s.physicalHeight:1/0)):(h=s.physicalWidth,p=s.physicalHeight);var f=h/c,g=p/c,m=n/f,v=i/g,_=r,b=a,y=!1,I=!1;this._ul_canvasCSSWidth!==(this._ul_canvasCSSWidth=f)&&(y=I=!0),this._ul_canvasCSSHeight!==(this._ul_canvasCSSHeight=g)&&(y=I=!0),this._ul_canvasXScale!==(this._ul_canvasXScale=m)&&(y=!0),this._ul_canvasYScale!==(this._ul_canvasYScale=v)&&(y=!0),this._ul_canvasLeft!==(this._ul_canvasLeft=_)&&(y=!0),this._ul_canvasTop!==(this._ul_canvasTop=b)&&(y=!0),y&&(I&&e.setCSSSize(f,g),t.set("position","absolute").set("transform-origin","0 0").set("width",f).set("height",g).layerBack().translateDevicePixels(_,b).scale(m,v));var w=e.width!==h||e.height!==p,S=w;S=S||I;var C=s&&s.derivativeId,O=Date.now()-this._lastPaintTime<this.prettyPaintDelay;if(this._ul_derivativeId!==(this._ul_derivativeId=C)&&(S=!0),this._ul_isZoomed!==(this._ul_isZoomed=o)&&(S=!0),this._ul_dpr!==(this._ul_dpr=c)&&(S=!0),this._ul_canvasWidth!==(this._ul_canvasWidth=h)&&(S=!0),this._ul_canvasHeight!==(this._ul_canvasHeight=p)&&(S=!0),this._ul_getsPrettyPaint!==(this._ul_getsPrettyPaint=O)&&(S=!0),S){w?(e.width=h,e.height=p):d.clearRect(0,0,h,p);var A=!1;if(s)A=s.drawIntoContextUsingCustomDrawImage(d,k.a.avoidingWorkIf(O),0,0,h,p)||A;else{var E=d.createRadialGradient(h/2,p*(.5+.5*this.unloadedGradientVerticalCenterOffsetFraction),0,h/2,p/2,Math.max(h,p)/1.5);E.addColorStop(0,this.unloadedGradientCenterColor),E.addColorStop(1,this.unloadedGradientOuterColor),d.fillStyle=E,d.fillRect(0,0,h,p)}this._lastPaintTime=Date.now(),A&&(this._prettyPaintTimeout=u.a(this._renderSelfNow,this.prettyPaintDelay))}},unloadedGradientVerticalCenterOffsetFraction:-1/3,unloadedGradientCenterColor:"#f8f8f8",unloadedGradientOuterColor:"#ddd",largeProgressPieView:i.b({readOnly:!0,strong:!0,dependencies:["isSteadilyAloneInParent","media.renderableImageDerivativeInfos","_largeProgressPieView","derivative"],get:Object.assign(function(){var e=!this.derivative&&this.isSteadilyAloneInParent&&this.getPath("media.renderableImageDerivativeInfos");return e&&(e=e&&e.length),e?this._largeProgressPieView:null},{__CW__getter:function(e,t,n,i){var r=!i.internalGet(this,t[3+n])&&i.internalGet(this,t[0+n])&&i.internalGetPath(this,t[1+n]);return r&&(r=r&&r.length),r?i.internalGet(this,t[2+n]):null}})}),_largeProgressPieView:i.b({readOnly:!0,strong:!0,get:function(){return be.create({presenterView:this})}}),bottomRightBadgeViewClasses:d.a([_e]),topLeftBadgeViewClasses:d.a([Ge,He]),_badgeInsetFromLeft:i.b(10),__superMap:{_$1Yb$init:"init",_$1mf$cleanup:"cleanup"}})},function(e,t,n){"use strict";if(n(26)){var i=n(215),r=n(15),a=n(18),s=n(3),o=n(304),c=n(393),l=n(56),u=n(237),d=n(230),h=n(43),p=n(239),f=n(62),g=n(28),m=n(466),v=n(233),_=n(60),b=n(48),y=n(276),I=n(19),w=n(31),S=n(384),C=n(234),O=n(53),A=n(235).f,E=n(386),T=n(231),M=n(24),D=n(64),L=n(294),N=n(301),P=n(389),R=n(256),x=n(298),F=n(236),k=n(388),V=n(456),j=n(27),B=n(52),U=j.f,W=B.f,G=r.RangeError,H=r.TypeError,$=r.Uint8Array,z=Array.prototype,K=c.ArrayBuffer,Q=c.DataView,q=D(0),Y=D(2),Z=D(3),J=D(4),X=D(5),ee=D(6),te=L(!0),ne=L(!1),ie=P.values,re=P.keys,ae=P.entries,se=z.lastIndexOf,oe=z.reduce,ce=z.reduceRight,le=z.join,ue=z.sort,de=z.slice,he=z.toString,pe=z.toLocaleString,fe=M("iterator"),ge=M("toStringTag"),me=T("typed_constructor"),ve=T("def_constructor"),_e=o.CONSTR,be=o.TYPED,ye=o.VIEW,Ie=D(1,function(e,t){return Ae(N(e,e[ve]),t)}),we=a(function(){return 1===new $(new Uint16Array([1]).buffer)[0]}),Se=!!$&&!!$.prototype.set&&a(function(){new $(1).set({})}),Ce=function(e,t){var n=f(e);if(n<0||n%t)throw G("Wrong offset!");return n},Oe=function(e){if(I(e)&&be in e)return e;throw H(e+" is not a typed array!")},Ae=function(e,t){if(!(I(e)&&me in e))throw H("It is not a typed array constructor!");return new e(t)},Ee=function(e,t){return Te(N(e,e[ve]),t)},Te=function(e,t){for(var n=0,i=t.length,r=Ae(e,i);i>n;)r[n]=t[n++];return r},Me=function(e,t,n){U(e,t,{get:function(){return this._d[n]}})},De=function(e){var t,n,i,r,a,s,o=w(e),c=arguments.length,u=c>1?arguments[1]:void 0,d=void 0!==u,h=E(o);if(void 0!=h&&!S(h)){for(s=h.call(o),i=[],t=0;!(a=s.next()).done;t++)i.push(a.value);o=i}for(d&&c>2&&(u=l(u,arguments[2],2)),t=0,n=g(o.length),r=Ae(this,n);n>t;t++)r[t]=d?u(o[t],t):o[t];return r},Le=function(){for(var e=0,t=arguments.length,n=Ae(this,t);t>e;)n[e]=arguments[e++];return n},Ne=!!$&&a(function(){pe.call(new $(1))}),Pe=function(){return pe.apply(Ne?de.call(Oe(this)):Oe(this),arguments)},Re={copyWithin:function(e,t){return V.call(Oe(this),e,t,arguments.length>2?arguments[2]:void 0)},every:function(e){return J(Oe(this),e,arguments.length>1?arguments[1]:void 0)},fill:function(e){return k.apply(Oe(this),arguments)},filter:function(e){return Ee(this,Y(Oe(this),e,arguments.length>1?arguments[1]:void 0))},find:function(e){return X(Oe(this),e,arguments.length>1?arguments[1]:void 0)},findIndex:function(e){return ee(Oe(this),e,arguments.length>1?arguments[1]:void 0)},forEach:function(e){q(Oe(this),e,arguments.length>1?arguments[1]:void 0)},indexOf:function(e){return ne(Oe(this),e,arguments.length>1?arguments[1]:void 0)},includes:function(e){return te(Oe(this),e,arguments.length>1?arguments[1]:void 0)},join:function(e){return le.apply(Oe(this),arguments)},lastIndexOf:function(e){return se.apply(Oe(this),arguments)},map:function(e){return Ie(Oe(this),e,arguments.length>1?arguments[1]:void 0)},reduce:function(e){return oe.apply(Oe(this),arguments)},reduceRight:function(e){return ce.apply(Oe(this),arguments)},reverse:function(){for(var e,t=Oe(this).length,n=Math.floor(t/2),i=0;i<n;)e=this[i],this[i++]=this[--t],this[t]=e;return this},some:function(e){return Z(Oe(this),e,arguments.length>1?arguments[1]:void 0)},sort:function(e){return ue.call(Oe(this),e)},subarray:function(e,t){var n=Oe(this),i=n.length,r=v(e,i);return new(N(n,n[ve]))(n.buffer,n.byteOffset+r*n.BYTES_PER_ELEMENT,g((void 0===t?i:v(t,i))-r))}},xe=function(e,t){return Ee(this,de.call(Oe(this),e,t))},Fe=function(e){Oe(this);var t=Ce(arguments[1],1),n=this.length,i=w(e),r=g(i.length),a=0;if(r+t>n)throw G("Wrong length!");for(;a<r;)this[t+a]=i[a++]},ke={entries:function(){return ae.call(Oe(this))},keys:function(){return re.call(Oe(this))},values:function(){return ie.call(Oe(this))}},Ve=function(e,t){return I(e)&&e[be]&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},je=function(e,t){return Ve(e,t=_(t,!0))?d(2,e[t]):W(e,t)},Be=function(e,t,n){return!(Ve(e,t=_(t,!0))&&I(n)&&b(n,"value"))||b(n,"get")||b(n,"set")||n.configurable||b(n,"writable")&&!n.writable||b(n,"enumerable")&&!n.enumerable?U(e,t,n):(e[t]=n.value,e)};_e||(B.f=je,j.f=Be),s(s.S+s.F*!_e,"Object",{getOwnPropertyDescriptor:je,defineProperty:Be}),a(function(){he.call({})})&&(he=pe=function(){return le.call(this)});var Ue=p({},Re);p(Ue,ke),h(Ue,fe,ke.values),p(Ue,{slice:xe,set:Fe,constructor:function(){},toString:he,toLocaleString:Pe}),Me(Ue,"buffer","b"),Me(Ue,"byteOffset","o"),Me(Ue,"byteLength","l"),Me(Ue,"length","e"),U(Ue,ge,{get:function(){return this[be]}}),e.exports=function(e,t,n,c){var l=e+((c=!!c)?"Clamped":"")+"Array",d="get"+e,p="set"+e,f=r[l],v=f||{},_=f&&O(f),b=!f||!o.ABV,w={},S=f&&f.prototype,E=function(e,n){U(e,n,{get:function(){return function(e,n){var i=e._d;return i.v[d](n*t+i.o,we)}(this,n)},set:function(e){return function(e,n,i){var r=e._d;c&&(i=(i=Math.round(i))<0?0:i>255?255:255&i),r.v[p](n*t+r.o,i,we)}(this,n,e)},enumerable:!0})};b?(f=n(function(e,n,i,r){u(e,f,l,"_d");var a,s,o,c,d=0,p=0;if(I(n)){if(!(n instanceof K||"ArrayBuffer"==(c=y(n))||"SharedArrayBuffer"==c))return be in n?Te(f,n):De.call(f,n);a=n,p=Ce(i,t);var v=n.byteLength;if(void 0===r){if(v%t)throw G("Wrong length!");if((s=v-p)<0)throw G("Wrong length!")}else if((s=g(r)*t)+p>v)throw G("Wrong length!");o=s/t}else o=m(n),a=new K(s=o*t);for(h(e,"_d",{b:a,o:p,l:s,e:o,v:new Q(a)});d<o;)E(e,d++)}),S=f.prototype=C(Ue),h(S,"constructor",f)):a(function(){f(1)})&&a(function(){new f(-1)})&&x(function(e){new f,new f(null),new f(1.5),new f(e)},!0)||(f=n(function(e,n,i,r){var a;return u(e,f,l),I(n)?n instanceof K||"ArrayBuffer"==(a=y(n))||"SharedArrayBuffer"==a?void 0!==r?new v(n,Ce(i,t),r):void 0!==i?new v(n,Ce(i,t)):new v(n):be in n?Te(f,n):De.call(f,n):new v(m(n))}),q(_!==Function.prototype?A(v).concat(A(_)):A(v),function(e){e in f||h(f,e,v[e])}),f.prototype=S,i||(S.constructor=f));var T=S[fe],M=!!T&&("values"==T.name||void 0==T.name),D=ke.values;h(f,me,!0),h(S,be,l),h(S,ye,!0),h(S,ve,f),(c?new f(1)[ge]==l:ge in S)||U(S,ge,{get:function(){return l}}),w[l]=f,s(s.G+s.W+s.F*(f!=v),w),s(s.S,l,{BYTES_PER_ELEMENT:t}),s(s.S+s.F*a(function(){v.of.call(f,1)}),l,{from:De,of:Le}),"BYTES_PER_ELEMENT"in S||h(S,"BYTES_PER_ELEMENT",t),s(s.P,l,Re),F(l),s(s.P+s.F*Se,l,{set:Fe}),s(s.P+s.F*!M,l,ke),i||S.toString==he||(S.toString=he),s(s.P+s.F*a(function(){new f(1).slice()}),l,{slice:xe}),s(s.P+s.F*(a(function(){return[1,2].toLocaleString()!=new f([1,2]).toLocaleString()})||!a(function(){S.toLocaleString.call([1,2])})),l,{toLocaleString:Pe}),R[l]=M?T:D,i||M||h(S,fe,D)}}else e.exports=function(){}},function(e,t,n){var i=n(461),r=n(3),a=n(293)("metadata"),s=a.store||(a.store=new(n(464))),o=function(e,t,n){var r=s.get(e);if(!r){if(!n)return;s.set(e,r=new i)}var a=r.get(t);if(!a){if(!n)return;r.set(t,a=new i)}return a};e.exports={store:s,map:o,has:function(e,t,n){var i=o(t,n,!1);return void 0!==i&&i.has(e)},get:function(e,t,n){var i=o(t,n,!1);return void 0===i?void 0:i.get(e)},set:function(e,t,n,i){o(n,i,!0).set(e,t)},keys:function(e,t){var n=o(e,t,!1),i=[];return n&&n.forEach(function(e,t){i.push(t)}),i},key:function(e){return void 0===e||"symbol"==typeof e?e:String(e)},exp:function(e){r(r.S,"Reflect",e)}}},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return f});var i=n(80),r=n(36),a=n(65),s=n(41),o=n(363),c=n(356),l=n(320),u=n(198),d=n(280),h=n(321),p=n(494),f=i.a.extend(r.a,{mixinDependencies:[l.a,h.a],staticMembers:{initializeWithApplication:function(t){f._frameworkInitializerInstance&&a.b("[cloudos-kit] Framework has already been initialized"),t&&t.instanceOf(o.a)||a.b("[cloudos-kit] Framework initializer must be an instance of ProcessKit Application");var n=t.hostInfo;n||a.b("[cloudos-kit] The application is not a child application - no host information");var i=n.clientId;i||a.b("[cloudos-kit] The application is not a child application - no client identifier");var r=t.parentProcessReference,s=t.applicationName;r||a.b("[cloudos-kit] The application is not a child application - no process reference"),s||a.b("[cloudos-kit] The application is not a child application - no application name");var c=e.__CW_BUILD_INFO,l={appName:s,masteringNumber:c.masteringNumber,buildNumber:c.buildNumber};f._frameworkInitializerInstance=f.create(t,l,i)},sharedInstance:s.c({type:f,get:function(){var e=f._frameworkInitializerInstance;return e||a.b("[cloudos-kit] The framework has not been initialized. Please ensure no API has been called before the application delegate method applicationWillFinishLaunching has been called."),e}}),_frameworkInitializerInstance:s.c({type:f}),__QUALIFIED_CLASS_NAME__:"FrameworkInitializer"},processReference:s.c({type:c.a,readOnly:!0,get:function(){return this._application.parentProcessReference}}),hostInfo:s.c({type:Object,readOnly:!0,get:function(){return this._application.hostInfo}}),sessionInfo:s.c({type:Object,readOnly:!0,get:function(){return this._application.sessionInfo}}),session:s.c({type:d.a,readOnly:!0,get:function(){return d.a.deserialize(this.sessionInfo)}}),applicationName:s.c({type:String,readOnly:!0,get:function(){return this.applicationInfo.appName}}),masteringBuildNumber:s.c({readOnly:!0,type:String,get:function(){return this.applicationInfo.masteringNumber}}),buildNumber:s.c({readOnly:!0,type:String,get:function(){return this.applicationInfo.buildNumber}}),applicationInfo:s.c({type:Object,readOnly:!0,get:function(){return this._internalApplicationInfo}}),clientId:s.c({type:String,readOnly:!0,get:function(){return this._internalClientId}}),webServices:s.c({type:Map,readOnly:!0,get:function(){var e=this.session;return e?e.webServices:void 0}}),init:function(e,t,n){this.__s._$1qp$init.call(this),e||a.b("FrameworkInitializer: init: no application specified"),t||a.b("FrameworkInitializer: init: no application info specified"),n||a.b("FrameworkInitializer: init: no client id specified");var i=t.appName,r=t.masteringNumber,s=t.buildNumber;i||a.b("FrameworkInitializer: init: no applicationName specified"),r||a.b("FrameworkInitializer: init: no mastering build number specified"),s||a.b("FrameworkInitializer: init: no build number specified"),this._application=e,this._internalApplicationInfo=t,this._internalClientId=n,p.a.sharedInstance.configurationProvider=this,this.sessionDidChange(this.session)},_internalClientId:s.c({type:String}),_internalApplicationInfo:s.c({type:Object}),_application:s.c({type:o.a}),sessionDidChange:function(e){if(e){var t=e.dataUserDomain;t&&u.a.sharedInstance.setDomainFromCountryCode(t)}},__superMap:{_$1qp$init:"init"}})}).call(this,n(6))},function(e,t,n){"use strict";var i=n(1238),r=n(172);function a(e){var t,n,a=e.givenName,o=e.familyName,c=e.emailAddress,l=e.phoneNumber,u=e.nickname,d=e.companyName,h=u||a;return h&&o&&(n=i.a(h)&&i.a(o)?"Name.Display.NameIsCJK.FirstAndFamilyNames":"Name.Display.FirstAndFamilyNames",t=r.d(n,{firstName:h,familyName:o})),s(t)||(t=s(h)||s(o)||s(c)||s(l)||s(d)),t}function s(e){return e&&!/^\s*$/.test(e)?e:""}r.b(r.c(),{"AccountMenu.AccountSettings":"Account Settings","AccountMenu.SignOut":"Sign Out","Name.Display.FirstAndFamilyNames":"%{firstName} %{familyName}","Name.Display.NameIsCJK.FirstAndFamilyNames":"%{familyName}%{firstName}","Button.Help.Tooltip":"Help and Support","Toolbar.AppSwitcher.Tooltip":"Change App","Toolbar.Button.Action.UserAction":"iCloud Settings & Sign Out","HSA.SignoutDialog.Title":"Sign out of iCloud.com?","HSA.SignoutDialog.CheckboxTitle":"Remember me on this browser so I don’t have to verify my identity next time.","HSA.SignoutDialog.SignoutButton":"Sign Out","Button.Cancel":"Cancel"}),n.d(t,"a",function(){return a})},function(e,t,n){"use strict";var i=n(80),r=n(781),a=n(180),s=n(36),o=n(34),c=n(1187),l=n(1188).a.extend({init:function(){var e=this,t=arguments;this.width=window.innerWidth,this.height=window.innerHeight,this.__s._$8I$init.apply(this,t);var n=function(){return e.updateDimensions()};Object(c.a)(window,"resize",n),Object(c.a)(window.document,"DOMContentLoaded",n)},x:0,y:0,width:0,height:0,updateDimensions:function(){this.set("width",window.innerWidth),this.set("height",window.innerHeight)},__superMap:{_$8I$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"BrowserWindow"}});n.d(t,"a",function(){return u});var u=i.a.extend(r.a,s.a,{init:function(e){var t=e&&e.userAgent;t?delete e.userAgent:t=window.navigator.userAgent,t=t.toLowerCase();var n,i,r,a,s,o=/\sedge\//.test(t),l=!o&&/fxios/.test(t),u=!o&&!l&&/chrome|crios/.test(t),d=!o&&!l&&!u&&/safari/.test(t),h=l||!o&&!u&&!d&&/firefox/.test(t),p=!o&&!u&&!d&&!h&&/trident|msie/.test(t),f=o,g=!f&&/applewebkit/.test(t)&&!/edge/.test(t),m=!f&&!g&&/trident/.test(t),v=!f&&!g&&!m&&/gecko/.test(t);o?(n=t.match(/(?:edge).(\d+)\.(\d+)/),a=t.match(/(?:edge).(\d+)/)):(n=t.match(/(?:chrome|crios|version|firefox|fxios|msie|rv).(\d+)\.(\d+)/),a=t.match(/(?:applewebkit|gecko|trident).(\d+)/));var _=o||p;n&&(i=parseInt(n[1],10),r=parseInt(n[2],10)),a&&(s=parseInt(a[1])),this.__s._$q5$init.call(this,{isChrome:u,isSafari:d,isFirefox:h,isEdge:o,isIE:p,isEdgeOrIE:_,isIE9OrLower:p&&i<10,isIE8OrLower:p&&i<9,majorVersion:i,minorVersion:r,isEdgeHTML:f,isWebKit:g,isGecko:v,isTrident:m,engineMajorVersion:s}),Object(c.a)(window,"online",this.updateNetworkConnectionStatus.bind(this)),Object(c.a)(window,"offline",this.updateNetworkConnectionStatus.bind(this)),this.updateNetworkConnectionStatus()},updateNetworkConnectionStatus:function(){this.isOffline=!window.navigator.onLine},isOffline:Object(o.b)(),isChrome:void 0,isFirefox:void 0,isEdge:void 0,isIE:void 0,isEdgeOrIE:void 0,isIE9OrLower:void 0,isIE8OrLower:void 0,isSafari:void 0,majorVersion:void 0,minorVersion:void 0,isEdgeHTML:void 0,isWebKit:void 0,isGecko:void 0,isTrident:void 0,engineMajorVersion:void 0,window:Object(o.b)({strong:!0,defaultValue:Object(a.b)(l)}),__superMap:{_$q5$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"Browser"}})},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n(65),r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=0,s=function(e){if(null===e)return"_null";if(void 0===e)return"_undefined";if(e.hasOwnProperty("_cwGUID"))return e._cwGUID;var t=void 0===e?"undefined":r(e);switch(t){case"number":Object.is(e,-0)&&(e="-0");case"string":case"boolean":return t+e;case"object":case"function":var n=t+ ++a;return o.value=n,Object.defineProperty(e,"_cwGUID",o),n;default:Object(i.b)("unrecognized object type",{object:e,type:t})}return null},o={value:"",enumerable:!1,writable:!1,configurable:!1}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n(65),r={staticMembers:{_pool:null,init:function(){var e=arguments;this._pool=[],this.__s._$7N$init.apply(this,e)},maxPoolSize:200,create:function(){var e=void 0,t=this._pool;return t.length>0?(e=t.pop()).isPooled=!1:e=this.__s._$EW$create.call(this),e.retain(this,"CW._Poolable.create"),e.initFromPool.apply(e,arguments),e._autoreleaseForTransfer(this,"CW._Poolable.create"),e},_returnInstanceToPool:function(e){var t=this._pool;t.length>=this.maxPoolSize||(t.push(e),e.isPooled=!0)},__superMap:{_$7N$init:"init",_$EW$create:"create"}},retain:function(){var e=arguments;return this.isPooled&&Object(i.b)("Attempted to retain pooled object.",this),this.__s._$Pb$retain.apply(this,e)},release:function(){var e=arguments;return this.isPooled&&Object(i.b)("Attempted to release pooled object.",this),this.__s._$Rs$release.apply(this,e)},_captureDisposingObjectForPool:function(){this.constructor._returnInstanceToPool(this)},isPooled:!1,initFromPool:function(e){for(var t in arguments.length>1&&Object(i.b)("Default poolable initializer supports at most one argument. If you would like to apply a mixin it should be done when calling .extend()."),e)this[t]=e[t]},__superMap:{_$Pb$retain:"retain",_$Rs$release:"release"}}},function(e,t,n){"use strict";function i(e){return"string"==typeof e}n.d(t,"a",function(){return i})},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function r(e){return null===e||"object"!==(void 0===e?"undefined":i(e))&&"function"!=typeof e}},function(e,t,n){"use strict";n.d(t,"a",function(){return N}),n.d(t,"b",function(){return R});var i,r,a=n(68),s=n(416),o=n(192),c=n(65),l=n(775),u=n(784),d={"animation-duration":"s","animation-delay":"s","animation-iteration-count":"","column-count":"",columns:"","font-size-adjust":"","font-weight":"",opacity:"",order:"",orphans:"","tab-size":"","transition-delay":"s","transition-duration":"s",widows:"","z-index":"","flex-grow":"","flex-shrink":""},h=o.a.sharedInstance,p={translate:{subkeys:"translateX translateY translateZ".split(" "),defaultUnit:"px",processArgs:function(){T<2&&Object(c.b)("When adding a `translate` transform, at least two arguments (for X and Y) are required.")}},translateDevicePixels:{transform:"translate",subkeys:"translateX translateY translateZ".split(" "),defaultUnit:"px",processArgs:function(){T<2&&Object(c.b)("When adding a `translate` transform, at least two arguments (for X and Y) are required.");for(var e=0;e<T;e++){var t=E[e],n=h.ceilToDevicePixelRatio(t);E[e]=n}}},scale:{subkeys:"scaleX scaleY scaleZ".split(" "),defaultUnit:"",processArgs:function(){1===T&&(T=2,E[1]=E[0])}},rotate:{subkeys:"rotateX rotateY rotateZ".split(" "),defaultUnit:"deg",processArgs:function(){2===T&&Object(c.b)("When adding a `rotate` transform, either one or three arguments (for Z-only or X, Y, Z) are required."),1===T&&(T=3,E[2]=E[0],E[0]=E[1]=void 0)}},skew:{subkeys:"skewX skewY".split(" "),defaultUnit:"deg",processArgs:function(){}},matrix:{subkeys:[],_name:"matrix",_requiredArgs:6,processArgs:function(){p.matrix3d.processArgs.call(this)}},matrix3d:{subkeys:[],_name:"matrix3d",_requiredArgs:16,processArgs:function(){var e,t,n=1===T&&E[0];if(n&&Array.isArray(n))for(T=n.length,e=0;e<T;e++)E[e]=n[e];for(T!==this._requiredArgs&&Object(c.b)("When adding a `"+this._name+"` transform, exactly "+this._requiredArgs+" arguments are required."),e=0;e<T;e++)t=E[e],isNaN(t)&&Object(c.b)("All arguments to `"+this._name+"` must be numbers."),E[e]=(+t).toFixed(15)}}},f=function(){var e,t,n,i,r,a,s={};for(e in p)for(n=(t=p[e]).defaultUnit,a=(i=t.subkeys).length,r=0;r<a;r++)s[i[r]]=n;return s}(),g=a.a.extend(s.a,{element:null,_unflushedStyles:null,_unflushedStyleKeys:null,_unflushedStyleKeysLen:0,_pauseCount:0,init:function(e){this.element=e,this._unflushedStyles={},this._unflushedStyleKeys=[],this.__s._$21K$init.call(this)},set:function(e,t){if(Object(l.a)(e))return this._setWithHash(e);t=function(e,t){if(0!==t&&!t)return"";if(!isNaN(t)){var n=d[e];return void 0===n&&(n="px"),t+n}return t}(e,t),e=_(e);var n=this._unflushedStyles;return n[e]||(this._unflushedStyleKeys[this._unflushedStyleKeysLen++]=e),n[e]=t,this._flushStylesToElement(),this},get:function(e){return e=A(e)+e,function(e,t){var n;(n=e._computedStyle)||(n=e._computedStyle=document.defaultView.getComputedStyle(e,null));var i=n.getPropertyValue(t);return!i&&w[t]&&(i=w[t](n)||i),i}(this.element,e)},getInline:function(e){return e=_(e),this.element.style[e]},clear:function(e){return e?this.set(e,void 0):this._clearAll()},transform:function(e){if(!arguments.length)return this._partialTransformString=null,this.set("transform","");var t,n,i,r,a,s,o=p[e],c=this._partialTransformString||"";if(this._partialTransformString=null,o){var l=o.transform||e;for(t=o.subkeys,n=o.defaultUnit,a=arguments.length,T=a-1,r=1;r<a;r++)E[r-1]=arguments[r];if(o.processArgs(),t.length>=T)for(r=0;r<T;r++)void 0!==(i=E[r])&&(isNaN(i)||(i+=n),s=t[r],D[s]&&("rotateZ"!==s||D.rotateX||D.rotateY||(s="rotate"),c+=(r?" ":"")+s+"("+i+")"));else for(c+=l+"(",r=0;r<T;r++)c+=(i=E[r])+(r<T-1?", ":")")}else void 0!==(i=arguments[1])&&D[e]&&(isNaN(i)||(i+=f[e]),"rotateZ"!==e||D.rotateX||D.rotateY||(e="rotate"),c+=e+"("+i+")");return this.set("transform",c),v.styleInstance=this,v._partialTransformString=c+" ",v},layerBack:function(){return this.translateZ(0)},forceRedraw:function(){var e=this.element,t=e.parentNode;if(t){var n=e.nextSibling;t.removeChild(e),t.insertBefore(e,n)}return this},layerBackIf:function(e){return this.translateZ(e?0:void 0)},pause:function(){return this._pauseCount++,this},resume:function(){return--this._pauseCount<=0&&(this._pauseCount=0),this._hasUnflushedStyles&&this._flushStylesToElement(),this},_setWithHash:function(e){for(var t in this.pause(!0),e)e.hasOwnProperty(t)&&this.set(t,e[t]);return this.resume(!0),this},_clearAll:function(){return this.element.style.cssText="",this},_flushStylesToElement:function(){if(this._pauseCount)this._hasUnflushedStyles=!0;else{var e,t,n=this.element.style,i=this._unflushedStyles,r=this._unflushedStyleKeys,a=this._unflushedStyleKeysLen;for(e=0;e<a;e++)t=r[e],r[e]=void 0,n[t]=i[t],i[t]=void 0;this._unflushedStyleKeysLen=0}},__superMap:{_$21K$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"Style"}}),m=(i={transform:!0,layerBack:!0,layerBackIf:!0},r=function(e){i[e]=!0},Object.keys(p).forEach(r),Object.keys(f).forEach(r),i);!function(){var e=g.prototype,t=[],n=function(e){return function(){for(var n=(t.length=arguments.length+1)-1;n>=1;n--)t[n]=arguments[n-1];return t[0]=e,this.transform.apply(this,t)}};for(var i in p)e[i]=n(i);for(var r in f)e[r]=n(r)}();var v=function(){var e={styleInstance:null,_partialTransformString:null},t=g.prototype,n=function(e){return m[e]?function(){var t=this.styleInstance;return t._partialTransformString=this._partialTransformString,t[e].apply(t,arguments)}:function(){var t=this.styleInstance;return t[e].apply(t,arguments)}};for(var i in t)t.hasOwnProperty(i)&&t[i]instanceof Function&&"_"!==i[0]&&"constructor"!==i&&!e[i]&&(e[i]=n(i));return e}();function _(e){return y(e=A(e)+e)}var b={};function y(e){var t=b[e];if(t)return t;if(!e)return"";0!==e.indexOf("-ms-")&&0!==e.indexOf("-webkit-")||(e=e.substring(1));var n,i=e,r=i.length;for(n=0;n<r;n++)"-"===i[n]&&n<r-1&&(i=i.substring(0,n)+i[n+1].toUpperCase()+i.substring(n+2),r--);return b[e]=i,i}var I=["style","variant","weight","size","family"],w={font:function(e){for(var t="",n=0,i=I.length;n<i;n++){var r=I[n],a=e.getPropertyValue("font-"+r);if(a&&(t&&(t+=" "),t+=a,"size"===r)){var s=e.getPropertyValue("line-height");s&&(t+="/"+s)}}return t}},S=["","-ms-","-moz-","-webkit-","-o-"],C={},O=document.createElement("div");function A(e){var t=C[e];if(void 0!==t)return t;e.match(M)&&Object(c.b)('Attempting to set style "'+e+"\". Use the dashed form of the style's name instead.");var n,i,r=S.length,a=!1;for(n=0;n<r;n++)if(i=S[n],"string"==typeof O.style[y(i+e)]){a=!0,i&&S.length>2&&(S=["",i]);break}return a?C[e]=i:u.b.warn("Using unsupported style "+e+"."),a?i:""}var E=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],T=0,M=/[A-Z]/,D={};!function(){var e;for(e in f)f.hasOwnProperty(e)&&(D[e]=!0);var t=g.create(document.createElement("div"));for(e in D)if(D.hasOwnProperty(e)){var n=t.transform(e,1).getInline("transform");n&&"none"!==n||(D[e]=!1),t.transform()}}();var L=function(){var e=g.create(),t=e.pause,n=e.resume;return e.pause=function(e){if(e)return t.call(this);Object(c.b)("Cannot `pause` the shared CW.UI.Style instance.")},e.resume=function(e){if(e)return n.call(this);Object(c.b)("Cannot `resume` the shared CW.UI.Style instance.")},e}();function N(e,t,n){if(e){var i=arguments.length;if(i>1){var r=e._cwStyleProxy;if(r||(r=L,L.element=e),3===i)return r.set(t,n);if(2===i)return r.set(t)}return e._cwStyleProxy||(e._cwStyleProxy=g.create(e))}}var P=A("transform")+"transform";function R(e,t,n){e[P]="translate("+h.ceilToDevicePixelRatio(t)+"px, "+h.ceilToDevicePixelRatio(n)+"px)"}},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n(354),r=n(34),a=i.a.extend({metadataType:r.a,staticMembers:{__QUALIFIED_CLASS_NAME__:"RequiredObservableProperty"}})},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n(65),r=n(49),a=n(82),s=n(315),o={mixinDependencies:[r.a,s.a],length:a.a.define(),toArray:function(){for(var e=this.createIterator().retain(),t=[],n=0;e.get("isValid");){var i=e.get("value");t[n++]=i,e.moveToNext()}return e.release(),t},encodedToArray:function(){for(var e=this.createIterator().retain(),t=[],n=0;e.isValid;){var i=e.encodedValue;t[n++]=i,e.moveToNext()}return e.release(),t},reduce:function(e,t,n){var r,a,s=this.createIterator().retain();for(arguments.length>=2?(r=t,a=0):s.isValid?(r=s.value,s.moveToNext(),a=1):Object(i.b)("reduce of empty array with no initial value");s.isValid;){var o=s.value;r=e.call(n,r,o,a++,this),s.moveToNext()}return s.release(),r},find:function(e,t){for(var n=this.createIterator().retain(),i=0;n.get("isValid");){var r=n.get("value");if(e.call(t,r,i++,this))return n.release(),r;n.moveToNext()}n.release()},every:function(e,t){for(var n=this.createIterator().retain(),i=0;n.get("isValid");){var r=n.get("value");if(!e.call(t,r,i++,this))return n.release(),!1;n.moveToNext()}return n.release(),!0},some:function(e,t){for(var n=this.createIterator().retain(),i=0;n.get("isValid");){var r=n.get("value");if(e.call(t,r,i++,this))return n.release(),!0;n.moveToNext()}return n.release(),!1},forEach:function(e,t){for(var n=this.createIterator().retain(),i=0;n.get("isValid");){var r=n.get("value");e.call(t,r,i++,this),n.moveToNext()}n.release()},contains:function(e){return this.encodedContains(this.encode(e))},encodedContains:function(e){for(var t=this.createIterator().retain();t.isValid;){if(t.encodedValue===e)return t.release(),!0;t.moveToNext()}return t.release(),!1},_isCwCollection:!0}},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var i=n(175),r=n(49),a=n(54),s=n(82),o=n(32),c=n(41),l={done:!1,value:null},u={mixinDependencies:[r.a,i.a],next:function(){return l.value=this.value,l.done=!this.isValid,this.moveToNext(),l},moveToNext:Object(o.c)(a.a),isValid:Object(o.c)(s.a),value:Object(c.c)({get:function(){return this.source.decode(this.encodedValue)},set:function(e){return this.encodedValue=this.source.encode(e),e}}),encodedValue:Object(o.c)(s.a),source:Object(c.c)()};u[Symbol.iterator]=function(){return this}},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n(128),r=n(54),a=n(82),s=n(32),o={mixinDependencies:[i.a],value:Object(s.c)(a.a),remove:Object(s.c)(r.a),add:Object(s.c)(r.a)}},function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"c",function(){return s}),n.d(t,"b",function(){return o});var i=n(177),r=n(289),a=i.b("ProcessState",{NONE:"NONE",LOADING:"LOADING",LOADED:"LOADED",RUNNING:"RUNNING",UNLOADING:"UNLOADING",UNLOADED:"UNLOADED",TERMINATED:"TERMINATED"});function s(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return r.b.apply(void 0,[a,e].concat(n))}function o(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return r.a.apply(void 0,[a,e].concat(n))}},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return c}),n.d(t,"b",function(){return l});var i=n(133),r=n(197),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=void 0,c=function(){function t(n,s){!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),s||(s=e),n||(n=s.navigator.userAgent);var o=function(e,t){if("string"!=typeof e)throw new TypeError("A user agent string is required");if("object"!==(void 0===t?"undefined":a(t)))throw new TypeError("A browser window instance is required");var n=void 0;return/ipad/i.test(e)?n=i.a.IPAD:/ipod/i.test(e)?n=i.a.IPOD:/iphone/i.test(e)?n=i.a.IPHONE:/android/i.test(e)?n=i.a.ANDROID:/mac/i.test(e)&&!/like mac/i.test(e)?n="ontouchstart"in t||"createTouch"in t.document?i.a.IPAD:i.a.MAC:/windows/i.test(e)?n=i.a.WINDOWS:/\bcros\b/i.test(e)?n=i.a.CHROMEOS:/\blinux\b/i.test(e)&&(n=i.a.LINUX),n}(n,s),c=function(e){return e===i.a.IPHONE||e===i.a.IPOD||e===i.a.IPAD||e===i.a.ANDROID?r.a.TOUCH:r.a.MOUSE}(o);this._current=o,this._primaryInteractionMode=c}return s(t,[{key:"current",get:function(){return this._current}},{key:"primaryInteractionMode",get:function(){return this._primaryInteractionMode}},{key:"isiPad",get:function(){return this._current===i.a.IPAD}},{key:"isiPhone",get:function(){return this._current===i.a.IPHONE}},{key:"isiPod",get:function(){return this._current===i.a.IPOD}},{key:"isiOS",get:function(){return this.isiPhone||this.isiPad||this.isiPod}},{key:"isWindows",get:function(){return this._current===i.a.WINDOWS}},{key:"isMac",get:function(){return this._current===i.a.MAC}},{key:"isAndroid",get:function(){return this._current===i.a.ANDROID}}],[{key:"sharedInstance",get:function(){return o||(o=new t),o}}]),t}();function l(){var t=e.document,n=t.head,i="width=device-width, initial-scale=1, viewport-fit=cover",r=e.document.querySelector('meta[name="viewport"]');r?r.setAttribute("content",i):((r=t.createElement("meta")).setAttribute("name","viewport"),r.setAttribute("content",i),n.appendChild(r))}}).call(this,n(6))},function(e,t,n){"use strict";n.r(t),n.d(t,"Callback",function(){return o});var i=n(65),r=n(1205),a=-1,s=++r.f.typeCount,o={memory:r.f,typeId:s,count:0,activeCount:0,arrayCount:0,dumpStats:function(){return"Callback: "+this.count+"; "+this.activeCount+" active"},alloc:function(){var e=-1;return a>0?(e=a,0===(a=this.memory.INT_32[e>>2])&&i.b("Next free item is NULL; this is not right.")):(e=r.b(16,8),this.count++),this.memory.INT_32[e+0>>2]=0,this.memory.INT_32[e+4>>2]=-1,this.memory.INT_32[e+8>>2]=-1,this.memory.INT_32[e+12>>2]=-1,this.activeCount++,e},allocArray:function(e){var t=16*e,n=r.a(t);return this.memory.INT_32[1+(n>>2)]=e,this._initArray(n),this.arrayCount++,n},free:function(e){e<0||(this.clear(e),this.memory.INT_32[e>>2]=a,a=e,this.activeCount--)},freeShallow:function(e){e<0||(this.clearShallow(e),this.memory.INT_32[e>>2]=a,a=e,this.activeCount--)},freeArray:function(e){e<0||(this._disposeArray(e),r.c(e),this.arrayCount--)},clear:function(e){e<0||(this.memory.INT_32[e+0>>2]=0,this.memory.INT_32[e+4>>2]=-1,this.memory.INT_32[e+8>>2]=-1,o.free(this.memory.INT_32[e+12>>2]),this.memory.INT_32[e+12>>2]=-1)},clearShallow:function(e){e<0||(this.memory.INT_32[e+0>>2]=0,this.memory.INT_32[e+4>>2]=-1,this.memory.INT_32[e+8>>2]=-1,this.memory.INT_32[e+12>>2]=-1)},_disposeArray:function(e){if(!(e<0))for(var t=this.memory.INT_32[1+(e>>2)],n=0;n<t;n++){var i=e+8+16*n;this.clear(i)}},_initArray:function(e){if(!(e<0))for(var t=this.memory.INT_32[1+(e>>2)],n=0;n<t;n++){var i=e+8+16*n;this.clearShallow(i)}},clone:function(e){var t=this.alloc();return r.e(e,t,4),this._cloneFieldsFrom(t,e),t},_cloneFieldsFrom:function(e,t){var n,i;i=(n=this.memory.INT_32[e+12>>2])>0?o.clone(n):-1,this.memory.INT_32[e+12>>2]=i},dump:function(e,t){if(t||(t=[]),t.indexOf(e)>=0)return"Circular reference";t.push(e);var i={method:this.memory.INT_32[e+0>>2],owner:function(){var i=this.memory.INT_32[e+4>>2];return i>0?n(134).Animation.dump(i,t):null}.bind(this)(),previousCallback:function(){var n=this.memory.INT_32[e+8>>2];return n>0?o.dump(n,t):null}.bind(this)(),nextCallback:function(){var n=this.memory.INT_32[e+12>>2];return n>0?o.dump(n,t):null}.bind(this)()};return t.pop(),i},dumpArray:function(e,t){for(var n=this.memory.INT_32[1+(e>>2)],i=[],r=0;r<n;r++)i.push(this.dump(e+8+16*r,t));return{array:i,length:n,allocatedSpace:this.memory.INT_32[e>>2]}},arrayFromJSArray:function(e,t){for(var n=e.length,i=this.allocArray(n),a=0;a<n;a++){var s=e[a],o=i+8+16*a;r.e(s,o,4),t?this.freeShallow(s):this._cloneFieldsFrom(o,s)}return i},putArrayIntoJSArray:function(e,t,n){var i=this.memory.INT_32[1+(e>>2)];t.length=i;for(var r=0;r<i;r++)t[r]=e+8+16*r},itemAtIndex:function(e,t){return e+8+16*t},lengthForArray:function(e){return this.memory.INT_32[1+(e>>2)]},getMethod:function(e){return this.memory.INT_32[e+0>>2]},setMethod:function(e,t){this.memory.INT_32[e+0>>2]=t},getOwner:function(e){return this.memory.INT_32[e+4>>2]},setOwner:function(e,t){this.memory.INT_32[e+4>>2],this.memory.INT_32[e+4>>2]=t},takeOwner:function(e){var t=this.memory.INT_32[e+4>>2];return this.memory.INT_32[e+4>>2]=-1,t},getPreviousCallback:function(e){return this.memory.INT_32[e+8>>2]},setPreviousCallback:function(e,t){this.memory.INT_32[e+8>>2],this.memory.INT_32[e+8>>2]=t},takePreviousCallback:function(e){var t=this.memory.INT_32[e+8>>2];return this.memory.INT_32[e+8>>2]=-1,t},getNextCallback:function(e){return this.memory.INT_32[e+12>>2]},setNextCallback:function(e,t){var n=this.memory.INT_32[e+12>>2];this.memory.INT_32[e+12>>2]=t,n>0&&o.free(n)},takeNextCallback:function(e){var t=this.memory.INT_32[e+12>>2];return this.memory.INT_32[e+12>>2]=-1,t}};r.g(o),r.h(o.typeId,o)},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=Object.freeze({IPAD:"IPAD",IPHONE:"IPHONE",IPOD:"IPOD",ANDROID:"ANDROID",WINDOWS:"WINDOWS",MAC:"MAC",LINUX:"LINUX",CHROMEOS:"CHROMEOS"})},function(e,t,n){"use strict";n.r(t),n.d(t,"Animation",function(){return c});var i=n(65),r=n(1205),a=n(132),s=-1,o=++r.f.typeCount,c={memory:r.f,typeId:o,count:0,activeCount:0,arrayCount:0,dumpStats:function(){return"Animation: "+this.count+"; "+this.activeCount+" active"},alloc:function(){var e=-1;return s>0?(e=s,0===(s=this.memory.INT_32[e>>2])&&i.b("Next free item is NULL; this is not right.")):(e=r.b(16,8),this.count++),this.memory.INT_32[e+0>>2]=-1,this.memory.INT_32[e+4>>2]=-1,this.memory.INT_32[e+8>>2]=0,this.activeCount++,e},allocArray:function(e){var t=16*e,n=r.a(t);return this.memory.INT_32[1+(n>>2)]=e,this._initArray(n),this.arrayCount++,n},free:function(e){e<0||(this.clear(e),this.memory.INT_32[e>>2]=s,s=e,this.activeCount--)},freeShallow:function(e){e<0||(this.clearShallow(e),this.memory.INT_32[e>>2]=s,s=e,this.activeCount--)},freeArray:function(e){e<0||(this._disposeArray(e),r.c(e),this.arrayCount--)},clear:function(e){if(!(e<0)){var t,n=null;n=this.getAnimatorType(e),t=this.memory.INT_32[e+0>>2],n&&t>0&&n.free(t),this.setAnimatorType(e,null),this.memory.INT_32[e+0>>2]=-1,a.Callback.free(this.memory.INT_32[e+4>>2]),this.memory.INT_32[e+4>>2]=-1,this.memory.INT_32[e+8>>2]=0}},clearShallow:function(e){e<0||(this.memory.INT_32[e+0>>2]=-1,this.memory.INT_32[e+4>>2]=-1,this.memory.INT_32[e+8>>2]=0)},_disposeArray:function(e){if(!(e<0))for(var t=this.memory.INT_32[1+(e>>2)],n=0;n<t;n++){var i=e+8+16*n;this.clear(i)}},_initArray:function(e){if(!(e<0))for(var t=this.memory.INT_32[1+(e>>2)],n=0;n<t;n++){var i=e+8+16*n;this.clearShallow(i)}},clone:function(e){var t=this.alloc();return r.e(e,t,4),this._cloneFieldsFrom(t,e),t},_cloneFieldsFrom:function(e,t){var n=-1,i=-1;i=(n=this.memory.INT_32[e+0>>2])>0?this.getAnimatorType(t).clone(n):-1,this.memory.INT_32[e+0>>2]=i,i=(n=this.memory.INT_32[e+4>>2])>0?a.Callback.clone(n):-1,this.memory.INT_32[e+4>>2]=i},dump:function(e,t){if(t||(t=[]),t.indexOf(e)>=0)return"Circular reference";t.push(e);var n={animator:function(){var n=this.memory.INT_32[e+0>>2];return n>0?this.getAnimatorType(e).dump(n,t):null}.bind(this)(),firstCallback:function(){var n=this.memory.INT_32[e+4>>2];return n>0?a.Callback.dump(n,t):null}.bind(this)(),animatorType:this.memory.INT_32[e+8>>2]};return t.pop(),n},dumpArray:function(e,t){for(var n=this.memory.INT_32[1+(e>>2)],i=[],r=0;r<n;r++)i.push(this.dump(e+8+16*r,t));return{array:i,length:n,allocatedSpace:this.memory.INT_32[e>>2]}},arrayFromJSArray:function(e,t){for(var n=e.length,i=this.allocArray(n),a=0;a<n;a++){var s=e[a],o=i+8+16*a;r.e(s,o,4),t?this.freeShallow(s):this._cloneFieldsFrom(o,s)}return i},putArrayIntoJSArray:function(e,t,n){var i=this.memory.INT_32[1+(e>>2)];t.length=i;for(var r=0;r<i;r++)t[r]=e+8+16*r},itemAtIndex:function(e,t){return e+8+16*t},lengthForArray:function(e){return this.memory.INT_32[1+(e>>2)]},getAnimator:function(e){return this.memory.INT_32[e+0>>2]},setAnimator:function(e,t,n){var i=this.memory.INT_32[e+0>>2];this.memory.INT_32[e+0>>2]=t;var r=this.getAnimatorType(e);r&&i>0&&i!==t&&r.free(i),this.setAnimatorType(e,n)},takeAnimator:function(e){var t=this.memory.INT_32[e+0>>2];return this.memory.INT_32[e+0>>2]=-1,t},getFirstCallback:function(e){return this.memory.INT_32[e+4>>2]},setFirstCallback:function(e,t){var i=this.memory.INT_32[e+4>>2];this.memory.INT_32[e+4>>2]=t,i>0&&n(132).Callback.free(i)},takeFirstCallback:function(e){var t=this.memory.INT_32[e+4>>2];return this.memory.INT_32[e+4>>2]=-1,t},getAnimatorType:function(e){var t=this.memory.INT_32[e+8>>2];return r.d(t)},setAnimatorType:function(e,t){t=t?t.typeId:-1,this.memory.INT_32[e+8>>2]=t}};r.g(c),r.h(c.typeId,c)},function(e,t,n){"use strict";(function(e){n.d(t,"b",function(){return o}),n.d(t,"c",function(){return c}),n.d(t,"a",function(){return l}),n.d(t,"f",function(){return u}),n.d(t,"e",function(){return h}),n.d(t,"d",function(){return p});var i=n(41),r=n(1215),a=n(324),s=n(108);function o(t){var n=s.a.MarkerSegments.SOI;if(t instanceof r.a)return t.jumpTo(0).uint16===n;if(t instanceof e.DataView&&t.byteLength>1)return t.getUint16(0)===n;if(t instanceof e.ArrayBuffer){var i=new e.DataView(t);return i.byteLength>1&&i.getUint16(0)===n}return!1}function c(e){return 1229531648===e||1296891946!==e&&null}function l(e){return 1165519206===e}function u(e,t,n){var i=n||{},r=e.uint16;if(null===r)return i;for(var s=e.cursor,o=0;o<r;o++){e.cursor=s+o*a.a;var c=t[e.uint16];if(c){var l=d(e);i[c]=l.length>1?l:l[0]}}return i}function d(e){var t=e.uint16,n=e.uint32,i=e.uint32,r=void 0,a=void 0,s=void 0,o=void 0;switch(t){case 1:case 7:for(n<5?e.rewind(4):e.jumpTo(i),r=[],a=0;a<n;a++)r[a]=e.uint8;return r;case 2:for(n<5?e.rewind(4):e.jumpTo(i),o="",a=0,s=n-1;a<s;a++)o+=e.nextChar;return o;case 3:for(n<3?e.rewind(4):e.jumpTo(i),r=[],a=0;a<n;a++)r[a]=e.uint16;return r;case 4:for(1===n?e.rewind(4):e.jumpTo(i),r=[],a=0;a<n;a++)r[a]=e.uint32;return r;case 5:for(e.jumpTo(i),r=[],a=0;a<n;a++)r[a]=[e.uint32,e.uint32];return r;case 9:for(1===n?e.rewind(4):e.jumpTo(i),r=[],a=0;a<n;a++)r[a]=e.int32;return r;case 10:for(e.jumpTo(i),r=[],a=0;a<n;a++)r[a]=[e.int32,e.int32];return r}}function h(e,t,n){return i.c({readOnly:!0,get:function(){return this.raw[e]||this.raw[n+e]||(void 0===t?null:t)}})}function p(e,t){return i.c({readOnly:!0,get:function(){var n=this.raw[e];return void 0===n?void 0===t?null:t:Array.isArray(n)?n[0]/n[1]:n}})}}).call(this,n(6))},function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return s});var i=n(177),r=n(289),a=Object(i.b)("UIState",{NONE:"NONE",BACKGROUND:"BACKGROUND",INACTIVE_FOREGROUND:"INACTIVE_FOREGROUND",ACTIVE_FOREGROUND:"ACTIVE_FOREGROUND"});function s(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return r.a.apply(void 0,[a,e].concat(n))}},function(e,t,n){"use strict";n.d(t,"c",function(){return i}),n.d(t,"a",function(){return r}),n.d(t,"b",function(){return a});var i=1e8,r="bplist0",a="YnBsaXN0M"},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n(177),r=Object(i.b)("MessagingResponseStatus",{NONE:"NONE",OK:"OK",DISCONNECTED:"DISCONNECTED",CANCELED:"CANCELED",BAD_REQUEST:"BAD_REQUEST",TIMEOUT:"TIMEOUT",ERROR:"ERROR",UNDEFINED_ERROR_TYPE:"UNDEFINED_ERROR_TYPE"})},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=n(177).b("AssetBurstFlag",{NOT_IN_BURST:0,UNKNOWN:1,NOT_PICKED:2,AUTO_PICKED:4,USER_FAVORITE:8,STACK:16,FIRST_PICKED:32})},function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return r}),n.d(t,"e",function(){return o}),n.d(t,"d",function(){return c}),n.d(t,"c",function(){return l});var i={PARSE_ERROR:-32700,INVALID_REQUEST:-32600,METHOD_NOT_FOUND:-32601,INVALID_PARAMS:-32602,INTERNAL_ERROR:-32603},r=function(e,t,n){this.message=e,this.code=t,this.data=n};r.prototype=Object.create(Error.prototype),r.prototype.constructor=r;var a=function(e){this.code=i.PARSE_ERROR,this.name="Parse error",this.message=e};(a.prototype=Object.create(r.prototype)).constructor=a;var s=function(e){this.code=i.INVALID_REQUEST,this.name="Invalid request",this.message=e};(s.prototype=Object.create(r.prototype)).constructor=s;var o=function(e){this.code=i.METHOD_NOT_FOUND,this.name="Method not found",this.message=e};o.prototype=Object.create(r.prototype),o.prototype.constructor=o;var c=function(e){this.code=i.INVALID_PARAMS,this.name="Invalid params",this.message=e};c.prototype=Object.create(r.prototype),c.prototype.constructor=c;var l=function(e){this.code=i.INTERNAL_ERROR,this.name="Internal error",this.message=e};l.prototype=Object.create(r.prototype),l.prototype.constructor=l},function(e,t,n){"use strict";n.d(t,"a",function(){return h}),n.d(t,"b",function(){return p}),n.d(t,"c",function(){return f}),n.d(t,"d",function(){return m});var i=n(177),r=n(178),a=n(80),s=n(1213),o=n(1192),c=n(784),l=n(798),u=n(65),d=n(360),h=Object(i.b)("MERGE_DIRECTION",["LEFT","RIGHT","BOTH"]),p=Object(r.b)("MERGE_FAILED_RESULT"),f=Object(i.b)("MERGE_TYPE",["ADD","REMOVE","UPDATE","UPDATE_AND_REMOVE"]),g=void 0;function m(e,t,n,i,r){null==i&&((i=g)||(i=g=a.a.extend(d.a).create()));var c=Object(s.a)(n,e),l=Object(s.a)(n,t),u=null!=i.valueForChangeInChangeSets,h=void 0,f=void 0,m=void 0;u&&(h={},f={},m={});var v=Object(o.a)(n),_=!1;return function(e,t,n,i,r,a,s,o,c,l,u){var d=!0;return a&&(d=C(e,t,n,i,r,a,s,o,0,0,u)),d&&s&&(d=C(e,t,n,i,r,s,a,o,0,0,u)),d}(e,t,n,i,v,c,l,h,0,0,r)&&function(e,t,n,i,r,a,s,o,c){var l=!0;return a&&(l=S(e,t,n,i,r,a,s,o,c)),l&&s&&(l=S(e,t,n,i,r,s,a,o,c)),l}(e,t,n,i,v,c,l,f,r)&&(_=function(e,t,n,i,r,a,s,o,c){var l=!0;return a&&(l=w(e,t,n,i,r,a,s,o,c)),l&&s&&(l=w(e,t,n,i,r,s,a,o,c)),l}(e,t,n,i,v,c,l,m,r)),_&&u&&(_=function(e,t,n,i,r,a){var s=!1;return I(e,t,n,n,i,r,a)&&I(e,t,i,n,i,r,a)&&(s=I(e,t,r,n,i,r,a)),s}(i,v,h,f,m,r)),_?v:p}var v={baseValue:null,direction:null,key:null,leftValue:null,rightValue:null,type:null},_="Failed to merge objects: ",b="A value was rejected.",y="The objects had logically impossible differences (e.g. left added a property that right claims to have removed).";function I(e,t,n,i,r,a,s){for(var o=Object.keys(n),l=o.length-1;l>=0;l--){var u=n[o[l]],d=u.key,h=u.type,g=e.valueForChangeInChangeSets(u,i,r,a,s);if(g===p)return c.b.debug(_+b,{change:u,parentKeyPath:s}),!1;Array.isArray(t)?h===f.ADD?t.push(g):h===f.REMOVE||h===f.UPDATE_AND_REMOVE&&void 0===g?t.pop():t[d]=g:h===f.REMOVE||h===f.UPDATE_AND_REMOVE&&void 0===g?delete t[d]:t[d]=g}return!0}function w(e,t,n,i,r,a,s,l,u){for(var d=a.added,h=d.length,g=0;g<h;g++){var m=d[g];if(s){if(s.updated.indexOf(m)>=0||s.removed.indexOf(m)>=0)return c.b.debug(_+y,{checkingDiff:a,againstDiff:s,parentKeyPath:u}),!1;var v=s.added,I=v.indexOf(m);I>=0&&v.splice(I,1)}var w=O(f.ADD,i,e,t,n,m);if(null==i.valueForChangeInChangeSets){var S=i.valueForChange(w,u);if(S===p)return c.b.debug(_+b,{change:w,parentKeyPath:u}),!1;var C=Object(o.a)(S);Array.isArray(r)?r.push(C):r[m]=C}else l[m]=w}return!0}function S(e,t,n,i,r,a,s,l,u){for(var d=a.removed,h=d.length,g=0;g<h;g++){var m=d[g];if(s){if(s.added.indexOf(m)>=0)return c.b.debug(_+y,{checkingDiff:a,againstDiff:s,parentKeyPath:u}),!1;var v=s.removed,I=v.indexOf(m);I>=0&&v.splice(I,1)}var w=O(f.REMOVE,i,e,t,n,m);if(null==i.valueForChangeInChangeSets){var S=i.valueForChange(w,u);if(S===p)return c.b.debug(_+b,{change:w,parentKeyPath:u}),!1;void 0===S?Array.isArray(r)?r.pop():delete r[m]:r[m]=Object(o.a)(S)}else l[m]=w}return!0}function C(e,t,n,i,r,a,s,l,u,d,h){for(var g=a.updated,m=g.length,v=0;v<m;v++){var I=g[v],w=!1;if(s){if(s.added.indexOf(I)>=0)return c.b.debug(_+y,{checkingDiff:a,againstDiff:s,parentKeyPath:h}),!1;var S=s.removed,C=S.indexOf(I);C>=0&&(S.splice(C,1),w=!0);var A=s.updated,E=A.indexOf(I);E>=0&&A.splice(E,1)}var T=O(w?f.UPDATE_AND_REMOVE:f.UPDATE,i,e,t,n,I);if(null==i.valueForChangeInChangeSets){var M=i.valueForChange(T,h);if(M===p)return c.b.debug(_+b,{change:T,parentKeyPath:h}),!1;void 0===M?Array.isArray(r)?r.pop():delete r[I]:r[I]=Object(o.a)(M)}else l[I]=T}return!0}function O(e,t,n,i,r,a){var s=r[a],o=n[a],c=i[a],d=void 0,p=void 0;e===f.ADD?(d=void 0!==o,p=void 0!==c):e===f.REMOVE?(d=void 0===o||void 0,p=void 0===c||void 0):e===f.UPDATE?(d=!Object(l.a)(s,o),p=!Object(l.a)(s,c)):e===f.UPDATE_AND_REMOVE?d=p=!0:Object(u.b)("Unrecognized merge type: "+e);var g=void 0;return(g=null==t.valueForChangeInChangeSets?v:{}).baseValue=s,g.direction=d&&p?h.BOTH:d?h.LEFT:h.RIGHT,g.key=a,g.leftValue=o,g.rightValue=c,g.type=e,g}},function(e,t,n){"use strict";e.exports=n(855)},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n(80),r=n(122),a=n(41),s=n(1139),o=i.a.extend(r.a,{itemsChanges:Object(a.c)({strong:!0}),invalidateItemAt:function(e){var t=this.invalidItems;t||(t=this.invalidItems=s.a.create()),t.add(e)},invalidItems:Object(a.c)({strong:!0}),sectionsChanges:Object(a.c)({strong:!0}),invalidateSectionAt:function(e){var t=this.invalidSections;t||(t=this.invalidSections=s.a.create()),t.add(e)},invalidSections:Object(a.c)({strong:!0}),movedBy:Object(a.c)({strong:!0}),sizeChangedBy:Object(a.c)({strong:!0}),itemShown:Object(a.c)({strong:!0}),itemShownAt:Object(a.c)({strong:!0}),itemScrolledTo:Object(a.c)({strong:!0}),everythingChanged:!1,layoutMetricsChanged:Object(a.c)({strong:!0}),collectionChanged:!1,didEnterPool:function(){var e=arguments;this.itemsChanges=null,this.invalidItems=null,this.sectionsChanges=null,this.invalidSections=null,this.movedBy=null,this.sizeChangedBy=null,this.itemShown=null,this.itemShownAt=null,this.itemScrolledTo=null,this.everythingChanged=!1,this.layoutMetricsChanged=null,this.collectionChanged=!1,this.__s._$cy$didEnterPool.apply(this,e)},toString:function(){var e=arguments,t="["+this.__s._$e5$toString.apply(this,e)+" ";return this.itemsChanges&&(t+="itemsChanges("+this.itemsChanges.lengthDelta+") "),this.invalidItems&&(t+="invalidItems("+this.invalidItems.size+") "),this.sectionsChanges&&(t+="sectionsChanges("+this.sectionsChanges.lengthDelta+") "),this.invalidSections&&(t+="invalidSections("+this.invalidSections.size+") "),this.movedBy&&(t+="movedBy("+this.movedBy.toString()+") "),this.sizeChangedBy&&(t+="sizeChangedBy("+this.sizeChangedBy.toString()+") "),this.everythingChanged&&(t+="everythingChanged "),this.layoutMetricsChanged&&(t+="layoutMetricsChanged("+this.layoutMetricsChanged.toArray().join(", ")+") "),this.collectionChanged&&(t+="collectionChanged "),this.itemShown&&(t+="itemShown "),this.itemShownAt&&(t+="itemShownAt("+this.itemShownAt.toString()+") "),t+"]"},__superMap:{_$cy$didEnterPool:"didEnterPool",_$e5$toString:"toString"},staticMembers:{__QUALIFIED_CLASS_NAME__:"InvalidationContext"}})},function(e,t,n){"use strict";(function(e){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"c",function(){return l}),n.d(t,"b",function(){return u}),n.d(t,"a",function(){return d}),n.d(t,"d",function(){return h});var s=e.Error,o=function(e,t){this.name="CKSharing.Error",this.message=e||"",this.context=t,this.stack=(new s).stack};o.prototype=Object.create(s.prototype),o.prototype.constructor=o;var c=function(e){function t(n,a,s){i(this,t);var o=r(this,e.call(this,n,s));return o.response=a,o.errors=a&&a.errors||[],o}return a(t,e),t}(o);function l(e){var t=e;if(!(e instanceof o)){var n=e||{},i={message:n.message,errors:[n],hasErrors:!0};throw new c("CloudKit request failed",i)}throw t}function u(e){if(e.hasErrors)throw new c("Received CloudKit errors in response",e);return e}var d=function(e){function t(){return i(this,t),r(this,e.apply(this,arguments))}return a(t,e),t}(o);function h(e){var t=e;if(!(e instanceof o)){var n={message:(e||{}).message};t=new d("Customer error encountered",n)}throw t}}).call(this,n(6))},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=n(177).b("AdjustmentRenderType",{UNDEFINED:0,AUTOLOOP:1,PORTRAIT:2,LONG_EXPOSURE:4,MIRROR:8})},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n(47);function r(e,t){var n=e.storeDataForObjectAt(t);return i.a.getDataHashForPrimaryKey(n.asset)}},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n(156),r=n(169),a=n(268),s=i.a.extend({staticMembers:{CK_RECORD_TYPE:"CPLZoneState",RECORD_NAME:"PrimarySync-0000-ZS",ZoneAvailabilityType:a.a,getPrimaryKeyFromParts:function(e){var t=e.zone,n=e.recordName,i=void 0===n?this.RECORD_NAME:n;return this.__s._$HM$getPrimaryKeyFromParts.call(this,{zone:t,recordName:i})},load:function(e){var t=arguments;return void 0===e.primaryKeys&&(e.primaryKeys=[this.getPrimaryKeyFromParts({zone:e.zonePK})]),this.__s._$Nt$load.apply(this,t)},__superMap:{_$HM$getPrimaryKeyFromParts:"getPrimaryKeyFromParts",_$Nt$load:"load"},__QUALIFIED_CLASS_NAME__:"ZoneState"},enabled:r.b({readOnly:!0}),disabledTime:r.e({readOnly:!0}),deleteTime:r.e({readOnly:!0}),availabilityType:r.j(a.a,{readOnly:!0,defaultValue:a.a.PUBLISHED})})},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=n(177).b("CPLIndexingStates",{FINISHED:"FINISHED",RUNNING:"RUNNING",FAILED:"FAILED",UNKNOWN:"UNKNOWN"})},function(e,t,n){"use strict";n.d(t,"a",function(){return h});var i,r,a=n(156),s=n(153),o=n(1185),c=n(33),l=n(89),u=n(331),d=(i=o.a,(r=function(e){var t=i.create();try{e(t.resolve.bind(t),t.reject.bind(t))}catch(e){t.reject(e)}return t}).all=i.all.bind(i),r.race=i.race.bind(i),r.resolve=i.resolve.bind(i),r.reject=i.reject.bind(i),r),h=a.a.extend({mixinDependencies:[s.a],staticMembers:{CK_RECORD_TYPE:"CPLLibraryInfo",getRecordNameForZoneNameAndIndexID:function(e,t){return e+"-0000-CI-"+t},getPrimaryKeyFromContainerPK:function(e){var t=c.a.find(e);return this.getPrimaryKeyFromContainer(t)},getPrimaryKeyFromContainer:function(e){var t=e.zone,n=e.recordName,i=e.type,r=c.a.getQueryIndexCountId(n,i),a=this.getRecordNameForZoneNameAndIndexID(t.zoneID.zoneName,r);return this.getPrimaryKeyWithZonePK(t.pk,a)},loadFromContainerPKs:function(e){var t=this;return this.load({primaryKeys:e.map(function(e){return t.getPrimaryKeyFromContainerPK(e)})})},getRankRangeFromDates:function(e,t,n){var i,r=this;return(i=regeneratorRuntime.mark(function i(){var a,s,o,c,l;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,r.loadFromContainerPKs([e]);case 2:if(!((a=i.sent)&&a.length>0)){i.next=9;break}return s=a.objectAt(0),o=s.cplAssetDistribution,c=r.getRankFromCPLAssetDistribution(o,t,!1),l=r.getRankFromCPLAssetDistribution(o,n,!0),i.abrupt("return",{startRank:c,endRank:l});case 9:case"end":return i.stop()}},i,r)}),function(){var e=i.apply(this,arguments);return new d(function(t,n){return function i(r,a){try{var s=e[r](a),o=s.value}catch(e){return void n(e)}if(!s.done)return d.resolve(o).then(function(e){i("next",e)},function(e){i("throw",e)});t(o)}("next")})})()},getRankFromCPLAssetDistribution:function(e,t,n){for(var i=e.buckets,r=0,a=i.length-1;a>=0;a--){var s=i[a],o=s.bucketStart,c=s.count,l=parseInt(c,10);if(o<t){if(n){r+=l;break}break}r+=l}return Math.max(r-1,0)},__QUALIFIED_CLASS_NAME__:"CountInfo"},cplAssetDistribution:Object(l.c)({ProtobufClass:u.a})})},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n(80),r=n(36),a=n(34),s=n(1197),o=n(352),c=i.a.extend(r.a,{mixinDependencies:[o.a],dsid:a.b({type:String}),firstName:a.b({type:String}),lastName:a.b({type:String}),fullName:a.b({type:String}),appleId:a.b({type:String}),statusCode:a.b({type:Number}),appleIdEntries:a.b({type:Array}),isManagedAppleID:a.b({type:Boolean}),completedAuthenticationStep:a.b({type:Number}),totalAuthenticationSteps:a.b({type:Number}),isAuthenticated:a.b({dependencies:["completedAuthenticationStep","totalAuthenticationSteps"],type:Boolean,readOnly:!0,get:function(){var e=this.completedAuthenticationStep,t=this.totalAuthenticationSteps;return e>0&&e===t},serialization:{ignore:!0}}),isMAIDAccount:a.b({dependencies:["isManagedAppleID"],readOnly:!0,type:Boolean,get:Object.assign(function(){return this.isManagedAppleID},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])}}),serialization:{ignore:!0}}),isiCloudLiteAccount:a.b({dependencies:["statusCode"],readOnly:!0,type:Boolean,get:Object.assign(function(){return 4===this.statusCode},{__CW__getter:function(e,t,n,i){return 4===i.internalGet(this,t[0+n])}}),serialization:{ignore:!0}}),hasPhoneNumberAsAppleId:a.b({dependencies:["appleIdEntries"],readOnly:!0,type:Boolean,get:Object.assign(function(){return l(this.appleIdEntries,"PHONE_NUMBER")},{__CW__getter:function(e,t,n,i){return l(i.internalGet(this,t[0+n]),"PHONE_NUMBER")}}),serialization:{ignore:!0}}),hasEmailAddressAsAppleId:a.b({dependencies:["appleIdEntries"],readOnly:!0,type:Boolean,get:Object.assign(function(){return l(this.appleIdEntries,"EMAIL")},{__CW__getter:function(e,t,n,i){return l(i.internalGet(this,t[0+n]),"EMAIL")}}),serialization:{ignore:!0}}),accountType:a.b({type:String}),staticMembers:{__QUALIFIED_CLASS_NAME__:"AuthenticatedUser"}});function l(e,t){if(s.a(e))return!1;var n=e.find(function(e){return e.isPrimary});return!!n&&n.type===t}},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=n(552).b;i.rulesVersion=4},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n(793),r=n(41),a=n(69),s=n(92),o=i.a.extend({storeIds:Object(r.c)({readOnly:!0,get:function(){var e=this._storeIdsArray;if(!e){if(0===this.length)return;e=this._storeIdsArray=this.toArray().map(function(e){return e.storeId})}return e}}),models:Object(r.c)({readOnly:!0,get:function(){var e=this._modelArray;return e||(e=this._modelArray=s.a.createFromStoreIds(this.storeIds,null,Object(a.b)())),e}}),operation:Object(r.c)({readOnly:!0,get:function(){var e=this.length;if(1===e)return this.objectAt(0).operation;if(e>1){var t=this._bulkOperation;return t||(t=this._bulkOperation={type:a.a.WRITE.BULK,context:{changes:this}}),t}}}),merge:function(e){for(var t,n=e.createIterator().retain();t=n.value;)this.recordChange(t),n.moveToNext();return n.release(),this},recordChange:function(e){var t=e.storeId,n=this._changesByStoreId||(this._changesByStoreId={}),i=n[t];if(i>=0){var r=this.objectAt(i);this.setIndex(i,r.merge(e))}else this.push(e),n[t]=this.length-1,this._invalidateCaches();return e},getChangeForStoreId:function(e){var t=(this._changesByStoreId||(this._changesByStoreId={}))[e];if(t>=0)return this.objectAt(t)},removeChangeForStoreId:function(e){var t=this._changesByStoreId;if(t){var n=t[e];if(n>=0){var i=this.objectAt(n);for(var r in this.splice(n,1),delete t[e],this._invalidateCaches(),t){var a=t[r];a>n&&(t[r]=a-1)}return i}}},_modelArray:Object(r.c)({type:s.a}),_storeIdsArray:Object(r.c)({type:Array}),_invalidateCaches:function(){this._modelArray=null,this._storeIdsArray=null},staticMembers:{__QUALIFIED_CLASS_NAME__:"ChangeSet"}})},function(e,t,n){"use strict";n.d(t,"a",function(){return h});var i,r,a=n(1185),s=n(69),o=n(226),c=n(396),l=n(34),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},d=("function"==typeof Symbol&&Symbol.iterator,i=a.a,(r=function(e){var t=i.create();try{e(t.resolve.bind(t),t.reject.bind(t))}catch(e){t.reject(e)}return t}).all=i.all.bind(i),r.race=i.race.bind(i),r.resolve=i.resolve.bind(i),r.reject=i.reject.bind(i),r),h={staticMembers:{load:function(e){var t=this;if("string"==typeof e)return this.load({primaryKeys:[e]});if(Array.isArray(e))return this.load({primaryKeys:e});var n=e.primaryKeys,i=!0===e.isForcedFetch?e:u({},e,{primaryKeys:n.filter(function(n){return t.getIsLoadNeededForContext(n,e)})});return 0===i.primaryKeys.length?a.a.resolve(this.findByPrimaryKeys(n)):this.performOperation(s.a.READ.LOAD,i)},reload:function(e){return this.load(u({},e,{isForcedFetch:!0}))},getNetworkStatus:function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.b()).getNetworkStatus(this,e)},getIsLoading:function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getNetworkStatus(e))!==o.a.IDLE},getIsLoadingAndStillValidForContext:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.getNetworkStatus(e);return this.getIsLoading(e,n)},getLoadingPromiseForContext:function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.b()).transactionProcessor.getActiveTransactions(this,e);return a.a.all(n)},getLoadStatus:function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.b()).getLoadStatus(this,e)},getIsLoaded:function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLoadStatus(e))===c.a.LOADED},getIsLoadedAndStillValidForContext:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.getLoadStatus(e);return this.getIsLoaded(e,n)},getIsLoadNeededForContext:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.getLoadStatus(e);return!0===t.isForcedFetch||!this.getIsLoadedAndStillValidForContext(e,t,n)}},load:function(){var e,t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(e=regeneratorRuntime.mark(function e(){var i,r,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.constructor,r=t.getPrimaryKey(),t.networkStatus,a=i.getNetworkStatus(r),!i.getIsLoadingAndStillValidForContext(r,n,a)){e.next=10;break}return e.next=8,i.getLoadingPromiseForContext(r,n);case 8:e.next=13;break;case 10:if(!i.getIsLoadNeededForContext(r,n,t.loadStatus)){e.next=13;break}return e.next=13,i.load(u({},n,{primaryKeys:[r]}));case 13:return e.abrupt("return",t);case 14:case"end":return e.stop()}},e,t)}),function(){var t=e.apply(this,arguments);return new d(function(e,n){return function i(r,a){try{var s=t[r](a),o=s.value}catch(e){return void n(e)}if(!s.done)return d.resolve(o).then(function(e){i("next",e)},function(e){i("throw",e)});e(o)}("next")})})()},reload:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.load(u({},e,{isForcedFetch:!0}))},isLoading:l.b({dependencies:["networkStatus"],readOnly:!0,get:Object.assign(function(){return this.constructor.getIsLoading(this.getPrimaryKey(),this.networkStatus)},{__CW__getter:function(e,t,n,i){return this.constructor.getIsLoading(this.getPrimaryKey(),i.internalGet(this,t[0+n]))}})}),isLoaded:l.b({dependencies:["loadStatus"],readOnly:!0,get:Object.assign(function(){return this.constructor.getIsLoaded(this.getPrimaryKey(),this.loadStatus)},{__CW__getter:function(e,t,n,i){return this.constructor.getIsLoaded(this.getPrimaryKey(),i.internalGet(this,t[0+n]))}})})}},function(e,t,n){"use strict";(function(e){n.d(t,"b",function(){return a}),n.d(t,"a",function(){return s});var i=n(80),r=n(425),a=function(e){return r.b.apply(this,arguments)},s=function(e){return r.a.apply(this,arguments)},o=[],c=[],l=[],u=(i.a.extend({release:function(){var e=arguments;u(),this.__s._$1JO$release.apply(this,e)},__superMap:{_$1JO$release:"release"}}).create().retain(),function(){var t,n=void 0,i=o.length;if(i){for(n=0;n<i;n++){var r=o[n];if(r){var a=c[n];a?(r.apply(e,a),(t=a).length=0,l.push(t)):r()}}var s=i;for(i=o.length,n=s;n<i;n++){var u=n-s;o[u]=o[n],c[u]=c[n],o[n]=void 0,c[n]=void 0}o.length=c.length=i-s}})}).call(this,n(6))},function(e,t,n){"use strict";n.d(t,"b",function(){return s}),n.d(t,"a",function(){return o});var i=n(1169),r=n(65),a=n(208),s=function(e,t){var n=c.pop()||d();n.workFunc=e||i.a,n.thisArg=t,n._shouldReleaseOnRun=h;for(var r=n.args,a=2,s=arguments.length;a<s;a++)r[a-2]=arguments[a];return n.callback},o=function(){h=!0;var e=s.apply(void 0,arguments);return h=!1,e.retain(),e},c=[],l=[],u=function(){r.b("Attempting to invoke a recycled function while it is pooled.")},d=function(){var e={};e.workFunc=u,e.thisArg=null,e.args=[],e.retainCount=0;var t=e.callback=function(){l.length=0,l.push.apply(l,e.args),l.push.apply(l,arguments);var n=e.workFunc.apply(e.thisArg,l);return e._shouldReleaseOnRun&&(e._shouldReleaseOnRun=!1,t.release()),n};return t.retain=function(){return e.workFunc===u&&r.b("Attempting to retain a recycled function while it is pooled."),e.retainCount++,t},t.release=function(){return--e.retainCount||(e.args.length=0,e.thisArg=null,e.workFunc=u,c.push(e)),e.retainCount<0&&r.b("Attempting to overrelease a recycled bound function."),t},t.autorelease=function(){return a.b(this),this},e},h=!1},function(e,t,n){"use strict";n.d(t,"a",function(){return v});var i=n(87),r=n(69),a=n(92),s=n(854),o=n(106),c=n(398),l=n(112),u=n(13),d=n(397),h=n(153),p=n(169),f=n(107),g=n(66),m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},v=("function"==typeof Symbol&&Symbol.iterator,i.a.extend({mixinDependencies:[o.a,c.a,l.a,h.a,d.a],staticMembers:{_isAbstract:!0,recordModelClasses:[],recordModelClassesByType:{},init:function(){var e=arguments;this.__s._$NP$init.apply(this,e),this.hasOwnProperty("_isAbstract")&&!0===this._isAbstract||(v.recordModelClassesByType[this.CK_RECORD_TYPE]=this,v.recordModelClasses.push(this))},getModelClassForRecordType:function(e){return this.recordModelClassesByType[e]},getPrimaryKey:function(e,t){return this.getPrimaryKeyWithZonePK(e.pk,t)},getPrimaryKeyWithZonePK:function(e,t){return e+" "+t},getZonePrimaryKeyFromPrimaryKey:function(e){var t=e.indexOf(" ");return e.substring(0,t)},getRecordNameFromPrimaryKey:function(e){var t=e.lastIndexOf(" ");return e.substring(t+1)},getPartsFromPrimaryKey:function(e){return{zone:this.getZonePrimaryKeyFromPrimaryKey(e),recordName:this.getRecordNameFromPrimaryKey(e)}},getPrimaryKeyFromParts:function(e){var t=e.zone,n=e.recordName;return this.getPrimaryKeyWithZonePK(t,n)},createFromDataHash:function(e){var t=arguments;return void 0===e.recordType&&(e.recordType=this.CK_RECORD_TYPE),this.__s._$1Yj$createFromDataHash.apply(this,t)},getDataValuesFromServiceValues:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.__s._$1gM$getDataValuesFromServiceValues.call(this,e,t),i=r.b().readDataForPrimaryKey(g.a,n.zone);return n.zoneID=i.zoneID,n.pk=this.getPrimaryKeyWithZonePK(i.pk,n.recordName),n},loadFromZone:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.map(function(t){return n.getPrimaryKey(e,t)});return this.load(m({primaryKeys:r},i))},listFromZone:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.list(m({zonePK:e.pk},t))},isPrimaryKeyForZone:function(e,t){return e.startsWith(t)&&" "===e[t.length]},getAllRecordsByClassForZonePK:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.b(),n={},i=this.recordModelClasses,a=Array.isArray(i),s=0;for(i=a?i:i[Symbol.iterator]();;){var o;if(a){if(s>=i.length)break;o=i[s++]}else{if((s=i.next()).done)break;o=s.value}var c=o;n[c.name]=this.getAllRecordsForClassAndZonePK(c,e,t)}return n},getAllRecordsForClassAndZonePK:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.b(),s=i.constructor.getPrimaryKeysToStoreIds(e),o=Object.keys(s).filter(function(e){return n.isPrimaryKeyForZone(e,t)}).map(function(e){return s[e]}).filter(function(e){return i.hasDataFor(e)});return a.a.createFromStoreIds(o,e,this)},load:function(){var e=this,t=arguments,n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).primaryKeys,i=n[0],r=this.getZonePrimaryKeyFromPrimaryKey(i),a=g.a.find(r);return this.__s._$2_m$load.apply(this,t).then(function(t){for(var i=a.syncToken,r=e._syncTokenWhenLoadedByPK,s=0,o=n.length;s<o;s++){var c=n[s];r[e.getStoreIdForPrimaryKey(c)]=i}return t})},getIsLoadedAndStillValidForContext:function(e){var t=arguments,n=r.b(),i=n.constructor.getStoreIdForPrimaryKey(this,e),a=this._syncTokenWhenLoadedByPK[i];if("string"==typeof a){var s=this.getDataHashForStoreId(i,n);return s?a===g.a.getDataHashForPrimaryKey(s.zone).syncToken:this.__s._$3O9$getIsLoadedAndStillValidForContext.apply(this,t)}return this.__s._$3O9$getIsLoadedAndStillValidForContext.apply(this,t)},_syncTokenWhenLoadedByPK:{},__superMap:{_$NP$init:"init",_$1Yj$createFromDataHash:"createFromDataHash",_$1gM$getDataValuesFromServiceValues:"getDataValuesFromServiceValues",_$2_m$load:"load",_$3O9$getIsLoadedAndStillValidForContext:"getIsLoadedAndStillValidForContext"},__QUALIFIED_CLASS_NAME__:"Record"},recordName:Object(u.c)({readOnly:!0}),recordType:Object(u.c)({readOnly:!0}),recordChangeTag:Object(u.c)({readOnly:!0}),zone:s.a.toOne({readOnly:!0,strong:!0,type:g.a}),zoneID:Object(p.f)({readOnly:!0,type:f.a}),getServiceValuesFromDataValues:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.recordName,i=this.recordType,r=this.recordChangeTag;return this.__s._$4A4$getServiceValuesFromDataValues.call(this,e,Object.assign(t,{recordName:n,recordType:i,recordChangeTag:r}))},__superMap:{_$4A4$getServiceValuesFromDataValues:"getServiceValuesFromDataValues"}}))},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=n(177).b("AssetSubtype",{NONE:0,PHOTO_PANORAMA:1,PHOTO_SUPPORTING_VIDEO:2,PHOTO_SCREENSHOT:3,VIDEO_SLOWMO:100,VIDEO_TIMELAPSE:101})},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=n(177).b("DataClassType",{UNKNOWN:0,IMAGE:1,MOVIE:2,AUDIO:3})},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n(1278),r=i.a.extend({staticMembers:{storageKey:"cpl"},EXPUNGE_DATE_OFFSET:2592e6,changesetIntervalWithPush:i.a.numberProperty(3e5),changesetIntervalWithoutPush:i.a.numberProperty(3e4),changesetIntervalWhileIdle:i.a.numberProperty(9e5),indexingStatePollingInterval:i.a.numberProperty(15e3),shouldUseH2ForDeriviativeLoading:i.a.booleanProperty(!1),minMediasForRangeRequest:i.a.numberProperty(10),maxMediasForRangeRequest:i.a.numberProperty(30),numRangeRequestsToPrefetchForMoments:i.a.numberProperty(2)}).create()},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=n(177).b("ContainerSortType",{MANUAL:0,CREATION_DATE:1,LAST_MODIFIED_DATE:2,IMPORT_DATE:3,TRASH_DATE:4,TITLE:5})},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return B}),n(29);var i,r,a,s,o=n(269),c=n(437),l=n(7),u=n(10),d=n(9),h=n(167),p=n(25),f=n(1185),g=n(173),m=n(1284),v=n(1169),_=n(172),b=n(168),y=n(156),I=n(163),w=n(413),S=n(271),C=n(40),O=n(47),A=n(67),E=n(158),T=n(157),M=n(555),D=n(201),L=n(73),N=n(1236),P=n(199),R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},x=(a=f.a,(s=function(e){var t=a.create();try{e(t.resolve.bind(t),t.reject.bind(t))}catch(e){t.reject(e)}return t}).all=a.all.bind(a),s.race=a.race.bind(a),s.resolve=a.resolve.bind(a),s.reject=a.reject.bind(a),s);function F(e){return function(){var t=e.apply(this,arguments);return new x(function(e,n){return function i(r,a){try{var s=t[r](a),o=s.value}catch(e){return void n(e)}if(!s.done)return x.resolve(o).then(function(e){i("next",e)},function(e){i("throw",e)});e(o)}("next")})}}var k=e.CloudKit,V=void 0,j=function(e,t,n){return"string"==typeof e&&e.length>0?e:"number"==typeof(i=t||n)?g.a("%{date:MMM} %{date:YYYY}",{date:new Date(i),dateFormatter:m.a}):"";var i},B=(r=i=function(){function e(){!function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this)}return e.initiateCMMShare=(r=F(regeneratorRuntime.mark(function t(n,i,r,a){var s,l,u,d,h,p,g,m,_,w,S,C,O,A=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{beginStat:v.a,endStat:v.a,recordStat:v.a},E=arguments[5],T=arguments.length>6&&void 0!==arguments[6]&&arguments[6];return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return s=r.createCMMZone(),l=s.zoneID,u=l.zoneName,d=l.ownerRecordName,h=k.DatabaseScope.PRIVATE,p=e._createAndSaveRootRecord(r,s,h,a).catch(function(e){throw s.isLoaded&&s.delete().catch(function(){}),e}),g=p.then(function(e){var t=b.a.beginNewJob({includeRecords:a.map(y.a.getRecordNameFromPrimaryKey),sourceZoneID:r.cplZone.zoneID,targetZoneID:s.zoneID,targetRootName:I.a.RECORD_NAME},a.length,P.a.SHARE_CREATION.value);return new N.a(N.b.OK,{rootRecord:e,recordCopierJob:t})}).catch(function(){return new N.a(N.b.OK_WITH_ISSUES)}),m=k.getDefaultContainer(),_=o.a.create(u,d),w=function(e){return e?f.a.resolve(e):p},S=e._generateCKSharingSettings(n,i,A,s,T,a),C={preselectedTransport:E},O=c.a.initiateShareInSingleStep(m,h,_,w,S,C),t.abrupt("return",O.then(function(e){var t=g,n=e.share;return n?t.then(function(e){return new N.a(e.status,R({},e.body,{shareRecord:n}))}):t.then(function(){return new N.a(N.b.OK_WITH_ISSUES)}),t}));case 13:case"end":return t.stop()}},t,this)})),function(e,t,n,i){return r.apply(this,arguments)}),e.getSupportedCMMTransports=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return c.a.getSupportedTransportsForSettings(e._generateCKSharingSettings(void 0,void 0,void 0,void 0,t))},e._createAndSaveRootRecord=(i=F(regeneratorRuntime.mark(function t(n,i,r,a){var s,o,c,l,u;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return s=e.chooseBestPlacardMedia(a),o=e._generatePreviewImageData(s),t.next=4,i.saveWithoutRelated();case 4:return c=e._getShareMetadataFromMediaPKs(a),l=n.createCMMRootRecord(i,c),t.next=8,o;case 8:return(u=t.sent)&&(l.previewData={dataToUpload:u}),t.next=12,l.save();case 12:return t.abrupt("return",I.a.find(l.pk));case 13:case"end":return t.stop()}},t,this)})),function(e,t,n,r){return i.apply(this,arguments)}),e.showCopyLink=(n=F(regeneratorRuntime.mark(function t(n,i,r){var a,s,u,d,h,p,f,g,m,_,b,y=this,I=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{beginStat:v.a,endStat:v.a,recordStat:v.a},w=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.zoneID,s=a.ownerRecordName,u=a.zoneName,d=n.share.title,h=function(){var e=F(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n);case 1:case"end":return e.stop()}},e,y)}));return function(){return e.apply(this,arguments)}}(),p=o.a.create(u,s),f=k.getDefaultContainer(),g=e._generateCKSharingSettings(d,i,I,void 0,w),m=l.a.COPY_LINK,g.contactsService=null,g.supportedTransports=[m],_={preselectedTransport:m},b=r?k.DatabaseScope.PRIVATE:k.DatabaseScope.SHARED,t.next=13,c.a.addParticipantsInSingleStep(f,b,p,h,g,_);case 13:case"end":return t.stop()}},t,this)})),function(e,t,i){return n.apply(this,arguments)}),e.chooseBestPlacardMedia=function(e){if(e&&e.length){e.sort(function(e,t){var n=C.a.getDataHashForPrimaryKey(e).asset,i=O.a.getDataHashForPrimaryKey(n).assetDate,r=C.a.getDataHashForPrimaryKey(t).asset;return i-O.a.getDataHashForPrimaryKey(r).assetDate});for(var t=void 0,n=!1,i=0;i<e.length;i++){var r=e[i],a=C.a.getDataHashForPrimaryKey(r),s=A.a.getDataHashForPrimaryKey(a.master),o=O.a.getDataHashForPrimaryKey(a.asset),c=o._assetSubtypeV2;if(s.dataClassType!==E.a.AUDIO.value){if(o.isFavorite){t=r;break}(!t||n&&c!==T.a.PHOTO_SCREENSHOT.value)&&(t=r,n=c===T.a.PHOTO_SCREENSHOT.value)}}return t}},e._generatePreviewImageData=(t=F(regeneratorRuntime.mark(function e(t){var n,i,r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e5;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",void 0);case 2:if(n=C.a.find(t)){e.next=5;break}return e.abrupt("return",void 0);case 5:return e.next=7,n.createBestImageBelowFileSize(a);case 7:return i=e.sent,r=M.a.encode({previewImageData:[i],keyAssetIdentifier:y.a.getRecordNameFromPrimaryKey(t),cropRectString:"{{0, 0}, {1, 1}}"}).finish(),e.abrupt("return",new Blob([r]));case 10:case"end":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)}),e._getShareMetadataFromMediaPKs=function(e){for(var t=0,n=0,i=0,r=Number.MAX_SAFE_INTEGER,a=Number.MIN_SAFE_INTEGER,s=0;s<e.length;s++){var o=C.a.getDataHashForPrimaryKey(e[s]);if(o){t+=1;var c=O.a.getDataHashForPrimaryKey(o.asset).assetDate;r>c&&(r=c),a<c&&(a=c);var l=A.a.getDataHashForPrimaryKey(o.master).dataClassType;l===E.a.IMAGE.value&&(n+=1),l===E.a.MOVIE.value&&(i+=1)}}return{createDate:Date.now(),endDate:a,startDate:r,assetCount:t,videosCount:i,photosCount:n}},e._generateCKSharingSettings=function(t,n,i,r){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],o=e._generateLoggedInUserIdentity(a),c=[u.a.PUBLIC],l=[d.a.READ_ONLY],p=_.d("CMM.InitiateShare.Title"),g=_.d("CMM.InitiateShare.Subtitle"),m=w.a.RECORD_NAME,v=w.a.SHARE_TYPE,b=e._getShareMetadataFromMediaPKs(s),y=b.assetCount,I=b.videosCount,S=b.photosCount,C=b.startDate,O=b.endDate,A=e._provideBodyForTransport.bind(void 0,t,C,O,y,S,I),E=e._provideSubjectForMail.bind(void 0,t,C,O,y,S,I);return h.a.create({appName:"photos",shareUrlNamespace:"photos",logService:i,loggedInUserIdentity:o,primaryInteractionMode:n,supportedAccess:c,supportedPermissions:l,initiateSharePaneTitle:p,initiateSharePaneSubtitle:g,useAnonymousPublicAccess:!0,shareTitle:t,shareType:v,proposedShareRecordName:m,shouldHideAddParticipantsSummary:!0,hostedByCloudOSOne:a,provideBodyForTransport:A,provideSubjectForMail:E,didUpdateShareRecord:function(e){return e.deleted?r.delete().catch(function(){}):f.a.resolve()},supportsNativeMail:!0})},e._generateLoggedInUserIdentity=function(){var e=void 0;if(arguments.length>0&&void 0!==arguments[0]&&arguments[0]){var t=p.a.authBag.user;e={givenName:t.firstName,familyName:t.lastName,appleId:t.displayablePrimaryAppleId}}else{var n=S.a.defaultInstance.user;e={givenName:n.firstName,familyName:n.lastName,appleId:n.appleId}}return e},e;var t,n,i,r}(),i._provideBodyForTransport=function(e,t,n,i,r,a,s,o){var c,l="string"==typeof e&&e.length>0?"ShareName":"Date",u=j(e,t,n),d=Object(D.g)(i,r,a);V=Object(D.f)("CMM.InitiateShare.Body.From."+l+".");var h="\n"+Object(L.c)(V[d],((c={count:i})[l]=u,c))+":\n"+o;return f.a.resolve(h)},i._provideSubjectForMail=function(e,t,n,i,r,a){var s,o=Object(D.g)(i,r,a),c="string"==typeof e&&e.length>0?"ShareName":"Date",l=j(e,t,n),u=_.d("CMM.InitiateShare.Subject.From."+c+"."+o,((s={})[c]=l,s));return f.a.resolve(u)},r)}).call(this,n(6))},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=n(177).b("CopyStatusValue",{SUBMITTED:"SUBMITTED",INPROGRESS:"INPROGRESS",COMPLETED:"COMPLETED",FAILED:"FAILED",UNKNOWN:"UNKNOWN"})},function(e,t,n){"use strict";n.d(t,"a",function(){return w});var i,r,a=n(1185),s=n(1187),o=n(784),c=n(69),l=n(65),u=n(34),d=n(854),h=n(156),p=n(169),f=n(13),g=n(33),m=n(555),v=n(413),_=n(207),b=(i=a.a,(r=function(e){var t=i.create();try{e(t.resolve.bind(t),t.reject.bind(t))}catch(e){t.reject(e)}return t}).all=i.all.bind(i),r.race=i.race.bind(i),r.resolve=i.resolve.bind(i),r.reject=i.reject.bind(i),r);function y(e){return function(){var t=e.apply(this,arguments);return new b(function(e,n){return function i(r,a){try{var s=t[r](a),o=s.value}catch(e){return void n(e)}if(!s.done)return b.resolve(o).then(function(e){i("next",e)},function(e){i("throw",e)});e(o)}("next")})}}var I=g.a.PredefinedName.MOMENTS,w=h.a.extend({staticMembers:{CK_RECORD_TYPE:"CMMRoot",RECORD_NAME:"cmm-root",_fetchWithXhr:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"blob",n=new XMLHttpRequest,i=a.a.create();return n.open("GET",e,!0),n.responseType=t,s.a(n,"readystatechange",function(){var e=n.readyState,t=n.status;e>=2&&200!==t?i.reject(n):4===e&&200===t&&i.resolve(n)}),n.send(null),i},fetchAndDecodePreviewData:function(e){var t=this;return y(regeneratorRuntime.mark(function n(){var i,r,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t._fetchWithXhr(e,"arraybuffer");case 3:return i=n.sent,r=i.response,a=new Uint8Array(r),n.abrupt("return",m.a.decode(a));case 9:n.prev=9,n.t0=n.catch(0),o.b.debug("CMMRoot: Could not load previewData.");case 12:case"end":return n.stop()}},n,t,[[0,9]])}))()},isShareCompleteEnough:function(e,t){if(!0!==t.isLoaded)return!1;var n=e.assetCount,i=e.createDate,r=Date.now()-i,a=t.medias.length,s=a/n*100;return 100===s||(r<=_.a.incompleteShortTimeThreshold?s>=_.a.incompleteShortPercentThreshold:r<=_.a.incompleteMediumTimeThreshold?s>=_.a.incompleteMediumPercentThreshold:a>=_.a.incompleteLongCountThreshold)},accept:function(e){var t=this;return y(regeneratorRuntime.mark(function n(){var i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=c.b(),t.abrupt("return",i.acceptShortGUID(e));case 2:case"end":return t.stop()}},n,t)}))()},__QUALIFIED_CLASS_NAME__:"CMMRoot"},assetCount:p.e({readOnly:!0,getDataValueFromServiceValue:function(e){if(!(Number.isSafeInteger(e)&&e>0))throw new l.a("assetCount should be an integer greater than 0");return e}}),photosCount:p.e({readOnly:!0,getDataValueFromServiceValue:function(e){if(!Number.isSafeInteger(e))throw new l.a("photosCount is not an integer");return e}}),videosCount:p.e({readOnly:!0,getDataValueFromServiceValue:function(e){if(!Number.isSafeInteger(e))throw new l.a("videosCount is not an integer");return e}}),container:u.b({dependencies:["zone"],get:Object.assign(function(){var e=h.a.getPrimaryKey(this.zone,I);return g.a.find(e)},{__CW__getter:function(e,t,n,i){var r=h.a.getPrimaryKey(i.internalGet(this,t[0+n]),I);return g.a.find(r)}}),readOnly:!0}),createDate:p.e({readOnly:!0}),endDate:p.e({readOnly:!0}),expiryDate:p.e({readOnly:!0}),location:p.i(),previewData:p.c(),share:d.a.toOne({readOnly:!0,strong:!0,type:v.a}),shortGUID:f.c({readOnly:!0}),startDate:p.e({readOnly:!0}),originatingZoneName:p.m({readOnly:!0}),loadPreviewData:function(){var e=this;return y(regeneratorRuntime.mark(function t(){var n,i,r,a,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===(n=e._loadPreviewDataPromise)){t.next=3;break}return t.abrupt("return",n);case 3:if(i=void 0,r=void 0,t.prev=5,a=e.getDataHash(),void 0!==(s=a._previewData)){t.next=14;break}return t.next=11,e._loadPreviewDataPromise=w.fetchAndDecodePreviewData(e.previewData.downloadURL);case 11:t.t0=a._previewData=t.sent,t.next=15;break;case 14:t.t0=s;case 15:i=t.t0,t.next=21;break;case 18:t.prev=18,t.t1=t.catch(5),r=t.t1;case 21:if(e._loadPreviewDataPromise=void 0,void 0===r){t.next=24;break}throw r;case 24:return t.abrupt("return",i);case 25:case"end":return t.stop()}},t,e,[[5,18]])}))()},_loadPreviewDataPromise:void 0,accept:function(){var e=this;return y(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.constructor.accept(e.shortGUID));case 1:case"end":return t.stop()}},t,e)}))()}})},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return u});var i=n(183),r=n(41),a=n(34),s=n(784),o=n(123),c=n(258),l=n(25),u=i.a.extend(c.a,{isCOSKUrl:!0,serviceName:r.c({defaultValue:function(){var e=l.a.get("cloudOSApplication"),t=e.get("primaryServiceName");return t||(t=e.name),this.configureServiceURL(t),t},set:function(e){return this.configureServiceURL(e),e}}),clientIdQueryParamKey:a.b("clientId"),includeDSID:r.c({defaultValue:!0}),init:function(e){var t=arguments;this.__s._$W_$init.apply(this,t),this.setCOSQueryParameters(),this.configureServiceURL()},setCOSQueryParameters:function(){var t=e.__CW_BUILD_INFO;this.setQueryParameter("clientBuildNumber",t.buildNumber),this.setQueryParameter("clientMasteringNumber",t.masteringNumber),this.setQueryParameter(this.get("clientIdQueryParamKey"),l.a.getPath("environment.clientId")),this.includeDSID&&this.setQueryParameter("dsid",l.a.getPath("currentUser.dsid"))},configureServiceURL:function(e){var t=e||this.serviceName;if(t){var n=l.a.getPath("authBag.servicesInfo");if(!n)return s.b.warn("COSK.Network.URL: Missing servicesInfo from COSK.globals.authBag.servicesInfo");var r=l.a.getPath("cloudOSApplication.name"),a=n[t];if(a){var c=a.url;if(c&&o.a(c)){var u=i.a.create(c);this.protocol=u.protocol,this.hostname=u.hostname,this.port=u.port}}else if(t!==r)return s.b.warn("COSK.Network.URL: Invalid URL for service: "+t)}},__superMap:{_$W_$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"URL"}})}).call(this,n(6))},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n(34),r=n(792),a={staticMembers:{measurementInstance:i.b({readOnly:!0,get:function(){var e=this.create(),t=e.element;return t.style.visibility="hidden",document.body.appendChild(t),e}})},naturalSize:i.b({cacheable:!1,readOnly:!0,get:function(){return r.a(this.element)}})}},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=n(177).b("CPLErrorTypes",{INDEXING_STATE_ERROR:"IndexingStateError",NO_ZONES:"NoZones"})},function(e,t,n){"use strict";var i=n(80),r=n(36),a=n(34),s=n(172),o=n(65),c=n(1185),l=n(180),u=n(775),d=n(123),h=n(781),p=n(1177),f=n(784),g=n(1139),m=n(78),v=n(1237),_=n(1126),b=n(110),y=n(1220),I=n(69),w=n(41),S=n(1128),C=n(411),O=n(812).a.extend({blob:null,body:w.c({get:function(){return this.blob}}),staticMembers:{__QUALIFIED_CLASS_NAME__:"ImageDataResponse"}}),A=S.a.extend({transport:w.c({readOnly:!0,get:function(){return E.sharedInstance}}),useCredentialsIfCrossOrigin:!0,staticMembers:{__QUALIFIED_CLASS_NAME__:"ImageDataRequest"}}),E=C.a.extend({prepare:function(){var e=arguments,t=this.__s._$71$prepare.apply(this,e);return t.responseType="blob",t},createResponse:function(e){return O.create({status:e?e.status:0,blob:e?e.response:null,headers:e?e.getAllResponseHeaders():null})},__superMap:{_$71$prepare:"prepare"},staticMembers:{__QUALIFIED_CLASS_NAME__:"ImageDataTransport"}}),T=y.a.extend(r.a,{handlesType:I.a.READ.LOAD,service:w.c(),action:function(e,t){var n=this.service;p.a(n)||o.b("Unable to perform LoadImageOperationHandler action without a service");var i=e.contact;if(!i.photo)return c.a.resolve(i);var r,a=this.createRequest;function s(e){if(200===e.status)return i.imageData=e.blob,i;throw new Error("Bad server response trying to load photo for contact")}return(r=a(i.photo.url),n.processor.enqueue(function(){return r.send()})).then(s).catch(s)},createRequest:function(e){return A.extend(b.a).create({url:e})},staticMembers:{__QUALIFIED_CLASS_NAME__:"LoadImageOperationHandler"}}),M=n(164),D=n(91),L=n(1173),N=i.a.extend({init:function(e){this.message=e,this.__s._$2T$init.call(this)},message:w.c(),__superMap:{_$2T$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"Error"}}),P=N.extend({staticMembers:{__QUALIFIED_CLASS_NAME__:"ServerTokenError"}}),R=N.extend({staticMembers:{__QUALIFIED_CLASS_NAME__:"ServerError"}}),x=y.a.extend(r.a,{handlesType:I.a.READ.LIST,service:w.c(),action:function(e,t){var n=e.locale,i=e.sortOrder,r=e.includePhoneNumbers,a=e.includePhotos,s=this,o=function(){var e=s._lastSyncToken,t=s._lastPrefToken;return null!==s._lastSyncToken&&null!==s._lastPrefToken?s._syncTokenInUse=!0:s._syncTokenInUse=!1,s.createRequest(e,t,i,n,r,a).send()},l=function n(i){if(L.a(i,R))throw new Error("Unexpected server error trying to load contacts data.");if(L.a(i,P))return s._lastSyncToken=null,s._lastPrefToken=null,o().then(s.handleCompletion).then(n);if(i){var r=i.syncToken,a=i.prefToken;return r&&a?(s._lastSyncToken=r,s._lastPrefToken=a):!r&&a?(s._lastSyncToken=null,s._lastPrefToken=null,f.b.error("Autocomplete contacts response error:  no sync token found.")):r&&!a&&(s._lastSyncToken=null,s._lastPrefToken=null,f.b.errror("Autocomplete contacts response error: no prefToken found.")),!s._syncTokenInUse&&s._lastSyncToken&&s._lastPrefToken&&s.service.processor.enqueue(function(){return s.action(e,t)}),c.a.resolve(i.contacts)}},u=s.service;return o().then(s.handleCompletion).then(l).then(function(e){return p.a(e)?u.processContactRecords(e):c.a.resolve()}).catch(s.handleCompletion).then(l)},createRequest:function(e,t,n,i,r,a){var s=i.replace(/(.*)-(.*)$/,function(e,t,n){return t+"_"+n.toUpperCase()}),o=M.a.create({pathname:"/co/addressbook/",serviceName:"contacts",queryObject:{locale:s,order:n.value,includePhoneNumbers:r,includePhotos:a}});return null!==e&&null!==t&&o.setMultipleQueryParameters({syncToken:e,prefToken:t}),D.a.create({url:o,serviceName:"contacts",useCredentialsIfCrossOrigin:!0})},handleCompletion:function(e){var t=e.status,n=100*Math.floor(t/100),i=e.encodedBody;if(200===n){if(i){if(0===i.indexOf("<"))return R.create("Error.Generic");if("not found"===i)return R.create("Error.NotFound");var r=e.body;return r?r.errorValue?R.create(r.errorValue):r:R.create("Error.Generic")}return R.create("No encoded body in response")}switch(t){case 420:case 422:return P.create(i);default:return R.create(i)}},_syncTokenInUse:a.b(null),_lastSyncToken:a.b(null),_lastPrefToken:a.b(null),staticMembers:{__QUALIFIED_CLASS_NAME__:"LoadOperationHandler"}}),F=n(915),k={"０":"0","１":"1","２":"2","３":"3","４":"4","５":"5","６":"6","７":"7","８":"8","９":"9",a:"2",b:"2",c:"2",d:"3",e:"3",f:"3",g:"4",h:"4",i:"4",j:"5",k:"5",l:"5",m:"6",n:"6",o:"6",p:"7",q:"7",r:"7",s:"7",t:"8",u:"8",v:"8",w:"9",x:"9",y:"9",z:"9"},V=i.a.extend(r.a,h.a,{getContactFor:function(e){var t=_.a.find(e,this._store);return p.a(t)&&!p.a(t.service)&&(t.service=this),t},lookUpContactByEmailAddress:function(e){return this.loadAllMetadata().then(function(){var t=this._contactsIndexedByEmailAddress[e];return p.a(t)&&1===t.length?this.getContactFor(t.toArray()[0]):null}.bind(this))},lookUpContactByPhoneNumber:function(e){return this.loadAllMetadata().then(function(){var t=this._contactsIndexedByPhoneNumber[e];return p.a(t)&&1===t.length?this.getContactFor(t.toArray()[0]):null}.bind(this))},loadMetadataFor:function(e){var t=this.getContactFor(e);return this.loadAllMetadata().then(function(){return t})},loadImageDataFor:function(e){var t=this,n=_.a.STATES,i=this.getContactFor(e);if(this.getStateFor(e).value>=n.IMAGE_DATA_LOADING.value)return this._imageDataLoadingPromises[e];this.setImageLoadingFor(e);var r=this,a=this.processor.enqueue(function(){return t.loadImageOperationHandler.action({contact:i})}).then(function(){r.setImageLoadedFor(e)}).catch(function(e){f.b.warn("Unable to load image data for contactId: "+i.contactId,e)});return this._imageDataLoadingPromises[e]=a,a},loadAllMetadata:function(){var e=this;return p.a(this._metadataPromise)||(this._metadataPromise=this.processor.enqueue(function(){return e.loadOperationHandler.action({locale:s.c(),sortOrder:e._sortOrder,includePhoneNumbers:!0,includePhotos:!0})})),this._metadataPromise.catch(function(e){f.b.warn("Unable to load contacts metadata.",e)})},getStateFor:function(e){var t=this._imageLoadingStates[e],n=this._isMetadataLoaded;return n||e===this._meCardId?!n&&e!==this._meCardId||p.a(t)?p.a(t)?t:null:_.a.STATES.META_DATA_LOADED:_.a.STATES.NOT_LOADED},setImageLoadingFor:function(e){var t=_.a.STATES;this.getStateFor(e).value<t.META_DATA_LOADED.value&&o.b("Unable to set image to loading state without loading metadata for contactId=%{id}",{id:e}),this._imageLoadingStates[e]=t.IMAGE_DATA_LOADING},setImageLoadedFor:function(e){var t=_.a.STATES;this.getStateFor(e).value<t.IMAGE_DATA_LOADING.value&&o.b("Unable to set image to loaded state without loading metadata for contactId=%{id}",{id:e}),this._imageLoadingStates[e]=t.IMAGE_DATA_LOADED},processContactRecords:function(e){for(var t=0,n=(e=e.filter(function(e){var t=e.emailAddresses,n=e.phones;return t&&Array.isArray(t)||n&&Array.isArray(n)})).length;t<n;t++){var i=e[t],r=i.emailAddresses,a=i.phones;r&&(i.emailAddresses=r.filter(function(e){return p.a(e.field)})),a&&(i.phones=a.filter(function(e){return p.a(e.field)}))}return this.loadData(e)},loadData:function(e){return c.a.invokeFunction(function(){this._isMetadataLoaded=!0;for(var t=this._store,n=0,i=e.length;n<i;n++){var r=e[n],a=r.contactId,s=r.emailAddresses,o=r.phones,c=this;s&&s.forEach(function(e){var t=e.field,n=c._contactsIndexedByEmailAddress,i=n[t];p.a(i)?i.add(a):n[t]=g.a.create([a])}),o&&o.forEach(function(e){var t,n=(t=(t=((t=e.field)||"").toLowerCase()).replace(/./g,function(e){return k[e]||e}))&&t.replace(/[^0-9+]/g,""),i=c._contactsIndexedByPhoneNumber,r=i[n];p.a(r)?r.add(a):i[n]=g.a.create([a])});var l=m.a.getStoreIdForPrimaryKey(_.a,a);t.hasDataFor(l)||t.writeData(l,r)}}.bind(this))},loadMeCard:function(e){var t=this._meCardId;e.contactId=t;var n=this._store,i=m.a.getStoreIdForPrimaryKey(_.a,t);n.writeData(i,e)},getMeCard:function(){var e=this._meCardId,t=this.getContactFor(e);return p.a(t)?t:(this._store.writeData(e,{}),this.getContactFor(e))},loadOperationHandler:a.b({defaultValue:function(){return x.create({service:this})}}),loadImageOperationHandler:a.b({defaultValue:function(){return T.create({service:this})}}),processor:l.b(v.a),_store:l.b(m.a),_contactsIndexedByEmailAddress:l.b(g.a),_contactsIndexedByPhoneNumber:l.b(g.a),_imageLoadingStates:l.b(Object),_imageDataLoadingPromises:l.b(Object),_metadataPromise:null,_isMetadataLoaded:a.b(!1),_sortOrder:a.b({readOnly:!0,get:function(){return Object(F.a)()}}),_meCardId:"MECARD",staticMembers:{__QUALIFIED_CLASS_NAME__:"ContactsService"}}),j=n(10),B=n(100),U=n(9),W=n(7);n(21),n.d(t,"a",function(){return Q});var G=B.a.MOUSE,H=[U.a.READ_WRITE,U.a.READ_ONLY],$=[j.a.PRIVATE,j.a.PUBLIC],z=[W.a.COPY_LINK],K={keynote:"Keynote",notes:"Notes",numbers:"Numbers",pages:"Pages",iclouddrive:"Drive",share:"CloudKit",photos:"Photos"},Q=i.a.extend(r.a,{staticMembers:{fromJSON:function(e){return function(e){var t=this.create();return u.a(e)&&(q.forEach(function(n){void 0!==e[n]&&(t[n]=e[n])}),Y.forEach(function(n){d.a(e[n])&&(t[n]=e[n])})),t}.call(this,e)},__QUALIFIED_CLASS_NAME__:"Settings"},appName:a.b(),addParticipantsPaneTitle:a.b({defaultValue:s.d("CKSharing.AddParticipants.Title.AddPeople")}),initiateSharePaneTitle:a.b({defaultValue:s.d("CKSharing.InitiateShare.Title")}),initiateSharePaneSubtitle:a.b({defaultValue:null}),shouldHideAddParticipantsSummary:a.b(!1),manageSharePaneTitle:a.b({defaultValue:s.d("CKSharing.ManageShare.Title")}),recordHasShare:a.b(!1),useAnonymousPublicAccess:a.b(!1),sendLinkPaneTitle:a.b({defaultValue:s.d("CKSharing.AddParticipants.Title.SendLink")}),shareUrlNamespace:a.b("share"),shareItemType:a.b({readOnly:!0,dependencies:["shareUrlNamespace"],get:Object.assign(function(){var e=this.shareUrlNamespace,t=K[e];return void 0===t&&o.b("Unknown shareUrlNamespace %{type}",{type:e}),t},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=K[r];return void 0===a&&o.b("Unknown shareUrlNamespace %{type}",{type:r}),a}})}),CustomLoadMembershipInfoHandlerClass:a.b(),CustomAutocompleteDataSourceClass:a.b(),additionalButtonTitle:a.b(),additionalButtonWasPressed:null,canonicalizePhoneNumberRequestGenerationFunction:null,contactsService:a.b(V.sharedInstance),defaultAccess:a.b({readOnly:!0,dependencies:["supportedAccess"],get:Object.assign(function(e){return e||this.supportedAccess[0]},{__CW__getter:function(e,t,n,i){return e||i.internalGet(this,t[0+n])[0]}})}),defaultPermission:a.b({readOnly:!0,dependencies:["supportedPermissions"],get:Object.assign(function(e){return e||this.supportedPermissions[0]},{__CW__getter:function(e,t,n,i){return e||i.internalGet(this,t[0+n])[0]}})}),logService:a.b(),loggedInUserIdentity:a.b(),notificationService:a.b(),didUpdateRootRecord:null,provideBodyForTransport:function(e,t){return c.a.resolve(void 0)},provideSubjectForMail:function(){return c.a.resolve(void 0)},provideLatestRootRecordAfterUpdateConflict:null,shareRecordFields:a.b(l.b(Object)),proposedShareRecordName:a.b(),shareThumbnail:a.b({didChange:function(e){e&&(this.shareRecordFields["cloudkit.thumbnailImageData"]={value:e})}}),maxNumberOfInvitees:a.b(100),shareTitle:a.b({get:function(e){return e},set:function(e){if(e){var t={Pages:"pages",Numbers:"numbers",Keynote:"key"}[this.shareItemType];if(t){var n=RegExp("\\."+t+"$","g");e=e.replace(n,""),this.shareType=t}return e}},didChange:function(e){e&&(this.shareRecordFields["cloudkit.title"]={value:e})}}),shareType:a.b({didChange:function(e){e&&(this.shareRecordFields["cloudkit.type"]={value:e})}}),shareUrl:a.b(),shareUrlDescription:a.b(),sharingUIIsReady:null,supportedAccess:a.b({defaultValue:l.b($)}),supportedPermissions:a.b({defaultValue:l.b(H)}),supportedTransports:a.b({defaultValue:l.b(z)}),supportsSchoolwork:a.b(!1),supportsNativeMail:a.b(!1),isAuthenticated:a.b(!0),hostedByCloudOSOne:a.b(!0),willUpdateShareRecord:null,didUpdateShareRecord:null,primaryInteractionMode:a.b(G),supportsAccess:function(e){return this.supportedAccess&&-1!==this.supportedAccess.indexOf(e)},supportsPermission:function(e){return this.supportedPermissions&&-1!==this.supportedPermissions.indexOf(e)},supportsTransport:function(e){return this.supportedTransports&&-1!==this.supportedTransports.indexOf(e)}}),q=["supportedAccess","supportedPermissions","sharingUIIsReady","additionalButtonWasPressed","recordHasShare","shareRecordFields","provideRootRecordForUpdate","provideLatestRootRecordAfterUpdateConflict","didUpdateRootRecord","willUpdateShareRecord","didUpdateShareRecord","provideBodyForTransport","supportsSchoolwork","provideSubjectForMail"],Y=["appName","additionalButtonTitle","shareUrl","shareUrlNamespace","shareUrlDescription","primaryInteractionMode","shareTitle","shareType","shareThumbnail"]},function(e,t,n){"use strict";var i=n(87),r=n(69),a=n(1275),s=n(1178),o=n(34),c=n(93),l=n(404),u=n(106),d=n(92),h={mixinDependencies:[{staticMembers:{storeItemDidChange:n(1169).a},init:function(e,t,n){var i=arguments;if(this.__s._$FQ$init.apply(this,i),void 0===n){var r=this._cwStoreId;"number"==typeof r&&this.constructor.storeItemDidChange(r,!1)}},__superMap:{_$FQ$init:"init"}}],staticMembers:{allModels:o.b({readOnly:!0,get:function(){var e=r.b();return d.a.create([],this,e)}}),storeItemDidChange:function(e,t){var n=this.allModels,i=n._array.indexOf(e);t?i>=0&&n.encodedSplice(i,1):-1===i?n.encodedPush(e):n.encodedSetIndex(i,e)},findAll:function(){return this.allModels}}},p=n(112),f=n(13),g=n(162);n.d(t,"a",function(){return b});var m,v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_=((m={})[g.a.UNKNOWN.value]=l.b.NOT_STARTED,m[g.a.SUBMITTED.value]=l.b.PREPARING,m[g.a.INPROGRESS.value]=l.b.IN_PROGRESS,m[g.a.COMPLETED.value]=l.b.COMPLETED,m[g.a.FAILED.value]=l.b.FAILED,m),b=i.a.extend({mixinDependencies:[u.a,h,p.a,l.a],staticMembers:{beginNewJob:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=r.b(),s=v({},e,{jobID:"temporaryJobID-"+a.a(),status:g.a.UNKNOWN.value});i.loadData(this,s,!1);var o=this.find(s.jobID);return o.workflowSource=n,o.startTimer=Date.now(),this.performOperation(r.a.WRITE.CREATE,v({},e,{_temporaryJobID:o.jobID,workflowSource:o.workflowSource,_knownMediasCount:t})),o},pollInstances:function(e){var t=this;e.forEach(function(e){return t.load([e.jobID],!0)})},__QUALIFIED_CLASS_NAME__:"RecordCopierJob"},sourceZoneID:i.c({readOnly:!0,type:Object}),targetZoneID:i.c({readOnly:!0,type:Object}),sourceShareName:i.c({readOnly:!0,type:String}),targetRootName:i.c({readOnly:!0,type:String}),includeRecords:i.c({readOnly:!0,type:Array,decode:s.a}),excludeRecords:i.c({readOnly:!0,type:Array,decode:s.a}),jobID:Object(f.c)({isPrimaryKey:!0,readOnly:!0,type:String}),itemsProcessed:Object(f.c)({readOnly:!0,type:Number}),_itemsTotalEstimate:Object(f.c)({readOnly:!0,type:Number,dataKey:"itemsTotalEstimate"}),itemsTotalEstimate:o.b({readOnly:!0,dependencies:["_itemsTotalEstimate"],get:Object.assign(function(){return this.__savedItemsTotalEstimate=this._itemsTotalEstimate||this.__savedItemsTotalEstimate},{__CW__getter:function(e,t,n,i){return this.__savedItemsTotalEstimate=i.internalGet(this,t[0+n])||this.__savedItemsTotalEstimate}})}),status:Object(f.c)({readOnly:!0,type:g.a,defaultValue:g.a.UNKNOWN,decode:function(e,t){return t.items.find(function(t){return t.value===e})}}),reason:Object(f.c)({readOnly:!0,type:String}),serverErrorCode:Object(f.c)({readOnly:!0,type:String}),jobProgress:o.b({readOnly:!0,dependencies:["jobStatus","itemsProcessed","itemsTotalEstimate"],get:Object.assign(function(){var e=this.jobStatus;return e===l.b.NOT_STARTED?0:e===l.b.PREPARING?0:e===l.b.IN_PROGRESS?(this.timeToProgress||this.setAndReportTimeToProgress(),Math.max(0,Math.min(1,this.itemsProcessed/this.itemsTotalEstimate*.95))):e!==l.b.FAILED?e===l.b.COMPLETED?(this.timeToProgress||this.setAndReportTimeToProgress(),this.reportFeedback("assetCopierSuccess",{countOfStatusCalls:this.countOfStatusCalls,workflowSource:this.workflowSource}),1):void 0:void this.reportFeedback("assetCopierFailed",{countOfStatusCalls:this.countOfStatusCalls,copyFailReason:this.reason,copyFailServerErrorCode:this.serverErrorCode,workflowSource:this.workflowSource})},{__CW__getter:function(e,t,n,i){var r=this.jobStatus;return r===l.b.NOT_STARTED?0:r===l.b.PREPARING?0:r===l.b.IN_PROGRESS?(this.timeToProgress||this.setAndReportTimeToProgress(),Math.max(0,Math.min(1,i.internalGet(this,t[1+n])/i.internalGet(this,t[2+n])*.95))):r!==l.b.FAILED?r===l.b.COMPLETED?(this.timeToProgress||this.setAndReportTimeToProgress(),this.reportFeedback("assetCopierSuccess",{countOfStatusCalls:this.countOfStatusCalls,workflowSource:this.workflowSource}),1):void 0:void this.reportFeedback("assetCopierFailed",{countOfStatusCalls:this.countOfStatusCalls,copyFailReason:this.reason,copyFailServerErrorCode:this.serverErrorCode,workflowSource:this.workflowSource})}})}),jobStatus:o.b({readOnly:!0,dependencies:["status"],get:Object.assign(function(){return _[this.status.value]},{__CW__getter:function(e,t,n,i){return _[i.internalGet(this,t[0+n]).value]}})}),jobSize:o.b(c.c("itemsTotalEstimate")),countOfStatusCalls:o.b(0),countOfFailedStatusCalls:o.b(0),workflowSource:o.b(""),startTimer:o.b(),timeToProgress:o.b(),includesRecordName:function(e){var t=this.includeRecords,n=this.excludeRecords;return Array.isArray(t)&&t.includes(e)||Array.isArray(n)&&!n.includes(e)},reportFeedback:function(e,t){var n=r.b().feedbackService;n&&n.report&&n.report(e,t)},setAndReportTimeToProgress:function(){this.timeToProgress=Date.now(),this.reportFeedback("assetCopierTimeToProgress",{duration:this.timeToProgress-this.startTimer,workflowSource:this.workflowSource})}})},function(e,t,n){"use strict";var i=n(1214),r=n(13),a=n(784),s=n(850),o=n(1216),c=n(1215),l=new DOMParser,u=!1;var d=n(87),h=d.a.extend({fileChecksum:d.c({readOnly:!0}),size:d.c({readOnly:!0}),referenceChecksum:d.c({readOnly:!0}),wrappingKey:d.c({readOnly:!0}),downloadURL:d.c({readOnly:!0}),staticMembers:{__QUALIFIED_CLASS_NAME__:"Asset"}});n.d(t,"d",function(){return p}),n.d(t,"a",function(){return v}),n.d(t,"e",function(){return _}),n.d(t,"c",function(){return y}),n.d(t,"f",function(){return w}),n.d(t,"b",function(){return C}),n.d(t,"j",function(){return O}),n.d(t,"m",function(){return E}),n.d(t,"l",function(){return M}),n.d(t,"i",function(){return L}),n.d(t,"k",function(){return P}),n.d(t,"h",function(){return x}),n.d(t,"g",function(){return F});var p=function(e,t){var n=e.fields[t];return n instanceof Object?n.value:void 0},f=function(e,t,n){if(void 0!==n){var i=e.fields[t];return(void 0===i?e.fields[t]={}:i).value=n}},g=function(e){if("string"==typeof e)try{return decodeURIComponent(escape(atob(e)))}catch(t){return atob(e)}},m=function(e){if("string"==typeof e)try{return btoa(unescape(encodeURIComponent(e)))}catch(t){return btoa(e)}},v=r.a.extend({serviceValueGetter:p,serviceValueSetter:f,staticMembers:{__QUALIFIED_CLASS_NAME__:"CKModelProperty"}});function _(e){return v.create(e)}var b=r.b.extend({serviceValueGetter:p,serviceValueSetter:f,staticMembers:{__QUALIFIED_CLASS_NAME__:"CKToOneRelationshipProperty"}}).extend({type:h,embedded:!0,getServiceValueFromDataValue:function(e){return e instanceof Object&&void 0!==e.dataToUpload?e.dataToUpload:e},staticMembers:{__QUALIFIED_CLASS_NAME__:"CKAssetModelProperty"}});function y(e){return b.create(e)}var I=r.a.extend({serviceValueGetter:function(e){return e.zoneID},serviceValueSetter:function(e,t,n){return e.zoneID=n},staticMembers:{__QUALIFIED_CLASS_NAME__:"CKModelZoneIDProperty"}});function w(e){return I.create(e)}var S=v.extend({getDataValueFromServiceValue:function(e){return 1===e},getServiceValueFromDataValue:function(e){return e?1:0},staticMembers:{__QUALIFIED_CLASS_NAME__:"BoolFromIntCKModelProperty"}});function C(e){return S.create(e)}function O(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(e){return v.extend({type:e,decode:function(e,t){return t.items.find(function(t){return t.value===e})}})}(e).create(t)}var A=v.extend({getDataValueFromServiceValue:g,getServiceValueFromDataValue:m,staticMembers:{__QUALIFIED_CLASS_NAME__:"StringFromEncryptedCKModelProperty"}}),E=function(e){return A.create(e)},T=v.extend({decode:g,encode:m,staticMembers:{__QUALIFIED_CLASS_NAME__:"LazyStringFromEncryptedCKModelProperty"}}),M=function(e){return T.create(e)},D=v.extend({getDataValueFromServiceValue:function(e){if("string"==typeof e)return function(e){if(s.a(e)){u||(s.f(a.b),u=!0);var t=c.b.resetWithString(e);return o.a(t)}return function(e){if(e){for(var t=e.firstChild;t&&1!==t.nodeType;)t=t.nextSibling;if(null!==t){var n=t.firstElementChild;if(null!==n){for(var i={},r=n.firstElementChild;null!==r;r=r.nextElementSibling)if("key"===r.nodeName){var a=r.nextElementSibling;a&&(i[r.textContent]=a.textContent)}return i}}}}(function(e){if("string"==typeof e){var t=void 0;try{(t=l.parseFromString(e,"application/xml"))&&t.firstChild&&!t.getElementsByTagName("parsererror")[0]||(t=void 0)}catch(e){t=void 0}return t}}(e))}(g(e))},readOnly:!0,staticMembers:{__QUALIFIED_CLASS_NAME__:"DecodedPListFromEncryptedCKModelProperty"}}),L=function(e){return D.create(e)},N=v.extend({getDataValueFromServiceValue:g,decode:i.a.read,readOnly:!0,staticMembers:{__QUALIFIED_CLASS_NAME__:"ExifFromEncryptedCKModelProperty"}}),P=function(e){return N.create(e)},R=v.extend({serviceSubKey:void 0,serviceValueGetter:function(e,t){var n=p(e,t);return n&&n[this.serviceSubKey]},serviceValueSetter:void 0,readOnly:!0,staticMembers:{__QUALIFIED_CLASS_NAME__:"CKSubModelProperty"}}),x=function(e){return R.create(e)};function F(e,t,n){var i={};for(var r in t)if(t.hasOwnProperty(r)){var a=t[r],s=Object.assign({serviceKey:e,serviceSubKey:a},n),o=x(s);i[r]=o}return i}},function(e,t,n){"use strict";var i=n(87),r=i.a.extend({token:i.c({type:String,readOnly:!0}),tokenTTL:i.c({type:Number,readOnly:!0}),databasePartition:i.c({type:String,readOnly:!0}),lastUpdatedTime:i.c({type:Number,readOnly:!0}),updateToken:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now(),n=this.getDataHash();n.token=e,n.lastUpdatedTime=t},staticMembers:{__QUALIFIED_CLASS_NAME__:"AnonymousPublicAccess"}}),a=n(13),s=n(169),o=n(107),c=n(106),l=n(112),u=n(153);n.d(t,"a",function(){return d});var d=i.a.extend({mixinDependencies:[c.a,l.a,u.a],staticMembers:{findAllByZonePK:function(e){return this.findAll().filter(function(t){return t.zonePK===e})},findByZonePK:function(e){var t=this.findAllByZonePK(e);if(t.length>0)return t.objectAt(0)},getDataValuesFromServiceValues:function(){var e=arguments,t=this.__s._$Ys$getDataValuesFromServiceValues.apply(this,e);void 0===t.zonePK&&(t.zonePK=o.a.getZoneIdString(t.zoneID));var n=t.anonymousPublicAccess;return void 0!==n&&void 0===n.lastUpdatedTime&&(n.lastUpdatedTime=Date.now()),t},__superMap:{_$Ys$getDataValuesFromServiceValues:"getDataValuesFromServiceValues"},__QUALIFIED_CLASS_NAME__:"RecordInfo"},shortGUID:Object(a.c)({isPrimaryKey:!0,type:String,getDataValueFromServiceValue:function(e){return e.value}}),containerIdentifier:Object(a.c)({type:String}),databaseScope:Object(a.c)({type:String}),anonymousPublicAccess:Object(a.d)({type:r,embedded:!0}),rootRecord:Object(a.c)(),share:Object(a.c)(),environment:Object(a.c)(),zoneID:Object(s.f)({readOnly:!0,type:o.a}),zonePK:i.c({readOnly:!0,type:String})})},function(e,t,n){"use strict";var i=n(119),r=n(87),a=n(854),s=n(34),o=n(36),c=n(227),l=n(79),u=n(1238),d=n(943);function h(e,t){var n,r;if(e||t)return!(e&&!p(n=e.trim().charAt(0).toUpperCase()))&&(!(t&&!p(r=t.trim().charAt(0).toUpperCase()))&&i.a({givenName:n,familyName:r}).replace(/\s+/g,""))}function p(e){return!u.a(e)&&(t=e,/^[a-zA-Z]*$/g.test(d.b(t)));var t}n.d(t,"a",function(){return f});var f=r.a.extend({type:r.c({type:String}),permission:r.c(),acceptanceStatus:r.c(),isOrgUser:r.c({dataKey:"orgUser"}),userIdentity:a.a.toOne({type:l.a,embedded:!0}),isOwner:s.b({readOnly:!0,dependencies:["type"],get:Object.assign(function(){return this.type===c.a.OWNER},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])===c.a.OWNER}})}),displayName:s.b({readOnly:!0,dependencies:["addressBookContact.firstName","addressBookContact.lastName","userIdentity","userIdentity.givenName","userIdentity.familyName","userIdentity.emailAddress","userIdentity.phoneNumber","userIdentity.formattedPhoneNumber","isMe","isOwner"],get:Object.assign(function(){var e,t,n=this.addressBookContact;n&&(e=n.firstName,t=n.lastName);var r=this.userIdentity;return(!e||!t||this.isMe&&this.isOwner)&&(e=r.givenName,t=r.familyName),i.a({givenName:e,familyName:t,emailAddress:r.emailAddress,phoneNumber:r.formattedPhoneNumber})},{__CW__getter:function(e,t,n,r){var a,s,o=this.addressBookContact;o&&(a=o.firstName,s=o.lastName);var c=r.internalGet(this,t[2+n]);return(!a||!s||r.internalGet(this,t[8+n])&&r.internalGet(this,t[9+n]))&&(a=c.givenName,s=c.familyName),i.a({givenName:a,familyName:s,emailAddress:c.emailAddress,phoneNumber:c.formattedPhoneNumber})}})}),displayNameIsPhoneNumber:s.b({readOnly:!0,dependencies:["displayName","userIdentity.formattedPhoneNumber"],get:Object.assign(function(){return this.displayName===this.getPath("userIdentity.formattedPhoneNumber")},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])===i.internalGetPath(this,t[1+n])}})}),displayNameInitials:s.b({readOnly:!0,dependencies:["addressBookContact.firstName","addressBookContact.lastName","userIdentity.givenName","userIdentity.familyName"],get:Object.assign(function(){var e=this.getPath("addressBookContact.firstName"),t=this.getPath("addressBookContact.lastName");return e&&t||(e=this.getPath("userIdentity.givenName"),t=this.getPath("userIdentity.familyName")),h(e,t)},{__CW__getter:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]),a=i.internalGetPath(this,t[1+n]);return r&&a||(r=i.internalGetPath(this,t[2+n]),a=i.internalGetPath(this,t[3+n])),h(r,a)}})}),isMe:s.b({readOnly:!0,dependencies:["userIdentity.isCurrentlyLoggedInUser"],get:Object.assign(function(){return this.getPath("userIdentity.isCurrentlyLoggedInUser")},{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])}})}),addressBookContact:s.b(),addressBookContactDidChange:o.f("addressBookContact",function(e){e&&e.loadImageData()}),loadAddressBookContact:function(e){var t=this,n=this.isMe,i=this.getPath("userIdentity.emailAddress"),r=this.getPath("userIdentity.phoneNumber");n?this.addressBookContact=e.getMeCard():i?e.lookUpContactByEmailAddress(i).then(function(e){return t.addressBookContact=e}):r&&e.lookUpContactByPhoneNumber(r).then(function(e){return t.addressBookContact=e})},additionalParticipantInfo:s.b(),staticMembers:{__QUALIFIED_CLASS_NAME__:"Participant"}})},function(e,t,n){"use strict";n.d(t,"a",function(){return l}),n.d(t,"b",function(){return d}),n.d(t,"d",function(){return h}),n.d(t,"c",function(){return p});var i,r=n(80),a=n(781),s=n(36),o=n(34),c=n(173),l=r.a.extend(s.a,a.a,{DEFAULT_LOCALE:"en-us",_locales:{},_rtlLocales:["ar-sa","iw-il"],getRegistryFor:function(e){var t=this._locales[e]&&this._locales[e];return t||(t=this._locales[e]={}),t},addValuesFor:function(e,t){for(var n=this.getRegistryFor(e),i=Object.keys(t),r=0,a=i.length;r<a;r++){var s=i[r];n[s]=t[s]}},locale:Object(o.b)("en-us"),isRTL:Object(o.b)({readOnly:!0,dependencies:["locale"],get:Object.assign(function(){var e=this.locale;return u._rtlLocales.indexOf(e)>-1},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return u._rtlLocales.indexOf(r)>-1}})}),getValue:function(e,t){var n=this._getValue(e,t);return n?t?Object(c.a)(n,t):n:e},hasValue:function(e){return!!this._getValue(e)},_getValue:function(e,t){var n=this.locale,i=this.getRegistryFor(n),r=i[e];if(!r)for(var a=n.split(/-|_/),s=0,o=a.length;s<o+1;s++){a.pop();var c=a.join("-");if(r=(i=this.getRegistryFor(c))[e])break}if(!r){var l=this.getRegistryFor(this.DEFAULT_LOCALE),u=this.DEFAULT_LOCALE.split(/-|_/)[0],d=this.getRegistryFor(u);r=l[e]||d[e]}return r},staticMembers:{__QUALIFIED_CLASS_NAME__:"Locale"}}),u=l.sharedInstance,d=function(e,t){return u.addValuesFor(e,t)},h=function(e,t){return u.getValue(e,t)},p=function(){return u.locale};window.__CW_BUILD_INFO&&(i=window.__CW_BUILD_INFO.locale,u.locale=i)},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=/\s/g;function r(e,t){return e.replace(/%\{(.*?)\}/g,function(n,r){if(!t)throw new Error('Cannot use named parameters with `fmt` without a data object. String: "'+e+'"');return function(e,t,n){var r=void 0,a=void 0,s=void 0,o=(e=e.replace(i,"")).indexOf(":");if(o>-1&&(r=e.substr(o+1),e=e.substr(0,o)),a=t[e],s=t[e+"Formatter"])a=s(a,r);else if(r)throw new Error("fmt() was given a formatting string, but key '"+e+"' has no formatter for the string: \""+n+'"');return a&&a.toString?a.toString():a}(r,t,e)})}},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n(774),r=[];function a(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=0),r.length=0,Object(i.a)(r,e,t,n)}},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n(49),r=n(54),a=n(32),s={mixinDependencies:[i.a],clone:Object(a.c)(r.a)}},function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"c",function(){return a}),n.d(t,"b",function(){return s}),n.d(t,"f",function(){return o}),n.d(t,"e",function(){return c}),n.d(t,"d",function(){return l}),n.d(t,"g",function(){return u}),n.d(t,"h",function(){return d});var i=n(68),r="strong",a="weak",s="unsafe";function o(e,t,n){e&&e!==t&&e.retain&&e.retain(t,n)}function c(e,t,n){e&&e!==t&&e.release&&e.release(t,n)}function l(e,t,n){e&&e!==t&&e.autorelease&&e.autorelease(t,n)}function u(e,t,n,r){return e&&e.registerWeakReference?e.registerWeakReference(t,n,r):i.b}function d(e,t){t!==i.b&&e&&e.deregisterWeakReference&&e.deregisterWeakReference(t)}},function(e,t,n){"use strict";n.d(t,"a",function(){return l}),n.d(t,"b",function(){return d});var i=n(1174),r=n(775),a=n(111),s=n(65),o=n(68),c=n(178),l=o.a.extend({items:null,name:null,id:null,init:function(e){this.__s._$Sk$init.call(this,e),this.items=[],this.id=u,u++},toStaticMixin:function(){var e={};return this.items.forEach(function(t){t.level||(e[t.name]=t)}),{staticMembers:e}},getItemForValue:function(e){return this.items.find(function(t){return t.value===e})||null},toString:function(){return"[CW.Enum.Group: "+this.name+"]"},retain:function(){return this},release:function(){return this},autorelease:function(){return this},__superMap:{_$Sk$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"EnumGroup"}}),u=1;function d(e,t){var n,o,u,d=l.create({name:e}),h=d.items;if(Object(i.a)(t))t(function e(t,n){var i=1;return function(r,a){var s=null;n?(s=n.createSubitem(r),n.items.push(s)):s=c.a.create({name:r,value:i,parent:null,level:0,group:t});var o=s.fullName.replace(/\./g,"");(t.items.push(s),t[o]=s,n&&(n[r]=s),i+=1,a)&&a(e(t,s));return s}}(d,null));else if(Object(r.a)(t))for(var p in t)n=c.a.create({name:p,value:t[p],group:d}),h.push(n),d[p]=n;else if(Object(a.a)(t))for(o=0,u=t.length;o<u;o++){var f=t[o];n=c.a.create({name:f,value:o,group:d}),h.push(n),d[f]=n}else Object(s.b)("Cannot create enum group. Invalid value",{name:e,obj:t});return d}},function(e,t,n){"use strict";n.d(t,"a",function(){return s}),n.d(t,"b",function(){return o});var i=n(65),r=[4278190080,4294901760,4294967040,4294967280,4294967295],a=[24,16,8,4,0],s=n(68).a.extend({name:null,value:null,level:null,parent:null,group:null,fullValue:null,fullName:null,hasLevel:!1,retain:function(){return this},release:function(){return this},autorelease:function(){return this},init:function(e){this.__s._$17P$init.call(this,e);var t=this.name,n=this.value,r=this.parent,s=this.level,o=(this.hasLevel="number"==typeof this.level)?n<<a[s]:null;r&&!r.hasLevel&&Object(i.b)(this+" Cannot init. parent does not have an assigned level"),this.items=[],this._flags={},this.fullValue=r?r.fullValue+o:o,this.fullName=r?r.fullName+"."+t:t,this._nextSubitemValue=0},flagAs:function(){for(var e=arguments.length,t=this._flags,n=0;n<e;n++)t[arguments[n]]=!0;return this},flagged:function(e){return!!this._flags[e]},equals:function(e){return this.group===e.group&&e.fullValue===this.fullValue},subitemOf:function(e){return this.level>e.level&&this.group===e.group&&(this.fullValue&r[e.level])===e.fullValue},superitemOf:function(e){return this.level<e.level&&this.group===e.group&&(e.fullValue&r[this.level])===this.fullValue},contains:function(e){return this.equals(e)||e.subitemOf(this)},createSubitem:function(e){return s.create({name:e,value:this._getNextSubitemValue(),parent:this,level:this.level+1,group:this.group})},toString:function(){return this._toString(!1)},toJSON:function(){return""+this},toStringFull:function(){return this._toString(!0)},_toString:function(e){var t,n,i=this.group,r=i?i.name:"CW.Enum.Item",a=e||!i?" <"+(t=this.fullValue,(n=t.toString(16).toUpperCase()).length%2!=0&&(n="0"+n),n.match(/\d\d/g).join(" "))+">":"";return"["+r+": "+this.fullName+a+"]"},_getNextSubitemValue:function(){return this._nextSubitemValue++,this._nextSubitemValue},__superMap:{_$17P$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"EnumItem"}});function o(e,t){return s.create({name:e,value:t,level:0})}s.prototype.substateOf=s.prototype.subitemOf,s.prototype.superstateOf=s.prototype.superitemOf},function(e,t,n){"use strict";function i(e){return"number"==typeof e}n.d(t,"a",function(){return i})},function(e,t,n){"use strict";n.d(t,"b",function(){return g}),n.d(t,"a",function(){return m});var i=n(1174),r=n(775),a=n(65),s=n(1177),o=n(1179),c=n(32),l=n(181),u=n(251),d=c.a.extend({instantiate:null,init:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var r=n[0];e===Array?e=r||[]:e===Object&&(e=r||{}),this.value=e,this.configs=n,this.__s._$1PX$init.call(this)},wasRegistered:function(e,t){var n=this.value;Object(l.a)(n)?this.instantiate=h:Object(i.a)(n)?this.instantiate=p:Array.isArray(n)||Object(r.a)(n)?this.instantiate=f:Object(a.b)("Error on key '%{key}': CW.instance may only instantiate CW classes, JavaScript constructors, and arrays.",{key:t,object:e,type:n})},configs:null,requiresSupport:m,isOnlyMetadataForKey:!1,allowedOnClass:!0,allowAtCreate:!0,__superMap:{_$1PX$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"Instance"}}),h=function(e,t,n){if(!Object(s.a)(t))return t;if(Object(u.a)(t))return t;var i,a;Object(r.a)(t)||Array.isArray(t)?(i=this.value,a=[t]):(i=t,a=this.configs);var o=i.create.apply(i,a);return o.owner=o.owner||n,o},p=function(e,t,n){if(!Object(i.a)(t))return t;var r=t;return new(Function.prototype.bind.apply(r,[null].concat(this.configs)))},f=function(e,t,n){return Object(o.a)(t)};function g(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return d.define.apply(d,[e].concat(n))}var m={mixinDependencies:[c.b],staticMembers:{initializeInstance:function(){var e=this.getMetadataByType(d);for(var t in e){var n,i=e[t];n=this.hasOwnProperty(t)?this[t]:i.value,this[t]=i.instantiate(t,n,this)}this.__s._$2f1$initializeInstance.call(this)},__superMap:{_$2f1$initializeInstance:"initializeInstance"}},initializeInstance:function(){var e=this.getMetadataByType(d);for(var t in e){var n=e[t],i=this[t];this[t]=n.instantiate(t,i,this)}this.__s._$2lZ$initializeInstance.call(this)},__superMap:{_$2lZ$initializeInstance:"initializeInstance"}}},function(e,t,n){"use strict";function i(e){return!(!e||!e.isClass)}n.d(t,"a",function(){return i})},function(e,t,n){"use strict";n.d(t,"b",function(){return s}),n.d(t,"a",function(){return o});var i=n(111),r=n(775),a=n(777),s=function(e,t){var n=e,s=void 0;if(Object(i.a)(e)){if(n=Object(a.a)(e),t){for(var c=n.length,l=0,u=0;u<c;u++)(s=t.call(this,n[u],t,u))!==o&&(n[l]=s,l++);l!==c&&(n.length=l)}}else if(Object(r.a)(e)){n=Object.create(Object.getPrototypeOf(e));for(var d=Object.keys(e),h=d.length,p=0;p<h;p++){var f=d[p];t?(s=t.call(this,e[f],t,f))!==o&&(n[f]=s):n[f]=e[f]}}return n},o={}},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var i=n(80),r=n(180),a=n(36),s=n(34),o=n(123),c=n(775),l=n(1180),u=n(65),d=i.a.extend(a.a,{staticMembers:{shouldUseFormEncoding:!1,components:Object(r.b)(["protocol","auth","hostname","port","pathname","query","hash"]),componentFormatters:{protocol:function(e){return e+(_[e]?"":"//")},auth:function(e){return e+"@"},port:function(e){return":"+e}},componentCleaners:{protocol:function(e){return e.replace("//","")},auth:function(e){return e.replace("@","")}},parse:function(e){var t,n,i,r,a,s=e.match(h),o={},c=this.components;for(i=0,r=c.length;i<r;i++)(t=s[i+1])&&(n=c[i],a=this.componentCleaners[n],o[n]=a?a(t):t);return o},parseQuery:function(e,t){var n={};if(!Object(o.a)(e))return n;if(""===(e=e.replace(p,"")))return n;t=void 0===t?this.shouldUseFormEncoding:t;for(var i=e.split("&"),r=0,a=i.length;r<a;r++){var s,c=i[r].split("="),l=c[0],u=c[1];v.test(l)&&(l=l.replace(v,""),s=!0),u=this.parseValue(y(u,t));var d=n[l];d?(Array.isArray(d)?d.push(u):d=[d,u],u=d):s&&(u=[u]),n[l]=u}return n},parseValue:function(e){if(e&&f.test(e)){for(var t=(e=e.split(",")).length-1;t>=0;t--)e[t]=I(e[t]);return e}return I(e)},formatQuery:function(e,t){if(!Object(c.a)(e))return e;t=void 0===t?this.shouldUseFormEncoding:t;var n,i,r,a,s=Object.keys(e),o="";for(r=0,a=s.length;r<a;r++)i=e[n=s[r]],r>0&&(o+="&"),o+=b(n,t),null!==i&&void 0!==i&&(o+="="+(i=b(this.formatValue(i),t)));return r>0?"?"+o:""},formatValue:function(e){if(Array.isArray(e)){for(var t=e.length-1;t>=0;t--)e[t]=w(e[t]);return e.join(",")}return w(e)},init:function(){var e=arguments;this.__s._$2zs$init.apply(this,e),this.prototype.registerMetadata("href",Object(s.b)({dependencies:this.components}))},__superMap:{_$2zs$init:"init"},__QUALIFIED_CLASS_NAME__:"URL"},protocol:Object(s.b)(null),auth:Object(s.b)(null),hostname:Object(s.b)(null),port:Object(s.b)({defaultValue:null,set:function(e){return parseInt(e,10)}}),pathname:Object(s.b)(null),query:Object(s.b)(null),hash:Object(s.b)(null),href:Object(s.b)({readOnly:!0,get:function(){var e,t,n,i,r,a="",s=this.constructor.components,o=arguments[3],c=arguments[1],l=arguments[2];for(t=0,n=s.length;t<n;t++)i=s[t],(e=o.internalGet(this,c[t+l]))&&(a+=(r=this.constructor.componentFormatters[i])?r(e):e);return a}}),host:Object(s.b)({readOnly:!0,dependencies:["port","hostname"],get:Object.assign(function(){var e=this.port,t=this.hostname;return e&&(t=(t||"")+":"+e),t},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]);return r&&(a=(a||"")+":"+r),a}})}),origin:Object(s.b)({readOnly:!0,dependencies:["host","protocol"],get:Object.assign(function(){var e=this.host,t=this.protocol;return t&&(e=this.constructor.componentFormatters.protocol(t)+(e||"")),e},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]);return a&&(r=this.constructor.componentFormatters.protocol(a)+(r||"")),r}})}),path:Object(s.b)({readOnly:!0,dependencies:["query","pathname"],get:Object.assign(function(){var e=this.query,t=this.pathname;return e&&(t=(t||"")+e),t},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]);return r&&(a=(a||"")+r),a}})}),queryObject:Object(s.b)({dependencies:["query"],get:Object.assign(function(){return this.constructor.parseQuery(this.query)},{__CW__getter:function(e,t,n,i){return this.constructor.parseQuery(i.internalGet(this,t[0+n]))}}),set:Object.assign(function(e){this.query=this.constructor.formatQuery(e)},{__CW__setter:function(e,t,n,i,r){n[0+i]=this.constructor.formatQuery(e)}}),writeDependencySetPathMap:["false"]}),isInDomain:function(e){var t=this.hostname;if(!t||""===e)return!1;var n=new RegExp("(^|\\.)"+Object(l.c)(e)+"$","i");return!!t.match(n)},setQueryParameter:function(e,t){return this.query?(this.removeQueryParameter(e),this.appendQueryParameter(e,t)):this.appendQueryParameter(e,t)},appendQueryParameter:function(e,t){var n=this.query||"?";return"?"!==n&&(n+="&"),n+=b(e)+(null!==t&&void 0!==t?"="+b(this.constructor.formatValue(t),this.constructor.shouldUseFormEncoding):""),this.query=n,this},removeQueryParameter:function(e){var t=this.query;if(!t)return this;var n=this._regexpForQueryParameterKey(e),i=t.replace(n,""),r=i[0];return i?"?"!==r&&("&"===r&&(i=i.substr(1)),i="?"+i):i=null,this.query=i,this},getQueryParameter:function(e){var t=this.query;if(t){var n=this._regexpForQueryParameterKey(e).exec(t);if(n){var i=n[3];return void 0===i?null:y(i)}}},_regexpForQueryParameterKey:function(e){var t=Object(l.c)(e)+"|"+Object(l.c)(b(e));return new RegExp("(^|\\?|&)("+t+")(?:=([^&]*))?(?=&|$)","g")},setMultipleQueryParameters:function(e){for(var t in e)e.hasOwnProperty(t)&&this.setQueryParameter(t,e[t]);return this},init:function(e){if(Object(o.a)(e))e=this.constructor.parse(e);else if(e&&e.constructor===Location){for(var t,n,i={},r=this.constructor.components,a=0,s=r.length;a<s;a++)"query"===(n=t=r[a])&&(t="search"),i[n]=e[t];e=i}else e&&!Object(c.a)(e)&&Object(u.b)("A URL object cannot be created with the data provided",e);this.__s._$69m$init.call(this,e)},toString:function(){return this.href},toJSON:function(){return""+this},__superMap:{_$69m$init:"init"}}),h=/^(.*?:\/\/)?([^:/?]*:?[^:/?]*@+)?([^:/?]*):?(\d*)?([^?#]*)?(\??[^#]*)(#?.*)?$/,p=/^\?/,f=/,/,g=/%20/g,m=/\+/g,v=/\[\]$/,_={"mailto:":!0},b=function(e,t){var n=encodeURIComponent(""+e);return t?n.replace(g,"+"):n},y=function(e,t){if(!e)return e;var n=decodeURIComponent(""+e);return t?n.replace(m," "):n};function I(e){try{return JSON.parse(e)}catch(t){return e}}function w(e){return""+e}},function(e,t,n){"use strict";n.d(t,"a",function(){return p});var i=n(32),r=n(180),a=n(36),s=n(1173),o=n(65),c=n(190),l=n(188),u=n(312),d=n(247),h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p={mixinDependencies:[a.a,i.b,u.a],init:function(){var e=this,t=arguments;this.__s._$11i$init.apply(this,t);var n=this.gestureRecognizers;n&&(n instanceof Set||(this.gestureRecognizers=new Set(n)),this.gestureRecognizers.forEach(function(t){t.retain(e,"ResponderSupport#gestureRecognizers"),t.view=e}))},handleEvent:function(e){if(this.isDisposed)return!1;for(var t=!1,n=this[e],i=arguments.length,r=Array(i>1?i-1:0),a=1;a<i;a++)r[a-1]=arguments[a];if(n&&(t=n.call.apply(n,[this].concat(r))),!t){var s=this._specialEventHandlers;if(s){var o=s[e];o&&(t=o.call.apply(o,[this].concat(r)))}}return t},handleGestureRecognition:function(e){var t=this.gestureRecognizers;if(t){for(var n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return d.a.addGestureRecognizersWithEvent.apply(d.a,[e].concat(i,[t]))}return!1},gestureRecognizers:null,addGestureRecognizer:function(e){e.retain(this,"ResponderSupport#gestureRecognizers");var t=this.gestureRecognizers;if(t||(this.gestureRecognizers=t=new Set),t.has(e))throw new Error("ResponderSupport: attempted to register the same gesture recognizer twice.");e.view=this,t.add(e)},removeGestureRecognizer:function(e){var t=this.gestureRecognizers;if(!t||!t.has(e))throw new Error("ResponderSupport: attempted to deregister a gesture recognizer that was never registered.");d.a.cancelGestureRecognizer(e),t.delete(e),e.release(this,"ResponderSupport#gestureRecognizers")},_registeredShortcuts:Object(r.b)(Object),registerShortcutKeyCombo:function(e,t,n){var i=(Object(s.a)(e,l.a)?e:l.a.create(e)).toString(),r=this._registeredShortcuts;r[i]&&Object(o.b)("Shortcut already registered for `"+e+"` on "+this),t||Object(o.b)("Cannot register shortcut for `"+e+"`, because no action was provided");var a=void 0===t?"undefined":h(t);"function"!==a&&("string"===a?"function"!=typeof(t=this[t])&&Object(o.b)("Cannot register shortcut for `"+e+"`, because the action is not a function"):Object(o.b)("Cannot register shortcut for `"+e+"`, because the action is not a function")),r[i]={action:t,context:n},(this._specialEventHandlers||(this._specialEventHandlers={})).keyDown=this.triggerShortcutIfExists},triggerShortcutIfExists:function(e){var t=c.a.sharedInstance,n=this._registeredShortcuts,i=t.activeKeys.toString(),r=t.activeKeySequence,a=r.toString(),s=n[i]||n[a];return!!s&&(n[a]&&r.clear(),s.action.call(this,s.context),!0)},pointerOver:null,pointerDown:null,pointerMove:null,pointerUp:null,pointerOut:null,pointerEnter:null,pointerLeave:null,wheel:null,__superMap:{_$11i$init:"init"}}},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n(65),r=n(247);function a(e,t){for(var n=arguments.length,a=Array(n>2?n-2:0),s=2;s<n;s++)a[s-2]=arguments[s];t||Object(i.b)("CW.Responder.sendEvent: Must receive an event.",{targetResponder:e,context:a});for(var o=e,c=!1,l=!1;o&&!o.isDisposed;){if(o.handleEvent){if(!l){var u,d=(u=o).handleEvent.apply(u,[t].concat(a));if(d||void 0===d){c=!0;break}}var h=o.handleGestureRecognition;h&&h.call.apply(h,[o,t].concat(a))&&(l=!0)}o=o.nextResponder}return l?(r.a.handleEvent.apply(r.a,[t].concat(a)),!0):c}},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n(49),r=n(95),a={mixinDependencies:[i.a],gestureRecognizerShouldBegin:function(e){return!0},gestureRecognizerShouldReceive:function(e,t){return t.pointerType!==r.b.MOUSE||0===t.button},gestureRecognizerShouldRecognizeSimultaneouslyWith:function(e,t){return!1},gestureRecognizerShouldRequireFailureOf:function(e,t){return!1},gestureRecognizerShouldBeRequiredToFailBy:function(e,t){return!1}}},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n(80),r=n(1173),a=i.a.extend({staticMembers:{nativePropertiesToCopy:["ctrlKey","shiftKey","altKey","metaKey","relatedTarget"],eventPropertiesToCopy:["bubbles","cwType","ctrlKey","shiftKey","altKey","metaKey","relatedTarget","nativeEvent"],__QUALIFIED_CLASS_NAME__:"CoreEvent"},init:function(e){var t=arguments;if(e){if(Object(r.a)(e,this.constructor))return s(this,e,this.constructor.eventPropertiesToCopy),void this.__s._$Ox$init.call(this);var n=e.nativeEvent;n&&s(this,n,this.constructor.nativePropertiesToCopy)}this.__s._$Ox$init.apply(this,t),this.cwType||(this.cwType=this.type)},bubbles:!0,cwType:null,ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1,relatedTarget:null,nativeEvent:null,preventDefault:function(){this.nativeEvent.preventDefault()},stopPropagation:function(){this.nativeEvent.stopPropagation()},__superMap:{_$Ox$init:"init"}});function s(e,t,n){for(var i=0,r=n.length;i<r;i++){var a=n[i],s=t[a];void 0!==s&&(e[a]=s)}}},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var i=n(80),r=n(41),a=n(252),s=n(65),o=n(189),c=Object(a.a)([o.a.SHIFT,o.a.CTRL,o.a.OPTION,o.a.CMD]),l=i.a.extend({init:function(e){var t=arguments;"string"==typeof e?(this.__s._$FD$init.call(this),this._initFromString(e)):this.__s._$FD$init.apply(this,t)},getKeyCode:function(e){var t=e.trim().toUpperCase();return o.a[t]||t.charCodeAt(0)},add:function(e){this.addKey(e)},addKey:function(e){c[e]?this._addModifier(e):this._addSequencedKey(e)},delete:function(e){this.removeKey(e)},removeKey:function(e){c[e]?this._removeModifier(e):this._removeSequencedKey(e)},clear:function(){this.modifiers&&(this.modifiers.length=0),this.keys&&(this.keys.length=0)},toString:function(){var e="";return this.modifiers&&(e+=this.modifiers.sort().join("+")+":"),this.keys&&(e+=this.keys.join(",")),e},contains:function(e){return c[e]?!!this.modifiers&&this.modifiers.includes(e):!!this.keys&&this.keys.includes(e)},has:function(e){return this.contains(e)},length:Object(r.c)({readOnly:!0,get:function(){return(this.keys?this.keys.length:0)+(this.modifiers?this.modifiers.length:0)}}),_initFromString:function(e){var t,n,i,r;if(/\+/.test(e))for(n=0,i=(t=e.split("+")).length;n<i;n++){var a=this.getKeyCode(t[n]);c[a]?this._addModifier(a):(r&&Object(s.b)("Invalid key sequence: "+e+". Key sequences do not support pressing two (non-modifier) keys at the same time"),r=!0,this._addSequencedKey(a))}else for(n=0,i=(t=e.split(/\s/)).length;n<i;n++)this._addSequencedKey(this.getKeyCode(t[n]))},_addModifier:function(e){(this.modifiers||(this.modifiers=[])).push(e)},_addSequencedKey:function(e){(this.keys||(this.keys=[])).push(e)},_removeModifier:function(e){this.modifiers&&(this.modifiers=this.modifiers.filter(function(t){return t!==e}))},_removeSequencedKey:function(e){this.keys&&(this.keys=this.keys.filter(function(t){return t!==e}))},__superMap:{_$FD$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"KeySequence"}})},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i={BACKSPACE:8,TAB:9,RETURN:13,ENTER:13,SHIFT:16,CTRL:17,OPTION:18,ESC:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46,HOME:36,END:35,SPACE:32,PAGEUP:33,PAGEDOWN:34,INSERT:45,CMD:91,COMMA:188,EQUALS:187,MINUS:189,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,DIGIT_0:48,DIGIT_1:49,DIGIT_2:50,DIGIT_3:51,DIGIT_4:52,DIGIT_5:53,DIGIT_6:54,DIGIT_7:55,DIGIT_8:56,DIGIT_9:57}},function(e,t,n){"use strict";n.d(t,"a",function(){return h});var i=n(80),r=n(781),a=n(41),s=n(180),o=n(36),c=n(34),l=n(1184),u=n(188),d=n(189),h=i.a.extend(r.a,o.a,{timeToKeepKeySequence:1e3,activeKeySequence:Object(a.c)({readOnly:!0,get:function(){return this._keySequence||(this._keySequence=u.a.create())}}),activeKeys:Object(c.b)({readOnly:!0,defaultValue:function(){return u.a.create()}}),_activeKeyLocations:Object(s.b)(Object),keyDown:function(e){this._timer&&(clearTimeout(this._timer),delete this._timer);var t=this.activeKeySequence,n=e.which;t.addKey(n);var i=this._activeKeyLocations,r=this.activeKeys.contains(n),a=1<<e.location;i[n]|=a,r||(this.activeKeys.addKey(n),this.propertyChanged("activeKeys")),this.syncMetaKeyStateFromEvent(e)},keyUp:function(e){var t=this._keySequence;if(t){this._timer&&clearTimeout(this._timer),this._timer=Object(l.a)(function(){t.clear()},this.timeToKeepKeySequence);var n=e.which,i=this._activeKeyLocations,r=~(1<<e.location);(i[n]&=r)||(this.activeKeys.removeKey(n),this.propertyChanged("activeKeys"))}},syncMetaKeyStateFromEvent:function(e){var t=d.a.SHIFT,n=d.a.CMD,i=d.a.OPTION,r=d.a.CTRL,a=this.activeKeys,s=this.activeKeySequence,o=e.shiftKey,c=e.metaKey,l=e.altKey,u=e.ctrlKey,h=1<<e.location;!1===o&&(a.has(t)||s.has(t))&&this.keyUp({which:t,location:h}),!1===c&&(a.has(n)||s.has(n))&&this.keyUp({which:n,location:h}),!1===l&&(a.has(i)||s.has(i))&&this.keyUp({which:i,location:h}),!1===u&&(a.has(r)||s.has(r))&&this.keyUp({which:r,location:h})},staticMembers:{__QUALIFIED_CLASS_NAME__:"KeyManager"}})},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n(124),r=function(e){var t="";try{var n=e&&e.toJSON&&e.toJSON()||e;t=Object(i.a)(n)?""+n:JSON.stringify(n)}catch(n){var r={};for(var s in e)r[s]=a(e,s);t=JSON.stringify(r)}return t};function a(e,t){var n=e[t];if(Object(i.a)(n))return n;var r="";try{var a=n&&n.toJSON&&n.toJSON()||n;r=Object(i.a)(a)?""+a:JSON.stringify(a)}catch(e){try{r=n+" (could not `JSON.stringify()`)"}catch(e){r="(cannot stringify value)"}}return r}},function(e,t,n){"use strict";n.d(t,"a",function(){return m});var i=n(80),r=n(781),a=n(41),s=n(1178),o=n(1187),c=n(96),l=n(36),u=n(34),d=n(120),h=[{name:"dppx",multiple:1},{name:"dpi",multiple:window.screen.logicalXDPI||96}],p="",f=NaN,g=!1;!function(){if(window.matchMedia)for(var e,t,n=0;e=h[n];n++){var i="(min-resolution: 1"+(t=e.name)+")",r=window.matchMedia(i),a=r?r.media:null;if(a&&-1!==a.indexOf("min-resolution"))return g=!0,p=t,void(f=e.multiple)}}();var m=i.a.extend(l.a,r.a,{isMac:void 0,isWindows:void 0,isiOS:void 0,osMajorVersion:void 0,osMinorVersion:void 0,isiPhone:void 0,isiPad:void 0,isiPhoneLikeDevice:void 0,isiPadLikeDevice:void 0,devicePixelRatio:Object(u.b)({get:function(){return this._devicePixelRatio||(this._devicePixelRatio=this._getDevicePixelRatio())},readOnly:!0,didChange:function(e){this.roundToDevicePixelRatio=this._roundToDevicePixel(e),this.floorToDevicePixelRatio=this._floorToDevicePixel(e),this.ceilToDevicePixelRatio=this._ceilToDevicePixel(e)}}),roundToDevicePixelRatio:s.a,_roundToDevicePixel:function(e){return function(t){return Math.round(t*e)/e}},floorToDevicePixelRatio:s.a,_floorToDevicePixel:function(e){return function(t){return Math.floor(t*e)/e}},ceilToDevicePixelRatio:s.a,_ceilToDevicePixel:function(e){return function(t){return Math.ceil(t*e)/e}},_getDevicePixelRatio:function(){return window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI||1},_devicePixelRatio:NaN,isRetina:void 0,hardwareConcurrency:Object(a.c)({readOnly:!0,defaultValue:function(){return navigator.hardwareConcurrency||void 0}}),canvasSupportsImageSmoothingQuality:Object(a.c)({readOnly:!0,defaultValue:function(){if(this._canvasSupportsImageSmoothingQuality)return this._canvasSupportsImageSmoothingQuality;void 0!=document.createElement("canvas").getContext("2d").imageSmoothingQuality?this._canvasSupportsImageSmoothingQuality=!0:this._canvasSupportsImageSmoothingQuality=!1}}),init:function(e){var t=arguments,n=e&&e.userAgent;n?delete e.userAgent:n=window.navigator.userAgent,this.__s._$2oQ$init.apply(this,t),n=n.toLowerCase();var i=!!/mac/.test(n)&&!/like mac/.test(n),r=!!/windows/.test(n);this.isMac=i,this.isWindows=r;var a,s,c,l,u,d,h=n.match(/\b(iPad|iPhone|iPod)\b.*\bOS (\d+)_(\d+)/i);if(h){var p=h[1];s="ipad"===p,c=(a="iphone"===p||"ipod"===p)||s}else a=s=c=!1;this.isiPhone=a,this.isiPad=s,this.isiOS=c,i?(l=n.match(/mac os x (\d+)[ _.](\d+)/))&&(u=l[1],d=l[2]):r?(l=n.match(/windows[ a-z]+?(\d+)[ _.](\d+)/))&&(u=l[1],d=l[2]):c&&(u=h[2],d=h[3]),u&&(this.osMajorVersion=parseInt(u,10)),d&&(this.osMinorVersion=parseInt(d,10)),this.isRetina=window.devicePixelRatio>1,this._updateDevicePixelRatio(),Object(o.a)(window,"resize",this._updateDevicePixelRatio.bind(this),!1)},_updateDevicePixelRatio:function(){if(d.a.getPath("sharedInstance.isFirefox")){var e=this._forceWindowResizeNotificationCanvas;e||((e=this._forceWindowResizeNotificationCanvas=document.createElement("canvas")).width=1,e.height=1,this._forceWindowResizeNotificationCanvasContext=e.getContext("2d"),e.classList.add("ff-force-window-resize-notification"),e.style.position="absolute",e.style.left="-1000px",e.style.top="-1000px",document.body.appendChild(e));try{this._forceWindowResizeNotificationCanvasContext.measureText("Blah")}catch(e){}}var t=this._getDevicePixelRatio();t!==this._devicePixelRatio&&(this._devicePixelRatio=t,this._detectChangeAwayFromDPR(t),this.propertyChanged("devicePixelRatio"))},_detectChangeAwayFromDPR:function(e){if(window.matchMedia){var t,n=.001*Math.round(e/.001),i=n+.001,r=n-.001,a=Object(c.a)(this._updateDevicePixelRatio.bind(this)),s=this._dprQueryListCache||(this._dprQueryListCache={}),o=this._activeMediaQueryListPair,l=s[n];l||(l=s[n]={},t="(-webkit-min-device-pixel-ratio: "+r+"), (min--moz-device-pixel-ratio: "+r+")"+(g?", (min-resolution: "+r*f+p+")":""),l.lowerBound=window.matchMedia(t),t="(-webkit-max-device-pixel-ratio: "+i+"), (max--moz-device-pixel-ratio: "+i+")"+(g?", (max-resolution: "+i*f+p+")":""),l.upperBound=window.matchMedia(t)),l!==o&&(o&&(o.lowerBound.removeListener(a),o.upperBound.removeListener(a)),l.lowerBound.addListener(a),l.upperBound.addListener(a),this._activeMediaQueryListPair=l)}},_dprQueryListCache:null,_resMultiple:f,__superMap:{_$2oQ$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"Device"}})},function(e,t,n){"use strict";n.d(t,"a",function(){return h});var i=n(1177),r=n(775),a=n(179),s=n(111),o=n(1173),c=n(127),l=n(49),u=n(54),d=n(32),h={mixinDependencies:[l.a,c.a],init:function(e){var t,n,l=arguments;if(1!==arguments.length)for(this.__s._$Jp$init.call(this),t=0,n=arguments.length;t<n;t++)this.add(arguments[t]);else if(!Object(i.a)(e)||Object(r.a)(e))this.__s._$Jp$init.apply(this,l);else if(Object(a.a)(e))for(this.__s._$Jp$init.call(this),t=0,n=e;t<n;t++)this.add(void 0);else if(Object(s.a)(e))for(this.__s._$Jp$init.call(this),t=0,n=e.length;t<n;t++)this.add(e[t]);else Object(o.a)(e,c.a)?(this.__s._$Jp$init.call(this),this.addEach(e)):(this.__s._$Jp$init.call(this),this.add(e))},add:function(e){return this.encodedAdd(this.encode(e))},encodedAdd:Object(d.c)(u.a),addEach:function(e){e.forEach(this.add,this)},remove:function(e){return this.encodedRemove(this.encode(e))},encodedRemove:Object(d.c)(u.a),delete:function(){return this.remove.apply(this,arguments)},removeEach:function(e){e.forEach(this.remove,this)},constructNewInstance:function(){return this.constructor.create()},filter:function(e,t){for(var n=this.constructNewInstance(),i=this.createIterator().retain(),r=0;i.isValid;){r++;var a=i.value;!0===e.call(t,a,r,this)&&n.add(a),i.moveToNext()}return i.release(),n},__superMap:{_$Jp$init:"init"}}},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return u});var i=n(80),r=n(41),a=n(561),s=n(1173),o=n(138),c=n(241),l=n(98),u=i.a.extend({status:r.c({type:o.a,defaultValue:o.a.NONE}),isOK:r.c({readOnly:!0,get:function(){return this.status===o.a.OK}}),isDisconnected:r.c({type:Boolean,readOnly:!0,get:function(){return this.status===o.a.DISCONNECTED}}),isCanceled:r.c({type:Boolean,readOnly:!0,get:function(){return this.status===o.a.CANCELED}}),isTimeout:r.c({type:Boolean,readOnly:!0,get:function(){return this.status===o.a.TIMEOUT}}),data:r.c(),error:r.c(),staticMembers:{createWithOptionalData:function(e){return u.create({status:o.a.OK,data:e})},createFromError:function(t){var n=a.a(t);return n?(n.buildInfo=e.__CW_BUILD_INFO,s.a(t,Error)||(n.message=JSON.stringify(t),n.stack=(new Error).stack)):n={message:"No error specified",stack:(new Error).stack},u.create({status:function(e){var t=o.a.ERROR;return s.a(e,Error)?function(e){return d(e,l.a)||d(e,TypeError)||d(e,RangeError)}(e)&&(t=o.a.BAD_REQUEST):t=o.a.UNDEFINED_ERROR_TYPE,t}(t),error:n})},deserialize:function(e){if(!e)throw new l.a("[MessagingResponse] no serialized data to deserialize");var t=u.create();t.status=o.a.getItemForValue(e.status);var n=e.data;n&&(t.data=n);var i=e.error;return i&&(t.error=i),h(t),t},__QUALIFIED_CLASS_NAME__:"MessagingResponse"},serialize:function(){h(this);var e={status:this.status.value},t=this.data;t&&(e.data=t);var n=this.error;return n&&(e.error=n),e}});function d(e,t){return s.a(e,t)||e instanceof t}function h(e){var t=e.status,n=e.error;if(t===o.a.NONE)throw new c.a("[MessagingResponse] status was never set");if(n&&(t===o.a.OK||t===o.a.NONE))throw new c.a("[MessagingResponse] error can not be set if the status is OK or NONE")}}).call(this,n(6))},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n(49),r=n(54),a=n(126),s=n(355),o={mixinDependencies:[i.a],connect:r.a.define(),disconnect:r.a.define(),isDisconnected:a.a.define(),incomingMessage:s.a.define(),outgoingMessage:s.a.define(),send:r.a.define()}},function(e,t,n){"use strict";n.d(t,"b",function(){return c}),n.d(t,"a",function(){return l});var i=n(1174),r=n(251),a=n(181),s=n(111),o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function c(e,t){return u(e,t)||function(e,t){return r.a(e)&&u(e.constructor,t)&&function(e,t){if("object"!==(void 0===e?"undefined":o(e)))return!1;var n=l(t),r=Array.isArray(n),a=0;for(n=r?n:n[Symbol.iterator]();;){var s;if(r){if(a>=n.length)break;s=n[a++]}else{if((a=n.next()).done)break;s=a.value}var c=s;if(!i.a(e[c]))return!1}return!0}(e,t)}(e,t)||function e(t,n){var i=!1;if(t&&n){var r=t.mixinDependencies;if(r&&r.length>0)if(r.includes(n))i=!0;else for(var a=0,s=r.length;a<s&&!(i=e(t,r[a]));a++);}return i}(e,t)}function l(e){if(null===(t=e)||"object"!==(void 0===t?"undefined":o(t))||!s.a(t.mixinDependencies))return null;var t,n=new Set;return function e(t,n){if(Object.entries(t).forEach(function(e){var t,i=e[0];(t=e[1].constructor)&&"RequiredMethod"===t.__QUALIFIED_CLASS_NAME__&&n.add(i)}),t.mixinDependencies)for(var i=t.mixinDependencies,r=0,a=i.length;r<a;r++)e(i[r],n)}(e,n),n}function u(e,t){return a.a(e)&&e.kindOf(t)}},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=Object.freeze({MOUSE:"MOUSE",TOUCH:"TOUCH"})},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return d});var i=n(80),r=n(36),a=n(781),s=n(34),o=n(93),c=n(1192),l=n(65),u=[{domain:"icloud.com.cn",countryCode:"CHN",dataUserDomain:"cn",iCloudLogoSVG:{resource:n(808),cssStyle:"width: 59px; min-width: 59px; top:4px;"}},{domain:"icloud.com",countryCode:void 0,iCloudLogoSVG:{resource:n(809),cssStyle:"width: 59px; min-width: 59px;"}}],d=i.a.extend(r.a,a.a,{staticMembers:{subDomains:Object.freeze({WWW:"www",BETA:"beta",FUTURE:"future",CARRY:"carry"}),__QUALIFIED_CLASS_NAME__:"DomainManager"},current:s.b({type:Object,readOnly:!0,binding:o.c("_current")}),setDomainFromCountryCode:function(e){for(var t=0;t<u.length;++t){var n=u[t];if(n.countryCode===e){if(this.current.countryCode!==e){var i=c.a(n),r=this._current,a=r.domain,s=r.subdomain;i.domain=a,i.subdomain=s,this._currentFromCountryCode=i}break}}},_currentFromCountryCode:s.b(),_current:s.b({type:Object,readOnly:!0,dependencies:["_currentFromCountryCode"],get:Object.assign(function(){var t=this._currentFromCountryCode;if(!t){var n=e.location.hostname.split("."),i=n.shift();if(-1===Object.values(d.subDomains).indexOf(i))return l.b("sudomain "+i+" is not supported"),null;for(var r=n.join("."),a=0;a<u.length;++a){var s=u[a];s.domain===r&&((t=c.a(s)).subdomain=i)}}return t},{__CW__getter:function(t,n,i,r){var a=r.internalGet(this,n[0+i]);if(!a){var s=e.location.hostname.split("."),o=s.shift();if(-1===Object.values(d.subDomains).indexOf(o))return l.b("sudomain "+o+" is not supported"),null;for(var h=s.join("."),p=0;p<u.length;++p){var f=u[p];f.domain===h&&((a=c.a(f)).subdomain=o)}}return a}})})})}).call(this,n(6))},function(e,t,n){"use strict";n.d(t,"b",function(){return c}),n.d(t,"a",function(){return l});var i=n(41),r=n(1182),a=n(177),s=n(814),o=n(1281),c={mixinDependencies:[s.a],eventsToReport:i.c(r.a({didEnterSelectMode:o.a.REPORT_ONCE,shareLoaded:o.a.REPORT_ONCE,shareIncomplete:o.a.REPORT_ONCE,shareDidScrollToEnd:o.a.REPORT_ONCE,timeToLoad1:o.a.REPORT_ONCE,shareDownload:o.a.REPORT_ALL,cmmViewShareBackClicked:o.a.REPORT_ALL,cmmShareBackPresent:o.a.REPORT_ALL,cmmShareBackEmpty:o.a.REPORT_ALL,cmmShareBackInitiated:o.a.REPORT_ALL}))},l=a.b("AssetCopierWorkflowSource",{SHARE_CREATION:"ShareCreation",ADD_TO_LIBRARY:"AddToLibrary"})},function(e,t,n){"use strict";n.d(t,"a",function(){return s}),n(829);var i=n(409),r=n(1141),a=n(34),s=i.a.extend(r.a,{staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"ELEMENT",tagname:"span",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"title",attributes:{signal:"titleDidRender"}}],classes:["title"]}],classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"hasLeftIcon",truevalue:"cw-has-left-icon",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"hasRightIcon",truevalue:"cw-has-right-icon",attributes:{}}],attributes:{title:{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"tooltip",attributes:{},attribute:"title"}}}},className:"cw-button",__QUALIFIED_CLASS_NAME__:"Button"},title:Object(a.b)(""),tooltip:Object(a.b)(""),hasLeftIcon:Object(a.b)(!1),hasRightIcon:Object(a.b)(!1)})},function(e,t,n){"use strict";n.d(t,"a",function(){return s}),n.d(t,"b",function(){return o}),n.d(t,"c",function(){return c}),n.d(t,"g",function(){return l}),n.d(t,"e",function(){return u}),n.d(t,"f",function(){return d}),n.d(t,"d",function(){return h}),n(59);var i=n(172),r=n(1207),a=n(73),s="ITEMS",o="PHOTOS",c="VIDEOS",l=function(e,t,n){return t===e?o:n===e?c:s},u=function(e,t,n,i){var r=l(e,t,n);return Object(a.c)(i[r],{count:e})};function d(e){for(var t,n,i=((t={})[o]=[],t[c]=[],t[s]=[],t),r=((n={})[o]="Photos",n[c]="Videos",n[s]="Items",n),a=Object.keys(r),l=a.length,u=0;u<l;++u){var d=a[u],h=r[d];i[d].push(e+h+".0"),i[d].push(e+h+".1"),i[d].push(e+h+".2"),i[d].push(e+h+".More")}return i}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(void 0===e)return"";var s=e.audiosCount,o=void 0===s?0:s,c=e.othersCount,l=void 0===c?0:c,u=e.photosCount,d=void 0===u?0:u,h=e.videosCount,p=void 0===h?0:h,f=e.hiddenAudiosCount,g=void 0===f?0:f,m=e.hiddenOthersCount,v=void 0===m?0:m,_=e.hiddenPhotosCount,b=void 0===_?0:_,y=e.hiddenVideosCount,I=d,w=p,S=o+l;n&&(I+=b,w+=void 0===y?0:y,S+=g+v);var C=r.a(S),O="Media.Count"+r.a(I)+r.a(w)+C+r.a(t);return i.d(O,{otherItemsCount:Object(a.b)(S),photosCount:Object(a.b)(I),videosCount:Object(a.b)(w),remainingCount:Object(a.b)(t)})}},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var i=n(81),r=regeneratorRuntime.mark(d),a=i.b.Possible,s=i.b.Began,o=i.b.Changed,c=i.b.Ended,l=i.b.Failed,u=i.b.Cancelled;function d(e){var t;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return void(n.next=2);case 2:if((t=n.sent)===a){n.next=5;break}throw new Error("ContinuousGestureRecognizer: state must be initialized to Possible.");case 5:return void(n.next=7);case 7:if((t=n.sent)!==l){n.next=12;break}return n.abrupt("return");case 12:if(t!==s){n.next=40;break}if(e.shouldBegin()){n.next=15;break}return n.abrupt("return",l);case 15:return void(n.next=18);case 18:if((t=n.sent)!==u){n.next=23;break}return n.abrupt("return");case 23:if(t!==l){n.next=27;break}return n.abrupt("return",u);case 27:if(t!==o){n.next=31;break}return n.abrupt("continue",15);case 31:if(t!==c){n.next=35;break}return n.abrupt("return");case 35:throw new Error("GestureRecognizer: invalid state "+t+" for ContinuousGestureRecognizer after Began or Changed. Must be either Changed, Cancelled, or Ended.");case 36:n.next=15;break;case 38:n.next=41;break;case 40:throw new Error("GestureRecognizer: invalid state "+t+" for ContinuousGestureRecognizer after Possible. Must be either Began or Failed.");case 41:case"end":return n.stop()}},r,this)}},function(e,t,n){"use strict";n.d(t,"b",function(){return _}),n.d(t,"a",function(){return w});var i=n(177),r=n(80),a=n(180),s=n(1211),o=n(192),c=n(1177),l=n(1169),u=n(1212),d=n(34),h=n(791),p=n(1188),f=n(36),g=n(790),m=n(323),v=n(322),_=Object(i.b)("ListPosition",function(e){e("Top"),e("Bottom")}),b=v.a.extend({rowHeight:Object(d.b)(30),rowSpacing:Object(d.b)(0),topPadding:Object(d.b)(0),bottomPadding:Object(d.b)(0),initialPosition:Object(d.b)({defaultValue:_.Top,type:_}),minimumSizePosition:Object(d.b)({defaultValue:_.Top,type:_}),shouldStickAtTop:Object(d.b)(!1),shouldStickAtBottom:Object(d.b)(!1),topInset:Object(d.b)(0),hideableTopHeight:Object(d.b)(0),hideableBottomHeight:Object(d.b)(0),shouldStartHidden:Object(d.b)(!0),staticMembers:{__QUALIFIED_CLASS_NAME__:"ListLayoutMetrics"}}),y=h.a.create().retain(window,"initial retain"),I=p.a.create().retain(window,"initial retain"),w=r.a.extend(m.a,f.a,{staticMembers:{LayoutMetricsClass:b,__QUALIFIED_CLASS_NAME__:"ListLayoutDelegate"},isAtEnd:null,_distancePastEnd:0,setUpInitialCell:function(e,t,n){var i=e.layoutMetrics.initialPosition;return i===_.Top?this.setUpFirstCell(e,t,n):i===_.Bottom?this.setUpLastCell(e,t,n):void 0},setUpFirstCell:function(e,t,n){if(!t)return null;var i=t.startHandle.retain(this,"setUpFirstCell");if(!i.isValid)return i.release(this,"setUpFirstCell"),null;var r=this.cellForHandle(i).retain(this,"setUpFirstCell");i.release(this,"setUpFirstCell");var a=this.topForCell(e,r),s=e.layoutMetrics;s.shouldStartHidden||(a+=s.hideableTopHeight);var o=r.isLaidOut;return this.layOutCellInDirection(e,r,1,a,1,this.leftForCell(e,r)),n&&(r.isLaidOut=o),r.autorelease(this,"setUpFirstCell")},setUpLastCell:function(e,t,n){if(!t)return null;var i=t.handleProvider.endHandle.retain(this,"setUpLastCell");if(!i.isValid)return i.release(this,"setUpLastCell"),null;var r=this.cellForHandle(i).retain(this,"setUpLastCell");i.release(this,"setUpLastCell");var a=e.viewportHeight-this.spaceBelowCell(e,r),s=e.layoutMetrics;s.shouldStartHidden||(a-=s.hideableBottomHeight);var o=r.isLaidOut;return this.layOutCellInDirection(e,r,-1,a,1,this.leftForCell(e,r)),n&&(r.isLaidOut=o),r.autorelease(this,"setUpLastCell")},_findCellForItemInDirection:function(e,t,n,i){for(n=n.next;n.isValid;){if(n.value===t)return this.cellForHandle(n).retain().autorelease();n=n.atDistance(i)}return null},_findCellForItem:function(e,t,n,i){var r=n.find(function(e){return e.handle.value===i});return r||((r=this._findCellForItemInDirection(e,i,n.objectAt(0).handle,-1))?r:r=this._findCellForItemInDirection(e,i,n.lastItem.handle,1))},getCellForItem:function(e,t,n,i){var r=this._findCellForItem(e,t,n,i);if(!r)return null;if(r.retain(),n.contains(r))return r;var a=n.objectAt(0),s=this.topForCell(e,a)-a.y;return this.layOutCellInDirection(e,r,1,this.topForCell(e,r)-s,1,this.leftForCell(e,r)),r.autorelease()},layOutCellsInDirection:function(e,t,n,i,r){for(var a=n,s=e.viewportBounds,o=i>0,l=!1;;){var u=a;if(a=this.positionNextCell(e,u,i),!Object(c.a)(a))return r;if(a.retain(this,"layOutCellsInDirection"),this.cellIsVisible(e,s,a))l=!0,this.isCellAnchorable(a)&&(r=!0);else if(l&&r||u.y*i>0)return a.release(this,"layOutCellsInDirection"),a.isLaidOut=!1,r;o?t.push(a):t.unshift(a),a.release(this,"layOutCellsInDirection")}},cellIsVisible:function(e,t,n){return n.intersects(t)},_visibleCells:Object(a.b)(s.a),_previousVisibleCells:Object(a.b)(s.a),acquireVisibleCells:function(e,t,n){var i=this._visibleCells,r=this._previousVisibleCells;return this._visibleCells=r,this._previousVisibleCells=i,i.length=0,i},reusePreviousVisibleCells:function(e,t,n,i,r){for(var a=e.viewportBounds,s=i.length,o=0;o<s;o++){var c=i.objectAt(o);c.isReusable||c.invalidate()}var l=r.movedBy;l&&this.handleMovedBy(l.x,l.y,e,t,n,i);var u=r.itemShown;if(u){var d=r.itemShownAt,h=d.x,p=d.y;this.handleShowItem(u,h,p,e,t,n,i)}var f=r.itemScrolledTo;f&&this.handleScrollToItem(f,e,t,n,i);var g=r.sizeChangedBy;g&&this.handleSizeChangedBy(g.width,g.height,e,t,n,i),r.everythingChanged&&this.handleEverythingChanged(e,t,n,i,r),r.collectionChanged&&this.invalidateOtherCells(i);var m=r.itemsChanges;m&&this.handleItemsChanges(m,e,t,n,i,r);var v=r.invalidItems;v&&this.handleInvalidItems(v,e,t,n,i,r);var _=r.layoutMetricsChanged;_&&this.handleLayoutMetricsChanged(_,e,t,n,i,r);for(var b=!1,y=!1,I=0;I<s;I++){var w=i.objectAt(I);!y&&w.isReusable&&w.isLaidOut&&this.cellIsVisible(e,a,w)?(w.retain(this,"reusePreviousVisibleCells: retaining reused cells"),n.push(w),w.release(this,"reusePreviousVisibleCells: retaining reused cells"),b=!0):b?(y=!0,w.isLaidOut=!1):w.isLaidOut=!1}},handleLayoutMetricsChanged:function(e,t,n,i,r,a){var s=t.layoutMetrics;if(e.contains("rowHeight")){this.invalidateOtherCells(r);var o=this.topMostItem(t,r);this.recoverLayoutFromCell(t,o)}else if(e.contains("rowSpacing")){var c=this.topMostItem(t,r);this.invalidateOtherCells(r,c)}else if(e.contains("hideableTopHeight")){if(s.shouldStartHidden&&this.isAtEnd===_.Top&&s.initialPosition===_.Top){var l=this.setUpFirstCell(t,n,!0);this.invalidateOtherCells(r,l)}}else if(e.contains("hideableBottomHeight")){if(s.shouldStartHidden&&this.isAtEnd===_.Bottom&&s.initialPosition===_.Bottom){var u=this.setUpLastCell(t,n,!0);this.invalidateOtherCells(r,u)}}else this.handleEverythingChanged(t,n,i,r,a)},recoverLayoutFromCell:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,i=t.handle;i.wasRemoved||i.isValid&&this.layOutCellInDirection(e,t,1,n.y,1,n.x)},handleEverythingChanged:function(e,t,n,i,r){if(this.invalidateOtherCells(i),!this.isAtEnd){var a=this.topMostValidItem(e,i);if(!a)return;a.retain(this,"handleEverythingChanged: first valid cell"),this.recoverLayoutFromCell(e,a),a.release(this,"handleEverythingChanged: first valid cell")}},handleInvalidItems:function(e,t,n,i,r,a){e.forEach(function(e){var t=this.cellForHandle(e).retain(this,"handleInvalidItems: invalid cell");t.invalidate(),t.release(this,"handleInvalidItems: invalid cell")},this);for(var s=r.length,o=0;o<s;o++){var c=r.objectAt(o);e.contains(c.handle)&&c.invalidate()}},invalidateOtherCells:function(e,t){for(var n=e.length,i=0;i<n;i++){var r=e.objectAt(i);r!==t&&r.invalidate()}},handleItemsChanges:function(e,t,n,i,r,a){this.handleEverythingChanged(t,n,i,r,a)},handleCollectionChanged:function(e,t,n,i,r){var a=this.setUpInitialCell(e,t);a&&(a.retain(this,"handleCollectionChanged"),n.push(a),a.release(this,"handleCollectionChanged"),this.isAtEnd=e.layoutMetrics.initialPosition,this._distancePastEnd=0)},endOffset:function(e,t,n){var i=this.isAtEnd,r=this._distancePastEnd,a=0,s=e.layoutMetrics;if(i===_.Top){var o=s.hideableTopHeight;r=Math.min(r,o);var c=this.topMostLaidOutItem(e,n);(a=-this._distancePastTop(e,c))>0&&!s.shouldStickAtTop?a=0:a+=r}else if(i===_.Bottom){var l=s.hideableBottomHeight;r=Math.min(r,l);var u=this.bottomMostLaidOutItem(e,n);(a=this._distancePastBottom(e,u))<0&&!s.shouldStickAtBottom?a=0:a-=r}return a},moveCellsBy:function(e,t,n,i){for(var r=0,a=i.length;r<a;r++){var s=i.objectAt(r);s.isLaidOut&&s.moveBy(e,t,n)}},handleMovedBy:function(e,t,n,i,r,a){this.moveCellsBy(n,e,t,a)},handleShowItem:function(e,t,n,i,r,a,s){var o=this.cellForHandleIfPresent(e);if(o){if(o.retain(this,"handleShowItem: target cell"),o.isLaidOut)return this.moveCellsBy(i,0,n-o.y,s),void o.release(this,"handleShowItem: target cell");o.release(this,"handleShowItem: target cell")}this.invalidateOtherCells(s)},handleScrollToItem:function(e,t,n,i,r){var a=this.cellForHandleIfPresent(e);if(a){if(a.retain(this,"handleScrollToItem: target cell"),a.isLaidOut){var s=this.minimumTopOffsetForCell(t,a),o=t.viewportBounds.bottom-this.minimumBottomOffsetForCell(t,a);return a.y<s?this.moveCellsBy(t,0,s-a.y,r):a.bottom>o&&this.moveCellsBy(t,0,o-a.bottom,r),void a.release(this,"handleScrollToItem: target cell")}a.release(this,"handleScrollToItem: target cell")}this.invalidateOtherCells(r)},handleSizeChangedBy:function(e,t,n,i,r,a){0!==e&&a.forEach(function(e){e.width=n.viewportWidth,e.size=null})},initializeVisibleCells:function(e,t,n,i,r){if(r.collectionChanged)this.handleCollectionChanged(e,t,n,i,r);else{if(i.length>0&&t.startHandle.isValid)if(r.itemsChanges||r.everythingChanged){var a=this.handleNoPreviouslyValidCells(e,t,n,i,r);a.retain(this,"initializeVisibleCells: newCell"),n.push(a),a.release(this,"initializeVisibleCells: newCell")}else if(r.itemShown)this.initializeItemShown(e,t,n,r);else if(r.itemScrolledTo)this.initializeItemScrolledTo(e,t,n,i,r);else{var s=this.topMostItem(e,i);if(s){s.retain(this,"initializeVisibleCells: previous topMostItem");var o=e.viewportBounds,c=o.x-s.x,l=o.y-s.y,u=0;l>0?u=1:l<0?u=-1:c>0?u=1:c<0&&(u=-1);var d=void 0;s.handle.hasHandleAtDistance(u)?d=this.setUpCellAtDistance(e,t,s,c,l):(this.recoverLayoutFromCell(e,s),d=s),d.retain(this,"initializeVisibleCells: setUpCellAtDistance"),s.release(this,"initializeVisibleCells: previous topMostItem"),n.push(d),d.release(this,"initializeVisibleCells: setUpCellAtDistance")}}if(0===n.length){var h=this.setUpInitialCell(e,t);if(h){var p=this.isAtEnd=e.layoutMetrics.initialPosition,f=this._distancePastEnd;p===_.Top?h.y+=f:p===_.Bottom&&(h.y-=f),h.retain(this,"initializeVisibleCells: setUpInitialCell"),n.push(h),h.release(this,"initializeVisibleCells: setUpInitialCell")}}}},initializeItemShown:function(e,t,n,i){var r=i.itemShown,a=this.cellForHandle(r).retain(this,"initializeItemShown: cell"),s=i.itemShownAt.y;void 0===s?this.layOutCellAtTop(e,a):this.layOutCellInDirection(e,a,1,s,1,this.leftForCell(e,a)),n.push(a),a.release(this,"initializeItemShown: cell")},layOutCellAtTop:function(e,t){var n=this.minimumTopOffsetForCell(e,t);this.layOutCellInDirection(e,t,1,n,1,this.leftForCell(e,t))},minimumTopOffsetForCell:function(e,t){return t.handle.hasPrevious?0:this.topForCell(e,t)},layOutCellAtBottom:function(e,t){var n=this.minimumBottomOffsetForCell(e,t);this.layOutCellInDirection(e,t,-1,e.viewportBounds.bottom-n,1,this.leftForCell(e,t))},minimumBottomOffsetForCell:function(e,t){return t.handle.hasNext?0:this.spaceBelowCell(e,t)},initializeItemScrolledTo:function(e,t,n,i,r){var a=r.itemScrolledTo,s=this.cellForHandle(a).retain(this,"initializeItemScrolledTo: cell"),o=this.topMostItem(e,i);o?this.topForCell(e,s)<=this.topForCell(e,o)?this.layOutCellAtTop(e,s):this.layOutCellAtBottom(e,s):this.layOutCellAtTop(e,s),n.push(s),s.release(this,"initializeItemScrolledTo: cell")},handleNoPreviouslyValidCells:function(e,t,n,i,r){var a,s=this.topMostItem(e,i);if(!s){var o=this.setUpInitialCell(e,t);return this.isAtEnd=e.layoutMetrics.initialPosition,this._distancePastEnd=0,o}if(e.layoutMetrics.initialPosition===_.Top){var c=this.topForCell(e,s)-s.y,l=this.setUpFirstCell(e,t,!0);l.y-=c,a=this.setUpCellAtDistance(e,t,l,0,c)}else{var u=this.spaceBelowCell(e,s)-(s.bottom-e.viewportHeight),d=this.setUpLastCell(e,t,!0);d.y-=u,a=this.setUpCellAtDistance(e,t,d,0,u)}return a},_distancePastBottom:function(e,t){return o.a.sharedInstance.floorToDevicePixelRatio(e.viewportHeight)-o.a.sharedInstance.floorToDevicePixelRatio(t.bottom+this.spaceBelowCell(e,t))},_distancePastTop:function(e,t){return o.a.sharedInstance.floorToDevicePixelRatio(t.y-this.topForCell(e,t))},checkForMinimumSize:function(e,t){var n=this.topMostLaidOutItem(e,t),i=this._distancePastTop(e,n),r=i>=0,a=this.bottomMostLaidOutItem(e,t),s=this._distancePastBottom(e,a);if(r&&s>=0){var o=e.layoutMetrics;o.minimumSizePosition===_.Top?(this.isAtEnd=_.Top,this._distancePastEnd=i):o.minimumSizePosition===_.Bottom&&(this.isAtEnd=_.Bottom,this._distancePastEnd=s)}},completeVisibleCells:function(e,t,n,i){var r=!!n.find(this.isCellAnchorable),a=this.layOutCellsInDirection(e,n,n.objectAt(0),-1,r),s=this.layOutCellsInDirection(e,n,n.lastItem,1,r||a);if(!1!==r||!1!==a||!1!==s)if(i.movedBy||i.itemShown||i.itemScrolledTo){var c=e.layoutMetrics,l=null,u=0,d=this.topMostItem(e,n),h=this._distancePastTop(e,d),p=h>=0,f=this.bottomMostItem(e,n),g=this._distancePastBottom(e,f),m=g>=0;m&&p&&(c.minimumSizePosition===_.Top?m=!1:c.minimumSizePosition===_.Bottom&&(p=!1)),m?(l=_.Bottom,u=g):p&&(l=_.Top,u=h),this.isAtEnd=l,this._distancePastEnd=u}else{var v;for(this.checkForMinimumSize(e,n);Math.abs(o.a.sharedInstance.floorToDevicePixelRatio(v=this.endOffset(e,t,n)))>0;)this.moveCellsBy(e,0,v,n),v>0?this.layOutCellsInDirection(e,n,n.objectAt(0),-1,!0):this.layOutCellsInDirection(e,n,n.lastItem,1,!0)}},verticalScan:1/0,horizontalScan:1/0,setUpCellAtDistance:function(e,t,n,i,r){var a=this.horizontalScan,s=this.verticalScan;if(Math.abs(i)>a||Math.abs(r)>s)return this.estimateCellAtDistance(e,t,n,i,r);var o,c=isFinite(a)||isFinite(s),l=0;if(r>0)l=1;else if(r<0)l=-1;else if(i>0)l=1;else{if(!(i<0))return n.isLaidOut||this.recoverLayoutFromCell(e,n),n;l=-1}if(y.x=n.x+i,y.y=n.y+r,c){var u=e.viewportBounds;I.x=u.x-a,I.y=u.y-s,I.width=u.width+2*a,I.height=u.height+2*s}for(n.retain();null!==(o=this.positionNextCell(e,n,l));){if(o.retain(),o.containsPoint(y)||l<0&&o.y<=y.y||l>0&&o.y>=y.y||c&&!o.intersects(I))return n.release(),o.autorelease();n.release(),o.isLaidOut=!1,n=o}return l>0?this.setUpLastCell(e,t):this.setUpFirstCell(e,t)},estimateCellAtDistance:l.a,verticalSpacingForCellTypes:function(e,t,n){return"item"===t&&"item"===n?e.layoutMetrics.rowSpacing:0},positionNextCell:function(e,t,n){var i=t.handle.atDistance(n).retain();if(!i.isValid)return i.release(),null;var r,a=this.cellForHandle(i).retain();return i.release(),r=n>0?this.verticalSpacingForCellTypes(e,t.cellType,a.cellType):this.verticalSpacingForCellTypes(e,a.cellType,t.cellType),this.positionAdjacentCell(e,t,a,n,r).autorelease()},positionAdjacentCell:function(e,t,n,i,r){var a;return t.retain(),n.retain(),a=i>0?t.bottom+r:t.y-r,t.release(),this.layOutCellInDirection(e,n,i,a,1,this.leftForCell(e,n)),n.autorelease()},layOutCellInDirection:function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=this.sizeForCell(e,t),o=t.height=s.height;n>0?t.y=i:n<0&&(t.y=i-o);var c=t.width=s.width;return r>0?t.x=a:r<0&&(t.x=a-c),t.isLaidOut=!0,t},sizeForCell:function(e,t){var n=t.size;return n||(n=t.size=this[this.sizeKeyByCellType[t.cellType]](e,t)),n},estimatedSizeForCell:function(e,t){var n=this.estimatedSizeKeyByCellType;if(!n){n={};var i=this.sizeKeyByCellType;for(var r in i)n[r]="estimated"+Object(u.a)(i[r])}var a=t.size;return a||(a=t.size=this[n[t.cellType]](e,t)),a},sizeKeyByCellType:{item:"sizeForItem"},estimatedSizeKeyByCellType:null,sizeForItem:function(e,t){return g.a.create({height:e.layoutMetrics.rowHeight,width:e.viewportWidth})},leftForCell:function(e,t){return 0},topForCell:function(e,t){for(var n=e.layoutMetrics,i=t.handle,r=-1;i.isValid;)i=i.previous,r++;return(r=Math.max(r,0))*(n.rowHeight+n.rowSpacing)+n.topPadding+n.topInset-n.hideableTopHeight},spaceBelowCell:function(e,t){for(var n=e.layoutMetrics,i=t.handle,r=-1;i.isValid;)i=i.next,r++;return(r=Math.max(r,0))*(n.rowHeight+n.rowSpacing)+n.bottomPadding-n.hideableBottomHeight},topMostItem:function(e,t){return this.topMostAnchor(e,t,this._isCellReusable)},topMostLaidOutItem:function(e,t){return this.topMostAnchor(e,t,this._isCellReusableAndLaidOut)},topMostValidItem:function(e,t){return this.topMostAnchor(e,t,this._isCellReusableAndValid)},bottomMostItem:function(e,t){return this.bottomMostAnchor(e,t,this._isCellReusable)},bottomMostLaidOutItem:function(e,t){return this.bottomMostAnchor(e,t,this._isCellReusableAndLaidOut)},bottomMostValidItem:function(e,t){return this.bottomMostAnchor(e,t,this._isCellReusableAndValid)},topMostAnchor:function(e,t,n){var i=this,r=t.find(function(e){return i.isCellPreferredAnchor(e)&&n.call(i,e)});return r||(r=t.find(function(e){return i.isCellAnchorable(e)&&n.call(i,e)})),r},bottomMostAnchor:function(e,t,n){var i=this,r=t.findLast(function(e){return i.isCellPreferredAnchor(e)&&n.call(i,e)});return r||(r=t.findLast(function(e){return i.isCellAnchorable(e)&&n.call(i,e)})),r},_isCellReusable:function(e){return e.isReusable},_isCellReusableAndLaidOut:function(e){return e.isReusable&&e.isLaidOut},_isCellReusableAndValid:function(e){var t=e.handle;return t.isValid&&!t.wasRemoved},isCellAnchorable:function(e){return"item"===e.cellType},isCellPreferredAnchor:function(e){return this.isCellAnchorable(e)},computeSpaceAroundViewport:function(e){var t=e.spaceAroundViewport,n=e.visibleCells,i=0,r=0,a=e.layoutMetrics,s=e.viewportHeight,o=a.hideableTopHeight,c=a.hideableBottomHeight,l=this.topMostItem(e,n),u=0,d=0;l&&(d=this.topForCell(e,l),u=l.y);var h=this.bottomMostItem(e,n),p=0,f=0;h&&(f=this.spaceBelowCell(e,h),p=h.bottom);var g=Math.min(s,d+f+p-u),m=void 0,v=void 0;g<s&&a.minimumSizePosition===_.Bottom?(m=s-g,v=s):(m=0,v=g),i=d-u+m,r=f-(v-p);var b=g+o<=s;a.minimumSizePosition===_.Bottom&&b||(i+=o);var y=g+c<=s;return a.minimumSizePosition===_.Top&&y||(r+=c),t.beginBatchSet().set("left",0).set("right",0).set("top",i).set("bottom",r).end(),t}})},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n(80),r=n(122),a=n(41),s=n(1188),o=n(65),c=i.a.extend(r.a,s.b,{initFromPool:function(e){this._owner=e,this.__s._$7o$initFromPool.call(this)},cleanup:function(){var e=arguments;this.invalidate(),this.__s._$8u$cleanup.apply(this,e)},didEnterPool:function(){this._owner=null,this.wasLaidOut=!1,this.key=null,this._properties.value.readOnly||(this.value=null),this.x=-1,this.y=-1,this.width=-1,this.height=-1,this.scrollX=0,this.scrollY=0,this.__s._$HJ$didEnterPool.call(this)},key:Object(a.c)(),value:Object(a.c)(),x:Object(a.c)(-1),y:Object(a.c)(-1),width:Object(a.c)(-1),height:Object(a.c)(-1),top:Object(a.c)({readOnly:!0,get:function(){return this.y}}),bottom:Object(a.c)({readOnly:!0,get:function(){return this.y+this.height}}),left:Object(a.c)({readOnly:!0,get:function(){return this.x}}),right:Object(a.c)({readOnly:!0,get:function(){return this.x+this.width}}),origin:Object(a.c)({readOnly:!0,get:function(){Object(o.b)("CW.Cell#origin not implemented")}}),cellType:"item",toString:function(){return this.__s._$k8$toString.call(this)+"cellType: "+this.cellType+" x: "+this.x+" y: "+this.y+" width: "+this.width+" height: "+this.height},_owner:null,wasLaidOut:!1,isLaidOut:!1,isReusable:Object(a.c)({readOnly:!0,defaultValue:!0}),moveBy:function(e,t,n){this.x+=t,this.y+=n},invalidate:function(){this.size=null,this.isLaidOut=!1},size:Object(a.c)({strong:!0}),rect:Object(a.c)({get:function(){return this}}),copyTo:function(e){e.size=this.size,e.x=this.x,e.y=this.y,e.height=this.height,e.width=this.width},__superMap:{_$7o$initFromPool:"initFromPool",_$8u$cleanup:"cleanup",_$HJ$didEnterPool:"didEnterPool",_$k8$toString:"toString"},staticMembers:{__QUALIFIED_CLASS_NAME__:"CollectionCell"}})},function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return r});var i=n(177).b("HttpStatusClass",{NONE:"0",SUCCESS:"2",REDIRECT:"3",REQUEST_ERROR:"4",SERVER_ERROR:"5"});function r(e){(!e||e<200||e>599)&&(e=0);var t=e.toString()[0];return i.getItemForValue(t)}},function(e,t,n){"use strict";n.d(t,"b",function(){return m}),n.d(t,"a",function(){return v});var i=n(49),r=n(36),a=n(41),s=n(180),o=n(799),c=n(1187),l=n(1195),u=n(54),d=n(34),h=n(65),p=n(83),f=n(46),g=n(88),m={mixinDependencies:[i.a,r.a],staticMembers:{initialPollingDelay:2e3,numberOfPollsBetweenDelayDoublings:3,currentPollingDelay:a.c({readOnly:!0,get:function(){return this._currentPollingDelay||this.initialPollingDelay}}),getPollingDelayAfterPollCount:function(e){return this.initialPollingDelay*Math.pow(2,e/this.numberOfPollsBetweenDelayDoublings)},_pollingTimer:a.c(s.b(o.a.extend({action:"_pollPollingInstances",getDelayAfterFireCount:function(e){var t=this.owner,n=t.getPollingDelayAfterPollCount(e);return t._currentPollingDelay=n,n}}))),_resetPollingTimerIfAppropriate:Object(p.a)(function(){var e=this._pollingTimer,t=this._currentlyPollingInstances.size>0;(!t||e.fireCount>0)&&e.stop(),t&&e.start(),this._toggleEventListenersToPollingTimer()}),_currentlyPollingInstances:a.c(function(){return new g.b("being polled in PollableSupport")}),_toggleEventListenersToPollingTimer:function(){var e=this._pollingTimer.isRunning;if(this._hasPollingResetEventListeners!==(this._hasPollingResetEventListeners=e)){var t=e?c.a:l.a;t(document,"pointerdown",this._resetPollingTimerIfAppropriate),t(document,"mousemove",this._resetPollingTimerIfAppropriate),t(document,"keypress",this._resetPollingTimerIfAppropriate),t(document,"touchstart",this._resetPollingTimerIfAppropriate)}},_addPollingInstance:function(e){this._currentlyPollingInstances.add(e),this._resetPollingTimerIfAppropriate()},_removePollingInstance:function(e){this._currentlyPollingInstances.remove(e),this._resetPollingTimerIfAppropriate()},_pollPollingInstances:function(){this.pollInstances(f.c.getAutodisposingInstanceFromSlice(this._currentlyPollingInstances.items))},pollInstances:u.a.define()},isPolling:d.b({readOnly:!0,dependencies:["_beginPollingCount"],get:Object.assign(function(){return this._beginPollingCount>0},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])>0}})}),beginPolling:function(){var e=Boolean(this._beginPollingCount);this._beginPollingCount++,e||this.constructor._addPollingInstance(this)},endPolling:function(){if(this._beginPollingCount--,this._beginPollingCount<0)throw new h.a("PollableSupport#endPolling called more times than beginPolling was called.");this._beginPollingCount||this.constructor._removePollingInstance(this)},_beginPollingCount:d.b(0),cleanup:function(){var e=arguments;this.isPolling&&h.b("PollableSupport-mixing object is being released for the final time while still polling."),this.__s._$223$cleanup.apply(this,e)},__superMap:{_$223$cleanup:"cleanup"}},v={mixinDependencies:[m],staticMembers:{init:function(){var e=arguments;this.__s._$27J$init.apply(this,e)},pollInstances:function(e){this.load(e.map(function(e){return e.getPrimaryKey()}),!0)},__superMap:{_$27J$init:"init"}}}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n(1278),r=i.a.extend({staticMembers:{storageKey:"cmm"},ckShareServiceUrlPrefix:i.a.stringProperty("https://ckshare.icloud.com/ws/v1"),ckShareServiceReportAsSpamSuffix:i.a.stringProperty("share/spam/report"),incompleteShortTimeThreshold:i.a.numberProperty(6e5),incompleteShortPercentThreshold:i.a.numberProperty(100),incompleteMediumTimeThreshold:i.a.numberProperty(432e5),incompleteMediumPercentThreshold:i.a.numberProperty(20),incompleteLongCountThreshold:i.a.numberProperty(4)}).create()},function(e,t,n){"use strict";n.d(t,"c",function(){return r}),n.d(t,"b",function(){return o}),n.d(t,"a",function(){return l});var i=n(65);function r(e,t,n){a();var i=e.apply(t,n);return s(),i}function a(){d[u++]=p}function s(){for(var e=d[u-1];p>e;)c(--p);u--}function o(e,t,n){return h[p]=e,p++}function c(e){var t=h[e];h[e]=null,t&&t.release(void 0,void 0)}function l(e,t){h[t]!==e&&Object(i.b)("CW.Utils._cancelAutorelease: attempted to cancel autorelease for a different object",{object:e}),c(t)}var u=0,d=[],h=[],p=0;a(),setTimeout(function(){s()},0),window},,,,,,function(e,t,n){var i=n(231)("meta"),r=n(19),a=n(48),s=n(27).f,o=0,c=Object.isExtensible||function(){return!0},l=!n(18)(function(){return c(Object.preventExtensions({}))}),u=function(e){s(e,i,{value:{i:"O"+ ++o,w:{}}})},d=e.exports={KEY:i,NEED:!1,fastKey:function(e,t){if(!r(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!a(e,i)){if(!c(e))return"F";if(!t)return"E";u(e)}return e[i].i},getWeak:function(e,t){if(!a(e,i)){if(!c(e))return!0;if(!t)return!1;u(e)}return e[i].w},onFreeze:function(e){return l&&d.NEED&&c(e)&&!a(e,i)&&u(e),e}}},function(e,t){e.exports=!1},function(e,t,n){var i=n(24)("unscopables"),r=Array.prototype;void 0==r[i]&&n(43)(r,i,{}),e.exports=function(e){r[i][e]=!0}},function(e,t,n){"use strict";n.d(t,"a",function(){return u}),n(474);var i=n(36),r=n(34),a=n(1177),s=n(1189),o=n(41),c=n(792),l=n(125),u={mixinDependencies:[i.a],staticMembers:{className:Object(o.c)({get:function(e){if(Object(a.a)(e)&&this.hasOwnProperty("_className"))return e;if(!this.superclass.kindOf(u))return!1;if(!this.isNamed)return!1;var t=Object(s.a)(this.name.replace(/\$[0-9]+$/,"")).replace(/\./g,"-");return this._className=t}}),shouldInheritClassNames:!0,_classNamesFromJSClassHierarchyCache:null,_getClassNamesFromJSClassHierarchy:function(){if(this.hasOwnProperty("_classNamesFromJSClassHierarchyCache")&&this._classNamesFromJSClassHierarchyCache)return this._classNamesFromJSClassHierarchyCache;var e;if(this.kindOf(u)){if(!1!==this.className&&""!==this.className&&(e=[this.className]),this.shouldInheritClassNames){var t=this._getClassNamesFromJSClassHierarchy.call(this.superclass);e=e?e.concat(t):t}}else e=[];return this._classNamesFromJSClassHierarchyCache=e}},document:document,element:Object(r.b)(),style:Object(r.b)({readOnly:!0,dependencies:["element"],get:Object.assign(function(){return Object(l.a)(this.element)},{__CW__getter:function(e,t,n,i){return Object(l.a)(i.internalGet(this,t[0+n]))}})}),rect:Object(o.c)({readOnly:!0,get:function(){var e=this.element;return Object(c.a)(e)}}),origin:Object(o.c)({readOnly:!0,get:function(){var e=this.rect;return e?{x:e.left,y:e.top}:null}}),additionalClassNames:Object(r.b)({readOnly:!0}),_suppressApplicationOfClassNamesToElement:!0,_applyClassNamesToElement:Object(i.f)("element","additionalClassNames",function(e,t){if(e&&!this._suppressApplicationOfClassNamesToElement){var n=this.element.classList;t&&n.add.apply(n,t);var i=this.constructor._getClassNamesFromJSClassHierarchy();i.length&&n.add.apply(n,i)}}),init:function(){var e=arguments;this.__s._$1tb$init.apply(this,e),this._suppressApplicationOfClassNamesToElement=!1,this._applyClassNamesToElement()},__superMap:{_$1tb$init:"init"}}},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n(80),r=n(36),a=n(41),s=n(34),o=i.a.extend(r.a,{body:a.c({dependencies:["recordDataHash"],readOnly:!0,get:Object.assign(function(){return this.recordDataHash},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])}})}),originalRecordDataHash:null,recordDataHash:s.b(),type:null,init:function(e,t,n){this.__s._$JG$init.call(this,n),this.recordDataHash=e,this.originalRecordDataHash=t},__superMap:{_$JG$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"CKRecordOperation"}})},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n(34),r={presenterView:i.b(),badgeOrder:i.b(0)}},function(e,t,n){"use strict";n.d(t,"a",function(){return w});var i,r,a=n(1185),s=n(80),o=n(781),c=n(36),l=n(34),u=n(69),d=n(784),h=n(40),p=n(168),f=n(162),g=n(107),m=n(558),v=n(199),_=n(346),b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},y=(i=a.a,(r=function(e){var t=i.create();try{e(t.resolve.bind(t),t.reject.bind(t))}catch(e){t.reject(e)}return t}).all=i.all.bind(i),r.race=i.race.bind(i),r.resolve=i.resolve.bind(i),r.reject=i.reject.bind(i),r);function I(e){return function(){var t=e.apply(this,arguments);return new y(function(e,n){return function i(r,a){try{var s=t[r](a),o=s.value}catch(e){return void n(e)}if(!s.done)return y.resolve(o).then(function(e){i("next",e)},function(e){i("throw",e)});e(o)}("next")})}}var w=s.a.extend(o.a,c.a,{isPreparingToImportItems:l.b(!1),normalizeSelectedIndices:function(e,t,n){return n&&t.length>0?t.toArray():Array.from(Array(e.length).keys())},importMedias:function(e,t,n,i,r){var a=this;return I(regeneratorRuntime.mark(function s(){var o,c,l,h,f,g;return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(a.isPreparingToImportItems=!0,o=a.normalizeSelectedIndices(e,i,r),c=Boolean(void 0!==n&&void 0!==t&&t.isLoaded&&n.assetCount===t.medias.length),l={},c&&(h=a.getItemCountsWithoutLoadingIndices(e,n,o))&&(l.itemCounts=h),s.prev=5,l.itemCounts){s.next=10;break}return s.next=9,a.loadIndicesAndGetItemCounts(t,o);case 9:l.itemCounts=s.sent;case 10:return f=new _.a(e,t,n),s.next=13,f.getIncludeExcludeRecords(o);case 13:g=s.sent,(l.recordCopierJob=p.a.beginNewJob(b({sourceZoneID:t.zone.zoneID,targetZoneID:u.b().cplZone.zoneID,sourceShareName:"cmm-share"},g),g.includeRecords?g.includeRecords.length:g.excludeRecords?e.length-g.excludeRecords.length:0,v.a.ADD_TO_LIBRARY.value)).retain().autorelease(),s.next=22;break;case 18:s.prev=18,s.t0=s.catch(5),d.b.error(s.t0 instanceof Error?s.t0.stack||s.t0.message:String(s.t0)),l.hasError=!0;case 22:return a.isPreparingToImportItems=!1,s.abrupt("return",l);case 24:case"end":return s.stop()}},s,a,[[5,18]])}))()},importSingleMedia:function(e,t){this.isPreparingToImportItems=!0;var n=t.asset.recordName,i=p.a.beginNewJob({sourceZoneID:e,targetZoneID:u.b().cplZone.zoneID,sourceShareName:"cmm-share",includeRecords:[n]},1,v.a.ADD_TO_LIBRARY.value);return i.retain().autorelease(),this.isPreparingToImportItems=!1,i},getItemCountsWithoutLoadingIndices:function(e,t,n){var i=Array.from(new Array(e.length).keys()).map(function(t){return e.encodedObjectAt(t)}),r=n,a=m.a(r,e.length),s=r.filter(function(e){return i[e]}),o=a.filter(function(e){return i[e]}),c=r.length-s.length,l=a.length-o.length;if(!c||!l){var u=t.photosCount,d=t.videosCount,h=this._getItemCountsFromMedias(e,s),p=this._getItemCountsFromMedias(e,o);return c?{photosCount:u-p.photosCount,videosCount:d-p.videosCount,assetCount:r.length}:h}},loadIndicesAndGetItemCounts:function(e,t){var n=this;return I(regeneratorRuntime.mark(function i(){return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,e.loadMediasForIndices(t);case 2:return i.abrupt("return",n._getItemCountsFromMedias(e.medias,t));case 3:case"end":return i.stop()}},i,n)}))()},_getItemCountsFromMedias:function(e,t){var n=t.length,i=0,r=0,a=t,s=Array.isArray(a),o=0;for(a=s?a:a[Symbol.iterator]();;){var c;if(s){if(o>=a.length)break;c=a[o++]}else{if((o=a.next()).done)break;c=o.value}var l=c,u=e.objectAt(l).retain(),d=u.specificType;u.release();var p=h.a.genericTypeForSpecificType(d);p===h.a.Type.IMAGE&&(i+=1),p===h.a.Type.VIDEO&&d!==h.a.Type.AUDIO&&(r+=1)}return{photosCount:i,videosCount:r,assetCount:n}},isMediaImported:function(e){if(!(e instanceof h.a.Constructor))return!1;var t=e.asset,n=t.recordName,i=t.zoneID,r=u.b().cplZoneID,a=p.a.allModels,s=Array.isArray(a),o=0;for(a=s?a:a[Symbol.iterator]();;){var c;if(s){if(o>=a.length)break;c=a[o++]}else{if((o=a.next()).done)break;c=o.value}var l=c;if(l.status!==f.a.FAILED&&g.a.isSameZoneID(l.sourceZoneID,i)&&g.a.isSameZoneID(l.targetZoneID,r)&&l.includesRecordName(n))return!0}return!1},staticMembers:{__QUALIFIED_CLASS_NAME__:"CMMImportMediasManager"}})},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n(41),r=n(204).a.extend({value:Object(i.c)({get:function(){return this.key.value}}),key:Object(i.c)({strong:!0}),handle:Object(i.c)({get:function(){return this.key}}),staticMembers:{__QUALIFIED_CLASS_NAME__:"ItemCell"}})},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var i=n(80),r=n(36),a=n(122),s=n(34),o=n(41),c=n(358),l=i.a.extend(r.a,a.a,c.a).extend({priority:1/0,derivative:s.b({strong:!0}),derivativeId:r.f("derivative","dynamicResJPEGMedRes",function(e,t){var n=e?e.derivativeId:null;e&&t&&(n+="LOGGING_PURPOSES_ONLY"),this.derivativeId=n}),dynamicResJPEGMedRes:s.b(),loggingRequestId:o.c(),derivativeURL:r.f("derivative","dynamicResJPEGMedRes",function(e,t){var n=null;e&&(n=t||e.url),this.derivativeURL=n}),request:s.b({strong:!0}),progress:s.b({readOnly:!0,binding:"request.progress"}),_didBeginWantingCancel:null,_smdls_willDispose:null,_dlm_hasSkipped:!1,_dlm_isInvalid:!1,initFromPool:function(e){this.__s._$19_$initFromPool.call(this),this.derivative=e||null},resolve:function(){this.__s._$1DF$resolve.call(this,this.derivative)},cancel:function(){var e=arguments;this.canceled||(this._didBeginWantingCancel&&this._didBeginWantingCancel(this),this.request=null,this.__s._$1Ig$cancel.apply(this,e))},cleanup:function(){var e=arguments;this._smdls_willDispose&&this._smdls_willDispose(this),this._didBeginWantingCancel=null,this._smdls_willDispose=null,this._dlm_hasSkipped=!1,this._dlm_isInvalid=!1,this.priority=1/0,this.request=null,this.derivative=null,this.dynamicResJPEGMedRes=void 0,this.shouldAddTimingToRequestForLoggingPurposes=!1,this.__s._$1WF$cleanup.apply(this,e)},__superMap:{_$19_$initFromPool:"initFromPool",_$1DF$resolve:"resolve",_$1Ig$cancel:"cancel",_$1WF$cleanup:"cleanup"},staticMembers:{__QUALIFIED_CLASS_NAME__:"DerivativeLoadRef"}})},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=n(177).b("Direction",{EAST:0,NORTHEAST:45,NORTH:90,NORTHWEST:135,WEST:180,SOUTHWEST:225,SOUTH:270,SOUTHEAST:315})},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n(156),r=n(169),a=n(148),s=i.a.extend({staticMembers:{CK_RECORD_TYPE:"CheckIndexingState",__QUALIFIED_CLASS_NAME__:"IndexingState"},state:r.j(a.a,{readOnly:!0}),progress:r.e({readOnly:!0}),error:r.e({readOnly:!0})})},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=n(177).b("SizeClassType",{COMPACT:"COMPACT",REGULAR:"REGULAR"})},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n(177),r=Object(i.b)("STATUS",function(e){e("ACTIVE",function(e){e("QUEUED"),e("TRANSMITTING")}),e("IDLE")})},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i={OWNER:"OWNER",USER:"USER",ADMINISTRATOR:"ADMINISTRATOR"};Object.freeze(i)},function(e,t,n){"use strict";var i=n(46),r=n(69),a=n(107),s={repairMediaIfNecessary:function(e,t,n,i){if(!n&&i.length){for(var r=!1,a=!1,s=0;s<i.length;s++)"ASSET"===i[s].location?r=!0:a=!0;if(a||r){var o=[];a&&this._validDerivativeExistsOnDataHash(t,"resOriginal")&&o.push(t.pk),r&&this._validDerivativeExistsOnDataHash(e,"resJPEGFull")&&o.push(t.pk),this.constructor.repairMedia(o)}}},_validDerivativeExistsOnDataHash:function(e,t){var n="image/jpeg"===e[t+"MimeType"],i=e[t+"Height"]>0,r=e[t+"Width"]>0,a=e[t+"ResDownloadUrl"];return Boolean(n&&i&&r&&a)}};n.d(t,"a",function(){return o}),n.d(t,"b",function(){return _});var o=["JPEGThumb","JPEGMed","JPEGLarge","JPEGFull","VidSmall","VidMed","VidFull","OriginalVidCompl","OriginalAlt","Original"],c={VidMed:"VidSmall",VidFull:"VidMed",JPEGMed:"JPEGThumb",JPEGLarge:"JPEGMed",__unboundedSize_requires_JPEGLarge__:"JPEGLarge"},l={JPEGThumb:172800,JPEGMed:3145728,JPEGLarge:15728640,VidSmall:307200,VidMed:921600},u=["JPEGThumb",l.JPEGThumb,"JPEGMed",l.JPEGMed,"JPEGLarge",l.JPEGLarge,"__unboundedSize_requires_JPEGLarge__",1/0],d=["VidSmall",l.VidSmall,"VidMed",l.VidMed,"VidFull",1/0],h=1.2;function p(e,t,n){var i=c[t||e];return!(!i||n["res"+i+"ResDownloadUrl"])&&n["res"+e+"Width"]*n["res"+e+"Height"]>l[i]}function f(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],a="res"+e,s=t[a+"Width"]*t[a+"Height"],o=function(e,t,n){var i=2===t||-1!==e.indexOf("Vid")?d:1===t?u:null,r=void 0;if(i&&n)for(var a=0,s=i.length;a<s;a++){var o=i[a];if(n<=i[a+1]*h){r=o;break}}return r===e&&(r=void 0),r}(e,i.dataClassType,s),l=p(e,e,t),f=o&&p(e,o,t);if(l||f){var g={cause:"missingDerivative",missingType:f?c[o]:c[e],location:t===n?"ASSET":"MASTER"};r.push(g)}}function g(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r="res"+e;if(!(t[r+"Width"]&&t[r+"Height"]||"audio"===String(t[r+"MimeType"]).slice(0,5))){var a={cause:"height/width",derivativeName:e,width:t[r+"Width"],height:t[r+"Height"],byteSize:t[r+"ResSize"],mimeType:t[r+"MimeType"],location:t===n?"ASSET":"MASTER"};i.push(a)}}function m(e,t){return!e&&(t.push({cause:"allDerivativesMissing",location:"MASTER"}),!0)}function v(e){if(!e)return null;var t=e.derivativeName,n=e.geometricLength,i=e.mimeType;return t||n||i?JSON.stringify({derivativeName:t,geometricLength:n,mimeType:i}):null}var _={mixinDependencies:[s],inspectDerivativesForBadApples:function(e,t,n){var s=r.b();if(!a.a.isSameZoneID(t.zoneID,s.cplZoneID))return!1;for(var c=i.c.getInstance(),l=!1,u=e;u;u=u===e?t:null){for(var d,h=!1,p=0;d=o[p];p++)u["res"+d+"ResDownloadUrl"]&&(h=!0,g(d,u,e,c),f(d,u,e,t,c));u===t&&(l=m(h,c))}var v=c.length>0;return v&&this.reportToSplunk(e,t,c,n),this.repairMediaIfNecessary(e,t,l,c),i.c.disposeInstance(c),v},reportToSplunk:function(e,t,n,i){var r,a,s=Array.from(new Set(n.map(function(e){return e.cause}))).join(" "),o=i,c=this.constructor.feedbackService;c&&c.report("invalidDerivativeInfo",{recordNameAsset:e.recordName,recordNameMaster:t.recordName,causes:s,derivativeIssues:n,containerType:(r=c.routeSelected,a=r&&r.type&&r.type.name,a?r&&"PREDEFINED_SMART"===r.type.name&&"DELETED"===r.recordName?r.recordName:a:"PREDEFINED_SMART"),allKnownDerivatives:o&&o.map(function(e){return{derivativeName:e.derivativeName,width:e.width,height:e.height,byteSize:e.byteSize,mimeType:e.mimeType,location:e.reflectsEdits?"ASSET":"MASTER"}})})},reportIfBetterServerDerivativeAvailable:function(e,t,n){if(!e||!t||!n)return!1;var i,r=!!(i=t)&&i.width*i.height>l.JPEGMed,a=!1,s=null;if(t.geometricLength<n&&t.derivativeId in e.serverDerivativeInfosByDerivativeId)for(var o=e.serverDerivativeInfos,c=o.length-1;c>=0;c--){var u=o[c];if(u!==t&&u.genericType===t.genericType&&u.geometricLength>t.geometricLength){a=!0,s=u;break}}var d=a||r;if(d){var h=e.constructor.feedbackService;h&&h.report("hasBetterDerivative",{renderedDerivativeInfo:v(t),perfectGeometricLength:n,isRenderingLargerThanMedium:r,betterDerivativeInfo:v(s)})}return d}}},,function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var n=0,i=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+i).toString(36))}},function(e,t,n){var i=n(442),r=n(371);e.exports=Object.keys||function(e){return i(e,r)}},function(e,t,n){var i=n(62),r=Math.max,a=Math.min;e.exports=function(e,t){return(e=i(e))<0?r(e+t,0):a(e,t)}},function(e,t,n){var i=n(14),r=n(443),a=n(371),s=n(370)("IE_PROTO"),o=function(){},c=function(){var e,t=n(368)("iframe"),i=a.length;for(t.style.display="none",n(372).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),c=e.F;i--;)delete c.prototype[a[i]];return c()};e.exports=Object.create||function(e,t){var n;return null!==e?(o.prototype=i(e),n=new o,o.prototype=null,n[s]=e):n=c(),void 0===t?n:r(n,t)}},function(e,t,n){var i=n(442),r=n(371).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return i(e,r)}},function(e,t,n){"use strict";var i=n(15),r=n(27),a=n(26),s=n(24)("species");e.exports=function(e){var t=i[e];a&&t&&!t[s]&&r.f(t,s,{configurable:!0,get:function(){return this}})}},function(e,t){e.exports=function(e,t,n,i){if(!(e instanceof t)||void 0!==i&&i in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){var i=n(56),r=n(454),a=n(384),s=n(14),o=n(28),c=n(386),l={},u={};(t=e.exports=function(e,t,n,d,h){var p,f,g,m,v=h?function(){return e}:c(e),_=i(n,d,t?2:1),b=0;if("function"!=typeof v)throw TypeError(e+" is not iterable!");if(a(v)){for(p=o(e.length);p>b;b++)if((m=t?_(s(f=e[b])[0],f[1]):_(e[b]))===l||m===u)return m}else for(g=v.call(e);!(f=g.next()).done;)if((m=r(g,_,f.value,t))===l||m===u)return m}).BREAK=l,t.RETURN=u},function(e,t,n){var i=n(44);e.exports=function(e,t,n){for(var r in t)i(e,r,t[r],n);return e}},function(e,t,n){"use strict";(function(e){var i=t;function r(e,t,n){for(var i=Object.keys(t),r=0;r<i.length;++r)void 0!==e[i[r]]&&n||(e[i[r]]=t[i[r]]);return e}function a(e){function t(e,n){if(!(this instanceof t))return new t(e,n);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),n&&r(this,n)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}i.asPromise=n(856),i.base64=n(857),i.EventEmitter=n(858),i.float=n(859),i.inquire=n(860),i.utf8=n(861),i.pool=n(862),i.LongBits=n(863),i.emptyArray=Object.freeze?Object.freeze([]):[],i.emptyObject=Object.freeze?Object.freeze({}):{},i.isNode=Boolean(e.process&&e.process.versions&&e.process.versions.node),i.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},i.isString=function(e){return"string"==typeof e||e instanceof String},i.isObject=function(e){return e&&"object"==typeof e},i.isset=i.isSet=function(e,t){var n=e[t];return!(null==n||!e.hasOwnProperty(t))&&("object"!=typeof n||(Array.isArray(n)?n.length:Object.keys(n).length)>0)},i.Buffer=function(){try{var e=i.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),i._Buffer_from=null,i._Buffer_allocUnsafe=null,i.newBuffer=function(e){return"number"==typeof e?i.Buffer?i._Buffer_allocUnsafe(e):new i.Array(e):i.Buffer?i._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},i.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,i.Long=e.dcodeIO&&e.dcodeIO.Long||i.inquire("long"),i.key2Re=/^true|false|0|1$/,i.key32Re=/^-?(?:0|[1-9][0-9]*)$/,i.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,i.longToHash=function(e){return e?i.LongBits.from(e).toHash():i.LongBits.zeroHash},i.longFromHash=function(e,t){var n=i.LongBits.fromHash(e);return i.Long?i.Long.fromBits(n.lo,n.hi,t):n.toNumber(Boolean(t))},i.merge=r,i.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},i.newError=a,i.ProtocolError=a("ProtocolError"),i.oneOfGetter=function(e){for(var t={},n=0;n<e.length;++n)t[e[n]]=1;return function(){for(var e=Object.keys(this),n=e.length-1;n>-1;--n)if(1===t[e[n]]&&void 0!==this[e[n]]&&null!==this[e[n]])return e[n]}},i.oneOfSetter=function(e){return function(t){for(var n=0;n<e.length;++n)e[n]!==t&&delete this[e[n]]}},i.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},i._configure=function(){var e=i.Buffer;e?(i._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,n){return new e(t,n)},i._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):i._Buffer_from=i._Buffer_allocUnsafe=null}}).call(this,n(6))},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(e){function t(n){!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return i.name="MessagingError",i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(Error)},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n(49),r=n(54),a={mixinDependencies:[i.a],applicationWillFinishLaunching:r.a.define(),applicationDidFinishLaunching:r.a.define()}},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var i=n(80),r=n(122),a=n(36),s=n(49),o=n(41),c=n(65),l=n(39),u=n(126),d=n(34),h=n(54),p=n(246),f=i.a.extend(r.a,a.a,s.a).extend({isCacheableInStore:o.c({readOnly:!0,get:function(){return Boolean(this.isLoaded&&this._stopgap_shouldCache)}}),_stopgap_shouldCache:!0,staticMembers:{create:function(e,t){var i=arguments;if(this!==f)return this.__s._$ds$create.apply(this,i);e||c.b("Attempting to get derivative without providing a derivativeId or derivativeInfo.");var r=e.derivativeId||e,a=e===r?t.findOrCreatePlaceholder(t.mediaPKForDerivativeId(r)).derivativeInfoForDerivativeId(r):e;switch(a||c.b("Could not find derivativeInfo object for derivative. The Media is likely unloaded."),a.genericType){case t.Type.IMAGE:return n(490).imageDerivativeStore.getItem(a,t);case t.Type.VIDEO:return n(1132).videoDerivativeStore.getItem(a,t);default:c.b("Attempting to get derivative of unknown type "+a.genericType)}},__superMap:{_$ds$create:"create"},__QUALIFIED_CLASS_NAME__:"Derivative"},initFromPool:function(e,t){this.__s._$1AF$initFromPool.call(this);var n=t.findOrCreatePlaceholder(e.mediaPK);l.a.pause(),this.media=n,Object(p.b)(e,this),l.a.resume(),n.addDerivative(this)},cleanup:function(){var e=arguments;this.media.removeDerivative(this),this._stopgap_shouldCache=!0,l.a.pause(),this.media=null,Object(p.b)(null,this),l.a.resume(),this.__s._$1Pp$cleanup.apply(this,e)},element:u.a.create(),rectInElement:u.a.create(),isLoaded:u.a.create(),physicalGeometricLength:d.b({readOnly:!0,dependencies:["physicalWidth","physicalHeight"],get:Object.assign(function(){return Math.max(this.physicalWidth,this.physicalHeight)},{__CW__getter:function(e,t,n,i){return Math.max(i.internalGet(this,t[0+n]),i.internalGet(this,t[1+n]))}})}),physicalWidth:d.b({readOnly:!0,dependencies:["rectInElement"],get:Object.assign(function(){var e=this.rectInElement;return e?e.width:0},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return r?r.width:0}})}),physicalHeight:d.b({readOnly:!0,dependencies:["rectInElement"],get:Object.assign(function(){var e=this.rectInElement;return e?e.height:0},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return r?r.height:0}})}),media:d.b({strong:!0}),_notifyIsLoaded:a.f("isLoaded","media",function(e,t){e&&t&&t.derivativeMayHaveLoaded(this)}),derivativeId:d.b({didChange:function(e){this.__derivativeId_for_toString__=e}}),_load:h.a.create(),resetForChangeset:function(){this._stopgap_shouldCache=!1},toString:function(){var e=arguments,t=this.__s._$21M$toString.apply(this,e);return this.isInitialized?t.slice(0,-1)+":"+this.__derivativeId_for_toString__+t.slice(-1):t},__superMap:{_$1AF$initFromPool:"initFromPool",_$1Pp$cleanup:"cleanup",_$21M$toString:"toString"}})},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i={UNKNOWN:"UNKNOWN",INVITED:"INVITED",PENDING:"PENDING",ACCEPTED:"ACCEPTED",REMOVED:"REMOVED"};Object.freeze(i)},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n(80),r=n(36),a=n(41),s=n(34),o=i.a.extend(r.a,{body:a.c({dependencies:["recordName"],readOnly:!0,get:Object.assign(function(){return this.recordName},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])}})}),recordName:s.b(),type:"FETCH",init:function(e){this.__s._$7R$init.call(this),this.recordName=e},__superMap:{_$7R$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"FetchRecordOperation"}})},function(e,t,n){"use strict";var i,r,a=n(34),s=n(36),o=n(396),c=n(39),l=n(1185),u=n(775),d=n(65),h=n(174),p=n(46),f=n(228),g=n(249),m={renderableImageDerivativeInfos:{parentSubset:"derivativeInfos",additionalDependencies:["isEdited"],filter:function(e,t){return Boolean(e.genericType===this.constructor.Type.IMAGE&&e.reflectsEdits===t&&y(e.mimeType)&&this.constructor.validateDerivativeInfo(e))},postProcess:(i=void 0,r=function(e){return Boolean(e.genericType===i.Type.IMAGE&&y(e.mimeType)&&i.validateDerivativeInfo(e))},function(e,t,n){if(!e.length){var a=this.constructor.feedbackService,s=this.constructor.FeedbackErrorType;a&&s&&a.reportError({errorType:s.WEB_SERVICE.value,errorState:"Had to fall back to unedited IMAGE derivative(s) for display."}),i||(i=this.constructor),v(t,r,e)}})},renderableVideoDerivativeInfos:{parentSubset:"serverDerivativeInfos",additionalDependencies:["isEdited"],filter:function(e,t){return Boolean(e.genericType===this.constructor.Type.VIDEO&&e.reflectsEdits===t&&y(e.mimeType)&&this.constructor.validateDerivativeInfo(e))},postProcess:function(){var e=void 0,t=function(t){return Boolean(t.genericType===e.Type.VIDEO&&y(t.mimeType)&&e.validateDerivativeInfo(t))};return function(n,i,r){if(!n.length){var a=this.constructor.feedbackService,s=this.constructor.FeedbackErrorType;a&&s&&this.constructor.feedbackService.reportError({errorType:s.WEB_SERVICE.value,errorState:"Had to fall back to unedited VIDEO derivative(s) for display."}),e||(e=this.constructor),v(i,t,n)}}}()},renderableUneditedImageDerivativeInfos:{parentSubset:"derivativeInfos",filter:function(e){return Boolean(e.genericType===this.constructor.Type.IMAGE&&!e.reflectsEdits&&y(e.mimeType)&&this.constructor.validateDerivativeInfo(e))}},renderableUneditedVideoDerivativeInfos:{parentSubset:"serverDerivativeInfos",filter:function(e){return Boolean(e.genericType===this.constructor.Type.VIDEO&&!e.reflectsEdits&&y(e.mimeType)&&this.constructor.validateDerivativeInfo(e))}},originalDerivativeInfos:{parentSubset:"serverDerivativeInfos",filter:function(e){return e.isOriginal}},originalVideoDerivativeInfos:{parentSubset:"originalDerivativeInfos",filter:function(e){return e.genericType===this.constructor.Type.VIDEO}},emailableDerivativeInfos:{parentSubset:"serverDerivativeInfos",additionalDependencies:["genericType","isEdited"],filter:function(e,t,n){return Boolean(e.genericType===t&&e.reflectsEdits===n)}},downloadableDerivativeInfos:{parentSubset:"serverDerivativeInfos",additionalDependencies:["genericType","isEdited"],filter:function(e,t,n){return Boolean((e.genericType===t||e.isOriginal)&&e.reflectsEdits===n)}}};function v(e,t,n){n.length&&(n.length=0);for(var i=e.length,r=0;r<i;r++){var a=e[r];t(a)&&n.push(a)}return n}var _,b,y=(_=document.createElement("video"),b={},function(e){var t=e.slice(0,5);if("image"===t)return"image/jpeg"===e||"image/png"===e||"image/gif"===e||"image/bmp"===e;if("video"===t||"audio"===t){var n=b[e];if(void 0!==n||!_.canPlayType)return n||!1;var i=_.canPlayType(e);return b[n]="maybe"===i||"probably"===i}return!1});function I(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return"application/pdf"===e||t&&n||y(e)}n.d(t,"a",function(){return w}),n.d(t,"b",function(){return T});var w={mixinDependencies:[f.b],staticMembers:{derivativeInfoPool:p.b.create(Object),isURLExpiryTooSoon:function(e){return e.urlExpiry<Date.now()},synthesizeDerivativeInfo:function(e,t,n,i){for(var r=this.derivativeInfoPool.getInstance(),a=C.length;a--;){var s=C[a];r[s]=e[s]}return r.width=t,r.height=n,r.byteSize=e.byteSize*t*n/(e.width*e.height)|0,r.fileName=r.url=r.downloadUrl=r.downloadGeostrippedUrl=r.urlExpiry=null,r.isOriginal=!1,i&&r.outdateCount++,this.computeDerivativeInfoFields(r),r.synthesizedFromDerivativeId=e.synthesizedFromDerivativeId||e.derivativeId,r},computeDerivativeInfoFields:function(e){for(var t,n=0;t=A[n];n++)e[t]=O[t].call(e)},mediaPKForDerivativeId:function(e){var t=void 0;if(e&&"["===e[11]){var n=e.indexOf("]");n>12&&(t=e.slice(12,n))}return t},isDerivativeSubsetKey:function(e){return m.hasOwnProperty(this.propertyKeyForDerivativeSubset(e))},propertyKeyForDerivativeSubset:function(e){return e+"DerivativeInfos"},validateDerivativeInfo:function(e){return e.synthesizedFromDerivativeId,!0}},areClientDerivativesDirty:a.b(!1),cleanup:function(){var e=arguments;return this.areClientDerivativesDirty=!1,this.__s._$2Ht$cleanup.apply(this,e)},serverDerivativeInfos:a.b({readOnly:!0,dependencies:["primaryMaster.dataDidChange","primaryAsset.dataDidChange","primaryMaster.geostrippedURLs","primaryAsset.geostrippedURLs","primaryMaster.filenameEnc","pk","genericType","isHEVCVideo","isHEICImage","areClientDerivativesDirty"],get:Object.assign(function(){var e=this.constructor,t=this.primaryAsset,n=this.primaryMaster,i=e.derivativeInfoPool,r=this._serverDerivativeInfos_lastRet;if(r&&(r.forEach(i.disposeInstance,i),p.c.autodisposeInstance(r)),!t||!n)return this._serverDerivativeInfos_lastRet=null;var a=p.c.getInstance();if(this.areClientDerivativesDirty)return this._serverDerivativeInfos_lastRet=a;for(var s=!1,o=this.pk,c=this.genericType,l=this.isHEVCVideo,u=this.isHEICImage,d=t.getDataHash(),h=n.getDataHash(),m=t.geostrippedURLs,v=n.geostrippedURLs,_=this.getPath("primaryMaster.filenameEnc"),b=_?_.slice(0,(_.lastIndexOf(".")+1||_.length+1)-1):"media",y=d;y;y=y===d?h:null)for(var I=0,w=f.a.length;I<w;I++){var S=f.a[I],C="res"+S,O=y[C+"ResDownloadUrl"];if(O){var A=y===d?m:v,E=A?A[C+"ResGeostrippedDownloadUrl"]:"";if(!A||E){var T=i.getInstance(),M="Original"===S,P=M||/Original/.test(S),R=P&&(l||u);T.derivativeName=S,T.mediaPK=o,P&&y.originalOrientation>=5?(T.width=y[C+"Height"],T.height=y[C+"Width"]):(T.width=y[C+"Width"],T.height=y[C+"Height"]),T.byteSize=y[C+"ResSize"],T.urlExpiry=(y._receiptTimestamp||Date.now())+18e5,T.isOriginal=P,T.reflectsEdits=y===d;var x=y[C+"FileType"],F=y[C+"MimeType"],k=g.b[x],V=M&&_?_:k?b+"."+k:b,j=encodeURIComponent(V),B=O.replace("${f}",j),U=E.replace("${f}",j),W=void 0,G=void 0;if("com.apple.quicktime-movie"===x){W=R?"application/octet-stream":"video/mp4";var H=g.a[W],$=H?b+"."+H:b;G=O.replace("${f}",encodeURIComponent($))}else W=F,G=B;T.downloadUrl=B,T.downloadGeostrippedUrl=U,T.url=G,T.mimeType=W,T.fileName=V,T.isHighEfficiencyCodec=R,T.genericType=M?c:P?/Vid/.test(S)?e.Type.VIDEO:c:L(W,e),T.outdateCount=0|N[o],this.constructor.computeDerivativeInfoFields(T),a.push(T),s=s||z&&D(z,T)>0;var z=T}}}return s&&a.sort(D),this._serverDerivativeInfos_lastRet=a},{__CW__getter:function(e,t,n,i){var r=this.constructor,a=this.primaryAsset,s=this.primaryMaster,o=r.derivativeInfoPool,c=this._serverDerivativeInfos_lastRet;if(c&&(c.forEach(o.disposeInstance,o),p.c.autodisposeInstance(c)),!a||!s)return this._serverDerivativeInfos_lastRet=null;var l=p.c.getInstance();if(i.internalGet(this,t[9+n]))return this._serverDerivativeInfos_lastRet=l;for(var u=!1,d=i.internalGet(this,t[5+n]),h=i.internalGet(this,t[6+n]),m=i.internalGet(this,t[7+n]),v=i.internalGet(this,t[8+n]),_=a.getDataHash(),b=s.getDataHash(),y=a.geostrippedURLs,I=s.geostrippedURLs,w=i.internalGetPath(this,t[4+n]),S=w?w.slice(0,(w.lastIndexOf(".")+1||w.length+1)-1):"media",C=_;C;C=C===_?b:null)for(var O=0,A=f.a.length;O<A;O++){var E=f.a[O],T="res"+E,M=C[T+"ResDownloadUrl"];if(M){var P=C===_?y:I,R=P?P[T+"ResGeostrippedDownloadUrl"]:"";if(!P||R){var x=o.getInstance(),F="Original"===E,k=F||/Original/.test(E),V=k&&(m||v);x.derivativeName=E,x.mediaPK=d,k&&C.originalOrientation>=5?(x.width=C[T+"Height"],x.height=C[T+"Width"]):(x.width=C[T+"Width"],x.height=C[T+"Height"]),x.byteSize=C[T+"ResSize"],x.urlExpiry=(C._receiptTimestamp||Date.now())+18e5,x.isOriginal=k,x.reflectsEdits=C===_;var j=C[T+"FileType"],B=C[T+"MimeType"],U=g.b[j],W=F&&w?w:U?S+"."+U:S,G=encodeURIComponent(W),H=M.replace("${f}",G),$=R.replace("${f}",G),z=void 0,K=void 0;if("com.apple.quicktime-movie"===j){z=V?"application/octet-stream":"video/mp4";var Q=g.a[z],q=Q?S+"."+Q:S;K=M.replace("${f}",encodeURIComponent(q))}else z=B,K=H;x.downloadUrl=H,x.downloadGeostrippedUrl=$,x.url=K,x.mimeType=z,x.fileName=W,x.isHighEfficiencyCodec=V,x.genericType=F?h:k?/Vid/.test(E)?r.Type.VIDEO:h:L(z,r),x.outdateCount=0|N[d],this.constructor.computeDerivativeInfoFields(x),l.push(x),u=u||Y&&D(Y,x)>0;var Y=x}}}return u&&l.sort(D),this._serverDerivativeInfos_lastRet=l}})}),earliestDerivativeURLExpiry:a.b({readOnly:!0,dependencies:["serverDerivativeInfos"],get:function(){var e=this.serverDerivativeInfos;if(!e||!e.length)return-1/0;for(var t,n=1/0,i=0;t=e[i];i++)t.urlExpiry<n&&(n=t.urlExpiry);return n}}),_inspectAssetMasterPairForBadApples:s.f({inputs:["primaryAsset.loadStatus","primaryMaster.loadStatus"],callback:function(e,t){if(e===o.a.LOADED&&t===o.a.LOADED){var n=this.serverDerivativeInfos,i=this.primaryAsset,r=this.primaryMaster,a=i.getDataHash(),s=r.getDataHash();this.inspectDerivativesForBadApples(a,s,n)}}}),serverDerivativeInfosByDerivativeId:S("serverDerivativeInfos"),derivativeInfos:a.b({readOnly:!0,cacheable:!0,dependencies:["serverDerivativeInfos","serverDerivativeInfosByDerivativeId","syntheticDerivativeDidLoad","syntheticDerivativeDidUnload"],get:Object.assign(function(){var e=this.serverDerivativeInfos,t=this.serverDerivativeInfosByDerivativeId,n=this._derivativeInfos_lastRet;if(n&&p.c.autodisposeInstance(n),!e||!t)return this._derivativeInfos_lastRet=null;var i=this._loadedDerivativeSet;if(!i)return this._derivativeInfos_lastRet=null,e;for(var r,a=p.c.getInstance(),s=e,o=p.c.getInstance(),c=i&&i.items,l=0|N[this.pk],u=0;r=c[u];u++)t[r.derivativeId]||r.outdateCount!==l||o.push(r);o.sort(D);for(var d=0,h=0,f=o.length,g=s.length;d<f||h<g;){var m=s[h],v=o[d];m&&(!v||m.geometricLength<v.geometricLength)?(a.push(m),h++):v&&(a.push(v),d++)}return p.c.disposeInstance(o),this._derivativeInfos_lastRet=a},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]),s=this._derivativeInfos_lastRet;if(s&&p.c.autodisposeInstance(s),!r||!a)return this._derivativeInfos_lastRet=null;var o=this._loadedDerivativeSet;if(!o)return this._derivativeInfos_lastRet=null,r;for(var c,l=p.c.getInstance(),u=r,d=p.c.getInstance(),h=o&&o.items,f=0|N[this.pk],g=0;c=h[g];g++)a[c.derivativeId]||c.outdateCount!==f||d.push(c);d.sort(D);for(var m=0,v=0,_=d.length,b=u.length;m<_||v<b;){var y=u[v],I=d[m];y&&(!I||y.geometricLength<I.geometricLength)?(l.push(y),v++):I&&(l.push(I),m++)}return p.c.disposeInstance(d),this._derivativeInfos_lastRet=l}})}),syntheticDerivativeDidLoad:s.g(),syntheticDerivativeDidUnload:s.g(),derivativeInfosByDerivativeId:S("derivativeInfos"),getDerivativeInfoSubset:function(e){return this[this.constructor.propertyKeyForDerivativeSubset(e||"renderableImage")]},resetDerivatives:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.pk;N[t]=1+(0|N[t]),c.a.pause(),this.areClientDerivativesDirty=e,this.propertyChanged("dimensions"),this.propertyChanged("serverDerivativeInfos"),this.derivativesWereReset(),c.a.resume()},derivativesWereReset:s.g(),fetchDerivativeInfo:function(e){var t=this;this.retain(this);var n=l.a.create(),i=n.finally(function(){t.release(t)}),r=function(){n.reject(new Error("Failed to load media."))},a=function(i){var r=e(t);return r?t.constructor.validateDerivativeInfo(r)?t.constructor.isURLExpiryTooSoon(r)?"expired":(n.resolve(r),"successful"):(i&&n.reject(new Error("No valid derivativeInfo found.")),"invalid"):(i&&n.reject(new Error("No derivativeInfo found.")),"nonexistent")};return"successful"===a(!1)?i:(this.load().then(function(){if(t.propertyChanged("serverDerivativeInfos"),"expired"===a(!0))return t.reload().then(function(){t.propertyChanged("serverDerivativeInfos"),"expired"===a(!0)&&n.reject(new Error("After Media reload, derivativeInfo is still expired."))},r)},r),i)},getDerivativeInfosForDownload:function(e,t,n,i,r,a,s){if(u.a(e)){var o=e;return this.getDerivativeInfosForDownload(Boolean(o.wantsOriginalFormats),Boolean(o.wantsMostCompatibleFormats),Boolean(o.wantsEditedVersions),Boolean(o.wantsUneditedVersions),Boolean(o.wantsLivePhotoVideoComplement),Boolean(o.allowsLocationMetadata),Boolean(o.isDeviceH265Compatible))}e||t||d.b("wantsOriginalFormats and wantsMostCompatibleFormats were both passed false. One must be true."),n||i||d.b("wantsEditedVersions and wantsUneditedVersions were both passed false. One must be true.");for(var c=this.serverDerivativeInfos,l=p.c.getAutodisposingInstance(),h=p.g.getAutodisposingInstance(),f=this.isLivePhoto,g=this.genericType,m=this.constructor.Type,v=m.IMAGE,_=m.VIDEO,b=!1,y=!1,I=!0;!0===I||!1===I||void 0===I;I=!I&&(!1===I?void 0:null))if((void 0!==I||b||y)&&(!0!==I||n)&&(!1!==I||i)){for(var w=!1,S=!1,C=!0;!0===C||!1===C||void 0===C;C=!C&&(!1===C?void 0:null))if((void 0!==C||w||S)&&(!0!==C||e)&&(!1!==C||t)){var O=g===v,A=g===_||f&&r,E=this._searchDerivativeInfos(c,l,h,v,_,C,I,O,A,a,s);w=O=Boolean(E%2),S=A=Boolean(E/2|0)}b=w,y=S}return l},_searchDerivativeInfos:function(e,t,n,i,r,a,s,o,c,l,u){for(var d,h=e.length-1;d=e[h];h--)if((l||d.downloadGeostrippedUrl)&&(void 0===s||d.reflectsEdits===s)){var p=I(d.mimeType,d.isHighEfficiencyCodec,u),f=d.isOriginal;if(void 0===a||a&&f||!a&&p){var g=d.genericType;(c||a&&f)&&g===r&&(c=!1,n.get(d)||t.push(d),n.set(d,!0)),(o||a&&f)&&g===i&&(o=!1,n.get(d)||t.push(d),n.set(d,!0))}}return o+2*c},__superMap:{_$2Ht$cleanup:"cleanup"}};function S(e){var t="_objectVersionOf_"+e+"_lastRet";return a.b({readOnly:!0,dependencies:[e],get:function(e,n,i,r){var a=r.internalGet(this,n[0+i]),s=p.h;if(this[t]&&s.disposeInstance(this[t]),!a)return this[t]=null;for(var o=s.getInstance(),c=0;c<a.length;c++){var l=a[c];o[l.derivativeId]=l}return this[t]=o}})}Object.keys(m).forEach(function(e){var t=m[e],n="_"+e+"_lastRet";w[e]=a.b({readOnly:!0,dependencies:[t.parentSubset].concat(t.additionalDependencies||[]),get:function(e,i,r,s){var o=s.internalGet(this,i[0+r]),c=a.a.getDependencyValuesAsTempArray(this,i,r,s),l=this[n];if(l&&p.c.autodisposeInstance(l),!o)return this[n]=null;for(var u=h.a(c,1,1),d=p.c.getInstance(),f=o.length,g=0;g<f;g++){var m=u[0]=o[g];t.filter.apply(this,u)&&d.push(m)}if(t.postProcess){var v=h.a(c,2,1);v[0]=d,v[1]=o,t.postProcess.apply(this,v)}return this[n]=d}})});var C=["derivativeName","mediaPK","width","height","byteSize","genericType","mimeType","isOriginal","reflectsEdits","urlExpiry","url","downloadUrl","downloadGeostrippedUrl","fileName","outdateCount"],O={derivativeId:function(){return"derivative ["+this.mediaPK+"] ["+this.width+"x"+this.height+"] ["+this.mimeType+"]"+(this.isOriginal?" [original]":"")+(this.reflectsEdits?" [edited]":"")+(this.outdateCount?" ["+this.outdateCount+" outdate"+(1!==this.outdateCount?"s":"")+"]":"")},synthesizedFromDerivativeId:function(){return null},geometricLength:function(){return Math.max(this.width,this.height)}},A=Object.keys(O),E=C.concat(A);function T(e,t){for(var n,i=e||P,r=0;n=E[r];r++)t[n]=i[n]}var M,D=function(e,t){return e.geometricLength-t.geometricLength||Number(e.isOriginal)-Number(t.isOriginal)||e.byteSize-t.byteSize},L=(M={},function(e,t){var n=M[e];if(n)return n;var i=e.substring(0,e.indexOf("/")+1||e.length),r="application/pdf"===e?t.Type.IMAGE:"image/"===i?t.Type.IMAGE:"video/"===i?t.Type.VIDEO:"audio/"===i?t.Type.VIDEO:t.Type.OTHER;return M[e]=t.genericTypeForSpecificType(r)}),N={},P={}},function(e,t,n){"use strict";n.d(t,"a",function(){return b});var i=n(80),r=n(122),a=n(180),s=n(81),o=n(312),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=s.b.Possible,d=s.b.Began,h=s.b.Changed,p=s.b.Ended,f=s.b.Failed,g=s.b.Cancelled,m=["pointerUp","pointerCancel"],v=function(){function e(){l(this,e),this._map=new Map}return e.prototype.get=function(){var e=this._map;return e.get.apply(e,arguments)},e.prototype.set=function(){var e=this._map;return e.set.apply(e,arguments)},e.prototype.add=function(e,t){var n=this._map,i=n.get(e);i||(i=new Set,n.set(e,i)),i.add(t)},e.prototype.has=function(e,t){var n=this._map.get(e);return!!n&&n.has(t)},e.prototype.hasAny=function(e){var t=this._map.get(e);return!!t&&t.size>0},e.prototype.delete=function(e,t){var n=this._map,i=n.get(e);i&&(i.delete(t),0===i.size&&n.delete(e))},e.prototype.deleteAll=function(e){this._map.delete(e)},e.prototype.clear=function(){this._map.clear()},e.prototype.keys=function(){return this._map.keys()},e.prototype.values=function(){return this._map.values()},e.prototype.entries=function(){return this._map.entries()},c(e,[{key:"size",get:function(){return this._map.size}}]),e}(),_=function(){function e(){l(this,e),this._map=new v,this._reverseMap=new v}return e.prototype.add=function(e,t){var n=this._map,i=this._reverseMap;n.add(e,t),i.add(t,e)},e.prototype.get=function(e){return this._map.get(e)},e.prototype.getKeys=function(e){return this._reverseMap.get(e)},e.prototype.has=function(e,t){return this._map.has(e,t)},e.prototype.hasKey=function(e){return this._map.hasAny(e)},e.prototype.hasValue=function(e){return this._reverseMap.hasAny(e)},e.prototype.delete=function(e,t){var n=this._map,i=this._reverseMap;n.delete(e,t),i.delete(t,e)},e.prototype.deleteKey=function(e){var t=this._map,n=this._reverseMap,i=t.get(e);i&&(i.forEach(function(t){return n.delete(t,e)}),t.deleteAll(e))},e.prototype.deleteValue=function(e){var t=this._map,n=this._reverseMap,i=n.get(e);i&&(i.forEach(function(n){return t.delete(n,e)}),n.deleteAll(e))},e.prototype.clear=function(){var e=this._map,t=this._reverseMap;e.clear(),t.clear()},e.prototype.keys=function(){return this._map.keys()},e.prototype.values=function(){return this._reverseMap.keys()},e.prototype.entries=function(){return this._map.entries()},c(e,[{key:"sizeKeys",get:function(){return this._map.size}},{key:"sizeValues",get:function(){return this._reverseMap.size}}]),e}(),b=i.a.extend(r.a,{staticMembers:{_sequences:Object(a.b)(Set),addGestureRecognizersWithEvent:function(e,t,n){if("pointerDown"===e){var i=this._sequences,r=Array.isArray(i),a=0;for(i=r?i:i[Symbol.iterator]();;){var s;if(r){if(a>=i.length)break;s=i[a++]}else{if((a=i.next()).done)break;s=a.value}var o=s;o.retain(this,"GestureRecognitionEventSequence#handleEvent: existing sequence");var c=o.addGestureRecognizersWithEvent(n,t);if(o.release(this,"GestureRecognitionEventSequence#handleEvent: existing sequence"),c)return!0}var l=this.create().retain(this,"GestureRecognitionEventSequence#handleEvent: new sequence"),u=l.addGestureRecognizersWithEvent(n,t);return u&&this._sequences.add(l),l.release(this,"GestureRecognitionEventSequence#handleEvent: new sequence"),u}},handleEvent:function(e,t){if("pointerDown"!==e)return!1;var n=t.pointerId,i=this._sequences,r=Array.isArray(i),a=0;for(i=r?i:i[Symbol.iterator]();;){var s;if(r){if(a>=i.length)break;s=i[a++]}else{if((a=i.next()).done)break;s=a.value}var o=s;if(o.gestureRecognizersByPointerId.hasKey(n))return o.handleEvent(e,t),!0}return!1},cancelGestureRecognizer:function(e){e.state=f,e.reset()},__QUALIFIED_CLASS_NAME__:"GestureRecognitionEventSequence"},gestureRecognizers:Object(a.b)(Set),addGestureRecognizersWithEvent:function(e,t){var n=this,i=t.pointerId,r=this.gestureRecognizers,a=this.gestureRecognizersByPointerId,s=this.gestureRecognizerFailureDependencies;if(!a.hasKey(i)&&r.size){var o=r,c=Array.isArray(o),l=0;for(o=c?o:o[Symbol.iterator]();;){var d;if(c){if(l>=o.length)break;d=o[l++]}else{if((l=o.next()).done)break;d=l.value}var h=d;this._isGestureRecognizerAllowedToHandleEvents(h)&&h.shouldReceive(t)&&this._gestureRecognizerIsInterestedInPointerId(h,i)}if(!a.hasKey(i))return!1}var p=Array.from(e).filter(function(e){return e.isEnabled&&!e.sequence}).filter(function(e){return e.shouldReceive(t)});if(p.forEach(function(e){return n._gestureRecognizerIsInterestedInPointerId(e,i)}),0===p.length)return a.hasKey(i);var g=p,m=Array.isArray(g),v=0;for(g=m?g:g[Symbol.iterator]();;){var _;if(m){if(v>=g.length)break;_=g[v++]}else{if((v=g.next()).done)break;_=v.value}var b=_;r.add(b),b.sequence=this;var y=r,I=Array.isArray(y),w=0;for(y=I?y:y[Symbol.iterator]();;){var S;if(I){if(w>=y.length)break;S=y[w++]}else{if((w=y.next()).done)break;S=w.value}var C=S;if(C!==b&&((b.shouldRequireFailureOf(C)||C.shouldBeRequiredToFailBy(b))&&s.add(b,C),C.shouldRequireFailureOf(b)||b.shouldBeRequiredToFailBy(C))){var O=C.state;if(O!==u&&O!==f){b.state=f;continue}s.add(C,b)}}}return!0},handleEvent:function(e,t){var n=this,i=this.gestureRecognizers,r=this.gestureRecognizerFailureDependencies,a=t.pointerId;this._isHandlingEvent=!0,i.forEach(function(i){if(n._isGestureRecognizerAllowedToHandleEvents(i)&&n._isGestureRecognizerInterestedInEvent(i,t)){i[e](t);var a=i.state;!i.shouldPreventDefault||a!==d&&a!==h&&a!==p||r.hasKey(i)||t.preventDefault()}}),this._isHandlingEvent=!1,this._flushPendingStateChanges(),this.isPooled||m.includes(e)&&(this.gestureRecognizersByPointerId.deleteKey(a),this.releasePointerCapture(a))},_pendingStateChanges:Object(a.b)(Set),_flushPendingStateChanges:function(){var e=this,t=this._pendingStateChanges;t.forEach(function(t){e.isPooled||e.gestureRecognizerStateChanged(t,t.state)}),t.clear()},gestureRecognizerStateChanged:function(e,t){if(this._isHandlingEvent)this._pendingStateChanges.add(e);else switch(t){case g:this._callActionIfAllowed(e);case f:this._gestureRecognizerDidFail(e),this._cleanupGestureRecognizer(e);break;case d:case h:case p:this._callActionIfAllowed(e);break;default:throw new Error("GestureRecognitionEventSequence#gestureRecognizerStateChanged: invalid state "+t)}},gestureRecognizerIgnoredPointerId:function(e,t){var n=this.gestureRecognizersByPointerId;n.delete(t,e),n.hasKey(t)||this.releasePointerCapture(t)},gestureRecognizerFailureDependencies:Object(a.b)(_),gestureRecognizersByPointerId:Object(a.b)(_),cleanup:function(){var e=this;this.gestureRecognizers.forEach(function(t){return e._cleanupGestureRecognizer(t)}),this.gestureRecognizersByPointerId.clear(),this.gestureRecognizerFailureDependencies.clear(),this._begunGestureRecognizers.clear(),this._pendingStateChanges.clear(),this._isHandlingEvent=!1,this.constructor._sequences.delete(this),this.__s._$4IW$cleanup.call(this)},_cleanupGestureRecognizer:function(e){var t=this.gestureRecognizersByPointerId,n=t.getKeys(e);if(t.deleteValue(e),n){var i=n,r=Array.isArray(i),a=0;for(i=r?i:i[Symbol.iterator]();;){var s;if(r){if(a>=i.length)break;s=i[a++]}else{if((a=i.next()).done)break;s=a.value}var o=s;t.hasKey(o)||this.releasePointerCapture(o)}}this.gestureRecognizerFailureDependencies.deleteValue(e),this.gestureRecognizers.delete(e),this._pendingStateChanges.delete(e),e.reset()},_begunGestureRecognizers:Object(a.b)(Set),_gestureRecognizerDidBegin:function(e){var t=this._begunGestureRecognizers;if(!t.has(e)){t.add(e);var n=this.gestureRecognizerFailureDependencies;Array.from(this.gestureRecognizers).filter(function(t){return t!==e}).filter(function(t){return!y(e,t)}).filter(function(t){return!n.has(t,e)}).forEach(function(e){return e.state=f})}},_gestureRecognizerDidFail:function(e){var t=this,n=this.gestureRecognizerFailureDependencies,i=n.getKeys(e);n.deleteValue(e),i&&i.forEach(function(e){n.hasKey(e)||t._callActionIfAllowed(e)})},_gestureRecognizerIsInterestedInPointerId:function(e,t){var n=this.gestureRecognizersByPointerId;n.hasKey(t)||this.setPointerCapture(t),n.add(t,e)},_isGestureRecognizerInterestedInEvent:function(e,t){return this.gestureRecognizersByPointerId.has(t.pointerId,e)},_isGestureRecognizerAllowedToHandleEvents:function(e){var t=e.state;return t===u||t===d||t===h},_callActionIfAllowed:function(e){var t=e.state;t!==u&&t!==f&&(this.gestureRecognizerFailureDependencies.hasKey(e)||(e.gestureWasRecognized(),t!==d&&t!==h||this._gestureRecognizerDidBegin(e),t===p&&(Array.from(this.gestureRecognizers).filter(function(t){return t!==e}).filter(function(t){return!y(e,t)}).forEach(function(e){return e.state=f}),this._cleanupGestureRecognizer(e))))},__superMap:{_$4IW$cleanup:"cleanup"}});function y(e,t){return!!e.shouldRecognizeSimultaneouslyWith(t)||!!t.shouldRecognizeSimultaneouslyWith(e)}["sendEvent","getPointerCapture","setPointerCapture","releasePointerCapture"].forEach(function(e){b.prototype[e]=function(){o.a[e].apply(this,arguments)}})},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return s});var i=n(1278),r=n(34),a=n(183),s=i.a.extend({staticMembers:{storageKey:"photos-utils"},uiSizeClassCompactHeightThreshold:i.a.numberProperty(480),uiSizeClassCompactWidthThreshold:i.a.numberProperty(667),lpkHostname:r.b({readOnly:!0,get:function(){return e.location.hostname.toLowerCase().indexOf("carry.icloud.com")>-1?"carry.icloud.com":"cdn.apple-livephotoskit.com"}}),lpkUrl:r.b({readOnly:!0,dependencies:["lpkHostname"],get:Object.assign(function(){return a.a.create({protocol:"https:",hostname:this.lpkHostname,pathname:"/lpk/1/livephotoskit.js"})},{__CW__getter:function(e,t,n,i){return a.a.create({protocol:"https:",hostname:i.internalGet(this,t[0+n]),pathname:"/lpk/1/livephotoskit.js"})}})})}).create()}).call(this,n(6))},function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"a",function(){return s}),n.d(t,"c",function(){return o});var i={"com.adobe.pdf":[["pdf"],["application/pdf"]],"com.compuserve.gif":[["gif"],["image/gif"]],"com.microsoft.bmp":[["bmp"],["image/bmp"]],"com.microsoft.ico":[["ico"],["image/vnd.microsoft.icon"]],"org.oasis-open.opendocument.image":[["odi"],["application/vnd.oasis.opendocument.image"]],"org.oasis-open.opendocument.image-template":[["oti"],["application/vnd.oasis.opendocument.image-template"]],"com.apple.garageband.project":[["band","gbProj"],[]],"com.adobe.photoshop-image":[["psd"],["image/photoshop","image/x-photoshop","image/psd","application/photoshop","image/vnd.adobe.photoshop"]],"com.adobe.illustrator.ai-image":[["ai"],[]],"com.truevision.tga-image":[["tga"],["image/targa","image/tga","application/tga"]],"com.sgi.sgi-image":[["sgi"],["image/sgi"]],"com.ilm.openexr-image":[["exr"],[]],"com.kodak.flashpix-image":[["fpx"],["image/fpx","application/vnd.fpx"]],"public.heif":[["heif"],["image/heif"]],"public.heic":[["heic"],["image/heic"]],"public.avci":[["avci"],["image/avci"]],"com.j2.efx-fax":[["efx"],["image/efax"]],"com.digidesign.sd2-audio":[["sd2"],[]],"com.microsoft.waveform-audio":[["wav","wave","bwf"],["audio/wav","audio/wave","audio/x-wav","audio/vnd.wave"]],"com.microsoft.advanced-systems-format":[["asf"],["video/x-ms-asf"]],"com.microsoft.windows-media-wm":[["wm"],["video/x-ms-wm"]],"com.microsoft.windows-media-wmv":[["wmv"],["video/x-ms-wmv"]],"com.microsoft.windows-media-wmp":[["wmp"],["video/x-ms-wmp"]],"com.microsoft.windows-media-wma":[["wma"],["video/x-ms-wma"]],"com.microsoft.advanced-stream-redirector":[["asx"],["video/x-ms-asx"]],"com.microsoft.windows-media-wmx":[["wmx"],["video/x-ms-wmx"]],"com.microsoft.windows-media-wvx":[["wvx"],["video/x-ms-wvx"]],"com.microsoft.windows-media-wax":[["wax"],["video/x-ms-wax"]],"com.real.realaudio":[["ram","ra"],["audio/x-pn-realaudio","audio/x-realaudio","audio/vnd.rn-realaudio"]],"com.soundblaster.soundfont":[["sf2"],[]],"org.xiph.flac":[["flac"],["audio/flac"]],"com.avid.open-media-framework":[["omf"],[]],"com.adobe.flash.video":[["flv","f4v","f4p","f4a","f4b"],["video/x-flv"]],"org.khronos.collada.digital-asset-exchange":[["dae"],[]],"com.adobe.raw-image":[["dng"],["image/x-adobe-dng"]],"com.dxo.raw-image":[["dxo"],["image/x-dxo-dxo"]],"com.canon.crw-raw-image":[["crw"],["image/x-canon-crw"]],"com.canon.cr2-raw-image":[["cr2"],[]],"com.epson.raw-image":[["erf"],["image/x-epson-erf"]],"com.fuji.raw-image":[["raf"],[]],"com.hasselblad.fff-raw-image":[["fff"],[]],"com.hasselblad.3fr-raw-image":[["3fr"],[]],"com.kodak.raw-image":[["dcr"],[]],"com.konicaminolta.raw-image":[["mrw"],[]],"com.leafamerica.raw-image":[["mos"],[]],"com.leica.pwl-raw-image":[["pwl"],["image/x-leica-pwl"]],"com.nikon.raw-image":[["nef"],[]],"com.nikon.nrw-raw-image":[["nrw"],["image/x-nikon-nrw"]],"com.olympus.raw-image":[["orf"],[]],"com.panasonic.raw-image":[["raw"],[]],"com.panasonic.rw2-raw-image":[["rw2"],[]],"com.leica.raw-image":[["raw"],[]],"com.samsung.raw-image":[["srw"],[]],"com.leica.rwl-raw-image":[["rwl"],[]],"com.pentax.raw-image":[["pef"],[]],"com.sony.raw-image":[["srf"],[]],"com.sony.arw-raw-image":[["arw"],[]],"com.sony.sr2-raw-image":[["sr2"],["image/x-sony-sr2"]],"com.olympus.sr-raw-image":[["orf"],["image/x-olympus-sr"]],"com.olympus.or-raw-image":[["orf"],["image/x-olympus-or"]],"com.phaseone.raw-image":[["iiq"],[]],"com.apple.finder.pictclipping":[["pictclipping"],[]],"public.jpeg":[["jpeg","jpg","jpe"],["image/jpeg","image/jpg"]],"public.jpeg-2000":[["jp2","jpf","jpx","j2k","j2c"],["image/jp2"]],"public.tiff":[["tiff","tif"],["image/tiff"]],"com.apple.pict":[["pict","pct","pic"],["image/pict","image/x-pict","image/x-macpict"]],"com.apple.macpaint-image":[["pntg"],[]],"public.png":[["png"],["image/png"]],"public.svg-image":[["svg","svgz"],["image/svg+xml"]],"com.apple.quicktime-image":[["qtif","qti"],["image/x-quicktime"]],"com.apple.icns":[["icns"],[]],"public.xbitmap-image":[["xbm"],["image/x-xbitmap"]],"public.mpo-image":[["mpo"],[]],"ca.mcgill.mni.bic.mnc":[["mnc","minc"],[]],"com.apple.quicktime-movie":[["mov","qt"],["video/quicktime"]],"public.mpeg":[["mpg","mpeg","mpe","m75","m15"],["video/mpeg","video/mpg","video/x-mpeg","video/x-mpg"]],"public.mpeg-2-video":[["m2v"],["video/mpeg2","video/mpeg2-video"]],"public.mpeg-4":[["mp4","mpg4"],["video/mp4","video/mp4v-es"]],"com.apple.m4v-video":[["m4v"],["video/x-m4v"]],"public.dv-movie":[["dv","dif"],["video/x-dv"]],"public.avi":[["avi","vfw"],["video/avi","video/msvideo","video/x-msvideo"]],"public.3gpp":[["3gp","3gpp","sdv"],["video/3gpp","audio/3gpp"]],"public.3gpp2":[["3g2","3gp2"],["video/3gpp2","audio/3gpp2"]],"public.flc-animation":[["flc","fli","cel"],["video/flc"]],"public.avchd-collection":[["avchd"],[]],"com.apple.audio-unit-preset":[["aupreset"],[]],"public.mp2":[["mp2"],[]],"public.mp3":[["mp3","mpga"],["audio/mpeg","audio/mpeg3","audio/mpg","audio/mp3","audio/x-mpeg","audio/x-mpeg3","audio/x-mpg","audio/x-mp3"]],"public.m3u-playlist":[["m3u","m3u8"],["audio/mpegurl","audio/x-mpegurl","application/vnd.apple.mpegurl"]],"public.pls-playlist":[["pls"],["audio/x-scpls"]],"public.mpeg-4-audio":[["mp4","mpg4"],["audio/mp4","audio/mp4a-latm"]],"com.apple.m4a-audio":[["m4a"],["audio/x-m4a"]],"com.apple.mpeg-4-ringtone":[["m4r"],["audio/x-m4r"]],"com.apple.protected-mpeg-4-audio":[["m4p","m4b"],[]],"public.ulaw-audio":[["ul","ulw","ulaw"],[]],"public.au-audio":[["au","snd"],["audio/basic"]],"public.aifc-audio":[["aifc","aiff","aif","cdda"],["audio/aiff","audio/x-aiff"]],"public.aiff-audio":[["aiff","aif"],["audio/aiff","audio/x-aiff"]],"public.midi-audio":[["midi","mid","smf","kar"],["audio/midi","audio/x-midi"]],"public.downloadable-sound":[["dls"],["audio/dls"]],"com.apple.coreaudio-format":[["caf"],[]],"public.ac3-audio":[["ac3"],["audio/ac3"]],"public.enhanced-ac3-audio":[["eac3","ec3"],["audio/eac3"]],"org.3gpp.adaptive-multi-rate-audio":[["amr"],["audio/amr"]],"public.aac-audio":[["aac","adts"],["audio/aac","audio/x-aac"]],"com.apple.itunes.audible":[["aa","aax"],["audio/audible","audio/x-pn-audibleaudio","audio/x-audible"]],"com.apple.localized-pdf-bundle":[["lpdf"],[]]},r=function(){var e=Object.create(null);for(var t in i)if(Object.prototype.hasOwnProperty.call(i,t)){var n=i[t][1][0];n&&(e[t]=n)}return e}(),a=function(){var e=Object.create(null);for(var t in i)if(Object.prototype.hasOwnProperty.call(i,t)){var n=i[t][0][0];n&&(e[t]=n)}return e}(),s=function(){var e=Object.create(null);for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[r[t]]=a[t]);return e}();function o(e){return r[e]||"application/octet-stream"}},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=n(177).b("AssetHdrType",{NONE:0,HDR:1,HDREV0:2,EV0:3,UNKNOWN:4})},function(e,t,n){"use strict";function i(e){return!(!e||!e.isObject)}n.d(t,"a",function(){return i})},function(e,t,n){"use strict";function i(e){for(var t={},n=e.length,i=0;i<n;i++)t[e[i]]=!0;return t}n.d(t,"a",function(){return i})},,function(e,t,n){var i=n(27).f,r=n(48),a=n(24)("toStringTag");e.exports=function(e,t,n){e&&!r(e=n?e:e.prototype,a)&&i(e,a,{configurable:!0,value:t})}},function(e,t,n){var i=n(3),r=n(61),a=n(18),s=n(374),o="["+s+"]",c=RegExp("^"+o+o+"*"),l=RegExp(o+o+"*$"),u=function(e,t,n){var r={},o=a(function(){return!!s[e]()||"​"!="​"[e]()}),c=r[e]=o?t(d):s[e];n&&(r[n]=c),i(i.P+i.F*o,"String",r)},d=u.trim=function(e,t){return e=String(r(e)),1&t&&(e=e.replace(c,"")),2&t&&(e=e.replace(l,"")),e};e.exports=u},function(e,t){e.exports={}},function(e,t,n){var i=n(19);e.exports=function(e,t){if(!i(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n(1192),r=n(34),a={staticMembers:{parse:function(e){var t=arguments,n=this.__s._$87$parse.apply(this,t);return n.hostname=n.shardedHostname,delete n.shardedHostname,n},init:function(){var e=arguments,t=i.a(this.components),n=t.indexOf("hostname");n>=0&&(t[n]="shardedHostname"),this.components=t,this.__s._$Je$init.apply(this,e)},generateShardedHostname:function(e,t){return e.replace(/\-/,"-"+t+"-")},__superMap:{_$87$parse:"parse",_$Je$init:"init"}},shardedHostname:r.b({dependencies:["hostname","shardNumber"],readOnly:!0,get:Object.assign(function(){var e=this.hostname,t=this.shardNumber;return e&&t?this.constructor.generateShardedHostname(e,t):e},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]);return r&&a?this.constructor.generateShardedHostname(r,a):r}})}),shardNumber:r.b()}},function(e,t,n){"use strict";n.d(t,"a",function(){return h});var i=n(41),r=n(1170),a=n(80),s=n(1185),o=n(356),c=n(196),l=n(194),u=n(138),d=n(118),h={frameworkInitializer:i.c({type:d.a,readOnly:!0,get:function(){return d.a.sharedInstance}}),processReference:i.c({type:o.a,readOnly:!0,get:function(){return this.frameworkInitializer?this.frameworkInitializer.processReference:void 0}}),remoteProxy:i.c({type:Object,readOnly:!0,get:function(){var e=this.processReference;return e?e.remoteProxy:this._remoteProxyNotConnected}}),configureListenerOnlyMessagingChannel:function(e){var t=this.processReference;t&&t.createListenerOnlyMessagingChannel(e,this)},configureConnectionOnlyMessagingChannel:function(e,t){var n=this.processReference;n?n.createConnectionOnlyMessagingChannel(e,t):this._configureRemoteProxyNotConnected(e)},configureBidirectionalMessagingChannel:function(e,t,n,i){var r=this.processReference;r?r.createMessagingChannel(e,t,n,i):this._configureRemoteProxyNotConnected(n)},_configureRemoteProxyNotConnected:function(e){var t=r.a(this),n=a.a.extend({staticMembers:{__QUALIFIED_CLASS_NAME__:t+".remoteProxyNotConnected"}}).create(),i=Object(c.a)(e),o=Array.isArray(i),d=0;for(i=o?i:i[Symbol.iterator]();;){var h;if(o){if(d>=i.length)break;h=i[d++]}else{if((d=i.next()).done)break;h=d.value}n[h]=function(){var e=l.a.create({status:u.a.DISCONNECTED});return s.a.resolve(e)}}this._remoteProxyNotConnected=n},_remoteProxyNotConnected:i.c({type:Object})}},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n(424),r=n(87),a=n(39),s={mixinDependencies:[i.a],staticMembers:{_modelPropertyKeys:void 0,_fakeDataHash:void 0,init:function(){var e,t=arguments;this.__s._$6j$init.apply(this,t);var n=[],i=this.prototype.getMetadataByType(r.b);for(var a in i)n.push(a);this._modelPropertyKeys=Object.freeze(n),this._fakeDataHash=((e={})[this.primaryKey]="",e)},shouldCache:!0,__superMap:{_$6j$init:"init"}},initFromPool:function(e,t,n){if(t){a.a.pause(),t&&t.linkModel(this,n,e);for(var i=this.constructor._modelPropertyKeys,r=0,s=i.length;r<s;r++)this.propertyChanged(i[r]);a.a.resume()}else this.replaceData(e)},cleanup:function(){var e=arguments,t=this._cwStore;t&&t.unlinkModel(this),this.__s._$TX$cleanup.apply(this,e)},__superMap:{_$TX$cleanup:"cleanup"}}},function(e,t,n){"use strict";var i=n(34),r=n(1185),a=n(1184),s=n(780),o=n(80),c=n(36),l=n(41),u=n(784),d=n(69),h=n(25),p=["itemType","masterRef","resJPEGThumbRes","resJPEGThumbWidth","resJPEGThumbHeight","resJPEGThumbFileSize","resJPEGMedRes","resJPEGMedWidth","resJPEGMedHeight","resJPEGMedFileSize","resJPEGLargeRes","resJPEGLargeWidth","resJPEGLargeHeight","resJPEGLargeFileSize","resJPEGFullRes","resJPEGFullWidth","resJPEGFullHeight","resJPEGFullFileSize","resVidSmallRes","resVidSmallWidth","resVidSmallHeight","resVidSmallFileSize","resVidMedRes","resVidMedWidth","resVidMedHeight","resVidMedFileSize","resVidFullRes","resVidFullWidth","resVidFullHeight","resVidFullFileSize","resOriginalRes","resOriginalWidth","resOriginalHeight","resOriginalFileSize","resOriginalAltRes","resOriginalAltWidth","resOriginalAltHeight","resOriginalAltFileSize","resOriginalVidComplRes","resOriginalVidComplWidth","resOriginalVidComplHeight","resOriginalVidComplFileSize"],f={ICLOUD1:"cvws-ic1.icloud-content.com",ICLOUD2:"cvws-ic2.icloud-content.com",ICLOUD3:"cvws-ic3.icloud-content.com",ICLOUD4:"cvws-ic4.icloud-content.com"},g=o.a.extend(c.a,{init:function(){var e=arguments;this.__s._$Y0$init.apply(this,e),this._startTime=Date.now()},recordName:l.c(),masterRef:l.c(),itemType:l.c(),resJPEGThumbRes:l.c(),resJPEGThumbWidth:l.c(),resJPEGThumbHeight:l.c(),resJPEGThumbFileSize:l.c(),resJPEGMedRes:l.c(),resJPEGMedWidth:l.c(),resJPEGMedHeight:l.c(),resJPEGMedFileSize:l.c(),resJPEGLargeRes:l.c(),resJPEGLargeWidth:l.c(),resJPEGLargeHeight:l.c(),resJPEGLargeFileSize:l.c(),resJPEGFullRes:l.c(),resJPEGFullWidth:l.c(),resJPEGFullHeight:l.c(),resJPEGFullFileSize:l.c(),resVidSmallRes:l.c(),resVidSmallWidth:l.c(),resVidSmallHeight:l.c(),resVidSmallFileSize:l.c(),resVidMedRes:l.c(),resVidMedWidth:l.c(),resVidMedHeight:l.c(),resVidMedFileSize:l.c(),resVidFullRes:l.c(),resVidFullWidth:l.c(),resVidFullHeight:l.c(),resVidFullFileSize:l.c(),resOriginalRes:l.c(),resOriginalWidth:l.c(),resOriginalHeight:l.c(),resOriginalFileSize:l.c(),resOriginalAltRes:l.c(),resOriginalAltWidth:l.c(),resOriginalAltHeight:l.c(),resOriginalAltFileSize:l.c(),resOriginalVidComplRes:l.c(),resOriginalVidComplWidth:l.c(),resOriginalVidComplHeight:l.c(),resOriginalVidComplFileSize:l.c(),vsShareData:l.c({get:function(){var e,t,n,i=[],r=(e=this,t=h.a.getPath("environment.iCloudEnvironment"),n=f[t],function(i){var r=e["res"+i+"Res"].value.downloadURL;return n&&(r=r.replace("cvws.icloud-content.com",n),u.b.debug("In "+t+' using geo stripped url: "'+r+'"')),{width:e["res"+i+"Width"].value,height:e["res"+i+"Height"].value,fileSize:e["res"+i+"FileSize"].value,derivativeName:i,originalUrl:r,hasGeo:!1,urlExpiry:e.urlExpiry,recordName:e.recordName}});return this.resJPEGThumbRes&&i.push(r("JPEGThumb")),this.resJPEGMedRes&&i.push(r("JPEGMed")),this.resJPEGLargeRes&&i.push(r("JPEGLarge")),this.resJPEGFullRes&&i.push(r("JPEGFull")),this.resVidSmallRes&&i.push(r("VidSmall")),this.resVidMedRes&&i.push(r("VidMed")),this.resVidFullRes&&i.push(r("VidFull")),this.resOriginalRes&&i.push(r("Original")),this.resOriginalAltRes&&i.push(r("OriginalAlt")),this.resOriginalVidComplRes&&i.push(r("OriginalVidCompl")),i}}),_startTime:0,ttl:l.c({get:function(){return 144e5-(Date.now()-this._startTime)}}),urlExpiry:l.c({get:function(){return this._startTime+144e5}}),hasExpired:i.b({get:function(){return this.ttl<0}}),__superMap:{_$Y0$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"MediaRecord"}}),m=o.a.extend({staticMembers:{fetch:function(e){var t=r.a.create(),n=e.map(function(e){return g.create({recordName:e})});return function(e){var t=d.b(),n=t.cplZone,i=t.getDatabaseForScope(n.scope).databaseInstance,r={zoneID:n.zoneID,desiredKeys:p,assetPrivacyMaskType:"NONE"};return i.fetchRecords(e,r)}(n).then(function(e){return e.hasErrors&&t.reject(),e.records.forEach(function(e){var t=e.length;return function(n){return function(n){for(var i=[],r=n.recordName,a=0;a<t;a++){var s=e[a];r===s.recordName&&i.push(s),s.masterRef&&r===s.masterRef.value.recordName&&i.push(s)}return i}(n).forEach(function(e){var t=e.fields;return function(e){p.forEach(function(n){t[n]&&!e[n]&&(e[n]=t[n])})}}(n))}}(n)),t.resolve(n)}),t},__QUALIFIED_CLASS_NAME__:"GeoStrippedURLs"}});n.d(t,"b",function(){return v}),n.d(t,"a",function(){return _});var v={hasGeostrippedURLs:i.b({readOnly:!0,dependencies:["primaryMaster.geostrippedURLs","primaryAsset.geostrippedURLs"],get:Object.assign(function(){return Boolean(this.getPath("primaryMaster.geostrippedURLs")&&this.getPath("primaryAsset.geostrippedURLs"))},{__CW__getter:function(e,t,n,i){return Boolean(i.internalGetPath(this,t[0+n])&&i.internalGetPath(this,t[1+n]))}})}),fetchGeostrippedURLs:function(){return r.a.all([this.primaryMaster.fetchGeostrippedURLs(),this.primaryAsset.fetchGeostrippedURLs()])}},_={geostrippedURLs:i.b(),fetchGeostrippedURLs:function(){return this._geostrippedURLFetchPromise?this._geostrippedURLFetchPromise:(y.push(this),b||(b=a.a(I,50)),this._geostrippedURLFetchPromise=r.a.create())},dataDidLoad:function(){var e=arguments;return this.geostrippedURLs=null,this.__s._$TQ$dataDidLoad.apply(this,e)},__superMap:{_$TQ$dataDidLoad:"dataDidLoad"}},b=void 0,y=[];function I(){var e=y;b=null,y=[],m.fetch(e.map(function(e){return e.recordName})).then(function(t){for(var n=s.a.begin(),i=0;i<t.length;i++){var r=t[i],a=e[i];n.set(a,"geostrippedURLs",{resJPEGThumbResGeostrippedDownloadUrl:r.resJPEGThumbRes&&r.resJPEGThumbRes.value.downloadURL,resJPEGMedResGeostrippedDownloadUrl:r.resJPEGMedRes&&r.resJPEGMedRes.value.downloadURL,resJPEGLargeResGeostrippedDownloadUrl:r.resJPEGLargeRes&&r.resJPEGLargeRes.value.downloadURL,resJPEGFullResGeostrippedDownloadUrl:r.resJPEGFullRes&&r.resJPEGFullRes.value.downloadURL,resVidSmallResGeostrippedDownloadUrl:r.resVidSmallRes&&r.resVidSmallRes.value.downloadURL,resVidMedResGeostrippedDownloadUrl:r.resVidMedRes&&r.resVidMedRes.value.downloadURL,resVidFullResGeostrippedDownloadUrl:r.resVidFullRes&&r.resVidFullRes.value.downloadURL,resOriginalResGeostrippedDownloadUrl:r.resOriginalRes&&r.resOriginalRes.value.downloadURL,resOriginalAltResGeostrippedDownloadUrl:r.resOriginalAltRes&&r.resOriginalAltRes.value.downloadURL,resOriginalVidComplResGeostrippedDownloadUrl:r.resOriginalVidComplRes&&r.resOriginalVidComplRes.value.downloadURL})}n.end();for(var o,c=0;o=e[c];c++)o._geostrippedURLFetchPromise.resolve(),o._geostrippedURLFetchPromise=null},function(){for(var t,n=0;t=e[n];n++){var i;(i=t._geostrippedURLFetchPromise).reject.apply(i,arguments),t._geostrippedURLFetchPromise=null}})}},function(e,t,n){"use strict";n.d(t,"b",function(){return c}),n.d(t,"a",function(){return l}),n(843);var i=n(1196),r=n(34),a=n(41),s=n(1141),o=n(409).a.extend(s.a,{supportsDragScroll:Object(a.c)(!i.a.get("isTouchSupported")),staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",name:"thumb",classes:["cw-scroll-indicator-thumb"]}],name:"track",classes:["cw-scroll-indicator-track"]}],classes:["cw-scroll-indicator"],styles:{display:{type:"STYLEOUTLET",bindingtype:"IFBINDING",name:"isShowing",truevalue:"block",falsevalue:"none",attributes:{},unit:null,property:"display"}}}},className:"cw-ui-scroll-indicator-view",__QUALIFIED_CLASS_NAME__:"ScrollIndicatorView"},eventCoordinateKey:null,thumbPositionKey:null,minThumbSize:Object(r.b)(20),minThumbOutsideSize:Object(r.b)(10),overscrollShrinkFactor:Object(r.b)(2),thickness:Object(r.b)({readOnly:!0,dependencies:["thicknessKey","element","isAttached"],get:Object.assign(function(){var e=this.thicknessKey,t=this.element;return e&&t&&this.isAttached?t.getBoundingClientRect()[e]:0},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]);return r&&a&&i.internalGet(this,t[2+n])?a.getBoundingClientRect()[r]:0}})}),thicknessKey:Object(r.b)(),beginMargin:Object(r.b)(6),endMargin:Object(r.b)(6),totalEndMargin:Object(r.b)({readOnly:!0,dependencies:["inset","endMargin"],get:Object.assign(function(){var e=this.inset;return this.endMargin+e},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return i.internalGet(this,t[1+n])+r}})}),size:Object(r.b)({readOnly:!0,dependencies:["scrollSize","beginMargin","totalEndMargin"],get:Object.assign(function(){return this.scrollSize-this.beginMargin-this.totalEndMargin},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])-i.internalGet(this,t[1+n])-i.internalGet(this,t[2+n])}})}),otherScrollIndicator:Object(r.b)(),inset:Object(r.b)({readOnly:!0,dependencies:["otherScrollIndicator.isShowing","otherScrollIndicator.thickness"],get:Object.assign(function(){return this.getPath("otherScrollIndicator.isShowing")?this.getPath("otherScrollIndicator.thickness"):0},{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])?i.internalGetPath(this,t[1+n]):0}})}),scrollMin:Object(r.b)(0),totalSize:Object(r.b)(0),scrollSize:Object(r.b)(0),scrollPosition:Object(r.b)(0),isShowing:Object(r.b)({readOnly:!0,dependencies:["scrollSize","totalSize"],get:Object.assign(function(){return this.scrollSize<this.totalSize&&this.totalSize!==1/0},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])<i.internalGet(this,t[1+n])&&i.internalGet(this,t[1+n])!==1/0}})}),relativeScrollPosition:Object(r.b)({dependencies:["scrollMin","scrollPosition"],writeDependencies:["scrollPosition"],get:Object.assign(function(){return this.scrollPosition-this.scrollMin},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[1+n])-i.internalGet(this,t[0+n])}}),set:Object.assign(function(e){this.scrollPosition=e+this.scrollMin},{__CW__setter:function(e,t,n,i,r){n[0+i]=e+this.scrollMin}}),writeDependencySetPathMap:["false"]}),scrollProportion:Object(r.b)({readOnly:!0,dependencies:["scrollSize","totalSize"],get:Object.assign(function(){return this.scrollSize/this.totalSize},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])/i.internalGet(this,t[1+n])}})}),minThumbProportion:Object(r.b)({readOnly:!0,dependencies:["size","minThumbSize"],get:Object.assign(function(){return this.minThumbSize/this.size},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[1+n])/i.internalGet(this,t[0+n])}})}),minThumbOutsideProportion:Object(r.b)({readOnly:!0,dependencies:["size","minThumbOutsideSize"],get:Object.assign(function(){return this.minThumbOutsideSize/this.size},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[1+n])/i.internalGet(this,t[0+n])}})}),thumbProportion:Object(r.b)({readOnly:!0,dependencies:["scrollProportion","minThumbProportion"],get:Object.assign(function(){return Math.max(this.scrollProportion,this.minThumbProportion)},{__CW__getter:function(e,t,n,i){return Math.max(i.internalGet(this,t[0+n]),i.internalGet(this,t[1+n]))}})}),sizeAdjustment:Object(r.b)({readOnly:!0,dependencies:["scrollProportion","thumbProportion"],get:Object.assign(function(){return(1-this.scrollProportion)/(1-this.thumbProportion)},{__CW__getter:function(e,t,n,i){return(1-i.internalGet(this,t[0+n]))/(1-i.internalGet(this,t[1+n]))}})}),adjustedSize:Object(r.b)({readOnly:!0,dependencies:["totalSize","sizeAdjustment"],get:Object.assign(function(){return this.totalSize*this.sizeAdjustment},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])*i.internalGet(this,t[1+n])}})}),thumbSize:Object(r.b)({readOnly:!0,dependencies:["thumbProportion","relativeScrollPosition","minThumbOutsideProportion","scrollProportion","overscrollShrinkFactor","totalSize","scrollSize","adjustedSize"],get:Object.assign(function(){var e=this.relativeScrollPosition;if(e<0){var t=-e/this.adjustedSize;return 100*Math.max(this.minThumbOutsideProportion,this.scrollProportion-this.overscrollShrinkFactor*t)}var n=this.totalSize-this.scrollSize;if(e>n){var i=(e-n)/this.adjustedSize;return 100*Math.max(this.minThumbOutsideProportion,this.scrollProportion-this.overscrollShrinkFactor*i)}return 100*this.thumbProportion},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[1+n]);if(r<0){var a=-r/i.internalGet(this,t[7+n]);return 100*Math.max(i.internalGet(this,t[2+n]),i.internalGet(this,t[3+n])-i.internalGet(this,t[4+n])*a)}var s=i.internalGet(this,t[5+n])-i.internalGet(this,t[6+n]);if(r>s){var o=(r-s)/i.internalGet(this,t[7+n]);return 100*Math.max(i.internalGet(this,t[2+n]),i.internalGet(this,t[3+n])-i.internalGet(this,t[4+n])*o)}return 100*i.internalGet(this,t[0+n])}})}),thumbPosition:Object(r.b)({readOnly:!0,dependencies:["adjustedSize","relativeScrollPosition","scrollSize","totalSize","thumbSize"],get:Object.assign(function(){var e=this.relativeScrollPosition;return e<0?0:e>this.totalSize-this.scrollSize?100-this.thumbSize:e/this.adjustedSize*100},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[1+n]);return r<0?0:r>i.internalGet(this,t[3+n])-i.internalGet(this,t[2+n])?100-i.internalGet(this,t[4+n]):r/i.internalGet(this,t[0+n])*100}})}),_dragPointerId:null,_dragStartPixel:null,_dragStartThumbPosition:null,pointerUp:function(e){var t=arguments;if(!this.get("supportsDragScroll"))return!1;this.__s._$3Dp$pointerUp.apply(this,t);var n=e.pointerId;return this._dragPointerId===n&&(this._dragPointerId=null,this._dragStartPixel=null,this._dragStartThumbPosition=null,!0)},pointerDown:function(e){var t=arguments;if(!this.get("supportsDragScroll"))return!1;this.__s._$3JT$pointerDown.apply(this,t);var n=this.get("thumb");if(e.target===n){var i=e.pointerId;this._dragPointerId=i,this._dragStartPixel=e[this.eventCoordinateKey],this._dragStartThumbPosition=this.get("relativeScrollPosition")/this.get("totalSize")}else{var r=n.getBoundingClientRect()[this.thumbPositionKey];e[this.eventCoordinateKey]<r?this.pageUp():this.pageDown()}return!0},pointerMove:function(e){var t=arguments;if(!this.get("supportsDragScroll"))return!1;if(this._dragPointerId!==e.pointerId)return!1;this.__s._$3ZM$pointerMove.apply(this,t);var n=e[this.eventCoordinateKey]-this._dragStartPixel,i=this.get("size");return this.scrollTo(100*(this._dragStartThumbPosition+n/i*this.get("sizeAdjustment"))),!0},__superMap:{_$3Dp$pointerUp:"pointerUp",_$3JT$pointerDown:"pointerDown",_$3ZM$pointerMove:"pointerMove"}}),c=o.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",classes:["vertical"]},track:{type:"ELEMENT",tagname:"ext",styles:{top:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"beginMargin",attributes:{},unit:"px",property:"top"},bottom:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"totalEndMargin",attributes:{},unit:"px",property:"bottom"}}},thumb:{type:"ELEMENT",tagname:"ext",styles:{top:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"thumbPosition",attributes:{},unit:"%",property:"top"},height:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"thumbSize",attributes:{},unit:"%",property:"height"}}}},className:"cw-ui-vertical-scroll-indicator-view",__QUALIFIED_CLASS_NAME__:"VerticalScrollIndicatorView"},eventCoordinateKey:"clientY",thumbPositionKey:"top",thicknessKey:"width",pageUp:function(){this.get("parent").pageUp()},pageDown:function(){this.get("parent").pageDown()},scrollTo:function(e){this.get("parent").scrollTo(void 0,e)}}),l=o.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",classes:["horizontal"]},track:{type:"ELEMENT",tagname:"ext",styles:{left:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"beginMargin",attributes:{},unit:"px",property:"left"},right:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"totalEndMargin",attributes:{},unit:"px",property:"right"}}},thumb:{type:"ELEMENT",tagname:"ext",styles:{left:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"thumbPosition",attributes:{},unit:"%",property:"left"},width:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"thumbSize",attributes:{},unit:"%",property:"width"}}}},className:"cw-ui-horizontal-scroll-indicator-view",__QUALIFIED_CLASS_NAME__:"HorizontalScrollIndicatorView"},eventCoordinateKey:"clientX",thumbPositionKey:"left",thicknessKey:"height",pageUp:function(){this.get("parent").pageLeft()},pageDown:function(){this.get("parent").pageRight()},scrollTo:function(e){this.get("parent").scrollTo(e,void 0)}})},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n(80),r=n(41),a=n(1213),s=n(69),o=n(78),c=i.a.extend({storeId:Object(r.c)({readOnly:!0}),originalData:Object(r.c)({readOnly:!0}),newData:Object(r.c)({readOnly:!0}),changeType:Object(r.c)({readOnly:!0,get:function(){var e=this._changeType;return e||(e=this.originalData?this.newData?s.a.WRITE.UPDATE:s.a.WRITE.DESTROY:s.a.WRITE.CREATE,this._changeType=e),e}}),operation:Object(r.c)({readOnly:!0,get:function(){var e=this._operation;return e||(e=this._operation={type:this.modelClass,operation:{context:this,type:this.changeType}}),e}}),model:Object(r.c)({readOnly:!0,get:function(){return Object(s.b)().materializeModel(this.storeId)}}),primaryKey:Object(r.c)({readOnly:!0,get:function(){return o.a.getPrimaryKeyForStoreId(this.storeId)}}),modelClass:Object(r.c)({readOnly:!0,get:function(){return o.a.getModelClassForStoreId(this.storeId)}}),diff:Object(r.c)({readOnly:!0,get:function(){return Object(a.a)(this.originalData,this.newData)}}),init:function(e,t,n,i){this.__s._$lM$init.call(this),this._storeId=e,this._originalData=t,this._newData=n,i&&(this._operation=i)},merge:function(e){return this.constructor.create(this.storeId,this.originalData,Object.assign(this.newData||{},e.newData))},reverse:function(){return this.constructor.create(this.storeId,Object.assign({},this.newData),Object.assign({},this.originalData))},__superMap:{_$lM$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"DataChange"}})},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=n(177).b("AssetOrientation",{UNKNOWN:0,NORMAL:1,FLIP_HORIZONTALLY:2,ROTATE_180:3,FLIP_VERTICALLY:4,TRANSPOSE:5,ROTATE_90:6,TRANSVERSE:7,ROTATE_270:8})},function(e,t,n){"use strict";function i(e,t){return t.indexOf(e)<0?t[0]:e}n.d(t,"a",function(){return i})},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return g});var i=n(409),r=n(34),a=n(831),s=n(36),o=n(120),c=n(180),l=n(410),u=n(1184),d=n(799),h=n(125),p=n(1197),f=(n(950),i.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",classes:["checkbox-icon"]}],classes:["checkbox"]},{type:"ELEMENT",tagname:"span",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"optionLabel",attributes:{}}],classes:["text"]}],classes:["option-label",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isSelected",truevalue:"selected",falsevalue:"",attributes:{}}]},className:"select-option-item-view",__QUALIFIED_CLASS_NAME__:"SelectOptionItemView"},id:r.b(),pointerUp:function(e){this.sendEvent("didSelectOption",{optionItem:this,event:e}),e.preventDefault()}})),g=i.a.extend(a.a,{staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"selectionText",attributes:{}}],classes:["label"]},{type:"ELEMENT",tagname:"div",classes:["separator"]},{type:"ELEMENT",tagname:"div",classes:["chevron"]}],name:"selectDiv",classes:["select-box"]},{type:"ELEMENT",tagname:"div",name:"modalDiv",classes:["modal"]},{type:"ELEMENT",tagname:"div",children:[{type:"MULTIVIEWOUTLET",tagname:"views",name:"_optionsViews"}],name:"optionsDiv",classes:["options",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"showOptionsForMeasuring",truevalue:"shown-for-measuring",attributes:{}}]}],classes:["select-view",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isOptionsVisible",truevalue:"open",attributes:{}}]},className:"ck-sharing-select-view",__QUALIFIED_CLASS_NAME__:"SelectView"},action:null,value:r.b({}),_isAttachedDidChange:s.f("isAttached",function(e){e&&this.propertyChanged("selectionText")}),_windowSize:r.b(o.a.sharedInstance.window),_windowSizeDidChange:s.f("_windowSize.width","_windowSize.height",function(){this.isAttached&&this.hideModalAndOptions()}),selectionText:r.b({dependencies:["value","options"],readOnly:!0,get:Object.assign(function(){var e,t=this.value,n=this.options;if(n)for(var i=n.length,r=0;r<i;r++){var a=n.objectAt(r);a.value===t&&(e=a.label)}return e||(e="--"),e},{__CW__getter:function(e,t,n,i){var r,a=i.internalGet(this,t[0+n]),s=i.internalGet(this,t[1+n]);if(s)for(var o=s.length,c=0;c<o;c++){var l=s.objectAt(c);l.value===a&&(r=l.label)}return r||(r="--"),r}})}),options:r.b(c.b(l.b)),_redraw:s.f("element","options","options.contentsDidChange","value",function(e,t,n){if(e&&t){var i=this._optionsViews,r=t.length;i.beginBatchedChanges(),i.clear();for(var a=0,s=r;a<s;a++){var o=t.objectAt(a),c=!1;o.value===this.value&&(c=!0);var l=f.create({optionLabel:o.label,id:o.value,isSelected:c});i.push(l)}i.endBatchedChanges(),this.positionOptionsView()}}),isVisibleOnScreen:r.b(),showOptionsForMeasuring:r.b(),isVisibleOnScreenObserver:s.f("isVisibleOnScreen",function(e){var t=this;e&&u.a(function(){if(t.showOptionsForMeasuring=!0,t.optionsDiv.getElementsByClassName("text")[0].clientWidth>0)t._setWidthOfSelectViewBasedOnContents();else{var e=d.a.create({delay:100,timesToFire:1/0,callAction:function(){this.optionsDiv.getElementsByClassName("text")[0].clientWidth>0&&(this._setWidthOfSelectViewBasedOnContents(),e.stop())}.bind(t)});e.start()}},0)}),_setWidthOfSelectViewBasedOnContents:function(){this.showOptionsForMeasuring=!0;for(var e,t=[],n=this.optionsDiv.getElementsByClassName("text"),i=0,r=n.length;i<r;i++)e=n[i].clientWidth+53,t.push(e);this.showOptionsForMeasuring=!1;var a=Math.max.apply(Math,t);h.a(this.element,{width:a})},_downPoint:null,pointerDown:function(e){if(!this.isDisabled){if(this.options.length>0)for(var t=!1,n=e.target;!t&&n;)n===this.modalDiv?(this.hideModalAndOptions(),t=!0):n===this.selectDiv?(t=!0,this.showModalAndOptions(),this._downPoint={x:e.clientX,y:e.clientY}):n=n.parentNode;e.preventDefault()}},didSelectOption:function(e,t){var n=this._downPoint,i=e.event;if(!n||n.x!==i.clientX||n.y!==i.clientY){var r=this.value,a=e.optionItem.id;if(a!==r){var s=this.action;p.a(s)?this.value=a:this.sendEvent(s,a)}this.hideModalAndOptions()}},isOptionsVisible:r.b(),showModalAndOptions:function(){this.isOptionsVisible=!0,this.positionOptionsView()},hideModalAndOptions:function(){this.isOptionsVisible=!1},positionOptionsView:function(){var t=this.selectDiv,n=this.optionsDiv,i=t.getBoundingClientRect(),r={},a=t.clientHeight,s=this.options,o=s.length;"rtl"===e.document.dir?(r.left="auto",r.right=e.innerWidth-i.right-24+"px"):r.left=i.left-24+"px",r["min-width"]=t.clientWidth+"px";for(var c=-1,l=0;l<o;l++)if(s.objectAt(l).value==this.value){c=l;break}for(var u=this._optionsViews,d=u.length,p=0;p<d;p++){var f=u.objectAt(p);h.a(f.element,{height:a})}var g=1+i.top;-1!==c&&(g-=c*a),r.top=g+"px",r.height=o*a+"px",h.a(n,r)}})}).call(this,n(6))},function(e,t,n){"use strict";(function(e){function i(t){var n=function(e){var t=document.createElement("textarea");t.contentEditable=!0,t.style.fontSize="20px",t.readOnly=!0;var n=t.style;return n.position="absolute",n.left="-10000px",t.value=e,document.body.appendChild(t),t}(t),i=document.createRange();i.selectNodeContents(n);var r=e.getSelection();r.removeAllRanges(),r.addRange(i),n.focus(),n.setSelectionRange(0,n.value.length);try{document.execCommand("copy")}catch(e){}n.blur(),document.body.removeChild(n)}function r(){return"function"==typeof document.queryCommandSupported&&document.queryCommandSupported("copy")}n.d(t,"a",function(){return i}),n.d(t,"b",function(){return r})}).call(this,n(6))},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=n(177).b("ZoneAvailabilityType",{HIDDEN:1,PUBLISHED:2,NOT_AVAILABLE:3})},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var i=n(80),r=n(36),a=n(123),s=n(65),o=n(34),c=n(1197),l=i.a.extend(r.a,{init:function(e,t){a.a(e)||s.b("A zoneName String is required for ZoneID",{zoneName:e,ownerRecordName:t}),this.__s._$6A$init.call(this,{zoneName:e,ownerRecordName:t})},zoneName:o.b(),ownerRecordName:o.b(),toHash:function(){var e={zoneName:this.zoneName};return c.a(this.ownerRecordName)||(e.ownerRecordName=this.ownerRecordName),{zoneID:e}},__superMap:{_$6A$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"ZoneID"}})},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return l}),n.d(t,"b",function(){return u});var i=n(177),r=n(65),a=n(1185),s=n(1187),o=function(){var e=document.scripts,t=Array.isArray(e),n=0;for(e=t?e:e[Symbol.iterator]();;){var i;if(t){if(n>=e.length)break;i=e[n++]}else{if((n=e.next()).done)break;i=n.value}var r=i.src;if(r.endsWith("/cloudkit.js"))return r}return null}(),c=5,l=i.b("CloudKitJSStatus",{LOADED:"loaded",LOADED_VIA_RETRY:"retried",LOADED_BUT_BROKEN:"broken",FAILED_TO_LOAD:"failed"});function u(){return"string"!=typeof o&&r.b("CloudKit.js script tag not found."),e.CloudKit?a.a.resolve({status:l.LOADED}):(t=1,n=a.a.create(),function i(){if(e.CloudKit)n.resolve({status:l.LOADED_VIA_RETRY,retries:t});else{var r=document.createElement("script");r.type="text/javascript",s.a(r,"load",function(){e.CloudKit?n.resolve({status:l.LOADED_VIA_RETRY,retries:t}):n.reject({status:l.LOADED_BUT_BROKEN,retries:t})}),s.a(r,"error",function(e){document.body.removeChild(r),++t>c?n.reject({status:l.FAILED_TO_LOAD,err:e}):i()}),document.body.appendChild(r),r.src=o+"?"+Date.now()}}(),n);var t,n}}).call(this,n(6))},function(e,t,n){"use strict";var i,r=n(80),a=n(41),s=n(65),o=n(1185),c=n(150),l=n(423),u=n(259);!function(e){e.OK="OK",e.CANCELLED="CANCELLED",e.FAILED="FAILED"}(i||(i={}));var d=function e(t,n){!function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this.status=t,this.data=n,this.isOk=t===i.OK,this.isCancelled=t===i.CANCELLED,this.isFailed=t===i.FAILED};d.okResult=function(e){return new d(i.OK,e)},d.cancelledResult=function(e){return new d(i.CANCELLED,e)},d.failedResult=function(e){return new d(i.FAILED,e)};var h=n(54),p=n(804),f={mixinDependencies:[p.a],name:"AuthenticationServiceProtocol",version:"0.0.1",authenticate:h.a.define(),unauthenticate:h.a.define()},g={mixinDependencies:[p.a],name:"AuthenticationServiceFromChildProtocol",version:"1.0.0",authenticateUser:h.a.define(),unauthenticateUser:h.a.define(),reauthenticateUser:h.a.define(),retrieveSession:h.a.define()},m={mixinDependencies:[p.a],name:"AuthenticationServiceToChildProtocol",version:"0.0.1",authenticationStepDidComplete:h.a.define(),authenticationDidComplete:h.a.define(),authenticationDidCancel:h.a.define(),retrieveSessionDidComplete:h.a.define(),retrieveSessionDidCancel:h.a.define()},v=r.a.extend({mixinDependencies:[u.a,m],delegate:a.c({type:m}),isBackwardsCompatabilityMode:a.c({type:Boolean}),init:function(e,t){this.__s._$Ql$init.call(this),this.delegate=t,this.isBackwardsCompatabilityMode=e,e?this.configureConnectionOnlyMessagingChannel(f,1e11):this.configureBidirectionalMessagingChannel(m,this,g)},authenticate:function(){return this.isBackwardsCompatabilityMode?this.remoteProxy.authenticate().then(function(e){return function(e){return e.isOK?e.data?d.okResult():d.cancelledResult():b(e)}(e)}):this.remoteProxy.authenticateUser().then(function(e){return _(e)})},unauthenticate:function(){var e=void 0;return this.isBackwardsCompatabilityMode?(e=o.a.create(),this.remoteProxy.unauthenticate()):e=this.remoteProxy.unauthenticateUser(),e.then(function(e){return _(e)})},reauthenticate:function(e,t){return this._pendingAuthenticationInstance&&s.b("[AuthenticationConnection] An existing authentication connection is still pending"),this._pendingAuthenticationInstance=e,this.remoteProxy.reauthenticateUser(t).then(function(e){return _(e)})},retrieveSession:function(e,t,n,i){return this._pendingAuthenticationInstance&&s.b("[AuthenticationConnection] An existing authentication connection is still pending"),this._pendingAuthenticationInstance=e,this.remoteProxy.retrieveSession(t,n,i).then(function(e){return _(e)})},authenticationStepDidComplete:function(e){this.delegate.authenticationStepDidComplete(e)},authenticationDidComplete:function(e){this.delegate.authenticationDidComplete(e)},authenticationDidCancel:function(){this.delegate.authenticationDidCancel()},retrieveSessionDidComplete:function(e){var t=this._pendingAuthenticationInstance;t&&(t.retrieveSessionDidComplete(e),this._pendingAuthenticationInstance=void 0)},retrieveSessionDidCancel:function(){var e=this._pendingAuthenticationInstance;e&&(e.retrieveSessionDidCancel(),this._pendingAuthenticationInstance=void 0)},__superMap:{_$Ql$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"AuthenticationConnection"}});function _(e){return e.isOK?d.okResult():b(e)}function b(e){return d.failedResult({status:e.status.value,underlyingError:e.error})}var y=n(36),I=n(320),w={mixinDependencies:[n(49).a],authenticatedUserDidChange:h.a.define()},S=r.a.extend(y.a,{mixinDependencies:[I.a],delegate:a.c({type:w}),init:function(){this.__s._$8m$init.call(this)},sessionDidChange:function(e){var t=e&&e.user?e.user:void 0;(this._user?this._user.serialize():void 0)!==(t?t.serialize():void 0)&&(this._user=t,this.delegate.authenticatedUserDidChange(this,t))},_user:a.c({type:c.a}),__superMap:{_$8m$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"Authentication_v1"}}),C=n(118);n.d(t,"a",function(){return O});var O=r.a.extend({mixinDependencies:[m,w],staticMembers:{defaultInstance:a.c({type:O,readOnly:!0,get:function(){var e=this._defaultInstance;if(!e){var t=C.a.sharedInstance;t||s.b("[Authentication] Authentication framework not initialized");var n=t.hostInfo,i=t.session;n||s.b("[Authentication] Authentication host information missing");var r=n.protocolVersion;isNaN(r)&&s.b("[Authentication] Invalid Authentication host information");var a=r<2,o=i?i.user:void 0;e=this._defaultInstance=O.create(),a?(e._authentication_v1=S.create(),e._authentication_v1.delegate=e,o&&(e._totalNumberOfAuthenticationSteps=2,e._completedAuthenticationStep=2)):o&&(e._totalNumberOfAuthenticationSteps=o.totalAuthenticationSteps,e._completedAuthenticationStep=o.completedAuthenticationStep),e._user=o,e._connection=this._sharedConnection=v.create(a,e)}return e}}),_defaultInstance:a.c({type:O}),_sharedConnection:a.c({type:v}),__QUALIFIED_CLASS_NAME__:"Authentication"},delegate:a.c({type:l.a}),totalNumberOfAuthenticationSteps:a.c({type:Number,readOnly:!0,get:function(){return this.user?this.user.totalAuthenticationSteps:0}}),completedAuthenticationStep:a.c({type:Number,readOnly:!0,get:function(){return this.user?this.user.completedAuthenticationStep:0}}),isAuthenticated:a.c({readOnly:!0,type:Boolean,get:function(){return!!this.user&&this.user.isAuthenticated}}),user:a.c({readOnly:!0,type:c.a,get:function(){return this._user}}),isBackwardsCompatibilityMode:a.c({type:Boolean,readOnly:!0,get:function(){return void 0!==this._authentication_v1&&null!==this._authentication_v1}}),appleId:a.c({type:Boolean,readOnly:!0,get:function(){var e=this._appleId;if(e)return e;var t=this.user;return t?t.appleId:void 0}}),init:function(e){this.__s._$2RW$init.call(this),this._appleId=e,this._connection=O._sharedConnection},authenticate:function(){var e=this;return this!==O.defaultInstance&&s.b("[Authentication] only Authentication.defaultInstance can call authenticate()"),this.isBackwardsCompatibilityMode?this._connection.authenticate():this._connection.authenticate().then(function(t){return t.isOk?e._authenticationRequestPromise=o.a.create():t})},unauthenticate:function(){return this!==O.defaultInstance&&s.b("[Authentication] only Authentication.defaultInstance can call unauthenticate()"),this._connection.unauthenticate()},reauthenticate:function(e){var t=this;return this!==O.defaultInstance&&s.b("[Authentication] only Authentication.defaultInstance can call unauthenticate()"),this._connection.reauthenticate(this,e).then(function(e){return e.isOk?t._authenticationSessionPromise=o.a.create():e})},retrieveSession:function(e,t){var n=this;return this._connection.retrieveSession(this,this._appleId,e,t).then(function(e){return e.isOk?n._authenticationSessionPromise=o.a.create():e})},authenticationStepDidComplete:function(e){e||s.b("[Authentication] no user info for authentication step"),this._user=c.a.deserialize(e);var t=this.delegate;if(t){var n=this._user,i=n.completedAuthenticationStep,r=n.totalAuthenticationSteps;t.authenticationStepDidComplete(this,i,r)}},authenticationDidComplete:function(e){e||s.b("[Authentication] no user info for authentication complete");var t=this.delegate;this._user=c.a.deserialize(e),t&&t.authenticationDidComplete(this);var n=this._authenticationRequestPromise;n&&(n.resolve(d.okResult()),this._authenticationRequestPromise=void 0)},authenticationDidCancel:function(){var e=this._authenticationRequestPromise;e&&(e.resolve(d.cancelledResult()),this._authenticationRequestPromise=void 0)},retrieveSessionDidComplete:function(e){var t=this._authenticationSessionPromise;t&&(t.resolve(d.okResult(e)),this._authenticationSessionPromise=void 0)},retrieveSessionDidCancel:function(){var e=this._authenticationSessionPromise;e&&(e.resolve(d.cancelledResult()),this._authenticationSessionPromise=void 0)},_user:a.c({type:c.a}),_connection:a.c({type:v}),_authenticationRequestPromise:a.c({type:o.a}),_authentication_v1:a.c({type:S}),authenticatedUserDidChange:function(e,t){if(t){this._totalNumberOfAuthenticationSteps=2;var n=this.delegate;n?(this._completedAuthenticationStep=1,n.authenticationStepDidComplete(this,void 0,void 0,1,this._totalNumberOfAuthenticationSteps),this._completedAuthenticationStep=2,n.authenticationStepDidComplete(this,void 0,void 0,2,this._totalNumberOfAuthenticationSteps),this._user=t,n.authenticationDidComplete(this)):(this._completedAuthenticationStep=2,this._user=t)}},__superMap:{_$2RW$init:"init"}})},function(e,t,n){"use strict";var i=n(854),r=n(87),a=n(34),s=n(36),o=n(1177),c=n(244),l=n(10),u=r.a.extend({created:r.c(),fields:r.c(),modified:r.c(),recordChangeTag:r.c({type:String}),recordName:r.c({type:String}),recordType:r.c({type:String}),staticMembers:{__QUALIFIED_CLASS_NAME__:"CKRecord"}}),d=n(227),h=n(9),p=n(171),f=n(79),g=n(114),m=n(103);n.d(t,"a",function(){return v});var v=u.extend({staticMembers:{processDataHashThroughModel:function(e){return this.create(e).getDataHash()},__QUALIFIED_CLASS_NAME__:"Share"},currentUserParticipant:i.a.toOne({embedded:!0,type:p.a}),forRecord:r.c(),pluginFields:r.c(),publicPermission:r.c(),anonymousPublicAccess:r.c(),recordType:r.c({readOnly:!0}),share:r.c(),displayedHostname:r.c({type:String}),shortGUID:r.c({type:String}),participants:i.a.toMany({embedded:!0,type:p.a}),owner:i.a.toOne({embedded:!0,type:p.a}),effectiveAccess:a.b({dependencies:["publicPermission"],readOnly:!0,get:Object.assign(function(){return this.publicPermission===h.a.NONE?l.a.PRIVATE:l.a.PUBLIC},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])===h.a.NONE?l.a.PRIVATE:l.a.PUBLIC}})}),effectivePermission:a.b({dependencies:["publicPermission","participants","participants.contentsDidChange","participantPermissionChanged","_fallbackPermission"],readOnly:!0,get:Object.assign(function(){if(this.publicPermission===h.a.NONE){var e=this.participants,t=this._fallbackPermission;return 1===e.length&&t?t:_(e)}return this.publicPermission},{__CW__getter:function(e,t,n,i){if(i.internalGet(this,t[0+n])===h.a.NONE){var r=i.internalGet(this,t[1+n]),a=i.internalGet(this,t[4+n]);return 1===r.length&&a?a:_(r)}return i.internalGet(this,t[0+n])}})}),_fallbackPermission:a.b(null),isPublic:a.b({cacheable:!1,dependencies:["effectiveAccess"],readOnly:!0,get:Object.assign(function(){return this.effectiveAccess===l.a.PUBLIC},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])===l.a.PUBLIC}})}),isPrivate:a.b({cacheable:!1,dependencies:["effectiveAccess"],readOnly:!0,get:Object.assign(function(){return this.effectiveAccess===l.a.PRIVATE},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])===l.a.PRIVATE}})}),loggedInUserCanEditShare:a.b({dependencies:["participants","participants.contentsDidChange","owner","recordName",f.a.bindingFor("currentUserRecordName")],readOnly:!0,get:Object.assign(function(){var e;if(this.recordName){var t=this._getCurrentUserParticipant();if(t){var n=t.type;e=n===d.a.OWNER||n===d.a.ADMINISTRATOR}else e=!0}else e=!0;return e},{__CW__getter:function(e,t,n,i){var r;if(i.internalGet(this,t[3+n])){var a=this._getCurrentUserParticipant();if(a){var s=a.type;r=s===d.a.OWNER||s===d.a.ADMINISTRATOR}else r=!0}else r=!0;return r}})}),participantPermissionChanged:s.g(),assignFieldUpdates:function(e){var t=this.fields;if(t)for(var n=Object.keys(e),i=0,r=n.length;i<r;i++){var a=n[i],s=t[a],o=e[a];s&&s.value===o.value||(t[a]=o)}else this.fields=e},findEquivalentParticipant:function(e){var t=this.participants;if(e&&t){if(t.indexOf(e)>=0)return e;for(var n=Object(g.a)(e.userIdentity.lookupInfo.emailAddress),i=Object(m.a)(e.userIdentity.lookupInfo.phoneNumber),r=t&&t.length||0;r--;){var a=t.objectAt(r);if(n&&Object(g.a)(a.userIdentity.lookupInfo.emailAddress)===n)return a;if(i&&Object(m.a)(a.userIdentity.lookupInfo.phoneNumber)===i)return a}}},addParticipantsIgnoringDupes:function(e,t){if(e){var n=this,i=this.participants;e.forEach(function(e){var r=n.findEquivalentParticipant(e);if(o.a(r))t&&t!==r.permission&&(r.permission=t);else{var a=p.a.create(e.getDataHash());t&&(a.permission=t),i.push(a)}}),t&&this.participantPermissionChanged()}},removeEquivalentParticipants:function(e){for(var t=this.participants,n=0,i=e&&e.length||0;n<i;++n){var r=this.findEquivalentParticipant(e[n]);t.remove(r)}},setEffectiveAccess:function(e,t){if(e===l.a.PRIVATE)this.publicPermission=h.a.NONE;else{var n=this.effectivePermission;n&&n!==h.a.MIXED||(n=t),this.publicPermission=n;for(var i=this.participants,r=i.length-1;r>=0;r--){var a=i.objectAt(r);a.isOwner||(a.acceptanceStatus!==c.a.ACCEPTED?i.remove(a):a.permission=n)}}},setEffectivePermission:function(e){this.effectiveAccess===l.a.PUBLIC?this.publicPermission=e:this.setValueOnParticipants("permission",e)},setValueOnParticipants:function(e,t){for(var n=this.participants||[],i=0,r=n.length;i<r;++i){var a=n.objectAt(i);a.isOwner||(a[e]=t)}"permission"===e&&(this._fallbackPermission=t,n.length>1&&this.participantPermissionChanged())},toSanitizedJSON:function(){var e=this.toJSON();return delete e.currentUserParticipant,e},_getCurrentUserParticipant:function(){var e,t,n,i,r=this.participants;for(e=0,t=r.length;e<t;++e)if((n=r.objectAt(e)).getPath("userIdentity.isCurrentlyLoggedInUser")){i=n;break}return i}});function _(e){for(var t,n=0,i=e.length;n<i;++n){var r=e.objectAt(n);if(!r.isOwner){if(t&&t!==r.permission){t=h.a.MIXED;break}t=r.permission}}return t}},,function(e,t,n){var i=n(57);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==i(e)?e.split(""):Object(e)}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){var i=n(57),r=n(24)("toStringTag"),a="Arguments"==i(function(){return arguments}());e.exports=function(e){var t,n,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),r))?n:a?i(t):"Object"==(s=i(t))&&"function"==typeof t.callee?"Arguments":s}},function(e,t,n){"use strict";var i=n(172);i.b(i.c(),{"Toolbar.OneUp.Title.BurstCount.1":"Burst (1 Photo)","Toolbar.OneUp.Title.BurstCount.2":"Burst (2 Photos)","Toolbar.OneUp.Title.BurstCount.More":"Burst (%{count} Photos)","OneUp.Burst.Toolbar.Done":"Done","OneUp.Burst.Toolbar.Cancel":"Cancel","OneUp.Burst.Toolbar.MakeASelection":"Make a Selection","OneUp.Burst.Toolbar.Selection.1":"1 Photo Selected","OneUp.Burst.Toolbar.Selection.2":"2 Photos Selected","OneUp.Burst.Toolbar.Selection.More":"%{count} Photos Selected","OneUp.Burst.Button.MakeASelection":"Make a selection…","Badge.HDR":"HDR","Badge.SDOF":"PORTRAIT","Alert.Burst.Message.1":"Would you like to keep the other photo in this burst?","Alert.Burst.Message.2":"Would you like to keep the other photos in this burst?","Alert.Burst.Message.More":"Would you like to keep the other %{count} photos in this burst?","Alert.Burst.KeepAll":"Keep Everything","Alert.Burst.KeepSelection":"Keep Only Selection","Alert.Burst.Selection.Error":"Your burst could not be modified due to an error. Please try again.","Alert.OK.Button.Title":"OK","Alert.Cancel.Button.Title":"Cancel"})},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n(177),r=Object(i.b)("ArrayChangeOperation",function(e){e("INSERT"),e("REMOVE")})},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n(54),r={mixinDependencies:[n(242).a],applicationDidBecomeActive:i.a.define(),applicationWillResignActive:i.a.define(),applicationDidEnterBackground:i.a.define(),applicationWillEnterForeground:i.a.define()}},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n(80),r=n(41),a=n(150),s=n(352),o=i.a.extend({mixinDependencies:[s.a],user:r.c({type:a.a,serialization:{propertyName:"dsInfo"}}),dataUserDomain:r.c({type:String}),webServices:r.c({type:Map,serialization:{collectionObjectType:Object}}),staticMembers:{__QUALIFIED_CLASS_NAME__:"Session"}})},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=n(203).a.extend({topForCell:function(e,t){var n=e.layoutMetrics;return t.handle.position*(n.rowHeight+n.rowSpacing)+n.topPadding+n.topInset-n.hideableTopHeight},verticalScan:1024,horizontalScan:1024,estimateCellAtDistance:function(e,t,n,i,r){var a=e.layoutMetrics,s=n.handle,o=s.position,c=Math.round(r/(a.rowHeight+a.rowSpacing))+o;c<0&&(c=0);var l=t.length;c>=l&&(c=l-1),s=s.at(c);var u=this.cellForHandle(s).retain(),d=this.topForCell(e,n)-n.y;return this.layOutCellInDirection(e,u,1,this.topForCell(e,u)-d,1,this.leftForCell(e,u)),u.autorelease()},_findCellForItem:function(e,t,n,i){var r=n.find(function(e){return e.handle.value===i});if(r)return r.retain();var a=t.indexOf(i);if(-1===a)return null;var s=t.startHandle.at(a);return this.cellForHandle(s).retain()},spaceBelowCell:function(e,t){var n=e.layoutMetrics,i=t.handle;return(i.maximumPosition-i.position)*(n.rowHeight+n.rowSpacing)+n.bottomPadding-n.hideableBottomHeight},staticMembers:{__QUALIFIED_CLASS_NAME__:"IndexedListLayoutDelegate"}})},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=n(218).a.extend({provideRootRecordForUpdate:null,provideLatestRootRecordAfterUpdateConflict:null,didUpdateRootRecord:null,didUpdateShareRecord:null,type:"CREATE_SHARE",proposedShareRecordName:null,staticMembers:{__QUALIFIED_CLASS_NAME__:"CreateShareRecordOperation"}})},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n(41),r=n(218).a.extend({body:i.c({dependencies:["recordDataHash"],readOnly:!0,get:Object.assign(function(){return{recordName:this.recordDataHash.recordName}},{__CW__getter:function(e,t,n,i){return{recordName:i.internalGet(this,t[0+n]).recordName}}})}),didUpdateRootRecord:null,didUpdateShareRecord:null,type:"DELETE_SHARE",staticMembers:{__QUALIFIED_CLASS_NAME__:"DeleteShareRecordOperation"}})},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=n(177).b("CPLSubscriptionState",{NOT_SET:"NOT_SET",LISTENING:"LISTENING",FAILED:"FAILED"})},function(e,t,n){"use strict";var i=n(34),r=n(180),a=n(36),s=n(125),o=n(1184),c=n(1127),l=(n(1022),n(409)),u=n(1233),d=n(1235),h=n(1178),p=n(93),f=n(192),g=n(41),m=n(1206),v=n(126),_=n(80),b=n(49),y=n(54),I=_.a.extend(a.a,b.a,{ownerProgressBar:i.b(),drawFillContent:y.a.define(),wantsContinuousUpdates:i.b({defaultValue:!1,type:Boolean}),wantsTrackUnderneath:i.b({defaultValue:!1,type:Boolean}),width:i.b({type:Number}),height:i.b({type:Number}),init:function(e){this.ownerProgressBar=e,this.__s._$bd$init.call(this)},__superMap:{_$bd$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"ProgressBarFillRenderer"}}),w=I.extend({repetitionAspectRatio:i.b({defaultValue:4,type:Number}),repetitionSlideTime:i.b({defaultValue:1e3,type:Number}),slideDirection:i.b({defaultValue:-1,type:Number}),wantsSubpixelPrecision:i.b({defaultValue:!0,type:Boolean}),singleRepetitionCanvas:v.a.define(),wantsContinuousUpdates:i.b({readOnly:!0,dependencies:["repetitionSlideTime","slideDirection"],get:Object.assign(function(){return this.repetitionSlideTime<1/0&&0!==this.slideDirection},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])<1/0&&0!==i.internalGet(this,t[1+n])}})}),repetitionWidth:i.b({readOnly:!0,dependencies:["repetitionAspectRatio","height"],get:Object.assign(function(){return Math.round(this.repetitionAspectRatio*this.height)},{__CW__getter:function(e,t,n,i){return Math.round(i.internalGet(this,t[0+n])*i.internalGet(this,t[1+n]))}})}),backgroundSourceCanvas:i.b({readOnly:!0,dependencies:["singleRepetitionCanvas","width","height"],get:function(){var e=this.singleRepetitionCanvas,t=this.width,n=this.height;if(!e||!t||!n)return null;var i=document.createElement("canvas"),r=i.getContext("2d");i.width=t+e.width,i.height=n,r.drawImage(e,0,0);for(var a=e.width;a<i.width;a*=2)r.drawImage(i,0,0,a,n,a,0,a,n);return i}}),drawFillContent:function(e){var t=this.backgroundSourceCanvas,n=this.slideDirection;if(t){var i=Date.now()/this.repetitionSlideTime%1*this.repetitionWidth||0,r=n>0?this.width-t.width+i:n<0?0-i:0,a=Math.ceil(r),s=Math.floor(r);e.drawImage(t,s,0),this.wantsSubpixelPrecision&&(e.globalAlpha=r-s,e.drawImage(t,a,0),e.globalAlpha=1)}},staticMembers:{__QUALIFIED_CLASS_NAME__:"ProgressBarRepeatedContentFillRenderer"}}),S=w.extend({baseColor:i.b({defaultValue:"rgb(36, 175, 213)",type:String}),stripeColor:i.b({defaultValue:"rgb(20, 150, 190)",type:String}),stripeAngle:i.b({defaultValue:-45,type:Number}),stripeWeight:i.b({defaultValue:1,type:Number}),stripeSpacing:i.b({defaultValue:1,type:Number}),repetitionSlideTime:500,stripeWidth:i.b({readOnly:!0,dependencies:["stripeWeight","height"],get:Object.assign(function(){return Math.round(this.stripeWeight*this.height)},{__CW__getter:function(e,t,n,i){return Math.round(i.internalGet(this,t[0+n])*i.internalGet(this,t[1+n]))}})}),stripeGap:i.b({readOnly:!0,dependencies:["stripeSpacing","height"],get:Object.assign(function(){return Math.round(this.stripeSpacing*this.height)},{__CW__getter:function(e,t,n,i){return Math.round(i.internalGet(this,t[0+n])*i.internalGet(this,t[1+n]))}})}),stripeShearOffset:i.b({readOnly:!0,dependencies:["stripeAngle","height"],get:Object.assign(function(){return Math.round(this.height/Math.tan((90+this.stripeAngle)*Math.PI/180))},{__CW__getter:function(e,t,n,i){return Math.round(i.internalGet(this,t[1+n])/Math.tan((90+i.internalGet(this,t[0+n]))*Math.PI/180))}})}),stripeInterval:i.b({readOnly:!0,dependencies:["stripeWidth","stripeGap"],get:Object.assign(function(){return this.stripeWidth+this.stripeGap},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])+i.internalGet(this,t[1+n])}})}),repetitionAspectRatio:i.b({readOnly:!0,dependencies:["stripeInterval","height"],get:Object.assign(function(){return this.stripeInterval/this.height},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])/i.internalGet(this,t[1+n])}})}),singleRepetitionCanvas:i.b({readOnly:!0,dependencies:["repetitionWidth","height","baseColor","stripeColor","stripeWidth","stripeShearOffset"],get:function(){var e=this.repetitionWidth,t=this.height,n=this.baseColor,i=this.stripeColor,r=this.stripeWidth,a=this.stripeShearOffset;if(!e||!t||!r)return null;var s=document.createElement("canvas"),o=s.getContext("2d");s.width=e,s.height=t,o.fillStyle=n,o.fillRect(0,0,e,t);for(var c=-3;c<=3;c++){var l=Math.max(0,-a)+c*e;o.beginPath(),o.moveTo(l,0),o.lineTo(l+r,0),o.lineTo(l+r+a,t),o.lineTo(l+a,t),o.lineTo(l,0),o.closePath(),o.fillStyle=i,o.fill()}return s}}),staticMembers:{__QUALIFIED_CLASS_NAME__:"ProgressBarBarberPoleFillRenderer"}}),C=w.extend({baseColor:i.b({defaultValue:"rgb(36, 175, 213)",type:String}),gradientColor:i.b({defaultValue:"rgb(20, 150, 190)",type:String}),gradientCenterpoint:i.b({defaultValue:.5,type:Number}),repetitionAspectRatio:5,repetitionSlideTime:2e3,singleRepetitionCanvas:i.b({readOnly:!0,dependencies:["width","height","baseColor","gradientColor","gradientCenterpoint","repetitionWidth"],get:function(){var e=this.height,t=this.gradientCenterpoint,n=this.repetitionWidth;if(!e||!n)return null;var i=this.baseColor,r=this.gradientColor,a=document.createElement("div");document.head.appendChild(a),3===(i=(i=s.a(a).set("color",i).get("color")).substring(i.indexOf("(")+1,i.indexOf(")")).split(",").map(function(e){return parseFloat(e.trim())})).length&&i.push(1),3===(r=(r=s.a(a).set("color",r).get("color")).substring(r.indexOf("(")+1,r.indexOf(")")).split(",").map(function(e){return parseFloat(e.trim())})).length&&r.push(1),document.head.removeChild(a);var o=document.createElement("canvas"),c=o.getContext("2d");o.width=n,o.height=e;for(var l=c.createLinearGradient(0,0,n,0),u=0,d=[];u<=.5;u+=.1){for(var h=.5-.5*Math.cos(2*u*Math.PI),p=0;p<4;p++)d[p]=Math.round((1-h)*i[p]+h*r[p]);var f="rgba("+d[0]+", "+d[1]+", "+d[2]+", "+d[3]+")";l.addColorStop(u*t/.5,f),u!==1-u&&l.addColorStop(1-u*(1-t)/.5,f)}return c.fillStyle=l,c.fillRect(0,0,n,e),o}}),staticMembers:{__QUALIFIED_CLASS_NAME__:"ProgressBarRepeatedGradientFillRenderer"}}),O=I.extend({wantsContinuousUpdates:!1,color:i.b({defaultValue:"rgb(36, 175, 213)",type:String}),drawFillContent:function(e){e.fillStyle=this.color,e.fillRect(0,0,this.width,this.height)},staticMembers:{__QUALIFIED_CLASS_NAME__:"ProgressBarSolidColorFillRenderer"}}),A=I.extend({wantsContinuousUpdates:!1,preservesExistingTransparency:!0,color:i.b({defaultValue:"black",type:String}),weight:i.b({defaultValue:.5,type:Number}),_cornerRadius:i.b({readOnly:!0,binding:"ownerProgressBar._effectiveCornerRadius"}),_weightInCanvasPixels:i.b({readOnly:!0,dependencies:["ownerProgressBar._effectiveDPR","weight"],get:Object.assign(function(){return this.weight*this.getPath("ownerProgressBar._effectiveDPR")},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[1+n])*i.internalGetPath(this,t[0+n])}})}),_cachedResult:i.b({readOnly:!0,dependencies:["width","height","color","_weightInCanvasPixels","_cornerRadius"],get:function(){var e=this.width,t=this.height,n=this.color,i=this._weightInCanvasPixels,r=this._cornerRadius,a=document.createElement("canvas");a.width=e,a.height=t;var s=a.getContext("2d"),o=Math.ceil(i),c=o,l=o,u=Math.max(0,r-o),d=e-2*o,h=t-2*o;return s.beginPath(),s.moveTo(c+u,l),s.arcTo(c+d,l,c+d,l+h,u),s.arcTo(c+d,l+h,c,l+h,u),s.arcTo(c,l+h,c,l,u),s.arcTo(c,l,c+d,l,u),s.closePath(),s.fillStyle=n,s.globalAlpha=i/o,s.fillRect(0,0,e,t),s.globalAlpha=1,s.globalCompositeOperation="destination-out",s.fill(),s.globalCompositeOperation="source-over",a}}),drawFillContent:function(e){e.drawImage(this._cachedResult,0,0)},staticMembers:{__QUALIFIED_CLASS_NAME__:"ProgressBarThinStrokeRenderer"}}),E=l.a.extend(c.a,{staticMembers:{template:{type:"ELEMENT",tagname:"div",classes:["progress-bar-view"]},className:"to-cw-progress-bar-view",__QUALIFIED_CLASS_NAME__:"ProgressBarView"},owner:i.b(),value:i.b(),minValue:i.b({defaultValue:0,type:Number}),maxValue:i.b({defaultValue:1,type:Number}),isNondeterminate:i.b({defaultValue:!1,type:Boolean}),animatesValue:i.b({defaultValue:!0,type:Boolean}),trackRendererClass:i.b(O.extend({color:"rgb(240, 240, 240)"})),progressRendererClass:i.b(C.extend({baseColor:"rgb(36, 175, 213)",gradientColor:"rgb(20, 150, 190)"})),nondeterminateRendererClass:i.b(S.extend({baseColor:"rgb(240, 240, 240)",stripeColor:"rgb(36, 175, 213)"})),postRendererClass:i.b(A.extend({color:"black",weight:.1})),width:i.b({dependencies:["isAttached"],writeDependencies:[],get:Object.assign(function(e){return this.isAttached?e||this.element.offsetWidth:0},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?e||this.element.offsetWidth:0}}),set:h.a}),height:i.b({dependencies:["isAttached"],writeDependencies:[],get:Object.assign(function(e){return this.isAttached?e||this.element.offsetHeight:0},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?e||this.element.offsetHeight:0}}),set:h.a}),cornerRadius:i.b({dependencies:["isAttached"],writeDependencies:[],get:Object.assign(function(e){return this.isAttached?e>=0?e:parseFloat(this.style.get("border-radius"))||1/0:0},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?e>=0?e:parseFloat(this.style.get("border-radius"))||1/0:0}}),set:h.a}),interiorCornerRadius:i.b({dependencies:["cornerRadius"],writeDependencies:[],get:Object.assign(function(e){return isNaN(e)?this.cornerRadius:e},{__CW__getter:function(e,t,n,i){return isNaN(e)?i.internalGet(this,t[0+n]):e}}),set:h.a}),_trackRenderer:i.b({readOnly:!0,strong:!0,dependencies:["trackRendererClass"],downstreamBindings:{width:"(owner)._drawnWidth",height:"(owner)._drawnHeight"},get:Object.assign(function(){return this.trackRendererClass.create(this)},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n]).create(this)}})}),_progressRenderer:i.b({readOnly:!0,strong:!0,dependencies:["progressRendererClass"],downstreamBindings:{width:"(owner)._drawnWidth",height:"(owner)._drawnHeight"},get:Object.assign(function(){return this.progressRendererClass.create(this)},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n]).create(this)}})}),_nondeterminateRenderer:i.b({readOnly:!0,strong:!0,dependencies:["nondeterminateRendererClass"],downstreamBindings:{width:"(owner)._drawnWidth",height:"(owner)._drawnHeight"},get:Object.assign(function(){return this.nondeterminateRendererClass.create(this)},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n]).create(this)}})}),_postRenderer:i.b({readOnly:!0,strong:!0,dependencies:["postRendererClass"],downstreamBindings:{width:"(owner)._drawnWidth",height:"(owner)._drawnHeight"},get:Object.assign(function(){return this.postRendererClass?this.postRendererClass.create(this):void 0},{__CW__getter:function(e,t,n,i){return this.postRendererClass?i.internalGet(this,t[0+n]).create(this):void 0}})}),_progressWidthZeroPoint:i.b({readOnly:!0,dependencies:["_effectiveCornerRadius","_effectiveInteriorCornerRadius","_drawnWidth","_effectiveDPR"],get:Object.assign(function(){var e=this._effectiveCornerRadius+this._effectiveInteriorCornerRadius;return e>this._drawnWidth/10?Number(this._effectiveDPR):e},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n])+i.internalGet(this,t[1+n]);return r>i.internalGet(this,t[2+n])/10?Number(i.internalGet(this,t[3+n])):r}})}),_animatedValueFeed:i.b({defaultValue:NaN,didChange:function(){var e=Date.now(),t=this._timeOfPreviousAnimatedValueInputUpdate||e-1e3;this._lastDurationBetweenAnimatedValueInputUpdates=e-t,this._timeOfPreviousAnimatedValueInputUpdate=e}}),_animatedValue:d.a({readOnly:!0,binding:p.c("_animatedValueFeed"),decideDuration:function(e,t){if(e<t)return 0;var n=this._lastDurationBetweenAnimatedValueInputUpdates;return 1===e?500:1.5*n||500}}),_effectiveValue:i.b(NaN),_progress:i.b({readOnly:!0,dependencies:["_effectiveValue","minValue","maxValue"],get:Object.assign(function(){return(this._effectiveValue-this.minValue)/(this.maxValue-this.minValue)},{__CW__getter:function(e,t,n,i){return(i.internalGet(this,t[0+n])-i.internalGet(this,t[1+n]))/(i.internalGet(this,t[2+n])-i.internalGet(this,t[1+n]))}})}),_effectivelyIsNondeterminate:i.b({readOnly:!0,dependencies:["isNondeterminate","_progress"],get:Object.assign(function(){if(this.isNondeterminate)return!0;var e=this._progress;return!(e>=0&&e<=1)},{__CW__getter:function(e,t,n,i){if(i.internalGet(this,t[0+n]))return!0;var r=i.internalGet(this,t[1+n]);return!(r>=0&&r<=1)}})}),_nondeterminismLevel:d.a({duration:250,readOnly:!0,dependencies:["_effectivelyIsNondeterminate"],get:Object.assign(function(){return this._effectivelyIsNondeterminate?1:0},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?1:0}})}),_effectiveDPR:i.b({readOnly:!0,dependencies:[f.a.sharedInstance.bindingFor("devicePixelRatio")],get:Object.assign(function(){return Math.ceil(f.a.sharedInstance.devicePixelRatio)},{__CW__getter:function(e,t,n,i){return Math.ceil(i.internalGetPath(this,t[0+n]))}})}),_drawnWidth:i.b({readOnly:!0,dependencies:["width","_effectiveDPR"],get:Object.assign(function(){return this.width*this._effectiveDPR},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])*i.internalGet(this,t[1+n])}})}),_drawnHeight:i.b({readOnly:!0,dependencies:["height","_effectiveDPR"],get:Object.assign(function(){return this.height*this._effectiveDPR},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])*i.internalGet(this,t[1+n])}})}),_effectiveCornerRadius:i.b({readOnly:!0,dependencies:["cornerRadius","_effectiveDPR","_drawnWidth","_drawnHeight"],get:Object.assign(function(){return Math.min(this._drawnWidth/2,this._drawnHeight/2,this.cornerRadius*this._effectiveDPR)},{__CW__getter:function(e,t,n,i){return Math.min(i.internalGet(this,t[2+n])/2,i.internalGet(this,t[3+n])/2,i.internalGet(this,t[0+n])*i.internalGet(this,t[1+n]))}})}),_effectiveInteriorCornerRadius:i.b({readOnly:!0,dependencies:["interiorCornerRadius","_effectiveDPR","_drawnWidth","_drawnHeight"],get:Object.assign(function(){return Math.min(this._drawnWidth/2,this._drawnHeight/2,this.interiorCornerRadius*this._effectiveDPR)},{__CW__getter:function(e,t,n,i){return Math.min(i.internalGet(this,t[2+n])/2,i.internalGet(this,t[3+n])/2,i.internalGet(this,t[0+n])*i.internalGet(this,t[1+n]))}})}),_isUpdatingContinuously:i.b({readOnly:!0,dependencies:["isAttached","_trackRenderer.wantsContinuousUpdates","_nondeterminateRenderer.wantsContinuousUpdates","_progressRenderer.wantsContinuousUpdates","_postRenderer.wantsContinuousUpdates","_nondeterminismLevel"],get:Object.assign(function(){if(!this.isAttached)return!1;if(this.getPath("_trackRenderer.wantsContinuousUpdates")||this.getPath("_postRenderer.wantsContinuousUpdates"))return!0;var e=this._nondeterminismLevel;return 0!==e&&this.getPath("_nondeterminateRenderer.wantsContinuousUpdates")||1!==e&&this.getPath("_progressRenderer.wantsContinuousUpdates")},{__CW__getter:function(e,t,n,i){if(!i.internalGet(this,t[0+n]))return!1;if(i.internalGetPath(this,t[1+n])||i.internalGetPath(this,t[4+n]))return!0;var r=i.internalGet(this,t[5+n]);return 0!==r&&i.internalGetPath(this,t[2+n])||1!==r&&i.internalGetPath(this,t[3+n])}}),didChange:function(e){e&&!this._continuousUpdateRAF&&this._scheduleNextContinuousUpdate(),!e&&this._continuousUpdateRAF&&(cancelAnimationFrame(this._continuousUpdateRAF),this._continuousUpdateRAF=null)}}),_scheduleNextContinuousUpdate:g.c(function(){var e=this;return function(){e._continuousUpdateRAF=m.a(e._performNextContinuousUpdate)}}),_performNextContinuousUpdate:g.c(function(){var e=this;return function(){e._continuousUpdateRAF=null,e._renderEverything(),e._scheduleNextContinuousUpdate()}}),_rightCapClippingMask:i.b({readOnly:!0,dependencies:["_effectiveCornerRadius","_drawnHeight"],get:Object.assign(function(){var e=this._effectiveCornerRadius,t=this._drawnHeight;if(!e||!t)return null;var n=document.createElement("canvas"),i=n.getContext("2d");return n.width=e,n.height=t,i.fillRect(0,0,e,t),i.globalCompositeOperation="destination-out",i.beginPath(),i.moveTo(0,0),i.arcTo(e,0,e,t-e,e),i.arcTo(e,t,0,t,e),i.moveTo(0,0),i.closePath(),i.fill(),n},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]);if(!r||!a)return null;var s=document.createElement("canvas"),o=s.getContext("2d");return s.width=r,s.height=a,o.fillRect(0,0,r,a),o.globalCompositeOperation="destination-out",o.beginPath(),o.moveTo(0,0),o.arcTo(r,0,r,a-r,r),o.arcTo(r,a,0,a,r),o.moveTo(0,0),o.closePath(),o.fill(),s}})}),_leftCapClippingMask:i.b({readOnly:!0,dependencies:["_rightCapClippingMask"],get:Object.assign(function(){var e=this._rightCapClippingMask;if(!e)return null;var t=document.createElement("canvas"),n=t.getContext("2d");return t.width=e.width,t.height=e.height,n.scale(-1,1),n.translate(-t.width,0),n.drawImage(e,0,0),t},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);if(!r)return null;var a=document.createElement("canvas"),s=a.getContext("2d");return a.width=r.width,a.height=r.height,s.scale(-1,1),s.translate(-a.width,0),s.drawImage(r,0,0),a}}),didChange:function(){}}),_mainCanvas:g.c(function(){var e=this.__mainCanvas;return e||((e=document.createElement("canvas")).style.position="absolute",this.__mainCanvas=e)}),_mainContext:g.c(function(){return this.__mainContext||(this.__mainContext=this._mainCanvas.getContext("2d"))}),_scratchCanvas:g.c(function(){return this.__scratchCanvas||(this.__scratchCanvas=document.createElement("canvas"))}),_scratchContext:g.c(function(){return this.__scratchContext||(this.__scratchContext=this._scratchCanvas.getContext("2d"))}),_scratchierCanvas:g.c(function(){return this.__scratchierCanvas||(this.__scratchierCanvas=document.createElement("canvas"))}),_scratchierContext:g.c(function(){return this.__scratchierContext||(this.__scratchierContext=this._scratchierCanvas.getContext("2d"))}),_draw:function(){var e=this._drawnWidth,t=this._drawnHeight;if(e&&t){var n=this._trackRenderer,i=this._progressRenderer,r=this._nondeterminateRenderer,a=this._postRenderer,s=this._mainContext,o=this._scratchCanvas,c=this._scratchContext,l=this._scratchierCanvas,u=this._scratchierContext,d=this._leftCapClippingMask,h=this._rightCapClippingMask,p=this._nondeterminismLevel;if(p>0){var f=p<1?u:s;r.drawFillContent(f),this._maskOffCapsForContext(f,e,d,h),r.wantsTrackUnderneath&&(n.drawFillContent(c),this._maskOffCapsForContext(c,e,d,h),f.globalCompositeOperation="destination-over",f.drawImage(o,0,0),f.globalCompositeOperation="source-over")}if(p<1){var g=this._progress,m=this._progressWidthZeroPoint,v=m+g*(e-m),_=Math.floor(v),b=Math.ceil(v),y=this._effectiveInteriorCornerRadius;n.drawFillContent(s),i.wantsTrackUnderneath||s.clearRect(0,0,_-(h?h.width:0),t),i.drawFillContent(c),c.globalCompositeOperation="destination-out",c.beginPath(),c.moveTo(v-y,0),c.arcTo(v,0,v,t-y,y),c.arcTo(v,t,v-y,t,y),c.lineTo(b,t),c.lineTo(b,0),c.lineTo(v-y,0),c.closePath(),c.fillStyle="black",c.fill(),c.globalCompositeOperation="source-over",c.clearRect(b,0,e-b,t),s.drawImage(o,0,0),this._maskOffCapsForContext(s,e,d,h)}p>0&&p<1&&(s.globalAlpha=p,s.drawImage(l,0,0),s.globalAlpha=1),a&&(a.preservesExistingTransparency?(c.clearRect(0,0,e,t),a.drawFillContent(c),s.globalCompositeOperation="source-atop",s.drawImage(o,0,0),s.globalCompositeOperation="source-over"):a.drawFillContent(s))}},_maskOffCapsForContext:function(e,t,n,i){e.globalCompositeOperation="destination-out",n&&e.drawImage(n,0,0),i&&e.drawImage(i,t-i.width,0),e.globalCompositeOperation="source-over"},_renderEverything:a.f("isAttached","_drawnWidth","_drawnHeight",function(e,t,n){var i=this._mainCanvas,r=this._mainContext,a=this._scratchCanvas,s=this._scratchContext,o=this._scratchierCanvas,c=this._scratchierContext;i.width!==t||i.height!==n?(i.width=a.width=o.width=t,i.style.width=this.width+"px",i.height=a.height=o.height=n):(r.clearRect(0,0,t,n),s.clearRect(0,0,t,n),c.clearRect(0,0,t,n)),e&&!i.parentNode&&this.element.appendChild(i),this._draw()}),_updateForDiscreteInputs:a.f("_progress","_nondeterminismLevel",function(){this._isUpdatingContinuously||this._renderEverything()}),_maintainValueBindings:a.f("animatesValue",function(e){e?(this.bind("_animatedValueFeed","value"),this.bind("_effectiveValue","_animatedValue")):(this.bind("_effectiveValue","value"),this.unbind("_animatedValueFeed"),this._animatedValueFeed=NaN)})}),T=n(824),M=n(197),D=n(813),L=M.a.MOUSE,N=M.a.TOUCH,P=l.a.extend(c.a,{staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"progressLabelSpinnerView"},{type:"ELEMENT",tagname:"span",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"_progressLabel",attributes:{}}]}],classes:["progress-label-view",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"_shouldHideProgressLabelView",truevalue:"hide",attributes:{}}],name:"progressLabelView"},{type:"VIEWOUTLET",tagname:"view",name:"progressBarView"}],classes:["photos-ui-progress-view"]},__QUALIFIED_CLASS_NAME__:"ProgressView"},_isAttached:a.f({inputs:["isAttached","sizeClass"],callback:function(e){!0!==e||this.primaryInteractionMode!==L&&this.sizeClass!==D.a.REGULAR||(this._setWidthOnProgressLabel(this.possibleProgressLabels),this._setWidthOnProgressLabel([this.progressLabel]))}}),sizeClass:i.b(),primaryInteractionMode:i.b(N),_progressLabelWidth:0,_setWidthOnProgressLabel:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(0!==t.length){var n=this._progressLabel,i=t.reduce(function(t,n){return e._progressLabel=n,Math.max(e.progressLabelView.clientWidth,t)},this._progressLabelWidth);this._progressLabel=n,this._progressLabelWidth=i,s.a(this.progressLabelView,"min-width",i),this.progressBarView.propertyChanged("width")}},reset:function(){this._progressLabelWidth=0,this.propertyChanged("progressLabel"),this.propertyChanged("possibleProgressLabels"),this.isIndeterminate=!1;var e=this.progressDuration;this.progressDuration=0,this.progressValue=0,this.progressDuration=e},possibleProgressLabels:i.b({defaultValue:[],type:Array,didChange:function(e){this.sizeClass!==D.a.REGULAR&&this.primaryInteractionMode!==L||this._setWidthOnProgressLabel(e)}}),progressLabel:i.b({defaultValue:"",type:String,didChange:function(e){this.sizeClass!==D.a.REGULAR&&this.primaryInteractionMode!==L||this._setWidthOnProgressLabel([e]),this._progressLabel=e}}),_progressLabel:i.b(""),_shouldHideProgressLabelView:i.b({dependencies:["_progressLabel"],readOnly:!0,type:Boolean,get:Object.assign(function(){var e=this._progressLabel;return void 0===e||""===e},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return void 0===r||""===r}})}),progressValue:i.b({defaultValue:0,type:Number,didChange:function(e){this.animate("_progressValue",e,this.progressDuration)}}),progressDuration:666,_progressValue:c.b(0),progressBarView:i.b({dependencies:["primaryInteractionMode","sizeClass"],downstreamBindings:{isNondeterminate:"(owner).isIndeterminate",value:"(owner)._progressValue"},readOnly:!0,type:E,get:Object.assign(function(){var e=this.primaryInteractionMode;return e===L||this.sizeClass===D.a.REGULAR?this.mouseProgressBarView:e===N?this.touchProgressBarView:void 0},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return r===L||i.internalGet(this,t[1+n])===D.a.REGULAR?this.mouseProgressBarView:r===N?this.touchProgressBarView:void 0}})}),mouseProgressBarView:r.b(E.extend(T.a,{minValue:-5,maxValue:100,height:10,_widthObserver:a.f({inputs:["viewportWidth"],callback:function(){this.propertyChanged("width")}}),cornerRadius:1/0,interiorCornerRadius:0,progressRendererClass:O.extend({color:"rgb(55, 141, 241)"}),nondeterminateRendererClass:C.extend({baseColor:"rgb(175, 175, 175)",gradientColor:"rgb(215, 215, 215)",repetitionAspectRatio:150,repetitionSlideTime:1250,slideDirection:1}),trackRendererClass:O.extend({color:"rgb(255, 255, 255)"}),postRendererClass:A.extend({color:"rgba(200, 200, 200, 0.95)",weight:1})})),touchProgressBarView:r.b(E.extend(T.a,{minValue:-5,maxValue:100,_widthObserver:a.f({inputs:["viewportWidth"],callback:function(){this.propertyChanged("width")}}),cornerRadius:0,interiorCornerRadius:0,progressRendererClass:O.extend({color:"rgb(55, 141, 241)"}),nondeterminateRendererClass:O.extend({color:"rgba(0, 0, 0, 0)"}),trackRendererClass:O.extend({color:"rgba(0, 0, 0, 0)"})})),isIndeterminate:i.b(!1),progressLabelSpinnerView:i.b({defaultValue:r.b(u.a.extend({size:16,color:"black"})),dependencies:["isIndeterminate","primaryInteractionMode","sizeClass"],readOnly:!0,strong:!0,type:u.a,get:Object.assign(function(e){if(!0===this.isIndeterminate&&this.primaryInteractionMode===N&&this.sizeClass===D.a.COMPACT)return e},{__CW__getter:function(e,t,n,i){if(!0===i.internalGet(this,t[0+n])&&i.internalGet(this,t[1+n])===N&&i.internalGet(this,t[2+n])===D.a.COMPACT)return e}})})});n.d(t,"a",function(){return R}),n.d(t,"b",function(){return x}),n.d(t,"c",function(){return F});var R=600,x=250,F={mixinDependencies:[c.a],staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"VIEWOUTLET",tagname:"view",name:"importProgressView"}]}}},importProgressView:i.b({defaultValue:r.b(P.extend({progressDuration:0})),downstreamBindings:{isIndeterminate:"(owner).importProgressIsIndeterminate",possibleProgressLabels:"(owner).possibleImportProgressLabels",progressLabel:"(owner).importProgressLabel",progressValue:"(owner).importProgressValue",primaryInteractionMode:"(owner).primaryInteractionMode",sizeClass:"(owner).sizeClass"},readOnly:!0,strong:!0,type:P,dependencies:["_shouldShowImportProgressView"],get:Object.assign(function(e){if(!0===this._shouldShowImportProgressView)return e},{__CW__getter:function(e,t,n,i){if(!0===i.internalGet(this,t[0+n]))return e}})}),importProgressLabel:i.b(""),importProgressIsIndeterminate:i.b(!1),importProgressValue:i.b(0),possibleImportProgressLabels:i.b([]),sizeClass:i.b(),_importProgressViewMaxPosition:0,_importProgressViewPosition:c.b(0),_importProgressViewPositionObserver:a.f({inputs:["_importProgressViewPosition","photosGridView","importProgressView"],callback:function(e){var t=Math.min(e,this._importProgressViewMaxPosition);void 0!==this.photosGridView&&(s.a(this.photosGridView.element,"bottom",t),this.viewController.gridViewController.measureViewport()),void 0!==this.importProgressView&&s.a(this.importProgressView.element,"top","calc(100% - "+t+"px)")}}),_shouldAnimateImportProgressAwayTimeout:0,_shouldHideImportProgressTimeout:0,_shouldShowImportProgressView:i.b(),_moveProgressViewInAndOutAsNecessary:function(e){var t=this,n=this.shouldShowImportProgressView;if(this.isAttached&&Boolean(n)!==Boolean(this._shouldShowImportProgressView))if(clearTimeout(this._shouldAnimateImportProgressAwayTimeout),clearTimeout(this._shouldHideImportProgressTimeout),!0===n){this._shouldShowImportProgressView=!0;var i=this._importProgressViewMaxPosition=this.importProgressView.element.clientHeight;e?this.animate("_importProgressViewPosition",i,300):this._importProgressViewPosition=i}else e?(this._shouldAnimateImportProgressAwayTimeout=o.a(function(){return t.animate("_importProgressViewPosition",0,R)},x),this._shouldHideImportProgressTimeout=o.a(function(){return t._shouldShowImportProgressView=!1},R+x)):(this._importProgressViewPosition=0,this._shouldShowImportProgressView=!1)},_doNotAnimateInProgressViewWhenNecessaryOnAttaching:a.f({inputs:["isAttached"],callback:function(e){e&&this._moveProgressViewInAndOutAsNecessary(!1)}}),shouldShowImportProgressView:i.b({defaultValue:!1,type:Boolean,didChange:function(){this.isAttached&&this._moveProgressViewInAndOutAsNecessary(!0)}})}},function(e,t,n){"use strict";var i=n(409),r=n(165),a={staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",styles:{position:"absolute"}}}}},s=i.a.extend(a,r.a,{staticMembers:{template:{type:"ELEMENT",tagname:"div",classes:["cw-divider-item-view"]},className:"cw-ui-divider-item-view",__QUALIFIED_CLASS_NAME__:"DividerItemView"}}),o=n(34),c=n(1180),l=n(172),u=n(189),d=i.a.extend(a,{staticMembers:{template:{type:"ELEMENT",tagname:"div",classes:["cw-item-view",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isDisabled",truevalue:"cw-disabled",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isHighlighted",truevalue:"cw-highlighted",attributes:{}}]},className:"cw-ui-item-view",__QUALIFIED_CLASS_NAME__:"ItemView"},isDisabled:o.b({type:"boolean",defaultValue:!1}),isHighlighted:o.b({type:"boolean",defaultValue:!1})}),h=d.extend(r.a,{staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"ELEMENT",tagname:"div",classes:["checkmark"]},{type:"ELEMENT",tagname:"div",name:"icon",classes:["icon",{type:"CLASSNAMEOUTLET",bindingtype:"DIRECTBINDING",name:"iconClass",attributes:{}}]},{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"_displayTitle",attributes:{}}],classes:["title",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"titleIsAlwaysLTR",truevalue:"is-always-ltr",attributes:{}}]},{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"_keySequenceSymbols",attributes:{}}],classes:["key-sequence-symbols"]}],classes:["cw-menu-item-view",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"hasCheckmark",truevalue:"has-checkmark",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"_hasIconClass",truevalue:"has-icon-class",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"_hasKeySequence",truevalue:"has-key-sequence",attributes:{}}]}},className:"cw-ui-menu-item-view",__QUALIFIED_CLASS_NAME__:"MenuItemView"},_displayTitle:o.b({dependencies:["title","shouldEscape"],readOnly:!0,get:Object.assign(function(){return this.shouldEscape?c.b(this.title):this.title},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[1+n])?c.b(i.internalGet(this,t[0+n])):i.internalGet(this,t[0+n])}})}),titleIsAlwaysLTR:o.b({type:"boolean",defaultValue:!1}),hasCheckmark:o.b({type:"boolean",defaultValue:!1}),_hasKeySequence:o.b({dependencies:["keySequence"],readOnly:!0,get:Object.assign(function(){return!!this.keySequence},{__CW__getter:function(e,t,n,i){return!!i.internalGet(this,t[0+n])}})}),_hasIconClass:o.b({dependencies:["iconClass"],readOnly:!0,get:Object.assign(function(){return!!this.iconClass},{__CW__getter:function(e,t,n,i){return!!i.internalGet(this,t[0+n])}})}),iconClass:o.b(),keySequence:o.b(),_keySequenceSymbols:o.b({dependencies:["keySequence"],readOnly:!0,get:Object.assign(function(){var e=this.keySequence;return e?p(e):null},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return r?p(r):null}})}),title:o.b(),shouldEscape:o.b({type:"boolean",defaultValue:!0})});function p(e){var t,n,i="",r=e.modifiers,a=e.keys;if(r)for(t=0,n=r.length;t<n;t++)i+=l.d(f[r[t]])||r[t];if(a)for(t=0,n=a.length;t<n;t++)i+=l.d(f[a[t]])||String.fromCharCode(a[t]);return i}var f={},g=u.a;f[g.BACKSPACE]="⌫",f[g.TAB]="⇥",f[g.SPACE]="Space",f[g.RETURN]="⏎",f[g.ENTER]="⏎",f[g.SHIFT]="⇧",f[g.CTRL]="⌃",f[g.OPTION]="⌥",f[g.ESC]="⎋",f[g.LEFT]="←",f[g.UP]="↑",f[g.RIGHT]="→",f[g.DOWN]="↓",f[g.DELETE]="⌦",f[g.HOME]="Home",f[g.END]="End",f[g.PAGEUP]="Page Up",f[g.PAGEDOWN]="Page Down",f[g.INSERT]="Insert",f[g.CMD]="⌘";var m=n(49),v={mixinDependencies:[m.a],action:o.b()},_=(m.a,m.a,d.extend(r.a,{staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"ELEMENT",tagname:"div",classes:["icon",{type:"CLASSNAMEOUTLET",bindingtype:"DIRECTBINDING",name:"iconClass",attributes:{}}]},{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"_displayTitle",attributes:{escape:"false"}}],classes:["title"]},{type:"ELEMENT",tagname:"div",classes:["arrow"]}],classes:["cw-submenu-item-view",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"_hasIconClass",truevalue:"has-icon-class",attributes:{}}]}},className:"cw-ui-submenu-item-view",__QUALIFIED_CLASS_NAME__:"SubmenuItemView"},_displayTitle:o.b({dependencies:["title","shouldEscape"],readOnly:!0,get:Object.assign(function(){return this.shouldEscape?c.b(this.title):this.title},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[1+n])?c.b(i.internalGet(this,t[0+n])):i.internalGet(this,t[0+n])}})}),_hasIconClass:o.b({dependencies:["iconClass"],readOnly:!0,get:function(){return!!this.icon}}),iconClass:o.b(),title:o.b(),shouldEscape:o.b({type:"boolean",defaultValue:!0})})),b=n(934),y=n(405);n.d(t,"b",function(){return I}),n.d(t,"c",function(){return w}),n.d(t,"a",function(){return S});var I=y.a.extend(b.a,v,{didEnter:function(e){var t=this.item,n=this.itemIsObservable,i=this.view;n?(i.bind("hasCheckmark",t.bindingFor("hasCheckmark")),i.bind("iconClass",t.bindingFor("iconClass")),i.bind("isDisabled",t.bindingFor("isDisabled")),i.bind("keySequence",t.bindingFor("keySequence")),i.bind("title",t.bindingFor("title")),i.bind("titleIsAlwaysLTR",t.bindingFor("titleIsAlwaysLTR")),i.bind("shouldEscape",t.bindingFor("shouldEscape")),this.bind("action",t.bindingFor("action")),this.bind("isDisabled",t.bindingFor("isDisabled"))):(i.hasCheckmark=t.hasCheckmark,i.iconClass=t.iconClass,i.isDisabled=t.isDisabled,i.keySequence=t.keySequence,i.title=t.title,i.titleIsAlwaysLTR=t.titleIsAlwaysLTR,i.shouldEscape=t.shouldEscape,this.action=t.action,this.isDisabled=t.isDisabled)},willExit:function(e){if(this.itemIsObservable){var t=this.view;t.unbind("hasCheckmark"),t.unbind("iconClass"),t.unbind("isDisabled"),t.unbind("keySequence"),t.unbind("title"),t.unbind("titleIsAlwaysLTR"),t.unbind("shouldEscape"),this.unbind("action"),this.unbind("isDisabled")}},viewClass:h,staticMembers:{__QUALIFIED_CLASS_NAME__:"MenuViewItem"}}),w=y.a.extend(b.a,{didEnter:function(e){var t=this.item,n=this.itemIsObservable,i=this.view;n?(i.bind("iconClass",t.bindingFor("iconClass")),i.bind("isDisabled",t.bindingFor("isDisabled")),i.bind("title",t.bindingFor("title")),i.bind("titleIsAlwaysLTR",t.bindingFor("titleIsAlwaysLTR")),i.bind("shouldEscape",t.bindingFor("shouldEscape")),this.bind("isDisabled",t.bindingFor("isDisabled"))):(i.iconClass=t.iconClass,i.isDisabled=t.isDisabled,i.title=t.title,i.titleIsAlwaysLTR=t.titleIsAlwaysLTR,i.shouldEscape=t.shouldEscape,this.isDisabled=t.isDisabled)},willExit:function(e){if(this.itemIsObservable){var t=this.view;t.unbind("iconClass"),t.unbind("isDisabled"),t.unbind("title"),t.unbind("titleIsAlwaysLTR"),t.unbind("shouldEscape"),this.unbind("isDisabled")}},viewClass:_,staticMembers:{__QUALIFIED_CLASS_NAME__:"SubmenuViewItem"}}),S=y.a.extend(b.a,{customHeight:12,shouldHighlight:function(e){return!1},viewClass:s,staticMembers:{__QUALIFIED_CLASS_NAME__:"DividerViewItem"}})},function(e,t,n){"use strict";var i=n(80),r=n(805),a=n(54),s=n(36),o=n(34),c=n(1177),l=n(195),u=n(781),d=n(179),h=n(775),p=n(140),f={mixinDependencies:[n(49).a],jsonRpcVersion:"0",generateCallMessageFor:a.a.define(),generateErrorMessageFor:a.a.define(),generateNotificationMessageFor:a.a.define(),generateResultMessageFor:a.a.define()},g=i.a.extend(u.a,f,{jsonRpcVersion:"2.0",generateCallMessageFor:function(e){for(var t={jsonrpc:this.jsonRpcVersion,id:"CW.JsonRpcMessageFormatterV2:"+ ++m,method:e},n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return i.length>0&&(t.params=i),t},generateNotificationMessageFor:function(e){for(var t={jsonrpc:this.jsonRpcVersion,method:e},n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return i.length>0&&(t.params=i),t},generateErrorMessageFor:function(e,t){var n=t.code;Object(d.a)(n)||(n=p.a.INTERNAL_ERROR);var i=t.message,r=t.data,a={jsonrpc:this.jsonRpcVersion,id:e,error:{code:n,message:i}};return Object(h.a)(r)&&(a.error.data=r),a},generateResultMessageFor:function(e,t){return{jsonrpc:this.jsonRpcVersion,id:e,result:t}},staticMembers:{__QUALIFIED_CLASS_NAME__:"JsonRpcMessageFormatterV2"}}),m=0;n.d(t,"a",function(){return v});var v=i.a.extend(s.a,{channel:Object(o.b)({type:l.a}),messageFormatter:g.sharedInstance,serializer:r.a.sharedInstance,shouldHandleMessage:a.a.define(),handleMessage:a.a.define(),incomingMessageListener:Object(s.f)("channel.incomingMessage",function(e){if(e){var t=this.serializer.decode(e.context);Object(c.a)(t)&&this.shouldHandleMessage(t)&&this.handleMessage(t)}}),staticMembers:{__QUALIFIED_CLASS_NAME__:"JsonRpcBase"}})},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n(80),r=n(41),a=n(98),s=n(804),o=n(196),c=i.a.extend({protocolName:r.c({type:String}),protocolMethodNames:r.c({type:Set}),protocolTarget:r.c({type:Object}),init:function(e,t){if(this.__s._$ai$init.call(this),!e)throw new a.a("ProtocolMetadata: no messagingProtocol specified");if(!t)throw new a.a("ProtocolMetadata: no protocol target specified");if(!Object(o.b)(e,s.a))throw new a.a("ProtocolMetadata: The messagingProtocol class does not implement MessagingProtocol");if(!(this.protocolName=e.name))throw new a.a("ProtocolMetadata: no protocol name");var n=this.protocolMethodNames=Object(o.a)(e);if(!n||0===n.count)throw new a.a("ProtocolMetadata: Invalid list of protocol methods");this.protocolTarget=t},__superMap:{_$ai$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"ProtocolMetadata"}})},function(e,t,n){"use strict";var i=function(e){function t(n,i){!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,"Invalid state transition.  Expected state: "+n+", actual: "+i));return r.name="InvalidStateTransitionError",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(Error),r=n(316),a=n(1173),s=n(178),o=n(177);function c(e,t){var n=!1;return a.a(e,s.a)&&a.a(t,o.a)&&(n=e.group===t),n}function l(e,t){for(var n=arguments.length,i=Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];if(!e||!t||!Array.isArray(i))return!1;for(var a=[t].concat(i),s=0;s<a.length;s++)if(!c(a[s],e))return!1;return!!i.find(function(e){return e===t})}function u(e,t){for(var n=arguments.length,a=Array(n>2?n-2:0),s=2;s<n;s++)a[s-2]=arguments[s];if(!l.apply(void 0,[e,t].concat(a))){var o=new i(a,t),c=Object(r.b)(o,2,7);throw o.message=o.message+" => "+c.join(","),o}}n.d(t,"b",function(){return l}),n.d(t,"a",function(){return u})},,,,function(e,t,n){var i=n(55),r=n(15),a=r["__core-js_shared__"]||(r["__core-js_shared__"]={});(e.exports=function(e,t){return a[e]||(a[e]=void 0!==t?t:{})})("versions",[]).push({version:i.version,mode:n(215)?"pure":"global",copyright:"© 2018 Denis Pushkarev (zloirock.ru)"})},function(e,t,n){var i=n(51),r=n(28),a=n(233);e.exports=function(e){return function(t,n,s){var o,c=i(t),l=r(c.length),u=a(s,l);if(e&&n!=n){for(;l>u;)if((o=c[u++])!=o)return!0}else for(;l>u;u++)if((e||u in c)&&c[u]===n)return e||u||0;return!e&&-1}}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var i=n(57);e.exports=Array.isArray||function(e){return"Array"==i(e)}},function(e,t,n){var i=n(19),r=n(57),a=n(24)("match");e.exports=function(e){var t;return i(e)&&(void 0!==(t=e[a])?!!t:"RegExp"==r(e))}},function(e,t,n){var i=n(24)("iterator"),r=!1;try{var a=[7][i]();a.return=function(){r=!0},Array.from(a,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!r)return!1;var n=!1;try{var a=[7],s=a[i]();s.next=function(){return{done:n=!0}},a[i]=function(){return s},e(a)}catch(e){}return n}},function(e,t,n){"use strict";var i=n(14);e.exports=function(){var e=i(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},function(e,t,n){"use strict";var i=n(43),r=n(44),a=n(18),s=n(61),o=n(24);e.exports=function(e,t,n){var c=o(e),l=n(s,c,""[e]),u=l[0],d=l[1];a(function(){var t={};return t[c]=function(){return 7},7!=""[e](t)})&&(r(String.prototype,e,u),i(RegExp.prototype,c,2==t?function(e,t){return d.call(e,this,t)}:function(e){return d.call(e,this)}))}},function(e,t,n){var i=n(14),r=n(35),a=n(24)("species");e.exports=function(e,t){var n,s=i(e).constructor;return void 0===s||void 0==(n=i(s)[a])?t:r(n)}},function(e,t,n){var i=n(15).navigator;e.exports=i&&i.userAgent||""},function(e,t,n){"use strict";var i=n(15),r=n(3),a=n(44),s=n(239),o=n(214),c=n(238),l=n(237),u=n(19),d=n(18),h=n(298),p=n(254),f=n(375);e.exports=function(e,t,n,g,m,v){var _=i[e],b=_,y=m?"set":"add",I=b&&b.prototype,w={},S=function(e){var t=I[e];a(I,e,"delete"==e?function(e){return!(v&&!u(e))&&t.call(this,0===e?0:e)}:"has"==e?function(e){return!(v&&!u(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return v&&!u(e)?void 0:t.call(this,0===e?0:e)}:"add"==e?function(e){return t.call(this,0===e?0:e),this}:function(e,n){return t.call(this,0===e?0:e,n),this})};if("function"==typeof b&&(v||I.forEach&&!d(function(){(new b).entries().next()}))){var C=new b,O=C[y](v?{}:-0,1)!=C,A=d(function(){C.has(1)}),E=h(function(e){new b(e)}),T=!v&&d(function(){for(var e=new b,t=5;t--;)e[y](t,t);return!e.has(-0)});E||((b=t(function(t,n){l(t,b,e);var i=f(new _,t,b);return void 0!=n&&c(n,m,i[y],i),i})).prototype=I,I.constructor=b),(A||T)&&(S("delete"),S("has"),m&&S("get")),(T||O)&&S(y),v&&I.clear&&delete I.clear}else b=g.getConstructor(t,e,m,y),s(b.prototype,n),o.NEED=!0;return p(b,e),w[e]=b,r(r.G+r.W+r.F*(b!=_),w),v||g.setStrong(b,e,m),b}},function(e,t,n){for(var i,r=n(15),a=n(43),s=n(231),o=s("typed_array"),c=s("view"),l=!(!r.ArrayBuffer||!r.DataView),u=l,d=0,h="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");d<9;)(i=r[h[d++]])?(a(i.prototype,o,!0),a(i.prototype,c,!0)):u=!1;e.exports={ABV:l,CONSTR:u,TYPED:o,VIEW:c}},function(e,t,n){"use strict";e.exports=n(215)||!n(18)(function(){var e=Math.random();__defineSetter__.call(null,e,function(){}),delete n(15)[e]})},function(e,t,n){"use strict";var i=n(3);e.exports=function(e){i(i.S,e,{of:function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},function(e,t,n){"use strict";var i=n(3),r=n(35),a=n(56),s=n(238);e.exports=function(e){i(i.S,e,{from:function(e){var t,n,i,o,c=arguments[1];return r(this),(t=void 0!==c)&&r(c),void 0==e?new this:(n=[],t?(i=0,o=a(c,arguments[2],2),s(e,!1,function(e){n.push(o(e,i++))})):s(e,!1,n.push,n),new this(n))}})}},function(e,t,n){"use strict";var i=n(172);i.b(i.c(),{"Date.Range.No.Similarities":"%{date1:MMMM} %{date1:d}, %{date1:yyyy} – %{date2:MMMM} %{date2:d}, %{date2:yyyy}","Date.Range.Same.Year":"%{date1:MMMM} %{date1:d} – %{date2:MMMM} %{date2:d}, %{date1:yyyy}","Date.Range.Same.Month":"%{date1:MMMM} %{date1:d} – %{date2:d}, %{date1:yyyy}","Date.Range.Same.Day":"%{date1:MMM} %{date1:d}, %{date1:yyyy}","Date.Range.Same.Day.No.Year":"%{date1:MMM} %{date1:d}","Date.Range.Days.Prior.For.Days.Of.The.Week":6,"Date.Range.Same.Day.Day.Of.Week":"%{date1:EEEE}","Date.Range.Same.Day.Today":"Today","Date.Range.Same.Day.Tomorrow":"Tomorrow","Date.Range.Same.Day.Yesterday":"Yesterday","Date.Range.Same.Day.Today.Same.Time":"%{date1:h}:%{date1:mm} %{date1:a}","Date.Range.Same.Day.Today.Time.Range":"%{date1:h}:%{date1:mm} %{date1:a} – %{date2:h}:%{date2:mm} %{date2:a}","Date.Range.Same.Day.Today.Time.Range.Same.Period":"%{date1:h}:%{date1:mm} – %{date2:h}:%{date2:mm} %{date2:a}","Date.Range.Today.To.Tomorrow":"Today – Tomorrow","Date.Range.Yesterday.To.Tomorrow":"Yesterday – Tomorrow","Date.Range.Yesterday.To.Today":"Yesterday – Today","Date.Range.Days.Of.Week":"%{date1:EEEE} – %{date2:EEEE}","Date.Range.Day.Of.Week.To.Tomorrow":"%{date1:EEEE} – Tomorrow","Date.Range.Day.Of.Week.To.Today":"%{date1:EEEE} – Today","Date.Range.Day.Of.Week.To.Yesterday":"%{date1:EEEE} – Yesterday","Date.Range.No.Similarities.Medium":"%{date1:MMM} %{date1:d}, %{date1:yyyy} – %{date2:MMM} %{date2:d}, %{date2:yyyy}","Date.Range.Same.Year.Medium":"%{date1:MMM} %{date1:d} – %{date2:MMM} %{date2:d}, %{date1:yyyy}","Date.Range.Same.Month.Medium":"%{date1:MMM} %{date1:d} – %{date2:d}, %{date1:yyyy}","Date.Range.Same.Day.Medium":"%{date1:MMM} %{date1:d}, %{date1:yyyy}","Date.Range.Same.Day.No.Year.Medium":"%{date1:MMM} %{date1:d}","Time.Remaining.Expires.Expired":"Expired","Time.Remaining.Expires.ShowHour":"Expires %{date:h}%{date:a}","Time.Remaining.Expires.Tomorrow":"Expires Tomorrow","Time.Remaining.Expires.WithinYear":"Expires %{date:MMMM} %{date:d}","Time.Remaining.Expires.Others":"Expires %{date:MMMM} %{date:d}, %{date:yyyy}","Time.Remaining.AvailableUntil.Expired":"Expired","Time.Remaining.AvailableUntil.ShowHour":"Available until %{date:h}%{date:a}","Time.Remaining.AvailableUntil.Tomorrow":"Available until Tomorrow","Time.Remaining.AvailableUntil.WithinYear":"Available until %{date:MMMM} %{date:d}","Time.Remaining.AvailableUntil.Others":"Available until %{date:MMMM} %{date:d}, %{date:yyyy}","NavigationBar.BackButton.Title":"Back","NavigationBar.BackButton.Tooltip":"Back"})},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n(41),r=n(86),a=n(25),s={shouldReportSuccess:i.c(!1),shouldReportFailure:i.c(!0),reportingPathname:i.c({defaultValue:"REDACTED"}),reportingMethod:null,_timeSent:null,send:function(){var e=arguments;this._timeSent=window.performance.now();var t=this.__s._$P7$send.apply(this,e);return a.a.get("cloudOSService").requestSent(),t},didComplete:function(){this.sendReport()},sendReport:function(e){var t=this.get("response");if(t){var n=this.get("url"),i=t.get("encodedBody"),s=this.get("method"),o=this.get("reportingMethod"),c=null,l=t.get("status").toString()[0],u=this.get("shouldReportSuccess"),d=this.get("shouldReportFailure"),h="5"===l||"0"===l;(d&&("4"===l||h)||u&&"2"===l)&&(c={httpMethod:o?o+" VIA "+s:s,statusCode:t.get("status"),hostname:n.get("hostname"),clientTiming:window.performance.now()-this._timeSent,uncompressedResponseSize:i?i.length:null,timedOut:this.get("state")===r.b.TIMEDOUT,urlPath:this.get("reportingPathname")||n.get("pathname")},Object.assign(c,e)),a.a.get("cloudOSService").requestReceived(c,t.get("status"),n.get("href"),h?i:void 0)}},__superMap:{_$P7$send:"send"}}},function(e,t,n){"use strict";function i(e,t){if(e)return e[t]}n.d(t,"a",function(){return i})},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n(49),r=n(54),a={mixinDependencies:[i.a],message:"",validate:r.a.define()}},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n(49),r=n(41),a=n(54),s=n(65),o=n(185),c={mixinDependencies:[i.a],nextResponder:Object(r.c)(),sendEvent:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return o.a.apply(void 0,[this,e].concat(n))},handleEvent:a.a.define(),canPerformAction:function(e,t){var n=this[e];return Boolean(n)},getPointerCapture:function(e){return"number"!=typeof e&&Object(s.b)("Pointer capture only possible on pointerIds which are numbers",{pointerId:e,responder:this}),l[e]},setPointerCapture:function(e){"number"!=typeof e&&Object(s.b)("Pointer capture only possible on pointerIds which are numbers",{pointerId:e,responder:this}),l[e]=this},releasePointerCapture:function(e){"number"!=typeof e&&Object(s.b)("Pointer capture only possible on pointerIds which are numbers",{pointerId:e,responder:this}),l[e]===this&&delete l[e]}},l={}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n(1182),r=n(187).a.extend({staticMembers:{nativePropertiesToCopy:Object(i.a)(["screenX","screenY","clientX","clientY","offsetY","offsetX","button","buttons","detail","target"]),eventPropertiesToCopy:Object(i.a)(["screenX","screenY","clientX","clientY","offsetY","offsetX","button","buttons","detail","target"]),__QUALIFIED_CLASS_NAME__:"CoreMouseEvent"},init:function(e){if(this.__s._$E2$init.call(this,e),e){var t=e.nativeEvent;if(t&&!this.target){var n=t.srcElement;n&&(this.target=n)}}},screenX:0,screenY:0,clientX:0,clientY:0,offsetX:0,offsetY:0,button:0,buttons:0,detail:0,target:null,targetView:null,__superMap:{_$E2$init:"init"}})},function(e,t,n){"use strict";function i(e){var t=e._exceptionHandling_wrappedFunction;return t?!0===t?e:t:null}n.d(t,"a",function(){return i})},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n(49),r=n(82),a=n(32),s={mixinDependencies:[i.a],createIterator:function(){return this.iteratorClass.create(this)},iteratorClass:Object(a.c)(r.a),serializer:null,encode:function(e,t){var n=this.serializer;return n&&n.encode&&(e=n.encode(e,t)),e},decode:function(e,t){var n=this.serializer;return n&&n.decode&&(e=n.decode(e,t)),e}};s[Symbol.iterator]=function(){return this.createIterator()}},function(e,t,n){"use strict";n.d(t,"a",function(){return l}),n.d(t,"b",function(){return d});var i=n(120),r=n(775),a=n(1192),s="(unknown function)",o="(anonymous function)",c=i.a.sharedInstance;function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=r.a(e)?a.a(e):{},i=new Error;return n.calleeStack=u(i.stack,t),n}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=void 0;if(e){var i=t;(c.isChrome||c.isEdge||c.isIE)&&i++;var r=e.split("\n");i<r.length&&(n=r.splice(i).join("\n"))}return n}function d(e,t,n){for(var i=new Array,r=t;r<n;r++)i.push(h(e.stack,r));return i}function h(e){var t,n=u(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1);if(n){var i=n.split("\n")[0].trim();if(c.isChrome)return t=i.match(/^at\s+(.+)\s+\(/),Array.isArray(t)&&t[1]||o;if(c.isEdge||c.isIE)return function(e){var t=i.match(/^at\s+(.+)\s+\(/);return Array.isArray(t)&&t[1]||s}();if(c.isSafari)return function(e){var t=i.match(/^(.+)@/);return Array.isArray(t)&&t[1]||o}();if(c.isFirefox)return function(e){var t=i.match(/^(.+)@/);return Array.isArray(t)&&t[1]||o}()}return s}},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return c});var i=n(1174),r=n(65),a=n(179),s=n(1197),o=n(1184),c={invokeLater:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;i.a(e)||r.b("A method to invoke Function must be specified"),(!a.a(t)||t<0)&&r.b("millisToWaitToInvoke must be a number >= 0"),n&&s.a(n)&&r.b("When provided, optional methodToInvokeIdentifier must be a String with a length > 0");var c=this._scheduledInvokeLaterMethods;c||(c=this._scheduledInvokeLaterMethods=new Map);var l=n||e.toString();c.has(l)&&r.b("An invokeLater has already been scheduled for "+l);var u=o.a(function(){c.delete(l),n?e(n):e()},t);c.set(l,u)},isInvokeLaterScheduled:function(e){var t=this._getScheduledInvokeLaterMethodKeyWithValidation(e);return this._scheduledInvokeLaterMethods.has(t)},cancelInvokeLater:function(t){var n=this._getScheduledInvokeLaterMethodKeyWithValidation(t),i=this._scheduledInvokeLaterMethods,s=i.get(n);a.a(s)||r.b("No invokeLater scheduled matching the methodToInvokeOrMethodToInvokeIdentifier"),e.clearTimeout(s),i.delete(n)},cancelInvokeLaterMethods:function(){var t=this._scheduledInvokeLaterMethods;t&&(t.forEach(function(t){return e.clearTimeout(t)}),t.clear(),this._scheduledInvokeLaterMethods=void 0)},_getScheduledInvokeLaterMethodKeyWithValidation:function(e){var t=void 0;return this._scheduledInvokeLaterMethods||r.b("Invalid state scheduledInvokeLaterMethods is undefined"),i.a(e)?t=e.toString():s.a(e)?r.b("methodToInvokeOrMethodToInvokeIdentifier must be a non-empty String or a Function"):t=e,t},_scheduledInvokeLaterMethods:void 0}}).call(this,n(6))},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n(80),r=n(242),a=i.a.extend({mixinDependencies:[r.a],applicationWillFinishLaunching:function(e,t){},applicationDidFinishLaunching:function(e,t){},staticMembers:{__QUALIFIED_CLASS_NAME__:"ApplicationDelegate"}})},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return h});var i=n(96),r=n(775),a=n(65),s=n(1143),o=n(788),c=n(1170),l=n(196),u=n(1198),d=n(491),h=i.a(function(t,n){if(t&&!r.a(t)&&a.b("Application options specified is not a hash."),r.a(n)||a.b("initializationOptions specified is not a hash."),Object(u.b)()){var i=e.parent,h=Object(u.a)(),p=e.__CW_BUILD_INFO,f=new d.a(i,h,p);s.c(f)}var g=n.defaultApplicationClass,m=n.defaultDelegateClass,v=n.defaultDelegateClassProtocol;g&&m&&v||a.b("initializationOptions must define defaultApplicationClass, defaultDelegateClass, and defaultDelegateClassProtocol");var _,b,y=(b={},(_=t)&&Object.keys(_).forEach(function(e){b[e]=_[e]||void 0}),b),I=y.applicationClass,w=void 0===I?g:I,S=y.delegateClass,C=void 0===S?m:S,O=y.rootViewControllerClass,A=void 0===O?o.a:O;w===g||w.subclassOf(g)||a.b("Specifed application class is not a subclass of "+c.a(g)),C===m||C.subclassOf(m)||Object(l.b)(C,v)||a.b("Specified application delegate class is neither a subclass of "+c.a(m)+" nor implements "+v),A===o.a||A.subclassOf(o.a)||a.b("Specifed root view controller class is not a subclass of CW.ViewController");var E=w.create({rootViewController:A}),T=C!==w?C.create():E;E.delegate=T,E.setup()})}).call(this,n(6))},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n(34),r=n(1125),a=n(36),s=n(280),o=n(54),c={_sessionSupportSessionInfo:i.b({readOnly:!0,binding:r.a.bindingFor("application.sessionInfo")}),_sessionSupportSessionInfoDidChange:a.e("_sessionSupportSessionInfo",function(e){var t=s.a.deserialize(e);this.sessionDidChange(t)}),sessionDidChange:o.a.define()}},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n(49),r=n(82),a={mixinDependencies:[i.a],webServices:r.a.define()}},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n(80),r=n(36),a=i.a.extend(r.a,{staticMembers:{__QUALIFIED_CLASS_NAME__:"CollectionLayoutMetrics"}})},function(e,t,n){"use strict";n.d(t,"a",function(){return h});var i=n(36),r=n(34),a=n(49),s=n(32),o=n(54),c=n(180),l=n(1272),u=n(322),d=n(221),h={staticMembers:{LayoutMetricsClass:u.a},mixinDependencies:[a.a,i.a],setUpInitialCell:Object(s.c)(o.a),setUpFirstCell:Object(s.c)(o.a),setUpLastCell:Object(s.c)(o.a),getCellForItem:Object(s.c)(o.a),getHandleForItem:function(e,t,n){return t&&t.handleFor(n)},initializeVisibleCells:Object(s.c)(o.a),completeVisibleCells:Object(s.c)(o.a),finalizeVisibleCells:function(e,t,n,i){},setUpCellAtDistance:Object(s.c)(o.a),computeSpaceAroundViewport:Object(s.c)(o.a),reusePreviousVisibleCells:o.a.define(),cellClass:Object(r.b)(d.a),_cellTypesMap:Object(c.b)(Map),_cellMapForCellType:function(e){var t=this._cellTypesMap,n=t.get(e);return n||(n=l.a.create(),t.set(e,n)),n},cellForHandleIfPresent:function(e,t){return void 0===t&&(t="item"),this._cellMapForCellType(t).get(e)},cellForHandle:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"item",n=this._cellMapForCellType(t),i=n.get(e);return i||((i=this.createCellFor(e,t)).key=e,i.cellType=t,n.set(e,i)),i.registerWeakReference(this,this._cellWasDisposed,i),i.retain(this,"cellForHandle: initial retain + autorelease").autorelease(this,"cellForHandle: initial retain + autorelease")},cellClassKeysByCellType:{item:"cellClass"},createCellFor:function(e,t){return this[this.cellClassKeysByCellType[t]].create(this)},_cellWasDisposed:function(e){this._cellMapForCellType(e.cellType).removeKey(e.key)}}},function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"a",function(){return r});var i=2,r=12},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n(121),r=n(1184),a=n(155),s=n(46),o=500;function c(e,t,n){var c="canvas_"+e+"x"+t+(arguments.length>2?"_"+i.a(n):""),f=u[c];f||((f=s.d.getInstance()).width=e,f.height=t),function(e,t,n,i){if(u[t]||(u[t]=e),!p[n]||!p[i]){var s=h[t];s?clearTimeout(d[t]):s=h[t]=Object(a.a)(l,void 0,t),d[t]=r.a(s,o)}}(f,c,e,t);var g=f._context||(f._context=f.getContext("2d"));return g.setTransform(1,0,0,1,0,0),g.clearRect(0,0,e,t),f}function l(e){s.d.disposeInstance(u[e]),delete u[e],delete h[e],delete d[e]}var u=Object.create(null),d=Object.create(null),h=Object.create(null),p=function(){for(var e=Object.create(null),t=0;t<=Math.log(512)/Math.log(2);t++)e[Math.pow(2,t)]=!0;return e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var i=n(410),r=n(1173),a=n(1192),s=n(65),o=n(41),c=n(87),l=n(92).a.extend({relatedObject:Object(o.c)(),relationshipKey:Object(o.c)(),_embeddedCache:Object(o.c)(),shouldDoPostInitProcessing:!1,hasBackingData:Object(o.c)({readOnly:!0,get:function(){var e=this.relatedObject;return!(!e||!e.getDataHash())}}),_array:Object(o.c)({get:function(){if(this.hasBackingData){var e=this.relatedObject,t=this.relationshipKey;return e.getDataHash()[t]}},set:function(e){if(this.hasBackingData)return this.relatedObject.getDataHash()[this.relationshipKey]=e,e}}),init:function(e,t,n){var i=t.relatedObject,a=t.relationshipKey,s=t.type,o=e&&e.length||0,l=this._embeddedCache=new Array(o),u=this;this.serializer={encode:function(e,t){return Object(r.a)(e,c.a)&&(e=e.getDataHash()),e},decode:function(e,t){if(!e)return e;if(void 0===t)return s.create(e);var n=l[t];if(void 0!==n)return n;var i=s.createEmbedded(u.relatedObject,u.relationshipKey,t);return l[t]=i,i}},this.__s._$1Ee$init.call(this,e,s,n),this.relatedObject=i,this.relationshipKey=a,this.listen("contentsDidChange",function(e){0!==e.context.length&&i.notifyOfDataChange()}),this.retain("Model#__cwMaterializedValues cache"),this.postInitProcessing()},postInitProcessing:function(){var e=this._array;if(e)for(var t,n,i=this._embeddedCache||(this._embeddedCache=[]),a=0,s=e.length;a<s;a++)t=e[a],Object(r.a)(t,c.a)&&(n=t.getDataHash(),t.isEmbeddedModel||this._embedModel(t,a),i[a]=t,e[a]=n)},constructNewInstance:function(){return i.b.create({serializer:this.serializer})},itemsWillChange:function(){var e=arguments;this._array||(this._array=[]),this.__s._$1qG$itemsWillChange.apply(this,e);var t=this.relatedObject.embeddedRoot;t.isStoreModel&&t._cwStore._forkIfNeeded(t._cwStoreId)},itemsDidChange:function(){var e=arguments;this.__s._$1vg$itemsDidChange.apply(this,e);var t=this.relatedObject.embeddedRoot;t.isStoreModel&&t._cwStore.recordChangeToData(t._cwStoreId)},itemsWillBeRemoved:function(e,t){var n=arguments;if(this.__s._$20R$itemsWillBeRemoved.apply(this,n),0!==t){for(var i=this._embeddedCache,r=e+t,s=e;s<r;s++){var o=i[s];o&&(o.__cwDataHash=Object(a.a)(o.getDataHash()),o._cwParent=o._cwParentKey=o._cwParentIndex=void 0)}i.splice(e,t)}},itemsWillBeInserted:function(e,t){var n=arguments;if(this.__s._$2CV$itemsWillBeInserted.apply(this,n),0!==t){var i=this._embeddedCache;u[0]=e,u[1]=0,i.splice.apply(i,u),u.length=2}},itemsWereRemoved:function(e,t){var n=arguments;if(this.__s._$2M0$itemsWereRemoved.apply(this,n),0!==t){var i=this._embeddedCache,r=this.relatedObject&&this.relatedObject.getDataHash(),a=r&&r[this.relationshipKey];if(a){var s,o,c,l=t;for(s=e,o=a.length;s<o;s++)(c=i[s])&&(c._cwParentIndex-=l)}}},itemsWereInserted:function(e,t){var n=arguments;if(this.__s._$2a1$itemsWereInserted.apply(this,n),0!==t){var i=this._embeddedCache,r=this.relatedObject,a=this.relationshipKey,s=r&&r.getDataHash(),o=s&&s[a];if(o)for(var c=o.length,l=e+t,u=void 0,d=e;d<c;d++)(u=i[d])&&(d<l?this._embedModel(u,d):u._cwParentIndex+=t)}},_embedModel:function(e,t){var n=e.parentModel;if(n&&n!==this.relatedObject&&Object(s.b)("Trying to embed a model that already has a different parent",{model:e,parent:n}),!n){n=this.relatedObject;var i=this.relationshipKey;e._cwParent=n,e._cwParentKey=i,e._cwParentIndex=t,e.__cwDataHash=void 0}return e},rawSplice:function(e,t){for(var n=arguments.length,i=Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];var a=arguments;return this._cacheValues.apply(this,i),this.__s._$3Cp$rawSplice.apply(this,a)},push:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=arguments;return this._cacheValues.apply(this,t),this.__s._$3EF$push.apply(this,i)},unshift:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=arguments;return this._cacheValues.apply(this,t),this.__s._$3Fj$unshift.apply(this,i)},insertAt:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var r=arguments;return this._cacheValues.apply(this,n),this.__s._$3HK$insertAt.apply(this,r)},setIndex:function(e,t){var n=arguments;return this._cacheValues(t),this.__s._$3Io$setIndex.apply(this,n)},_cacheValues:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=t.length;u.length=i+2;for(var a=0;a<i;a++){var s=t[a];Object(r.a)(s,c.a)&&(u[a+2]=s)}},filter:function(){Object(s.b)("Filter cannot be used safely on an embedded relationship array, use filterCloned instead.",{source:this})},filterCloned:function(e,t){var n=[],r=this.relatedObject,a=this.relationshipKey,s=r&&r.getDataHash(),o=s&&s[a];if(o)for(var c=this.modelClass,l=c.create(),u=0,d=o.length;u<d;u++){var h=o[u];l.replaceData(h),e.call(t,l,u,o)&&n.push(c.createFromDataHash(h))}return i.b.create(n)},indexOf:function(e){var t=this._array;return t&&Object(r.a)(e,this.modelClass)?t.indexOf(e.getDataHash()):-1},isObjectAtIndexMaterialized:function(e){var t=this._embeddedCache;return t&&!!t[e]},__superMap:{_$1Ee$init:"init",_$1qG$itemsWillChange:"itemsWillChange",_$1vg$itemsDidChange:"itemsDidChange",_$20R$itemsWillBeRemoved:"itemsWillBeRemoved",_$2CV$itemsWillBeInserted:"itemsWillBeInserted",_$2M0$itemsWereRemoved:"itemsWereRemoved",_$2a1$itemsWereInserted:"itemsWereInserted",_$3Cp$rawSplice:"rawSplice",_$3EF$push:"push",_$3Fj$unshift:"unshift",_$3HK$insertAt:"insertAt",_$3Io$setIndex:"setIndex"},staticMembers:{__QUALIFIED_CLASS_NAME__:"EmbeddedRelationshipArray"}}),u=[0,0]},function(e,t,n){"use strict";n.d(t,"a",function(){return p});var i=n(1177),r=n(1173),a=n(65),s=n(775),o=n(41),c=n(180),l=n(34),u=n(87),d=n(92),h=n(78),p=d.a.extend({relatedObject:Object(o.c)({weak:!0}),relationshipKey:Object(o.c)(),hasBackingData:Object(o.c)({readOnly:!0,get:function(){var e=this.relatedObject;return!(!e||!e.getDataHash())}}),_array:Object(o.c)({get:function(){if(this.hasBackingData){var e=this.relatedObject,t=this.relationshipKey;return e.getDataHash()[t]}},set:function(e){if(this.hasBackingData)return this.relatedObject.getDataHash()[this.relationshipKey]=e,e}}),_storeIdCache:Object(c.b)(Map),serializer:function(){var e=this;return{encode:function(t){return Object(i.a)(t)?(Object(r.a)(t,u.a)?(t.constructor!==e.modelClass&&Object(a.b)("Invalid Model type %{type}, expected %{configured}",{type:t.constructor,configured:e.modelClass}),t=t.getPrimaryKey()):Object(s.a)(t)&&(t.hasOwnProperty("id")&&t.hasOwnProperty("type")||Object(a.b)("Foreign object tuple must contain keys 'id' and 'type'",{value:t})),t):t},decode:function(t){if(!Object(i.a)(t))return t;var n=e.storeIdForForeignObjectReference(t);return e.store.materializeModel(n)}}},shouldDoPostInitProcessing:!1,init:function(e,t,n){t&&t.type?t&&t.relationshipKey?t&&t.relatedObject||Object(a.b)("No relationship object provided in options",{options:t}):Object(a.b)("No relationship key provided in options",{options:t}):Object(a.b)("No model type provided in options",{options:t});var i=t.relationshipKey,r=t.relatedObject;this.__s._$1Y2$init.call(this,e,t.type,n),this.relationshipKey=i,this.relatedObject=r;var s=r.__cwMaterializedValues;s||(s=r.__cwMaterializedValues={}),s[i]&&Object(a.b)("A CW.Data.RelationshipArray instance already exists for this relationship",{relatedObject:r,relationshipKey:i,cache:s}),s[i]=this,this.retain("Model#__cwMaterializedValues cache"),this.shouldDoPostInitProcessing=!0,this.postInitProcessing()},itemsWillChange:function(){var e=arguments;this._array||(this._array=[]),this.__s._$1t_$itemsWillChange.apply(this,e),this.store&&this.store._forkIfNeeded(this.relatedObject._cwStoreId)},itemsDidChange:function(){var e=arguments;if(this.store){var t=this.relatedObject._cwStoreId;t&&this.store.recordChangeToData(t)}this.__s._$21o$itemsDidChange.apply(this,e),this.relatedObject.notifyOfDataChange()},storeIdForForeignObjectReference:function(e){if(!Object(i.a)(e))return e;var t=this._storeIdCache.get(e);if(void 0===t){var n=e,r=this.modelClass;Object(s.a)(e)&&(n=e.id,r=e.type),t=h.a.getStoreIdForPrimaryKey(r,n),this._storeIdCache.set(e,t)}return t},storeIdForObjectAt:function(e){if(this._array){var t=this._array[e];return t&&this.storeIdForForeignObjectReference(t)}},storeIds:Object(l.b)({dependencies:["length"],readOnly:!0,get:function(){if(!this._array)return[];var e=this.storeIdForForeignObjectReference.bind(this);return this._array.map(e)}}),spliceStoreIds:function(e,t){for(var n=arguments.length,i=Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];for(var a=2,s=arguments.length;a<s;a++){var o=this.store.constructor.getPrimaryKeyForStoreId(arguments[a]),c=this.store.constructor.getModelClassForStoreId(o);c!==this.modelClass&&(o={id:o,type:c}),arguments[a]=o}return this._array||(this._array=[]),this._array.splice.apply(this._array,arguments)},objectAt:function(){var e=arguments;return this._array&&this.__s._$2iR$objectAt.apply(this,e)},encodedObjectAt:function(){var e=arguments;return this._array&&this.__s._$2kF$encodedObjectAt.apply(this,e)},constructNewInstance:function(){var e={relatedObject:this.relatedObject,relationshipKey:this.relationshipKey,type:this.modelClass};return this.constructor.create([],e,this.store)},filter:function(e,t){e||Object(a.b)("CW.Data.RelationshipArray#filter: No filter function provided: %{relationshipArray}",{relationshipArray:this});var n=this.store;n||Object(a.b)("CW.Data.RelationshipArray#filter: Model arrays must be store backed to be filtered: %{relationshipArray}",{filterFunction:e,relationshipArray:this});var i,r=this.modelClass;r||Object(a.b)("CW.Data.RelationshipArray#filter: No model class defined on model array: %{relationshipArray}",{filterFunction:e,relationshipArray:this,store:n});for(var s=[],o=0,c=this.length;o<c;o++){var l=this.storeIdForObjectAt(o),u=this.store.getExistingModel(l);if(!u){var h=this.storeDataForObjectAt(o);i||(i=r.create().retain(this,"filter: tempModel")),i.replaceData(h)}e.call(t,u||i,o,this)&&s.push(l)}return i&&i.release(this,"filter: tempModel"),d.a.createFromStoreIds(s,r,n)},indexOf:function(e){var t=this._array;return t&&Object(r.a)(e,this.modelClass)?t.indexOf(e.getPrimaryKey()):-1},__superMap:{_$1Y2$init:"init",_$1t_$itemsWillChange:"itemsWillChange",_$21o$itemsDidChange:"itemsDidChange",_$2iR$objectAt:"objectAt",_$2kF$encodedObjectAt:"encodedObjectAt"},staticMembers:{__QUALIFIED_CLASS_NAME__:"RelationshipArray"}})},function(e,t,n){"use strict";n.d(t,"b",function(){return d}),n.d(t,"a",function(){return h});var i,r,a=n(1185),s=n(69),o=n(1219),c=n(66),l=n(74),u=(i=a.a,(r=function(e){var t=i.create();try{e(t.resolve.bind(t),t.reject.bind(t))}catch(e){t.reject(e)}return t}).all=i.all.bind(i),r.race=i.race.bind(i),r.resolve=i.resolve.bind(i),r.reject=i.reject.bind(i),r),d="ZipPrepareOperationType",h=o.a.extend({mixinDependencies:[l.a],handlesType:d,action:function(e,t){var n,i=this;return(n=regeneratorRuntime.mark(function n(){var r,a,o,l,u,d,h,p,f,g,m,v,_,b,y,I,w,S;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:r=e.context,a=r.zonePK,o=r.scope,l=r.desiredKeys,u=r.includeRecords,d=r.excludeRecords,h=r.pluginFields,p=r.shareName,f=r.archiveName,n.next=11;break;case 5:if("string"==typeof a){n.next=7;break}throw new TypeError("Expected zonePK to be a string");case 7:if(g=Array.isArray(u),m=Array.isArray(d),(g||m)&&(!g||!m)){n.next=11;break}throw new TypeError("Only one of includeRecords or excludeRecords can be specified");case 11:return v={ownerRecordName:c.a.getOwnerRecordNameFromPrimaryKey(a),zoneName:c.a.getZoneNameFromPrimaryKey(a)},_={zoneID:v,desiredKeys:l,pluginFields:h,includeRecords:u,excludeRecords:d,shareName:p,archiveName:f},b=s.b(),y=b.getDatabaseForScope(o).databaseInstance,n.prev=15,n.next=18,y.prepareZipDownload(_);case 18:if((I=n.sent).hasErrors)for(w=I.errors,S=0;S<w.length;S++)i.handleError(w[S],e,t);return n.abrupt("return",I.downloadURL);case 23:return n.prev=23,n.t0=n.catch(15),n.abrupt("return",i.handleError(n.t0,e,t));case 26:case"end":return n.stop()}},n,i,[[15,23]])}),function(){var e=n.apply(this,arguments);return new u(function(t,n){return function i(r,a){try{var s=e[r](a),o=s.value}catch(e){return void n(e)}if(!s.done)return u.resolve(o).then(function(e){i("next",e)},function(e){i("throw",e)});t(o)}("next")})})()},staticMembers:{__QUALIFIED_CLASS_NAME__:"ZipPrepareOperation"}})},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(e){function t(){!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this));return Object.setPrototypeOf(n,t.prototype),n.type="RetryableError",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(Error)},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n(89),r=(Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e})({},Object(i.b)("resJPEG",["Full","Large","Med","Thumb"]),Object(i.b)("resVid",["Full","Med","Small"]),Object(i.a)("resSidecar"))},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var i=n(142),r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=i.Reader,s=i.Writer,o=i.util,c=i.roots.default||(i.roots.default={}),l=c.CPLAssetDistribution=function(){function e(e){if(this.oldBuckets=[],this.buckets=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.oldBuckets=o.emptyArray,e.prototype.bucketWidth=o.Long?o.Long.fromBits(0,0,!1):0,e.prototype.buckets=o.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=s.create()),null!=e.oldBuckets&&e.oldBuckets.length)for(var n=0;n<e.oldBuckets.length;++n)c.CPLAssetDistribution.TimeBucket.encode(e.oldBuckets[n],t.uint32(10).fork()).ldelim();if(null!=e.bucketWidth&&e.hasOwnProperty("bucketWidth")&&t.uint32(16).int64(e.bucketWidth),null!=e.buckets&&e.buckets.length)for(var i=0;i<e.buckets.length;++i)c.CPLAssetDistribution.TimeBucket.encode(e.buckets[i],t.uint32(26).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n=void 0===t?e.len:e.pos+t,i=new c.CPLAssetDistribution;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:i.oldBuckets&&i.oldBuckets.length||(i.oldBuckets=[]),i.oldBuckets.push(c.CPLAssetDistribution.TimeBucket.decode(e,e.uint32()));break;case 2:i.bucketWidth=e.int64();break;case 3:i.buckets&&i.buckets.length||(i.buckets=[]),i.buckets.push(c.CPLAssetDistribution.TimeBucket.decode(e,e.uint32()));break;default:e.skipType(7&r)}}return i},e.decodeDelimited=function(e){return e instanceof a||(e=new a(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!==(void 0===e?"undefined":r(e))||null===e)return"object expected";if(null!=e.oldBuckets&&e.hasOwnProperty("oldBuckets")){if(!Array.isArray(e.oldBuckets))return"oldBuckets: array expected";for(var t=0;t<e.oldBuckets.length;++t){var n=c.CPLAssetDistribution.TimeBucket.verify(e.oldBuckets[t]);if(n)return"oldBuckets."+n}}if(null!=e.bucketWidth&&e.hasOwnProperty("bucketWidth")&&!(o.isInteger(e.bucketWidth)||e.bucketWidth&&o.isInteger(e.bucketWidth.low)&&o.isInteger(e.bucketWidth.high)))return"bucketWidth: integer|Long expected";if(null!=e.buckets&&e.hasOwnProperty("buckets")){if(!Array.isArray(e.buckets))return"buckets: array expected";for(var i=0;i<e.buckets.length;++i){var a=c.CPLAssetDistribution.TimeBucket.verify(e.buckets[i]);if(a)return"buckets."+a}}return null},e.fromObject=function(e){if(e instanceof c.CPLAssetDistribution)return e;var t=new c.CPLAssetDistribution;if(e.oldBuckets){if(!Array.isArray(e.oldBuckets))throw TypeError(".CPLAssetDistribution.oldBuckets: array expected");t.oldBuckets=[];for(var n=0;n<e.oldBuckets.length;++n){if("object"!==r(e.oldBuckets[n]))throw TypeError(".CPLAssetDistribution.oldBuckets: object expected");t.oldBuckets[n]=c.CPLAssetDistribution.TimeBucket.fromObject(e.oldBuckets[n])}}if(null!=e.bucketWidth&&(o.Long?(t.bucketWidth=o.Long.fromValue(e.bucketWidth)).unsigned=!1:"string"==typeof e.bucketWidth?t.bucketWidth=parseInt(e.bucketWidth,10):"number"==typeof e.bucketWidth?t.bucketWidth=e.bucketWidth:"object"===r(e.bucketWidth)&&(t.bucketWidth=new o.LongBits(e.bucketWidth.low>>>0,e.bucketWidth.high>>>0).toNumber())),e.buckets){if(!Array.isArray(e.buckets))throw TypeError(".CPLAssetDistribution.buckets: array expected");t.buckets=[];for(var i=0;i<e.buckets.length;++i){if("object"!==r(e.buckets[i]))throw TypeError(".CPLAssetDistribution.buckets: object expected");t.buckets[i]=c.CPLAssetDistribution.TimeBucket.fromObject(e.buckets[i])}}return t},e.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.oldBuckets=[],n.buckets=[]),t.defaults)if(o.Long){var i=new o.Long(0,0,!1);n.bucketWidth=t.longs===String?i.toString():t.longs===Number?i.toNumber():i}else n.bucketWidth=t.longs===String?"0":0;if(e.oldBuckets&&e.oldBuckets.length){n.oldBuckets=[];for(var r=0;r<e.oldBuckets.length;++r)n.oldBuckets[r]=c.CPLAssetDistribution.TimeBucket.toObject(e.oldBuckets[r],t)}if(null!=e.bucketWidth&&e.hasOwnProperty("bucketWidth")&&("number"==typeof e.bucketWidth?n.bucketWidth=t.longs===String?String(e.bucketWidth):e.bucketWidth:n.bucketWidth=t.longs===String?o.Long.prototype.toString.call(e.bucketWidth):t.longs===Number?new o.LongBits(e.bucketWidth.low>>>0,e.bucketWidth.high>>>0).toNumber():e.bucketWidth),e.buckets&&e.buckets.length){n.buckets=[];for(var a=0;a<e.buckets.length;++a)n.buckets[a]=c.CPLAssetDistribution.TimeBucket.toObject(e.buckets[a],t)}return n},e.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},e.TimeBucket=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.oldStartTime=0,e.prototype.oldEndTime=0,e.prototype.oldCount=0,e.prototype.bucketStart=o.Long?o.Long.fromBits(0,0,!1):0,e.prototype.count=o.Long?o.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=s.create()),null!=e.oldStartTime&&e.hasOwnProperty("oldStartTime")&&t.uint32(8).int32(e.oldStartTime),null!=e.oldEndTime&&e.hasOwnProperty("oldEndTime")&&t.uint32(16).int32(e.oldEndTime),null!=e.oldCount&&e.hasOwnProperty("oldCount")&&t.uint32(24).int32(e.oldCount),null!=e.bucketStart&&e.hasOwnProperty("bucketStart")&&t.uint32(32).int64(e.bucketStart),null!=e.count&&e.hasOwnProperty("count")&&t.uint32(40).int64(e.count),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n=void 0===t?e.len:e.pos+t,i=new c.CPLAssetDistribution.TimeBucket;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:i.oldStartTime=e.int32();break;case 2:i.oldEndTime=e.int32();break;case 3:i.oldCount=e.int32();break;case 4:i.bucketStart=e.int64();break;case 5:i.count=e.int64();break;default:e.skipType(7&r)}}return i},e.decodeDelimited=function(e){return e instanceof a||(e=new a(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!==(void 0===e?"undefined":r(e))||null===e?"object expected":null!=e.oldStartTime&&e.hasOwnProperty("oldStartTime")&&!o.isInteger(e.oldStartTime)?"oldStartTime: integer expected":null!=e.oldEndTime&&e.hasOwnProperty("oldEndTime")&&!o.isInteger(e.oldEndTime)?"oldEndTime: integer expected":null!=e.oldCount&&e.hasOwnProperty("oldCount")&&!o.isInteger(e.oldCount)?"oldCount: integer expected":null!=e.bucketStart&&e.hasOwnProperty("bucketStart")&&!(o.isInteger(e.bucketStart)||e.bucketStart&&o.isInteger(e.bucketStart.low)&&o.isInteger(e.bucketStart.high))?"bucketStart: integer|Long expected":null!=e.count&&e.hasOwnProperty("count")&&!(o.isInteger(e.count)||e.count&&o.isInteger(e.count.low)&&o.isInteger(e.count.high))?"count: integer|Long expected":null},e.fromObject=function(e){if(e instanceof c.CPLAssetDistribution.TimeBucket)return e;var t=new c.CPLAssetDistribution.TimeBucket;return null!=e.oldStartTime&&(t.oldStartTime=0|e.oldStartTime),null!=e.oldEndTime&&(t.oldEndTime=0|e.oldEndTime),null!=e.oldCount&&(t.oldCount=0|e.oldCount),null!=e.bucketStart&&(o.Long?(t.bucketStart=o.Long.fromValue(e.bucketStart)).unsigned=!1:"string"==typeof e.bucketStart?t.bucketStart=parseInt(e.bucketStart,10):"number"==typeof e.bucketStart?t.bucketStart=e.bucketStart:"object"===r(e.bucketStart)&&(t.bucketStart=new o.LongBits(e.bucketStart.low>>>0,e.bucketStart.high>>>0).toNumber())),null!=e.count&&(o.Long?(t.count=o.Long.fromValue(e.count)).unsigned=!1:"string"==typeof e.count?t.count=parseInt(e.count,10):"number"==typeof e.count?t.count=e.count:"object"===r(e.count)&&(t.count=new o.LongBits(e.count.low>>>0,e.count.high>>>0).toNumber())),t},e.toObject=function(e,t){t||(t={});var n={};if(t.defaults){if(n.oldStartTime=0,n.oldEndTime=0,n.oldCount=0,o.Long){var i=new o.Long(0,0,!1);n.bucketStart=t.longs===String?i.toString():t.longs===Number?i.toNumber():i}else n.bucketStart=t.longs===String?"0":0;if(o.Long){var r=new o.Long(0,0,!1);n.count=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.count=t.longs===String?"0":0}return null!=e.oldStartTime&&e.hasOwnProperty("oldStartTime")&&(n.oldStartTime=e.oldStartTime),null!=e.oldEndTime&&e.hasOwnProperty("oldEndTime")&&(n.oldEndTime=e.oldEndTime),null!=e.oldCount&&e.hasOwnProperty("oldCount")&&(n.oldCount=e.oldCount),null!=e.bucketStart&&e.hasOwnProperty("bucketStart")&&("number"==typeof e.bucketStart?n.bucketStart=t.longs===String?String(e.bucketStart):e.bucketStart:n.bucketStart=t.longs===String?o.Long.prototype.toString.call(e.bucketStart):t.longs===Number?new o.LongBits(e.bucketStart.low>>>0,e.bucketStart.high>>>0).toNumber():e.bucketStart),null!=e.count&&e.hasOwnProperty("count")&&("number"==typeof e.count?n.count=t.longs===String?String(e.count):e.count:n.count=t.longs===String?o.Long.prototype.toString.call(e.count):t.longs===Number?new o.LongBits(e.count.low>>>0,e.count.high>>>0).toNumber():e.count),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},e}(),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n(1169),r={selectionControllerDidDeselectItem:i.a,selectionControllerDidSelectItem:i.a,selectionControllerShouldSelectItem:function(e,t){return!0}}},function(e,t,n){"use strict";n.d(t,"a",function(){return h});var i=n(80),r=n(49),a=n(32),s=n(82),o=n(54),c=n(36),l=n(34),u=n(1139),d=n(401),h=i.a.extend(c.a,r.a,{collection:Object(l.b)(),delegate:Object(l.b)(),isEmptySelectionEnabled:Object(l.b)(!0),isMultipleSelectionEnabled:Object(l.b)(!0),pivot:Object(l.b)({strong:!0,get:function(){return this._pivot},set:function(e){return this._pivot=e}}),userPerformedSelectionOperation:function(e,t){this._userPerformedSelectionOperation(e,t),this.notifyPublicOfSelectionChange()},notifyPublicOfSelectionChange:function(){this.propertyChanged("selection"),this.selectionDidChange()},selectionDidChange:Object(c.g)(),_userPerformedSelectionOperation:function(e,t){switch(t){case d.a.TOGGLE:e&&(this.isItemAtHandleSelected(e)?this._userPerformedSelectionOperation(e,d.a.REMOVE):this._userPerformedSelectionOperation(e,d.a.ADD));break;case d.a.REMOVE:(this.isEmptySelectionEnabled||this.selection.length>1)&&e&&this.deselectItemAtHandle(e);break;case d.a.ADD:if(!this.isMultipleSelectionEnabled){this._userPerformedSelectionOperation(e,d.a.SET);break}e&&this.selectItemAtHandle(e)&&(this.pivot=e);break;case d.a.EXTEND:if(this.isMultipleSelectionEnabled){var n=this.pivot;e&&(n?this.selectRange(n,e):this._userPerformedSelectionOperation(e,d.a.ADD));break}default:e&&e.retain("BaseSelectionController: holding on during clearSelection"),this.clearSelection(),e&&(this.selectItemAtHandle(e)&&(this.pivot=e),e.release("BaseSelectionController: holding on during clearSelection"))}},userPerformedSelectionOperationInDirection:function(e,t){var n=this.getSelectableHandleInDirection(this.pivot,e);n&&(this.userPerformedSelectionOperation(n,t),this.pivot=n)},selectAll:function(){var e=this.collection.startHandle;if(e.isValid){this._userPerformedSelectionOperation(e,d.a.SET);var t=e.end;t!==e&&this._userPerformedSelectionOperation(t,d.a.EXTEND),this.notifyPublicOfSelectionChange()}},selection:Object(a.c)(s.a),selectedItem:Object(l.b)({dependencies:["selection"],get:function(){var e=this.selection;if(1!==e.length)return null;var t=e,n=Array.isArray(t),i=0;for(t=n?t:t[Symbol.iterator]();;){var r;if(n){if(i>=t.length)break;r=t[i++]}else{if((i=t.next()).done)break;r=i.value}return r}},set:Object.assign(function(e){var t=void 0;null===e?t=null:(t=u.a.create()).add(e),this.selection=t},{__CW__setter:function(e,t,n,i,r){var a=void 0;null===e?a=null:(a=u.a.create()).add(e),n[0+i]=a}}),writeDependencySetPathMap:["false"]}),updateSelectionForCollectionChange:Object(a.c)(o.a),clearSelection:Object(a.c)(o.a),isItemAtHandleSelected:Object(a.c)(o.a),selectItemAtHandle:Object(a.c)(o.a),deselectItemAtHandle:Object(a.c)(o.a),selectRange:function(e,t){var n=Math.sign(t.position-e.position),i=p(e).retain(this,"BaseSelectionController#selectRange: iterating handles"),r=p(t).retain(this,"BaseSelectionController#selectRange: end handle");for(this.selectItemAtHandle(i);i!==r;){var a=i.atDistance(n).retain(this,"BaseSelectionController#selectRange: iterating handles");i.release(this,"BaseSelectionController#selectRange: iterating handles"),i=a,this.selectItemAtHandle(i)}r.release(this,"BaseSelectionController#selectRange: end handle"),i.release(this,"BaseSelectionController#selectRange: iterating handles")},getSelectableHandleInDirection:Object(a.c)(o.a),staticMembers:{__QUALIFIED_CLASS_NAME__:"BaseSelectionController"}});function p(e){return e.position<0?e=e.start:e.position>e.maximumPosition&&(e=e.end),e}},function(e,t,n){"use strict";function i(e){var t=e.cloneNode(!0);if("CANVAS"===e.tagName)t.getContext("2d").drawImage(e,0,0);else for(var n=e.querySelectorAll("canvas"),i=t.querySelectorAll("canvas"),r=0,a=n.length;r<a;r++)i[r].getContext("2d").drawImage(n[r],0,0);return t}n.d(t,"a",function(){return i})},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n(34),r=n(36),a=n(409),s=n(1184),o=n(189),c=a.a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"VIEWOUTLET",tagname:"view",name:"contentView"}],classes:["cw-modal-dialog-background",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isOpen",truevalue:"is-open",falsevalue:"is-closing",attributes:{}}]}},className:"cw-ui-modal-dialog",__QUALIFIED_CLASS_NAME__:"ModalDialog"},contentView:Object(i.b)(),isFocusable:!0,tabIndex:-1,dismissOnEscape:Object(i.b)(!0),animationDuration:250,isOpen:Object(i.b)(),animateOpen:function(e){this.isOpen=!0,e&&Object(s.a)(e,this.animationDuration)},animateClosed:function(e){var t=this;this.isOpen=!1,Object(s.a)(function(){t.sendEvent("modalDialogDidDismiss"),"function"==typeof e&&e()},this.animationDuration)},_isAttachedDidChange:Object(r.f)("isAttached",function(e){e&&this.animateOpen()}),pointerUp:function(e){this.contentView.element.contains(e.targetView.element)?this.sendEvent("modalContentWasClicked",this):this.sendEvent("modalBackgroundWasClicked",this)},keyDown:function(e){if(!this.dismissOnEscape||e.keyCode!==o.a.ESC)return!1;this.animateClosed()},hide:function(){this.sendEvent("dismissModalDialog")}})},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return d});var i=n(409),r=n(34),a=n(1197),s=n(180),o=n(200),c=n(1182),l=n(172),u=n(189),d=(n(917),n(21),i.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"header",children:[{type:"ELEMENT",tagname:"h1",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"title",attributes:{}}]},{type:"ELEMENT",tagname:"h2",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"subtitle",attributes:{}}],classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"shouldHideSubtitle",truevalue:"hidden",attributes:{}}]}]},{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"url",attributes:{}}],classes:["copy-url",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"valueIsAlwaysLTR",truevalue:"is-always-ltr",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"shouldHideCopyLinkButton",truevalue:"expanded-access",attributes:{}}],name:"urlTextElement",attributes:{tabindex:"0"}}],classes:["copy-url-container"]},{type:"ELEMENT",tagname:"footer",children:[{type:"ELEMENT",tagname:"span",children:[{type:"VIEWOUTLET",tagname:"view",name:"closeButton"},{type:"ELEMENT",tagname:"span",classes:["divider",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"shouldHideCopyLinkButton",truevalue:"hidden",attributes:{}}]},{type:"VIEWOUTLET",tagname:"view",name:"copyLinkButton"}],classes:["button-container"]}]}],classes:["workflow-screen","copy-link-view","sharing-dialog"]},className:"ck-sharing-copy-link-view",__QUALIFIED_CLASS_NAME__:"CopyLinkView"},isFocusable:!0,url:r.b(),title:r.b(),subtitle:r.b(),shouldHideSubtitle:r.b({readOnly:!0,dependencies:["subtitle"],get:Object.assign(function(){return a.a(this.subtitle)},{__CW__getter:function(e,t,n,i){return a.a(i.internalGet(this,t[0+n]))}})}),valueIsAlwaysLTR:r.b(),shouldHideCopyLinkButton:r.b(),selectURL:function(){var t=this.urlTextElement,n=document.createRange();n.selectNodeContents(t);var i=e.getSelection();i.removeAllRanges(),i.addRange(n),t.focus()},pointerDown:function(e){e.target===this.urlTextElement&&(this.sendEvent("selectURL",this),this.shouldHideCopyLinkButton||e.preventDefault())},copyLinkButton:r.b({downstreamBindings:{url:"(owner).url",shouldHideCopyLinkButton:"(owner).shouldHideCopyLinkButton"},defaultValue:s.b(o.a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"shouldHideCopyLinkButton",truevalue:"hidden",attributes:{}}]}}},additionalClassNames:c.a(["primary"])},{title:l.d("CKSharing.ManageShare.Button.CopyLink"),action:"copyLinkAction",url:r.b(),contextKeys:["context"],shouldHideCopyLinkButton:r.b()}))}),closeButton:s.b(o.a.extend({additionalClassNames:c.a(["close","primary"])}),{title:l.d("CKSharing.AddParticipants.CopyLink.CloseButton.Title"),keyEquivalent:[u.a.ESC,u.a.RETURN],action:"close"})}))}).call(this,n(6))},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n(49),r=n(54),a={mixinDependencies:[i.a],convertToPrivateShare:r.a.define(),createShare:r.a.define(),deleteShare:r.a.define(),updateShare:r.a.define()}},function(e,t,n){"use strict";function i(e){return e.serverErrorCode||e.ckErrorCode}n.d(t,"a",function(){return i})},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n(49),r=n(54),a={mixinDependencies:[{mixinDependencies:[i.a],collectionViewDidScroll:r.a.define()}],collectionViewDidScrollInDirection:r.a.define()}},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n(65),r=n(183),a=n(25);function s(e){e||i.b("You must specify a URL");var t,n=a.a.environment;n&&(n.isBeta&&(t="beta"),n.isCarry&&(t="carry"),n.isFuture&&(t="future"));var s,o=a.a.cloudOSApplication;if(o&&(o.isBeta&&(s="beta"),o.isCarry&&(s="carry"),o.isFuture&&(s="future")),t&&t!==s){if("string"==typeof e){var c=r.a.create(e);return c.appendQueryParameter("rootDomain",t),c.href}e.appendQueryParameter("rootDomain",t)}return e}},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n(49),r=n(54),a={mixinDependencies:[i.a],connect:r.a.define(),disconnect:r.a.define(),send:r.a.define(),receive:r.a.define()}},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n(49),r=n(126),a={mixinDependencies:[i.a],iframeView:r.a.define(),host:r.a.define()}},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return C});var i=n(1283),r=n(41),a=n(180),s=n(1185),o=n(177),c=n(34),l=n(93),u=n(65),d=n(1275),h=n(183),p=n(556),f=n(365),g=n(557),m=n(36),v=n(1169),_=n(784),b=n(1184),y=n(140),I=n(359),w=i.a.extend({promise:r.c(a.b(s.a)),_primaryButtonClicked:function(e){this._showAlertResponse("primary")},_alternateButtonClicked:function(e){this._showAlertResponse("alternate")},_otherButtonClicked:function(e){this._showAlertResponse("other")},_showAlertResponse:function(e){this.promise.resolve({buttonClicked:e})},staticMembers:{__QUALIFIED_CLASS_NAME__:"HostedApplicationAlertViewController"}}),S=o.b("HostedApplicationState",{NOT_STARTED:"NOT_STARTED",STARTING:"STARTING",BEFORE_INACTIVE:"BEFORE_INACTIVE",INACTIVE:"INACTIVE",ACTIVE:"ACTIVE",BACKGROUND:"BACKGROUND"}),C={userInfo:c.b({type:Object,readOnly:!0,defaultValue:a.b(Object)}),processInfo:c.b({type:Object,readOnly:!0,defaultValue:a.b(Object)}),canShowAlert:c.b({type:Boolean,defaultValue:!0}),canReauthenticate:c.b({type:Boolean,defaultValue:!0}),canLaunchChildApp:c.b({type:Boolean,defaultValue:!0}),state:c.b({type:S,binding:l.c("_state"),readOnly:!0}),targetState:c.b({type:S,defaultValue:S.ACTIVE,didChange:function(){switch(this.targetState){case S.ACTIVE:case S.BACKGROUND:case S.NOT_STARTED:break;default:throw new u.a("HostedApplicationSupport: targetState can only be one of ACTIVE, BACKGROUND or NOT_STARTED.",{hostedApplication:this,url:this.urlWithRoute,targetState:this.targetState,state:this._state})}}}),route:c.b({type:String,defaultValue:""}),url:c.b({type:String}),urlWithRoute:c.b({readOnly:!0,dependencies:["url","route"],get:function(){var e=this.url,t=this.route;return t?e+"#"+t:e}}),childAppClass:r.c({defaultValue:function(){return n(954).HostedApplicationPopupViewController}}),childApps:r.c(a.b({})),appAlerts:r.c(a.b(Set)),parentApp:r.c({defaultValue:null,strong:!0}),appId:c.b({readOnly:!0,defaultValue:function(){return"I-"+d.a()}}),isAppRunning:c.b({type:Boolean,readOnly:!0,dependencies:["_state","_isIframeLoaded"],get:function(){var e=this._state,t=this._isIframeLoaded,n=S.NOT_STARTED,i=S.STARTING;return t&&e!==n&&e!==i}}),isActive:c.b({dependencies:["_state"],readOnly:!0,get:function(){return this._state===S.ACTIVE}}),hostAppOrigin:c.b({type:"string",dependencies:["url"],readOnly:!0,get:Object.assign(function(){return h.a.create(this.url).origin},{__CW__getter:function(e,t,n,i){return h.a.create(i.internalGet(this,t[0+n])).origin}})}),channel:c.b({type:p.a,defaultValue:a.b(p.a),downstreamBindings:{remoteOrigin:"(owner).hostAppOrigin"}}),caller:c.b({type:f.a,defaultValue:a.b(f.a),downstreamBindings:{channel:"(owner).channel"}}),listener:c.b({type:g.a,defaultValue:a.b(g.a),downstreamBindings:{channel:"(owner).channel"}}),isReadyToReceiveMessages:m.g(),transition:v.a,authenticate:v.a,reauthenticate:v.a,didTimeout:function(){var e=this.iframeView,t=new u.a("HostedApplicationSupport: Timeout occurred on hosted app",{appId:e.appId,src:e.src});this.didEnd("UNCAUGHT_EXCEPTION",t)},didEnd:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.parentApp,i=this.appId,r=this.childApps,a=this.appAlerts;for(var s in n&&!n.isDisposed&&n.isAppRunning&&this.parentApp.childAppDidEnd(i,e,t),r)if(r.hasOwnProperty(s)){var o=r[s];!o.isDisposed&&o.isAppRunning&&o.parentAppDidEnd()}if(a.forEach(function(e){!e.isDisposed&&e.isAttached&&(_.b.warn("HostedApplicationSupport: Force removing the alert because app ended."),e.hide(),a.delete(e))}),this._stop(),"UNCAUGHT_EXCEPTION"===e){var c=t.title,l="HostedApplicationSupport: App did end with UNCAUGHT_EXCEPTION: "+(void 0===c?"Unknown Error":c);throw new u.a(l,{appId:this.appId,url:this.urlWithRoute,error:t})}},parentAppDidEnd:function(){this._state!==S.NOT_STARTED&&this.didEnd()},childAppDidBecomeActive:function(e){_.b.debug("HostedApplicationSupport: Notifying childAppDidBecomeActive()"),this.caller.sendNotification("childAppDidBecomeActive",e)},childAppDidEnd:function(e,t,n){_.b.debug("HostedApplicationSupport: Notifying childAppDidEnd()"),delete this.childApps[e],this.caller.sendNotification("childAppDidEnd",e,t,n)},init:function(){var e=arguments;this.__s._$4Yt$init.apply(this,e),this.host.addHostedApplication(this);var t=this.appId,n=this.parentApp,i=this.processInfo;i.appId=t,n&&(i.parentHostedAppId=n.appId);var r=this.channel;void 0===r.remoteOrigin&&(r.remoteOrigin=this.hostAppOrigin),void 0===this.caller.channel&&(this.caller.channel=r),void 0===this.listener.channel&&(this.listener.channel=r),this.listener.registerProcedures([["isReadyToReceiveMessages","_isReadyToReceiveMessages"],["setTitle","_setTitle"],["didEnd","_didEnd"],["reportNonFatalError","_reportNonFatalError"],["sendApplicationPreferences","_sendApplicationPreferences"],["recordException","_recordException"],["willUnload","_willUnload"],["isReadyToTerminateDidChange","_isReadyToTerminateDidChange"],["reauthenticate","_reauthenticate"],["logOut","_logOut"],["reloadApplication","_reloadApplication"],["getHostingState","_getHostingState"],["openHelp","_openHelp"],["recordStat","_recordStat"],["beginStat","_beginStat"],["endStat","_endStat"],["setRoute","_setRoute"],["launchChildApp","_launchChildApp"],["showAlert","_showAlert"]],this)},dispose:function(){var e=arguments;_.b.debug("HostedApplicationSupport: dispose()"),this.host.removeHostedApplication(this),this.__s._$5G3$dispose.apply(this,e)},didDetach:function(){var e=arguments;this.__s._$5PP$didDetach.apply(this,e),this._state!==S.NOT_STARTED&&this.didEnd()},becomeActive:function(){_.b.debug("HostedApplicationSupport: becomeActive");var e=S.ACTIVE,t=s.a.create();return O(this,e,function(){return t.resolve()}),this.targetState!==e&&(this.targetState=e),t},enterBackground:function(){_.b.debug("HostedApplicationSupport: enterBackground");var e=S.BACKGROUND,t=s.a.create();return O(this,e,function(){return t.resolve()}),this.targetState!==e&&(this.targetState=e),t},shouldRefreshData:function(){},hostingStateDidChange:function(e,t,n){},hostDidReceiveFocus:function(){},hostDidLoseFocus:function(){},relayEvent:function(){},routeDidUpdate:function(e){_.b.debug("HostedApplicationSupport: routeDidUpdate('"+e+"')"),this.isAppRunning&&this.caller.sendNotification("routeDidUpdate",e),this.route=e},_state:c.b({type:S,defaultValue:S.NOT_STARTED}),_isIframeLoaded:c.b({type:Boolean,readOnly:!0,dependencies:["channel.isDisconnected","isAttached"],get:function(){var e=this.channel;return this.isAttached&&e&&!e.isDisconnected}}),_loadAndRunTimer:r.c(null),_isReadyToReceiveMessages:function(){_.b.debug("HostedApplicationSupport: Received isReadyToReceiveMessages"),this.isReadyToReceiveMessages()},_didEnd:function(e,t){var n=this;_.b.debug("HostedApplicationSupport: Received didEnd('"+e+"', '"+t+"')"),b.a(function(){!n.isDisposed&&n.isAppRunning&&n.didEnd(e,t)},1)},_setTitle:function(){},_reportNonFatalError:function(){},_sendApplicationPreferences:function(){},_recordException:function(){},_isReadyToTerminateDidChange:function(){},_reauthenticate:function(){if(!this.canReauthenticate)throw _.b.debug("HostedApplicationSupport: Rejecting reauthenticate()"),new y.b("Did not have access to reauthenticate",I.a.NOT_ALLOWED,{state:this._state.value});return _.b.debug("HostedApplicationSupport: Received reauthenticate()"),this.reauthenticate()},_logOut:function(e){_.b.debug("HostedApplicationSupport: Received logOut(shouldForce: "+e+")"),this.host.logOut(!!e)},_reloadApplication:function(){_.b.debug("HostedApplicationSupport: Received reloadApplication()"),this._reset();var e=s.a.create();return O(this,this.targetState,function(){return e.resolve()}),e},_getHostingState:function(){},_openHelp:function(e){this.host.openHelp(e)},_recordStat:function(e,t){this.host.recordStat(e,t)},_beginStat:function(){},_endStat:function(){},_setRoute:function(e){this.route=e,this.host.setRouteForApp(this,e)},_launchChildApp:function(e){if(_.b.debug("HostedApplicationSupport: Received launchChildApp("+e+")"),!this.canLaunchChildApp)throw _.b.debug("HostedApplicationSupport: Rejecting launchChildApp()"),new y.b("Did not have access to launch child app.",I.a.NOT_ALLOWED,{state:this._state.value});var t=this.childAppClass.create({url:e,host:this.host,parentApp:this}),n=t.appId;return this.childApps[n]=t,t.show(),n},_showAlert:function(e){var t=this;if(_.b.debug("HostedApplicationSupport: Received showAlert()"),!this.canShowAlert)throw _.b.debug("HostedApplicationSupport: Rejecting showAlert()"),new y.b("Did not have access to showAlert.",I.a.NOT_ALLOWED,{state:this._state.value});e||u.b("HostedApplication#showAlert: params are mandatory.");var n=e.alertType,i=e.message,r=e.description,a=e.primaryButton,s=e.alternateButton,o=e.otherButton;i&&a||u.b("HostedApplication#showAlert: message, and primaryButton are mandatory.");var c=["small"];a.action="_primaryButtonClicked";var l=a.additionalClassNames=c.slice(0);l.push("default-action"),a.isDestructive&&l.push("destructive"),[s,o].forEach(function(e){e&&(l=e.additionalClassNames=c.slice(0),e.isDestructive&&l.push("destructive"))}),s&&(s.action="_alternateButtonClicked"),o&&(o.action="_otherButtonClicked");var d=w.show({iconNames:n,message:i,description:r,primaryButton:a,alternateButton:s,otherButton:o}),h=this.appAlerts;return h.add(d),d.promise.then(function(e){return t.isDisposed||h.delete(d),e})},_start:function(){var e=this,t=this._state,n=S.NOT_STARTED,i=S.STARTING;if(t!==n)throw new u.a("HostedApplicationSupport: _start can only be called while NOT_STARTED.",{hostedApplication:this,url:this.urlWithRoute,targetState:this.targetState,state:t});return this._state=i,s.a.invokeFunction(function(){return e.authenticate()}).then(function(){return!e.isDisposed&&e.isAttached&&e._load()}).then(function(){return!e.isDisposed&&e._isIframeLoaded&&e._run()})},_stop:function(){var e=this._state,t=S.NOT_STARTED;if(e===t)throw new u.a("HostedApplicationSupport: _stop cannot be called when NOT_STARTED.",{hostedApplication:this,targetState:this.targetState,state:e});this.targetState=t,this._reset()},_reset:function(){this._stopLoadAndRunTimer(),this._unload(),this._state=S.NOT_STARTED},_startLoadAndRunTimer:function(){var e=this;if(this._loadAndRunTimer)throw new u.a("HostedApplicationSupport: _startLoadAndRunTimer cannot be called while another one is in flight.",{hostedApplication:this,url:this.urlWithRoute,timerId:this._loadAndRunTimer,targetState:this.targetState,state:this._state});this._loadAndRunTimer=b.a(function(){e.isDisposed||(e._loadAndRunTimer=null,e.didTimeout())},3e4)},_stopLoadAndRunTimer:function(){this._loadAndRunTimer&&(e.clearTimeout(this._loadAndRunTimer),this._loadAndRunTimer=null)},_load:function(){var e=s.a.create(),t=this.iframeView,n=this.channel,i=this.urlWithRoute;this._startLoadAndRunTimer();var r=this.listen("isReadyToReceiveMessages",function(){_.b.debug("HostedApplicationSupport: Loaded iframe with src "+t.src),r.disconnect(),e.resolve()});return n.bind("iframe",this.bindingFor("iframeView.iframe")),t.bind("appId",this.bindingFor("appId")),t.src=i,e},_unload:function(){var e=this.iframeView,t=this.channel;e.src="",e.unbind("appId"),t.unbind("iframe")},_run:function(){var e=this,t=this.userInfo,n=this.processInfo,i=this.host.hostInfo;return _.b.debug("HostedApplicationSupport: Calling run()"),this.caller.callRemoteProcedure("run",t,i,n).then(function(){!e.isDisposed&&e.isAttached&&(_.b.debug("HostedApplicationSupport: Received ack for run()"),e._stopLoadAndRunTimer(),e.urlWithRoute!==e.iframeView.src&&e.transceiver.sendNotification("routeDidUpdate",e.route),e._state=S.BACKGROUND)})},_willEnterForeground:function(){var e=this;return _.b.debug("HostedApplicationSupport: Calling willEnterForeground()"),this._state=S.BEFORE_INACTIVE,this.caller.callRemoteProcedure("willEnterForeground").then(function(){_.b.debug("HostedApplicationSupport: Received ack for willEnterForeground()"),!e.isDisposed&&e.isAttached&&(e._state=S.INACTIVE)})},_didBecomeActive:function(){_.b.debug("HostedApplicationSupport: Notifying didBecomeActive()"),this.caller.sendNotification("didBecomeActive");var e=this.parentApp,t=this.appId;e&&!e.isDisposed&&e.isAppRunning&&e.childAppDidBecomeActive(t),this._state=S.ACTIVE},_willResignActive:function(){_.b.debug("HostedApplicationSupport: Notifying willResignActive()"),this._state=S.INACTIVE,this.caller.sendNotification("willResignActive")},_didEnterBackground:function(){_.b.debug("HostedApplicationSupport: Notifying didEnterBackground()"),this.caller.sendNotification("didEnterBackground"),this._state=S.BACKGROUND},_becomeActive:function(){var e=this,t=S.BACKGROUND,n=this._state;if(n!==t)throw new u.a("HostedApplicationSupport: _becomeActive can only be called while ACTIVE.",{hostedApplication:this,url:this.urlWithRoute,targetState:this.targetState,state:n});return _.b.debug("HostedApplicationSupport: _becomeActive"),this._willEnterForeground().then(function(){return!e.isDisposed&&e.isAppRunning&&e.transition(!0)}).then(function(){return!e.isDisposed&&e.isAppRunning&&e._didBecomeActive()})},_enterBackground:function(){var e=this,t=S.ACTIVE,n=this._state;if(n!==t)throw new u.a("HostedApplicationSupport: _enterBackground can only be called while ACTIVE.",{hostedApplication:this,url:this.urlWithRoute,targetState:this.targetState,state:n});return _.b.debug("HostedApplicationSupport: _enterBackground"),s.a.invokeFunction(function(){return e._willResignActive()}).then(function(){return!e.isDisposed&&e.isAppRunning&&e.transition(!1)}).then(function(){return!e.isDisposed&&e.isAppRunning&&e._didEnterBackground()})},_hostedApplicationStateObserver:m.f({inputs:["isAttached","_state","targetState"],callback:function(e,t,n){var i=S.NOT_STARTED,r=S.BACKGROUND,a=S.ACTIVE;if(e)if(n===r)switch(t){case i:this._start();break;case a:this._enterBackground()}else if(n===a)switch(t){case i:this._start();break;case r:this._becomeActive()}}}),__superMap:{_$4Yt$init:"init",_$5G3$dispose:"dispose",_$5PP$didDetach:"didDetach"}};function O(e,t,n){if(e.state===t)n();else var i=e.listen("state",function(e){e===t&&(i.disconnect(),i=null,n())})}}).call(this,n(6))},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n(409),r=n(417),a=n(34),s=n(1233),o=n(180),c=(n(955),i.a.extend(r.a,{staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"TEXT",data:"    "},{type:"VIEWOUTLET",tagname:"view",name:"loadingView"},{type:"TEXT",data:"    "},{type:"ELEMENT",tagname:"iframe",name:"iframe",classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isActive",truevalue:"",falsevalue:"cw-hidden",attributes:{}}],attributes:{id:{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"appId",attributes:{},attribute:"id"},src:{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"src",attributes:{},attribute:"src"}}}],classes:["hosted-application"]},className:"hak-hosted-application-view",__QUALIFIED_CLASS_NAME__:"HostedApplicationView"},appId:a.b({type:"string"}),src:a.b({type:"string"}),isActive:a.b({type:"boolean"}),loadingView:a.b({type:s.a,defaultValue:o.b(s.a.extend({isVisible:a.b({readOnly:!0,dependencies:["isActive"],get:Object.assign(function(){return!this.isActive},{__CW__getter:function(e,t,n,i){return!i.internalGet(this,t[0+n])}})}),isActive:a.b({type:"boolean"})})),downstreamBindings:{isActive:"(owner).isActive"}})}))},function(e,t,n){"use strict";n.d(t,"a",function(){return g});var i=n(1185),r=n(1184),a=n(1169),s=n(183),o=n(1128),c=n(784),l=n(25),u=n(91),d="ckdatabasews",h="ckdeviceservice",p="default",f=[423,424];function g(e,t){if(g.cachedResponse){var n=g.cachedResponse;g.cachedResponse=null;var c=i.a.create();return r.a(function(){m(c,{url:"",response:{status:200,headers:"",encodedBody:JSON.stringify(n)},autorelease:a.a})},g.cachedResponseDelay||0),c}var l=e.substr(0,7),p="http://"===l||"https:/"===l,b=t.method||"GET",y=t.headers||{},I=t.body||"",w=function(t){var n={},i=e.split("?");if(i.length>1)for(var r=i[1].split("&"),a=0;a<r.length;a++){var s=r[a].split("="),o=s[0],c=s[1];n[o]=decodeURIComponent(c)}return n}(),S=e.split("?");S.length>1&&(e=S[0]);var C,O={method:b,headers:y,body:I,shouldReportSuccess:!0,shouldReportFailure:!0,reportingPathname:null};if(p)if(-1!==e.indexOf("/device/")){var A=s.a.create(e).path;(C=u.a.create(O)).setPath("url.serviceName",h),C.setPath("url.pathname",A)}else t.credentials&&"include"===t.credentials&&(O.useCredentialsIfCrossOrigin=!0),O.url=e,C=o.a.create(O);else(C=u.a.create(O)).setPath("url.serviceName",d),C.setPath("url.pathname",e),C.url.setQueryParameter("remapEnums",!0),C.onStatus(423,v.bind(this,Object.keys(O))),C.onStatus(424,v.bind(this,Object.keys(O)));C.url=_(C.url,w),C.retain();var E=i.a.create();C.didSucceed=m.bind(this,E),C.didFail=function(e,t){var n=t.get("response");if(-1===f.indexOf(n.status)){if(n&&n.status)return m(e,t);var i=n.encodedBody,r=new TypeError(i);e.reject(r),t.autorelease()}}.bind(this,E);var T=g.config;if(T){var M=T.additionalQueryParameters;M&&(C.url=_(C.url,M))}return C.send().catch(function(e){}),E}function m(e,t){var n=t.response,r=n.headers,a={status:n.status,type:p,headers:function(e){for(var t={},n=e.split("\n"),i=0;i<n.length;i++)if(!(n[i].length<1)){var r=n[i].split(": "),a=r.shift(),s=r.join(":");t[a]=s}return t}(r),url:t.url.toString(),text:function(){var e=i.a.create(),t=n.encodedBody;return e.resolve(t),e},json:function(){var e=i.a.create(),t=JSON.parse(n.encodedBody);return e.resolve(t),e}};e.resolve(a),t.autorelease()}function v(e,t){e.push("url"),l.a.cloudOSService.revalidateUser().then(function(){c.b.info("CKRequest: Retrying request after revalidate"),t.set("copyKeys",e),t.copy().send()})}function _(e,t){for(var n=Object.keys(t),i=0;i<n.length;i++){var r=n[i];e.setQueryParameter(r,t[r])}return e}},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n(1229),r=n(558),a=function(e){function t(n,i,r){!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,i));return a.rootRecord=r,a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.getIncludeExcludeIndices=function(e){var t=this.collection,n=this.container,i=this.rootRecord;if(!Boolean(void 0!==i&&void 0!==n&&n.isLoaded&&i.assetCount===n.medias.length))return{includeIndices:e};var a=Array.from(new Array(t.length).keys()).map(function(e){return t.encodedObjectAt(e)}),s=e,o=r.a(s,a.length),c=s.filter(function(e){return!a[e]}).length,l=o.filter(function(e){return!a[e]}).length;return Math.ceil(c/30)+s.length/1e4<Math.ceil(l/30)+o.length/1e4?{includeIndices:s}:{excludeIndices:o}},t}(i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i={staticMembers:{getNestedOperation:function(e){for(var t=e,n=t;(n=t.operation)instanceof Object;)t=n;return t},getNestedOperationContext:function(e){return this.getNestedOperation(e).context}}}},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n(69),r=n(784),a=n(1185),s=n(12).a.extend({handlesType:i.a.WRITE.UPDATE,shouldIngestChangesOnResponse:!0,shouldIngestChangesAsChangeSet:!0,action:function(e){r.b.debug("Media/Update: begin");var t=e.context,n=t.model,i=t.diff;if(!i)return a.a.resolve();var s=i.added,o=i.updated,c=[].concat(s,o);if(0===c.length)return a.a.resolve();var l=n.zone.scope,u=n.getServiceValuesFromDataValues(c),d=this.baseCKOptions(n.zoneID);return d.desiredKeys=n.serviceKeys,this.ckRequest(e,l).send("saveRecords",u,d).then(function(){r.b.debug("Media/Update: success")})},staticMembers:{__QUALIFIED_CLASS_NAME__:"MediaUpdateOperationHandler"}})},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n(49),r=n(54),a={mixinDependencies:[i.a],fetch:r.a.define()}},function(e,t,n){"use strict";var i=n(200),r=n(34),a=n(36),s=n(93),o=n(180),c=n(799),l=n(1233),u=n(1125),d=n(1178),h=n(39),p=n(1244),f=n(1248),g=n(813),m=n(197),v=n(186),_=n(41),b=n(81),y=n(1206),I=n(1172),w=n(95),S=n(1246),C=n(46),O=n(853),A=n(83),E={mixinDependencies:[v.a],init:function(){var e=arguments;this.__s._$Vd$init.apply(this,e),this.navigationSwipeGR=this.navigationSwipeGRClass.create({delegate:this}),this.addGestureRecognizer(this.navigationSwipeGR)},navigationSwipeGRClass:S.a.extend(a.a,{event:"navigationSwipe",pansHorizontally:!0,cancelsVertically:!0,view:r.b(),initialStraddleIndex:void 0,currentStraddleIndex:void 0,_slideAnimationInfo:void 0,_hasBegunOnce:!1,_isDOMLockingActive:!1,_lastSeenDOMLockingStraddleIndex:void 0,_lastSeenDOMLockingStraddleMotionDirection:void 0,canReceiveNewStartingEventsAfterLastEndingEvent:!0,maxStraddleIndex:r.b({readOnly:!0,dependencies:["view.collection.length"],get:Object.assign(function(){return this.getPath("view.collection.length")-1},{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])-1}})}),userIndicatedStraddleIndex:_.c({readOnly:!0,get:function(){return this.initialStraddleIndex-this.snappedTranslationSinceClinching.x/this.view.straddleInterval}}),boundedUserIndicatedStraddleIndex:_.c({readOnly:!0,get:function(){return Math.max(0,Math.min(this.maxStraddleIndex,this.userIndicatedStraddleIndex))}}),roundedUserIndicatedStraddleIndex:_.c({readOnly:!0,get:function(){return Math.round(this.boundedUserIndicatedStraddleIndex)}}),rubberBandedUserIndicatedStraddleIndex:_.c({readOnly:!0,get:function(){return this.userIndicatedStraddleIndex*(1/3)+this.boundedUserIndicatedStraddleIndex*(1-1/3)}}),currentIndexVelocity:_.c({readOnly:!0,get:function(){var e=-this.velocity.x/this.view.straddleInterval*1e3;return Math.abs(e)>.01?e:0}}),location:_.c({get:function(){var e=arguments;return this._trackedPointerLocations.delete("_hack_entry"),this._trackedPointerLocations.size?this.__s._$1Ke$get.apply(this,e):{x:NaN,y:NaN}},__superMap:{_$1Ke$get:"get"}}),pointerDown:function(){var e=arguments;this.pauseStateChanges();var t=this.__s._$1Ma$pointerDown.apply(this,e);return this._hasBegunOnce&&(this.state=b.b.Changed,this._stopAnimatingSlide()),this._hasBegunOnce=!0,this.initialStraddleIndex=this.currentStraddleIndex||this.view.fractionalMediaIndex,this.resumeStateChanges(),t},pointerMove:function(){var e=arguments,t=this.__s._$1WV$pointerMove.apply(this,e),n=this.rubberBandedUserIndicatedStraddleIndex;return isNaN(n)||(this.currentStraddleIndex=n),this.view.isNavigationSwipeGestureInProgress&&this._activateDOMLockingIfDirectionChanged(n),t},pointerUp:function(){var e=arguments;this.pauseStateChanges();var t=this.rubberBandedUserIndicatedStraddleIndex!==this.roundedUserIndicatedStraddleIndex,n=t?this._getSlideAnimationInfo():void 0;this._trackedPointerLocations.set("_hack_entry",void 0);var i=this.__s._$1y3$pointerUp.apply(this,e);return t?(this._startAnimatingSlideWithInfo(n),this.state=b.b.Changed,this._deactivateDOMLocking()):this.state=b.b.Cancelled,this.resumeStateChanges(),i},_activateDOMLockingIfDirectionChanged:function(e){if(!this._isDOMLockingActive){var t=this._lastSeenDOMLockingStraddleIndex;this._lastSeenDOMLockingStraddleIndex=e<=1/0?e:void 0;var n=e-t,i=n<0?-1:n>0?1:0,r=this._lastSeenDOMLockingStraddleMotionDirection;this._lastSeenDOMLockingStraddleMotionDirection=i,r&&i&&r!==i&&this._activateDOMLocking()}},_activateDOMLocking:function(){if(!this._isDOMLockingActive){this._isDOMLockingActive=!0;var e=Math.round(this.initialStraddleIndex);this.view.mediaIndicesWithProactivelyPrerenderedViews.length=0,this.view.mediaIndicesWithProactivelyPrerenderedViews.push(e-1,e,e+1),this.view.propertyChanged("mediaIndicesWithProactivelyPrerenderedViews")}},_deactivateDOMLocking:function(){this._isDOMLockingActive&&(this._isDOMLockingActive=!1,this.view.mediaIndicesWithProactivelyPrerenderedViews.length=0,this.view.propertyChanged("mediaIndicesWithProactivelyPrerenderedViews"))},reset:function(){var e=arguments;this._stopAnimatingSlide(),this._deactivateDOMLocking(),this.initialStraddleIndex=void 0,this.currentStraddleIndex=void 0,this._slideAnimationInfo=void 0,this._hasBegunOnce=!1,this._isDOMLockingActive=!1,this._lastSeenDOMLockingStraddleIndex=void 0,this._lastSeenDOMLockingStraddleMotionDirection=void 0,this.__s._$2qp$reset.apply(this,e)},DEFAULT_HALF_LIFE:.04,MAX_HALF_LIFE:.07,MIN_HALF_LIFE:.03,BIG_HALF_LIFE:1e9,VELOCITY_LINEAR_DECAY:.05,_getUnrestrainedRestingFractionalStraddleIndexForSlide:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.currentStraddleIndex,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.currentIndexVelocity,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.DEFAULT_HALF_LIFE;return e+this._getSlideDisplacementAtTime(1/0,t,n)},_getDestinationIndexForSlide:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.currentStraddleIndex,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.currentIndexVelocity,n=Math.round(e),i=t<-1/3,r=t>1/3,a=e<n,s=e>n;return Math.max(0,Math.min(this.maxStraddleIndex,i&&a?n-1:!i&&a?n:!r&&s?n:r&&s?n+1:n))},_getSlideDuration:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.currentIndexVelocity,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.DEFAULT_HALF_LIFE;if(!e||!t)return 0;var n=this.VELOCITY_LINEAR_DECAY,i=Math.abs(e);return t>this.BIG_HALF_LIFE?i/n:t*this._lambertW0(i*Math.log(2)/t/n)/Math.log(2)},_getSlideDisplacementAtTime:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.currentIndexVelocity,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.DEFAULT_HALF_LIFE,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._getSlideDuration(t,n);if(!t||!n)return 0;var r=this.VELOCITY_LINEAR_DECAY,a=Math.abs(t),s=t<0?-1:t>0?1:0;if(e>i&&(e=i),n>this.BIG_HALF_LIFE)return s*(a*e-r*e*e/2);var o=Math.log(.5)/n;return s*(a*(Math.pow(Math.E,e*o)-1)/o-r*e*e/2)},_getSlideDistanceAtTime:function(){var e,t=(e=C.c).getAutodisposingInstanceFromParams.apply(e,arguments);return t[1]=Math.abs(t[1]),this._getSlideDisplacementAtTime.apply(this,t)},_lambertW0:function(e){return e<-1/Math.E?NaN:O.b(this._lambertW0_inverseFunc||(this._lambertW0_inverseFunc=function(e){return e*Math.pow(Math.E,e)}),e,-1,1+Math.log(Math.max(e,1)))},_getBestEffortSlide:function(e,t){var n=this,i=this.MAX_HALF_LIFE,r=this.MIN_HALF_LIFE,a=Math.abs(e),s=a/e,o=Math.abs(t),c=o/t,l=C.h.getAutodisposingInstance();if(s!==c)return l.velocityHalfLife=0,l.duration=0,l.achievedDisplacement=0,l;var u=this._getSlideDuration(a,r),d=this._getSlideDistanceAtTime(1/0,a,r,u);if(d>o)return l.velocityHalfLife=r,l.duration=u,l.achievedDisplacement=s*d,l;var h=this._getSlideDuration(a,i),p=this._getSlideDistanceAtTime(1/0,a,i,h);return p<o?(l.velocityHalfLife=i,l.duration=h,l.achievedDisplacement=s*p,l):(l.velocityHalfLife=O.b(function(e){return n._getSlideDistanceAtTime(1/0,a,e)},o,r,i),l.duration=this._getSlideDuration(a,l.velocityHalfLife),l.achievedDisplacement=s*this._getSlideDistanceAtTime(1/0,a,l.velocityHalfLife),l)},_getDisplacementCorrectionAfterTime:function(e,t,n,i){return this._displacementCorrectionTweens[i].call(this,e/t)*n},_displacementCorrectionTweens:{"-1":function(e){return.5-.5*Math.cos(Math.PI*e)},0:function(e){return 1-(1-e)*(1-e)},1:function(e){return 1-(1-e)*(1-e)}},_getSlideAnimationInfo:function(){var e=this,t=this.currentStraddleIndex,n=this.currentIndexVelocity,i=this._getDestinationIndexForSlide(t,n),r=i-t,a=r<0?-1:r>0?1:0,s=this._getBestEffortSlide(n,r),o=s.duration,c=s.achievedDisplacement,l=s.velocityHalfLife,u=void 0,d=n,h=n<0?-1:n>0?1:0;if(h===a&&a){var p=O.b(function(t){return e._getSlideDistanceAtTime(1/0,t,e.MAX_HALF_LIFE)},Math.abs(r),0,5),f=this._getSlideDuration(p,this.MAX_HALF_LIFE);u=Math.abs(d)<p?f:o}else u=.2*Math.sqrt(Math.abs(r)/.2);var g=r-c,m=(g<0?-1:g>0?1:0)*h;return{initialVelocity:n,initialStraddleIndex:t,destinationStraddleIndex:i,velocityHalfLife:l,slideDuration:o,correctionDuration:u,totalDuration:Math.max(o,u),displacementCorrection:g,displacementCorrectionDirectionAgreement:m,startTime:performance.now()/1e3,timeoutHandle:void 0}},_startAnimatingSlideWithInfo:function(e){this._slideAnimationInfo&&this._stopAnimatingSlide(),this._slideAnimationInfo=e,e.timeoutHandle=y.a(this._handleSlideAnimationFrame)},_stopAnimatingSlide:function(){this._slideAnimationInfo&&(cancelAnimationFrame(this._slideAnimationInfo.timeoutHandle),this._slideAnimationInfo=void 0)},_handleSlideAnimationFrame:A.a(function(){var e=this._slideAnimationInfo;if(e){var t=e.startTime,n=e.slideDuration,i=e.totalDuration,r=e.correctionDuration,a=e.initialVelocity,s=e.velocityHalfLife,o=e.initialStraddleIndex,c=e.displacementCorrection,l=e.displacementCorrectionDirectionAgreement;cancelAnimationFrame(e.timeoutHandle),e.timeoutHandle=void 0;var u=performance.now()/1e3-t;u<=i?(this.currentStraddleIndex=o+this._getSlideDisplacementAtTime(u,a,s,n)+this._getDisplacementCorrectionAfterTime(u,r,c,l),this.state=b.b.Changed,e.timeoutHandle=y.a(this._handleSlideAnimationFrame)):(this.currentStraddleIndex=e.destinationStraddleIndex,this._stopAnimatingSlide(),this.state=b.b.Ended)}}),__superMap:{_$1Ma$pointerDown:"pointerDown",_$1WV$pointerMove:"pointerMove",_$1y3$pointerUp:"pointerUp",_$2qp$reset:"reset"}}),navigationSwipe:function(e){var t=e.state;if(t===b.b.Changed||t===b.b.Ended){var n=e.currentStraddleIndex;n<=1/0&&(this.fractionalMediaIndex=n)}this.propertyChanged("isNavigationSwipeGestureInProgress")},gestureRecognizerShouldRequireFailureOf:function(e,t){var n=arguments;return!(e!==this.navigationSwipeGR||!this.element.contains(t.view.element)||this===t.view)||(t!==this.navigationSwipeGR||!this.element.contains(e.view.element)||this===e.view)&&this.__s._$CDW$gestureRecognizerShouldRequireFailureOf.apply(this,n)},gestureRecognizerShouldBeRequiredToFailBy:function(e,t){var n=arguments;return(e!==this.navigationSwipeGR||!this.element.contains(t.view.element)||this===t.view)&&(!(t!==this.navigationSwipeGR||!this.element.contains(e.view.element)||this===e.view)||this.__s._$CT8$gestureRecognizerShouldBeRequiredToFailBy.apply(this,n))},gestureRecognizerShouldReceive:function(e,t){var n=arguments;return e!==this.navigationSwipeGR?this.__s._$CWN$gestureRecognizerShouldReceive.apply(this,n):!(I.a(t,"nativeEvent.targetTouches.length")>1)&&t.pointerType!==w.b.MOUSE&&this.__s._$CWN$gestureRecognizerShouldReceive.apply(this,n)},isNavigationSwipeGestureInProgress:r.b({readOnly:!0,get:function(){var e=this.getPath("navigationSwipeGR.state");return e===b.b.Began||e===b.b.Changed}}),__superMap:{_$Vd$init:"init",_$CDW$gestureRecognizerShouldRequireFailureOf:"gestureRecognizerShouldRequireFailureOf",_$CT8$gestureRecognizerShouldBeRequiredToFailBy:"gestureRecognizerShouldBeRequiredToFailBy",_$CWN$gestureRecognizerShouldReceive:"gestureRecognizerShouldReceive"}},T=n(409),M=n(1177),D=n(1169),L=n(121),N=n(80),P=n(122),R=n(40),x=n(1003),F=n(902),k=N.a.extend(a.a,{owner:r.b(),shouldCover:r.b(!1),width:r.b(0),height:r.b(0),priority:r.b(0),wantsDownsampledDerivatives:r.b(!1),medias:r.b({strong:!0}),didError:a.g(),_derivativeLoaders:x.a({source:"medias",desiredOutputType:Array,outputForInput:function(e){return e?V.create(this,e):null},didChange:D.a}),derivatives:x.a({source:"_derivativeLoaders",inputDidEnter:function(e,t){e&&(e.notifyDerivativeChange=t)},inputDidExit:function(e){e&&(e.notifyDerivativeChange=null)},outputForInput:function(e){return e&&e.derivative}}),hasErrorAtIndex:function(e){var t=this._derivativeLoaders[e];return t&&t.shouldShowError},staticMembers:{__QUALIFIED_CLASS_NAME__:"MultipleImageDerivativeLoader"}}),V=F.a.extend(P.a,{shouldCover:s.c("owner.shouldCover"),width:s.c("owner.width"),height:s.c("owner.height"),priority:s.c("owner.priority"),wantsDownsampledDerivatives:s.c("owner.wantsDownsampledDerivatives"),notifyDerivativeChange:null,_derivativeDidChange:a.e("derivative",function(){this.notifyDerivativeChange&&this.notifyDerivativeChange(this)}),_shouldShowErrorDidChange:a.e("shouldShowError",function(){this.owner&&this.owner.didError&&this.owner.didError()}),initFromPool:function(e,t){this.__s._$1Ej$initFromPool.call(this),this.owner=e,this.media=t},cleanup:function(){var e=arguments;this.owner=this.media=null,this.__s._$1Hn$cleanup.apply(this,e)},__superMap:{_$1Ej$initFromPool:"initFromPool",_$1Hn$cleanup:"cleanup"},staticMembers:{__QUALIFIED_CLASS_NAME__:"SingleImageDerivativeLoader"}}),j=n(1241),B=n(1242),U=n(883),W=n(1279);function G(e){return function(e,t,n,i,r){var a=Math.max(0,Math.min(1,r)),s=3*e,o=3*(n-e)-s,c=1-s-o,l=3*t,u=3*(i-t)-l,d=1-l-u,h=void 0,p=void 0,f=void 0,g=void 0,m=void 0,v=void 0;for(f=a,v=0;v<8;v++){if(g=((c*f+o)*f+s)*f-a,Math.abs(g)<1e-6)return((d*f+u)*f+l)*f;if(m=(3*c*f+2*o)*f+s,Math.abs(m)<1e-6)break;f-=g/m}if(p=1,(f=a)<(h=0))return((d*h+u)*h+l)*h;if(f>p)return((d*p+u)*p+l)*p;for(;h<p;){if(g=((c*f+o)*f+s)*f,Math.abs(g-a)<1e-6)return((d*f+u)*f+l)*f;a>g?h=f:p=f,f=.5*(p-h)+h}return((d*f+u)*f+l)*f}(.42,0,.58,1,e)}var H=n(155),$=U.a.extend(P.a,{delay:!0,canHaveInstance:r.b(!0),hypotheticalInstance:r.b({readOnly:!0,dependencies:[],get:function(){}}),instance:r.b({readOnly:!0,strong:!0,dependencies:["hasInstance","hypotheticalInstance"],get:Object.assign(function(){return this.hasInstance?this.hypotheticalInstance:null},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?i.internalGet(this,t[1+n]):null}}),didChange:D.a}),hasInstance:r.b({readOnly:!0,binding:"value"}),allowsDowngrades:!1,init:function(){var e=arguments;this.defersUpgrades=this.delay,this.__s._$xP$init.apply(this,e)},value:!1,targetValue:s.c("canHaveInstance"),cleanup:function(){var e=arguments;this.owner=null,this.__s._$12u$cleanup.apply(this,e)},initFromPool:function(){var e=arguments;this.reset(),this.__s._$18A$initFromPool.apply(this,e)},__superMap:{_$xP$init:"init",_$12u$cleanup:"cleanup",_$18A$initFromPool:"initFromPool"},staticMembers:{__QUALIFIED_CLASS_NAME__:"LazyDeferredWorker"}}),z=n(515),K=n(115),Q=n(1182),q=n(192),Y=n(65),Z=n(125),J=n(1184),X=n(1282),ee=n(1217),te=n(1247),ne=n(219),ie=T.a.extend(ne.a,{staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"durationString",attributes:{}}],name:"durationBadgeElement",classes:["pok-duration-badge",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isEmpty",truevalue:"cw-hidden",attributes:{}}]},__QUALIFIED_CLASS_NAME__:"DurationBadgeView"},durationString:r.b({readOnly:!0,dependencies:["presenterView.media.durationString"],get:Object.assign(function(){return this.getPath("presenterView.media.durationString")},{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])}})}),isEmpty:r.b({readOnly:!0,dependencies:["durationString"],get:Object.assign(function(){return!this.durationString},{__CW__getter:function(e,t,n,i){return!i.internalGet(this,t[0+n])}})})}),re=K.a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"VIEWOUTLET",tagname:"view",name:"centerView"},{type:"ELEMENT",tagname:"div",name:"typeBadgeElement",classes:["pok-type-badge",{type:"CLASSNAMEOUTLET",bindingtype:"DIRECTBINDING",name:"_specificTypeClass",attributes:{}}],styles:{display:{type:"STYLEOUTLET",bindingtype:"IFBINDING",name:"isTypeBadgeVisible",truevalue:"block",falsevalue:"none",attributes:{},unit:null,property:"display"},left:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"pinnedImageLeft",attributes:{},unit:"px",property:"left"},top:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"pinnedImageTop",attributes:{},unit:"px",property:"top"}}},{type:"ELEMENT",tagname:"div",name:"videoContainerElement",classes:["pok-video-container"]}],classes:["pok-video-presenter-view",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isShowingVideo",truevalue:"pok-showing-video",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isActuallyPresentingAudio",truevalue:"pok-showing-audio",attributes:{}}]}},__QUALIFIED_CLASS_NAME__:"VideoPresenterView"},bottomRightBadgeViewClasses:Q.a([ie]),wantsShowingVideo:r.b(!1),canZoom:!1,overrideZoom:!1,isShowingError:r.b({readOnly:!0,dependencies:["wantsShowingVideo","videoDerivative","videoDerivative.error"],get:Object.assign(function(){return!(!this.wantsShowingVideo||this.videoDerivative&&!this.getPath("videoDerivative.error"))},{__CW__getter:function(e,t,n,i){return!(!i.internalGet(this,t[0+n])||i.internalGet(this,t[1+n])&&!i.internalGetPath(this,t[2+n]))}})}),canBeShowingVideo:r.b({readOnly:!0,dependencies:["videoDerivative.isDisplayable","isShowingError"],get:Object.assign(function(){return this.getPath("videoDerivative.isDisplayable")&&!this.isShowingError},{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])&&!i.internalGet(this,t[1+n])}})}),isShowingVideo:r.b({readOnly:!0,dependencies:["wantsShowingVideo","canBeShowingVideo"],get:Object.assign(function(){return Boolean(this.wantsShowingVideo&&this.getPath("canBeShowingVideo"))},{__CW__getter:function(e,t,n,i){return Boolean(i.internalGet(this,t[0+n])&&i.internalGet(this,t[1+n]))}})}),isShowingSpinner:r.b({readOnly:!0,dependencies:["wantsShowingVideo","canBeShowingVideo","isShowingError"],get:Object.assign(function(){return this.wantsShowingVideo&&!this.canBeShowingVideo&&!this.isShowingError},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])&&!i.internalGet(this,t[1+n])&&!i.internalGet(this,t[2+n])}})}),isActuallyPresentingAudio:r.b({readOnly:!0,dependencies:["media.specificType"],get:Object.assign(function(){return this.getPath("media.specificType")===R.a.Type.AUDIO},{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])===R.a.Type.AUDIO}})}),unloadedGradientVerticalCenterOffsetFraction:r.b({readOnly:!0,dependencies:["isActuallyPresentingAudio"],get:Object.assign(function(){return this.isActuallyPresentingAudio?0:-1/3},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?0:-1/3}})}),unloadedGradientCenterColor:r.b({readOnly:!0,dependencies:["isActuallyPresentingAudio"],get:Object.assign(function(){return this.isActuallyPresentingAudio?"#555":"#f8f8f8"},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?"#555":"#f8f8f8"}})}),unloadedGradientOuterColor:r.b({readOnly:!0,dependencies:["isActuallyPresentingAudio"],get:Object.assign(function(){return this.isActuallyPresentingAudio?"#333":"#ddd"},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?"#333":"#ddd"}})}),centerView:r.b({readOnly:!0,dependencies:["isShowingSpinner","isShowingVideo","isShowingError","playButtonView","spinnerView","errorView"],get:Object.assign(function(){return this.isShowingSpinner?this.spinnerView:this.isShowingError?this.errorView:this.isShowingVideo?this.isActuallyPresentingAudio?this.bigSpeakerView:null:this.playButtonView},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?i.internalGet(this,t[4+n]):i.internalGet(this,t[2+n])?i.internalGet(this,t[5+n]):i.internalGet(this,t[1+n])?this.isActuallyPresentingAudio?this.bigSpeakerView:null:i.internalGet(this,t[3+n])}})}),playButtonView:r.b(o.b(i.a.extend({additionalClassNames:["pok-video-play-button"],action:"enterVideoModeAndPlay"}))),spinnerView:r.b(o.b(l.a.extend({additionalClassNames:["pok-video-spinner-view"],size:120,color:"white"}))),errorView:r.b(o.b(T.a.extend({additionalClassNames:["pok-video-error-view"],staticMembers:{template:{type:"ELEMENT",tagname:"canvas"}},renderSelf:a.f({inputs:["isAttached",q.a.sharedInstance.bindingFor("devicePixelRatio"),"parent.insetLeft","parent.insetTop","parent.insetWidth","parent.insetHeight","parent.imageLeft","parent.imageTop","parent.imageWidth","parent.imageHeight","parent.derivative"],callback:function(e,t,i,r,a,s,o,c,l,u){if(e&&a&&s&&l&&u){var d=X.b(n(487));if(d){var h=ee.d(d.naturalWidth,d.naturalHeight,Math.min(.9*(l-40),125),Math.min(.9*(u-40),125),C.h.getAutodisposingInstance()),p=C.h.getAutodisposingInstance();p.width=h.width+40,p.height=h.height+40;var f=20*t,g=p.width,m=p.height,v=i+a/2-g/2,_=r+s/2-m/2,b=Math.ceil(g*t),y=Math.ceil(m*t),I=this.element,w=I.getContext("2d");I.width!==b||I.height!==y?(I.width=b,I.height=y):w.clearRect(0,0,b,y);var S=this._workCanvas||(this._workCanvas=C.d.getInstance()),O=S.getContext("2d");S.width!==b||S.height!==y?(S.width=b,S.height=y):O.clearRect(0,0,b,y);var A=this.getPath("parent.media"),E=A&&A.getBestLoadedDerivative(0,"renderableImage");if(E){var T=Math.round(6*t),M=this._derivativeCanvas||(this._derivativeCanvas=C.d.getInstance()),D=M.getContext("2d"),L=Math.round(b/T),N=Math.round(y/T);M.width===L&&M.height===N||(M.width=L,M.height=N);var P=E.rectInElement;E.drawIntoContext(D,(v-o)/l*P.width,(_-c)/u*P.height,g/l*P.width,m/u*P.height,0,0,M.width,M.height),te.a(D,Math.ceil(10*t/T),2,void 0,!0),O.drawImage(M,0,0,b,y)}else O.fillStyle="#eee",O.fillRect(0,0,b,y);O.fillStyle="rgba(255, 255, 255, 0.6)",O.fillRect(0,0,b,y),O.globalCompositeOperation="destination-in",O.drawImage(d,f,f,b-2*f,y-2*f),O.globalCompositeOperation="source-over",w.shadowColor="rgba(0, 0, 0, 0.6)",w.shadowBlur=10*t,w.shadowOffsetY=4*t,w.drawImage(S,0,0),this.style.set("position","absolute").set("left",0).set("top",0).set("transform-origin","0 0").translateDevicePixels(v,_).scale(1/t)}else X.a(n(487)).then(H.a(this.renderSelf,this))}}}),dispose:function(){var e=arguments;return this._workCanvas&&(C.d.disposeInstance(this._workCanvas),this._workCanvas=null),this._derivativeCanvas&&(C.d.disposeInstance(this._derivativeCanvas),this._derivativeCanvas=null),this.__s._$3AT$dispose.apply(this,e)},__superMap:{_$3AT$dispose:"dispose"}}))),bigSpeakerView:r.b(o.b(T.a.extend({additionalClassNames:["pok-big-speaker-view"]}))),isTypeBadgeVisible:r.b({readOnly:!0,dependencies:["_specificTypeClass","bigSpeakerView","centerView"],get:Object.assign(function(){return Boolean(this._specificTypeClass&&this.bigSpeakerView!==this.centerView)},{__CW__getter:function(e,t,n,i){return Boolean(i.internalGet(this,t[0+n])&&i.internalGet(this,t[1+n])!==i.internalGet(this,t[2+n]))}})}),enterVideoModeAndPlay:function(){this.wantsShowingVideo=!0;var e=this.videoDerivative;e&&(e.loadSelfIfNeeded(),e.play())},togglePlayback:function(){if(this.isShowingSpinner||this.isShowingError)this.wantsShowingVideo=!1;else if(this.wantsShowingVideo){var e=this.videoDerivative;e&&(e.isPlaying?e.pause():e.play())}else this.enterVideoModeAndPlay()},videoDerivative:r.b({readOnly:!0,dependencies:["media","wantsShowingVideo"],get:Object.assign(function(){this._videoDerivative_isInGetter=!0;var e=this._videoDerivative_strongStoredValue,t=this.media,n=t?t.pk:void 0,i=this._videoDerivative_lastMediaPK!==(this._videoDerivative_lastMediaPK=n);return t&&!i||(e=this._videoDerivative_strongStoredValue=null),t&&this.wantsShowingVideo&&(e=this._videoDerivative_strongStoredValue=t.getBestDerivative(1,"renderableVideo")),this._videoDerivative_isInGetter=!1,e},{__CW__getter:function(e,t,n,i){this._videoDerivative_isInGetter=!0;var r=this._videoDerivative_strongStoredValue,a=i.internalGet(this,t[0+n]),s=a?a.pk:void 0,o=this._videoDerivative_lastMediaPK!==(this._videoDerivative_lastMediaPK=s);return a&&!o||(r=this._videoDerivative_strongStoredValue=null),a&&i.internalGet(this,t[1+n])&&(r=this._videoDerivative_strongStoredValue=a.getBestDerivative(1,"renderableVideo")),this._videoDerivative_isInGetter=!1,r}})}),_videoDerivative_strongStoredValue:_.c({get:function(){return this._videoDerivative_strongStoredValue_value},set:function(e){var t=this._videoDerivative_strongStoredValue_value;t!==e&&(t&&t.release(this,"retaining videoDerivative"),this._videoDerivative_strongStoredValue_value=e,e&&e.retain(this,"retaining videoDerivative"),this._videoDerivative_isInGetter||this.propertyChanged("videoDerivative"))}}),_maintainVideoAttachment:a.f("canBeShowingVideo","videoDerivative",function(e,t){var n=t&&t.element,i=this.videoContainerElement.firstChild;!n&&e&&Y.b("VideoPresenterView is supposed to be able to be showing a video it doesn't have."),n===i&&e||i&&i.parentNode&&i.parentNode.removeChild(i),e&&n.parentNode!==this.videoContainerElement&&(n.parentNode&&n.parentNode.removeChild(n),this.videoContainerElement.appendChild(n))}),_resetWhenHides:a.f("isShowingInParent",function(e){e||(this.wantsShowingVideo=!1,this.videoDerivative&&this.videoDerivative.stop())}),_resetWhenFinishes:a.f("videoDerivative.didFinishPlaying",function(e){e&&(this._isResetting||(this._isResetting=!0,this.wantsShowingVideo=!1,this.videoDerivative.currentTime=0,this._isResetting=!1))}),_layOutCenterView:a.f("insetLeft","insetTop","insetWidth","insetHeight","centerView","centerView.isAttached","errorView",function(e,t,n,i,r,a,s){if(r&&a&&r!==s){var o=r._vpv_centerViewWidth||(r._vpv_centerViewWidth=r.element.offsetWidth),c=r._vpv_centerViewHeight||(r._vpv_centerViewHeight=r.element.offsetHeight);o&&c&&r.style.set("left",e+n/2-o/2).set("top",t+i/2-c/2)}}),_specificTypeClass:r.b({readOnly:!0,dependencies:["media.specificType","primaryInteractionMode"],get:Object.assign(function(){var e=this.getPath("media.specificType");return e!==R.a.Type.VIDEO&&(this.primaryInteractionMode!==m.a.TOUCH||e!==R.a.Type.SLOWMO&&e!==R.a.Type.TIMELAPSE)||(e=void 0),e?e.value:""},{__CW__getter:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return r!==R.a.Type.VIDEO&&(i.internalGet(this,t[1+n])!==m.a.TOUCH||r!==R.a.Type.SLOWMO&&r!==R.a.Type.TIMELAPSE)||(r=void 0),r?r.value:""}})}),_layOutVideoContainer:a.f({inputs:["imageLeft","imageTop","imageWidth","imageHeight","videoContainerElement","isAttached","isShowingVideo","isActuallyPresentingAudio"],callback:function(e,t,n,i,r,a,s,o){if(a&&r){var c=Z.a(r),l=this.isActuallyPresentingAudio?2:0;c.set("position","absolute").set("left",e+l).set("top",t+l).set("width",n-2*l).set("height",i-2*l).set("transition","opacity 200ms").set("opacity",s?1:0).set("background",o?"":"rgba(0, 0, 0, 0.5)"),s?(c.set("visibility","visible"),this._unscheduleVideoContainerHide()):this._scheduleVideoContainerHide()}}}),_scheduleVideoContainerHide:function(){this._videoContainerHideTimeout||(this._videoContainerHideTimeout=J.a(this._hideVideoContainer,200))},_unscheduleVideoContainerHide:function(){clearTimeout(this._videoContainerHideTimeout),this._videoContainerHideTimeout=null},_hideVideoContainer:A.a(function(){this._unscheduleVideoContainerHide(),this.videoContainerElement&&Z.a(this.videoContainerElement).set("visibility","hidden")}),cleanup:function(){var e=arguments;this.wantsShowingVideo=!1,this._videoDerivative_strongStoredValue=null,this._unscheduleVideoContainerHide(),this.__s._$6bS$cleanup.apply(this,e)},__superMap:{_$6bS$cleanup:"cleanup"}}),ae=T.a.extend(j.a,B.a).extend({owner:r.b(),staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"MULTIVIEWOUTLET",tagname:"views",name:"attachedPresenterViewsOutlet"}],classes:["pok-oneup-view"]},__QUALIFIED_CLASS_NAME__:"BasePhotosOneUpView"},primaryInteractionMode:r.b(),collection:r.b(),prerenderDistance:r.b(3),preloadDistance:r.b(12),isPreloadEnabled:r.b(!0),isFocusable:!0,feedbackService:r.b(),customPresenterViewModifications:r.b(),shouldHideMostProminentDisplayOfMediaWithPK:r.b(),desiredMedia:r.b({strong:!0}),fractionalMediaIndex:r.b(),targetMediaIndex:r.b({readOnly:!0,dependencies:["fractionalMediaIndex"],get:function(){var e=this.fractionalMediaIndex;return isNaN(e)?void 0:Math.round(e)}}),alternateMediaIndex:r.b({readOnly:!0,dependencies:["fractionalMediaIndex","targetMediaIndex"],get:function(){var e=this.fractionalMediaIndex,t=this.targetMediaIndex;return e<t?t-1:e>t?t+1:void 0}}),targetMedia:r.b({strong:!0,dependencies:["collection","targetMediaIndex"],get:function(){var e=this.collection,t=this.targetMediaIndex;return e&&t>=0&&t<=e.length?e.objectAt(t):void 0},writeDependencies:["fractionalMediaIndex"],set:Object.assign(function(e){var t=this.collection,n=t&&e?t.indexOf(e):-1;this.fractionalMediaIndex=-1!==n?n:void 0},{__CW__setter:function(e,t,n,i,r){var a=this.collection,s=a&&e?a.indexOf(e):-1;n[0+i]=-1!==s?s:void 0}}),writeDependencySetPathMap:["false"]}),alternateMedia:r.b({readOnly:!0,strong:!0,dependencies:["collection","alternateMediaIndex"],get:function(){var e=this.collection,t=this.alternateMediaIndex;return e&&t>=0&&t<=e.length?e.objectAt(t):void 0}}),_maintainTargetMediaByDesiredMediaAndCollectionChanges:a.f("desiredMedia","collection","collection.contentsDidChangeUntracked","collection.everythingChanged",function(e,t){if(t&&t.length&&e)if(-1===t.indexOf(e)){var n=Math.max(0,Math.min(this.fractionalMediaIndex,t.length-1));n!==this.fractionalMediaIndex?this.fractionalMediaIndex=n:this.propertyChanged("fractionalMediaIndex")}else this.targetMedia!==e&&(this.targetMedia=e);else this.fractionalMediaIndex=void 0}),_maintainDesiredMediaByTargetMedia:a.f("targetMedia","isNavigationSwipeGestureInProgress",function(e,t){if(e&&(this.desiredMedia!==e&&(this.desiredMedia=e),!t)){var n=this.feedbackService;n&&n.report("oneUpViewed")}}),straddleDisplacement:r.b({readOnly:!0,dependencies:["fractionalMediaIndex","targetMediaIndex"],get:Object.assign(function(){var e=this.fractionalMediaIndex;return void 0!==e?e-this.targetMediaIndex:void 0},{__CW__getter:function(e,t,n,i){var r=this.fractionalMediaIndex;return void 0!==r?r-i.internalGet(this,t[1+n]):void 0}})}),isStraddlingIndices:r.b({readOnly:!0,dependencies:["straddleDisplacement"],get:Object.assign(function(){return Boolean(this.straddleDisplacement)},{__CW__getter:function(e,t,n,i){return Boolean(i.internalGet(this,t[0+n]))}})}),thumbExpansionInfos:r.b({readOnly:!0,dependencies:["fractionalMediaIndex","transition.displayProgress","transition.sourceIndex","transition.targetIndex"],get:Object.assign(function(){var e=this._thumbExpansionInfos_lastRet;if(e){for(var t,n=0;t=e[n];n++)C.h.autodisposeInstance(t);C.c.autodisposeInstance(e)}var i=this.fractionalMediaIndex,r=this.getPath("transition.displayProgress"),a=this.getPath("transition.sourceIndex"),s=this.getPath("transition.targetIndex"),o=this._thumbExpansionInfos_lastRet=C.c.getInstance();if(isNaN(i))return o;if(i!==Math.round(i)||void 0===r||void 0===a||void 0===s){var c=Math.floor(i),l=Math.ceil(i),u=C.h.getInstanceWithProperties("index",c,"amount",1-i%1),d=C.h.getInstanceWithProperties("index",l,"amount",i%1);u.amount?o.push(u):C.h.disposeInstance(u),d.amount?o.push(d):C.h.disposeInstance(d)}else{var h=C.h.getInstanceWithProperties("index",a,"amount",1-r),p=C.h.getInstanceWithProperties("index",s,"amount",r);h.amount?o.push(h):C.h.disposeInstance(h),p.amount?o.push(p):C.h.disposeInstance(p)}return o},{__CW__getter:function(e,t,n,i){var r=this._thumbExpansionInfos_lastRet;if(r){for(var a,s=0;a=r[s];s++)C.h.autodisposeInstance(a);C.c.autodisposeInstance(r)}var o=this.fractionalMediaIndex,c=i.internalGetPath(this,t[1+n]),l=i.internalGetPath(this,t[2+n]),u=i.internalGetPath(this,t[3+n]),d=this._thumbExpansionInfos_lastRet=C.c.getInstance();if(isNaN(o))return d;if(o!==Math.round(o)||void 0===c||void 0===l||void 0===u){var h=Math.floor(o),p=Math.ceil(o),f=C.h.getInstanceWithProperties("index",h,"amount",1-o%1),g=C.h.getInstanceWithProperties("index",p,"amount",o%1);f.amount?d.push(f):C.h.disposeInstance(f),g.amount?d.push(g):C.h.disposeInstance(g)}else{var m=C.h.getInstanceWithProperties("index",l,"amount",1-c),v=C.h.getInstanceWithProperties("index",u,"amount",c);m.amount?d.push(m):C.h.disposeInstance(m),v.amount?d.push(v):C.h.disposeInstance(v)}return d}})}),apparentFractionalMediaIndex:r.b({readOnly:!0,dependencies:["fractionalMediaIndex","thumbExpansionInfos"],get:function(){var e=this.thumbExpansionInfos,t=this.fractionalMediaIndex;if(!e||!e.length)return t;for(var n,i=0,r=0,a=0;n=e[a];a++)r+=n.amount,i+=n.amount*n.index;return i/r}}),straddleGapFactor:r.b(.022),straddleGapPixels:r.b(22),straddleInterval:r.b({readOnly:!0,dependencies:["insetWidth","straddleGapFactor","straddleGapPixels"],get:Object.assign(function(){return Math.ceil(this.insetWidth*(1+this.straddleGapFactor)+this.straddleGapPixels)},{__CW__getter:function(e,t,n,i){return Math.ceil(i.internalGet(this,t[0+n])*(1+i.internalGet(this,t[1+n]))+i.internalGet(this,t[2+n]))}})}),targetMediaView:r.b({readOnly:!0,strong:!0,dependencies:["targetMedia"],get:Object.assign(function(){return this._viewForMedia(this.targetMedia)},{__CW__getter:function(e,t,n,i){return this._viewForMedia(i.internalGet(this,t[0+n]))}})}),desiredMediaView:r.b(s.c("targetMediaView")),alternateMediaView:r.b({readOnly:!0,strong:!0,dependencies:["alternateMedia"],get:Object.assign(function(){return this._viewForMedia(this.alternateMedia)},{__CW__getter:function(e,t,n,i){return this._viewForMedia(i.internalGet(this,t[0+n]))}})}),transition:r.b({strong:!0,readOnly:!0,dependencies:["alternateMediaView","targetMediaView"],get:Object.assign(function(){var e,t=this._transition_lastRet,n=this._transition_lastAMV,i=this._transition_lastTMV,r=this.alternateMediaView,a=this.targetMediaView;return e=n||r||!i||!a?void 0:t&&t.targetView===a&&t.progress<1?t:i!==a?this.getTransitionFromViewToView(i,a):void 0,this._transition_lastRet=e,this._transition_lastAMV=r,this._transition_lastTMV=a,e},{__CW__getter:function(e,t,n,i){var r,a=this._transition_lastRet,s=this._transition_lastAMV,o=this._transition_lastTMV,c=i.internalGet(this,t[0+n]),l=i.internalGet(this,t[1+n]);return r=s||c||!o||!l?void 0:a&&a.targetView===l&&a.progress<1?a:o!==l?this.getTransitionFromViewToView(o,l):void 0,this._transition_lastRet=r,this._transition_lastAMV=c,this._transition_lastTMV=l,r}}),didChange:function(e){var t=this._transition_lastObservedVal;if(t!==e){if(t&&1!==t.progress&&t.finish(),e){var n=t?t.speedMultiplier:1,i=this._transition_lastStartTime||void 0,r=(this._transition_lastStartTime=performance.now())-i;e.speedMultiplier*=r<e.duration?n+.25:n,e.start()}this._transition_lastObservedVal=e}}}),_transition_lastRet:_.c({strong:!0}),_transition_lastAMV:_.c({strong:!0}),_transition_lastTMV:_.c({strong:!0}),_transition_lastObservedVal:_.c({strong:!0}),shouldAvoidTransitions:r.b(),_shouldAvoidTransitions:r.b({dependencies:["shouldAvoidTransitions"],get:Object.assign(function(e){return Boolean(e||this.shouldAvoidTransitions)},{__CW__getter:function(e,t,n,i){return Boolean(e||i.internalGet(this,t[0+n]))}}),writeDependencies:[],set:d.a}),shouldStickToUnobtrusiveTransitions:r.b(),_shouldStickToUnobtrusiveTransitions:r.b({dependencies:["shouldStickToUnobtrusiveTransitions"],get:Object.assign(function(e){return Boolean(e||this.shouldStickToUnobtrusiveTransitions)},{__CW__getter:function(e,t,n,i){return Boolean(e||i.internalGet(this,t[0+n]))}}),writeDependencies:[],set:d.a}),isTransitioning:r.b({readOnly:!0,dependencies:["transition"],get:Object.assign(function(){return Boolean(this.transition)},{__CW__getter:function(e,t,n,i){return Boolean(i.internalGet(this,t[0+n]))}})}),visibleAttachedChildPresenterViews:r.b({readOnly:!0,dependencies:["targetMediaView","alternateMediaView","transition.sourceView","transition.targetView"],get:Object.assign(function(){var e=this._vacpv_lastRet;return e&&C.c.autodisposeInstance(e),this._vacpv_lastRet=C.c.getInstanceFromFilter(C.c.getAutodisposingInstanceFromUniquesOfParams(this.targetMediaView,this.alternateMediaView,this.getPath("transition.sourceView"),this.getPath("transition.targetView")),M.a)},{__CW__getter:function(e,t,n,i){var r=this._vacpv_lastRet;return r&&C.c.autodisposeInstance(r),this._vacpv_lastRet=C.c.getInstanceFromFilter(C.c.getAutodisposingInstanceFromUniquesOfParams(i.internalGet(this,t[0+n]),i.internalGet(this,t[1+n]),i.internalGetPath(this,t[2+n]),i.internalGetPath(this,t[3+n])),M.a)}})}),attachedChildPresenterViews:r.b({readOnly:!0,dependencies:["visibleAttachedChildPresenterViews","proactivelyPrerenderedViews"],get:Object.assign(function(){var e=this._acpv_lastRet;e&&C.c.autodisposeInstance(e);var t=C.c.getAutodisposingInstanceFromSlice(this.visibleAttachedChildPresenterViews);t.push.apply(t,this.proactivelyPrerenderedViews);var n=C.c.getAutodisposingInstanceFromUniquesOfArray(t),i=C.c.getInstanceFromFilter(n,M.a);return this._acpv_lastRet=i},{__CW__getter:function(e,t,n,i){var r=this._acpv_lastRet;r&&C.c.autodisposeInstance(r);var a=C.c.getAutodisposingInstanceFromSlice(i.internalGet(this,t[0+n]));a.push.apply(a,i.internalGet(this,t[1+n]));var s=C.c.getAutodisposingInstanceFromUniquesOfArray(a),o=C.c.getInstanceFromFilter(s,M.a);return this._acpv_lastRet=o}})}),_attachAndDetachChildPresenterViews:a.f("attachedChildPresenterViews","attachedPresenterViewsOutlet",function(e,t){if(e&&t){for(var n=0;n<t.length;n++){var i=t.objectAt(n);e.includes(i)||(t.remove(i),n--)}for(var r,a=0;r=e[a];a++)t.includes(r)||t.add(r)}}),_handleTransitionCompletion:a.e("transition.didFinish",function(e){e&&this.propertyChanged("transition")}),getTransitionFromViewToView:function(e,t){var n=this.collection;if(n&&e&&t&&e!==t&&!this._shouldAvoidTransitions){var i=n.indexOf(e.media),r=n.indexOf(t.media);if(-1===i&&(i=void 0),-1===r&&(r=void 0),this._shouldStickToUnobtrusiveTransitions)return le.create(e,t,i,r);var a=(i>=0&&r===i+1?1:r>=0&&r===i-1?-1:0)*Math.max(5,.02*this.viewportWidth);return ue.create(e,t,i,r,a)}},zoomLevel:r.b(s.c("targetMediaView.zoomLevel")),unzoomedZoomLevel:r.b({readOnly:!0,binding:s.c("targetMediaView.unzoomedZoomLevel")}),minZoomLevel:r.b({readOnly:!0,binding:s.c("targetMediaView.minZoomLevel")}),maxZoomLevel:r.b({readOnly:!0,binding:s.c("targetMediaView.maxZoomLevel")}),zoomSteps:r.b({readOnly:!0,binding:s.c("targetMediaView.zoomSteps")}),isZoomed:r.b({readOnly:!0,binding:s.c("targetMediaView.isZoomed")}),canZoom:r.b({readOnly:!0,binding:s.c("targetMediaView.canZoom")}),cannotZoom:r.b({readOnly:!0,dependencies:["canZoom"],get:Object.assign(function(){return!this.canZoom},{__CW__getter:function(e,t,n,i){return!i.internalGet(this,t[0+n])}})}),zoomInOneStepIfPossible:function(){if(this.isSteady){var e=this.targetMediaView;e&&e.zoomInOneStep instanceof Function&&e.zoomInOneStep()}},zoomOutOneStepIfPossible:function(){if(this.isSteady){var e=this.targetMediaView;e&&e.zoomOutOneStep instanceof Function&&e.zoomOutOneStep()}},zoomTo1IfPossible:function(){if(this.isSteady){var e=this.targetMediaView;e&&e.zoomTo1 instanceof Function&&e.zoomTo1()}},zoomToFitIfPossible:function(){if(this.isSteady){var e=this.targetMediaView;e&&e.zoomToFit instanceof Function&&e.zoomToFit()}},toggleZoomIfPossible:function(){if(this.isSteady){var e=this.targetMediaView;e&&e.toggleZoom instanceof Function&&e.toggleZoom()}},shouldUIBeClear:r.b(s.c("targetMediaView.wantsUIControl")),shouldAllUIBeClear:r.b(s.c("targetMediaView.wantsFullUIControl")),isSteady:r.b(s.c("_isSteady_ratchet.value")),_isSteady_ratchet:r.b({strong:!0,defaultValue:o.b(U.a.extend({defersUpgrades:200,value:!1,targetValue:r.b({readOnly:!0,dependencies:["owner.isTransitioning","owner._isNotingChildPresenterViewsUpdate"],get:Object.assign(function(){return!this.getPath("owner.isTransitioning")&&!this.getPath("owner._isNotingChildPresenterViewsUpdate")},{__CW__getter:function(e,t,n,i){return!i.internalGetPath(this,t[0+n])&&!i.internalGetPath(this,t[1+n])}})})}))}),isBackgroundablySteady:r.b(s.c("_isBackgroundablySteady_ratchet.value")),_isBackgroundablySteady_ratchet:r.b({strong:!0,defaultValue:o.b(U.a.extend({defersUpgrades:200,value:!1,targetValue:r.b({readOnly:!0,dependencies:["owner.isSteady","owner.thumbnailsStripView.isScrollActivityInProgress","owner.isNavigationSwipeGestureInProgress"],get:Object.assign(function(){return this.getPath("owner.isSteady")&&!this.getPath("owner.thumbnailsStripView.isScrollActivityInProgress")&&!this.getPath("owner.isNavigationSwipeGestureInProgress")},{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])&&!i.internalGetPath(this,t[1+n])&&!i.internalGetPath(this,t[2+n])}})}),_goFalseOnViewportSizeChange:a.f("owner.insetWidth","owner.insetHeight",function(){this.reset()})}))}),_deferSteadinessRatchets:a.f("straddleDisplacement",function(){this._isNotingChildPresenterViewsUpdate=!0,this._isNotingChildPresenterViewsUpdate=!1}),_isNotingChildPresenterViewsUpdate:r.b(!1),shouldEnsureOwnMediaRanges:r.b(!0),ensureMediaRange:function(e,t){var n=this.collection;n&&n.ensureRange&&n.ensureRange(e,t)},_ensureRangeIfPossible:B.b(function(){if(!this.isDisposed&&!this.isDisposing&&this.shouldEnsureOwnMediaRanges){var e=this.collection;if(e){var t=this.targetMediaIndex,n=t-30,i=t+30;n=30*Math.floor(n/30),i=30*Math.ceil(i/30),n=Math.max(0,n),(i=Math.min(e.length-1,i))-n&&this.ensureMediaRange(n,i)}}},500,!0),_loadMediaMetadata:a.f("targetMediaIndex","isPreloadEnabled",function(e,t){t&&this._ensureRangeIfPossible()}),mediasWithLazilyPrerenderedViews:r.b({readOnly:!0,dependencies:["targetMedia","targetMediaIndex","collection","prerenderDistance"],get:Object.assign(function(){var e=this._mediasWithLazilyPrerenderedViews_lastRet;e&&(C.c.autodisposeInstance(e),e=this._mediasWithLazilyPrerenderedViews_lastRet=void 0);for(var t=C.c.getInstance(),n=this.targetMediaIndex,i=this.collection,r=this.prerenderDistance,a=this.targetMedia,s=!1,o=-r;o<=r;o++){var c=i&&i.objectAt(n+o);c&&t.push(c),c===a&&(s=!0)}return a&&!s&&t.push(a),this._mediasWithLazilyPrerenderedViews_lastRet=t},{__CW__getter:function(e,t,n,i){var r=this._mediasWithLazilyPrerenderedViews_lastRet;r&&(C.c.autodisposeInstance(r),r=this._mediasWithLazilyPrerenderedViews_lastRet=void 0);for(var a=C.c.getInstance(),s=i.internalGet(this,t[1+n]),o=i.internalGet(this,t[2+n]),c=i.internalGet(this,t[3+n]),l=i.internalGet(this,t[0+n]),u=!1,d=-c;d<=c;d++){var h=o&&o.objectAt(s+d);h&&a.push(h),h===l&&(u=!0)}return l&&!u&&a.push(l),this._mediasWithLazilyPrerenderedViews_lastRet=a}})}),lazyPrerenderedViewInstantiators:x.a({source:"mediasWithLazilyPrerenderedViews",outputForInput:function(e){var t=de.create();return h.a.pause(),t.owner=this,t.media=e,h.a.resume(),t},didChange:D.a}),mediaIndicesWithProactivelyPrerenderedViews:r.b(o.b(Array)),proactivelyPrerenderedViews:r.b({readOnly:!0,dependencies:["mediaIndicesWithProactivelyPrerenderedViews","collection.contentsDidChangeUntracked","collection.everythingChanged"],get:Object.assign(function(){var e=C.c.getInstanceFromFilter(C.c.getAutodisposingInstanceFromMap(this.mediaIndicesWithProactivelyPrerenderedViews,this._viewForMediaIndex,this),M.a);e.forEach(pe);var t=this._mwppv_lastRet;return t&&(t.forEach(he),C.c.autodisposeInstance(t)),this._mwppv_lastRet=e},{__CW__getter:function(e,t,n,i){var r=C.c.getInstanceFromFilter(C.c.getAutodisposingInstanceFromMap(i.internalGet(this,t[0+n]),this._viewForMediaIndex,this),M.a);r.forEach(pe);var a=this._mwppv_lastRet;return a&&(a.forEach(he),C.c.autodisposeInstance(a)),this._mwppv_lastRet=r}})}),derivativePreloader:r.b({strong:!0,defaultValue:o.b(k.extend({medias:r.b({readOnly:!0,dependencies:["owner.isPreloadEnabled","owner.targetMediaIndex","owner.collection","owner.collection.contentsDidChangeUntracked","owner.collection.everythingChanged","owner.preloadDistance"],get:Object.assign(function(){var e=this._mediasWithDerivatives_lastRet;if(e){for(var t=0,n=e.length;t<n;t++)e[t].release(this,"P2.OneUpView#derivativePreloader.medias");C.c.autodisposeInstance(e),e=this._mediasWithDerivatives_lastRet=void 0}if(this.getPath("owner.isPreloadEnabled")){var i=this.getPath("owner.collection");if(i&&!i.isDisposed){for(var r=C.c.getInstance(),a=this.getPath("owner.targetMediaIndex"),s=this.getPath("owner.preloadDistance"),o=-s;o<=s;o++){var c=i.objectAt(a+o);c&&(c.retain(this,"P2.OneUpView#derivativePreloader.medias"),r.push(c))}return this._mediasWithDerivatives_lastRet=r}}},{__CW__getter:function(e,t,n,i){var r=this._mediasWithDerivatives_lastRet;if(r){for(var a=0,s=r.length;a<s;a++)r[a].release(this,"P2.OneUpView#derivativePreloader.medias");C.c.autodisposeInstance(r),r=this._mediasWithDerivatives_lastRet=void 0}if(i.internalGetPath(this,t[0+n])){var o=i.internalGetPath(this,t[2+n]);if(o&&!o.isDisposed){for(var c=C.c.getInstance(),l=i.internalGetPath(this,t[1+n]),u=i.internalGetPath(this,t[5+n]),d=-u;d<=u;d++){var h=o.objectAt(l+d);h&&(h.retain(this,"P2.OneUpView#derivativePreloader.medias"),c.push(h))}return this._mediasWithDerivatives_lastRet=c}}}})}),width:200,height:200,priority:125e3}))}),viewClassForMedia:function(e){var t=this.customPresenterViewModifications,n=this._unmodifiedViewClassForMedia(e);if(!n||!t)return n;var i=this._viewClassesByBasicClass,r=i.get(n);return r||(r=n.extend(t),i.set(n,r),r)},_viewClassesByBasicClass:o.b(Map),_unmodifiedViewClassForMedia:function(e){var t=e&&e.genericType,i=e&&e.specificType;return t&&i?i===R.a.Type.BURST&&this.primaryInteractionMode!==m.a.TOUCH?n(1131).BurstPresenterView:i===R.a.Type.LIVE_PHOTO?u.a.application.isLPKLoaded?z.a:K.a:t===R.a.Type.IMAGE?K.a:t===R.a.Type.VIDEO?re:null:null},_viewStoreForMedia:function(e){var t=this.viewClassForMedia(e);if(t){var n=this._viewStores||(this._viewStores={}),i=L.a(t);return n[i]||(n[i]=W.a.create({computeStoreKey:function(e){return e&&e.pk},itemClass:t.extend(W.a.Support,{owner:r.b(this),isCacheableInStore:!1,translationXForStraddle:r.b({readOnly:!0,dependencies:["parent.straddleDisplacement","parent.straddleInterval","parent.isTransitioning","parent.targetMediaView","parent.alternateMediaView"],get:Object.assign(function(){if(!this.getPath("parent.isTransitioning")){var e=this.getPath("parent.straddleDisplacement"),t=this.getPath("parent.straddleInterval");if(!isNaN(e)&&!isNaN(t))return this.getPath("parent.targetMediaView")===this?t*-e:this.getPath("parent.alternateMediaView")===this?t*((e>0?1:-1)-e):void 0}},{__CW__getter:function(e,t,n,i){if(!i.internalGetPath(this,t[2+n])){var r=i.internalGetPath(this,t[0+n]),a=i.internalGetPath(this,t[1+n]);if(!isNaN(r)&&!isNaN(a))return i.internalGetPath(this,t[3+n])===this?a*-r:i.internalGetPath(this,t[4+n])===this?a*((r>0?1:-1)-r):void 0}}})}),translationXForTransition:r.b(),translationX:r.b({readOnly:!0,dependencies:["translationXForStraddle","translationXForTransition","isShowingInParent"],get:Object.assign(function(){if(!this.isShowingInParent)return-1e4;var e=this.translationXForStraddle,t=this.translationXForTransition;return(e||0)+(t||0)},{__CW__getter:function(e,t,n,i){if(!i.internalGet(this,t[2+n]))return-1e4;var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]);return(r||0)+(a||0)}})}),isParallaxEffectEnabled:r.b({readOnly:!0,dependencies:["parent.targetMediaView","parent.alternateMediaView","parent.isNavigationSwipeGestureInProgress"],get:Object.assign(function(){return this.getPath("parent.isNavigationSwipeGestureInProgress")&&(this===this.getPath("parent.targetMediaView")||this===this.getPath("parent.alternateMediaView"))},{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[2+n])&&(this===i.internalGetPath(this,t[0+n])||this===i.internalGetPath(this,t[1+n]))}})}),isAloneInParent:r.b({readOnly:!0,dependencies:["isTargetInParent","parent.alternateMediaView","parent.isTransitioning"],get:Object.assign(function(){return this.getPath("isTargetInParent")&&!this.getPath("parent.isTransitioning")&&!this.getPath("parent.alternateMediaView")},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])&&!i.internalGetPath(this,t[2+n])&&!i.internalGetPath(this,t[1+n])}})}),isTargetInParent:r.b({readOnly:!0,dependencies:["parent.targetMediaView"],get:Object.assign(function(){return this===this.getPath("parent.targetMediaView")},{__CW__getter:function(e,t,n,i){return this===i.internalGetPath(this,t[0+n])}})}),isShowingInParent:r.b({readOnly:!0,dependencies:["parent.visibleAttachedChildPresenterViews"],get:Object.assign(function(){var e=this.getPath("parent.visibleAttachedChildPresenterViews");return e&&e.includes(this)},{__CW__getter:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return r&&r.includes(this)}})}),isSteadyInParent:s.c("owner.isSteady"),isBackgroundablySteadyInParent:s.c("owner.isBackgroundablySteady"),canHoldDerivatives:s.c("owner.isAttached"),shouldHideMostProminentDisplayOfMediaWithPK:s.c("parent.shouldHideMostProminentDisplayOfMediaWithPK"),baseInsetsProvider:s.c("owner"),viewportWidth:s.c("owner.viewportWidth"),viewportHeight:s.c("owner.viewportHeight"),primaryInteractionMode:s.c("owner.primaryInteractionMode")})}))}},_viewForMedia:function(e){var t=this._viewStoreForMedia(e);if(t)return t.getItem(e).retain(this,"retain/autorelease in _viewForMedia").autorelease(this,"retain/autorelease in _viewForMedia")},_viewForMediaIndex:function(e){if(e>=0){var t=this.collection;if(t&&e<t.length)return this._viewForMedia(t.objectAt(e))}},goToNext:function(){this.jumpBy(1)},goToPrevious:function(){this.jumpBy(-1)},goToNextUnobtrusively:function(){this._shouldStickToUnobtrusiveTransitions=!0,this.goToNext(),this._shouldStickToUnobtrusiveTransitions=!1},goToPreviousUnobtrusively:function(){this._shouldStickToUnobtrusiveTransitions=!0,this.goToPrevious(),this._shouldStickToUnobtrusiveTransitions=!1},jumpBy:function(e){this.getPath("collection.length"),this.fractionalMediaIndex=Math.max(0,Math.min(this.getPath("collection.length")-1,this.targetMediaIndex+e)),this.sendEvent("oneUpViewDidNavigateInternally")},canGoToNext:r.b({readOnly:!0,dependencies:["targetMediaIndex","collection.length"],get:Object.assign(function(){return this.targetMediaIndex<this.getPath("collection.length")-1},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])<i.internalGetPath(this,t[1+n])-1}})}),canGoToPrevious:r.b({readOnly:!0,dependencies:["targetMediaIndex"],get:Object.assign(function(){return this.targetMediaIndex>0},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])>0}})})}),se=ae.ViewTransition=N.a.extend(a.a,P.a,{sourceView:r.b({strong:!0,didChange:D.a}),sourceIndex:r.b(),targetView:r.b({strong:!0,didChange:D.a}),targetIndex:r.b(),didFinish:a.g(),start:function(){},finish:function(){this.didFinish()},initFromPool:function(e,t,n,i){this.__s._$Hey$initFromPool.call(this),h.a.pause(),this.sourceView=e,this.targetView=t,this.sourceIndex=n,this.targetIndex=i,h.a.resume()},cleanup:function(){var e=arguments;h.a.pause(),this.sourceView=void 0,this.targetView=void 0,this.sourceIndex=void 0,this.targetIndex=void 0,h.a.resume(),this.__s._$HmM$cleanup.apply(this,e)},__superMap:{_$Hey$initFromPool:"initFromPool",_$HmM$cleanup:"cleanup"}}),oe=ae.AnimatedTransition=se.extend({duration:250,speedMultiplier:1,progress:r.b({defaultValue:0,get:d.a,set:function(e){return Math.max(0,Math.min(1,e))}}),displayProgress:r.b({readOnly:!0,dependencies:["progress"],get:Object.assign(function(){return G(this.progress)},{__CW__getter:function(e,t,n,i){return G(i.internalGet(this,t[0+n]))}})}),start:function(){var e=arguments;this.__s._$Huz$start.apply(this,e),this._nextFrame()},finish:function(){var e=arguments;this._unscheduleNextFrame(),this.progress=1,this.update(this.displayProgress),this.cleanUpTransitionAfterFinish(),this.sourceView&&this.cleanUpView(this.sourceView),this.targetView&&this.cleanUpView(this.targetView),this.__s._$I2W$finish.apply(this,e)},_nextFrame:function(e){if(e){var t=e.rafID;if(C.h.disposeInstance(e),t!==this._scheduledFrame)return}this._unscheduleNextFrame();var n=performance.now(),i=n-(this._lastTimestamp||n)||0;this._lastTimestamp=n,this.progress+=this.speedMultiplier*i/this.duration,this.update(this.displayProgress),this.progress<1?this._scheduleNextFrame():this.finish()},_scheduleNextFrame:function(){if(!this._scheduledFrame){var e=C.h.getInstance();this._scheduledFrame=e.rafID=y.a(H.a(this._nextFrame,this,e))}},_unscheduleNextFrame:function(){this._scheduledFrame=void 0},cleanup:function(){var e=arguments;this._unscheduleNextFrame(),this._lastTimestamp=0,this.progress=0,this.speedMultiplier=1,this.__s._$IlZ$cleanup.apply(this,e)},update:D.a,cleanUpTransitionAfterFinish:D.a,cleanUpView:D.a,__superMap:{_$Huz$start:"start",_$I2W$finish:"finish",_$IlZ$cleanup:"cleanup"}}),ce=ae.CrossfadeTransition=oe.extend({start:function(){var e=arguments;this.targetView&&this.targetView.style.set("background-color","white"),this.__s._$IrO$start.apply(this,e)},update:function(e){var t=arguments;this.__s._$Isr$update.apply(this,t),this.sourceView&&this.sourceView.style.set("z-index",1),this.targetView?this.targetView.style.set("z-index",2).set("opacity",e):this.sourceView.style.set("opacity",1-e)},cleanUpView:function(e){var t=arguments;this.__s._$Iyk$cleanUpView.apply(this,t),e.style.clear("background-color"),e.style.clear("opacity"),e.style.clear("z-index")},__superMap:{_$IrO$start:"start",_$Isr$update:"update",_$Iyk$cleanUpView:"cleanUpView"}}),le=ce.extend({duration:96,staticMembers:{__QUALIFIED_CLASS_NAME__:"FastCrossfadeTransition"}}),ue=ae.CrossfadeSlideTransition=ce.extend({distanceX:0,initFromPool:function(e,t,n,i,r){var a=arguments;this.distanceX=r||0,this.__s._$J8A$initFromPool.apply(this,a)},update:function(e){var t=arguments;this.__s._$J9d$update.apply(this,t);var n=Math.pow(Math.max(0,Math.min(1,(1/this.speedMultiplier-1/3)/(1-1/3))),.8),i=this.sourceView,r=this.targetView,a=this.distanceX;i&&(i.translationXForTransition=e*-a*n),r&&(r.translationXForTransition=(1-e)*a*n)},cleanUpView:function(e){var t=arguments;this.__s._$JNb$cleanUpView.apply(this,t),e.translationXForTransition=void 0},__superMap:{_$J8A$initFromPool:"initFromPool",_$J9d$update:"update",_$JNb$cleanUpView:"cleanUpView"}}),de=$.extend({delay:500,media:r.b(),canHaveInstance:s.c("owner.isSteady"),hypotheticalInstance:r.b({readOnly:!0,dependencies:["media","media.specificType","owner","owner.collection"],get:Object.assign(function(){var e=this.media,t=this.owner;if(e&&t)return t._viewForMedia(e)},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[2+n]);if(r&&a)return a._viewForMedia(r)}})}),cleanup:function(){var e=arguments;this.media=void 0,this.__s._$JZ1$cleanup.apply(this,e)},__superMap:{_$JZ1$cleanup:"cleanup"},staticMembers:{__QUALIFIED_CLASS_NAME__:"LazyPresenterViewInstantiator"}}),he=function(e){return e.release()},pe=function(e){return e.retain()},fe=n(351);n(1001),n.d(t,"a",function(){return me});var ge=i.a.extend({staticMembers:{className:"pok-next-prev-button",__QUALIFIED_CLASS_NAME__:"NextPrevButton"},isEnabled:r.b(),isDisabled:r.b({readOnly:!0,dependencies:["isEnabled"],get:Object.assign(function(){return!this.isEnabled},{__CW__getter:function(e,t,n,i){return!i.internalGet(this,t[0+n])}})}),_assignRepetitionAction:a.f("isBeingPressed","parent",function(e,t){t&&(t.repetitionAction=e?this.action:"")}),_applyPointerEvents:a.f("parent.shouldUIBeClear",function(e){this.style.set("pointer-events",e?"none":void 0)})}),me=ae.extend(p.a,E).extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"VIEWOUTLET",tagname:"view",name:"detailsVCView"},{type:"VIEWOUTLET",tagname:"view",name:"nextButton"},{type:"VIEWOUTLET",tagname:"view",name:"prevButton"},{type:"VIEWOUTLET",tagname:"view",name:"thumbnailsStripView"},{type:"VIEWOUTLET",tagname:"view",name:"spinnerView"}],classes:["pok-main-oneup-view"]}},__QUALIFIED_CLASS_NAME__:"PhotosOneUpView"},primaryInteractionMode:r.b(),shouldStickToUnobtrusiveTransitions:s.c("thumbnailsStripView.isScrollActivityInProgress"),isInSpinnerMode:r.b(),isFocusable:!0,shouldEnsureOwnMediaRanges:r.b({readOnly:!0,dependencies:["thumbnailsStripView.isShowingSomePortionOfStrip"],get:Object.assign(function(){return!this.getPath("thumbnailsStripView.isShowingSomePortionOfStrip")},{__CW__getter:function(e,t,n,i){return!i.internalGetPath(this,t[0+n])}})}),isPreloadEnabled:r.b({readOnly:!0,dependencies:["thumbnailsStripView.isShowingSomePortionOfStrip"],get:Object.assign(function(){return!this.getPath("thumbnailsStripView.isShowingSomePortionOfStrip")},{__CW__getter:function(e,t,n,i){return!i.internalGetPath(this,t[0+n])}})}),_gated_targetMedia:f.a({strong:!0,changesProactivelyButSparsely:!0,source:"targetMedia",gate:"canUpdateGatedProperties",didChange:function(e){this.gated_targetMedia=e}}),gated_targetMedia:r.b(),_gated_canZoom:f.a({changesProactivelyButSparsely:!0,source:"canZoom",gate:"canUpdateGatedProperties",didChange:function(e){this.gated_canZoom=e}}),gated_canZoom:r.b(),canUpdateGatedProperties:r.b({readOnly:!0,dependencies:["thumbnailsStripView.scrollMotionTracker.isStationary","isSteady"],get:Object.assign(function(){return this.isSteady&&this.getPath("thumbnailsStripView.scrollMotionTracker.isStationary")},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[1+n])&&i.internalGetPath(this,t[0+n])}})}),_nextButton:r.b({strong:!0,defaultValue:o.b(ge.extend({additionalClassNames:["pok-next-button"],isEnabled:s.c("parent.canGoToNext"),action:"goToNext"}))}),nextButton:r.b({strong:!0,readOnly:!0,dependencies:["_nextButton","primaryInteractionMode"],get:Object.assign(function(){return this.primaryInteractionMode===m.a.MOUSE?this._nextButton:void 0},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[1+n])===m.a.MOUSE?i.internalGet(this,t[0+n]):void 0}})}),_prevButton:r.b({strong:!0,defaultValue:o.b(ge.extend({additionalClassNames:["pok-previous-button"],isEnabled:s.c("parent.canGoToPrevious"),action:"goToPrevious"}))}),prevButton:r.b({strong:!0,readOnly:!0,dependencies:["_prevButton","primaryInteractionMode"],get:Object.assign(function(){return this.primaryInteractionMode===m.a.MOUSE?this._prevButton:void 0},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[1+n])===m.a.MOUSE?i.internalGet(this,t[0+n]):void 0}})}),repetitionAction:r.b(""),actionRepetitionTimer:r.b({strong:!0,defaultValue:o.b(c.a.extend({delays:[350,250,220,200,180,165,150,138,126,114,102,90,80,72,64],action:s.c("owner.repetitionAction"),_startOrStopWhenNecessary:a.f("action","owner.isAttached",function(e,t){var n=this.isRunning,i=t&&e;n&&!i?this.stop():!n&&i?this.start():n&&i&&this.restart()})}))}),_spinnerView:r.b({strong:!0,defaultValue:o.b(l.a.extend({owner:r.b(),color:"rgba(255, 255, 255, 1.0)",size:48,_updateLayout:a.f("owner.insetCenterX","owner.insetCenterY",function(e,t){var n=this.size;this.style.translateDevicePixels(e-n/2,t-n/2).set("position","absolute")})}))}),spinnerView:r.b({strong:!0,readOnly:!0,dependencies:["_spinnerView","isInSpinnerMode"],get:Object.assign(function(){return this.isInSpinnerMode?this._spinnerView:null},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[1+n])?i.internalGet(this,t[0+n]):null}})}),thumbnailsStripView:r.b({strong:!0,defaultValue:o.b(fe.a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",styles:{bottom:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"parent.baseInsetsProvider.insetBottom",attributes:{},unit:"px",property:"bottom"}}}}},ownerIndicatedThumbExpansionInfos:s.c("parent.thumbExpansionInfos"),ownerIndicatedApparentFractionalMediaIndex:s.c("parent.apparentFractionalMediaIndex"),collection:s.c("parent.collection"),primaryInteractionMode:s.c("parent.primaryInteractionMode"),viewportWidth:s.c("parent.viewportWidth"),_compactSizeTouchInteractionRules:{minimumHeight:45,maximumHeight:45,viewportHeight:45,allowsVerticalPanResize:!1,allowsRetractionDuringResize:!1},_regularSizeTouchInteractionRules:{minimumHeight:45,maximumHeight:100,viewportHeight:55,allowsVerticalPanResize:!0,allowsRetractionDuringResize:!1},_mouseInteractionRules:{minimumHeight:55,maximumHeight:200,viewportHeight:79,allowsVerticalPanResize:!0,allowsRetractionDuringResize:!0},_layoutAndInteractionRules:r.b({readOnly:!0,dependencies:["primaryInteractionMode",u.a.bindingFor("application.sizeClass")],get:Object.assign(function(){return this.primaryInteractionMode===m.a.MOUSE?this._mouseInteractionRules:u.a.application.sizeClass===g.a.REGULAR?this._regularSizeTouchInteractionRules:this._compactSizeTouchInteractionRules},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])===m.a.MOUSE?this._mouseInteractionRules:i.internalGetPath(this,t[1+n])===g.a.REGULAR?this._regularSizeTouchInteractionRules:this._compactSizeTouchInteractionRules}})}),viewportHeight:r.b({defaultValue:NaN,dependencies:["_layoutAndInteractionRules"],get:Object.assign(function(e){return e>0?e:this._layoutAndInteractionRules.viewportHeight},{__CW__getter:function(e,t,n,i){return e>0?e:i.internalGet(this,t[0+n]).viewportHeight}}),writeDependencies:[],set:d.a}),minimumHeight:r.b({readOnly:!0,dependencies:["_layoutAndInteractionRules"],get:Object.assign(function(){return this._layoutAndInteractionRules.minimumHeight},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n]).minimumHeight}})}),maximumHeight:r.b({readOnly:!0,dependencies:["_layoutAndInteractionRules"],get:Object.assign(function(){return this._layoutAndInteractionRules.maximumHeight},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n]).maximumHeight}})}),allowsVerticalPanResize:r.b({readOnly:!0,dependencies:["_layoutAndInteractionRules"],get:Object.assign(function(){return this._layoutAndInteractionRules.allowsVerticalPanResize},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n]).allowsVerticalPanResize}})}),allowsRetractionDuringResize:r.b({readOnly:!0,dependencies:["_layoutAndInteractionRules"],get:Object.assign(function(){return this._layoutAndInteractionRules.allowsRetractionDuringResize},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n]).allowsRetractionDuringResize}})}),baseInsetHeight:r.b({readOnly:!0,dependencies:["viewportHeight","primaryInteractionMode"],get:Object.assign(function(){var e=this.viewportHeight;return Math.round(this.primaryInteractionMode===m.a.TOUCH?e-3:.84*e-4)},{__CW__getter:function(e,t,n,i){var r=this.viewportHeight;return Math.round(i.internalGet(this,t[1+n])===m.a.TOUCH?r-3:.84*r-4)}})}),ensureMediaRange:function(e,t){return this.owner.ensureMediaRange(e,t)},_maintainHorizontalInsets:a.f("owner.insetLeft","owner.insetRight",function(e,t){h.a.pause(),this.registerInsetLeft("ownerOneUp",e),this.registerInsetRight("ownerOneUp",t),h.a.resume()})}))}),_adjustSelfForThumbnailsStripInset:a.f("thumbnailsStripView.retractedHeight",function(e){this.registerInsetBottom(this.thumbnailsStripView,e)}),thumbnailsStripDidSelectMediaIndex:function(e){e>=0&&e<this.getPath("collection.length")&&this.targetMediaIndex!==e&&(this.fractionalMediaIndex=e,this.sendEvent("oneUpViewDidNavigateInternally"))},_layOutButtons:a.f("insetLeft","insetTop","insetWidth","insetHeight","isAttached",function(e,t,n,i,r){if(r&&this.nextButton&&this.prevButton){var a=this._buttonSize||(this._buttonSize=this.nextButton.element.offsetWidth);this._nextButtonCenterX=e+n-50-a/2,this._prevButtonCenterX=e+50+a/2,this._nextButtonCenterY=this._prevButtonCenterY=t+i/2,this.nextButton.style.set("left",this._nextButtonCenterX-a/2).set("top",this._nextButtonCenterY-a/2),this.prevButton.style.set("left",this._prevButtonCenterX-a/2).set("top",this._prevButtonCenterY-a/2)}}),_fadeButtons:a.f("mouseX","mouseY","insetLeft","insetWidth","insetTop","insetHeight","nextButton.isDisabled","prevButton.isDisabled","shouldUIBeClear",function(e,t,n,i,r,a,s,o,c){if(this.nextButton&&this.prevButton){var l=t>r+35&&t<r+a-35;this.nextButton.style.set("opacity",!s&&!c&&l&&e>n+i-130?1:0),this.prevButton.style.set("opacity",!o&&!c&&l&&e<n+130?1:0)}})})},function(e,t,n){"use strict";var i=n(34),r=n(93),a=n(180),s=n(36),o=n(883),c=n(409),l=n(1138),u=n(1225),d=n(881),h=n(1182),p=n(1208),f=n(192),g=n(125),m=n(1184),v=n(1206),_=n(41),b=n(39),y=n(81),I=n(186),w=n(1178),S=n(1228),C=n(80),O=n(122),A=n(1127),E=n(40),T=n(1241),M=n(1243),D=n(1242),L=n(46),N=n(853),P=n(83),R=n(882),x=n(155),F=n(154),k=n(1245),V=n(1244),j=n(1246),B=n(403),U=n(1234),W=n(197),G=n(1169),H=n(1221),$=n(1217),z=n(1282),K={},Q=C.a.extend(O.a,s.a,H.b).extend({ownerStripView:i.b(null),mediaIndex:i.b(NaN),substrip:i.b({strong:!0}),isBeingPressed:i.b(!1),leftInSubstrip:i.b(NaN),topInSubstrip:i.b(0),widthInSubstrip:i.b({dependencies:["ownerStripView.thumbWidth"],get:Object.assign(function(e){return e||this.getPath("ownerStripView.thumbWidth")},{__CW__getter:function(e,t,n,i){return e||i.internalGetPath(this,t[0+n])}}),writeDependencies:[],set:w.a}),heightInSubstrip:i.b(r.c("ownerStripView.thumbHeight")),derivativeContainerWidth:r.c("ownerStripView.thumbWidth"),derivativeContainerHeight:r.c("ownerStripView.thumbHeight"),shouldCorrectDerivativeForDevicePixelRatio:!0,shouldDerivativeCoverContainer:!0,wantsDownsampledDerivatives:!0,derivativePriority:i.b(0),media:i.b({readOnly:!0,strong:!0,dependencies:["mediaIndex","ownerStripView.collection","ownerStripView.collection.contentsDidChangeUntracked","ownerStripView.collection.everythingChanged"],get:Object.assign(function(){var e=this.mediaIndex,t=this.getPath("ownerStripView.collection");return isNaN(e)||!t?null:t.objectAt(e)},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGetPath(this,t[1+n]);return isNaN(r)||!a?null:a.objectAt(r)}})}),initFromPool:function(e,t){this.__s._$WJ$initFromPool.call(this),b.a.pause(),this.ownerStripView=e,this.mediaIndex=t,b.a.resume()},cleanup:function(){var e=arguments;b.a.pause(),this.ownerStripView=null,this.mediaIndex=NaN,this.substrip=null,this.isBeingPressed=!1,this.leftInSubstrip=NaN,this.widthInSubstrip=void 0,b.a.resume(),this.__s._$dX$cleanup.apply(this,e)},render:s.f({inputs:["substrip","derivative","leftInSubstrip","topInSubstrip","widthInSubstrip","heightInSubstrip","isBeingPressed","ownerStripView","media.specificType"],callback:function(e,t,i,r,a,s,o,c,l){if(e&&c&&!isNaN(i+r+a+s)){var u=l===E.a.Type.AUDIO;if(t){var d=$.a(t.physicalWidth,t.physicalHeight,a,s,void 0,void 0,void 0,K);t.drawIntoContext(e.context,d.cropX,d.cropY,d.cropWidth,d.cropHeight,i,r,a,s)}else e.context.clearRect(i,r,a,s),e.context.fillStyle=u?"rgba(0, 0, 0, 0.66666666667)":"rgba(0, 0, 0, 0.06666666667)",e.context.fillRect(i,r,a,s),u&&z.a(n(1011)).thenSync(x.a(this._drawAudioBadge,this,e,i,r,a,s));this.doAdditionalRendering(e,t,i,r,a,s),o&&(e.context.fillStyle="rgba(0, 0, 0, 0.15)",e.context.fillRect(i,r,a,s)),e.context.clearRect(i,r,1,s)}}}),_drawAudioBadge:function(e,t,n,i,r,a,s,o){if(o){var c=$.d(a.naturalWidth,a.naturalHeight,.7*i,.6*r,L.h.getAutodisposingInstance()),l=c.width,u=c.height;e.context.globalAlpha=.5,e.context.drawImage(a,t+i/2-l/2,n+r/2-u/2,l,u),e.context.globalAlpha=1}else this.render()},doAdditionalRendering:G.a,__superMap:{_$WJ$initFromPool:"initFromPool",_$dX$cleanup:"cleanup"},staticMembers:{__QUALIFIED_CLASS_NAME__:"ThumbnailsStripThumbRenderer"}}),q=c.a.extend(l.a,u.a,T.a,M.a,D.a,A.a).extend({owner:i.b(),shouldRenderInsetsToScrollIndicators:!1,horizontalScrollIndicatorClass:d.a.extend({scrollIndicatorShouldEnlarge:!1,numberOfStripWidthsTillWeShowTheThumb:5,stripWidth:i.b(),viewportWidth:i.b(),renewVisibility:function(){var e=arguments;this.stripWidth<this.viewportWidth*this.numberOfStripWidthsTillWeShowTheThumb?this._opacity=0:this.__s._$oE$renewVisibility.apply(this,e)},__superMap:{_$oE$renewVisibility:"renewVisibility"}}),horizontalScrollIndicator:i.b({downstreamBindings:{stripWidth:"(owner).stripWidth",viewportWidth:"(owner).viewportWidth"}}),additionalClassNames:h.a(["pok-thumbnails-strip-view"]),collection:i.b(),baseInsetHeight:i.b(r.c("viewportHeight")),thumbAspectRatio:i.b(47/84),thumbRendererClass:Q,baseInsetTop:i.b({readOnly:!0,dependencies:["baseInsetBottom","baseInsetHeight","viewportHeight"],get:Object.assign(function(){return this.viewportHeight-this.baseInsetBottom-this.baseInsetHeight},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[2+n])-i.internalGet(this,t[0+n])-i.internalGet(this,t[1+n])}})}),baseInsetBottom:i.b({readOnly:!0,dependencies:["viewportHeight","baseInsetHeight"],get:Object.assign(function(){return Math.ceil((this.viewportHeight-this.baseInsetHeight)/2)},{__CW__getter:function(e,t,n,i){return Math.ceil((i.internalGet(this,t[0+n])-i.internalGet(this,t[1+n]))/2)}})}),substripWidth:i.b({readOnly:!0,dependencies:["substripHeight"],get:Object.assign(function(){return Z(Math.max(256,4*this.substripHeight))},{__CW__getter:function(e,t,n,i){return Z(Math.max(256,4*i.internalGet(this,t[0+n])))}})}),substripHeight:i.b({readOnly:!0,dependencies:["thumbHeight"],get:Object.assign(function(){return Z(this.thumbHeight)},{__CW__getter:function(e,t,n,i){return Z(i.internalGet(this,t[0+n]))}})}),thumbHeight:i.b(r.c("insetHeight")),thumbWidth:i.b({readOnly:!0,dependencies:["thumbHeight","thumbAspectRatio"],get:Object.assign(function(){return Math.round(this.thumbHeight*this.thumbAspectRatio)},{__CW__getter:function(e,t,n,i){return Math.round(i.internalGet(this,t[0+n])*i.internalGet(this,t[1+n]))}})}),thumbsPerGroup:i.b({readOnly:!0,dependencies:["thumbWidth","substripWidth"],get:Object.assign(function(){return Math.floor(this.substripWidth/this.thumbWidth)},{__CW__getter:function(e,t,n,i){return Math.floor(i.internalGet(this,t[1+n])/i.internalGet(this,t[0+n]))}})}),thumbCount:i.b({readOnly:!0,dependencies:["collection.length"],get:Object.assign(function(){return Math.floor(this.getPath("collection.length"))},{__CW__getter:function(e,t,n,i){return Math.floor(i.internalGetPath(this,t[0+n]))}})}),expandThumb:function(e,t,n){var i=this.thumbExpansionsByMediaIndex,r=i[e];if(!r){if(!t)return;r=i[e]=Y.create(this,e,n?0:t)}n?r.getFinalValue("expansionAmount")!==t&&r.animate("expansionAmount",t,n):r.expansionAmount=t},expandThumbs:function(){for(var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L.c.getAutodisposingInstance(),n=arguments[1],i=L.i.getAutodisposingInstance(),r=0;e=t[r];r++)this.expandThumb(e.index,e.amount,n),i.add(e.index);this.unexpandAllThumbs(n,i)},unexpandAllThumbs:function(e,t){if(this.updateToThumbExpansionsSoon(),isNaN(t)||(t=L.i.getAutodisposingInstanceFromParams(t)),e||t)for(var n,i=this.thumbExpansions,r=0;n=i[r];r++){var a=n.mediaIndex;t&&t.has(a)||this.expandThumb(a,0,e)}else p.a(this.thumbExpansionsByMediaIndex)},thumbExpansions:i.b({readOnly:!0,dependencies:["thumbExpansionsByMediaIndex"],get:Object.assign(function(){var e=this._thumbExpansions_lastRet;e&&(this._thumbExpansions_lastRet=null,L.c.disposeInstance(e));var t=L.c.getInstance(),n=this.thumbExpansionsByMediaIndex,i=L.c.getInstance();for(var r in n)if(n.hasOwnProperty(r)){var a=parseInt(r,10);isNaN(a)||i.push(a)}i.sort(X);for(var s=0,o=i.length;s<o;s++)t.push(n[i[s]]);return this._thumbExpansions_lastRet=t},{__CW__getter:function(e,t,n,i){var r=this._thumbExpansions_lastRet;r&&(this._thumbExpansions_lastRet=null,L.c.disposeInstance(r));var a=L.c.getInstance(),s=i.internalGet(this,t[0+n]),o=L.c.getInstance();for(var c in s)if(s.hasOwnProperty(c)){var l=parseInt(c,10);isNaN(l)||o.push(l)}o.sort(X);for(var u=0,d=o.length;u<d;u++)a.push(s[o[u]]);return this._thumbExpansions_lastRet=a}})}),thumbExpansionsByMediaIndex:i.b({readOnly:!0,dependencies:["collection.contentsDidChangeUntracked","collection.everythingChanged"],get:function(){return this._thumbExpansionsByMediaIndex}}),_thumbExpansionsByMediaIndex:a.b(Object),width:r.c("viewportWidth"),height:r.c("viewportHeight"),scrollMaxY:r.c("viewportHeight"),scrollMaxX:i.b({readOnly:!0,dependencies:Array.from(new Set(["stripWidth","thumbCount","viewportWidth","thumbExpansionsByMediaIndex","thumbExpansions","thumbWidth"])),get:function(){return Math.round(this.stripWidth-.5*this.widthInStripForThumbIndex(0)-.5*this.widthInStripForThumbIndex(this.thumbCount-1))+this.viewportWidth}}),leftInStripForThumbIndex:function(e){for(var t,n,i=this.thumbExpansions,r=this.thumbWidth,a=0,s=-1,o=0;(t=i&&i[o])&&(n=t.mediaIndex)<e;o++)a+=(n-s-1)*r,a+=t.widthInStrip,s=n;return a+(e-s-1)*r},centerInStripForThumbIndex:function(e){return this.leftInStripForThumbIndex(e)+this.widthInStripForThumbIndex(e)/2},widthInStripForThumbIndex:function(e){var t=this.thumbExpansionsByMediaIndex[e];return t?t.widthInStrip:this.thumbWidth},thumbIndexForLeftInStrip:function(e){return e>=0&&e<this.stripWidth?N.b.call(this,this.leftInStripForThumbIndex,e,0,this.thumbCount-1,.01,0,1):NaN},thumbIndexForPointInView:function(e,t){return 1===arguments.length&&(t=e.y,e=e.x),t>=this.stripTop&&t<this.stripTop+this.stripHeight?this.thumbIndexForLeftInStrip(e-this.stripLeft):NaN},thumbIndexForPointOnPage:function(e,t){1===arguments.length&&(t=e.y,e=e.x);var n=this.rect;return this.thumbIndexForPointInView(e-n.left,t-n.top)},rectInStripForThumbIndex:function(e){if(!(e>=0&&e<this.thumbCount))return null;var t=L.h.getAutodisposingInstance();return t.x=this.leftInStripForThumbIndex(e),t.y=0,t.width=this.widthInStripForThumbIndex(e),t.height=this.thumbHeight,t},rectInViewForThumbIndex:function(e){var t=this.rectInStripForThumbIndex(e);return t&&(t.x+=this.stripLeft,t.y+=this.stripTop),t},fractionalCenterThumbIndexForStripLeft:function(e){var t=this.thumbCount,n=this.insetCenterX-e,i=this.thumbIndexForLeftInStrip(n),r=this.rectInStripForThumbIndex(i);if(!r)return NaN;var a=r.x+r.width/2;if(n===a)return i;var s=void 0,o=void 0,c=void 0;if(n>a){if(i+1>=t)return i;var l=this.rectInStripForThumbIndex(i+1);o=a,c=l.x+l.width/2,s=i}else{if(0===i)return i;var u=this.rectInStripForThumbIndex(i-1);o=u.x+u.width/2,c=a,s=i-1}return s+(n-o)/(c-o)},stripLeftToAchieveFractionalCenterThumbIndex:function(e){if(isNaN(e))return NaN;if(!this.thumbCount)return NaN;e=Math.max(0,Math.min(this.thumbCount-1,e));var t=Math.floor(e),n=Math.ceil(e),i=this.rectInStripForThumbIndex(t),r=i.x+i.width/2;if(n!==t){var a=e-t;r=(1-a)*r+a*((i=this.rectInStripForThumbIndex(n)).x+i.width/2)}return this.insetCenterX-r},stripLeftForScrollX:function(e){return this.insetCenterX?this.insetCenterX-this.centerInStripForThumbIndex(0)-e:NaN},scrollXForStripLeft:function(e){return this.insetCenterX?this.insetCenterX-this.centerInStripForThumbIndex(0)-e:NaN},dpr:i.b(f.a.sharedInstance.bindingFor("devicePixelRatio")),fractionalCenterThumbIndex:i.b({dependencies:Array.from(new Set(["stripLeft","thumbCount","insetCenterX","stripWidth","thumbCount","thumbExpansions","thumbWidth","thumbCount","thumbHeight","thumbExpansions","thumbWidth","thumbExpansionsByMediaIndex","thumbExpansions","thumbWidth"])),get:function(){return this.fractionalCenterThumbIndexForStripLeft(this.stripLeft)},writeDependencies:["stripLeft"],set:Object.assign(function(e){var t=Math.round(this.stripLeftToAchieveFractionalCenterThumbIndex(e));isNaN(t)||(this.scrollIsIntended++,this.stripLeft=t,this.scrollIsIntended--)},{__CW__setter:function(e,t,n,i,r){var a=Math.round(this.stripLeftToAchieveFractionalCenterThumbIndex(e));isNaN(a)||(this.scrollIsIntended++,n[0+i]=a,this.scrollIsIntended--)}}),writeDependencySetPathMap:["false"]}),stripLeft:i.b({dependencies:Array.from(new Set(["scrollX","dpr","insetCenterX","thumbExpansions","thumbWidth","thumbExpansionsByMediaIndex"])),get:function(){var e=this.dpr;return Math.round(this.stripLeftForScrollX(this.scrollX)*e)/e},writeDependencies:["scrollX"],set:Object.assign(function(e){if(this.insetCenterX){var t=this.scrollXForStripLeft(e),n=this.dpr;this.scrollIsIntended++,this.scrollX=Math.round(t*n)/n,this.scrollIsIntended--}},{__CW__setter:function(e,t,n,i,r){if(this.insetCenterX){var a=this.scrollXForStripLeft(e),s=this.dpr;this.scrollIsIntended++,n[0+i]=Math.round(a*s)/s,this.scrollIsIntended--}}}),writeDependencySetPathMap:["false"]}),stripTop:i.b(r.c("insetTop")),stripWidth:i.b({readOnly:!0,dependencies:Array.from(new Set(["thumbCount","thumbExpansions","thumbWidth","thumbExpansionsByMediaIndex","thumbExpansions","thumbWidth"])),get:function(){var e=this.thumbCount-1;return this.leftInStripForThumbIndex(e)+this.widthInStripForThumbIndex(e)}}),stripHeight:i.b(r.c("thumbHeight")),overdrawDistance:i.b({readOnly:!0,dependencies:[],get:function(){return 0}}),firstVisibleStripPixel:i.b({readOnly:!0,dependencies:["thumbWidth","stripLeft","overdrawDistance"],get:Object.assign(function(){return this.thumbWidth?Math.max(0,-this.stripLeft-this.overdrawDistance):NaN},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?Math.max(0,-i.internalGet(this,t[1+n])-i.internalGet(this,t[2+n])):NaN}})}),lastVisibleStripPixel:i.b({readOnly:!0,dependencies:["stripWidth","firstVisibleStripPixel","viewportWidth","overdrawDistance"],get:Object.assign(function(){return-1+Math.min(this.stripWidth,this.firstVisibleStripPixel+this.viewportWidth+2*this.overdrawDistance)},{__CW__getter:function(e,t,n,i){return-1+Math.min(i.internalGet(this,t[0+n]),i.internalGet(this,t[1+n])+i.internalGet(this,t[2+n])+2*i.internalGet(this,t[3+n]))}})}),firstVisibleThumbIndex:i.b({readOnly:!0,dependencies:Array.from(new Set(["firstVisibleStripPixel","stripWidth","thumbCount","thumbExpansions","thumbWidth"])),get:function(){return this.thumbIndexForLeftInStrip(this.firstVisibleStripPixel)}}),lastVisibleThumbIndex:i.b({readOnly:!0,dependencies:Array.from(new Set(["lastVisibleStripPixel","stripWidth","thumbCount","thumbExpansions","thumbWidth"])),get:function(){return this.thumbIndexForLeftInStrip(this.lastVisibleStripPixel)}}),thumbPreparationPad:i.b({readOnly:!0,dependencies:["viewportWidth","thumbWidth"],get:Object.assign(function(){return Math.max(40,Math.min(100,this.viewportWidth/this.thumbWidth|0))},{__CW__getter:function(e,t,n,i){return Math.max(40,Math.min(100,i.internalGet(this,t[0+n])/i.internalGet(this,t[1+n])|0))}})}),firstPreparedThumbIndex:i.b({readOnly:!0,dependencies:["firstVisibleThumbIndex","thumbPreparationPad"],get:Object.assign(function(){return Math.max(0,this.firstVisibleThumbIndex-this.thumbPreparationPad)},{__CW__getter:function(e,t,n,i){return Math.max(0,i.internalGet(this,t[0+n])-i.internalGet(this,t[1+n]))}})}),lastPreparedThumbIndex:i.b({readOnly:!0,dependencies:["thumbCount","lastVisibleThumbIndex","thumbPreparationPad"],get:Object.assign(function(){return Math.min(this.thumbCount-1,this.lastVisibleThumbIndex+this.thumbPreparationPad)},{__CW__getter:function(e,t,n,i){return Math.min(i.internalGet(this,t[0+n])-1,i.internalGet(this,t[1+n])+i.internalGet(this,t[2+n]))}})}),firstGuaranteedIndexInThumbRenderers:i.b({readOnly:!0,dependencies:["firstVisibleThumbIndex","firstPreparedThumbIndex"],get:Object.assign(function(){return this.firstVisibleThumbIndex-this.firstPreparedThumbIndex},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])-i.internalGet(this,t[1+n])}})}),lastGuaranteedIndexInThumbRenderers:i.b({readOnly:!0,dependencies:["lastVisibleThumbIndex","firstPreparedThumbIndex"],get:Object.assign(function(){return this.lastVisibleThumbIndex-this.firstPreparedThumbIndex},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])-i.internalGet(this,t[1+n])}})}),appendedSubstripPool:i.b({strong:!0,defaultValue:a.b(L.b.extend({createInstance:function(){var e=L.d.getInstance();g.a(e).set("position","absolute");var t=L.e.getInstance();return t.appendChild(e),g.a(t).set("position","absolute").set("overflow","hidden").set("z-index",100),t._canvas=e,t.context=e.getContext("2d"),t._deallocBuffer=function(){t.setBackingSize(0,0,1)},t._deallocBufferSoon=function(){t._abortBufferDealloc(),t._bufferDeallocTimeout=m.a(t._deallocBuffer,1e3)},t._abortBufferDealloc=function(){return!!t._bufferDeallocTimeout&&(clearTimeout(t._bufferDeallocTimeout),t._bufferDeallocTimeout=null,!0)},t._retainCount=0,t.retain=function(){t._retainCount++},t.release=function(){--t._retainCount||this.disposeInstance(t)}.bind(this),t.setBackingSize=function(n,i,r){if(n!==this._backingWidth||i!==this._backingHeight||r!==this._backingDPR){this._isBufferClearSinceLastResize=!0,this._backingWidth=n,this._backingHeight=i,this._backingDPR=r;var a=e.width=Math.ceil(n*r),s=e.height=Math.ceil(i*r);1!==r&&t.context.scale(a/n,s/i),g.a(e).set("width",n).set("height",i),g.a(t).set("width",n).set("height",i)}else this._isBufferClearSinceLastResize&&(this._isBufferClearSinceLastResize=!1)},t.setPosition=function(e,t){this._effectiveLeft=e,this._effectiveTop=t},t.setSize=function(n,i){var r=this._backingWidth-n,a=this._backingHeight-i;g.a(e).translateDevicePixels(r,a).layerBack(),g.a(t).translateDevicePixels(t._effectiveLeft-r,t._effectiveTop-a).layerBack()},this.owner.element.appendChild(t),t},getInstance:function(){var e=arguments,t=this.__s._$AF8$getInstance.apply(this,e);return t._abortBufferDealloc()&&(t._backingWidth&&t._backingHeight&&t.context.clearRect(0,0,t._backingWidth,t._backingHeight),t._isBufferClearSinceLastResize=!0),t},disposeInstance:function(e){var t=arguments;e._willDispose&&(e._willDispose(),delete e._willDispose),e._deallocBufferSoon(),g.a(e).translate(-1e4,-1e4).layerBack(),this.__s._$AQt$disposeInstance.apply(this,t)},dispose:function(){for(var e=arguments;this.pooledInstanceCount;){var t=this.getInstance();t._canvas.style.cssText="",L.d.disposeInstance(t._canvas),delete t._canvas,delete t.context,delete t._deallocBuffer,delete t._deallocBufferSoon,delete t._bufferDeallocTimeout,delete t._abortBufferDealloc,delete t.retain,delete t._retainCount,delete t.release,delete t.setBackingSize,delete t._isBufferClearSinceLastResize,delete t._backingWidth,delete t._backingHeight,delete t._backingDPR,delete t.setPosition,delete t._effectiveLeft,delete t._effectiveTop,delete t.setSize,L.e.disposeInstance(t)}this.__s._$Als$dispose.apply(this,e)},__superMap:{_$AF8$getInstance:"getInstance",_$AQt$disposeInstance:"disposeInstance",_$Als$dispose:"dispose"}}))}),isShowingSomePortionOfStrip:i.b({readOnly:!0,dependencies:["lastPreparedThumbIndex","firstPreparedThumbIndex"],get:Object.assign(function(){return this.lastPreparedThumbIndex-this.firstPreparedThumbIndex>0},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])-i.internalGet(this,t[1+n])>0}})}),thumbRenderers:i.b({readOnly:!0,dependencies:["firstVisibleThumbIndex","firstPreparedThumbIndex","lastVisibleThumbIndex","lastPreparedThumbIndex","firstGuaranteedIndexInThumbRenderers","lastGuaranteedIndexInThumbRenderers"],get:Object.assign(function(){var e=this.thumbRendererClass,t=this._thumbRenderers_lastRet,n=this.firstPreparedThumbIndex,i=this._thumbRenderers_lastFirstIndex,r=this.lastPreparedThumbIndex,a=this._thumbRenderers_lastLastIndex,s=this.firstVisibleThumbIndex,o=this._thumbRenderers_lastFirstVisibleIndex,c=this.lastVisibleThumbIndex,l=this._thumbRenderers_lastLastVisibleIndex;if(Object.is(n,i)&&Object.is(r,a)&&Object.is(s,o)&&Object.is(c,l))return t;var u=L.c.getInstance();if(this._thumbRenderers_lastRet=u,this._thumbRenderers_lastFirstIndex=n,this._thumbRenderers_lastLastIndex=r,this._thumbRenderers_lastFirstVisibleIndex=o,this._thumbRenderers_lastLastVisibleIndex=l,!t||isNaN(i)||isNaN(a)||isNaN(n)||isNaN(r)){for(var d=0,h=t&&t.length;d<h;d++){var p=t[d];p&&p.release(this,"in thumbRenderers")}for(var f=s;f<=c;f++)u[f-n]=e.create(this,f).retain(this,"in thumbRenderers")}else{for(var g=i,m=Math.min(n-1,a);g<=m;g++){var v=t[g-i];v&&v.release(this,"in thumbRenderers")}for(var _=n,b=Math.min(i-1,r);_<=b;_++)_>=s&&_<=c&&(u[_-n]=e.create(this,_).retain(this,"in thumbRenderers"));for(var y=Math.max(n,i),I=Math.min(r,a);y<=I;y++){var w=t[y-i];!w&&y>=s&&y<=c&&(w=e.create(this,y).retain(this,"in thumbRenderers")),u[y-n]=w}for(var S=Math.max(a+1,n);S<=r;S++)S>=s&&S<=c&&(u[S-n]=e.create(this,S).retain(this,"in thumbRenderers"));for(var C=Math.max(r+1,i);C<=a;C++){var O=t[C-i];O&&O.release(this,"in thumbRenderers")}}return t&&L.c.disposeInstance(t),this._schedulePassiveThumbRendererMaintenance(),u},{__CW__getter:function(e,t,n,i){var r=this.thumbRendererClass,a=this._thumbRenderers_lastRet,s=i.internalGet(this,t[1+n]),o=this._thumbRenderers_lastFirstIndex,c=i.internalGet(this,t[3+n]),l=this._thumbRenderers_lastLastIndex,u=i.internalGet(this,t[0+n]),d=this._thumbRenderers_lastFirstVisibleIndex,h=i.internalGet(this,t[2+n]),p=this._thumbRenderers_lastLastVisibleIndex;if(Object.is(s,o)&&Object.is(c,l)&&Object.is(u,d)&&Object.is(h,p))return a;var f=L.c.getInstance();if(this._thumbRenderers_lastRet=f,this._thumbRenderers_lastFirstIndex=s,this._thumbRenderers_lastLastIndex=c,this._thumbRenderers_lastFirstVisibleIndex=d,this._thumbRenderers_lastLastVisibleIndex=p,!a||isNaN(o)||isNaN(l)||isNaN(s)||isNaN(c)){for(var g=0,m=a&&a.length;g<m;g++){var v=a[g];v&&v.release(this,"in thumbRenderers")}for(var _=u;_<=h;_++)f[_-s]=r.create(this,_).retain(this,"in thumbRenderers")}else{for(var b=o,y=Math.min(s-1,l);b<=y;b++){var I=a[b-o];I&&I.release(this,"in thumbRenderers")}for(var w=s,S=Math.min(o-1,c);w<=S;w++)w>=u&&w<=h&&(f[w-s]=r.create(this,w).retain(this,"in thumbRenderers"));for(var C=Math.max(s,o),O=Math.min(c,l);C<=O;C++){var A=a[C-o];!A&&C>=u&&C<=h&&(A=r.create(this,C).retain(this,"in thumbRenderers")),f[C-s]=A}for(var E=Math.max(l+1,s);E<=c;E++)E>=u&&E<=h&&(f[E-s]=r.create(this,E).retain(this,"in thumbRenderers"));for(var T=Math.max(c+1,o);T<=l;T++){var M=a[T-o];M&&M.release(this,"in thumbRenderers")}}return a&&L.c.disposeInstance(a),this._schedulePassiveThumbRendererMaintenance(),f}})}),_schedulePassiveThumbRendererMaintenance:function(){this._passiveThumbRendererMaintenanceTimeout||(this._passiveThumbRendererMaintenanceTimeout=v.a(this._passivelyAddSomeThumbRenderers))},_passivelyAddSomeThumbRenderers:P.a(function(){if(!this.isDisposed){this._passiveThumbRendererMaintenanceTimeout=null;var e=this.thumbRenderers,t=this.thumbRendererClass,n=this.firstPreparedThumbIndex,i=this.lastPreparedThumbIndex,r=this.firstVisibleThumbIndex,a=this.lastVisibleThumbIndex,s=performance.now(),o=r-1,c=a+1;do{if(o>=n&&!e[o-n]&&(e[o-n]=t.create(this,o).retain(this,"in thumbRenderers")),c<=i&&!e[c-n]&&(e[c-n]=t.create(this,c).retain(this,"in thumbRenderers")),c++,--o<n&&c>i)break}while(performance.now()-s<.2);(o>n||c<i)&&this._schedulePassiveThumbRendererMaintenance()}}),scrollAnimationTargetIndex:A.b(0),_scrollToAnimationTarget:s.e("scrollAnimationTargetIndex",function(e){this.isAnimatingScroll&&!isNaN(e)&&(this.scrollIsIntended++,this.fractionalCenterThumbIndex=e,this.scrollIsIntended--)}),isAnimatingScroll:i.b({readOnly:!0,dependencies:["isAnimating"],get:Object.assign(function(){return this.isAnimating},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])}})}),animateScrollToThumbIndex:function(e,t){this.scrollX==this.scrollX?(this.isAnimatingScroll&&!isNaN(this.scrollAnimationTargetIndex)||(this.scrollAnimationTargetIndex=this.fractionalCenterThumbIndex),this.animate("scrollAnimationTargetIndex",e,t)):this.scrollAnimationTargetIndex=e},gestureRecognizerShouldReceive:function(e){var t=arguments;return e===this.scrollGestureRecognizer||this.__s._$Di3$gestureRecognizerShouldReceive.apply(this,t)},handleScroll:function(e){var t=arguments;return e.deltaX=e.deltaX+e.deltaY,this.__s._$Doj$handleScroll.apply(this,t)},_scrollBy:function(){var e=arguments;this.userScrollIsIntended++;var t=this.__s._$Dzc$_scrollBy.apply(this,e);return this.userScrollIsIntended--,t},scrollIsIntended:0,userScrollIsIntended:i.b(0),_scrollIsIntended:_.c({get:function(){return Boolean(this.scrollIsIntended||this.userScrollIsIntended)}}),scrollMotionTracker:i.b({strong:!0,defaultValue:a.b(R.a,{zeroSpeedCutoff:3,emaHalfLife:.25})}),didScrollBy:function(e){var t=arguments;this.scrollMotionTracker.handleDelta(e),this.__s._$EE4$didScrollBy.apply(this,t)},isMovingSlowEnoughForLoads:i.b(r.c("_isMovingSlowEnoughForLoads_ratchet.value")),_isMovingSlowEnoughForLoads_ratchet:i.b({strong:!0,defaultValue:a.b(o.a.extend({defersUpgrades:500,targetValue:i.b({readOnly:!0,dependencies:["owner.scrollMotionTracker.emaSpeed"],get:Object.assign(function(){return!(this.getPath("owner.scrollMotionTracker.emaSpeed")>1e3)},{__CW__getter:function(e,t,n,i){return!(i.internalGetPath(this,t[0+n])>1e3)}})})}))}),centerThumbIndex:i.b({readOnly:!0,dependencies:Array.from(new Set(["insetCenterX","stripLeft","stripWidth","thumbCount","thumbExpansions","thumbWidth"])),get:function(){return this.thumbIndexForLeftInStrip(this.insetCenterX-this.stripLeft)}}),centerMediaIndex:i.b(r.c("centerThumbIndex")),centermostThumbIndex:i.b({readOnly:!0,dependencies:Array.from(new Set(["insetCenterX","stripLeft","stripWidth","thumbCount","thumbExpansions","thumbWidth"])),get:function(){return this.thumbIndexForLeftInStrip(Math.max(0,Math.min(this.stripWidth-1,this.insetCenterX-this.stripLeft)))}}),centermostMediaIndex:i.b(r.c("centermostThumbIndex")),centerMedia:i.b({readOnly:!0,dependencies:["centerThumbIndex","collection","collection.contentsDidChangeUntracked","collection.everythingChanged"],get:Object.assign(function(){var e=this.collection;return e&&e.objectAt(this.centerThumbIndex)||null},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[1+n]);return r&&r.objectAt(i.internalGet(this,t[0+n]))||null}})}),_rerender:s.f("stripLeft","stripTop","stripWidth","dpr","thumbRenderers",function(){if(!this._rerender_isRespondingNeedlessly){if(this._rerender_isRespondingNeedlessly=!0,this._scrollIsIntended){var e=this.thumbIndexForLeftInStrip(this.insetCenterX-this.stripLeft),t=this.rectInViewForThumbIndex(e);this._anchorThumbIndex=e,this._anchorThumbOffsetFromCenter=t?Math.round(t.x+t.width/2-this.insetCenterX):NaN}else{var n=this._anchorThumbIndex,i=this.rectInViewForThumbIndex(n),r=(i?Math.round(i.x+i.width/2-this.insetCenterX):NaN)-this._anchorThumbOffsetFromCenter;r&&(this.scrollX+=r,this.scrollXDidGainCorrectiveScrollAmount(r))}this.renderStripSoon(),this._rerender_isRespondingNeedlessly=!1}}),renderStrip:function(){var e=this.stripLeft,t=this.stripTop,n=this.stripWidth,i=this.thumbRenderers;if(!isNaN(t+e)&&n&&i&&i.length){for(var r=this.dpr,a=this.substripWidth,s=this.substripHeight,o=this.thumbWidth,c=this.thumbHeight,l=this.thumbsPerGroup,u=this.thumbExpansions||ee,d=this.appendedSubstripPool,h=this.firstGuaranteedIndexInThumbRenderers,p=this.lastGuaranteedIndexInThumbRenderers,f=this.centerThumbIndex,g=this.firstPreparedThumbIndex,m=this.firstVisibleThumbIndex,v=NaN,_=null,y=null,I=0;_=u[I]||null;I++){if(_.mediaIndex>=m){v=I;break}y=_}for(var w=L.g.getInstance(),S=L.c.getInstance(),C=0,O=h,A=p;O<=A;O++){var E=i[O],T=E.mediaIndex,M=NaN,D=_&&_.mediaIndex===T;D?(M=T,y=_,_=u[++v]):M=Math.max(Math.floor(T/l)*l,y?y.mediaIndex+1:0);var N=(T-M)*o,P=D?y.drawnWidthInStrip:o,R=this._weakSubstripMap[M];if(R||((R=this._weakSubstripMap[M]=d.getInstance())._willDispose=x.a(J,void 0,this._weakSubstripMap,M)),!w.get(R)){w.set(R,!0);var F=e+this.leftInStripForThumbIndex(M)+(D?y.sideGapInStrip:0);R.setBackingSize(a,s,r),R.setPosition(F,t)}S[C-2]!==R&&(S.push(R),C+=2),S[C-1]=N+P,b.a.pause(),E.substrip=R,E.leftInSubstrip=N,E.widthInSubstrip=P,E.isRenderDisabled=R._isBufferClearSinceLastResize,E.derivativePriority=111e3+Math.abs(f-T),b.a.resume(),E.isRenderDisabled&&(E.isRenderDisabled=!1,E.render())}for(var k=0,V=h-1;k<=V;k++){var j=i[k];j&&(j.substrip&&(j.substrip=null),j.derivativePriority=111e3+Math.abs(f-(k+g)))}for(var B=p+1,U=i.length-1;B<=U;B++){var W=i[B];W&&(W.substrip&&(W.substrip=null),W.derivativePriority=111e3+Math.abs(f-(B+g)))}L.g.disposeInstance(w);for(var G=0;G<C;G+=2)S[G].setSize(S[G+1],c);L.c.disposeInstance(S),this._ensureRangeIfPossible()}},_ensureRangeIfPossible:D.b(function(){if(!this.isDisposed&&!this.isDisposing&&this.isMovingSlowEnoughForLoads){var e=this.collection;if(e){var t=this.firstPreparedThumbIndex,n=this.lastPreparedThumbIndex,i=n-t;t=t-2*i-20,n=n+2*i+20,t=30*Math.floor(t/30),n=30*Math.ceil(n/30),t=Math.max(0,t),(n=Math.min(e.length-1,n))-t&&this.ensureMediaRange(t,n)}}},500,!0),ensureMediaRange:function(e,t){var n=this.collection;n&&n.ensureRange&&n.ensureRange(e,t)},_reattemptEnsureRangeOnceAgainMovingSlowEnoughForLoads:s.f("isMovingSlowEnoughForLoads",function(e){e&&this._ensureRangeIfPossible()}),updateToThumbExpansionsSoon:function(){this._thumbExpansionsUpdateTimeout||(this._thumbExpansionsUpdateTimeout=F.b(this.updateToThumbExpansionsNow))},updateToThumbExpansionsNow:P.a(function(){F.a(this._thumbExpansionsUpdateTimeout),this._thumbExpansionsUpdateTimeout=void 0,!0===this.isAttached&&this.propertyChanged("thumbExpansionsByMediaIndex")}),renderStripSoon:function(){this._renderStripTimeout&&F.a(this._renderStripTimeout),this._renderStripTimeout=F.b(this._renderStripNow)},_renderStripNow:P.a(function(){this._renderStripTimeout=null,this.renderStrip()}),_weakSubstripMap:a.b(Object),_applyInsetsToScrollIndicator:s.f("insetLeft","insetRight",function(e,t){var n=this.horizontalScrollIndicator;n&&n.style.set("margin-right",t).set("margin-left",e).set("position","absolute")}),__superMap:{_$Di3$gestureRecognizerShouldReceive:"gestureRecognizerShouldReceive",_$Doj$handleScroll:"handleScroll",_$Dzc$_scrollBy:"_scrollBy",_$EE4$didScrollBy:"didScrollBy"}}).extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"ELEMENT",tagname:"div",name:"centerArrow",classes:["pok-center-arrow"],styles:{display:{type:"STYLEOUTLET",bindingtype:"IFBINDING",name:"hasCenterArrow",truevalue:"",falsevalue:"none",attributes:{},unit:null,property:"display"}}}]}}},primaryInteractionMode:i.b(),hasCenterArrow:i.b({readOnly:!0,dependencies:["primaryInteractionMode"],get:Object.assign(function(){return this.primaryInteractionMode===W.a.MOUSE},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])===W.a.MOUSE}})}),centerArrowHeight:i.b({readOnly:!0,dependencies:["isAttached","hasCenterArrow"],get:function(){var e=this.isAttached,t=this.hasCenterArrow;return e&&t?this._cte_permanentlyCachedRet||(this._cte_permanentlyCachedRet=this.centerArrow.offsetHeight):0},didChange:function(e){this.registerInsetTop("centerArrowHeight",e)}}),_maintainCenterArrowPosition:s.f("insetCenterX","insetTopCenterTop",function(){g.a(this.centerArrow).translateDevicePixels(this.insetCenterX,this.insetTopCenterTop)})}).extend({scrollXDidGainCorrectiveScrollAmount:function(e){this.isScrollGestureInProgress&&this._initialPosition&&(this._initialPosition.x+=e)},isScrollGestureInProgress:i.b({readOnly:!0,dependencies:["hasMomentum"],get:Object.assign(function(){if(this.hasMomentum)return!0;var e=this.getPath("scrollGestureRecognizer.state");return e===y.b.Began||e===y.b.Changed},{__CW__getter:function(e,t,n,i){if(i.internalGet(this,t[0+n]))return!0;var r=this.getPath("scrollGestureRecognizer.state");return r===y.b.Began||r===y.b.Changed}})}),updateScroll:function(){var e=arguments;this.__s._$LGH$updateScroll.apply(this,e),this.propertyChanged("isScrollGestureInProgress")},__superMap:{_$LGH$updateScroll:"updateScroll"}}).extend(k.a,I.a,V.a,{viewportHeight:79,minimumHeight:i.b(55),maximumHeight:i.b(200),retractionDuration:150,allowsVerticalPanResize:i.b(!0),allowsRetractionDuringResize:i.b(!0),isResizePanGestureInProgress:i.b({readOnly:!0,dependencies:[],get:function(){var e=this.getPath("resizePanGR.state");return e===y.b.Began||e===y.b.Changed}}),retractionAttachment:"bottom",init:function(){var e=arguments;this.__s._$Lqr$init.apply(this,e),this.resizePanGR=this.resizePanGRClass.create({delegate:this}),this.addGestureRecognizer(this.resizePanGR)},resizePanGR:i.b({strong:!0}),resizePanGRClass:j.a.extend(s.a,B.a,{view:i.b(),hasClinchedVertically:i.b(),event:"resizePan",pansVertically:!0,cancelsHorizontally:!0,minimumHeight:i.b(r.c("view.minimumHeight")),maximumHeight:i.b(r.c("view.maximumHeight")),allowsRetraction:i.b(r.c("view.allowsRetractionDuringResize")),userIndicatedViewportHeight:i.b(),initialViewportHeight:i.b(),_rubberBandAnimationInfo:void 0,boundedViewportHeight:i.b({readOnly:!0,dependencies:["minimumHeight","maximumHeight","userIndicatedViewportHeight"],get:Object.assign(function(){return Math.max(this.minimumHeight,Math.min(this.maximumHeight,this.userIndicatedViewportHeight))},{__CW__getter:function(e,t,n,i){return Math.max(i.internalGet(this,t[0+n]),Math.min(i.internalGet(this,t[1+n]),i.internalGet(this,t[2+n])))}})}),rubberBandedViewportHeight:i.b({readOnly:!0,dependencies:["boundedViewportHeight","userIndicatedViewportHeight","minimumHeight","maximumHeight"],get:function(){var e=this.boundedViewportHeight,t=this.userIndicatedViewportHeight;if(e===t)return e;var n=this.minimumHeight,i=this.maximumHeight;if(t<n){var r=.2*i,a=n-t;return n-r*(1-Math.pow(Math.E,-a/r/2))}if(t>i){var s=.5*i,o=t-i;return i+s*(1-Math.pow(Math.E,-o/s/6))}return e}}),indicatedViewportHeight:i.b({dependencies:["allowsRetraction","boundedViewportHeight","rubberBandedViewportHeight"],get:Object.assign(function(e){return e||Math.round(this.allowsRetraction?Math.max(this.boundedViewportHeight,this.rubberBandedViewportHeight):this.rubberBandedViewportHeight)},{__CW__getter:function(e,t,n,i){return e||Math.round(i.internalGet(this,t[0+n])?Math.max(i.internalGet(this,t[1+n]),i.internalGet(this,t[2+n])):i.internalGet(this,t[2+n]))}}),writeDependencies:[],set:w.a}),indicatedRetraction:i.b({readOnly:!0,dependencies:["allowsRetraction","userIndicatedViewportHeight","minimumHeight"],get:Object.assign(function(){return Boolean(this.allowsRetraction&&this.userIndicatedViewportHeight<this.minimumHeight/2)},{__CW__getter:function(e,t,n,i){return Boolean(i.internalGet(this,t[0+n])&&i.internalGet(this,t[1+n])<i.internalGet(this,t[2+n])/2)}})}),indicatedViewportHeightIsValid:i.b({readOnly:!0,dependencies:["indicatedViewportHeight","boundedViewportHeight"],get:Object.assign(function(){return this.indicatedViewportHeight===this.boundedViewportHeight},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])===i.internalGet(this,t[1+n])}})}),indicatedCursor:i.b({readOnly:!0,dependencies:["hasClinchedVertically","indicatedViewportHeight","minimumHeight","maximumHeight","allowsRetraction"],get:Object.assign(function(){return this.hasClinchedVertically?this.indicatedViewportHeight>this.maximumHeight?"s-resize":this.indicatedViewportHeight<this.minimumHeight?this.allowsRetraction?"row-resize":"n-resize":isNaN(this.indicatedViewportHeight)?void 0:"row-resize":void 0},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?i.internalGet(this,t[1+n])>i.internalGet(this,t[3+n])?"s-resize":i.internalGet(this,t[1+n])<i.internalGet(this,t[2+n])?i.internalGet(this,t[4+n])?"row-resize":"n-resize":isNaN(i.internalGet(this,t[1+n]))?void 0:"row-resize":void 0}})}),pointerDown:function(){var e=arguments;return this.userIndicatedViewportHeight=this.initialViewportHeight=this.view.viewportHeight,this.__s._$Nbl$pointerDown.apply(this,e)},pointerMove:function(){var e=arguments,t=this.__s._$Ncq$pointerMove.apply(this,e);return this.userIndicatedViewportHeight=this.initialViewportHeight-this.snappedTranslation.y,t},pointerUp:function(){var e=arguments;this.pauseStateChanges();var t=this.__s._$NgV$pointerUp.apply(this,e);return this.indicatedViewportHeightIsValid||(this.state=y.b.Changed,this._rubberBandAnimationInfo={initialViewportHeight:this.indicatedViewportHeight,finalViewportHeight:this.boundedViewportHeight,startTime:performance.now(),duration:20*Math.sqrt(Math.abs(this.boundedViewportHeight-this.indicatedViewportHeight)),timeoutHandle:void 0},this._handleRubberBandAnimationFrame()),this.resumeStateChanges(),t},_rubberBandTween:function(e){return 1-(1-e)*(1-e)},_handleRubberBandAnimationFrame:P.a(function(){var e=this._rubberBandAnimationInfo;if(e){cancelAnimationFrame(e.timeoutHandle),e.timeoutHandle=void 0;var t=performance.now()-e.startTime,n=Math.max(0,Math.min(1,t/e.duration));if(n<1){var i=this._rubberBandTween(n);this.indicatedViewportHeight=e.finalViewportHeight*i+e.initialViewportHeight*(1-i),this.state=y.b.Changed,e.timeoutHandle=v.a(this._handleRubberBandAnimationFrame)}else this.indicatedViewportHeight=e.finalViewportHeight,this.state=y.b.Ended}}),reset:function(){var e=arguments;return this.userIndicatedViewportHeight=void 0,this.indicatedViewportHeight=void 0,this.initialViewportHeight=void 0,this._rubberBandAnimationInfo=void 0,this.__s._$ONI$reset.apply(this,e)},__superMap:{_$Nbl$pointerDown:"pointerDown",_$Ncq$pointerMove:"pointerMove",_$NgV$pointerUp:"pointerUp",_$ONI$reset:"reset"}}),resizePan:function(e){var t=e.state;t===y.b.Changed&&(this.viewportHeight=e.indicatedViewportHeight,this[e.indicatedRetraction?"retract":"unretract"](this.retractionDuration)),t!==y.b.Failed&&t!==y.b.Cancelled||(this.viewportHeight=e.initialViewportHeight,this.unretract(this.retractionDuration)),this.propertyChanged("isResizePanGestureInProgress")},gestureRecognizerShouldReceive:function(e){var t=arguments;return!(e===this.resizePanGR&&!this.allowsVerticalPanResize)&&this.__s._$Ofg$gestureRecognizerShouldReceive.apply(this,t)},gestureRecognizerShouldRequireFailureOf:function(e,t){var n=arguments;return(e!==this.resizePanGR||t!==this.scrollGestureRecognizer)&&(e===this.scrollGestureRecognizer&&t===this.resizePanGR||this.__s._$Ok6$gestureRecognizerShouldRequireFailureOf.apply(this,n))},gestureRecognizerShouldBeRequiredToFailBy:function(e,t){var n=arguments;return e===this.resizePanGR&&t===this.scrollGestureRecognizer||(e!==this.scrollGestureRecognizer||t!==this.resizePanGR)&&this.__s._$OoZ$gestureRecognizerShouldBeRequiredToFailBy.apply(this,n)},_hasOwnResizeCursor:i.b({readOnly:!0,dependencies:["mouseY","insetTop"],get:Object.assign(function(){return this.mouseY<this.insetTop},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])<i.internalGet(this,t[1+n])}}),didChange:function(e){this.style.set("cursor",e?"row-resize":void 0)}}),_maintainResizeCursorLockStyling:s.f("resizePanGR.indicatedCursor",function(e){U.c(this._cursorLockHandle),this._cursorLockHandle=void 0,e&&(this._cursorLockHandle=U.b("* { cursor: "+e+" !important; }"))}),__superMap:{_$Lqr$init:"init",_$Ofg$gestureRecognizerShouldReceive:"gestureRecognizerShouldReceive",_$Ok6$gestureRecognizerShouldRequireFailureOf:"gestureRecognizerShouldRequireFailureOf",_$OoZ$gestureRecognizerShouldBeRequiredToFailBy:"gestureRecognizerShouldBeRequiredToFailBy"}}).extend(S.b,{canThumbnailButtonTapCapturePointer:!1,init:function(){var e=arguments;this.__s._$P91$init.apply(this,e),this.thumbnailButtonTapGR=this.thumbnailButtonTapGRClass.create({delegate:this}),this.addGestureRecognizer(this.thumbnailButtonTapGR)},thumbnailButtonTapGRClass:S.a.extend(B.a,{event:"thumbnailButtonTap",shouldAllowMovementOutsideTarget:!0,tappedThumbnailButtonIndex:void 0,_hasClinchedVertically:!1,_horizontalTravelThreshold:3,_verticalTravelThreshold:4,_isLocationOnPageWithinTappedThumbnailButtonRect:function(e,t){var n=this.view.thumbIndexForPointOnPage(e,t),i=this.tappedThumbnailButtonIndex>=0?this.tappedThumbnailButtonIndex:this.tappedThumbnailButtonIndex=n;return n>=0&&n===i},pointerMove:function(e){var t=arguments;this.pauseStateChanges();var n=this.__s._$PQ_$pointerMove.apply(this,t),i=Math.abs(e.clientY-this.location.y)>this._verticalTravelThreshold,r=Math.abs(e.clientX-this.location.x)>this._horizontalTravelThreshold,a=this.canThumbnailButtonTapCapturePointer&&!this.view.allowsVerticalPanResize;return this._hasClinchedVertically||(this._hasClinchedVertically=!!a&&i)||!r&&!i||(this.state=y.b.Cancelled),this.resumeStateChanges(),n},reset:function(){var e=arguments;return this.tappedThumbnailButtonIndex=void 0,this._hasClinchedVertically=!1,this.__s._$Pgr$reset.apply(this,e)},__superMap:{_$PQ_$pointerMove:"pointerMove",_$Pgr$reset:"reset"}}),thumbnailButtonTap:function(e){var t=e.state,n=this.thumbRenderers[e.tappedThumbnailButtonIndex-this.firstPreparedThumbIndex];t!==y.b.Began&&t!==y.b.Changed||n&&(n.isBeingPressed=e.willGestureSucceed),t!==y.b.Ended&&t!==y.b.Failed&&t!==y.b.Cancelled||(t===y.b.Ended&&e.willGestureSucceed&&this.sendEvent("thumbnailsStripDidSelectMediaIndex",e.tappedThumbnailButtonIndex),n&&(n.isBeingPressed=!1))},gestureRecognizerShouldActivateButton:function(e,t){var n=arguments;return e!==this.thumbnailButtonTapGR?this.__s._$P_2$gestureRecognizerShouldActivateButton.apply(this,n):e._isLocationOnPageWithinTappedThumbnailButtonRect(t.clientX,t.clientY)},gestureRecognizerShouldRequireFailureOf:function(e,t){var n=arguments;return e===this.resizePanGR&&t===this.thumbnailButtonTapGR||(e!==this.thumbnailButtonTapGR||t!==this.resizePanGR)&&(e!==this.thumbnailButtonTapGR||t!==this.scrollGestureRecognizer)&&(e===this.scrollGestureRecognizer&&t===this.thumbnailButtonTapGR||this.__s._$Q8F$gestureRecognizerShouldRequireFailureOf.apply(this,n))},gestureRecognizerShouldBeRequiredToFailBy:function(e,t){var n=arguments;return(e!==this.resizePanGR||t!==this.thumbnailButtonTapGR)&&(e===this.thumbnailButtonTapGR&&t===this.resizePanGR||e===this.thumbnailButtonTapGR&&t===this.scrollGestureRecognizer||(e!==this.scrollGestureRecognizer||t!==this.thumbnailButtonTapGR)&&this.__s._$QFw$gestureRecognizerShouldBeRequiredToFailBy.apply(this,n))},__superMap:{_$P91$init:"init",_$P_2$gestureRecognizerShouldActivateButton:"gestureRecognizerShouldActivateButton",_$Q8F$gestureRecognizerShouldRequireFailureOf:"gestureRecognizerShouldRequireFailureOf",_$QFw$gestureRecognizerShouldBeRequiredToFailBy:"gestureRecognizerShouldBeRequiredToFailBy"}}).extend({_momentarilySuspendDerivativeCreations:function(){this._resumeDerivativeCreationsTimeout?clearTimeout(this._resumeDerivativeCreationsTimeout):E.a.suspendDerivativeCreations(),this._resumeDerivativeCreationsTimeout=m.a(this._resumeDerivativeCreations,250)},_resumeDerivativeCreations:P.a(function(){this._resumeDerivativeCreationsTimeout=null,E.a.resumeDerivativeCreations()}),renderStrip:function(){var e=arguments;this.__s._$QPP$renderStrip.apply(this,e),this._momentarilySuspendDerivativeCreations()},__superMap:{_$QPP$renderStrip:"renderStrip"},staticMembers:{__QUALIFIED_CLASS_NAME__:"BasicThumbnailsStripView"}}),Y=C.a.extend(s.a,O.a,A.a).extend({ownerStripView:i.b(null),mediaIndex:i.b(NaN),expansionAmount:A.b(0),media:i.b({readOnly:!0,dependencies:["mediaIndex","ownerStripView.collection","ownerStripView.collection.contentsDidChangeUntracked","ownerStripView.collection.everythingChanged"],get:Object.assign(function(){var e=this.mediaIndex,t=this.getPath("ownerStripView.collection");return isNaN(e)||!t?null:t.objectAt(e)},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGetPath(this,t[1+n]);return isNaN(r)||!a?null:a.objectAt(r)}})}),mediaAspectRatio:i.b({readOnly:!0,dependencies:["media.aspectRatio"],get:Object.assign(function(){return this.getPath("media.aspectRatio")||1},{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])||1}})}),drawnWidthInStrip:i.b({readOnly:!0,dependencies:["expansionAmount","ownerStripView.thumbWidth","mediaAspectRatio","ownerStripView.thumbHeight","ownerStripView.dpr","ownerStripView.substripWidth"],get:Object.assign(function(){var e=Math.min(this.getPath("ownerStripView.substripWidth"),this.mediaAspectRatio*this.getPath("ownerStripView.thumbHeight")),t=this.expansionAmount,n=(1-t)*this.getPath("ownerStripView.thumbWidth")+t*e,i=this.getPath("ownerStripView.dpr");return Math.round(n*i)/i},{__CW__getter:function(e,t,n,i){var r=Math.min(i.internalGetPath(this,t[5+n]),i.internalGet(this,t[2+n])*i.internalGetPath(this,t[3+n])),a=i.internalGet(this,t[0+n]),s=(1-a)*i.internalGetPath(this,t[1+n])+a*r,o=i.internalGetPath(this,t[4+n]);return Math.round(s*o)/o}}),writeDependencies:[]}),widthInStrip:i.b({readOnly:!0,dependencies:["drawnWidthInStrip","sideGapInStrip"],get:Object.assign(function(){return this.drawnWidthInStrip+2*this.sideGapInStrip},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])+2*i.internalGet(this,t[1+n])}})}),sideGapInStrip:i.b({readOnly:!0,dependencies:["expansionAmount","ownerStripView.insetBottom","ownerStripView.dpr"],get:Object.assign(function(){var e=Math.round(this.expansionAmount*Math.max(10,this.getPath("ownerStripView.insetBottom"))),t=this.getPath("ownerStripView.dpr");return Math.round(e*t)/t},{__CW__getter:function(e,t,n,i){var r=Math.round(i.internalGet(this,t[0+n])*Math.max(10,i.internalGetPath(this,t[1+n]))),a=i.internalGetPath(this,t[2+n]);return Math.round(r*a)/a}}),writeDependencies:[]}),_notifyOwnerOfChanges:s.f({inputs:["mediaAspectRatio","expansionAmount","mediaIndex"],callback:function(e,t,n){var i=this.ownerStripView;if(i){if(this._nOOC_last_mediaIndex!==n){var r=i.thumbExpansionsByMediaIndex;delete r[this._nOOC_last_mediaIndex],r[n]=this,this._nOOC_last_mediaIndex=n}i.updateToThumbExpansionsSoon()}}}),_retainSelfWhileNeeded:s.f("expansionAmount","isAnimating",function(e,t){var n=Boolean(e||t);!this._rswn_hasRetain&&n&&this.retain(this,"expansion self-retain"),this._rswn_hasRetain&&!n&&this.autorelease(this,"expansion self-retain"),this._rswn_hasRetain=n}),initFromPool:function(e,t,n){this.__s._$SX0$initFromPool.call(this),this.retain(this,"initial self-retain"),this.autorelease(this,"initial self-retain"),b.a.pause(),this.ownerStripView=e,this.mediaIndex=t,this.expansionAmount=n,b.a.resume()},cleanup:function(){var e=arguments;this._nOOC_last_mediaIndex=NaN;var t=this.ownerStripView;t&&(delete t.thumbExpansionsByMediaIndex[this.mediaIndex],t.updateToThumbExpansionsSoon()),b.a.pause(),this.ownerStripView=null,this.mediaIndex=NaN,this.expansionAmount=0,b.a.resume(),this.__s._$SpI$cleanup.apply(this,e)},__superMap:{_$SX0$initFromPool:"initFromPool",_$SpI$cleanup:"cleanup"},staticMembers:{__QUALIFIED_CLASS_NAME__:"ThumbExpansion"}});function Z(e){return Math.min(Math.pow(2,Math.ceil(Math.log(e)/Math.log(2))),1.5*Math.pow(2,Math.ceil(Math.log(e/1.5)/Math.log(2))))}function J(e,t){delete e[t]}function X(e,t){return e-t}var ee=[];n.d(t,"a",function(){return te});var te=q.extend({BASE_DURATION:250,ownerIndicatedThumbExpansionInfos:i.b(),ownerIndicatedApparentFractionalMediaIndex:i.b(),isBeingScrolledByUserWithUnattachedDelta:i.b({readOnly:!0,dependencies:["userScrollIsIntended","isScrollGestureInProgress"],get:Object.assign(function(){return Boolean(this.userScrollIsIntended&&!this.isScrollGestureInProgress)},{__CW__getter:function(e,t,n,i){return Boolean(i.internalGet(this,t[0+n])&&!i.internalGet(this,t[1+n]))}})}),hasRecentlyBeenScrolledByUserWithUnattachedDelta:i.b(r.c("_hasRecentlyBeenScrolledByUserWithUnattachedDelta_ratchet.value")),_hasRecentlyBeenScrolledByUserWithUnattachedDelta_ratchet:i.b({strong:!0,defaultValue:a.b(o.a.extend({defersDowngrades:250,targetValue:r.c("owner.isBeingScrolledByUserWithUnattachedDelta")}))}),isScrollActivityInProgress:i.b({readOnly:!0,dependencies:["isScrollGestureInProgress","hasRecentlyBeenScrolledByUserWithUnattachedDelta"],get:Object.assign(function(){return Boolean(this.isScrollGestureInProgress||this.hasRecentlyBeenScrolledByUserWithUnattachedDelta)},{__CW__getter:function(e,t,n,i){return Boolean(i.internalGet(this,t[0+n])||i.internalGet(this,t[1+n]))}})}),hasRecentlyBeenAnimatingOrScrolledByUserDirectly:i.b(r.c("_hasRecentlyBeenAnimatingOrScrolledByUserDirectly_ratchet.value")),_hasRecentlyBeenAnimatingOrScrolledByUserDirectly_ratchet:i.b({strong:!0,defaultValue:a.b(o.a.extend({defersDowngrades:1,targetValue:i.b({readOnly:!0,dependencies:["owner.isScrollActivityInProgress","owner.isAnimatingScroll"],get:Object.assign(function(){return this.getPath("owner.isScrollActivityInProgress")||this.getPath("owner.isAnimatingScroll")},{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])||i.internalGetPath(this,t[1+n])}})})}))}),_trackOwnerIndicatedStateWhileUserIsNotScrolling:s.f("hasRecentlyBeenAnimatingOrScrolledByUserDirectly","ownerIndicatedApparentFractionalMediaIndex","ownerIndicatedThumbExpansionInfos",function(){this.hasRecentlyBeenAnimatingOrScrolledByUserDirectly||this.ownerIndicatedApparentFractionalMediaIndex>=0&&(this.scrollIsIntended++,this.fractionalCenterThumbIndex=this.ownerIndicatedApparentFractionalMediaIndex,this.scrollIsIntended--,this.expandThumbs(this.ownerIndicatedThumbExpansionInfos))}),_animateBackToOwnerIndicatedStateAfterUserFinishesScrolling:s.f("isScrollActivityInProgress",function(e){e||(this.animateScrollToThumbIndex(this.ownerIndicatedApparentFractionalMediaIndex,this.BASE_DURATION),this.expandThumbs(this.ownerIndicatedThumbExpansionInfos,this.BASE_DURATION))}),_selectMediaDuringScroll:s.f("centermostMediaIndex",function(e){(this.isBeingScrolledByUserWithUnattachedDelta||this.isScrollGestureInProgress)&&(e>=0&&this.sendEvent("thumbnailsStripDidSelectMediaIndex",e),this.unexpandAllThumbs(this.BASE_DURATION))}),staticMembers:{__QUALIFIED_CLASS_NAME__:"TargetAwareThumbnailsStripView"}})},function(e,t,n){"use strict";var i=n(41),r=n(775),a=n(1170),s=function(e){function t(n){!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return i.name="SerializationError",i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(Error);n.d(t,"a",function(){return c});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c={serialize:function(){var e=this.getMetadataByType(i.a),t={};for(var n in f(this),e){var r=e[n],a=r.key,s=r.serialization;if(!s||!s.ignore){var o=u(this,r);void 0!==o&&(t[l(a,s)]=o)}}return t},staticMembers:{deserialize:function(e){var t=void 0;if(e&&r.a(e)){var n=(t=this.create()).getMetadataByType(i.a);for(var a in n){var s=n[a],o=s.key,c=s.serialization,u=e[l(o,c)];c&&c.ignore||(t[o]=h(t,u,s))}f(t)}return t}}};function l(e,t){var n=e;if(t){var i=t.propertyName;i&&"string"==typeof i&&i.length>0&&(n=i)}return n}function u(e,t,n){var i=t.key,r=t.type,a=t.getForObject(e);return g(r)?function(e,t,n,i){var r=void 0;if(n){r=[];for(var a=0,s=n.length;a<s;a++){var o=n[a];r.push(d(e,t,o))}}return r}(e,i,a):m(r)?function(e,t,n,i){var r=void 0;if(a){r={};var s=a,o=Array.isArray(s),c=0;for(s=o?s:s[Symbol.iterator]();;){var l;if(o){if(c>=s.length)break;l=s[c++]}else{if((c=s.next()).done)break;l=c.value}var u=l,h=u[0],p=u[1];r[h]=d(e,t,p)}}return r}(e,i):d(e,i,a)}function d(e,t,n){var i=void 0;if(n)if(n.isObject){if(!n||!n.hasMixin(c))throw new s("["+a.a(e)+"] Property "+t+" does not support serialization");n&&(i=n.serialize())}else i=n;return i}function h(e,t,n){var i=n.type,r=n.key;return g(i)?function(e,t,n){var i=n.key,r=n.serialization,a=void 0;if(t){var s=Object;if(r){var o=r.collectionObjectType;o&&(s=o)}a=[];for(var c=0,l=t.length;c<l;c++){var u=t[c];a.push(p(e,i,s,u))}}return a}(e,t,n):m(i)?function(e,t,n){var i=n.key,r=n.serialization,a=void 0;if(t){var s=Object;if(r){var o=r.collectionObjectType;o&&(s=o)}for(var c in a=new Map,t){var l=t[c];a.set(c,p(e,i,s,l))}}return a}(e,t,n):p(e,r,i,t)}function p(e,t,n,i){var r,l,u="string"==typeof(r=n)?v(r):"function"==typeof r&&v(void 0===(l=r())?"undefined":o(l));if(i&&!u){if(n.hasMixin(c))return n.deserialize(i);throw new s("["+a.a(e)+"] Property "+t+" does not support serialization")}return i}function f(e){var t=e.getMetadataByType(i.a),n=[];for(var r in t){var o=t[r],c=o.validators,l=o.key;if(c){for(var u=[],d=0;d<c.length;d++){var h=c[d];h.validate(o.getForObject(e),l,e)||u.push(h.message)}if(u&&u.length>0){var p="Validation for field "+l+" failed - "+u.join(", ")+".";n.push(p)}}}if(n&&n.length>0)throw new s("["+a.a(e)+"] "+n.join(" "))}function g(e){return"function"==typeof e&&Array.isArray(new e)}function m(e){return"function"==typeof e&&new e instanceof Map}function v(e){return"string"===e||"number"===e||"boolean"===e||"object"===e}},function(e,t,n){"use strict";var i=n(80),r=n(36),a=n(34),s=n(126),o=n(65),c=n(1187),l=n(1195),u=n(195),d=n(1197),h=n(183);n.d(t,"a",function(){return p});var p=i.a.extend(r.a,u.a,{autoconnect:!0,isDisconnected:Object(a.b)({readOnly:!0,get:function(){return this._isDisconnected}}),incomingMessage:Object(r.g)(),outgoingMessage:Object(r.g)(),outgoingWindow:s.a.define(),remoteOrigin:Object(a.b)({type:"string"}),_isDisconnected:!0,_messageHandler:null,connect:function(){this.isDisconnected&&(this.outgoingWindow&&this.outgoingWindow.postMessage||Object(o.b)("The `outgoingWindow` must be configured and support `postMessage()`"),Object(c.a)(window,"message",this._messageHandler),this._isDisconnected=!1,this.propertyChanged("isDisconnected"))},disconnect:function(){this.isDisconnected||(Object(l.a)(window,"message",this._messageHandler),this._isDisconnected=!0,this.propertyChanged("isDisconnected"))},init:function(){var e=arguments;this._messageHandler=function(e){var t=e.originalEvent,n=(t||e).origin,i=this.outgoingWindow,r=e.source,a=i===r;try{a||(a=i.actualOutgoingWindow===r)}catch(e){a=!1}a&&function(e,t){if("*"===e||"*"===t)return!0;var n=h.a.parse(e),i=h.a.parse(t);if(Object(d.a)(n.protocol)||Object(d.a)(i.protocol)||n.protocol!==i.protocol)return!1;if(Object(d.a)(n.hostname)||Object(d.a)(i.hostname)||n.hostname!==i.hostname)return!1;if(e===t)return!0;var r=n.port;Object(d.a)(r)&&(r="https:"===n.protocol?"443":"80");var a=i.port;return Object(d.a)(a)&&(a="https:"===i.protocol?"443":"80"),r===a}(n,this.remoteOrigin)&&this.incomingMessage((t||e).data)}.bind(this),this.__s._$13o$init.apply(this,e)},send:function(e){this.isDisconnected&&Object(o.b)("Cannot send message because the channel has not been connected.",this);var t=this.remoteOrigin;t||Object(o.b)("Cannot send message without `remoteOrigin` specified.",this),this.outgoingWindow.postMessage(e,t),this.outgoingMessage(e)},outgoingWindowDidChange:Object(r.f)("outgoingWindow",function(e){e?this.autoconnect&&this.connect():this.disconnect()}),__superMap:{_$13o$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"WindowPostMessageChannel"}})},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n(1173),r=n(32),a=n(49).b.extend({metadataType:null,validate:function(e,t){if(!e.hasMixin||!e.hasMixin(r.b))return!1;var n=e.getMetadata(t);return Object(i.a)(n,this.metadataType)},staticMembers:{__QUALIFIED_CLASS_NAME__:"RequiredMetadata"}})},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n(354),r=n(36),a=i.a.extend({metadataType:r.d,staticMembers:{__QUALIFIED_CLASS_NAME__:"RequiredSignal"}})},function(e,t,n){"use strict";n.d(t,"a",function(){return I});var i=n(177),r=n(80),a=n(41),s=n(195),o=n(1170),c=n(1185),l=n(65),u=n(1174),d=n(180),h=n(251),p=n(550),f=n(418),g=n(196),m=n(804),v=n(130),_=n(317),b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y=i.b("MessagingChannelType",{LISTENER:"LISTENER",CONNECTION:"CONNECTION",BIDIRECTIONAL:"BIDIRECTIONAL"}),I=r.a.extend({mixinDependencies:[_.a],processId:a.c({type:String}),processState:a.c({readOnly:!0,type:v.a,get:function(){return this._processState}}),isConnected:a.c({readOnly:!0,type:Boolean,get:function(){return Object(v.c)(this.processState,v.a.LOADING,v.a.LOADED,v.a.RUNNING)}}),isTerminated:a.c({readOnly:!0,type:Boolean,get:function(){return Object(v.c)(this.processState,v.a.TERMINATED)}}),delegate:a.c(),channel:a.c({type:s.a}),localProtocol:a.c(),localProtocolTarget:a.c({type:r.a}),remoteProtocol:a.c(),remoteProxy:a.c({defaultValue:function(){var e=o.a(this);return r.a.extend({staticMembers:{__QUALIFIED_CLASS_NAME__:e+".remoteProxy"}}).create()}}),connectionTimeout:a.c({type:Number,defaultValue:1e4}),messagingChannelClass:a.c({type:p.a.constructor,defaultValue:p.a}),connect:function(){Object(v.b)(this.processState,v.a.NONE),this._processState=v.a.LOADING;var e=this.localProtocol,t=this.localProtocolTarget,n=this.remoteProtocol,i=this.connectionTimeout;this.createMessagingChannel(e,t,n,i)},disconnect:function(){var e=this;Object(v.b)(this.processState,v.a.LOADING,v.a.LOADED,v.a.RUNNING),this._processState=v.a.UNLOADING;var t=Array.from(this._messagingChannels);return this.cancelInvokeLaterMethods(),this._messagingChannels.clear(),(t.length?f.a.every(t.map(function(e){return e.stop()})):c.a.resolve()).then(function(){e._processState=v.a.UNLOADED})},terminate:function(){Object(v.b)(this.processState,v.a.UNLOADED),this._processState=v.a.TERMINATED;var e=this.remoteProxy,t=function(){l.b("The remote proxy is no longer connected.")};Object.keys(e).forEach(function(n){u.a(e[n])&&(e[n]=t)}),this.channel=null,this.remoteProxy=null,this._messagingChannels=null},createListenerOnlyMessagingChannel:function(e,t,n){this._createMessagingChannel({type:y.LISTENER,localProtocol:e,localProtocolTarget:t,timeoutMS:n})},createConnectionOnlyMessagingChannel:function(e,t){this._createMessagingChannel({type:y.CONNECTION,remoteProtocol:e,timeoutMS:t})},createMessagingChannel:function(e,t,n,i){this._createMessagingChannel({type:y.BIDIRECTIONAL,localProtocol:e,localProtocolTarget:t,remoteProtocol:n,timeoutMS:i})},_processState:a.c({type:v.a,defaultValue:v.a.NONE}),_messagingChannels:a.c({type:Set,defaultValue:d.b(Set)}),_createMessagingChannel:function(e){this._validateRequiredProperties(e);var t=y.BIDIRECTIONAL,n=y.LISTENER,i=y.CONNECTION,r=this.channel,a=this.remoteProxy,s=this._messagingChannels,o=this.messagingChannelClass.create(r);e.type!==t&&e.type!==n||o.setListener(e.localProtocol,e.localProtocolTarget),e.type!==t&&e.type!==i||o.setConnection(e.remoteProtocol,a);var c=e.timeoutMS;c&&(o.connectionTimeout=c),o.start(),s.add(o)},_validateRequiredProperties:function(e){var t=this.delegate,n=this.remoteProxy,i=this.channel,r=this.messagingChannelClass,a=y.BIDIRECTIONAL,o=y.LISTENER,c=y.CONNECTION;t||l.b("A delegate is required"),Object(g.b)(i,s.a)&&!i.isDisconnected||l.b("A connected CW.ChannelProtocol implementation is required"),"object"!==(void 0===n?"undefined":b(n))&&l.b("A remoteProxy Object is required"),r||l.b("A MessagingChannel Class is required."),e.type!==a&&e.type!==o||(Object(g.b)(e.localProtocol,m.a)||l.b("A valid localProtocol is required"),h.a(e.localProtocolTarget)||l.b("A localProtocolTarget is required")),e.type!==a&&e.type!==c||Object(g.b)(e.remoteProtocol,m.a)||l.b("A valid remoteProtocol is required")},staticMembers:{__QUALIFIED_CLASS_NAME__:"ProcessReference"}})},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n(34),r=n(262),a={mixinDependencies:[n(1138).a],staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"VIEWOUTLET",tagname:"view",name:"verticalScrollIndicator"},{type:"VIEWOUTLET",tagname:"view",name:"horizontalScrollIndicator"}]}}},hasVerticalScrollIndicator:Object(i.b)(!0),hasHorizontalScrollIndicator:Object(i.b)(!0),horizontalScrollIndicatorClass:r.a,verticalScrollIndicatorClass:r.b,scrollIndicatorOptions:{},topInset:Object(i.b)(0),scrollIndicatorTopMargin:Object(i.b)(6),scrollIndicatorTotalTopMargin:Object(i.b)({dependencies:["topInset","scrollIndicatorTopMargin"],readOnly:!0,get:Object.assign(function(){return this.topInset+this.scrollIndicatorTopMargin},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])+i.internalGet(this,t[1+n])}})}),scrollIndicatorBottomMargin:Object(i.b)(6),scrollIndicatorLeftMargin:Object(i.b)(6),scrollIndicatorRightMargin:Object(i.b)(6),verticalScrollIndicator:Object(i.b)({readOnly:!0,dependencies:["hasVerticalScrollIndicator"],downstreamBindings:{otherScrollIndicator:"(owner).horizontalScrollIndicator",scrollMin:"(owner).scrollMinY",scrollSize:"(owner).height",totalSize:"(owner).scrollHeight",scrollPosition:"(owner).scrollY",beginMargin:"(owner).scrollIndicatorTotalTopMargin",endMargin:"(owner).scrollIndicatorBottomMargin"},get:Object.assign(function(){return this.hasVerticalScrollIndicator?this.verticalScrollIndicatorClass.create(this.scrollIndicatorOptions):null},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?this.verticalScrollIndicatorClass.create(this.scrollIndicatorOptions):null}})}),horizontalScrollIndicator:Object(i.b)({readOnly:!0,dependencies:["hasHorizontalScrollIndicator"],downstreamBindings:{otherScrollIndicator:"(owner).verticalScrollIndicator",scrollMin:"(owner).scrollMinX",scrollSize:"(owner).width",totalSize:"(owner).scrollWidth",scrollPosition:"(owner).scrollX",beginMargin:"(owner).scrollIndicatorLeftMargin",endMargin:"(owner).scrollIndicatorRightMargin"},get:Object.assign(function(){return this.hasHorizontalScrollIndicator?this.horizontalScrollIndicatorClass.create(this.scrollIndicatorOptions):null},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?this.horizontalScrollIndicatorClass.create(this.scrollIndicatorOptions):null}})})}},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var i=n(41),r=n(65),a=n(174),s=n(1184),o=n(83),c=n(46),l={PENDING:-1,RESOLVED:0,REJECTED:1,state:i.c({get:function(){return this._thenableState},set:function(e){this._thenableState=e,e===this.PENDING&&this._setDefaults()}}),_isScheduled:!1,canceled:i.c({readOnly:!0,get:function(){return Boolean(this._thenableState===this.REJECTED&&this._thenableResult[0]&&"cancel"===this._thenableResult[0].name)}}),init:function(){var e=arguments;this._thenableCallbacks=[],this._finalCallbacks=[],this._thenableResult=[],this.__s._$JM$init.apply(this,e),this._setDefaults()},_setDefaults:function(){this._thenableState=this.PENDING,this._thenableResult.length=0},_recycleReusableCallbackArrays:function(){for(var e=this._thenableCallbacks.length;e--;)c.c.disposeInstance(this._thenableCallbacks[e]);this._thenableCallbacks.length=0,this._finalCallbacks.length=0},cleanup:function(){var e=arguments;this._thenableState===this.PENDING&&r.b("Disposing unresolved thenable."),this._unscheduleTimedRejection(),this._setDefaults(),this._recycleReusableCallbackArrays(),this.__s._$Wl$cleanup.apply(this,e)},then:function(e,t){this._thenableCallbacks.push(c.c.getInstanceFromParams.apply(c.c,arguments)),this._thenableState!==this.PENDING&&this._scheduleThenableCallbacks()},catch:function(e){this.then(null,e)},finally:function(e){this._finalCallbacks.push(e),this._thenableState!==this.PENDING&&this._scheduleThenableCallbacks()},thenSync:function(e,t){if(this._thenableState===this.PENDING)this.then.apply(this,arguments);else{var n=arguments[this._thenableState];if(n){var i=a.a(this._thenableResult,0,0);i.push(!0),n.apply(void 0,i)}}},resolve:function(e){if(this._unscheduleTimedRejection(),!this.canceled){this._thenableResult.length=arguments.length;for(var t=0,n=arguments.length;t<n;t++)this._thenableResult[t]=arguments[t];this._thenableResult.push(this),this._thenableState=this.RESOLVED,this._scheduleThenableCallbacks()}},reject:function(e){if(this._unscheduleTimedRejection(),!this.canceled){this._thenableResult.length=arguments.length;for(var t=0,n=arguments.length;t<n;t++)this._thenableResult[t]=arguments[t];this._thenableResult.push(this),this._thenableState=this.REJECTED,this._scheduleThenableCallbacks()}},rejectAfterTimeout:function(e,t){this._unscheduleTimedRejection(),this._thenableState!==this.PENDING||this.canceled||(this.retain(this,"self-retaining during scheduled rejection timeout"),this._scheduledRejectionTimeout=s.a(this._performScheduledRejection,e,arguments))},_unscheduleTimedRejection:function(){this._scheduledRejectionTimeout&&(clearTimeout(this._scheduledRejectionTimeout),this._scheduledRejectionTimeout=null,this.release(this,"self-retaining during scheduled rejection timeout"))},_performScheduledRejection:Object(o.a)(function(e){this.reject.apply(this,a.a(e,0,1))}),cancel:function(){this.canceled||this.reject(u)},_scheduleThenableCallbacks:function(e){this._isScheduled||(this._isScheduled=!0,this.retain(this,"self-retaining while firing callbacks"),h.push(this),d||(d=s.a(p,0)))},_fireThenableCallbacksWrapper:function(){this._isScheduled=!1,this._thenableState!==this.PENDING&&(this._fireThenableCallbacks(),this._recycleReusableCallbackArrays()),this.release(this,"self-retaining while firing callbacks")},_fireThenableCallbacks:function(){for(var e=0;e<this._thenableCallbacks.length;e++){var t=this._thenableCallbacks[e][this._thenableState];t&&t.apply(void 0,this._thenableResult)}for(var n=0;n<this._finalCallbacks.length;n++){var i=this._finalCallbacks[n];i&&i.apply(void 0,this._thenableResult)}},__superMap:{_$JM$init:"init",_$Wl$cleanup:"cleanup"}},u=new Error("canceled");u.name="cancel";var d=void 0,h=[],p=function(){d=void 0;var e=c.c.getAutodisposingInstanceFromSlice(h);h.length=0;for(var t=0;t<e.length;t++)e[t]._fireThenableCallbacksWrapper()}},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i={DISPOSED:1e3,NOT_ALLOWED:2e3,AUTH_FAILURE:3e3}},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n(798),r=n(141),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s={valueForChange:function(e,t){if(e.type!==r.c.REMOVE){var n=e.direction;if(n===r.a.RIGHT)return e.rightValue;if(n===r.a.LEFT)return e.leftValue;var s=e.baseValue,o=e.leftValue,c=e.rightValue;if("object"===(void 0===s?"undefined":a(s))&&e.type===r.c.UPDATE){var l=t?t+"."+e.key:e.key;return Object(r.d)(o,c,s,this,l)}return Object(i.a)(o,c)?o:r.b}}}},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return o});var i=n(409),r=n(34),a=n(36),s=n(219),o=i.a.extend(s.a,{staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"canvas",styles:{display:"block"},name:"lpkBadge"}]},className:"pok-live-photos-badge-view",__QUALIFIED_CLASS_NAME__:"LivePhotosBadgeView"},init:function(){var t=arguments;this.__s._$7H$init.apply(this,t);var n=e.LivePhotosKit;n&&(this._badge=new n.LivePhotoBadge({element:this.lpkBadge,borderRadius:3}))},_badge:null,badgeOrder:r.b(-1),progress:r.b(0),shouldShowError:r.b(!1),_didAttach:a.f("isAttached",function(e){e&&this._badge&&this.resetBadge()}),_onProgressChange:a.f("progress","shouldShowError",function(e,t){this._badge&&(this._badge.shouldShowError=t,this._badge.progress=e)}),playLivePhoto:a.g(),stopLivePhoto:a.g(),attachPlayerInstance:function(e){var t=e.__internalLPKPlayer__;this._badge&&this._badge.attachPlayerInstance(t)},resetBadge:function(){this._badge&&this._badge.reset()},updateBadgeText:function(e){this._badge.updateBadgeText(e)},__superMap:{_$7H$init:"init"}})}).call(this,n(6))},function(e,t,n){"use strict";n.d(t,"a",function(){return p}),n.d(t,"c",function(){return f}),n.d(t,"b",function(){return g});var i,r=n(133),a=n(131),s=n(192),o="9",c="10.13",l="11",u="11",d=((i={})[r.a.ANDROID]=/ Android (\d+)\.(\d+)\.(\d+)/,i[r.a.CHROMEOS]=/ CrOS x(?:\d+)_(?:\d+) (\d+)\.(\d+)\.(\d+)/,i[r.a.LINUX]=/ Linux /,i);function h(e,t){if("string"==typeof e&&(e=e.split(".").map(parseFloat)),"string"==typeof t&&(t=t.split(".").map(parseFloat)),!e.some(isNaN)&&!t.some(isNaN)){for(var n=Math.max(e.length,t.length),i=0;i<n;i++){var r=e[i]||0,a=t[i]||0;if(r>a)return 1;if(r<a)return-1}return 0}}function p(){var e=m.getPlatformVersions();if(!e)return!1;var t=a.a.sharedInstance.current;if(d[t])return t===r.a.ANDROID&&h(e,o)>=0;var n=s.a.sharedInstance;return n.isiOS?h(e,l)>=0:n.isMac?h(e,c)>=0:!!n.isWindows&&h(e,u)>=0}function f(){var e=["public.jpeg","public.png","com.compuserve.gif"];return m.isDeviceH265Compatible()&&e.unshift("public.heic"),{value:[].concat(e,["com.apple.quicktime-movie","public.mpeg-4"]),type:"STRING_LIST"}}function g(){var e=["H.264"];return m.isDeviceH265Compatible()&&e.unshift("HEVC"),{value:e,type:"STRING_LIST"}}var m={getPlatformVersions:function(){var e=d[a.a.sharedInstance.current];if(e){var t=m.navigatorUserAgent.match(e);return t?[0|Number(t[1]),0|Number(t[2]),0|Number(t[3])]:void 0}var n=s.a.sharedInstance,i=n.osMajorVersion,r=n.osMinorVersion;if(i<=1/0&&r<=1/0)return[i,r]},compareVersions:h,isDeviceH265Compatible:p,navigatorUserAgent:navigator.userAgent,UA_VERSION_REGEXP_BY_PLATFORM:d}},function(e,t,n){"use strict";var i=n(1125),r=n(775),a=n(65),s=n(41),o=n(34),c=n(180),l=n(93),u=n(1275),d=n(1185),h=n(96),p=n(195),f=n(784),g=n(353).a.extend({outgoingWindow:Object(o.b)({readOnly:!0,get:function(){var e=window.parent;return e?{actualOutgoingWindow:e,postMessage:function(e,t){var n=this.actualOutgoingWindow;if(n.postMessage)return n.postMessage(e,t);f.b.warn("ParentWindowChannel: postMessage of "+e+" to detached iframe at "+t+" was ignored")}}:null}}),staticMembers:{__QUALIFIED_CLASS_NAME__:"ParentWindowChannel"}}),m=n(54),v=n(123),_=n(1173),b=n(196),y=n(804),I={mixinDependencies:[y.a],name:"MessagingToChildProtocol",version:.1,beginLaunching:m.a.define(),hostingStateDidChange:m.a.define(),openItems:m.a.define()},w=n(356),S=n(130),C={mixinDependencies:[y.a],name:"MessagingFromChildProtocol",version:.1,isReadyToReceiveMessages:m.a.define(),didFinishLaunching:m.a.define(),isReadyToTerminateDidChange:m.a.define(),didEnd:m.a.define(),reportNonFatalError:m.a.define(),recordException:m.a.define(),willUnload:m.a.define(),wantsReload:m.a.define()},O=w.a.extend({delegate:s.c({type:I}),localProtocol:I,localProtocolTarget:s.c({readOnly:!0,type:I,get:function(){return this.delegate}}),remoteProtocol:C,notifyChildApplicationIsReady:function(){var e=this;return Object(S.b)(this.processState,S.a.LOADING),this._processState=S.a.LOADED,this.remoteProxy.isReadyToReceiveMessages().then(function(t){return t.isOK&&(Object(S.b)(e.processState,S.a.LOADED),e._processState=S.a.RUNNING),t})},staticMembers:{__QUALIFIED_CLASS_NAME__:"ParentProcessReference"}}),A=n(317),E=n(82),T=n(1174),M=n(194),D=Object.freeze({USER_INITIATED:"USER_INITIATED",UNCAUGHT_EXCEPTION:"UNCAUGHT_EXCEPTION",CANNOT_LOAD_STARTUP_DATA:"CANNOT_LOAD_STARTUP_DATA",TIMEOUT:"TIMEOUT",DISCONNECTED:"DISCONNECTED"}),L=n(316),N={mixinDependencies:[I,{messagingResponseErrorTerminationMethod:E.a.define(),terminateIfMessagingResponseError:function(e){var t=this.messagingResponseErrorTerminationMethod;T.a(t)||a.b("A messagingResponseErrorTerminationMethod property returning a function is required"),_.a(e,M.a)||a.b("A MessagingResponse is required.");var n=!1;return e.isDisconnected||e.isCanceled||e.isOK||(t.call.apply(t,[this].concat(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;_.a(e,M.a)||a.b("A MessagingResponse Instance is required.");var n=D.USER_INITIATED,i=D.TIMEOUT,r=D.DISCONNECTED,s=D.UNCAUGHT_EXCEPTION;return e.isOK?s=n:e.isTimeout?s=i:e.isDisconnected&&(s=r),[s,Object(L.a)(e.serialize(),t+1)]}(e,2))),n=!0),n}},A.a],parentProcessReferenceClass:s.c({type:O.constructor,defaultValue:O}),parentProcessReferenceDelegate:s.c({type:I,defaultValue:function(){return this}}),parentProcessReference:s.c({type:O}),processState:s.c({readOnly:!0,type:S.a,get:function(){return this._processState}}),isStarted:s.c({readOnly:!0,type:Boolean,get:function(){return Object(S.c)(this.processState,S.a.LOADING,S.a.LOADED,S.a.RUNNING)}}),isTerminated:s.c({readOnly:!0,type:Boolean,get:function(){return Object(S.c)(this.processState,S.a.TERMINATED)}}),channel:s.c({type:p.a}),sessionInfo:s.c({type:Object,defaultValue:c.b(Object)}),hostInfo:s.c({type:Object,defaultValue:c.b(Object)}),processInfo:s.c({type:Object,defaultValue:c.b(Object)}),processId:s.c({type:String}),parentProcessId:s.c({type:String}),messagingResponseErrorTerminationMethod:s.c({readOnly:!0,type:Function,defaultValue:function(){return this.terminateWithReasonAndInfo}}),start:function(){var e=this;Object(S.b)(this.processState,S.a.NONE),this._processState=S.a.LOADING;var t=this.parentProcessReferenceClass,n=this.channel;if(t){Object(b.b)(n,p.a)||a.b("A CW.ChannelProtocol implementation is required");var i=this._createParentProcessReference(n);i.connect(),i.notifyChildApplicationIsReady().then(function(t){t.isOK?e._processState=S.a.LOADED:e.terminateIfMessagingResponseError(t)})}else this._processState=S.a.LOADED},run:m.a.define(),stop:function(){var e=this;Object(S.b)(this.processState,S.a.LOADING,S.a.LOADED,S.a.RUNNING),this._processState=S.a.UNLOADING,this.cancelInvokeLaterMethods();var t=this.parentProcessReference,n=d.a.resolve();return t&&(this.parentProcessReference=null,t.isConnected&&(n=n.then(function(){return t.disconnect()})),n=n.then(function(){return t.isTerminated||t.terminate()})),n.then(function(){return e._processState=S.a.UNLOADED})},terminate:function(){Object(S.b)(this.processState,S.a.UNLOADED),this._processState=S.a.TERMINATED,this.channel&&!this.channel.isDisconnected&&this.channel.disconnect(),this.processId=null,this.parentProcessId=null,this.hostInfo=null,this.sessionInfo=null,this.processInfo=null,this.channel=null},terminateWithReasonAndInfo:function(e,t){var n=this;v.a(e)||a.b("terminateWithReasonAndInfo requires a reason as an argument"),t&&!r.a(t)&&a.b("terminateWithReasonAndInfo optional info argument should be a hash");var i=this.parentProcessReference;return i&&i.isConnected&&i.remoteProxy.didEnd(e,t),(this.isStarted?this.stop():d.a.resolve()).then(function(){return n.isTerminated||n.terminate()})},beginLaunching:function(e,t,n){var i=this;if(Object(S.b)(this.processState,S.a.LOADED),this._updateHostingAndSessionInfo(e,t),!_.a(n,Object))throw new TypeError("Invalid process info");if(!_.a(n.launchOptions,Object))throw new TypeError("Invalid launchOptions");if(!n.launchOptions.launchReason)throw new TypeError("Missing launchOptions.launchReason");n.launchOptions=Object.freeze(n.launchOptions),this.processInfo=Object.freeze(n),this.parentProcessId=n.parentProcessId,this.processId=n.processId,this.parentProcessReference&&(this.parentProcessReference.processId=n.parentProcessId),this.invokeLater(function(){d.a.resolve().then(function(){return i.run()}).then(function(){return i._processState=S.a.RUNNING}).then(function(){return i._notifyParentThatProcessDidFinishLaunchingIfNeeded()})})},openItems:function(e){},hostingStateDidChange:function(e,t){Object(S.b)(this.processState,S.a.RUNNING),this._updateHostingAndSessionInfo(e,t)},_processState:s.c({type:S.a,defaultValue:S.a.NONE}),_createParentProcessReference:function(e){var t=this.parentProcessReferenceClass,n=this.parentProcessReferenceDelegate,i=this.parentProcessId;t&&n||a.b("A parentProcessReferenceClass and a parentProcessReferenceDelegate are required to create a ParentProcessReference.");var r=t.create({processId:i,delegate:n,channel:e});return this.parentProcessReference=r,r},_updateHostingAndSessionInfo:function(e,t){if(Object(S.b)(this.processState,S.a.LOADED,S.a.RUNNING),!_.a(e,Object))throw new TypeError("Invalid session info");if(!_.a(t,Object))throw new TypeError("Invalid host info");this.sessionInfo=Object.freeze(e),this.hostInfo=Object.freeze(t)},_notifyParentThatProcessDidFinishLaunchingIfNeeded:function(){var e=this;Object(S.b)(this.processState,S.a.RUNNING);var t=this.parentProcessReference;if(t&&t.isConnected)return t.remoteProxy.didFinishLaunching().then(function(t){return e.terminateIfMessagingResponseError(t)})}},P=n(1198),R=Object.freeze({USER_LAUNCH:"USER_LAUNCH",ITEMS_OPENED:"ITEMS_OPENED"}),x=n(131),F=n(318),k=n(242),V=n(319);n.d(t,"a",function(){return j});var j=i.a.extend({mixinDependencies:[N],staticMembers:{main:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r.a(e)&&e.rootViewControllerClass&&a.b("ProcessKit Application is not intended for UI display");var t={defaultApplicationClass:j,defaultDelegateClass:F.a,defaultDelegateClassProtocol:k.a};Object(V.a)(e,t)},__QUALIFIED_CLASS_NAME__:"Application"},applicationName:s.c({type:String,readOnly:!0,get:function(){var e=this.processInfo;return e?e.processName:void 0}}),sessionInfo:o.b({type:Object,defaultValue:c.b(Object)}),hostInfo:o.b({type:Object,defaultValue:c.b(Object)}),processState:o.b({readOnly:!0,binding:l.c("_processState")}),delegate:s.c({type:k.a}),setup:function(){if(Object(S.b)(this.processState,S.a.NONE),Object(P.b)())this.channel=this._parentChannelProtocolClass.create({remoteOrigin:Object(P.a)()}),this.start();else{this.parentProcessReferenceClass=null,this.start();var e={primaryInteractionMode:x.a.sharedInstance.primaryInteractionMode,platformType:x.a.sharedInstance.current},t={processId:u.a(),launchOptions:{launchReason:R.USER_LAUNCH}};this.beginLaunching({},e,t)}},run:function(){var e=this;Object(S.b)(this.processState,S.a.LOADED);var t=this.delegate,n=this.processInfo.launchOptions;return d.a.all(i.a.prototype.Initializers.map(function(t){return t.create().run(e)})).then(function(){return t.applicationWillFinishLaunching(e,n)}).then(function(){return i.a.prototype.run.call(e)}).then(function(){return t.applicationDidFinishLaunching(e,n)}).catch(h.a(function(e){throw e}))},createMessagingChannel:function(e,t,n){var i=this.parentProcessReference;return i&&i.channel||a.b("Unable to connect to parent. Can not create MessagingChannel"),i.createMessagingChannel(e,t,n),i.remoteProxy},_processState:o.b({type:S.a,defaultValue:S.a.NONE}),_parentChannelProtocolClass:s.c({type:p.a,defaultValue:g})})},function(e,t,n){"use strict";var i=n(788),r=n(781),a=n(1230),s=n(34),o=n(36),c=n(1127),l=n(409),u=n(1233),d=(n(1020),l.a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"spinnerView"}],classes:["full-page-spinner-view"],styles:{opacity:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"opacity",attributes:{},unit:null,property:"opacity"}}}},__QUALIFIED_CLASS_NAME__:"FullPageSpinnerView"},spinnerView:s.b({strong:!0,type:u.a,get:function(){return u.a.create({size:32,color:"white",isVisible:this.bindingFor("isVisible")})}}),isVisible:s.b(),opacity:s.b()}));n.d(t,"a",function(){return h});var h=i.a.extend(r.a,{mixinDependencies:[a.a,c.a],viewClass:d,view:s.b({downstreamBindings:{isVisible:"(owner)._spinnerIsActuallyVisible",opacity:"(owner)._spinnerAnimatedOpacity"}}),fadeIn:function(){this.shouldShowSpinner=!0},fadeOut:function(){this.shouldShowSpinner=!1},shouldShowSpinner:s.b(!1),_spinnerIsActuallyVisible:s.b(!1),_spinnerAnimatedOpacity:c.b(0),_shouldShowSpinnerObserver:o.f("shouldShowSpinner",function(e){e?(this._spinnerIsActuallyVisible=!0,this.animate("_spinnerAnimatedOpacity",1,250)):this._spinnerAnimatedOpacity>0?this.animate("_spinnerAnimatedOpacity",0,250):(this._spinnerIsActuallyVisible=!1,this._spinnerAnimatedOpacity=0)}),_spinnerAnimatedOpacityObserver:o.f("_spinnerAnimatedOpacity",function(e){0===e&&(this._spinnerIsActuallyVisible=!1)}),_visibilityObserver:o.f("_spinnerIsActuallyVisible",function(e){e?this.show():this.hide()}),staticMembers:{__QUALIFIED_CLASS_NAME__:"FullPageSpinnerViewController"}})},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n(1185),r=n(1177),a=n(65),s=n(287).a.extend({callRemoteProcedure:function(e){var t,n=this.channel;c(n,e);for(var r=i.a.create(),s=arguments.length,l=Array(s>1?s-1:0),u=1;u<s;u++)l[u-1]=arguments[u];var d=(t=this.messageFormatter).generateCallMessageFor.apply(t,[e].concat(l));return function(e,t,n){o[t]&&o[t][1]===n&&Object(a.b)("A handler was already registered for response for message id",{messageId:t,handler:n}),o[t]=[e,n]}(r,d.id,this),n.send(this.serializer.encode(d)),r},sendNotification:function(e){var t,n=this.channel;c(n,e);for(var i=arguments.length,r=Array(i>1?i-1:0),a=1;a<i;a++)r[a-1]=arguments[a];var s=(t=this.messageFormatter).generateNotificationMessageFor.apply(t,[e].concat(r));n.send(this.serializer.encode(s))},shouldHandleMessage:function(e){return!!e&&Object(r.a)(e.jsonrpc)&&e.jsonrpc===this.messageFormatter.jsonRpcVersion&&(Object(r.a)(e.result)||Object(r.a)(e.error))},handleMessage:function(e){var t=function(e,t){var n=o[e];if(n&&n[1]===t)return o[e]=void 0,n[0]}(e.id,this);t&&(Object(r.a)(e.result)?function(e,t){t.resolve(e.result)}(e,t):Object(r.a)(e.error)&&function(e,t){t.reject(e.error)}(e,t))},staticMembers:{__QUALIFIED_CLASS_NAME__:"JsonRpcCaller"}}),o={};function c(e,t){e&&!e.isDisconnected||Object(a.b)("Attempted to call `%{methodName}` without a connected channel.",{methodName:t,sender:this})}},,,function(e,t,n){var i=n(19),r=n(15).document,a=i(r)&&i(r.createElement);e.exports=function(e){return a?r.createElement(e):{}}},function(e,t,n){var i=n(15),r=n(55),a=n(215),s=n(441),o=n(27).f;e.exports=function(e){var t=r.Symbol||(r.Symbol=a?{}:i.Symbol||{});"_"==e.charAt(0)||e in t||o(t,e,{value:s.f(e)})}},function(e,t,n){var i=n(293)("keys"),r=n(231);e.exports=function(e){return i[e]||(i[e]=r(e))}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){var i=n(15).document;e.exports=i&&i.documentElement},function(e,t,n){var i=n(19),r=n(14),a=function(e,t){if(r(e),!i(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,i){try{(i=n(56)(Function.call,n(52).f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return a(e,n),t?e.__proto__=n:i(e,n),e}}({},!1):void 0),check:a}},function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},function(e,t,n){var i=n(19),r=n(373).set;e.exports=function(e,t,n){var a,s=t.constructor;return s!==n&&"function"==typeof s&&(a=s.prototype)!==n.prototype&&i(a)&&r&&r(e,a),e}},function(e,t,n){"use strict";var i=n(62),r=n(61);e.exports=function(e){var t=String(r(this)),n="",a=i(e);if(a<0||a==1/0)throw RangeError("Count can't be negative");for(;a>0;(a>>>=1)&&(t+=t))1&a&&(n+=t);return n}},function(e,t){e.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1}},function(e,t){var n=Math.expm1;e.exports=!n||n(10)>22025.465794806718||n(10)<22025.465794806718||-2e-17!=n(-2e-17)?function(e){return 0==(e=+e)?e:e>-1e-6&&e<1e-6?e+e*e/2:Math.exp(e)-1}:n},function(e,t,n){var i=n(62),r=n(61);e.exports=function(e){return function(t,n){var a,s,o=String(r(t)),c=i(n),l=o.length;return c<0||c>=l?e?"":void 0:(a=o.charCodeAt(c))<55296||a>56319||c+1===l||(s=o.charCodeAt(c+1))<56320||s>57343?e?o.charAt(c):a:e?o.slice(c,c+2):s-56320+(a-55296<<10)+65536}}},function(e,t,n){"use strict";var i=n(215),r=n(3),a=n(44),s=n(43),o=n(256),c=n(381),l=n(254),u=n(53),d=n(24)("iterator"),h=!([].keys&&"next"in[].keys()),p=function(){return this};e.exports=function(e,t,n,f,g,m,v){c(n,t,f);var _,b,y,I=function(e){if(!h&&e in O)return O[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},w=t+" Iterator",S="values"==g,C=!1,O=e.prototype,A=O[d]||O["@@iterator"]||g&&O[g],E=A||I(g),T=g?S?I("entries"):E:void 0,M="Array"==t&&O.entries||A;if(M&&(y=u(M.call(new e)))!==Object.prototype&&y.next&&(l(y,w,!0),i||"function"==typeof y[d]||s(y,d,p)),S&&A&&"values"!==A.name&&(C=!0,E=function(){return A.call(this)}),i&&!v||!h&&!C&&O[d]||s(O,d,E),o[t]=E,o[w]=p,g)if(_={values:S?E:I("values"),keys:m?E:I("keys"),entries:T},v)for(b in _)b in O||a(O,b,_[b]);else r(r.P+r.F*(h||C),t,_);return _}},function(e,t,n){"use strict";var i=n(234),r=n(230),a=n(254),s={};n(43)(s,n(24)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=i(s,{next:r(1,n)}),a(e,t+" Iterator")}},function(e,t,n){var i=n(297),r=n(61);e.exports=function(e,t,n){if(i(t))throw TypeError("String#"+n+" doesn't accept regex!");return String(r(e))}},function(e,t,n){var i=n(24)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[i]=!1,!"/./"[e](t)}catch(e){}}return!0}},function(e,t,n){var i=n(256),r=n(24)("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(i.Array===e||a[r]===e)}},function(e,t,n){"use strict";var i=n(27),r=n(230);e.exports=function(e,t,n){t in e?i.f(e,t,r(0,n)):e[t]=n}},function(e,t,n){var i=n(276),r=n(24)("iterator"),a=n(256);e.exports=n(55).getIteratorMethod=function(e){if(void 0!=e)return e[r]||e["@@iterator"]||a[i(e)]}},function(e,t,n){var i=n(661);e.exports=function(e,t){return new(i(e))(t)}},function(e,t,n){"use strict";var i=n(31),r=n(233),a=n(28);e.exports=function(e){for(var t=i(this),n=a(t.length),s=arguments.length,o=r(s>1?arguments[1]:void 0,n),c=s>2?arguments[2]:void 0,l=void 0===c?n:r(c,n);l>o;)t[o++]=e;return t}},function(e,t,n){"use strict";var i=n(216),r=n(457),a=n(256),s=n(51);e.exports=n(380)(Array,"Array",function(e,t){this._t=s(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,r(1)):r(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])},"values"),a.Arguments=a.Array,i("keys"),i("values"),i("entries")},function(e,t,n){var i,r,a,s=n(56),o=n(447),c=n(372),l=n(368),u=n(15),d=u.process,h=u.setImmediate,p=u.clearImmediate,f=u.MessageChannel,g=u.Dispatch,m=0,v={},_=function(){var e=+this;if(v.hasOwnProperty(e)){var t=v[e];delete v[e],t()}},b=function(e){_.call(e.data)};h&&p||(h=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return v[++m]=function(){o("function"==typeof e?e:Function(e),t)},i(m),m},p=function(e){delete v[e]},"process"==n(57)(d)?i=function(e){d.nextTick(s(_,e,1))}:g&&g.now?i=function(e){g.now(s(_,e,1))}:f?(a=(r=new f).port2,r.port1.onmessage=b,i=s(a.postMessage,a,1)):u.addEventListener&&"function"==typeof postMessage&&!u.importScripts?(i=function(e){u.postMessage(e+"","*")},u.addEventListener("message",b,!1)):i="onreadystatechange"in l("script")?function(e){c.appendChild(l("script")).onreadystatechange=function(){c.removeChild(this),_.call(e)}}:function(e){setTimeout(s(_,e,1),0)}),e.exports={set:h,clear:p}},function(e,t,n){var i=n(15),r=n(390).set,a=i.MutationObserver||i.WebKitMutationObserver,s=i.process,o=i.Promise,c="process"==n(57)(s);e.exports=function(){var e,t,n,l=function(){var i,r;for(c&&(i=s.domain)&&i.exit();e;){r=e.fn,e=e.next;try{r()}catch(i){throw e?n():t=void 0,i}}t=void 0,i&&i.enter()};if(c)n=function(){s.nextTick(l)};else if(!a||i.navigator&&i.navigator.standalone)if(o&&o.resolve){var u=o.resolve(void 0);n=function(){u.then(l)}}else n=function(){r.call(i,l)};else{var d=!0,h=document.createTextNode("");new a(l).observe(h,{characterData:!0}),n=function(){h.data=d=!d}}return function(i){var r={fn:i,next:void 0};t&&(t.next=r),e||(e=r,n()),t=r}}},function(e,t,n){"use strict";var i=n(35);e.exports.f=function(e){return new function(e){var t,n;this.promise=new e(function(e,i){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=i}),this.resolve=i(t),this.reject=i(n)}(e)}},function(e,t,n){"use strict";var i=n(15),r=n(26),a=n(215),s=n(304),o=n(43),c=n(239),l=n(18),u=n(237),d=n(62),h=n(28),p=n(466),f=n(235).f,g=n(27).f,m=n(388),v=n(254),_="prototype",b="Wrong index!",y=i.ArrayBuffer,I=i.DataView,w=i.Math,S=i.RangeError,C=i.Infinity,O=y,A=w.abs,E=w.pow,T=w.floor,M=w.log,D=w.LN2,L=r?"_b":"buffer",N=r?"_l":"byteLength",P=r?"_o":"byteOffset";function R(e,t,n){var i,r,a,s=new Array(n),o=8*n-t-1,c=(1<<o)-1,l=c>>1,u=23===t?E(2,-24)-E(2,-77):0,d=0,h=e<0||0===e&&1/e<0?1:0;for((e=A(e))!=e||e===C?(r=e!=e?1:0,i=c):(i=T(M(e)/D),e*(a=E(2,-i))<1&&(i--,a*=2),(e+=i+l>=1?u/a:u*E(2,1-l))*a>=2&&(i++,a/=2),i+l>=c?(r=0,i=c):i+l>=1?(r=(e*a-1)*E(2,t),i+=l):(r=e*E(2,l-1)*E(2,t),i=0));t>=8;s[d++]=255&r,r/=256,t-=8);for(i=i<<t|r,o+=t;o>0;s[d++]=255&i,i/=256,o-=8);return s[--d]|=128*h,s}function x(e,t,n){var i,r=8*n-t-1,a=(1<<r)-1,s=a>>1,o=r-7,c=n-1,l=e[c--],u=127&l;for(l>>=7;o>0;u=256*u+e[c],c--,o-=8);for(i=u&(1<<-o)-1,u>>=-o,o+=t;o>0;i=256*i+e[c],c--,o-=8);if(0===u)u=1-s;else{if(u===a)return i?NaN:l?-C:C;i+=E(2,t),u-=s}return(l?-1:1)*i*E(2,u-t)}function F(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]}function k(e){return[255&e]}function V(e){return[255&e,e>>8&255]}function j(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]}function B(e){return R(e,52,8)}function U(e){return R(e,23,4)}function W(e,t,n){g(e[_],t,{get:function(){return this[n]}})}function G(e,t,n,i){var r=p(+n);if(r+t>e[N])throw S(b);var a=e[L]._b,s=r+e[P],o=a.slice(s,s+t);return i?o:o.reverse()}function H(e,t,n,i,r,a){var s=p(+n);if(s+t>e[N])throw S(b);for(var o=e[L]._b,c=s+e[P],l=i(+r),u=0;u<t;u++)o[c+u]=l[a?u:t-u-1]}if(s.ABV){if(!l(function(){y(1)})||!l(function(){new y(-1)})||l(function(){return new y,new y(1.5),new y(NaN),"ArrayBuffer"!=y.name})){for(var $,z=(y=function(e){return u(this,y),new O(p(e))})[_]=O[_],K=f(O),Q=0;K.length>Q;)($=K[Q++])in y||o(y,$,O[$]);a||(z.constructor=y)}var q=new I(new y(2)),Y=I[_].setInt8;q.setInt8(0,2147483648),q.setInt8(1,2147483649),!q.getInt8(0)&&q.getInt8(1)||c(I[_],{setInt8:function(e,t){Y.call(this,e,t<<24>>24)},setUint8:function(e,t){Y.call(this,e,t<<24>>24)}},!0)}else y=function(e){u(this,y,"ArrayBuffer");var t=p(e);this._b=m.call(new Array(t),0),this[N]=t},I=function(e,t,n){u(this,I,"DataView"),u(e,y,"DataView");var i=e[N],r=d(t);if(r<0||r>i)throw S("Wrong offset!");if(r+(n=void 0===n?i-r:h(n))>i)throw S("Wrong length!");this[L]=e,this[P]=r,this[N]=n},r&&(W(y,"byteLength","_l"),W(I,"buffer","_b"),W(I,"byteLength","_l"),W(I,"byteOffset","_o")),c(I[_],{getInt8:function(e){return G(this,1,e)[0]<<24>>24},getUint8:function(e){return G(this,1,e)[0]},getInt16:function(e){var t=G(this,2,e,arguments[1]);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=G(this,2,e,arguments[1]);return t[1]<<8|t[0]},getInt32:function(e){return F(G(this,4,e,arguments[1]))},getUint32:function(e){return F(G(this,4,e,arguments[1]))>>>0},getFloat32:function(e){return x(G(this,4,e,arguments[1]),23,4)},getFloat64:function(e){return x(G(this,8,e,arguments[1]),52,8)},setInt8:function(e,t){H(this,1,e,k,t)},setUint8:function(e,t){H(this,1,e,k,t)},setInt16:function(e,t){H(this,2,e,V,t,arguments[2])},setUint16:function(e,t){H(this,2,e,V,t,arguments[2])},setInt32:function(e,t){H(this,4,e,j,t,arguments[2])},setUint32:function(e,t){H(this,4,e,j,t,arguments[2])},setFloat32:function(e,t){H(this,4,e,U,t,arguments[2])},setFloat64:function(e,t){H(this,8,e,B,t,arguments[2])}});v(y,"ArrayBuffer"),v(I,"DataView"),o(I[_],s.VIEW,!0),t.ArrayBuffer=y,t.DataView=I},function(e,t,n){"use strict";var i=n(172);i.b(i.c(),{"Application.Title":"Photos","Application.HeaderForMouse.HelpButton.Title":"Help and Support","Application.HeaderForMouse.SignInButton.Title":"Sign In","Application.HeaderForMouse.SignInButton.Tooltip":"Sign into iCloud","Application.HeaderForMouse.AccountSettings":"iCloud Settings","Application.HeaderForMouse.SignOutButton":"Sign Out","Application.HeaderForMouse.UserAction.Title":"iCloud Settings & Sign Out","Button.Select":"Select","Button.Cancel":"Cancel","Container.Title.PHOTOS":"All Photos"})},function(e,t,n){},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n(177),r=Object(i.b)("LOAD_STATUS",function(e){e("NOT_LOADED"),e("LOADED"),e("ERRORED")})},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n(69),r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},a={staticMembers:{list:function(e){return this.performOperation(i.a.READ.LIST,e)},relist:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.list(r({},e,{isForcedFetch:!0}))},loadAll:function(){return this.list.apply(this,arguments)}}}},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n(69),r=n(87),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},s={staticMembers:{createPlaceholder:function(e,t){var n=i.b(),r=this.getPlaceholderDataHashFromPrimaryKey(e);return n.loadData(this,r,!0),this.find(e,t||n)},getPlaceholderDataHashFromPrimaryKey:function(e){return a({pk:e},this.getPartsFromPrimaryKey(e))},getPartsFromPrimaryKey:function(e){return JSON.parse(e)},getPrimaryKeyFromParts:function(e){return JSON.stringify(e)}},pk:r.c({isPrimaryKey:!0,readOnly:!0})}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n(65);function r(e,t){if(e||Object(i.b)("findHandlerForOperationType must receive a type"),t)for(var n=0,a=t.length;n<a;n++){var s=t[n],o=s.handlesType;if(o===e||!o&&r(e,s.nestedOperationHandlers))return s}}},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=n(177).b("ContainerType",{NORMAL:0,SMART:1,FACE:2,FOLDER:3,PREDEFINED_SMART:4,REFERENCING:5})},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n(177),r=Object(i.b)("SelectionOperations",function(e){e("TOGGLE"),e("EXTEND"),e("SET"),e("ADD"),e("REMOVE")})},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n(177),r=Object(i.b)("SelectionDirections",function(e){e("UP"),e("DOWN"),e("LEFT"),e("RIGHT")})},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n(41),r=n(81),a={areStateUpdatesPaused:0,state:i.c({defaultValue:r.a.prototype._properties.state.defaultValue,set:function(e){var t=arguments;if(!this.areStateUpdatesPaused)return this.__s._$6S$set.apply(this,t);this._pausedState=e},get:function(){var e=arguments;return this.areStateUpdatesPaused?this._pausedState:this.__s._$8J$get.apply(this,e)},__superMap:{_$6S$set:"set",_$8J$get:"get"}}),pauseStateChanges:function(){this.areStateUpdatesPaused||(this._pausedState=this.state),this.areStateUpdatesPaused++},resumeStateChanges:function(){this.areStateUpdatesPaused--,this.areStateUpdatesPaused||(this.state!==this._pausedState&&(this.state=this._pausedState),this._pausedState=void 0)}}},function(e,t,n){"use strict";n.d(t,"b",function(){return u}),n.d(t,"c",function(){return d}),n.d(t,"a",function(){return h});var i=n(177),r=n(34),a=n(93),s=n(36),o=n(1127),c=n(1235),l=n(206),u=i.b("LongJobStatus",{NOT_STARTED:"NOT_STARTED",PREPARING:"PREPARING",IN_PROGRESS:"IN_PROGRESS",COMPLETED:"COMPLETED",FAILED:"FAILED"}),d={mixinDependencies:[{mixinDependencies:[o.a],jobProgress:r.b(0),jobStatus:r.b({type:u}),jobSize:r.b(1),animatedJobProgress:c.a({readOnly:!0,binding:a.c("jobProgress"),updatesDurationWhenTheseChange:["isReceivingPeriodicJobProgressUpdates"],decideDuration:function(e,t,n){if(!(e>t)||!n&&1!==e)return 0;var i=performance.now(),r=this._doublePreviousJobProgressUpdateTime||i;return 1===e?500:1.5*(i-r)||1e3}}),isReceivingPeriodicJobProgressUpdates:r.b(!0),_measureJobProgressUpdateTiming:s.f({inputs:["jobProgress","isReceivingPeriodicJobProgressUpdates"],callback:function(e,t){t?(this._doublePreviousJobProgressUpdateTime=this._previousJobProgressUpdateTime,this._previousJobProgressUpdateTime=performance.now()):this._doublePreviousJobProgressUpdateTime=this._previousJobProgressUpdateTime=void 0}})},l.b],isReceivingPeriodicJobProgressUpdates:a.c("isPolling")},h={mixinDependencies:[d,l.a]}},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var i=n(221),r=n(36),a=n(34),s=n(41),o=n(1173),c=n(409),l=i.a.extend(r.a,{item:a.b(),key:s.c({set:function(e){return this.item=e?e.value:null,e}}),itemIsObservable:s.c({readOnly:!0,dependencies:["item"],get:Object.assign(function(){return o.a(this.item,r.a)},{__CW__getter:function(e,t,n,i){return o.a(i.internalGet(this,t[0+n]),r.a)}})}),delegate:null,isDisabled:a.b({type:"boolean",defaultValue:!1}),view:s.c(),viewClass:s.c({defaultValue:c.a}),_didEnter:function(e){e.selectedItem?this.view.isHighlighted=e.selectedItem===this.item:e.selection?this.view.isHighlighted=e.selection.contains(this.handle):this.view.isHighlighted=!1,this.delegate&&this.delegate.viewItemDidEnter?this.delegate.viewItemDidEnter(e,this):this.didEnter(e)},_didUpdate:function(e){e.selectedItem?this.view.isHighlighted=e.selectedItem===this.item:e.selection?this.view.isHighlighted=e.selection.contains(this.handle):this.view.isHighlighted=!1,this.delegate&&this.delegate.viewItemDidUpdate?this.delegate.viewItemDidUpdate(e,this):this.didUpdate(e)},_shouldHighlight:function(e){return this.delegate&&this.delegate.viewItemShouldHighlight?this.delegate.viewItemShouldHighlight(this,e):this.shouldHighlight(e)},_willExit:function(e){this.delegate&&this.delegate.viewItemDidExit?this.delegate.viewItemWillExit(e,this):this.willExit(e)},didEnter:function(e){},didUpdate:function(e){},shouldHighlight:function(e){return!this.isDisabled},willExit:function(e){},staticMembers:{__QUALIFIED_CLASS_NAME__:"_ViewItem"}})},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n(1128),r=n(65),a=i.a.extend({init:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e||r.b("URLRequest: no url specified");var n=t.credentials;if(n&&!t.hasOwnProperty("useCredentialsIfCrossOrigin"))switch(n){case"include":t.useCredentialsIfCrossOrigin=!0}t.url=e,this.__s._$Eq$init.call(this,t)},__superMap:{_$Eq$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"URLRequest"}})},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n(69),r=n(156),a=n(66),s=n(169),o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},c=r.a.extend({staticMembers:{CK_RECORD_TYPE:"CPLLibraryInfo",CK_RECORD_NAME_FOR_CPL:"PrimarySync-0000-LI",CK_RECORD_NAME_FOR_OTHER:"library-info",getRecordNameFromZonePK:function(e){var t=i.b(),n=a.a.find(e,t)===t.cplZone?c.CK_RECORD_NAME_FOR_CPL:c.CK_RECORD_NAME_FOR_OTHER;return this.getPrimaryKeyWithZonePK(e,n)},getPrimaryKeyFromParts:function(e){var t=e.zone,n=e.recordName,i=void 0===n?this.getRecordNameFromZonePK(t):n;return this.__s._$UW$getPrimaryKeyFromParts.call(this,{zone:t,recordName:i})},load:function(e){var t=arguments;return void 0===e.primaryKeys&&(e.primaryKeys=[this.getPrimaryKeyFromParts({zone:e.zonePK})]),this.__s._$b2$load.apply(this,t)},__superMap:{_$UW$getPrimaryKeyFromParts:"getPrimaryKeyFromParts",_$b2$load:"load"},__QUALIFIED_CLASS_NAME__:"LibraryInfo"},audiosCount:s.e({readOnly:!0}),othersCount:s.e({readOnly:!0}),photosCount:s.e({readOnly:!0}),videosCount:s.e({readOnly:!0}),hiddenAudiosCount:s.e({readOnly:!0}),hiddenOthersCount:s.e({readOnly:!0}),hiddenPhotosCount:s.e({readOnly:!0}),hiddenVideosCount:s.e({readOnly:!0}),load:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.constructor.load(o({zonePK:this.zone.pk},e))}})},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var i=n(177),r=n(80),a=n(1185),s=n(41),o=n(36),c=n(34),l=n(78),u=Object(i.b)("TRANSACTION_STATES",function(e){e("PENDING"),e("ACTIVE"),e("COMPLETED"),e("FAILED"),e("CANCELLED")}),d=r.a.extend(u.toStaticMixin(),a.b,o.a,{operation:Object(s.c)(),subtransactions:Object(s.c)(),changes:Object(s.c)(),storeIds:Object(s.c)({readOnly:!0,get:function(){var e=this.changes;if(e)return e.storeIds;var t=this.operation,n=t&&t.type,i=t&&t.operation,r=i&&i.context,a=r&&r.primaryKeys;if(n&&Array.isArray(a)){for(var s=[],o=0,c=a.length;o<c;o++){var u=a[o];s.push(l.a.getStoreIdForPrimaryKey(n,u))}return s}return n&&a?[l.a.getStoreIdForPrimaryKey(n,a)]:void 0}}),status:Object(c.b)(u.PENDING),activate:function(){this.status=u.ACTIVE},complete:function(e){this.status=u.COMPLETED,this.resolve(e)},fail:function(e){this.status=u.FAILED,this.reject(e)},cancel:function(e){this.status=u.CANCELLED,this.reject(e)},toString:function(){for(var e=this.operation,t=e.type.toString();e=e.operation;)t+=": "+e.type.toString();return t},staticMembers:{__QUALIFIED_CLASS_NAME__:"Transaction"}})},function(e,t,n){"use strict";var i=n(80),r=n(41),a=n(1175),s=n(1178),o=n(789),c=n(184),l=n(34),u=n(36),d=n(104),h=n(72),p=n(71),f={mixinDependencies:[u.a,p.a,d.a],staticMembers:{handler:h.a.create({nodeType:"ATTRIBUTE",render:function(e,t,n){return n.value}})}},g=n(93),m=n(1173),v=n(75),_={mixinDependencies:[u.a,p.a,d.a],staticMembers:{handler:h.a.create({nodeType:"ATTRIBUTEOUTLET",generateLookupFunction:function(e,t){return s.a},register:function(e,t){var n=t.attribute,i=Object(v.a)(t);Object(v.c)(e,t,function(e,t){null===(t=i(t))||void 0===t||t.toString===Object.prototype.toString||t.toString===Function.prototype.toString?e.removeAttribute(n):e.setAttribute(n,t)})},render:function(e,t,n){var i=e.prototype[n.name];return null!=(i=Object(m.a)(i,g.a)?"":i)?i:""}})}},b=n(417),y=n(217),I=n(1272),w=n(410),S=n(65),C=n(1171),O={staticMembers:{init:function(){var e=arguments,t=this.prototype;t._removalHandlers=Object.create(t._removalHandlers),this.__s._$Do$init.apply(this,e)},_registerRemovalHandler:function(e,t){this.prototype._removalHandlers[e]=t},__superMap:{_$Do$init:"init"}},_removalHandlers:{},_removeChildView:function(e,t){return this._removalHandlers[e].removeChildView(this,e,t)},dispose:function(){var e=arguments;for(var t in this._removalHandlers)this._removalHandlers[t].disposeOutlet(this,t);this.__s._$Zl$dispose.apply(this,e)},__superMap:{_$Zl$dispose:"dispose"}},A=I.a.create(),E=[],T=d.b.extend({nodeType:"MULTIVIEWOUTLET",register:function(e,t){var n=t.name;n||Object(S.b)("View template error: multi-view outlets (`<views>`) must specify a name (like `<views name='foo'>`).",{ViewClass:e}),Object(C.a)(n).length>1&&Object(S.b)("View template error: multi-view outlets (`<views>`) must have a single key name. '%{name}' is a path.",{ViewClass:e,name:n}),t.children&&t.children.length>0&&Object(S.b)("View template error: multi-view outlets (`<views>`) may not have child elements",{ViewClass:e}),this.__s._$ZI$register.call(this,e,t,!0);var i=t.contentsDidChangeNode=Object(p.b)(t);i.parent=t.parent,i.name=n+".contentsDidChange",e._registerRemovalHandler(n,this),Object(v.c)(e,t,function(e,t){for(var i;i=e.firstChild;)L.call(this,n,e,i.view,i);if(t)for(var r=t.length,a=0;a<r;a++){var s=t.objectAt(a);i=s.element,D.call(this,n,e,s)}},{get:function(e){return e||(e=w.b.create()),e},set:function(e){return Object(m.a)(w.b,e)||(e=w.b.create(e)),e}}),Object(v.c)(e,i,function(e,t){if(t&&!this._isCleaningUpOutlets){var i,r,a=t.context;!function(e){for(var t=e.length,n=0;n<t;n++){var i=e[n],r=i.item;r.hasOwnProperty("_changeRefCount")||(r._changeRefCount=0),i.operation===w.b.REMOVE?r._changeRefCount--:r._changeRefCount++}}(a);var s,o=a.length;for(s=0;s<o;s++){var c=a.objectAt(s);if(i=c.object,c.operation===w.b.REMOVE&&i.hasOwnProperty("_changeRefCount")&&i._changeRefCount<0)L.call(this,n,e,i,i.element),delete i._changeRefCount;else if(i.hasOwnProperty("_changeRefCount")&&i._changeRefCount>0){var l=c.index;r=e.childNodes[l],A.set(i,l),D.call(this,n,e,i,r),delete i._changeRefCount}}this._isCleaningUpOutlets=!0;var u,d=this.get(n);for(s=0,o=d.length;s<o;s++){i=d.objectAt(s);var h=A.get(i);void 0!==h&&s!==h&&E.push(s)}if(E.length>0){for(d.beginBatchedChanges(),s=0,o=E.length;s<o;s++)d.removeAt(E[s]);d.endBatchedChanges(),E.length=0}for(A.clear(),this._isCleaningUpOutlets=!1,s=d.length-1;s>=0;s--){var p=(i=d.objectAt(s)).element;N(e,p,u),u=p}}})},render:function(e,t,n){var i=arguments,r=n.attributes;if(r&&r.tagName){var a=r.tagName;delete r.tagName,n.tagname=a}else"views"===n.tagname&&(n.tagname="div");return this.__s._$261$render.apply(this,i)},removeChildView:function(e,t,n){var i=e[t];i.removeAt(i.indexOf(n))},disposeOutlet:function(e,t){if(e.getMetadata(t).readOnly||e.isDisposing){var n=e[t];if(!n||n.isDisposed)return;for(var i=0,r=n.length;i<r;i++){var a=n.objectAt(i);a&&!a.isDisposed&&(a.parent=null,a.parentKey="")}}else e[t]=null},__superMap:{_$ZI$register:"register",_$261$render:"render"},staticMembers:{__QUALIFIED_CLASS_NAME__:"MultiViewOutletHandler"}}),M={mixinDependencies:[u.a,p.a,O],staticMembers:{handler:T.create()},_isCleaningUpOutlets:!1};function D(e,t,n,i){var r=n.parent;!r||r===this&&n.parentKey===e||r._removeChildView(n.parentKey,n);var a=n.element;return t.insertBefore(a,i||null),n.parent=this,n.parentKey=e,a}function L(e,t,n,i){return n&&!n.isDisposed&&(n.parent=null,n.parentKey=""),t.removeChild(i),i}function N(e,t,n){!n&&t===e.lastChild||n&&t===n.previousSibling||e.insertBefore(t,n||null)}var P=n(125),R={mixinDependencies:[u.a,p.a,d.a],staticMembers:{handler:h.a.create({nodeType:"STYLEOUTLET",generateLookupFunction:function(e,t){return s.a},register:function(e,t){var n=t.unit||"",i=t.property,r=Object(v.a)(t);Object(v.c)(e,t,function(e,t){t=r(t),n&&null!=t&&(t+=n),Object(P.a)(e,i,t)})}})}},x=Symbol(),F={mixinDependencies:[u.a,p.a],staticMembers:{handler:h.a.create({nodeType:"DATAOUTLET",register:function(e,t){var n,i=Object(v.a)(t),r=t.attributes.escape;n="false"===r?function(e,t){t=i(t),e.innerHTML=null==t?"":t}:"dangerous"===r?function(e,t){var n=i(t);if(null!==n&&void 0!==n&&!0!==n[x])throw new S.a("All values passed to unescaped templates must be wrapped in hashes and flagged",{hash:n,rawValue:t,span:e});n&&null!=n.value?e.innerHTML=n.value:e.innerHTML=""}:function(e,t){t=i(t),e.data=null==t?"":t},Object(v.c)(e,t,n)},render:function(e,t,n){var i=n.attributes.escape;return"false"===i||"dangerous"===i?t.createElement("span"):t.createTextNode("​")}})}},k={mixinDependencies:[p.a],staticMembers:{handler:h.a.create({nodeType:"TEXT",render:function(e,t,n){return t.createTextNode(n.data)}})}},V={mixinDependencies:[u.a,p.a,O],staticMembers:{handler:h.a.create({nodeType:"VIEWOUTLET",register:function(e,t){var n=t.name;n||Object(S.b)("View template error: view outlets (`<view>`) must specify a name (like `<view name='foo'>`).",{ViewClass:e}),Object(C.a)(n).length>1&&Object(S.b)("View template error: view outlets (`<view>`) must have a single key name. '%{name}' is a path.",{ViewClass:e,name:n}),t.parent||Object(S.b)("View template error: view outlets (`<view>`) may not be the root element in your template.",{ViewClass:e});var i="_previous_"+n;e._registerRemovalHandler(n,this),Object(v.c)(e,t,function(e,t){var n=e.parentNode,i=e;return t?i=t.element:e.__cw__isTemplatePlaceholder__||(i=j(this.document)),i!==e&&n.replaceChild(i,e),i},void 0,function(e,t){var r=this[i];if(t!==r){if(r&&!r.isDisposed){var a=r.parent,s=r.parentKey;a===this&&s===n&&(r.isDisposed||(r.parent=null,r.parentKey=""))}if(t){var o=t.parent;o&&o._removeChildView(t.parentKey,t),t.parent=this,t.parentKey=n}this[i]=t}})},render:function(e,t,n){return j(t)},removeChildView:function(e,t,n){e[t]=null},disposeOutlet:function(e,t){if(e.getMetadata(t).readOnly||e.isDisposing){var n=e[t];if(!n||n.isDisposed)return;n.parent=null,n.parentKey=""}else e[t]=null}})}};function j(e){var t=e.createElement("div");return t.__cw__isTemplatePlaceholder__=!0,t}n.d(t,"a",function(){return B});var B=i.a.extend(o.b,c.a,d.a,f,_,b.a,M,R,F,k,V,y.a,{init:function(e){var t=arguments;(e&&e.isRootView||this.isRootView)&&(this._isAttached=!1),this.__s._$yY$init.apply(this,t)},staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",attributes:{role:{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"ariaRole",attributes:{},attribute:"role"},"aria-label":{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"ariaLabel",attributes:{},attribute:"aria-label"},"aria-labelledby":{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"ariaLabelledBy",attributes:{},attribute:"aria-labelledby"},"aria-describedby":{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"ariaDescribedBy",attributes:{},attribute:"aria-describedby"},"aria-disabled":{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"ariaDisabled",attributes:{},attribute:"aria-disabled"},"aria-hidden":{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"ariaHidden",attributes:{},attribute:"aria-hidden"},"aria-controls":{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"ariaControls",attributes:{},attribute:"aria-controls"}}}},__QUALIFIED_CLASS_NAME__:"View"},nextResponder:Object(r.c)({get:function(e){return e||this.parent}}),isRootView:!1,isAttached:Object(l.b)({dependencies:["parent.isAttached"],get:Object.assign(function(e){return Object(a.a)(e)?e:Boolean(this.getPath("parent.isAttached"))},{__CW__getter:function(e,t,n,i){return Object(a.a)(e)?e:Boolean(i.internalGetPath(this,t[0+n]))}}),set:s.a}),parent:Object(l.b)(),parentKey:Object(l.b)(),ariaRole:Object(l.b)(),ariaLabel:Object(l.b)(),ariaLabelledBy:Object(l.b)(),ariaDescribedBy:Object(l.b)(),ariaDisabled:Object(l.b)(),ariaHidden:Object(l.b)(),ariaControls:Object(l.b)(),__superMap:{_$yY$init:"init"}})},function(e,t,n){"use strict";var i=n(65),r=n(1193),a=n(1178),s=n(798),o=n(1173),c=n(1169),l=n(793),u=n(41),d=n(180),h=n(176),p=n(39),f=n(36),g=n(1130),m=n(128),v=n(32),_=n(126),b={mixinDependencies:[m.a,f.a],isValid:Object(v.c)(_.a),wasRemoved:Object(v.c)(_.a),shouldObserveChanges:!0},y=n(34),I=g.a.extend(b,f.a,{position:Object(y.b)(),source:Object(y.b)(),isValid:Object(y.b)({dependencies:["wasRemoved","source.length","position"],get:Object.assign(function(){var e=arguments;return!this.wasRemoved&&this.__s._$DU$get.apply(this,e)},{__CW__getter:function(e,t,n,i){var r=arguments;return!i.internalGet(this,t[0+n])&&this.__s._$DU$get.apply(this,r)}}),__superMap:{_$DU$get:"get"}}),value:Object(y.b)({dependencies:["position","source","wasRemoved"],writeDependencies:[],get:Object.assign(function(){var e=arguments;return this.wasRemoved?this._previousValue:this.__s._$IS$get.apply(this,e)},{__CW__getter:function(e,t,n,i){var r=arguments;return i.internalGet(this,t[2+n])?this._previousValue:this.__s._$IS$get.apply(this,r)}}),set:function(e){var t=arguments;if(this.wasRemoved)return this._previousValue=e,e;var n=this.shouldObserveChanges;this.shouldObserveChanges=!1;var i=this.__s._$NR$set.apply(this,t);return this.shouldObserveChanges=n,i},__superMap:{_$IS$get:"get",_$NR$set:"set"}}),remove:function(){var e=arguments,t=this.shouldObserveChanges;this.shouldObserveChanges=!1;var n=this.__s._$RD$remove.apply(this,e);return this.shouldObserveChanges=t,this.propertyChanged("value"),n},initFromPool:function(){var e=arguments;this.__s._$Tn$initFromPool.apply(this,e),this.source._registerIterator(this)},cleanup:function(){this.wasRemoved=!1,this.source._unregisterIterator(this),this.__s._$Wa$cleanup.call(this)},wasRemoved:Object(y.b)(!1),_previousValue:Object(y.b)(),moveTo:function(){var e=arguments;return this.wasRemoved=!1,this.__s._$as$moveTo.apply(this,e)},__superMap:{_$RD$remove:"remove",_$Tn$initFromPool:"initFromPool",_$Wa$cleanup:"cleanup",_$as$moveTo:"moveTo"},staticMembers:{__QUALIFIED_CLASS_NAME__:"ObservableArrayIterator"}}),w=n(49),S=n(127),C=n(355),O={mixinDependencies:[w.a,S.a],contentsDidChange:C.a.define(),length:_.a.define()},A=n(1129),E={startHandle:Object(u.c)({readOnly:!0,get:function(){return this.handleProvider.startHandle}}),HandleProviderClass:null,handleProviderDelegate:Object(y.b)(),delegate:Object(y.b)(),handleProvider:Object(y.b)({strong:!0,readOnly:!0,get:function(){return this.HandleProviderClass.create({source:this,delegate:this.handleProviderDelegate})}}),handleFor:function(e){return this.encodedHandleFor(this.encode(e))},encodedHandleFor:function(e){for(var t=this.startHandle.retain(this,"HandleSupport#encodedHandleFor");t.encodedValue!==e&&t.isValid;){var n=t.next.retain(this,"HandleSupport#encodedHandleFor");t.release(this,"HandleSupport#encodedHandleFor"),t=n}return t.autorelease(this,"HandleSupport#encodedHandleFor")}},T=n(278);n.d(t,"b",function(){return L}),n.d(t,"a",function(){return R}),n.d(t,"c",function(){return x});var M=T.a.INSERT,D=T.a.REMOVE,L=l.a.extend(f.a,O,E,{staticMembers:{INSERT:M,REMOVE:D,shouldAutomaticallySubclass:!0,__QUALIFIED_CLASS_NAME__:"ObservableArray"},isObservable:!0,firstItem:Object(y.b)({dependencies:["contentsDidChangeUntracked"],writeDependencies:[],get:function(){return this.objectAt(0)}}),lastItem:Object(y.b)({dependencies:["length","contentsDidChangeUntracked"],writeDependencies:[],get:Object.assign(function(){return this.objectAt(this.length-1)},{__CW__getter:function(e,t,n,i){return this.objectAt(i.internalGet(this,t[0+n])-1)}})}),itemsWillChange:function(){this._ignoreCount>0||(p.a.pause(),this.changes||(this.changes=this.changesClass.acquire(this)))},itemsWereInserted:function(e,t){if(!(this._ignoreCount>0||t<=0)){var n,i,r=this.changes;if(P(this)){var a=e+(t-1);for(n=e;n<=a;n++)r.recordInsertion(n,this._array[n])}else r.lengthDelta+=t;var s,o,c=this._iterators;for(i=c.length,n=0;n<i;n++)(s=c[n]).shouldObserveChanges&&(o=s.position)>=e&&(s.position=o+t)}},itemsWillBeRemoved:function(e,t){if(!(this._ignoreCount>0||t<=0)){var n,i=this.changes,r=e+t;if(P(this))for(n=r-1;n>=e;n--)i.recordRemoval(n,this._array[n]);else i.lengthDelta-=t;var a,s,o,c=this._internalLength===t,l=this._iterators;for(n=0,a=l.length;n<a;n++)(s=l[n]).shouldObserveChanges&&(o=s.position,c?(s.position=void 0,s.wasRemoved=!0):o>=e&&(o<r?(s.position=void 0,s.wasRemoved=!0):s.position=o-t))}},itemsDidChange:function(){this._ignoreCount>0||(this.notifyIfNecessary(),p.a.resume())},notifyIfNecessary:function(){var e,t;0===this._batchCount&&(t=(e=this).changes,e.contentsDidChangeUntracked(),t&&(t.length||0!==t.lengthDelta)&&e._shouldFireLengthChange&&(0!==t.lengthDelta&&e.propertyChanged("length"),e.contentsDidChange(t)))},_shouldFireLengthChange:!0,length:Object(y.b)({writeDependencies:["contentsDidChange","contentsDidChangeUntracked"],cacheable:!1,set:Object.assign(function(){var e=arguments;if(this._shouldFireLengthChange=!1,this.__s._$2jg$set.apply(this,e),this._shouldFireLengthChange=!0,0===this._batchCount){this.contentsDidChangeUntracked=void 0;var t=this.changes;t&&(this.contentsDidChange=t)}},{__CW__setter:function(e,t,n,i,r){var a=arguments;if(this._shouldFireLengthChange=!1,this.__s._$2jg$set.apply(this,a),this._shouldFireLengthChange=!0,0===this._batchCount){n[1+i]=void 0;var s=this.changes;s&&(n[0+i]=s)}}}),didChange:function(){},__superMap:{_$2jg$set:"set"},writeDependencySetPathMap:["false","false"]}),sort:function(){var e=arguments;this.beginBatchedChanges();var t=this.__s._$2wc$sort.apply(this,e);return this.endBatchedChanges(),t},addEach:function(){var e=arguments;this.beginBatchedChanges();var t=this.__s._$2z0$addEach.apply(this,e);return this.endBatchedChanges(),t},reverse:function(){var e=arguments;this.beginBatchedChanges();var t=this.__s._$30P$reverse.apply(this,e);return this.endBatchedChanges(),t},changes:Object(u.c)(),changesClass:R,_batchCount:0,beginBatchedChanges:function(){this._batchCount++},endBatchedChanges:function(){this._batchCount--,this.notifyIfNecessary(),this._batchCount<0&&Object(i.b)("Mismatched batched changes in observable array: "+this,{array:this}),this.notifyEverythingChangedIfNecessary()},swap:function(){var e=arguments;this.beginBatchedChanges();var t=this.__s._$3Lt$swap.apply(this,e);return this.endBatchedChanges(),t},move:function(){var e=arguments;this.beginBatchedChanges();var t=this.__s._$3PO$move.apply(this,e);return this.endBatchedChanges(),t},contentsDidChange:Object(f.g)({didPropagate:function(){if(0===this._batchCount){var e=this.changes;e&&(this.changesClass.returnToPool(e),this.changes=null)}}}),iteratorClass:I,serializer:Object(y.b)(),_iterators:Object(d.b)(Array),_registerIterator:function(e){this._iterators.push(e)},_unregisterIterator:function(e){Object(r.a)(e,this._iterators)},contentsDidChangeUntracked:Object(f.g)(),HandleProviderClass:A.a,encodedHandleFor:function(e){var t=this.encodedIndexOf(e);return this.startHandle.atDistance(t)},_ignoreCount:0,beginIgnoringChanges:function(){this._ignoreCount++},endIgnoringChanges:function(){this._ignoreCount--,0===this._ignoreCount&&(this._notifyEverythingChanged=!0,this.notifyEverythingChangedIfNecessary())},notifyEverythingChangedIfNecessary:function(){0===this._batchCount&&this._notifyEverythingChanged&&(this.propertyChanged("length"),this.everythingChanged())},everythingChanged:Object(f.g)({didPropagate:function(){this._notifyEverythingChanged=!1}}),__superMap:{_$2wc$sort:"sort",_$2z0$addEach:"addEach",_$30P$reverse:"reverse",_$3Lt$swap:"swap",_$3PO$move:"move"}}),N=[];function P(e){var t=e.downstreamNodes.contentsDidChange,n=p.a.getChildrenIDs(t,N).length>0;return N.length=0,n}function R(e){this.owner=e}R.fromArrays=function(e,t,n){var i=new R(n),r=n&&n.encode||a.a;if(!e||0===e.length){for(var o=0,c=t.length;o<c;o++)i.recordInsertion(o,r.call(n,t[o],o));return i}if(!t||0===t.length){for(var l=0,u=e.length;l<u;l++)i.recordRemoval(l,r.call(n,e[l],l));return i}for(var d=Math.min(e.length,t.length),h=0;h<d;h++)Object(s.a)(e[h],t[h])||(i.recordRemoval(h,r.call(n,e[h],h)),i.recordInsertion(h,r.call(n,t[h],h)));var p=t.length-e.length;if(p>0)for(var f=d;f<t.length;f++)i.recordInsertion(f,r.call(n,t[f],f));else if(p<0)for(var g=d;g<e.length;g++)i.recordRemoval(g,r.call(n,e[g],g));return i},R.prototype=Object.create(Array.prototype),R.prototype.lengthDelta=0,R.prototype.recordInsertion=function(e,t){this.push(k(this.owner,e,t,M)),this.lengthDelta++},R.prototype.recordRemoval=function(e,t){this.push(k(this.owner,e,t,D)),this.lengthDelta--},R.prototype.applyChanges=function(e){var t=this.length,n=Object(o.a)(e,l.a),i=Object(o.a)(e,L);if(n){i&&e.beginBatchedChanges();for(var r=0;r<t;r++){var a=this[r];a.operation===D?e.encodedSplice(a.index,1):e.encodedSplice(a.index,0,a.encodedItem)}i&&e.endBatchedChanges()}else for(var s=0;s<t;s++){var c=this[s];c.operation===D?e.splice(c.index,1):e.splice(c.index,0,c.item)}return e},R.prototype.reverseChanges=function(e){var t=this.length,n=Object(o.a)(e,l.a),i=Object(o.a)(e,L);if(n){i&&e.beginBatchedChanges();for(var r=t-1;r>=0;r--){var a=this[r];a.operation===D?e.encodedSplice(a.index,0,a.encodedItem):e.encodedSplice(a.index,1)}i&&e.endBatchedChanges()}else for(var s=t-1;s>=0;s--){var c=this[s];c.operation===D?e.splice(c.index,0,c.item):e.splice(c.index,1)}return e},R.prototype.clear=function(){for(var e=this.length;e--;){var t=this[e];delete this[e],t.reset(),V.length<j&&V.push(t)}this.length=0,this.lengthDelta=0},R.prototype.toString=function(){return"[ArrayChangeList("+this.length+"): "+this.join(", ")+"]"},R.prototype.get=function(e){return this[e]},R.prototype.set=function(e,t){return this[e]=t},R.prototype.objectAt=function(e){return this[e]};var x=function(e){function t(){return function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.recordInsertion=function(t,n){Object(h.f)(n,this,"StrongArrayChangeList: strong referencing change item"),e.prototype.recordInsertion.call(this,t,n)},t.prototype.recordRemoval=function(t,n){Object(h.f)(n,this,"StrongArrayChangeList: strong referencing change item"),e.prototype.recordRemoval.call(this,t,n)},t.prototype.clear=function(){for(var t=this.length;t--;){var n=this[t];Object(h.e)(n.item,this,"StrongArrayChangeList: strong referencing change item")}e.prototype.clear.call(this)},t}(R);function F(e,t,n,i){this._sourceArray=e,this.index=t,this.encodedItem=n,this.operation=i}function k(e,t,n,i){if(V.length>0){var r=V.pop();return r._sourceArray=e,r.index=t,r.encodedItem=n,r.operation=i,r}return new F(e,t,n,i)}F.prototype.reset=function(){this._sourceArray=null,this.encodedItem=null,this.index=null,this.operation=null},F.prototype.toString=function(){return"["+this.operation+"@"+this.index+":"+this.item+"]"},Object.defineProperty(F.prototype,"item",{get:function(){var e=this.encodedItem,t=this.index,n=this._sourceArray;return n&&n.decode&&(e=n.decode(e,t)),e},set:c.a}),Object.defineProperty(F.prototype,"object",{get:function(){return this.item},set:c.a});var V=[],j=100;R.pool=[],x.pool=[],R.acquire=function(e){if(this.pool.length){var t=this.pool.pop();return t.owner=e,t}return new this(e)},R.returnToPool=function(e){e.clear(),this.pool.push(e)}},function(e,t,n){"use strict";var i,r=n(1187),a=n(65),s=n(1184),o=n(775),c=n(96),l=n(1169),u=n(36),d=n(41),h=n(80),p=n(784),f=n(86),g=n(49),m=n(781),v=n(54),_={mixinDependencies:[g.a,m.a],prepare:v.a.create(),send:v.a.create(),abort:v.a.create(),createResponse:v.a.create(),computeStatuses:v.a.create(),finalize:l.a},b=h.a.extend(_,{staticMembers:{_TransportClass:null,__QUALIFIED_CLASS_NAME__:"BaseTransport"},send:function(e,t){var n;e||Object(a.b)("No request to send",this),t?n=e.__transport:(e._retryCount=0,(n=e.__transport=new this.constructor._TransportClass)._request=e,e.triggerStatusEvent(f.b.WILLSEND)),this.prepare(e,t);var i=this.getBodyText(e);n.send(i),t||e._synchronous||e.triggerStatusEvent(f.b.SENT)},getBodyText:function(e){var t=e.get("bodySerializer"),n=e.get("body");return t&&(n=t.encode(n)),n},abort:function(e){e||Object(a.b)("No request to abort",this);var t=e.__transport;t?t.abort():p.b.warn("Cannot abort request because it is not in transit",e)},handleResponse:function(e,t){var n=this.createResponse(t);if(this._shouldFinalizeWithResponse(e,n)){e.set("response",n),e.set("state",f.b.COMPLETED);var i=this.computeStatuses(t);e._synchronous&&e.triggerStatusEvent(f.b.SENT),i&&e.triggerStatusEvents.apply(e,i),e.finalize()}},_shouldFinalizeWithResponse:function(e,t){var n=!0;if(e.shouldFinalizeWithResponse){var i=e._pendingRetryCallback=function(){i===e._pendingRetryCallback&&(delete e._pendingRetryCallback,e._retryCount++,this.send(e,!0))}.bind(this);n=e.shouldFinalizeWithResponse(t,i,e._retryCount)}return n},handleTimeout:function(e){this.abort(e);var t=this.createResponse(null);t.status=f.b.TIMEDOUT,this._shouldFinalizeWithResponse(e,t)&&(e.set("response",t),e.set("state",f.b.TIMEDOUT),e.triggerStatusEvent(f.b.FAILED),e.triggerStatusEvent(f.b.COMPLETED),e.finalize())},finalize:function(e){e&&(e.__transport&&(delete e.__transport._request,delete e.__transport),delete e._pendingRetryCallback,e._retryCount=0)}}),y=n(812);n.d(t,"a",function(){return I});var I=b.extend(u.a,{staticMembers:{_TransportClass:Object(d.c)({get:function(e){return e||XMLHttpRequest||w}}),supportsCORS:Object(d.c)({readOnly:!0,get:function(e){if("boolean"==typeof e)return e;try{e=!!("withCredentials"in new this._TransportClass)}catch(t){e=!1}return this._supportsCORS=e}}),__QUALIFIED_CLASS_NAME__:"XHR"},mimeType:null,prepare:function(e,t){var n=e.__transport,i=e.get("url").get("href"),a=!e._synchronous;n.open(e.get("method"),i,a),n.withCredentials=e.get("useCredentialsIfCrossOrigin"),n.addEventListener("readystatechange",S);var s=this.get("mimeType");return n.overrideMimeType&&s&&n.overrideMimeType(s),n.upload&&e.uploadProgress&&!t&&Object(r.a)(n.upload,"progress",C.bind(this,e,"uploadProgress")),e.progress&&!t&&Object(r.a)(n,"progress",C.bind(this,e,"progress")),function(e,t){if(!t||!Object(o.a)(t))return e;var n,i,r,a=Object.keys(t);for(i=0,r=a.length;i<r;i++)n=a[i],e.setRequestHeader(n,t[n])}(n,e.get("headers")),this.configureTimeout(e),n},abort:function(e){var t,n=arguments;e&&(t=e.__transport)||Object(a.b)("Attempted to abort an XHR request that was never sent",e),t.removeEventListener&&t.removeEventListener("readystatechange",S),this.__s._$1SL$abort.apply(this,n)},handleResponse:function(e,t){var n=arguments;this.clearTimeout(e),this.__s._$1V8$handleResponse.apply(this,n)},configureTimeout:function(e){var t=e.get("timeout");t&&(e._timer=Object(s.a)(this.handleTimeout.bind(this,e),t))},clearTimeout:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){e&&e._timer&&(clearTimeout(e._timer),delete e._timer)}),computeStatuses:function(e){var t=e.status,n=Math.floor(t/100),r=Math.floor(t%100/10),a=t%10;return i||(i={}),i[t]?i[t]:i[t]=0===t?[t,f.b.FAILED,f.b.COMPLETED]:[t,n+"**",""+n+r+"*","*"+r+"*","*"+r+a,"**"+a,2===n?f.b.SUCCEEDED:f.b.FAILED,f.b.COMPLETED]},createResponse:function(e){return y.a.create(e?{status:e.status,encodedBody:e.responseText,headers:e.getAllResponseHeaders()}:null)},finalize:function(e){var t,n=arguments;e&&(t=e.__transport)||Object(a.b)("Error while finalizing an XHR request - no internal transport",e),t.removeEventListener&&t.removeEventListener("readystatechange",S),this.clearTimeout(e),this.__s._$2Em$finalize.apply(this,n)},__superMap:{_$1SL$abort:"abort",_$1V8$handleResponse:"handleResponse",_$2Em$finalize:"finalize"}});function w(){Object(a.b)("Your browser does not support sending requests")}var S=Object(c.a)(function(){var e=this._request,t=e.get("transport");4===this.readyState&&t.handleResponse(e,this)});function C(e,t,n){var i=e[t];if(i){var r=!i.__lastWriteTime;i.__lastWriteTime=i.__lastWriteTime||Date.now();var a=i.__lastWriteTime,s=Date.now()-a;r||s>80?(i.setMultipleValues({bytesTransferred:n.loaded,bytesTotal:n.total,isDeterminate:n.lengthComputable}),i.__lastWriteTime=Date.now()):r?Object(l.a)(1):Object(l.a)(2)}}},function(e,t,n){"use strict";var i=n(65),r=n(784),a=function(e){if(!e)return!1;var t=e._DrawImageSVGAlpha_isSVG;return!0===t||!1===t?t:"IMG"===e.tagName&&/^data:image\/svg|\.svg\?|\.svg$/.test(e.src)},s=document.createElement("canvas"),o=s.getContext("2d");s.width=2,s.height=1;var c=new Image;c.addEventListener("load",function(){var e={};try{o.globalAlpha=.5,o.drawImage(c,0,0),e.correctsGlobalAlpha=o.getImageData(0,0,2,1).data[3]>192,o.fillStyle="black",o.fillRect(0,0,2,1),o.globalCompositeOperation="destination-in",o.drawImage(c,0,0),e.correctsGlobalCompositeOperation=o.getImageData(0,0,2,1).data[7]>64}catch(t){e.correctsEverything=!0}Object.keys(e).some(function(t){return e[t]})&&function(e){var t=[],n=CanvasRenderingContext2D.prototype.drawImage,i=e.correctsGlobalAlpha||e.correctsEverything,r=e.correctsGlobalCompositeOperation||e.correctsEverything;CanvasRenderingContext2D.prototype.drawImage=function(e,l,u,d,h,p,f,g,m){if(!a(e))return n.apply(this,arguments);if(!(i&&1!==this.globalAlpha||r&&"source-over"!==this.globalCompositeOperation))return n.apply(this,arguments);e._DrawImageSVGAlpha_bitmapCache||e.addEventListener("load",c);var v=arguments.length;3===v&&(v=5,d=e.naturalWidth||e.width,h=e.naturalHeight||e.height);var _=void 0;5===v&&(_=s(d,h)),9===v&&(_=s(l,u,d,h,g,m));var b=e._DrawImageSVGAlpha_bitmapCache||(e._DrawImageSVGAlpha_bitmapCache={}),y=b[_];if(!y){var I=(y=b[_]=t.pop()||document.createElement("canvas")).getContext("2d");5===v&&(y.width=Math.ceil(d),y.height=Math.ceil(h),n.call(I,e,0,0,d,h)),9===v&&(y.width=Math.ceil(g),y.height=Math.ceil(m),n.call(I,e,l,u,d,h,0,0,g,m)),(b.currentCacheKeys||(b.currentCacheKeys=[])).unshift(_),o(b,4)}5===v&&n.call(this,y,l,u),9===v&&n.call(this,y,p,f)};var s=function(){return Array.prototype.join.call(arguments,",")},o=function(e,n){var i=e.currentCacheKeys;if(i)for(;i.length>n;){var r=i.pop(),a=e[r];a.width=a.height=0,t.push(a),delete e[r]}},c=function(){var e=this._DrawImageSVGAlpha_bitmapCache;e&&o(e,0)}}(e)}),c.src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMC8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9UUi8yMDAxL1JFQy1TVkctMjAwMTA5MDQvRFREL3N2ZzEwLmR0ZCI+PHN2ZyB2ZXJzaW9uPSIxLjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IiB3aWR0aD0iMXB4IiBoZWlnaHQ9IjJweCIgdmlld0JveD0iMCAwIDEgMiIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMSAyIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cmVjdCB3aWR0aD0iMSIgaGVpZ2h0PSIxIi8+PC9zdmc+";var l=a,u=n(325);n.d(t,"a",function(){return f});var d=[],h=!1,p=!1,f=function(e,t){if(g>0||l(t)){var n=0,a=1,s=arguments.length;d.length=s+n-a;for(var o=a,c=n;o<s;o++,c++)d[c]=arguments[o];var f=d;return e.drawImage.apply(e,f),!0}var m=h,v=p;h=p=!1;var _=t.naturalWidth||t.width,b=t.naturalHeight||t.height,y=void 0,I=void 0,w=void 0,S=void 0,C=void 0,O=void 0,A=void 0,E=void 0;switch(arguments.length-1){case 3:y=0,I=0,w=_,S=b,C=arguments[2],O=arguments[3],A=_,E=b;break;case 5:y=0,I=0,w=_,S=b,C=arguments[2],O=arguments[3],A=arguments[4],E=arguments[5];break;case 9:y=arguments[2],I=arguments[3],w=arguments[4],S=arguments[5],C=arguments[6],O=arguments[7],A=arguments[8],E=arguments[9];break;default:i.b("Invalid arguments sent to `drawImageSmooth`.")}var T=A/w,M=E/S;if(!(_>0&&b>0))return r.b.warn("Source image provided to drawImageSmooth was not loaded, or otherwise had no valid dimensions."),!0;if(!(A>=0&&E>=0))return r.b.warn("Destination rectangle provided to drawImageSmooth has invalid dimensions of "+A+" by "+E+"."),!0;if(!A||!E)return!0;var D=Math.max(T,M),L=Math.pow(2,Math.ceil(Math.log(D)/Math.log(2)));if(L>=1){for(n=0,a=1,s=arguments.length,d.length=s+n-a,o=a,c=n;o<s;o++,c++)d[c]=arguments[o];var N=d;return e.drawImage.apply(e,N),!0}var P=void 0;if(m){var R=t[P="_cachedSmoothDownsample_from"+y+","+I+","+w+","+S+"@"+L+"x"];if(R)return e.drawImage(R,0,0,R.width,R.height,C,O,A,E),!0}if(v){for(n=0,a=1,s=arguments.length,d.length=s+n-a,o=a,c=n;o<s;o++,c++)d[c]=arguments[o];var x=d;return e.drawImage.apply(e,x),!1}for(var F=1,k=w,V=S,j=Math.pow(2,Math.ceil(Math.log(k)/Math.log(2))),B=Math.pow(2,Math.ceil(Math.log(V)/Math.log(2))),U=void 0;F>L;){F/=2;var W=U||t;(U=Object(u.a)(j*F,B*F))._context.drawImage(W,t===W?y:0,t===W?I:0,window.oldW=k,window.oldH=V,0,0,k=Math.ceil(k/2),V=Math.ceil(V/2))}if(m){var G=document.createElement("canvas");G.width=k,G.height=V,G.getContext("2d").drawImage(U,0,0),t[P]=G}return e.drawImage(U,0,0,k,V,C,O,A,E),!0};f.usingCache=function(){return h=!0,this},f.avoidingWorkIf=function(e){return p=Boolean(e),this};var g=0},function(e,t,n){"use strict";var i=n(34),r=n(156),a=n(13),s=r.a.extend({staticMembers:{CK_RECORD_TYPE:"cloudkit.share",__QUALIFIED_CLASS_NAME__:"Share"},url:Object(a.c)({readOnly:!0}),displayedHostname:Object(a.c)({readOnly:!0}),parent:Object(a.c)({readOnly:!0}),publicPermission:Object(a.c)({readOnly:!0}),shortGUID:Object(a.c)({readOnly:!0}),currentUserParticipant:Object(a.c)({readOnly:!0}),owner:Object(a.c)({readOnly:!0}),participants:Object(a.c)({readOnly:!0})}),o=n(169);n.d(t,"a",function(){return c});var c=s.extend({staticMembers:{PLACEHOLDER_TITLE:"<missing title>",RECORD_NAME:"cmm-share",SHARE_TYPE:"cmm",__QUALIFIED_CLASS_NAME__:"CMMShare"},thumbnailImageData:o.e({serviceKey:"cloudkit.thumbnailImageData",readOnly:!0}),type:o.e({serviceKey:"cloudkit.type",readOnly:!0}),_title:o.e({serviceKey:"cloudkit.title",readOnly:!0}),title:i.b({readOnly:!0,dependencies:["_title"],get:function(){var e=this._title;return e!==this.constructor.PLACEHOLDER_TITLE?e:void 0}})})},function(e,t,n){"use strict";n(935);var i=n(177),r=n(34),a=n(1222),s=(n(937),n(409)),o=n(93),c=n(36),l=s.a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"contentView"}],name:"container",classes:["cw-popover-content"]}],classes:["cw-popover-view"],styles:{width:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"width",attributes:{},unit:null,property:"width"},height:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"height",attributes:{},unit:null,property:"height"}}}},className:"cw-ui-popover-view",__QUALIFIED_CLASS_NAME__:"PopoverView"},layout:Object(r.b)(),left:Object(r.b)(Object(o.c)("layout.left")),top:Object(r.b)(Object(o.c)("layout.top")),_transformObserver:Object(c.f)("left","top",function(e,t){this.style.translateDevicePixels(e,t)}),height:Object(r.b)(Object(o.c)("layout.height")),width:Object(r.b)(Object(o.c)("layout.width")),verticalAlignment:Object(r.b)({type:a.b}),horizontalAlignment:Object(r.b)({type:a.a})});n.d(t,"a",function(){return u}),n.d(t,"b",function(){return d});var u=Object(i.b)("ArrowPopoverAlignment",function(e){e("TargetMiddle"),e("Follow"),e("None")}),d=l.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"ELEMENT",tagname:"div",name:"arrow",classes:["cw-popover-arrow",{type:"CLASSNAMEOUTLET",bindingtype:"ENUMBINDING",name:"arrowDirectionClass",validvalues:["cw-up-arrow","cw-left-arrow","cw-right-arrow","cw-down-arrow","cw-no-arrow"],attributes:{}}],styles:{transform:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"arrowTransformStyle",attributes:{},unit:null,property:"transform"}}}]}},className:"cw-ui-arrow-popover-view",__QUALIFIED_CLASS_NAME__:"ArrowPopoverView"},anchorLayout:Object(r.b)(),arrowLength:Object(r.b)(10),arrowWidth:Object(r.b)(10),arrowAlignment:Object(r.b)({defaultValue:u.TargetMiddle,type:u}),arrowLeft:Object(r.b)({readOnly:!0,dependencies:["arrowDirection","arrowLength","arrowWidth","horizontalAlignment","arrowAlignment","layout.x","layout.width","anchorLayout.x","anchorLayout.width"],get:Object.assign(function(){var e=this.arrowDirection,t=this.arrowLength,n=this.layout;if(!n)return 0;var i=n.width;if("left"===e)return-t;if("right"===e)return i;var r=this.arrowWidth/2,s=n.x,o=s+r,c=s+i-r,l=void 0;if(this.arrowAlignment===u.Follow)switch(this.horizontalAlignment){case a.a.Left:l=o;break;case a.a.Right:l=c;break;case a.a.Middle:default:l=s+i/2}else{var d=this.anchorLayout;if(!d)return 0;var h=d.width,p=d.x;l=(p+(p+h))/2}return l=Math.max(Math.min(l,c),o),(l-=s)-r},{__CW__getter:function(e,t,n,i){var r=this.arrowDirection,s=this.arrowLength,o=this.layout;if(!o)return 0;var c=o.width;if("left"===r)return-s;if("right"===r)return c;var l=i.internalGet(this,t[2+n])/2,d=o.x,h=d+l,p=d+c-l,f=void 0;if(i.internalGet(this,t[4+n])===u.Follow)switch(i.internalGet(this,t[3+n])){case a.a.Left:f=h;break;case a.a.Right:f=p;break;case a.a.Middle:default:f=d+c/2}else{var g=this.anchorLayout;if(!g)return 0;var m=g.width,v=g.x;f=(v+(v+m))/2}return f=Math.max(Math.min(f,p),h),(f-=d)-l}})}),arrowTop:Object(r.b)({readOnly:!0,dependencies:["arrowDirection","arrowLength","arrowWidth","verticalAlignment","arrowAlignment","layout.y","layout.height","anchorLayout.y","anchorLayout.height"],get:Object.assign(function(){var e=this.arrowDirection,t=this.arrowLength,n=this.layout;if(!n)return 0;var i=n.height;if("up"===e)return-t;if("down"===e)return i;var r=this.arrowWidth/2,s=n.y,o=s+r,c=s+i-r,l=void 0;if(this.arrowAlignment===u.Follow)switch(this.verticalAlignment){case a.b.Bottom:l=o;break;case a.b.Top:l=c;break;case a.b.Middle:default:l=s+i/2}else{var d=this.anchorLayout;if(!d)return 0;var h=d.height,p=d.y;l=(p+(p+h))/2}return l=Math.max(Math.min(l,c),o),(l-=s)-r},{__CW__getter:function(e,t,n,i){var r=this.arrowDirection,s=this.arrowLength,o=this.layout;if(!o)return 0;var c=o.height;if("up"===r)return-s;if("down"===r)return c;var l=i.internalGet(this,t[2+n])/2,d=o.y,h=d+l,p=d+c-l,f=void 0;if(i.internalGet(this,t[4+n])===u.Follow)switch(i.internalGet(this,t[3+n])){case a.b.Bottom:f=h;break;case a.b.Top:f=p;break;case a.b.Middle:default:f=d+c/2}else{var g=this.anchorLayout;if(!g)return 0;var m=g.height,v=g.y;f=(v+(v+m))/2}return f=Math.max(Math.min(f,p),h),(f-=d)-l}})}),arrowTransformStyle:Object(r.b)({dependencies:["arrowLeft","arrowTop"],readOnly:!0,get:Object.assign(function(){return"translate("+this.arrowLeft+"px, "+this.arrowTop+"px)"},{__CW__getter:function(e,t,n,i){return"translate("+i.internalGet(this,t[0+n])+"px, "+i.internalGet(this,t[1+n])+"px)"}})}),arrowDirection:Object(r.b)({readOnly:!0,dependencies:["layout.x","layout.width","layout.y","layout.height","anchorLayout.x","anchorLayout.width","anchorLayout.y","anchorLayout.height","arrowAlignment"],get:Object.assign(function(){var e=this.getPath("anchorLayout.height"),t=this.getPath("anchorLayout.y"),n=this.getPath("anchorLayout.width"),i=this.getPath("anchorLayout.x"),r=this.getPath("layout.height"),a=this.getPath("layout.y"),s=this.getPath("layout.width"),o=this.getPath("layout.x");return this.getPath("arrowAlignment")===u.None?"no":i+n<o?"left":i>o+s?"right":t+e<a?"up":t>a+r?"down":"left"},{__CW__getter:function(e,t,n,i){var r=i.internalGetPath(this,t[7+n]),a=i.internalGetPath(this,t[6+n]),s=i.internalGetPath(this,t[5+n]),o=i.internalGetPath(this,t[4+n]),c=i.internalGetPath(this,t[3+n]),l=i.internalGetPath(this,t[2+n]),d=i.internalGetPath(this,t[1+n]),h=i.internalGetPath(this,t[0+n]);return i.internalGet(this,t[8+n])===u.None?"no":o+s<h?"left":o>h+d?"right":a+r<l?"up":a>l+c?"down":"left"}})}),arrowDirectionClass:Object(r.b)({readOnly:!0,dependencies:["arrowDirection"],get:Object.assign(function(){return"cw-"+this.arrowDirection+"-arrow"},{__CW__getter:function(e,t,n,i){return"cw-"+i.internalGet(this,t[0+n])+"-arrow"}})})})},function(e,t,n){"use strict";var i=n(788),r=n(1204),a=n(125),s=n(1169),o=n(1230),c=n(32),l=n(34),u=(n(889),n(409).a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"contentView"}]}},className:"cw-ui-popup-view",__QUALIFIED_CLASS_NAME__:"PopupView"}}));n.d(t,"a",function(){return d});var d=i.a.extend(o.a,{_appendedContentController:Object(c.c)(r.a,"contentView"),show:function(){var e=arguments;return this._appendedContentController=this.contentController,this.__s._$16R$show.apply(this,e)},hide:function(){var e=arguments;return this._appendedContentController=null,this.__s._$198$hide.apply(this,e)},contentController:Object(l.b)({strong:!0}),viewClass:u,owningViewController:Object(l.b)(),wheel:function(e){e.stopPropagation()},willAttach:function(){var e=arguments,t=this.getPath("view.element");if(t){var n=Object(a.a)(t);return this._originalVisibility=n.get("visibility"),n.set("visibility","hidden"),this.__s._$1UR$willAttach.apply(this,e)}},didAttach:function(){var e=arguments;this.willAppear();var t=this.getPath("view.element");if(t)return Object(a.a)(t,{visibility:this._originalVisibility}),this._originalVisibility=null,this.didAppear(),this.__s._$1bv$didAttach.apply(this,e)},willAppear:s.a,didAppear:s.a,_originalVisibility:null,__superMap:{_$16R$show:"show",_$198$hide:"hide",_$1UR$willAttach:"willAttach",_$1bv$didAttach:"didAttach"},staticMembers:{__QUALIFIED_CLASS_NAME__:"PopupViewController"}})},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n(49),r=n(54),a=n(32),s={mixinDependencies:[i.a],get:Object(a.c)(r.a),set:Object(a.c)(r.a)}},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var i=n(36),r=n(121),a=n(180),s=n(104),o=n(72),c=n(71),l=n(75),u={mixinDependencies:[i.a,c.a,s.a],__classNameOutlet_addedHash:Object(a.b)(Object),staticMembers:{handler:o.a.create({nodeType:"CLASSNAMEOUTLET",generateLookupFunction:function(e,t){return function(e){return e=e.classList,t(e)}},register:function(e,t){var n=Object(l.a)(t),i="__templateObserver__previous"+t.name+Object(r.a)(t),a=Object(r.a)(t.parent);Object(l.c)(e,t,function(e,t){var r=this.__classNameOutlet_addedHash[a]=this.__classNameOutlet_addedHash[a]||{},s=this[i];s&&(r[s]--,0===r[s]&&e.remove(s));var o=n(t);o&&(r[o]=r[o]||0,0===r[o]&&e.add(o),r[o]++),this[i]=o})}})}}},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n(1173),r=n(1185),a=function(){function e(){!function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this)}return e.every=function(e){Array.isArray(e)&&e.length&&e.every(function(e){return Object(i.a)(e,r.a)})||r.a.reject("An array containing one or more promises is required.");var t=0,n=e.length,a=r.a.create(),s=new Array;return e.forEach(function(e,i){e.then(function(e){return s[i]=e}).catch(function(e){return s[i]=e}).finally(function(){return++t===n&&a.resolve(s)})}),a},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var i=n(287),r=n(1177),a=n(1185),s=n(140),o=n(784),c=n(65),l=i.a.extend({hasHandlerForProcedure:function(e){return Object(r.a)(d(e,this))},registerProcedure:function(e,t,n){!function(e,t,n,i){var r=i.channel,a=u.get(r);a||(a=new Map,u.set(r,a));var s=a.get(e);s&&Object(c.b)("A handler for `%{procedureName}` was already registered on this channel",{procedureName:e,registration:s}),a.set(e,{listener:i,target:t,handlerMethodName:n})}(e,t,n=n||e,this)},registerProcedures:function(e,t){for(var n=e.length,i=0;i<n;i++){var r=e[i];Array.isArray(r)?this.registerProcedure(r[0],t,r[1]):this.registerProcedure(r,t)}},unregisterProcedure:function(e){var t=this.channel,n=u.get(t);n&&n.get(e).listener===this&&(n.delete(e),0===n.size&&n.delete(t))},unregisterProcedures:function(e){var t=this;e.forEach(function(e){t.unregisterProcedure(e)})},unregisterAllProcedures:function(){var e=u.get(this.channel);if(e)for(var t=e.entries(),n=void 0;n=t.next().value;){var i=n[0];n[1].listener===this&&e.delete(i)}},shouldHandleMessage:function(e){var t=this;return(Array.isArray(e)?e:[e]).filter(function(e){return e&&Object(r.a)(e.jsonrpc)&&e.jsonrpc===t.messageFormatter.jsonRpcVersion&&Object(r.a)(e.method)}).length>0},handleMessage:function(e){var t=this,n=Array.isArray(e),i=n?e:[e],o=a.a.wrapFunction(h),c=this.messageFormatter,l=[],u={};return i.forEach(function(e){var n=e.id,i=o(e,t).then(function(e){u[n]=e!==g?function(e,t,n){if(Object(r.a)(t))return e.generateResultMessageFor(t,n)}(c,n,e):g}).catch(function(e){if(u[n]=p(c,n,e),!(e instanceof s.b))throw e});l.push(i)}),a.a.all(l).then(function(){return f(t,i,u,n)},function(e){throw f(t,i,u,n),e})},dispose:function(){this.unregisterAllProcedures(),this.__s._$33C$dispose.call(this)},__superMap:{_$33C$dispose:"dispose"},staticMembers:{__QUALIFIED_CLASS_NAME__:"JsonRpcListenerFix"}}),u=new Map;function d(e,t){var n=u.get(t.channel);if(n){var i=n.get(e);if(i&&i.listener===t)return i}return null}function h(e,t){if(t.isDisposed)return new Promise(function(){});var n=e.method,i=e.params,a=void 0===i?[]:i;if(Object(r.a)(a)&&!Array.isArray(a)){var c="JSON-RPC calls in JavaScript cannot support `params` as an Object, only as an Array";throw o.b.error(c,e),new s.d(c,{message:e})}var l,h,p,f=d(n,t);if(!f){if(l=n,h=t.channel,(p=u.get(h))&&p.get(l))return g;var m="A JSON-RPC registration was not found for method `"+n+"`.";throw o.b.error(m,e,t),new s.e(m,{message:e,listener:t})}var v=f.target;if(!v)throw o.b.error("The JSON-RPC target was not found",e,t),new s.e("The JSON-RPC target was not found",{message:e,listener:t});var _=v[f.handlerMethodName];if(!_)throw o.b.error("The JSON-RPC method was not found",e,t),new s.e("The JSON-RPC method was not found",{message:e,listener:t});return _.call.apply(_,[v].concat(a))}function p(e,t,n){if(Object(r.a)(t))return e.generateErrorMessageFor(t,n)}function f(e,t,n,i){var a=e.messageFormatter,o=[];if(t.forEach(function(e){var t=e.id;if(Object(r.a)(t)){var i=n[t];if(i)i!==g&&o.push(i);else{var c=new s.c("The JSON-RPC call was part of a batch which failed due to a fatal error thrown by another call.");i=p(a,t,c)}}}),o.length>0){var c=i?o:o[0];e.channel.send(e.serializer.encode(c))}}var g=Symbol("Do not reply")},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var i=n(80),r=n(1174),a=n(1186),s=n(1185),o=n(241),c=n(194),l=n(98);function u(e,t){if(!e)throw new l.a("[wrapProtocolTargetMethods] no original protocol target specified");if(!t)throw new l.a("[wrapProtocolTargetMethods] no protocol method names specified");var n=i.a.create({originalProtocolTarget:e}),u=function(t){var i=e[t];if(!r.a(i))throw new o.a("Protocol method name "+t+" is not a Function");n[t]=function(){try{var n=e[t].apply(e,arguments);return n?a.a(n)?n.then(function(e){return c.a.createWithOptionalData(e).serialize()}).catch(function(e){return c.a.createFromError(e).serialize()}):s.a.resolve(c.a.createWithOptionalData(n).serialize()):s.a.resolve(c.a.createWithOptionalData().serialize())}catch(e){return s.a.resolve(c.a.createFromError(e).serialize())}}},d=t,h=Array.isArray(d),p=0;for(d=h?d:d[Symbol.iterator]();;){var f;if(h){if(p>=d.length)break;f=d[p++]}else{if((p=d.next()).done)break;f=p.value}u(f)}return n}},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n(80),r=n(36),a=n(34),s=n(225),o=i.a.extend(r.a,{horizontal:a.b(s.a.REGULAR),vertical:a.b(s.a.REGULAR),staticMembers:{__QUALIFIED_CLASS_NAME__:"SizeClass"}})},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n(176);function r(e,t){for(var n=e+t,r=e;r<n;r++)Object(i.f)(this.objectAt(r),this,"StrongArray: item retain")}function a(e,t){for(var n=e+t,r=e;r<n;r++)Object(i.d)(this.objectAt(r),this,"StrongArray: item retain")}var s={strong:!0,init:function(){var e=arguments;this.__s._$9W$init.apply(this,e),r.call(this,0,this.length)},itemsWereInserted:function(e,t){var n=arguments;r.call(this,e,t),this.__s._$CE$itemsWereInserted.apply(this,n)},itemsWillBeRemoved:function(e,t){var n=arguments;a.call(this,e,t),this.__s._$EG$itemsWillBeRemoved.apply(this,n)},dispose:function(){a.call(this,0,this.length),this.__s._$Fw$dispose.call(this)},__superMap:{_$9W$init:"init",_$CE$itemsWereInserted:"itemsWereInserted",_$EG$itemsWillBeRemoved:"itemsWillBeRemoved",_$Fw$dispose:"dispose"}}},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n(49),r=n(54),a={mixinDependencies:[i.a],authenticationStepDidComplete:r.a.define(),authenticationDidComplete:r.a.define()}},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n(68),r=n(65),a=i.a.extend({head:null,tail:null,length:0,insertBetween:function(e,t,n){return n&&t||Object(r.b)("_DoublyLinkedList: invalid insertion",{item:e,next:n,prev:t}),t._nextDoublyLinkedItem=e,e._previousDoublyLinkedItem=t,e._nextDoublyLinkedItem=n,e._owningDoublyLinkedList=this,n._previousDoublyLinkedItem=e,this.length++,e},remove:function(e){var t=e._previousDoublyLinkedItem,n=e._nextDoublyLinkedItem,i=this.head,r=this.tail;if(n&&t&&i&&r)return this.length--,e===i&&e===r?this.head=this.tail=null:(e===i?this.head=n:e===r&&(this.tail=t),n._previousDoublyLinkedItem=t,t._nextDoublyLinkedItem=n),e._nextDoublyLinkedItem=null,e._previousDoublyLinkedItem=null,e._owningDoublyLinkedList=null,e},push:function(e){return this.insertBetween(e,this.tail||e,this.head||e),this.tail=e,this.head||(this.head=e),this},pop:function(){return this.remove(this.tail)},unshift:function(e){return this.insertBetween(e,this.tail||e,this.head||e),this.head=e,this.tail||(this.tail=e),this},shift:function(){return this.remove(this.head)},staticMembers:{__QUALIFIED_CLASS_NAME__:"_DoublyLinkedList"}});a.prototype.enqueue=a.prototype.unshift,a.prototype.dequeue=a.prototype.pop;var s={mixinDependencies:[{_nextDoublyLinkedItem:null,_previousDoublyLinkedItem:null,_owningDoublyLinkedList:null}],staticMembers:{maxUnusedInstanceCount:200,shouldKeepInstanceAlive:function(e){return!0},shouldKeepFlushingCacheQueue:function(e){return e.length>this.maxUnusedInstanceCount},flushCacheQueue:function(){for(var e=this._keepaliveQueue;this.shouldKeepFlushingCacheQueue(e);){var t=e.dequeue();t._isInKeepaliveQueue=!1,t.release(this,c)}},_keepaliveQueue:null,init:function(){var e=arguments;this._keepaliveQueue=a.create(),this.__s._$1qL$init.apply(this,e)},create:function(){var e=arguments,t=this.__s._$1x6$create.apply(this,e);return t.retain(this,o),t},_enqueueInstanceForEviction:function(e){this.shouldKeepInstanceAlive(e)?(this._keepaliveQueue.enqueue(e),e.retain(this,c),e._isInKeepaliveQueue=!0,e.release(this,o),this.flushCacheQueue()):e.release(this,o)},_rescueInstanceFromEviction:function(e){return this._keepaliveQueue.remove(e),e._isInKeepaliveQueue=!1,e.retain(this,o),e.release(this,c),e},__superMap:{_$1qL$init:"init",_$1x6$create:"create"}},_isInKeepaliveQueue:!1,retain:function(e,t){var n=arguments,i=this.__s._$2W4$retain.apply(this,n);return this._isInKeepaliveQueue&&e!==this.constructor&&t!==o?this.constructor._rescueInstanceFromEviction(this):i},release:function(){var e=arguments,t=this.__s._$2gQ$release.apply(this,e);return 1!==this._retainCount||this._isInKeepaliveQueue||this.constructor._enqueueInstanceForEviction(this),t},__superMap:{_$2W4$retain:"retain",_$2gQ$release:"release"}},o="CW._CacheableSupport self-reference: Not queued for eviction.",c="CW._CacheableSupport self-reference: queued for eviction."},function(e,t,n){"use strict";(function(e){n.d(t,"b",function(){return i}),n.d(t,"a",function(){return r});var i=function(e){var t=s++,n=t-o;c[n]=e;var i=arguments.length;if(i>1){for(var r=u.pop()||[],d=1;d<i;d++)r[d-1]=arguments[d];l[n]=r}return a||(a=!0,Promise.resolve().then(h)),t},r=function(e){var t=e-o;c[t]=void 0;var n=l[t];n&&(l[t]=void 0,d(n))},a=!1,s=1,o=1,c=[],l=[],u=[],d=function(e){e.length=0,u.push(e)},h=n(96).a(function(){var t=void 0;a=!1;var n=c.length;if(n){for(t=0;t<n;t++){var i=c[t];if(i){var r=l[t];r?(i.apply(e,r),d(r)):i()}}var s=n;for(n=c.length,t=s;t<n;t++){var u=t-s;c[u]=c[t],l[u]=l[t],c[t]=void 0,l[t]=void 0}c.length=l.length=n-s,o+=s}})}).call(this,n(6))},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return l});var i=n(41),r=n(1215),a=n(499),s=n(108),o=n(135),c=r.b,l=a.a.extend({raw:i.c(null),Make:Object(o.e)("Make"),Model:Object(o.e)("Model"),Software:Object(o.e)("Software"),Height:i.c({readOnly:!0,get:function(){var e=this.raw;return e.hasOwnProperty("PixelYDimension")?e.PixelYDimension:e.hasOwnProperty("ImageHeight")?e.ImageHeight:e.hasOwnProperty("VerticalLines")?e.VerticalLines:null}}),Width:i.c({readOnly:!0,get:function(){var e=this.raw;return e.hasOwnProperty("PixelXDimension")?e.PixelXDimension:e.hasOwnProperty("ImageLength")?e.ImageLength:e.hasOwnProperty("HorizontalLines")?e.HorizontalLines:null}}),Orientation:Object(o.e)("Orientation",1),WhiteBalance:i.c({get:function(){return["Auto","Manual"][this.raw.WhiteBalance]||null}}),MeteringMode:i.c({get:function(){var e=this.raw.MeteringMode;return 255===e?"other":["unknown","Average","CenterWeightedAverage","Spot","Multispot","Pattern","Partial"][e]||null}}),FocalLength:Object(o.d)("FocalLength"),FNumber:Object(o.d)("FNumber"),ColorSpace:i.c({get:function(){if(void 0===this.raw.ColorSpace)return null;switch(this.raw.ColorSpace){case 1:return"sRGB";case 2:return"Adobe RGB";case 65535:return"Uncalibrated";case 65534:return"ICC Profile";case 65533:return"Wide Gamut RGB";default:return null}}}),ISOSpeedRatings:Object(o.d)("ISOSpeedRatings"),ExposureTime:Object(o.d)("ExposureTime"),ExposureBiasValue:Object(o.d)("ExposureBiasValue"),MakerNote:i.c({get:function(){var t=this.raw.MakerNote;if(void 0!==t)return 0===t.length?{}:function(t){var n=new e.ArrayBuffer(t.length),i=new e.DataView(n);t.forEach(function(e,t){return i.setUint8(t,e)}),c.reset(i);for(var r="",a=0;a<9;a++)r+=c.nextChar;if("Apple iOS"!==r)return null;c.fastForward(3);var l=c.nextChar+c.nextChar;return c.le="II"===l,Object(o.f)(c,s.a.AppleMakerNotes)}(t);var n={};for(var i in s.a.AppleMakerNotes)this.raw[i]&&(n[s.a.AppleMakerNotes[i]]=this.raw[i]);return n}}),Latitude:i.c({get:function(){if(this.raw.Latitude)return this.raw.Latitude;var e=this.raw.GPSLatitude;return void 0===e?null:("S"===this.raw.GPSLatitudeRef?-1:1)*(e[0][0]/e[0][1]+e[1][0]/e[1][1]/60+e[2][0]/e[2][1]/3600)}}),Longitude:i.c({get:function(){if(this.raw.Longitude)return this.raw.Longitude;var e=this.raw.GPSLongitude;return void 0===e?null:("W"===this.raw.GPSLongitudeRef?-1:1)*(e[0][0]/e[0][1]+e[1][0]/e[1][1]/60+e[2][0]/e[2][1]/3600)}}),LivePhotosUUID:i.c({get:function(){return this.MakerNote&&this.MakerNote.LivePhotosUUID||null}}),LensModel:Object(o.e)("LensModel"),DateStamp:Object(o.e)("DateStamp",null,"GPS"),TimeStamp:Object(o.e)("TimeStamp",null,"GPS"),DateTimeOriginal:Object(o.e)("DateTimeOriginal"),staticMembers:{__QUALIFIED_CLASS_NAME__:"jpegInterface"}})}).call(this,n(6))},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n(69),r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},a=("function"==typeof Symbol&&Symbol.iterator,{staticMembers:{delete:function(e){return this.performOperation(i.a.WRITE.DESTROY,e)}},delete:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.constructor.delete(r({primaryKeys:[this.getPrimaryKey()]},e))}})},function(e,t,n){"use strict";n.d(t,"a",function(){return p});var i=n(49),r=n(180),a=n(80),s=n(32),o=n(176),c=n(36),l=n(34),u=n(93),d=n(126),h=n(332),p={mixinDependencies:[i.a,c.a],selection:Object(l.b)(Object(u.c)("selectionController.selection")),selectedItem:Object(l.b)(Object(u.c)("selectionController.selectedItem")),selectionController:Object(l.b)({strong:!0,downstreamBindings:{collection:"(owner).collection",delegate:"(owner).selectionDelegate",isEmptySelectionEnabled:"(owner).isEmptySelectionEnabled",isMultipleSelectionEnabled:"(owner).isMultipleSelectionEnabled"}}),selectionDelegate:Object(l.b)({defaultValue:Object(r.b)(a.a.extend(h.a))}),collection:Object(s.c)(d.a),isSelectionEnabled:Object(l.b)({defaultValue:!0,didChange:function(e){e||(this.selection=null,this.update())}}),update:function(e){var t=arguments;Object(o.f)(e,this,"SelectionSupportProtocol: invalidationContext"),this.__s._$mW$update.apply(this,t),e&&(e.itemsChanges||e.collectionChanged||e.everythingChanged)&&this.selectionController.updateSelectionForCollectionChange(e),Object(o.e)(e,this,"SelectionSupportProtocol: invalidationContext")},isEmptySelectionEnabled:Object(l.b)(!0),isMultipleSelectionEnabled:Object(l.b)(!0),selectItem:function(e){this.selectedItem=e},userPerformedSelectionOperation:function(e,t){if(this.isSelectionEnabled)return this.selectionController.userPerformedSelectionOperation(e,t)},isItemAtHandleSelected:function(e){return!!this.isSelectionEnabled&&this.selectionController.isItemAtHandleSelected(e)},isCellSelected:function(e){return!!this.isSelectionEnabled&&!!this.isCellSelectable(e)&&this.isItemAtHandleSelected(e.handle)},isCellSelectable:function(e){return"item"===e.cellType},selectCell:function(e,t){if(this.isSelectionEnabled){var n=this.selectionController;e?this.isCellSelectable(e)&&n.userPerformedSelectionOperation(e.handle,t):n.userPerformedSelectionOperation(null,t)}},userPerformedSelectionOperationInDirection:function(e,t){if(this.isSelectionEnabled)return this.selectionController.userPerformedSelectionOperationInDirection(e,t)},selectAll:function(){if(this.isSelectionEnabled)return this.selectionController.selectAll()},clearSelection:function(){if(this.isSelectionEnabled)return this.userPerformedSelectionOperation()},_updateWhenSelectionChanges:Object(c.e)("selectionController.selectionDidChange",function(){this.update()}),__superMap:{_$mW$update:"update"}}},function(e,t,n){"use strict";n.d(t,"a",function(){return h});var i=n(1139),r=n(34),a=n(36),s=n(410),o=n(180),c=n(333),l=n(1136),u=n(402),d=i.a.create(),h=c.a.extend({_tempIndexSet:Object(o.b)(l.a),selectedIndices:Object(r.b)({dependencies:[],writeDependencies:["selectionDidChange","pivot"],get:function(){return this._selectedIndices},set:Object.assign(function(e){var t=this.delegate,n=this.collection,i=this._selectedIndices,r=i.length;1===r?t.selectionControllerDidDeselectItem(this,n.startHandle.at(i.firstIndexAfter(-1))):r>1&&t.selectionControllerDidSelectRange(this,i),e||(e=i);var a=this.getPath("collection.length");if(!this.isEmptySelectionEnabled&&n&&a&&0===e.length){this._selectedIndices=l.a.create();for(var s=n.startHandle;s.isValid&&!this.selectItemAtHandle(s);s=s.next);e=this._selectedIndices}else if(!this.isMultipleSelectionEnabled&&e.length>1){this._selectedIndices=l.a.create();var o=e,c=Array.isArray(o),u=0;for(o=c?o:o[Symbol.iterator]();;){var d;if(c){if(u>=o.length)break;d=o[u++]}else{if((u=o.next()).done)break;d=u.value}var h=d,p=n.startHandle.at(h).retain(this,"IndexedSelectionController#selectedIndices: enforcing isMultipleSelectionEnabled"),f=this.selectItemAtHandle(p);if(p.release(this,"IndexedSelectionController#selectedIndices: enforcing isMultipleSelectionEnabled"),f)break}e=this._selectedIndices}else this._selectedIndices=e=t.selectionControllerShouldSelectRange(this,e),t.selectionControllerDidSelectRange(this,e);var g=this._pivot,m=g;return g&&e.contains(g.position)||e.length>0&&(m=n?n.startHandle.at(e.lastIndexBefore(1/0)):null),this.pivot=m,this.selectionDidChange=!0,e},{__CW__setter:function(e,t,n,i,r){var a=this.delegate,s=this.collection,o=this._selectedIndices,c=o.length;1===c?a.selectionControllerDidDeselectItem(this,s.startHandle.at(o.firstIndexAfter(-1))):c>1&&a.selectionControllerDidSelectRange(this,o),e||(e=o);var u=this.getPath("collection.length");if(!this.isEmptySelectionEnabled&&s&&u&&0===e.length){this._selectedIndices=l.a.create();for(var d=s.startHandle;d.isValid&&!this.selectItemAtHandle(d);d=d.next);e=this._selectedIndices}else if(!this.isMultipleSelectionEnabled&&e.length>1){this._selectedIndices=l.a.create();var h=e,p=Array.isArray(h),f=0;for(h=p?h:h[Symbol.iterator]();;){var g;if(p){if(f>=h.length)break;g=h[f++]}else{if((f=h.next()).done)break;g=f.value}var m=g,v=s.startHandle.at(m).retain(this,"IndexedSelectionController#selectedIndices: enforcing isMultipleSelectionEnabled"),_=this.selectItemAtHandle(v);if(v.release(this,"IndexedSelectionController#selectedIndices: enforcing isMultipleSelectionEnabled"),_)break}e=this._selectedIndices}else this._selectedIndices=e=a.selectionControllerShouldSelectRange(this,e),a.selectionControllerDidSelectRange(this,e);var b=this._pivot,y=b;return b&&e.contains(b.position)||e.length>0&&(y=s?s.startHandle.at(e.lastIndexBefore(1/0)):null),n[1+i]=y,n[0+i]=!0,e}}),writeDependencySetPathMap:["false","false"]}),_maintainFlags:Object(a.f)({inputs:["delegate","isEmptySelectionEnabled","isMultipleSelectionEnabled"],callback:function(e){e&&(this.selectedIndices=this._selectedIndices)}}),_selectedIndices:Object(o.b)(l.a),updateSelectionForCollectionChange:function(e){var t=this._selectedIndices,n=e.itemsChanges,i=!1;if(n){if(t.length>0){d.serializer=this.collection.serializer;for(var r=n.length,a=0;a<r;a++){var o=n[a],c=o.index;if(o.operation===s.b.REMOVE)t.contains(c)&&d.encodedAdd(o.encodedItem),t.itemsRemovedAtIndex(c,1);else if(t.itemsInsertedAtIndex(c,1),d.length>0){var l=o.encodedItem;d.encodedContains(l)&&(t.add(c),d.encodedRemove(l),i=!0)}}d.length&&(i=!0,d.clear())}}else if(e.collectionChanged)t.length&&(i=!0,t.clear());else if(e.everythingChanged&&t.length){var u=this.collection.length;t.clone().forEach(function(e){e>=u&&t.remove(e)}),i=!0}0!==t.length||this.isEmptySelectionEnabled||(i=!0),i&&(this.selectedIndices=t)},selection:Object(r.b)({dependencies:["selectedIndices"],set:Object.assign(function(e){var t=this.collection,n=l.a.create();if(e&&t)if(e.serializer===t.serializer)for(var i=e.createIterator();i.isValid;i.moveToNext())n.add(t.encodedIndexOf(i.encodedValue));else e.forEach(function(e){n.add(t.indexOf(e))});return this.selectedIndices=n,e},{__CW__setter:function(e,t,n,i,r){var a=this.collection,s=l.a.create();if(e&&a)if(e.serializer===a.serializer)for(var o=e.createIterator();o.isValid;o.moveToNext())s.add(a.encodedIndexOf(o.encodedValue));else e.forEach(function(e){s.add(a.indexOf(e))});return n[0+i]=s,e}}),get:Object.assign(function(){var e=this.collection,t=i.a.create();return e&&(t.serializer=e.serializer,this.selectedIndices.forEach(function(n){t.encodedAdd(e.encodedObjectAt(n))})),t},{__CW__getter:function(e,t,n,r){var a=this.collection,s=i.a.create();return a&&(s.serializer=a.serializer,r.internalGet(this,t[0+n]).forEach(function(e){s.encodedAdd(a.encodedObjectAt(e))})),s}}),writeDependencySetPathMap:["false"]}),isItemAtHandleSelected:function(e){return this.selectedIndices.contains(e.position)},selectItemAtHandle:function(e){var t=this.delegate;return!!t.selectionControllerShouldSelectItem(this,e)&&(this._selectedIndices.add(e.position),this.propertyChanged("selectedIndices"),t.selectionControllerDidSelectItem(this,e),!0)},deselectItemAtHandle:function(e){var t=this._selectedIndices,n=this.collection,i=e.position,r=null;if(t.remove(i),0!==t.length){var a=this.pivot;if(e===a){var s=t.firstIndexAfter(i),o=t.lastIndexBefore(i),c=(-1===s?1/0:s-i)<(-1===o?1/0:i-o)?s:o;r=n.startHandle.at(c)}else r=a}return this.pivot=r,this.propertyChanged("selectedIndices"),this.delegate.selectionControllerDidDeselectItem(this,e),!0},clearSelection:function(){var e=this.selectedIndices;this.delegate.selectionControllerDidDeselectRange(this,e),this.selectedIndices.clear(),this.pivot=null},selectRange:function(e,t){var n=e.position,i=t.position,r=this._selectedIndices,a=this._tempIndexSet;a.clear(),a.add(n,i);var s=this.delegate.selectionControllerShouldSelectRange(this,a);r.union(s),this.delegate.selectionControllerDidSelectRange(this,s)},getSelectableHandleInDirection:function(e,t){var n;switch(t){case u.a.UP:n=-1;break;case u.a.DOWN:n=1;break;default:return null}for(var i=e.retain(this,"getSelectableHandleInDirection: selectableItem");;){var r=i.atDistance(n).retain(this,"getSelectableHandleInDirection: selectableItem");if(i.release(this,"getSelectableHandleInDirection: selectableItem"),!r.isValid)return r.release(this,"getSelectableHandleInDirection: selectableItem"),null;if(i=r,this.delegate.selectionControllerShouldSelectItem(this,i)&&!this.isItemAtHandleSelected(i))return i.autorelease(this,"getSelectableHandleInDirection: selectableItem")}},staticMembers:{__QUALIFIED_CLASS_NAME__:"IndexedSelectionController"}})},function(e,t,n){"use strict";n.d(t,"a",function(){return g});var i=n(80),r=n(49),a=n(54),s=n(41),o=n(1185),c=n(180),l=n(65),u=n(1170),d=n(1169),h=n(1184),p=n(799),f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g=i.a.extend(r.a,{staticMembers:{dequeuedErrorMessage:"Action dequeued from `%{processorClassName}` queue",canceledErrorMessage:"Action canceled from `%{processorClassName}` while active",__QUALIFIED_CLASS_NAME__:"BaseProcessor"},processAction:a.a.define(),maxConcurrentActions:Object(s.c)({defaultValue:5,set:function(e){var t=this._maxConcurrentActions;return void 0!==t&&e>t&&(this.needsProcessing=!0),e}}),enqueue:function(){for(var e,t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];e=this.preprocessActionData?this.preprocessActionData.apply(this,n):n;var r=o.a.create();return this.enqueueActionData(e,this._queue),this._actionDataToPromiseMap.set(e,r),this._promiseToActionDataMap.set(r,e),this.needsProcessing=!0,r},preprocessActionData:null,enqueueActionData:function(e,t){t.push(e)},dequeue:function(e,t){var n=this._queue,i=this._promiseToActionDataMap.get(e);return-1!==n.indexOf(i)&&(t=void 0!==t?t:this.payloadForDequeue(i),e.reject(t),this._clearQueuedAction(i,e),!0)},cancel:function(e,t){if(this.dequeue(e,t))return!0;var n=this._promiseToActionDataMap.get(e);return this._active.indexOf(n)>-1&&(t=void 0!==t?t:this.payloadForCancel(n),e.reject(t),this._clearActiveAction(n,e),this.needsProcessing=!0,!0)},payloadForDequeue:function(e){return new l.a(this.constructor.dequeuedErrorMessage,{processorClassName:Object(u.a)(this),processor:this,action:e})},payloadForCancel:function(e){return new l.a(this.constructor.canceledErrorMessage,{processorClassName:Object(u.a)(this),processor:this,action:e})},clearQueue:function(e){for(var t=this._queue,n=this._actionDataToPromiseMap,i=this._promiseToActionDataMap,r=0,a=t.length;r<a;r++){var s=t[r];e=void 0!==e?e:this.payloadForDequeue(s);var o=n.get(s);o.reject(e),n.delete(s),i.delete(o)}t.length=0},abort:function(e){this.clearQueue(e);for(var t=this._active,n=this._actionDataToPromiseMap,i=this._promiseToActionDataMap,r=0,a=t.length;r<a;r++){var s=t[r];e=void 0!==e?e:this.payloadForCancel(s);var o=n.get(s);o.reject(e),n.delete(s),i.delete(o)}t.length=0},needsProcessing:Object(s.c)({defaultValue:!1,set:function(e){return e?this._processingTimer.start():this._processingTimer.stop(),e}}),process:function(e,t){this.willProcess(e,t);for(var n=this._shouldSpreadActionData,i=0;this.shouldContinueProcessing(e,i,t);){var r=e[i];if(this.shouldProcessAction(r,e,t)){e.splice(i,1),t.push(r);var a;a=n&&r?this.processAction.apply(this,r):this.processAction(r),this.completeAction(r,a),this.didProcessAction(r,e,t)}else i+=1}this.didProcess(e,t)},willProcess:d.a,shouldContinueProcessing:function(e,t,n){return e.length>t&&n.length<this.maxConcurrentActions},shouldProcessAction:function(e,t,n){return!0},completeAction:function(e,t){"object"===(void 0===t?"undefined":f(t))&&"function"==typeof t.then?t.then(this._resolveAction.bind(this,e),this._rejectAction.bind(this,e)):Object(h.a)(this._resolveAction.bind(this,e,t),0)},didProcessAction:d.a,didProcess:d.a,init:function(){var e=arguments;this.__s._$7wD$init.apply(this,e),null===this._shouldSpreadActionData&&(this._shouldSpreadActionData=!this.preprocessActionData)},_shouldSpreadActionData:null,_queue:Object(c.b)(Array),_active:Object(c.b)(Array),_promiseToActionDataMap:Object(c.b)(Map),_actionDataToPromiseMap:Object(c.b)(Map),_resolveAction:function(e,t){var n=this._actionDataToPromiseMap.get(e);this._clearActiveAction(e,n),this.needsProcessing=!0,n.resolve(t)},_rejectAction:function(e,t){var n=this._actionDataToPromiseMap.get(e);this._clearActiveAction(e,n),this.needsProcessing=!0,n.reject(t)},_clearQueuedAction:function(e,t){var n=this._queue,i=n.indexOf(e);n.splice(i,1),this._actionDataToPromiseMap.delete(e),this._promiseToActionDataMap.delete(t)},_clearActiveAction:function(e,t){var n=this._active,i=n.indexOf(e);n.splice(i,1),this._actionDataToPromiseMap.delete(e),this._promiseToActionDataMap.delete(t)},_processingTimer:Object(c.b)(p.a,{delay:0,timesToFire:1,action:"_reprocess"}),_reprocess:function(){this.process(this._queue,this._active),this.needsProcessing=!1},__superMap:{_$7wD$init:"init"}})},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n(49),r=n(126),a=n(54),s={mixinDependencies:[i.a],hostInfo:r.a.define(),addHostedApplication:a.a.define(),removeHostedApplication:a.a.define(),findHostedApplication:a.a.define(),openHelp:a.a.define(),logOut:a.a.define(),setRouteForApp:a.a.define(),recordStat:a.a.define()}},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n(34),r=n(180),a=n(1169),s=n(1272),o={mixinDependencies:[n(431).a],hostInfo:i.b({type:Object,readOnly:!0,defaultValue:r.b(Object)}),addHostedApplication:function(e){var t=this._hostedApplications,n=e.appId;t.set(n,e)},removeHostedApplication:function(e){var t=this._hostedApplications,n=e.appId;t.delete(n)},findHostedApplication:function(e){var t=this._hostedApplications;return t.has(e)?t.get(e):null},openHelp:a.a,logOut:a.a,setRouteForApp:a.a,recordStat:a.a,_hostedApplications:i.b(r.b(s.a))}},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=n(245).a.extend({type:"FETCH_SHARE",staticMembers:{__QUALIFIED_CLASS_NAME__:"FetchShareRecordOperation"}})},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return u});var i=n(409),r=n(34),a=n(180),s=n(200),o=n(1182),c=n(549),l=n(518),u=(n(1087),i.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"iCloudLogo"},{type:"VIEWOUTLET",tagname:"view",name:"appNameButton"},{type:"VIEWOUTLET",tagname:"view",name:"disclosureArrow"}],classes:[{type:"CLASSNAMEOUTLET",bindingtype:"DIRECTBINDING",name:"theme",attributes:{}}]},className:"app-name",__QUALIFIED_CLASS_NAME__:"AppNameView"},theme:r.b("light-theme"),appName:r.b(),appNameTooltip:r.b(),iCloudLogo:a.b(c.a),appNameButton:r.b({defaultValue:a.b(s.a,{additionalClassNames:o.a(["app-name-button"]),action:"redirectToPhotos"}),downstreamBindings:{title:"(owner).appName",tooltip:"(owner).appNameTooltip"}}),shouldShowDisclosureArrow:r.b(!0),_disclosureArrow:a.b(l.a.extend({additionalClassNames:o.a(["disclosure-arrow"])})),disclosureArrow:r.b({readOnly:!0,dependencies:["shouldShowDisclosureArrow"],get:Object.assign(function(){return this.shouldShowDisclosureArrow?this._disclosureArrow:null},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?this._disclosureArrow:null}})}),redirectToPhotos:function(){var t=e.top.location.origin+"/#photos";window.top.location.assign(t)}}))}).call(this,n(6))},function(e,t,n){"use strict";var i=n(34),r=n(1139),a=n(36),s=n(790),o=n(791),c=n(120),l=n(788),u=n(1188),d=n(180),h={mixinDependencies:[a.a],layoutContext:Object(i.b)({strong:!0,type:u.b,defaultValue:Object(d.b)(u.a)})},p=n(775),f=n(1177),g=n(1143),m=n(41),v=n(39),_=n(80),b=n(793),y=n(784),I=n(65),w=n(143),S=_.a.extend(a.a,{left:Object(i.b)(0),top:Object(i.b)(0),right:Object(i.b)(0),bottom:Object(i.b)(0),isEstimated:Object(i.b)(!1),toString:function(){var e=this.left,t=this.top,n=this.right,i=this.bottom;return this.__s._$h4$toString.call(this)+" { left: "+e+", top: "+t+", right: "+n+", bottom: "+i+" }"},__superMap:{_$h4$toString:"toString"},staticMembers:{__QUALIFIED_CLASS_NAME__:"SpaceAroundViewport"}}),C=_.a.extend(a.a,{collection:Object(i.b)(),layoutDelegate:Object(i.b)({strong:!0}),layoutMetrics:Object(i.b)({strong:!0}),presenter:Object(i.b)({strong:!0}),viewportWidth:Object(i.b)(1024),viewportHeight:Object(i.b)(768),horizontalOverdraw:Object(i.b)(0),verticalOverdraw:Object(i.b)(0),_updateViewportBounds:Object(a.f)("viewportWidth","viewportHeight","horizontalOverdraw","verticalOverdraw",function(e,t,n,i){var r=this.viewportBounds;v.a.pause(),r.x=-n,r.y=-i,r.width=e+2*n,r.height=t+2*i,v.a.resume()}),viewportBounds:Object(i.b)(function(){return u.a.create({x:-this.horizontalOverdraw,y:-this.verticalOverdraw})}),spaceAroundViewport:Object(i.b)(Object(d.b)(S)),visibleCells:Object(i.b)(b.a.create()),_tmp_cellsArray:Object(d.b)(Array),showItem:function(e,t,n){var i=this.collection.handleFor(e);if(i.isValid){var r=o.a.create(t,n);this.update(w.a.create({itemShown:i,itemShownAt:r}))}else y.b.warn("LayoutController: Attempted to scroll to item not in collection",{item:e})},scrollToItem:function(e){var t=this.collection.handleFor(e);t.isValid?this.update(w.a.create({itemScrolledTo:t})):y.b.warn("LayoutController: Attempted to scroll to item not in collection",{item:e})},rectForItem:function(e){var t=this.visibleCells;if(0===t.length)return null;var n=this.layoutDelegate.getCellForItem(this,this.collection,t,e);return n?n.rect:void 0},_beginUpdate:function(e,t,n){return this._isUpdating&&Object(I.b)("LayoutController cannot update while an update is already in progress.",{invalidationContext:e}),this._isUpdating=!0,n||Object(I.b)("LayoutController#_beginUpdate: layoutDelegate is required",{invalidationContext:e}),n.acquireVisibleCells(this,t,e)},_finishUpdate:function(e,t,n,i,r){this.visibleCells=r,this._handleItemEnters(r),this._handleItemMoves(r),this._handleItemExits(i),i.clear(),this._isUpdating=!1,this.computeSpaceAroundViewport(e)},update:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w.a.create({everythingChanged:!0});e.retain(this,"LayoutController#update: invalidationContext");var t=this.collection,n=this.layoutDelegate;if(n){var i=this._beginUpdate(e,t,n),r=this.visibleCells;r&&r.length>0&&n.reusePreviousVisibleCells(this,t,i,r,e),0===i.length&&n.initializeVisibleCells(this,t,i,r,e),0!==i.length&&n.completeVisibleCells(this,t,i,e),n.finalizeVisibleCells(this,t,i,e),this._finishUpdate(e,t,n,r,i),e.release(this,"LayoutController#update: invalidationContext")}else e.release(this,"LayoutController#update: invalidationContext")},_handleItemExits:function(e){var t,n,i=e.length,r=this._tmp_cellsArray;for(r.length=0,t=0;t<i;t++)(n=e.objectAt(t)).isLaidOut||r.push(n);var a=this.presenter;for(a.cellsWillExit(r),i=r.length,t=0;t<i;t++)(n=r[t]).wasLaidOut=!1,a.cellDidExit(n);a.cellsDidExit(r)},_handleItemEnters:function(e){var t,n,i=e.length,r=this._tmp_cellsArray;for(r.length=0,t=0;t<i;t++)(n=e.objectAt(t)).wasLaidOut||r.push(n);var a=this.presenter;for(a.cellsWillEnter(r),i=r.length,t=0;t<i;t++)n=r[t],a.cellDidEnter(n),n.wasLaidOut=!0;a.cellsDidEnter(r),r.length=0},_handleItemMoves:function(e){var t=this.presenter;t.cellsWillMove(e);for(var n=0,i=e.length;n<i;n++){var r=e.objectAt(n);t.cellDidMove(r)}t.cellsDidMove(e)},computeSpaceAroundViewport:function(e){var t=this.spaceAroundViewport;return v.a.pause(),0===this.visibleCells.length?(t.left=0,t.right=0,t.top=0,t.bottom=0):(t=this.layoutDelegate.computeSpaceAroundViewport(this,e),this.spaceAroundViewport=t),v.a.resume(),t},staticMembers:{__QUALIFIED_CLASS_NAME__:"CollectionLayoutController"}}),O=n(839);n.d(t,"a",function(){return A});var A=l.a.extend(h,{viewClass:O.a,init:function(e){var t=arguments,n=this.layoutMetrics,r=n,a=this.layoutDelegate.LayoutMetricsClass;Object(p.a)(n)?n=a.create(n):Object(f.a)(n)||(n=a.create()),r!==n&&(this.layoutMetrics=n),this.__s._$1qP$init.apply(this,t),n=this.layoutMetrics;var s=[],o=[],c=this._previousLayoutMetrics;for(var l in n.getMetadataByType(i.a))o.push(l),c[l]=n[l],s.push("layoutMetrics."+l);this._layoutMetricsKeys=o,s.push("_updateWhenContentsChange"),this._layoutMetricsObserver=this.observe({inputs:s,notifyOnCreate:!1,callback:this._updateWhenLayoutMetricsChange})},_layoutMetricsKeys:null,_previousLayoutMetrics:Object(m.c)({strong:!0,defaultValue:Object(d.b)(Object)}),_changedKeys:Object(m.c)({strong:!0,defaultValue:Object(d.b)(r.a)}),_layoutMetricsObserver:null,_updateWhenLayoutMetricsChange:function(){var e=this._changedKeys;e.clear();for(var t=this._layoutMetricsKeys,n=t.length,i=this._previousLayoutMetrics,r=this.layoutMetrics,a=0;a<n;a++){var s=t[a],o=r[s];o!==i[s]&&(e.add(s),i[s]=o)}0!==e.size&&this.update(w.a.create({layoutMetricsChanged:e}))},viewportWidth:Object(i.b)(0),viewportHeight:Object(i.b)(0),layoutMetrics:Object(i.b)({strong:!0}),layoutController:Object(i.b)({strong:!0,defaultValue:Object(d.b)(C),downstreamBindings:{collection:"(owner).collection",viewportWidth:"(owner).viewportWidth",viewportHeight:"(owner).viewportHeight",layoutDelegate:"(owner).layoutDelegate",presenter:"(owner).presenter",layoutMetrics:"(owner).layoutMetrics"}}),_updateWhenContentsChange:Object(a.e)("collection.contentsDidChange","collection.handleProvider.handlesDidUpdate",function(e){e&&this.update(w.a.create({itemsChanges:e.context}))}),_updateWhenCollectionChanges:Object(a.e)("collection",function(e){this.update(w.a.create({collectionChanged:!0}))}),layoutDelegate:Object(i.b)({strong:!0}),contentSize:Object(i.b)({strong:!0,dependencies:["collection","collection.contentsDidChangeUntracked","layoutController.spaceAroundViewport"],readOnly:!0,get:Object.assign(function(){var e=this.layoutController,t=this.collection,n=this.layoutDelegate;if(e.visibleCells.length>0){var i=this.getPath("layoutController.spaceAroundViewport"),r=this.viewportWidth+i.left+i.right,a=this.viewportHeight+i.top+i.bottom;return s.a.create(r,a)}if(t&&t.length>0){var o=n.setUpFirstCell(e,t).retain(this,"CollectionViewController#contentSize: cell"),c=o.bottom+n.spaceBelowCell(e,o),l=s.a.create(o.width,c);return o.release(this,"CollectionViewController#contentSize: cell"),l}return s.a.create(0,0)},{__CW__getter:function(e,t,n,i){var r=this.layoutController,a=this.collection,o=this.layoutDelegate;if(r.visibleCells.length>0){var c=i.internalGetPath(this,t[2+n]),l=this.viewportWidth+c.left+c.right,u=this.viewportHeight+c.top+c.bottom;return s.a.create(l,u)}if(a&&a.length>0){var d=o.setUpFirstCell(r,a).retain(this,"CollectionViewController#contentSize: cell"),h=d.bottom+o.spaceBelowCell(r,d),p=s.a.create(d.width,h);return d.release(this,"CollectionViewController#contentSize: cell"),p}return s.a.create(0,0)}})}),presenter:Object(i.b)({strong:!0,downstreamBindings:{views:"(owner).view.itemViews",layoutMetrics:"(owner).layoutMetrics"}}),layoutContext:c.a.sharedInstance.window,_measureViewport:Object(a.f)({inputs:["isAttached","view.isAttached","layoutContext.width","layoutContext.height"],callback:function(e,t){e&&t?this.measureViewport():this.update(w.a.create({everythingChanged:!0}))}}),measureViewport:function(){if(this.isAttached){var e=this.view;if(e){var t=e.element,n=1,i=1;t&&(n=t.offsetWidth,i=t.offsetHeight);var r=this.viewportWidth,a=this.viewportHeight;r===n&&a===i||(this.beginBatchSet().set("viewportWidth",n).set("viewportHeight",i).end(),n>0&&i>0&&(this._changedWhileHidden?(this.update(w.a.create({everythingChanged:!0})),this._changedWhileHidden=!1):this.update(w.a.create({sizeChangedBy:s.a.create({width:n-r,height:i-a})})),this.updateScrollBounds()))}}},collection:Object(i.b)({strong:!0}),update:function(e){if(this.isViewLoaded){var t=this.viewportWidth,n=this.viewportHeight;if(0!==n&&0!==t){var i=this.view;i.height=n,i.width=t,this.layoutController.update(e)}else this._changedWhileHidden=!0}},_changedWhileHidden:!1,_update:function(){Object(g.b)(this.update,arguments,this)},updateScrollBounds:Object(a.f)("layoutController.spaceAroundViewport.left","layoutController.spaceAroundViewport.top","layoutController.spaceAroundViewport.right","layoutController.spaceAroundViewport.bottom",function(e,t,n,i){if(void 0!==e&&void 0!==n&&void 0!==t&&void 0!==i){var r=this.viewportHeight,a=-e,s=n+this.viewportWidth,o=-t,c=i+r;this.view.beginBatchSet().set("scrollMinX",a).set("scrollMaxX",s).set("scrollMinY",o).set("scrollMaxY",c).end()}}),scrollBy:function(e,t){var n=w.a.create();n.movedBy=o.a.create(e,t),this.update(n)},didScroll:function(e,t){this.scrollBy(-e,-t)},showItem:function(e,t,n){this.layoutController.showItem(e,t,n)},scrollToItem:function(e){this.layoutController.scrollToItem(e)},__superMap:{_$1qP$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"CollectionViewController"}})},function(e,t,n){"use strict";var i=n(1169),r=n(1177),a=n(65),s=n(1190),o=n(193),c=n(1130),l=n(49),u=n(54),d=n(32),h={mixinDependencies:[{mixinDependencies:[n(315).a],createIteratorAtEnd:Object(d.c)(u.a)},o.a],createIterator:function(){return this.createIteratorAt(0)},createIteratorAtEnd:function(){return this.createIteratorAt(this.get("length")-1)},createIteratorAt:Object(d.c)(u.a)},p=n(82),f=n(41);n.d(t,"a",function(){return g});var g={mixinDependencies:[l.a,o.a,h],lastItem:Object(f.c)({get:function(){return this.objectAt(this.length-1)},set:function(e){return this.setIndex(this.length-1,e),e}}),firstItem:Object(f.c)({get:function(){return this.objectAt(0)},set:function(e){return this.setIndex(0,e),e}}),push:function(){for(var e=this.length,t=this.serializer,n=e,i=arguments.length,r=Array(i),a=0;a<i;a++)r[a]=arguments[a];if(t&&t.encode)for(var s=0,o=r.length;s<o;s++)r[s]=t.encode(r[s],s+n);return this.encodedPush.apply(this,r)},encodedPush:function(){for(var e=this.length,t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return this.encodedRawSplice.apply(this,[e,0].concat(n)),e+n.length},pop:function(){var e=this.length-1;return this.decode(this.encodedPop(),e)},encodedPop:function(){var e=this.length-1;return this.encodedRawSplice(e,1)[0]},unshift:function(){for(var e=this.serializer,t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];if(e&&e.encode)for(var r=0,a=n.length;r<a;r++)n[r]=e.encode(n[r],r);return this.encodedUnshift.apply(this,n)},encodedUnshift:function(){for(var e=this.length,t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return this.encodedRawSplice.apply(this,[0,0].concat(n)),e+n.length},shift:function(){return this.decode(this.encodedShift(),0)},encodedShift:function(){return this.encodedRawSplice(0,1)[0]},insertAt:function(e){for(var t=this.serializer,n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];if(t&&t.encode)for(var a=0,s=i.length;a<s;a++)i[a]=t.encode(i[a],a+e);return this.encodedInsertAt.apply(this,[e].concat(i))},encodedInsertAt:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return this.encodedSplice.apply(this,[e,0].concat(n)),this},removeAt:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.encodedSplice(e,t),this},add:function(e){return this.push(e),!0},encodedAdd:function(e){return this.encodedPush(e),!0},remove:function(e){return this.encodedRemove(this.encode(e))},encodedRemove:function(e){var t=this.encodedIndexOf(e);return-1!==t&&(this.removeAt(t,1),!0)},slice:function(e,t){var n=this.get("length");if(0===n)return[];e=void 0===e?0:v(e,n);for(var i=(t=void 0===t||t>n?n:v(t,n))-e,r=new Array(i),a=0;a<i;a++)r[a]=this.objectAt(a+e);return r},indexOf:function(e,t){return this.encodedIndexOf(this.encode(e),t)},encodedIndexOf:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.length,i=t=v(t,n);i<n;i++)if(this.encodedObjectAt(i)===e)return i;return-1},contains:_,encodedContains:b,includes:_,encodedIncludes:b,lastIndexOf:function(e,t){return this.encodedLastIndexOf(this.encode(e),t)},encodedLastIndexOf:function(e,t){for(var n=this.length,i=t=void 0===t?n-1:v(t,n);i>=0;i--)if(this.encodedObjectAt(i)===e)return i;return-1},splice:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this._validateSpliceArguments.apply(this,[this.rawSplice].concat(t))},encodedSplice:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this._validateSpliceArguments.apply(this,[this.encodedRawSplice].concat(t))},_validateSpliceArguments:function(e,t,n){for(var i=arguments.length,r=Array(i>3?i-3:0),a=3;a<i;a++)r[a-3]=arguments[a];var s=this._internalLength;t<0?(t=s+t)<0&&(t=0):t>s&&(t=s);var o=arguments.length;return(2===o||n+t>s)&&(n=s-t),3===o&&0===n?[]:e.call.apply(e,[this,t,n].concat(r))},itemsWillBeInserted:i.a,itemsWereInserted:i.a,itemsWillBeRemoved:i.a,itemsWereRemoved:i.a,itemsWillChange:i.a,itemsDidChange:i.a,rawSplice:function(e,t){for(var n,i=this.serializer,r=arguments.length,a=Array(r>2?r-2:0),s=2;s<r;s++)a[s-2]=arguments[s];if(i&&(n=i.encode))for(var o=a.length,c=0;c<o;c++)a[c]=n.call(i,a[c],e+c);var l=this.encodedRawSplice.apply(this,[e,t].concat(a)),u=void 0;if(i&&(u=i.decode))for(var d=l.length,h=0;h<d;h++)l[h]=u.call(i,l[h],e+h);return l},encodedRawSplice:Object(d.c)(u.a),objectAt:function(e){return this.decode(this.encodedObjectAt(e),e)},encodedObjectAt:Object(d.c)(u.a),iteratorClass:Object(f.c)({readOnly:!0,defaultValue:c.a}),createIteratorAt:function(e){return this.get("iteratorClass").create(this,e)},join:function(e){void 0===e&&(e=",");for(var t=this.get("length"),n="",i=0;i<t;i++){var a=this.objectAt(i);0!==i&&(n+=e),Object(r.a)(a)&&(n+=a.toString())}return n},toString:function(){return this.join(", ")},reverse:function(){for(var e=this.get("length")-1,t=0;t<e;t++,e--)this.swap(t,e);return this},setIndex:function(e,t){return this.encodedSetIndex(e,this.encode(t,e))},encodedSetIndex:function(e,t){return e>this.length&&(this.length=e+1),this.encodedSplice(e,1,t),this},swap:function(e,t){var n=this.encodedObjectAt(t);return this.encodedSetIndex(t,this.encodedObjectAt(e)),this.encodedSetIndex(e,n),this},move:function(e,t){var n=this.encodedRawSplice(e,1)[0];return this.encodedRawSplice(t,0,n),this},sort:function(e){return e||(e=m),function e(t,n,i,r){if(!(r-i+1<=1)){var a=Math.floor((i+r)/2);a=function(e,t,n,i,r){var a=e.objectAt(r);for(e.swap(r,i),r=i;n<i;){t(e.objectAt(n),a)<=0?n++:e.swap(n,--i)}return e.swap(r,i),i}(t,n,i,r,a),e(t,n,i,a-1),e(t,n,a+1,r)}}(this,e,0,this.get("length")-1),this},reduce:function(e,t,n){var i,r=0,s=this.length;arguments.length>=2?i=t:s>0?(i=this.objectAt(0),r=1):Object(a.b)("reduce of empty array with no initial value");for(var o=r;o<s;o++)i=e.call(n,i,this.objectAt(o),o,this);return i},find:function(e,t){for(var n=this.get("length"),i=0;i<n;i++){var r=this.objectAt(i);if(e.call(t,r,i,this))return r}},findLast:function(e,t){for(var n=this.get("length")-1;n>=0;n--){var i=this.objectAt(n);if(e.call(t,i,n,this))return i}},findIndex:function(e,t){for(var n=this.get("length"),i=0;i<n;i++){var r=this.objectAt(i);if(e.call(t,r,i,this))return i}return-1},binarySearch:function(e){for(var t=this,n=s.a,i=arguments.length,r=Array(i>1?i-1:0),a=1;a<i;a++)r[a-1]=arguments[a];return n.apply(void 0,[0,this.length-1,function(e){return t.objectAt(e)},e].concat(r))},clear:function(){return this.encodedRawSplice(0,this.length),this},map:function(e,t){for(var n=this.constructNewInstance(),i=0,r=this.get("length");i<r;i++){var a=e.call(t,this.objectAt(i),i,this);n.setIndex(i,a)}return n},_internalLength:p.a.define()};function m(e,t){return void 0===t?void 0===e?0:-1:void 0===e?1:(e=String(e))<(t=String(t))?-1:e>t?1:0}function v(e,t){e<0&&(e=t+e);var n=t-1;return e>n?e=n:e<0&&(e=0),e}function _(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.encodedContains(this.encode(e),t)}function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return-1!==this.encodedIndexOf(e,t)}},function(e,t,n){"use strict";var i=n(25),r=n(20),a=n(1185),s=n(1173),o=n(1177),c=n(65),l=n(1172),u=n(174),d=n(34),h=n(1125),p=n(119),f=n(49),g=n(54),m=n(93),v=n(1139),_=n(172),b=n(891),y=n(1182),I=n(1213),w=n(41),S=n(812),C={ok:w.c({readOnly:!0,type:Boolean,get:function(){var e=this.status||0;return 2===parseInt(e/100)}})},O=S.a.extend(C,{staticMembers:{__QUALIFIED_CLASS_NAME__:"AsyncResult"}}),A=n(10),E=(n(948),n(180)),T=n(36),M=n(409),D=n(1141),L=n(200),N=n(9),P=n(266),R=n(7),x=(n(21),M.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"toggleButton"},{type:"ELEMENT",tagname:"span",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"summaryTextWOption",attributes:{}}],classes:["summary-text",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"_shouldHideDropdownSummary",truevalue:"hidden",attributes:{}}]}],classes:["options-container",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"showToggle",truevalue:"",falsevalue:"hidden",attributes:{}}]},{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"label",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"accessLabelString",attributes:{}}]},{type:"VIEWOUTLET",tagname:"view",name:"accessDropdown"}],classes:["row",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"hasAccessDropdown",truevalue:"",falsevalue:"hidden",attributes:{}}]},{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"label",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"allowLabelString",attributes:{}}]},{type:"VIEWOUTLET",tagname:"view",name:"permissionDropdown"}],classes:["row",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"showPermissionsDropdown",truevalue:"",falsevalue:"hidden",attributes:{}}]},{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div"},{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"additionalButton"}]}],classes:["row",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"additionalButtonIsVisible",truevalue:"",falsevalue:"hidden",attributes:{}}]}],classes:["container",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"showDropdownsContainer",truevalue:"",falsevalue:"hidden",attributes:{}}]}],classes:["share-options-dropdown",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"showShareOptionsDropdown",truevalue:"",falsevalue:"hidden",attributes:{}}]},{type:"ELEMENT",tagname:"span",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"summaryTextNoOption",attributes:{}}],classes:["summary-text",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"_shouldHideNonDropdownSummary",truevalue:"hidden",attributes:{}}]}],classes:["access-control-section",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isExpanded",truevalue:"isExpanded",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isHidden",truevalue:"hidden",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"additionalButtonIsVisible",truevalue:"has-additional-button",attributes:{}}]},__QUALIFIED_CLASS_NAME__:"AccessControlView"},toggleButton:d.b({defaultValue:E.b(M.a.extend(D.a,{staticMembers:{template:{type:"ELEMENT",tagname:"span",children:[{type:"ELEMENT",tagname:"svg",children:[{type:"ELEMENT",tagname:"path",namespace:"http://www.w3.org/2000/svg",attributes:{d:"m1.250001,1.062507l14.843682,14.875035l14.843815,-14.875035",fill:"none"}}],classes:["chevron"],namespace:"http://www.w3.org/2000/svg",attributes:{width:"12px",height:"11px",viewBox:"0 0 32 20"}},{type:"ELEMENT",tagname:"span",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"title",attributes:{}}]}],classes:["options-button"]}},title:_.d("CKSharing.AddParticipants.ShareSettingsDisclosureButton.Title"),action:"toggleOptions"}))}),_shouldHideDropdownSummary:d.b({readOnly:!0,dependencies:["isExpanded","shouldHideAddParticipantsSummary"],get:Object.assign(function(){return this.isExpanded||this.shouldHideAddParticipantsSummary},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])||i.internalGet(this,t[1+n])}})}),_shouldHideNonDropdownSummary:d.b({readOnly:!0,dependencies:["hasDropdown","shouldHideAddParticipantsSummary"],get:Object.assign(function(){return this.hasDropdown||this.shouldHideAddParticipantsSummary},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])||i.internalGet(this,t[1+n])}})}),shouldHideAddParticipantsSummary:d.b(!1),transport:d.b(),isToggleEnabled:!0,isExpanded:d.b(!1),isDisabled:d.b(!1),showShareOptionsDropdown:d.b({dependencies:["supportedAccess","supportedPermissions","transport"],readOnly:!0,get:function(){var e=this.supportedPermissions,t=this.supportedAccess,n=this.transport,i=e?e.length:0,r=t?t.length:0,a=i>1||r>1,s=n!==R.a.SCHOOLWORK;return a&&s}}),isHidden:d.b({dependencies:["isLoading"],readOnly:!0,get:Object.assign(function(){return this.isLoading},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])}})}),isLoading:d.b(!1),accessDropdownValue:d.b(),permissionDropdownValue:d.b(),supportedAccess:d.b(),supportedPermissions:d.b(),summaryTextNoOption:d.b(),summaryTextWOption:d.b(),accessLabelString:w.c(_.d("CKSharing.AddParticipants.AccessLabel.Title")),allowLabelString:w.c(_.d("CKSharing.AddParticipants.AllowLabel.Title")),hasAccessDropdown:d.b({readOnly:!0,dependencies:["supportedAccess"],get:Object.assign(function(){var e=this.supportedAccess;return!!e&&e.length>1},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return!!r&&r.length>1}})}),showPermissionsDropdown:d.b(!0),hasDropdown:d.b({readOnly:!0,dependencies:["hasAccessDropdown","showPermissionsDropdown"],get:Object.assign(function(){return this.hasAccessDropdown||this.showPermissionsDropdown},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])||i.internalGet(this,t[1+n])}})}),showToggle:d.b({readOnly:!0,dependencies:["hasAccessDropdown","showPermissionsDropdown"],get:Object.assign(function(){return this.isToggleEnabled&&this.hasAccessDropdown&&this.showPermissionsDropdown},{__CW__getter:function(e,t,n,i){return this.isToggleEnabled&&i.internalGet(this,t[0+n])&&i.internalGet(this,t[1+n])}})}),showDropdownsContainer:d.b({readOnly:!0,dependencies:["showToggle","isExpanded","hasDropdown"],get:Object.assign(function(){return this.showToggle?this.isExpanded&&this.hasDropdown:this.hasDropdown},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?i.internalGet(this,t[1+n])&&i.internalGet(this,t[2+n]):i.internalGet(this,t[2+n])}})}),selectViewsAreVisibleOnScreen:d.b({readOnly:!0,dependencies:["showToggle","isExpanded","isHidden"],get:Object.assign(function(){if(!this.isHidden)return!this.showToggle||this.isExpanded},{__CW__getter:function(e,t,n,i){if(!i.internalGet(this,t[2+n]))return!i.internalGet(this,t[0+n])||i.internalGet(this,t[1+n])}})}),accessDropdown:d.b({defaultValue:E.b(P.a,{action:"setEffectiveAccess",ariaLabel:"Share Access Level",options:[{value:A.a.PRIVATE,label:_.d("CKSharing.AddParticipants.Private")},{value:A.a.PUBLIC,label:_.d("CKSharing.AddParticipants.Public")}]}),downstreamBindings:{value:"(owner).accessDropdownValue",isVisibleOnScreen:"(owner).selectViewsAreVisibleOnScreen",isDisabled:"(owner).isDisabled"}}),permissionDropdown:d.b({defaultValue:E.b(P.a,{action:"setEffectivePermission",ariaLabel:"Share Permission",options:[{value:N.a.READ_WRITE,label:_.d("CKSharing.PermissionsCombo.AllowEditing")},{value:N.a.READ_ONLY,label:_.d("CKSharing.PermissionsCombo.ViewOnly")}]}),downstreamBindings:{value:"(owner).permissionDropdownValue",isVisibleOnScreen:"(owner).selectViewsAreVisibleOnScreen",isDisabled:"(owner).isDisabled"}}),additionalButtonTitle:d.b(),additionalButtonIsVisible:d.b({readOnly:!0,dependencies:["additionalButtonTitle","accessDropdownValue"],get:Object.assign(function(){return!!this.additionalButtonTitle&&this.accessDropdownValue===A.a.PUBLIC},{__CW__getter:function(e,t,n,i){return!!i.internalGet(this,t[0+n])&&i.internalGet(this,t[1+n])===A.a.PUBLIC}})}),additionalButton:d.b({defaultValue:E.b(L.a,{action:"additionalButtonWasPressed",additionalClassNames:y.a(["sharing-additional-button"])}),downstreamBindings:{title:"(owner).additionalButtonTitle"}}),toggleOptions:function(){this.isExpanded=!this.isExpanded}})),F=n(1212),k={},V={"-":!0,_:!0,".":!0," ":!0,"\t":!0},j=/[a-zA-Z0-9]/;function B(e,t){var n=k[e];if(n)return n;if(!e)return"";for(var i=0,r="",a=void 0,s=void 0,o=!0;a=e[i];)t&&a===t||!t&&V[a]?s=!0:j.test(a)&&(s&&(a=a.toUpperCase()),o&&(a=a.toLowerCase()),r+=a,s=!1,o=!1),i++;return k[e+(t||"")]=r,r}var U=n(1189),W=n(793),G=n(120),H=n(177),$=n(1225),z=n(933),K=n(1142),Q=n(80),q=n(885),Y=n(1276),Z=n(1134),J=n(410),X=n(779),ee=n(189),te=n(402),ne=n(1184),ie=n(1194),re=n(780),ae=n(81),se=(n(939),n(414)),oe=M.a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"popoverView"}],classes:["cw-modal"]}},className:"cw-ui-modal-arrow-popover-view",__QUALIFIED_CLASS_NAME__:"ModalArrowPopoverView"},layout:Object(d.b)(),anchorLayout:Object(d.b)(),arrowLength:Object(d.b)(),arrowWidth:Object(d.b)(),arrowAlignment:Object(d.b)(),verticalAlignment:Object(d.b)(),horizontalAlignment:Object(d.b)(),contentView:Object(d.b)(),popoverView:Object(d.b)({defaultValue:Object(E.b)(se.b),type:se.b,downstreamBindings:{layout:"(owner).layout",anchorLayout:"(owner).anchorLayout",arrowLength:"(owner).arrowLength",arrowWidth:"(owner).arrowWidth",contentView:"(owner).contentView",arrowAlignment:"(owner).arrowAlignment",verticalAlignment:"(owner).verticalAlignment",horizontalAlignment:"(owner).horizontalAlignment"}}),pointerDown:function(e){var t=e.targetView.element;this.popoverView.element.contains(t)?this.sendEvent("modalContentWasClicked",this):this.sendEvent("modalBackgroundWasClicked",this)}}),ce=n(185),le={menuDidDismissWithHighlightedItem:function(e,t){},shouldHighlightItem:function(e,t){var n=e.contentController.layoutDelegate.cellForHandle(t);return!n._shouldHighlight||n._shouldHighlight(this)},itemWasSelected:function(e,t){if(t.isValid){var n=t.value,i=n.action;n.isDisabled||i&&(e.sendEvent(i,n)||ce.a(e.target,i,n))}},shouldDismissWithHighlightedItem:function(e,t){return!0},itemIsSubmenu:function(e){return null!=e.value.items},itemIsDivider:function(e){return null==e.value.action}},ue=n(286),de=Q.a.extend(T.a,q.a,{menuDelegate:d.b(),menu:d.b(),selectionControllerShouldSelectItem:function(e,t){var n=this.menu;return this.menuDelegate.shouldHighlightItem(n,t)},staticMembers:{__QUALIFIED_CLASS_NAME__:"MenuSelectionDelegate"}}),he=Y.b.extend({allowedLayouts:E.b([Z.a,Z.c,Z.b,Z.d]),arrowLength:0,arrowWidth:0,spaceInset:20,contentController:d.b({defaultValue:function(){return z.a.create({viewItemMappedClass:this.__CW__listViewItemMappedClass,menuDelegate:this.__CW__delegate})},downstreamBindings:{collection:"(owner).listCollection",isEmptySelectionEnabled:"(owner).listIsEmptySelectionEnabled",viewItemMappedClass:"(owner).listViewItemMappedClass",selectionDelegate:"(owner)._selectionDelegate","layoutMetrics.bottomPadding":"(owner).listLayoutBottomPadding","layoutMetrics.rowHeight":"(owner).listLayoutRowHeight","layoutMetrics.rowSpacing":"(owner).listLayoutRowSpacing","layoutMetrics.topPadding":"(owner).listLayoutTopPadding",shouldMeasure:"(owner).shouldMeasure",menuDelegate:"(owner).delegate"}}),_selectionDelegate:d.b({defaultValue:E.b(de),downstreamBindings:{menu:"(owner)",menuDelegate:"(owner).delegate"}}),shouldMeasure:d.b(!0),delegate:d.b({defaultValue:E.b(Q.a.extend(le))}),desiredSize:d.b(m.c("contentController.desiredSize")),hasOverlay:w.c(!0),listCollection:d.b({strong:!0,defaultValue:E.b(J.b)}),listIsEmptySelectionEnabled:d.b(!0),listLayoutBottomPadding:d.b({readOnly:!0,defaultValue:5}),listLayoutRowHeight:d.b({defaultValue:19}),listLayoutRowSpacing:d.b({defaultValue:0}),listLayoutTopPadding:d.b({readOnly:!0,defaultValue:5}),listViewItemMappedClass:d.b({defaultValue:ue.b}),target:w.c(X.a),_matchedLayoutObserver:T.e("matchedLayout.layout.width","matchedLayout.layout.height",function(e,t){this.contentController.measureViewport()}),hide:function(){var e=arguments;this._submenu&&this._submenu.hide(),this.__s._$2Ea$hide.apply(this,e)},keyDown:function(e){switch(e.which){case ee.a.DOWN:this.highlightNextItem();break;case ee.a.UP:this.highlightPreviousItem();break;case ee.a.LEFT:case ee.a.RIGHT:break;case ee.a.ENTER:this._activateWithItem(this.highlightedItem);break;default:return!1}},_activateWithItem:function(e){var t=this.listCollection,n=t.startHandle.at(-1);e&&(n=t.startHandle.at(t.indexOf(e))),this.delegate.shouldDismissWithHighlightedItem(this,e)&&(this.delegate.menuDidDismissWithHighlightedItem(this,e),this.hide()),this.delegate.itemWasSelected(this,n)},highlightNextItem:function(){var e=this.contentController,t=e.selectionController,n=this.listCollection.startHandle.at(t.selectedIndices.firstIndexAfter(-1)),i=e.selectionController.getSelectableHandleInDirection(n,te.a.DOWN);i&&(e.userPerformedSelectionOperation(i),e.scrollToItem(i.value))},highlightPreviousItem:function(){var e=this.contentController,t=e.selectionController,n=this.listCollection,i=t.selectedIndices.firstIndexAfter(-1),r=n.startHandle.at(-1===i?n.length+1:i),a=e.selectionController.getSelectableHandleInDirection(r,te.a.UP);a&&(e.userPerformedSelectionOperation(a),e.scrollToItem(a.value))},highlightedItem:d.b(m.c("contentController.selectedItem")),_flashViewItem:function(e){this._isDismissing=!0,this.highlightedItem===e&&(ne.a(function(){this._targetViewItem=null}.bind(this)),ne.a(function(){this._targetViewItem=e}.bind(this),100),ne.a(function(){this._targetViewItem=null}.bind(this),200),ne.a(function(){this.hide(),this._isDismissing=!1}.bind(this),400))},submenuDidFocus:function(){clearTimeout(this._targetingSubmenuTimeoutId),this._targetingSubmenuTimeoutId=null},_submenu:d.b(),_submenuRect:d.b({dependencies:["_submenu"],readOnly:!0,get:Object.assign(function(){return this._submenu?this._submenu.matchedLayout.layout:null},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?i.internalGet(this,t[0+n]).matchedLayout.layout:null}})}),_lastPoint:d.b({defaultValue:E.b(Object,{x:0,y:0})}),_currentPoint:d.b({defaultValue:E.b(Object,{x:0,y:0})}),_isSeekingSubmenu:d.b({dependencies:["_lastPoint","_currentPoint","_submenuRect"],readOnly:!0,get:Object.assign(function(){return!!this._submenuRect&&this._isSeriesApproachingRect(this._lastPoint,this._currentPoint,this._submenuRect)},{__CW__getter:function(e,t,n,i){return!!i.internalGet(this,t[2+n])&&this._isSeriesApproachingRect(i.internalGet(this,t[0+n]),i.internalGet(this,t[1+n]),i.internalGet(this,t[2+n]))}})}),_isSeekingSubmenuObs:T.f("_isSeekingSubmenu",function(e){!this._isSeekingSubmenu&&this._targetingSubmenuTimeoutId&&(clearTimeout(this._targetingSubmenuTimeoutId),this._targetingSubmenuTimeoutId=null)}),_isSeriesApproachingRect:function(e,t,n){var i,r;if(i=(n.y-e.y)/(n.x-e.x),r=(n.y-t.y)/(n.x-t.x)<i){var a=n.y+n.height;i=(a-e.y)/(n.x-e.x),r=(a-t.y)/(n.x-t.x)>i}return r},isSubmenuItem:function(e){return e&&!!e.items},isDividerItem:function(e){return null==e.action&&null==e.items},_menuItemForEvent:function(e){var t=ie.c(e),n=this.contentController.presenter.cellForView(t);if(n)return n.handle.value},pointerMove:function(e){if(this._isDismissing)return!1;if(e.clientX!==this._currentPoint.x||e.clientY!==this._currentPoint.y){var t=re.a.begin();t.set(this,"_lastPoint",{x:this._currentPoint.x,y:this._currentPoint.y}),t.set(this,"_currentPoint",{x:e.clientX,y:e.clientY}),t.end()}var n=this._menuItemForEvent(e),i=this.highlightedItem;n!==i&&(this.isSubmenuItem(i)&&(this._targetingSubmenuTimeoutId=ne.a(function(){this.removeSubmenuForItem()}.bind(this),ge),this._hadSubmenu=!0),this.highlightedItem=n)},pointerUp:function(e){if(this._isDismissing)return!1;var t=this.highlightedItem;if(t)return t===this._menuItemForEvent(e)&&(this._activateWithItem(t),!0);this._activateWithItem()},menuWasTapped:function(e){var t=e.view,n=e.state;if(this._isDismissing)return!1;if(n===ae.b.Ended){var i=this.contentController.presenter.cellForView(t);if(i){var r=i.handle.value;this._activateWithItem(r)}}},presentSubmenuForItemWithAnchor:function(e,t){var n=me.create({allowedLayouts:[Z.c,Z.b],listCollection:e.items,parentMenu:this,target:this.target});n.show(t),this._submenu=n},removeSubmenuForItem:function(){this._submenu&&(this._submenu.hide(),this._submenu=null)},viewClass:d.b({readOnly:!0,get:function(){return this.hasOverlay?pe:fe}}),__superMap:{_$2Ea$hide:"hide"},staticMembers:{__QUALIFIED_CLASS_NAME__:"MenuViewController"}}),pe=oe.extend({popoverView:y.a({additionalClassNames:["cw-menu-view"]}),staticMembers:{__QUALIFIED_CLASS_NAME__:"MenuOverlayPopoverView"}}),fe=se.b.extend({additionalClassNames:["cw-menu-view"],staticMembers:{__QUALIFIED_CLASS_NAME__:"MenuPopoverView"}}),ge=1e3,me=he.extend({parentMenu:d.b(),pointerUp:function(e){if(!this._isDismissing){var t=e.targetView,n=t.viewController.item;!t.isDisabled&&n&&n.action?(this._flashItem(n),this.sendEvent.call(this.parentMenu,n.action,n)||this.sendEvent.call(this.parentMenu.target,n.action,n)):this.parentMenu.hide()}},viewClass:fe.extend({pointerEnter:function(e){this.viewController.parentMenu&&this.viewController.parentMenu.submenuDidFocus()}}),staticMembers:{__QUALIFIED_CLASS_NAME__:"SubmenuViewController"}}),ve=n(405),_e=n(934),be=n(165),ye=(n(941),ve.a.extend(_e.a,{viewClass:M.a.extend(be.a,{staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"span",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"primaryLabel",attributes:{}}],classes:["primary"]},{type:"ELEMENT",tagname:"span",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"category",attributes:{}}],classes:["category"]},{type:"ELEMENT",tagname:"span",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"secondaryLabel",attributes:{}}],classes:["secondary"]}],classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isHighlighted",truevalue:"cw-highlighted",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"hasBorder",truevalue:"has-border",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"hasCategory",truevalue:"has-category",falsevalue:"no-category",attributes:{}}]}},additionalClassNames:["autocomplete-menu-item"],isHighlighted:d.b(!1),hasBorder:d.b(!0),hasCategory:d.b({readOnly:!0,dependencies:["category"],get:Object.assign(function(){return o.a(this.category)},{__CW__getter:function(e,t,n,i){return o.a(i.internalGet(this,t[0+n]))}})})}),didEnter:function(e){this.view.bind("primaryLabel",this.item.bindingFor("primaryLabel")),this.view.bind("category",this.item.bindingFor("localizedCategory")),this.view.bind("secondaryLabel",this.item.bindingFor("secondaryLabel"))},didUpdate:function(e){},willExit:function(){this.view.unbind("primaryLabel"),this.view.unbind("category"),this.view.unbind("secondaryLabel")},staticMembers:{__QUALIFIED_CLASS_NAME__:"AutocompleteMenuViewItem"}})),Ie=H.b("AutocompleteMenuLayout",{SINGLE_LINE:"SINGLE_LINE",DOUBLE_LINE:"DOUBLE_LINE"}),we=z.a.extend({viewClass:K.a.extend({mixinDependencies:[$.a]}),staticMembers:{__QUALIFIED_CLASS_NAME__:"AutocompleteMenuListViewController"}}),Se=he.extend({contentController:d.b({defaultValue:E.b(we),downstreamBindings:{desiredWidth:"(owner).width"}}),layout:d.b(Ie.DOUBLE_LINE),isDoubleLineLayout:d.b({readOnly:!0,dependencies:["layout"],get:Object.assign(function(){return this.layout===Ie.DOUBLE_LINE},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])===Ie.DOUBLE_LINE}})}),singleLineLayoutHeight:d.b(35),doubleLineLayoutHeight:d.b(47),listLayoutRowHeight:d.b({readOnly:!0,dependencies:["singleLineLayoutHeight","doubleLineLayoutHeight","isDoubleLineLayout"],get:Object.assign(function(){return this.isDoubleLineLayout?this.doubleLineLayoutHeight:this.singleLineLayoutHeight},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[2+n])?i.internalGet(this,t[1+n]):i.internalGet(this,t[0+n])}})}),listViewItemMappedClass:ye,additionalClassNames:d.b({readOnly:!0,dependencies:["isDoubleLineLayout"],get:Object.assign(function(){return this.isDoubleLineLayout?["cw-autocomplete-menu","double-line"]:["cw-autocomplete-menu","single-line"]},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?["cw-autocomplete-menu","double-line"]:["cw-autocomplete-menu","single-line"]}})}),view:d.b({downstreamBindings:{additionalClassNames:"(owner).additionalClassNames"}}),listLayoutTopPadding:3,listLayoutBottomPadding:3,hasOverlay:!1,isFocusablePane:!1,listLayoutRowSpacing:0,width:d.b(0),shouldMeasure:!1,_listViewItemsDidChange:T.f("listCollection","listCollection.contentsDidChange",function(e){if(e&&e.length>0){var t=this._mostRecentHighlightIndex;(void 0===t||t<=0)&&this.highlightNextItem()}}),_highlightedItemDidChange:T.f("highlightedItem",function(){var e=this.highlightedItem;if(e){var t=this.listCollection;t&&(this._mostRecentHighlightIndex=t.indexOf(e))}}),staticMembers:{__QUALIFIED_CLASS_NAME__:"AutocompleteMenu"}}),Ce=n(1178),Oe=n(192),Ae=n(190),Ee=n(799),Te=n(1231),Me=Te.a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"ELEMENT",tagname:"span",name:"testMeasurer",styles:{position:"absolute",left:"-1000px",top:"-1000px",visibility:"hidden","white-space":"pre"}}],styles:{width:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"width",attributes:{signal:"widthDidRender"},unit:"px",property:"width"}}}},__QUALIFIED_CLASS_NAME__:"ResizingTextField"},width:d.b({readOnly:!0,dependencies:["value","isAttached"],get:Object.assign(function(){var e=this.testMeasurer;e.innerText=this.value;var t=e.offsetWidth;return e.innerText="",t},{__CW__getter:function(e,t,n,i){var r=this.testMeasurer;r.innerText=i.internalGet(this,t[0+n]);var a=r.offsetWidth;return r.innerText="",a}})})}),De=(n(931),M.a.extend(D.a,{staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"span",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"title",attributes:{signal:"titleDidRender"}}],classes:["title"]}],classes:["title-wrapper"]},{type:"VIEWOUTLET",tagname:"view",name:"menuButton"}],classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isSelected",truevalue:"is-selected",attributes:{}}],attributes:{title:{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"tooltip",attributes:{},attribute:"title"}}},className:"cw-ui-views-token-button",__QUALIFIED_CLASS_NAME__:"TokenButton"},title:d.b(),isAccepted:d.b(),tooltip:d.b(),isSelected:d.b(!1),menuButton:d.b(E.b(M.a.extend(D.a,{staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"svg",children:[{type:"ELEMENT",tagname:"path",namespace:"http://www.w3.org/2000/svg",attributes:{d:"M0 0 L3 3 L6 0"}}],classes:["menu-icon"],namespace:"http://www.w3.org/2000/svg",attributes:{viewBox:"0 0 6 4"}}],classes:["menu-icon-hitbox"]}},action:"tokenMenuButtonClicked"})))})),Le=(n(929),M.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"tokenButton"}],classes:["button-container",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isEditing",truevalue:"is-editing",attributes:{signal:"editingDidSwitchOnButton"}}]},{type:"ELEMENT",tagname:"form",children:[{type:"VIEWOUTLET",tagname:"view",name:"tokenTextField"}],classes:["text-container",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isEditing",truevalue:"is-editing",attributes:{signal:"editingDidSwitchOnTextField"}}]},{type:"ELEMENT",tagname:"div",name:"hitDetector",classes:["hit-detector"],styles:{left:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"hitDetectorOffset",attributes:{},unit:"px",property:"left"}}}],classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"contentIsAlwaysLTR",truevalue:"content-is-always-ltr",attributes:{}}]},className:"cw-ui-views-token-item-view",__QUALIFIED_CLASS_NAME__:"TokenItemView"},tokenButton:d.b({defaultValue:E.b(De,{action:"tokenButtonWasPressed",additionalClassNames:["token-item-button"],isFocusable:!0}),downstreamBindings:{title:"(owner).value",isSelected:"(owner).isSelected"}}),tokenTextField:d.b({defaultValue:E.b(Me,{additionalClassNames:["token-item-textfield"]}),downstreamBindings:{value:"(owner).value",menu:"(owner).menu",delegate:"(owner).autocompleteDelegate",dataSource:"(owner).autocompleteDataSource",isDisabled:"(owner)._isTextFieldDisabled"}}),tokenMenuButtonClicked:function(){},autocompleteDelegate:d.b(),autocompleteDataSource:d.b(),didAutocomplete:function(e){if(e){var t=this.isEditing,n=this.value;this.sendEvent("createNewTokenItemBeforeCurrentToken",this,n),this.value="",t&&this.startEditing()}return!1},menu:d.b({strong:!0}),_activeElement:d.b({readOnly:!0,dependencies:["tokenButton","tokenTextField","isEditing","tokenTextField.widthDidRender","tokenButton.titleDidRender"],get:Object.assign(function(){var e;return this.isEditing?(this.tokenTextField.widthDidRender,e=this.tokenTextField.element):(this.tokenButton.titleDidRender,e=this.tokenButton.element),e},{__CW__getter:function(e,t,n,i){var r;return i.internalGet(this,t[2+n])?(i.internalGetPath(this,t[3+n]),r=i.internalGet(this,t[1+n]).element):(i.internalGetPath(this,t[4+n]),r=i.internalGet(this,t[0+n]).element),r}})}),hitDetectorOffset:d.b({readOnly:!0,dependencies:["_activeElement","isAttached"],get:Object.assign(function(){var e=this._activeElement;return e?e.offsetWidth:0},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return r?r.offsetWidth:0}})}),value:d.b(""),isEditing:d.b(!1),isSelected:d.b(!1),contentIsAlwaysLTR:d.b(!1),selectionGroup:null,reEmptyToken:/^\s*$/,startEditing:function(){this.sendEvent("tokenStartedEditing",this),this.select(),this.isEditing=!0;var e=this.tokenTextField;e._selection={start:0,end:e.value.length}},stopEditing:function(){this.sendEvent("tokenStoppedEditing",this),this.isEditing=!1,this.focusedChild=null},select:function(e){e||this.sendEvent("clearSelection"),this.isSelected=!0,this.sendEvent("tokenSelected",this)},deselect:function(){this.isSelected=!1,this.sendEvent("tokenDeselected",this),this.blur()},_doubleClickCount:0,_resetDoubleClickCount:function(){this._doubleClickCount=0,this._doubleClickTimer.stop()},tokenButtonWasPressed:function(e){if(this._doubleClickCount++,this._doubleClickCount>1)this.startEditing(),this._resetDoubleClickCount();else{this._doubleClickTimer.start();var t=Ae.a.sharedInstance.activeKeys;if(t.contains(ee.a.SHIFT))this.sendEvent("tokenButtonWasPressedWithShift",this);else{var n,i=Oe.a.sharedInstance;i.isMac&&(n=ee.a.CMD),i.isWindows&&(n=ee.a.CTRL),this.isSelected?t.contains(n)&&this.deselect():this.select(t.contains(n))}}},_doubleClickTimer:E.b(Ee.a,{delay:400,action:"_resetDoubleClickCount"}),keyDown:function(e){var t=!1,n=e.which;if(this.isEditing){var i=this.tokenTextField.selection,r=i.start,a=i.end;n===ee.a.ENTER?(this.stopEditing(),this.reEmptyToken.test(this.value)||this.sendEvent("createNewEditingTokenAfterCurrentToken",this),t=!0,e.preventDefault()):n===ee.a.BACKSPACE?(0===r&&0===a&&(e.preventDefault(),this.sendEvent("selectOrDeletePreviousToken",this)),t=!0):n===ee.a.DELETE?t=!0:n===ee.a.LEFT?0!==r&&(t=!0):n===ee.a.RIGHT&&a!==this.value.length&&(t=!0)}else n!==ee.a.BACKSPACE&&n!==ee.a.DELETE||(this.sendEvent("deleteSelectedTokens"),t=!0);return t},pointerDown:function(e){e.target===this.hitDetector&&(this.sendEvent("createNewEditingTokenAfterCurrentToken",this),e.preventDefault())},_previousIsEditing:!1,_editingObserver:T.f("isEditing","editingDidSwitchOnButton","editingDidSwitchOnTextField",function(e){var t=this._previousIsEditing;if(this._previousIsEditing=e,e){var n=this._shouldStopEditingWhenFocusIsLost;this._shouldStopEditingWhenFocusIsLost=!1,this.tokenTextField.focus(),this._shouldStopEditingWhenFocusIsLost=n}else t&&this.reEmptyToken.test(this.value)&&this.sendEvent("deleteCurrentToken",this)}),_shouldStopEditingWhenFocusIsLost:!0,_textFieldFocusObserver:T.f("tokenTextField.isFocused",function(e){if(!e){var t=this.menu&&this.menu.highlightedItem,n=this.tokenTextField,i=n&&n.textField;t&&i?i.autocompleteItemWasSelected(t):this._shouldStopEditingWhenFocusIsLost&&this.stopEditing()}}),_shouldParse:d.b(!0),pauseParsing:function(){this._shouldParse=!1},resumeParsing:function(){this._shouldParse=!0},_valueParsingObserver:T.f("value",function(e){if(e&&this._shouldParse){var t=this.parseValueForTokens(e),n=t.length,i=this.isEditing;if(n>1){var r=this._shouldStopEditingWhenFocusIsLost;this._shouldStopEditingWhenFocusIsLost=!1;for(var a=0;a<n-1;a++)this.sendEvent("createNewTokenItemBeforeCurrentToken",this,t[a]);this.value=t[n-1],i&&this.startEditing(),this._shouldStopEditingWhenFocusIsLost=r}}}),_valueChangedObserver:T.f("value",function(){this.sendEvent("tokenValueChanged")}),parseValueForTokens:function(e){return[]},_isTextFieldDisabled:d.b({readOnly:!0,dependencies:["isEditing"],get:Object.assign(function(){return!this.isEditing},{__CW__getter:function(e,t,n,i){return!i.internalGet(this,t[0+n])}})})})),Ne=M.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"labelField"},{type:"ELEMENT",tagname:"div",children:[{type:"MULTIVIEWOUTLET",tagname:"views",name:"tokenViews"},{type:"ELEMENT",tagname:"span",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"placeholder",attributes:{}}],name:"placeholderNode",classes:["cw-placeholder",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"_isPlaceholderShowing",truevalue:"show",attributes:{}}]}],name:"inputContainer",classes:["container"]},{type:"ELEMENT",tagname:"textarea",name:"clipboardArea",classes:["hidden-text","cw-input"]}],classes:["cw-tokenizedtextfield-view",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isFocused",truevalue:"cw-focused",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isDisabled",truevalue:"cw-disabled",attributes:{}}]},__QUALIFIED_CLASS_NAME__:"BaseTokenizedTextField"},value:d.b({readOnly:!0,dependencies:["tokenViews","tokenViews.contentsDidChange","_tokenValueChangedSignal"],writeDependencies:[],get:function(){return this.hydrateValues()}}),setValue:function(e){this.tokenViews.clear(),this._createNewTokenItemAtIndex(0,e)},hydrateValues:function(e){for(var t="",n=this.tokenViews,i=n.length,r=!1,a=0;a<i;a++){var s=n.objectAt(a);e&&!e(s)||(r&&(t+=", "),t+=s.value,r=!0)}return t},tokenItemViewClass:Le,createHashForTokenItemView:function(){return{parseValueForTokens:this.parseValueForTokens}},lastEditedToken:d.b(),placeholder:void 0,action:"submit",maxLength:null,isDisabled:d.b(!1),isEditable:d.b(!0),isFocusable:d.b({readOnly:!0,dependencies:["isDisabled"],get:Object.assign(function(){return!this.isDisabled},{__CW__getter:function(e,t,n,i){return!i.internalGet(this,t[0+n])}})}),defaultFocusElement:d.b({dependencies:["element"],writeDependencies:[],readOnly:!1,binding:null,get:Object.assign(function(e){return e||this.element},{__CW__getter:function(e,t,n,i){return e||i.internalGet(this,t[0+n])}}),set:Ce.a}),selection:d.b({readOnly:!0,dependencies:["_selectionDidChange"],get:function(){return this.hydrateValues(function(e){return e.isSelected})}}),select:function(){var e=this.tokenViews,t=this.lastEditedToken;t&&t.isEditing&&t.stopEditing(),0!==e.length&&this.selectTokenRangeInclusive(e.objectAt(0),e.lastItem)},clearSelection:function(){var e=this.tokenViews,t=this.lastEditedToken;t&&t.isEditing&&t.stopEditing();var n=e.length;if(0!==n){this._shouldProcessSelectionEvents=!1;for(var i=0;i<n-1;i++){var r=e.objectAt(i);r.isSelected&&r.deselect()}this._shouldProcessSelectionEvents=!0,e.lastItem.deselect()}},parseValueForTokens:function(e){return e.split(/\s*,\s*/)},tokenViews:d.b(E.b(J.b)),_isPlaceholderShowing:d.b({dependencies:["value"],readOnly:!0,get:Object.assign(function(){return!this.value},{__CW__getter:function(e,t,n,i){return!i.internalGet(this,t[0+n])}})}),_focusObserver:T.f("isFocused","descendantHasFocus",function(e,t){e||t||this.clearSelection()}),didFocus:function(){var e,t=this.tokenViews,n=this.lastEditedToken,i=n&&n.isEditing,r=this._activeSelectionGroupStack.length>0;i||r||!t||(e=_.a.sharedInstance.isRTL?0:t.length,this._createNewEditingTokenAtIndex(e))},_setSelectedTokensToHiddenTextArea:function(){var e=this.selection;if(e&&e.length>0){var t=this.clipboardArea;this.defaultFocusElement=t,t.value=e,t.select(),this.defaultFocusElement=null}},_shouldProcessSelectionEvents:!0,_activeSelectionGroupStack:E.b(W.a),tokenSelected:function(e){this._updateSelectedGroupForSelectedtoken(e),this._shouldProcessSelectionEvents&&(this._selectionDidChange(),this._setSelectedTokensToHiddenTextArea())},_updateSelectedGroupForSelectedtoken:function(e){var t,n=this.tokenViews,i=n.length,r=n.indexOf(e),a=r>0?n.objectAt(r-1):null,s=r<i-1?n.objectAt(r+1):null,o=a&&a.selectionGroup,c=s&&s.selectionGroup;a&&s&&o&&c?(xe(e.selectionGroup),e.selectionGroup=o,1===(t=o.direction)?o.endPoint=1===s.direction?c.endPoint:c.anchor:(o.anchor=1===s.direction?c.endPoint:c.anchor,o.direction=-1)):a&&o?(xe(e.selectionGroup),e.selectionGroup=o,1===(t=o.direction)||0===t?(o.endPoint=e,o.direction=1):o.anchor=e):s&&c?(xe(e.selectionGroup),e.selectionGroup=c,1===(t=c.direction)?c.anchor=e:(c.endPoint=e,c.direction=-1)):e.selectionGroup||(e.selectionGroup=Re(e,e,0));var l=this._activeSelectionGroupStack;l.remove(e.selectionGroup),l.push(e.selectionGroup)},tokenDeselected:function(e){this._updateSelectedGroupForDeselectedtoken(e),this._shouldProcessSelectionEvents&&(this._selectionDidChange(),this._setSelectedTokensToHiddenTextArea())},_updateSelectedGroupForDeselectedtoken:function(e){if(e.selectionGroup){var t=this.tokenViews,n=t.length,i=t.indexOf(e),r=i>0?t.objectAt(i-1):null,a=i<n-1?t.objectAt(i+1):null,s=e.selectionGroup.direction,o=r&&r.selectionGroup,c=a&&a.selectionGroup;if(r&&a&&o&&c)if(1===s){var l=e.selectionGroup.endPoint;o.endPoint=r,c=Re(a,l,1)}else{var u=e.selectionGroup.anchor;o.anchor=r,c=Re(u,a,-1)}else r&&o?1===s?o.endPoint=r:o.anchor=r:a&&c?1===s?c.anchor=a:c.endPoint=a:(this._activeSelectionGroupStack.remove(e.selectionGroup),xe(e.selectionGroup));this._setSelectionGroupDirectionToNeutralIfNeededForToken(r),this._setSelectionGroupDirectionToNeutralIfNeededForToken(a),e.selectionGroup=null}},_setSelectionGroupDirectionToNeutralIfNeededForToken:function(e){if(e){var t=e.selectionGroup;t&&t.anchor===e&&t.endPoint===e&&(t.direction=0)}},tokenButtonWasPressedWithShift:function(e){var t,n,i=this.tokenViews,r=this._activeSelectionGroupStack;if(r.length<1)n=t=i.objectAt(0);else{var a=r.lastItem;t=a.anchor,n=a.endPoint,0!==a.direction&&this.deselectTokenRangeInclusive(t,n)}this.selectTokenRangeInclusive(t,e)},deselectTokenRangeInclusive:function(e,t){this._selectionRangeHelper(e,t,function(e){e.deselect()}),this._selectionDidChange(),this._setSelectedTokensToHiddenTextArea()},selectTokenRangeInclusive:function(e,t){this._selectionRangeHelper(e,t,function(e){e.select(!0)}),this._selectionDidChange(),this._setSelectedTokensToHiddenTextArea()},_selectionRangeHelper:function(e,t,n){var i,r=this.tokenViews,a=r.indexOf(e),s=r.indexOf(t),o=a<s?1:-1,c=1===o?a:s,l=1===o?s:a,u=this._shouldProcessSelectionEvents;if(this._shouldProcessSelectionEvents=!1,1===o)for(i=c;i<=l;i++)n(r.objectAt(i));else for(i=l;i>=c;i--)n(r.objectAt(i));this._shouldProcessSelectionEvents=u},pointerDown:function(e){var t=this.inputContainer.children[0],n=this.inputContainer;if(e.target===t||e.target===n){for(var i,r=e.clientY,a=e.clientX,s=this.tokenViews,o=0,c=s.length;o<c;o++){var l=s.objectAt(o).rect;if(!(r>l.bottom)){if(r<l.top)break;if(a<l.left){i=_.a.sharedInstance.isRTL?o+1:o;break}a>l.right&&(i=_.a.sharedInstance.isRTL?o:o+1)}}!isFinite(i)&&c||(this._createNewEditingTokenAtIndex(i||0),e.preventDefault())}},keyDown:function(e){var t=e.which;if(function(e){var t=Oe.a.sharedInstance;return t.isMac?e.metaKey:!!t.isWindows&&e.ctrlKey}(e)){if(88===t)return this.deleteSelectedTokens(),!0;65===t&&this.select()}else{if(t===ee.a.LEFT||t===ee.a.RIGHT){var n=this._activeSelectionGroupStack.lastItem;if(n){var i,r=this.tokenViews,a=r.length,s=n.endPoint,o=n.direction;if(i=_.a.sharedInstance.isRTL?t===ee.a.RIGHT?-1:1:t===ee.a.RIGHT?1:-1,e.shiftKey){if((l=r.indexOf(s)+i)<0||l>=a)return!0;o===i||0===o?r.objectAt(l).select(!0):s.deselect()}else{var c;c=i===o?n.endPoint:n.anchor;var l=r.indexOf(c)+i;if((-1===i&&!s.isEditing||1===i&&s.isEditing)&&l++,l<0||l>a)return!0;this._createNewEditingTokenAtIndex(l)}}return!0}if(t===ee.a.BACKSPACE||t===ee.a.DELETE)return this.deleteSelectedTokensAndEdit(),!0;if(t===ee.a.ENTER){e.preventDefault();var u=this.findActiveToken();return u&&u.startEditing(),!0}}return!1},findActiveToken:function(){var e=this._activeSelectionGroupStack,t=e&&e.lastItem;return t&&t.endPoint},findRelativeToken:function(e,t){var n=this.tokenViews,i=n.indexOf(e);if(!(i<0))return n.objectAt(i+(t||0))},selectOrDeletePreviousToken:function(e){var t=this.findRelativeToken(e,-1);t&&(t.isSelected?this.deleteCurrentToken(t):t.select())},findTokenToEditAfterFollowingDeletion:function(){var e=this._activeSelectionGroupStack,t=e&&e.lastItem;if(t){var n=t.direction>0?t.anchor:t.endPoint;return this.findRelativeToken(n,-1)}},deleteSelectedTokensAndEdit:function(){var e=this.findTokenToEditAfterFollowingDeletion();this.deleteSelectedTokens(),e?this.createNewEditingTokenAfterCurrentToken(e):this._createNewEditingTokenAtIndex(0)},tokenStartedEditing:function(e){this.lastEditedToken=e},tokenStoppedEditing:function(e){},deletePreviousToken:function(e){var t=this.tokenViews.indexOf(e);--t>=0&&(this._deleteTokenAtIndex(t),e.startEditing())},deleteCurrentToken:function(e){var t=this.tokenViews.indexOf(e);this._deleteTokenAtIndex(t)},deleteSelectedTokens:function(){var e=this.tokenViews,t=e.length,n=this._shouldProcessSelectionEvents;this._shouldProcessSelectionEvents=!1;for(var i=t-1;i>=0;i--)e.objectAt(i).isSelected&&this._deleteTokenAtIndex(i);this._shouldProcessSelectionEvents=n},_deleteTokenAtIndex:function(e){var t=this.tokenViews,n=t.length;if(!(e<0||e>n)){var i=t.objectAt(e);i.isEditing&&i.stopEditing(),i.isSelected&&i.deselect(),t.splice(e,1)}},createNewTokenItemBeforeCurrentToken:function(e,t){var n=this.tokenViews.indexOf(e);return this._createNewTokenItemAtIndex(n,t)},_createNewTokenItemAtIndex:function(e,t){if(t){var n=this._createNewTokenItem();return this.tokenViews.insertAt(e,n),n.startEditing(),n.value=t,n.stopEditing(),n}},createNewEditingTokenAfterCurrentToken:function(e){if(!this._isCreatingToken){var t=this.tokenViews.indexOf(e);return t++,this._createNewEditingTokenAtIndex(t)}},_createNewEditingTokenAtIndex:function(e){this._isCreatingToken=!0;var t=this._createNewTokenItem();return this.tokenViews.insertAt(e,t),t.startEditing(),this._isCreatingToken=!1,t},_createNewTokenItem:function(){var e=this.tokenItemViewClass,t=this.createHashForTokenItemView();return e.create(t)},tokenValueChanged:function(){this._tokenValueChangedSignal()},_tokenValueChangedSignal:T.g(),_selectionDidChange:T.g()}),Pe=[];function Re(e,t,n){var i=Pe.pop();return i||(i={}),i.anchor=e,i.endPoint=t,i.direction=n,i}function xe(e){e&&(e.anchor=null,e.endPoint=null,e.direction=-2,Pe.push(e))}var Fe,ke=H.b("LoadingStatus",{Initial:"Initial",Loading:"Loading",Completed:"Completed",Failed:"Failed"}),Ve=(n(927),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}),je=Ne.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"_dataSourceFailed",truevalue:"show-error-indicator",attributes:{}}],attributes:{title:{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"errorTitle",attributes:{},attribute:"title"}}}},__QUALIFIED_CLASS_NAME__:"TokenizedTextField"},errorTitle:d.b({readOnly:!0,dependencies:["_dataSourceFailed"],get:Object.assign(function(){return this._dataSourceFailed?_.d("ContactsAutocomplete.Error.Generic"):""},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?_.d("ContactsAutocomplete.Error.Generic"):""}})}),autocompleteDelegate:d.b(),autocompleteDataSource:d.b(),_dataSourceFailed:d.b({readOnly:!0,dependencies:["autocompleteDataSource.loadingStatus"],get:Object.assign(function(){return this.getPath("autocompleteDataSource.loadingStatus")===ke.Failed},{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])===ke.Failed}})}),menu:d.b({defaultValue:function(){return Se.create({target:this,anchor:this})},strong:!0,downstreamBindings:{listCollection:"(owner).lastEditedToken.tokenTextField._items"}}),width:d.b({readOnly:!0,dependencies:["value"],get:function(){return this.getPath("element.offsetWidth")}}),createHashForTokenItemView:function(){var e=arguments,t=this.__s._$o6$createHashForTokenItemView.apply(this,e);return Ve({},t,{menu:this.bindingFor("menu"),autocompleteDelegate:this.bindingFor("autocompleteDelegate"),autocompleteDataSource:this.bindingFor("autocompleteDataSource")})},__superMap:{_$o6$createHashForTokenItemView:"createHashForTokenItemView"}}),Be=Q.a.extend({batchLoad:null,valueToKey:function(e){return e},load:function(e){var t=this,n=this._valueCache.get(e);if(n)return a.a.resolve(n);var i=this._promiseCache.get(e);if(i)return i;var r=new Promise(function(n,i){var r,s=t._queue;s.push({key:e,resolve:n,reject:i}),1===s.length&&(r=function(){return function(e){var t=e._queue;e._queue=[];var n={};t.forEach(function(e){n[e.key]=e});var i=t.map(function(e){return e.key});e.batchLoad(i).then(function(i){E.b(i,Error)?t.forEach(function(t){var n=t.key,r=t.resolve;e.clear(n),r(i)}):i.forEach(function(t){var i=e.valueToKey(t),r=n[i],a=r.resolve;r.reject,a(t)})})}(t)},Fe||(Fe=a.a.resolve()),Fe.then(function(){return ne.a(r,0)}))}).then(function(n){return t._promiseCache.clear(e),t._valueCache.set(e,n),n}),s=a.a.wrapPromise(r);return this._promiseCache.set(e,s),s},loadMany:function(e){var t=this;return a.a.all(e.map(function(e){return t.load(e)}))},clear:function(e){this._valueCache.delete(e),this._promiseCache.delete(e)},_promiseCache:E.b(Map),_valueCache:E.b(Map),_queue:[],staticMembers:{__QUALIFIED_CLASS_NAME__:"BatchLoader"}}),Ue=n(164),We=n(91),Ge=n(1220).a.extend(T.a,{action:function(e,t){var n=e.lookupInfoList;return n.length>0?this.createRequest({lookupInfos:n}).send().then(function(e){var t=e.body,n=t.results;if(o.a(t)&&o.a(n))return n},function(e){if(E.b(e,S.a)){var t=new Error;return t.originalError=e,t}throw e}):a.a.resolve([])},createRequest:function(e){var t=Ue.a.create({serviceName:"cksharews",pathname:"/ws/v1/autocomplete/membershipInfo",queryObject:{dsid:i.a.currentUser.dsid}});return We.a.create({method:"POST",url:t,body:e,useCredentialsIfCrossOrigin:!0,timeout:6e4,serviceName:"cksharews"})},staticMembers:{__QUALIFIED_CLASS_NAME__:"LoadMembershipInfoHandler"}}),He=Be.extend(T.a,{batchLoad:function(e){return this.loadMembershipInfoHandler.action({lookupInfoList:e.map(function(e){return function(e){return e.startsWith("phoneNumber:")?{type:"phoneNumber",value:e.slice("phoneNumber:".length)}:e.startsWith("email:")?{type:"email",value:e.slice("email:".length)}:null}(e)})})},loadMembershipInfoHandler:w.c(E.b(Ge)),valueToKey:function(e){var t=e.value;return e.type+":"+t},staticMembers:{__QUALIFIED_CLASS_NAME__:"MembershipInfoLoader"}}),$e=n(1126),ze=H.b("MatchType",{EMAIL:"EMAIL",PHONE:"PHONE",GROUP:"GROUP"}),Ke=Q.a.extend(T.a,{contact:d.b({readOnly:!0,dependencies:["store","contactPrimaryKey"],get:Object.assign(function(){return this.store?this.store.getModel($e.a,this.contactPrimaryKey):null},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?i.internalGet(this,t[0+n]).getModel($e.a,i.internalGet(this,t[1+n])):null}})}),matchType:d.b(),matchValue:d.b(),contactPrimaryKey:d.b(),store:d.b(),staticMembers:{__QUALIFIED_CLASS_NAME__:"ContactMatch"}}),Qe=ye.extend({viewClass:y.a({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isInNetwork",truevalue:"is-in-network",attributes:{}}]}}},isInNetwork:d.b(!1)}),didEnter:function(e){var t=arguments;this.__s._$8s$didEnter.apply(this,t);var n=this.view;n.isInNetwork=void 0;var i=this.item.contactMatch,r=i.matchValue,a=i.matchType,o=void 0;if(a===ze.PHONE)o="phoneNumber:"+r;else{if(a!==ze.EMAIL)return;o="email:"+r}var c=this;e.membershipInfoLoader.load(o).then(function(e){if(!s.a(e,Error)){var t=e.isInNetwork,i=e.value;c.getPath("item.contactMatch.matchValue")===i&&(n.isInNetwork=t)}})},didExit:function(e){var t=arguments;this.__s._$aY$didExit.apply(this,t),this.view.isInNetwork=!1},__superMap:{_$8s$didEnter:"didEnter",_$aY$didExit:"didExit"},staticMembers:{__QUALIFIED_CLASS_NAME__:"AutocompleteMenuViewItem"}}),qe=Se.extend({listViewItemMappedClass:Qe,contentController:d.b({defaultValue:E.b(we.extend({membershipInfoLoader:d.b(E.b(He))}))}),staticMembers:{__QUALIFIED_CLASS_NAME__:"AutocompleteMenu"}});_.b(_.c(),{"ContactsAutocomplete.Error.Internal":"Internal error","ContactsAutocomplete.Error.Generic":"Couldn’t load contacts because of a server error.","ContactsAutocomplete.Error.NotFound":"Couldn’t load contacts because the server could not be found.","ContactsAutocomplete.SearchingProgress":"Searching for “%{searchString}”…","ContactsAutocomplete.GroupSecondaryLabel.Multiple":"%{numberOfContacts} contacts","ContactsAutocomplete.GroupSecondaryLabel.Single":"1 contact","ContactsAutocomplete.GroupMembers":"%{emailAddresses} & %{lastEmailAddress}","ContactsAutocomplete.Recents.Delete.Title":"Remove From Recents","ContactsAutocomplete.Recents.Delete.Recipient.Text":"Are you sure you want to remove this recent recipient?","ContactsAutocomplete.Recents.Delete.Group.Text":"Are you sure you want to remove this recent group?","ContactsAutocomplete.Category.WORK":"work","ContactsAutocomplete.Category.HOME":"home","ContactsAutocomplete.Category.MOBILE":"mobile","ContactsAutocomplete.Category.MAIN":"main","ContactsAutocomplete.Category.HOMEFAX":"home fax","ContactsAutocomplete.Category.WORKFAX":"work fax","ContactsAutocomplete.Category.PAGER":"pager","ContactsAutocomplete.Category.OTHER":"other","ContactsAutocomplete.Category.CUSTOM":"custom","ContactsAutocomplete.Category.RECENTS":"recents","ContactsAutocomplete.PreviewTemplate.MatchPersonByFirstName":"%{firstAndLastNameInProperOrder} — %{contactValue}","ContactsAutocomplete.PreviewTemplate.MatchPersonByMiddleName":"%{middleName} (%{firstAndLastNameInProperOrder}) — %{contactValue}","ContactsAutocomplete.PreviewTemplate.MatchPersonByLastName":"%{lastAndFirstNameInProperOrder} — %{contactValue}","ContactsAutocomplete.PreviewTemplate.MatchPersonByNickName":"%{nickName} (%{firstAndLastNameInProperOrder}) — %{contactValue}","ContactsAutocomplete.PreviewTemplate.MatchPersonByCompanyName":"%{companyName} (%{firstAndLastNameInProperOrder}) — %{contactValue}","ContactsAutocomplete.PreviewTemplate.MatchPersonByContact":"%{contactValue} (%{firstAndLastNameInProperOrder})","ContactsAutocomplete.PreviewTemplate.MatchPersonByNickAndLastName":"%{nickName} %{lastName} — %{contactValue}","ContactsAutocomplete.PreviewTemplate.MatchCompanyByFirstName":"%{firstAndLastNameInProperOrder} (%{company}) — %{contactValue}","ContactsAutocomplete.PreviewTemplate.MatchCompanyByMiddleName":"%{middleName} (%{firstAndLastNameInProperOrder}) (%{companyName}) — %{contactValue}","ContactsAutocomplete.PreviewTemplate.MatchCompanyByLastName":"%{lastAndFirstNameInProperOrder} (%{companyName}) — %{contactValue}","ContactsAutocomplete.PreviewTemplate.MatchCompanyByNickName":"%{nickName} (%{firstAndLastNameInProperOrder}) (%{companyName}) — %{contactValue}","ContactsAutocomplete.PreviewTemplate.MatchCompanyByCompanyName":"%{companyName} (%{firstAndLastNameInProperOrder}) — %{contactValue}","ContactsAutocomplete.PreviewTemplate.MatchCompanyByContact":"%{contactValue} %{companyName} (%{firstAndLastNameInProperOrder})","ContactsAutocomplete.PreviewTemplate.MatchRecentByName":"%{matchedName} — %{emailAddress}","ContactsAutocomplete.PreviewTemplate.MatchRecentByEmailAddress":"%{matchedEmail} (%{name})"});var Ye=n(32),Ze=n(126),Je={mixinDependencies:[f.a],load:g.a.define(),cancel:g.a.define(),loadingStatus:Ze.a.define()},Xe={mixinDependencies:[f.a,Je],autocompleteItemsForText:Ye.c(g.a)},et=n(1203),tt=n(86),nt=n(784),it=n(943),rt=n(78),at=n(173),st=n(1183),ot=n(775),ct=n(916),lt=n(915),ut=H.b("SortOrder",{FIRST_LAST:"first,last",LAST_FIRST:"last,first"}),dt=Q.a.extend(T.a,{action:"autocompleteItemWasSelected",value:d.b(null),primaryLabel:d.b(null),category:d.b(null),localizedCategory:d.b({readOnly:!0,dependencies:["category"],get:Object.assign(function(){var e=this.category;if(!e)return null;var t="ContactsAutocomplete.Category."+e,n=_.d(t);return n===t?e:n},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);if(!r)return null;var a="ContactsAutocomplete.Category."+r,s=_.d(a);return s===a?r:s}})}),secondaryLabel:d.b(null),previewValue:d.b(null),matchChunks:null,isContactsGroup:!1,isRecentsGroup:!1,recentsGuid:null,isEnabled:!0,disableMenuFlash:!0,staticMembers:{__QUALIFIED_CLASS_NAME__:"AutocompleteItem"}}).extend({contactMatch:d.b(),staticMembers:{__QUALIFIED_CLASS_NAME__:"AutocompleteItem"}}),ht=["firstName","phoneticFirstName","middleName","lastName","phoneticLastName","nickName","companyName","emailAddresses"],pt=["name"],ft=["address","name","names"],gt=H.b("RequestType",{CONTACTS:5,LOOKUP:6,RECENT_RECIPIENTS:8,DELETE_RECENTS:9}),mt=n(1238);var vt="ContactsAutocomplete.PreviewTemplate.",_t=function e(t){for(var n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return function(){return i.length?e.apply(void 0,i)(t.apply(void 0,arguments)):t.apply(void 0,arguments)}};function bt(e,t){return function(n){return n.replace(e,t)}}var yt=_t(bt("“”",""),bt(/\(\s*\)/g,""),bt(/\s+/g," ")),It=_t(yt,bt(/"/g,'\\"'),bt(/([^,<>]*[,<>].*)( <[^<]*)$/,'"$1"$2')),wt=Q.a.extend(T.a,Xe,{isRecentsEnabled:d.b({readOnly:!0,dependencies:i.a.bindingFor("authBag.servicesInfo"),get:function(){return!!i.a.getPath("authBag.servicesInfo.mail")}}),load:function(){this.contactsDataIsLoaded||(this._failedNetworkRequestCount=0,this.sendContactsRequest(),this.isRecentsEnabled&&this.sendRecentRecipientsRequest({method:"list",type:gt.RECENT_RECIPIENTS}))},cancel:function(){},loadingStatus:d.b({readOnly:!0,dependencies:["_loadingStatus"],get:Object.assign(function(){return this._loadingStatus},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])}})}),autocompleteItemsForText:function(e){return et.a.create(this.findCompletionsInLoadedData(e))},sendContactsRequest:function(e){this.set("contactsRequestIsOutstanding",!0),this.set("contactsRequestHasCompleted",!1),this.set("contactsDataIsLoaded",!1),null!==this._lastSyncToken&&null!==this._lastPrefToken?this.set("syncTokenInUse",!0):this.set("syncTokenInUse",!1);var t={onComplete:"contactsRequestCompleted",onSuccess:"contactsRequestSucceeded",type:gt.CONTACTS};if(this.get("syncTokenInUse")&&!0===e){var n=this.get("syncInterval");if(this._skipSyncCount<n)return this.set("contactsRequestIsOutstanding",!1),this.set("contactsRequestHasCompleted",!0),this.set("contactsDataIsLoaded",!0),void this._skipSyncCount++}var i=_.c();this.createContactsRequest(this._lastSyncToken,this._lastPrefToken,this._sortOrder,i,this.isPhoneNumberSupportEnabled).send().then(function(e){this.requestDidComplete(e,t)}.bind(this)).catch(function(e){this.requestDidComplete(e,t)}.bind(this)),this._skipSyncCount=0},contactsRequestIsOutstanding:d.b(!1),contactsRequestHasCompleted:w.c(!1),contactsDataIsLoaded:d.b(!1),sendRecentRecipientsRequest:function(e){this.set("recentsRequestIsOutstanding",!0),this.set("recentsRequestHasCompleted",!1),this.set("recentsDataIsLoaded",!1);var t={onComplete:"recentRecipientsRequestCompleted",onSuccess:"recentRecipientsRequestSucceeded",type:e.type},n=new Date;this._recentsReqCount||(this._recentsReqCount=1);var i=n.getTime()+"/"+this._recentsReqCount++,r=e.method,a=e.recentsGuids;this.createRecentRecipientsRequest(i,r,a).send().then(function(e){this.requestDidComplete(e,t)}.bind(this)).catch(function(e){this.requestDidComplete(e,t)}.bind(this))},recentsRequestIsOutstanding:w.c(!1),recentsRequestHasCompleted:w.c(!1),recentsDataIsLoaded:w.c(!1),allDataIsLoadedForQuery:w.c(!1),createContactsRequest:function(e,t,n,i,r){var a=i.replace(/(.*)-(.*)$/,function(e,t,n){return t+"_"+n.toUpperCase()}),s=Ue.a.create({pathname:"/co/addressbook/",serviceName:"contacts",queryObject:{locale:a,order:n.value,includePhoneNumbers:r}});return null!==e&&null!==t&&s.setMultipleQueryParameters({syncToken:e,prefToken:t}),We.a.create({url:s,serviceName:"contacts",useCredentialsIfCrossOrigin:!0})},createRecentRecipientsRequest:function(e,t,n){var i=Ue.a.create({pathname:"/wm/recents",serviceName:"mail"}),r={jsonrpc:"2.0",id:e,method:t};n&&(r.params={guids:[n]});var a=this,s=We.a.create({url:i,method:tt.a.POST,body:r,timeout:this.INTERVAL_XHR_TIMEOUT_FOR_RECENTS_REQUEST,useCredentialsIfCrossOrigin:!0,shouldFinalizeWithResponse:function(e,t,n){var i=a._redirectCountForTimeout,r=n-i,s=2===Math.floor(e.status/100)&&a.REDIRECT_RESPONSE_TEXT===e.encodedBody,o=e.status===tt.b.TIMEDOUT,c=s&&r<a.MAX_REDIRECT,l=o&&i<a.MAX_REDIRECT_FOR_TIMEOUT;if(c||l){l&&a._redirectCountForTimeout++;var u="\n                        Rejecting server response for mailws recents,\n                            Status: "+status+"\n                            ResponseText: "+e.encodedBody+"\n                            Redirect Count: "+r+"\n                            Timeout Redirect Count: "+i+"\n                    ";return nt.b.warn(u),t(),!1}if(s||o){var d="\n                            Giving up on retries for mailws recents,\n                                Status: "+status+"\n                                ResponseText: "+e.encodedBody+"\n                                Redirect Count: "+r+"\n                                Timeout Redirect Count: "+i+"\n                        ";nt.b.warn(d)}return a._redirectCountForTimeout=0,!0}});return s.setHeader("Content-Type","text/plain"),s},clearLoadedData:function(){this.set("recentsRequestIsOutstanding",!1),this.set("recentsRequestHasCompleted",!1),this.set("contactsRequestIsOutstanding",!1),this.set("contactsRequestHasCompleted",!1),this.set("addContactRequestHasCompleted",!1),this.set("addContactRequestHasFailed",!1),this.set("recentsDataIsLoaded",!1),this.set("contactsDataIsLoaded",!1),this.set("allDataIsLoadedForQuery",!1),this._dataCache=null,this._lastSearchedPrefix=null,this._lastSearchedDataCache=null,this._lastSyncToken=null,this._lastPrefToken=null,this.set("dataRefreshNeeded",!0)},findCompletionsInLoadedData:function(e){var t=this._dataCache;if(!t)return[];var n=this._lastSearchedPrefix;n&&0===e.indexOf(n)&&(t=this._lastSearchedDataCache);var i,r,a,s,c,l,u,d=e.split(" ").filter(o.a),h={},p=d.length;for(r=0;r<p;++r){var f={},g=d[r],m=it.b(g).toLowerCase(),v=m;for(a=0;a<3;++a){var _,b,y;switch(a){case 0:_="recents",b=ft,y="guid";break;case 1:_="contacts",b=ht,y="contactId";break;case 2:if(_="groups",b=pt,y="groupId",0!==r)continue;p>1&&(m=it.b(e).toLowerCase())}var I=t[_],w=b.length;for(s=0;s<w;++s){var S=b[s],C=I[S],O=C.values;if(p>1&&"companyName"===S){if(0!==r)continue;m=it.b(e).toLowerCase()}var A=this._indexForString(O,m),E=m.length-1,T=m.substr(0,E),M=m.charCodeAt(E);T+=String.fromCharCode(M+1);var D=this._indexForString(O,T);if(A<O.length&&A<D){var L="emailAddresses"===S,N=C.records.slice(A,D),P=N.length;for(c=0;c<P;++c)if(l=N[c])for(var R=l.length,x=0;x<R;++x){var F,k,V=F=k=null;L?(k=(F=l[x]).idx,V=F.rec):V=l[x];var j=V[y];if(j)if(h[j]||(h[j]={fields:{},rec:V}),f[j]=!0,L){var B=h[j].fields,U=B[S];U||(B[S]={},U=B[S]),U[k]=g}else{var W=g;"groups"!==_&&"companyName"!==S||(W=e),h[j].fields[S]=W}}}m!==v&&(m=v)}}for(i in h)u=h[i],!h.hasOwnProperty(i)||f[i]||0!==r&&(u.rec.groupId||u.fields.companyName)||delete h[i];l=[];var G={contacts:[],groups:[],result:[]};for(i in h)if(h.hasOwnProperty(i)){var H=h[i].rec;H.address||H.members?G.result.push(H):H.contactId?G.contacts.push(H):H.groupId&&G.groups.push(H)}t=this.generateDataCache(G,!0),this._resultsCache=t}var $=this._autocompleteResultsForMatches(t,h);return this._lastSearchedPrefix=e,this._lastSearchedDataCache=t,$},isSearchable:w.c({readOnly:!0,dependencies:["contactsDataIsLoaded","recentsDataIsLoaded"],get:Object.assign(function(){return this.contactsDataIsLoaded||this.recentsDataIsLoaded},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])||i.internalGet(this,t[1+n])}})}),delegate:null,syncInterval:w.c(10),isRecentsGroupsEnabled:w.c(!0),isPhoneNumberSupportEnabled:d.b(!1),syncTokenInUse:w.c(!1),dataRefreshNeeded:w.c(!1),__dummy_prefix__:"__dummy_prefix__",_contactsStore:d.b(E.b(rt.a)),resolveGroupsMembershipAsPossibleWithLoadedData:function(e){var t=e.guidToRecordMapping;t||(t={});var n,i,r,a,s,o=e.groups;if(o)for(n in o)if(o.hasOwnProperty(n)&&(i=o[n].records))for(a=i.length-1;a>=0;--a)for(s=(r=i[a]).length-1;s>=0;--s){var c=r[s];this.resolveGroupMembershipAsPossibleWithLoadedData(c,t),c.resolvedContacts.length<=0&&(delete t[c.groupId],r.splice(s,1))}},resolveGroupMembershipAsPossibleWithLoadedData:function(e,t,n){var i=e.resolvedContacts;if(!i||-1===i){n||(n=0),i=[];var r,a={},s=e.contactIds;if(s)for(r=s.length-1;r>=0;--r){var o=s[r],c=t[o];c?a[o]||(i.push(c),a[o]=!0):s.splice(r,1)}e.resolvedContacts=i}},resolveRecentRecipientWithLoadedContacts:function(e,t){if(!e)return[];var n,i,r,a;if(r=e.length,a=t.length,r<1||a<1)return[];for(n=0;n<r;n++)for(i=0;i<a;i++)if(e[n].secondaryLabel===t[i].secondaryLabel){e[n].previewValue=t[i].previewValue,e[n].primaryLabel=t[i].primaryLabel,e[n].secondaryLabel=t[i].secondaryLabel,e[n].value=t[i].value,e[n].contactMatch=t[i].contactMatch,t.splice(i,1),a=t.length;break}},_autocompleteResultsForMatches:function(e,t){var n,i,r,a,s,o=[],c=[],l=[],u={},d=!0,h=this.getPath("delegate.autocompleteField");h&&(d=h.get("shouldMatchGroups"));var p,f,g,m,v,_,b=e.guidToRecordMapping;for(p in t)if(t.hasOwnProperty(p)&&(v=t[p].rec,g=t[p].fields,v.address?(_="Recents",b=e.recents.guidToRecordMapping):v.contactId?(_="Contact",b=e.contacts.guidToRecordMapping):v.groupId&&(_="ContactsGroup",b=e.groups.guidToRecordMapping),m=b[p]))if(f=null,"Recents"===_){if(m.isGroupMemberOnly||(f=this._autocompleteResultsForMatchedRecent(m,g),c.push(f)),!0===this.isRecentsGroupsEnabled&&(n=m.isMemberOf)&&n.length>0)for(i=n.length,s=0;s<i;s++)r=n[s].guid,a={address:m.address,rec:m,matchedFields:g},u[r]||(u[r]=[]),u[r].push(a)}else if("Contact"===_){var y,I,w,S=Object.keys(g).length,C=m.emailAddresses,O=m.phones,A=g.emailAddresses;if(1===S&&A)for(I in A)A.hasOwnProperty(I)&&(w=A[I],y=C[I],f=this._autocompleteResultsForMatchedContact(m,g,{type:ze.EMAIL,field:y.field,label:y.label},w),o.push(f));else{for(s=(C?C.length:0)-1;s>=0;--s){y=C[s],w=A?A[s]:null;var E={type:ze.EMAIL,field:y.field,label:y.label};f=this._autocompleteResultsForMatchedContact(m,g,E,w),o.push(f)}for(s=(this.isPhoneNumberSupportEnabled&&O?O.length:0)-1;s>=0;--s){var T=O[s],M={type:ze.PHONE,field:T.field,label:T.label};f=this._autocompleteResultsForMatchedContact(m,g,M,null),o.push(f)}}}else{if(!d||"ContactsGroup"!==_)continue;f=this._autocompleteResultsForMatchedGroup(m,g),o.push(f)}for(r in u)u.hasOwnProperty(r)&&(f=this._autocompleteResultForMatchedRecentsGroup(u[r],r))&&l.push(f);return this.resolveRecentRecipientWithLoadedContacts(c,o),c.length>0&&(o=(c=this._sortRecentsResultsByTimeStamp(c)).concat(o)),l.length>0&&(l=this._sortRecentsResultsByTimeStamp(l),o=o.concat(l)),o},_autocompleteResultsForMatchedContact:function(e,t,n,i){return function(e,t,n,i,r,a){var s=n.type,o=n.label,c=n.field,l=function(e,t){if(e.isCompany)return e.companyName;var n=e.firstName||"",i=e.lastName||"";return n||i?p.a({givenName:n,familyName:i}):void 0}(e),u=c,d=function(e,t,n,i,r){var a=e.firstName||"",s=e.lastName||"",o=e.middleName||"",c=e.nickname||"",l=e.companyName||"",u=t.firstName,d=t.lastName,h=t.nickname,p=t.middleName,f=t.companyName,g=u?u.length:0,m=d?d.length:0,v=h?h.length:0,_=p?p.length:0,b=f?f.length:0,y=n?n.length:0,I=a+" "+s;if(mt.a(a)&&mt.a(s)&&(I=""+s+a),r===ct.a.LAST_FIRST){var w=[s,a];a=w[0],s=w[1];var S=[d,u];u=S[0],d=S[1];var C=[m,g];g=C[0],m=C[1]}var O=void 0,A=void 0;if(e.isCompany)if(b)O=vt+"MatchCompanyByCompanyName",A={companyName:f+l.substr(b),firstAndLastNameInProperOrder:I,contactValue:i};else if(g)O=vt+"MatchCompanyByFirstName",A={companyName:l,firstAndLastNameInProperOrder:u+a.substr(g)+" "+s,contactValue:i};else if(m)O=vt+"MatchCompanyByLastName",A={companyName:l,lastAndFirstNameInProperOrder:d+s.substr(m)+" "+a,contactValue:i};else if(v)O=vt+"MatchCompanyByNickName",A={nickName:h+c.substr(v),firstAndLastNameInProperOrder:I,companyName:l,contactValue:i};else if(y)O=vt+"MatchCompanyByContact",A={companyName:l,firstAndLastNameInProperOrder:I,contactValue:n+i.substr(y)};else if(_)O=vt+"MatchCompanyByMiddleName",A={middleName:p+o.substr(_),companyName:l,firstAndLastNameInProperOrder:I,contactValue:i};else{for(var E in nt.b.warn("Don't know what was matched in autocomplete. This case should be handled better."),O="",A=[],t)t.hasOwnProperty(E)&&(O+="%@ ",A.push(t[E]));O+="(%@)",A.push(l)}else if(g&&g===a.length&&m)O=vt+"MatchPersonByFirstName",A={firstAndLastNameInProperOrder:u+" "+(d+s.substr(m)),contactValue:i};else if(m&&m===s.length&&g)O=vt+"MatchPersonByLastName",A={lastAndFirstNameInProperOrder:d+" "+(u+a.substr(g)),contactValue:i};else if(v&&v===c.length&&m)O=vt+"MatchPersonByNickAndLastName",A={nickName:h+c.substr(v),lastName:d+s.substr(m),contactValue:i};else if(g)O=vt+"MatchPersonByFirstName",A={firstAndLastNameInProperOrder:u+a.substr(g)+" "+s,contactValue:i};else if(m)O=vt+"MatchPersonByLastName",A={lastAndFirstNameInProperOrder:d+s.substr(m)+" "+a,contactValue:i};else if(v)O=vt+"MatchPersonByNickName",A={nickName:h+c.substr(v),firstAndLastNameInProperOrder:I,contactValue:i};else if(b)O=vt+"MatchPersonByCompanyName",A={companyName:f+l.substr(b),firstAndLastNameInProperOrder:I,contactValue:i};else if(y)O=vt+"MatchPersonByContact",A={firstAndLastNameInProperOrder:I,contactValue:n+i.substr(y)};else if(_)O=vt+"MatchPersonByMiddleName",A={middleName:p+o.substr(_),firstAndLastNameInProperOrder:I,contactValue:i};else{for(var T in nt.b.warn("Don't know what was matched in autocomplete. This case should be handled better."),O="",A={},t)t.hasOwnProperty(T)&&(O+="%{"+T.toString()+"} ",A[T]=t[T]);O=O.trim()}return{previewFormat:O,previewOrdering:A}}(e,t,i,c,a),h=d.previewFormat,f=d.previewOrdering,g=function(e,t){var n=t.field;if(e.isCompany)return{valueFormat:"%{companyName} <%{contactValue}>",valueOrdering:{companyName:e.companyName||"",contactValue:n}};var i=e.firstName||"",r=e.lastName||"";return{valueFormat:mt.a(i)&&mt.a(r)?"%{lastName}%{firstName} <%{contactValue}>":"%{firstName} %{lastName} <%{contactValue}>",valueOrdering:{firstName:i,lastName:r,contactValue:n}}}(e,n),m=g.valueFormat,v=g.valueOrdering,b=yt(_.d(h,f)),y=It(at.a(m,v)),I=e.contactId;return r.getModel($e.a,I),dt.create({primaryLabel:l,secondaryLabel:u,value:y,previewValue:b,category:o,contactMatch:E.b(Ke,{store:r,contactPrimaryKey:e.contactId,matchType:s,matchValue:c})})}(e,t,n,i,this._contactsStore,this._nameDisplayOrder)},_autocompleteResultsForMatchedRecent:function(e,t){var n,i,r,a,s,o,c,l=e.address;Array.isArray(e.timestamps)||(e.timestamps=[]);var u=e.name;-1===u.indexOf(",")&&(u=u.replace(/^"/,"").replace(/"$/,"")),u||(u=""),n=u,i=l;var d=t.name;t.names&&(d=t.names);var h=d?d.length:0,p=t.address,f=p?p.length:0;u||(u=l,n=l),d?(r="ContactsAutocomplete.PreviewTemplate.MatchRecentByName",s={matchedName:d+this._matchedNameLabelFromMatchedNamePrefix(u,d).substr(h),emailAddress:l}):(r="ContactsAutocomplete.PreviewTemplate.MatchRecentByEmailAddress",s={matchedEmail:p+l.substr(f),name:u}),a={name:u,emailAddress:l},o=at.a("%{name} <%{emailAddress}>",a),c=_.d(r,s),o=o.replace("“”",""),c=c.replace("“”",""),o=o.replace(/\(\s*\)/g,""),c=c.replace(/\(\s*\)/g,""),o=o.replace(/\s+/g," "),c=c.replace(/\s+/g," "),o=o.replace(/([^,<>]*[,<>].*)( <[^<]*)$/,'"$1"$2');var g=this._contactsStore,m=e.recentsGuid;return dt.create({primaryLabel:n,secondaryLabel:i,value:o,previewValue:c,timestamps:e.timestamps,category:_.d("ContactsAutocomplete.Category.RECENTS"),contactMatch:E.b(Ke,{matchType:ze.EMAIL,matchValue:l,contactPrimaryKey:m,store:g}),recentsGuid:e.recentsGuid})},_autocompleteResultForMatchedRecentsGroup:function(e,t){var n,i,r,a,s,o,c,l,u,d,h,p,f,g,m,v,b,y,I,w,S,C,O,A,T,M,D=[],L="",N=[],P=[],R=this._dataCache.guidToRecordMapping;if(!(n=R[t]))return null;for(Array.isArray(n.timestamps)||(n.timestamps=[]),s=e.length,c=(a=n.members).length,p=(r=e[0]).matchedFields,f=(d=r.rec).name,v=d.address,f=f.replace(/"/g,""),p.address?f=""!==f?v+" ("+f+")":v:(i=p.name?p.name:p.names,f=this._matchedNameLabelFromMatchedNamePrefix(f,i)),N.push(f),M=1;M<s;M++)d=e[M].rec,p=e[M].matchedFields,f=d.name,v=d.address,""===f&&(f=v),f=f.replace(/"/g,""),N.push(f);g=N.join(", "),o=e.map(function(e){return e.address});var x=[];for(M=0;M<c;M++)y=(l=a[M]).name,I=l.address,L=(w=R[l.guid])&&w.names&&""!==w.names[0]?w.names[0]:""===y?I:y,-1===o.indexOf(I)&&(L=L.replace(/"/g,"").replace(/,/g,""),D.push(L)),S="%@ <%@>",C=[y=y.replace(/^"/,"").replace(/"$/,""),I],h=(h=(h=(h=(h=at.a.apply(S,C)).replace("“”","")).replace(/\(\s*\)/g,"")).replace(/\s+/g," ")).replace(/([^,<>]*[,<>].*)( <[^<]*)$/,'"$1"$2').trim(),x.push(Ke.create({matchType:ze.EMAIL,matchValue:I})),P.push(h);return D.length>0?(D.length>1&&(g+=", "),u=D.pop(),m=_.d("ContactsAutocomplete.GroupMembers",{emailAddresses:D.join(", "),lastEmailAddress:u})):(u=N.pop(),g=_.d("ContactsAutocomplete.GroupMembers",{emailAddresses:N.join(", "),lastEmailAddress:u}),m=""),T=O=g+m,A=P.join(", "),b=[g,m],dt.create({matchChunks:b,primaryLabel:O,secondaryLabel:void 0,value:A,previewValue:T,timestamps:d.timestamps,isRecentsGroup:!0,recentsGuid:t,contactMatch:E.b(Ke,{matchType:ze.GROUP,matchValue:x})})},_matchedNameLabelFromMatchedNamePrefix:function(e,t){t=t.replace(/[-[\]{}()*+?.,\\^$|#]/g,"\\$&");var n,i,r=new RegExp(t,"i"),a=new RegExp("[\\s,]"+t,"i");if(0===e.search(r))return e;var s=e.search(a);return s>-1?(i=e.substring(0,s),n=e.substring(s+1)+" "+i):n=t+" ("+e+")",n},_autocompleteResultsForMatchedGroup:function(e,t){var n,i=t.name,r=i.length,a=e.name,s=e.contactIds.length,c=null,l=e.resolvedContacts,u=this._contactsStore;if(l){n=[];for(var d=[],h=l.length,p=0;p<h;++p){var f=l[p],g=f.firstName;g||(g="");var m,v=f.lastName;v||(v="");var b=f.emailAddresses;b&&(m=Et(b).field);var y,I,w,S=f.phones;if(S&&(m=Et(S).field),o.a(m)&&""!==m)y=m,I=ze.EMAIL;else{if(!this.isPhoneNumberSupportEnabled||!o.a(void 0))continue;y=void 0,I=ze.PHONE}w=(w=(w=(w=this._nameDisplayOrder===ct.a.LAST_FIRST?v+" "+g+" <"+y+">":g+" "+v+" <"+y+">").replace("“”","")).replace(/\(\s*\)/g,"")).replace(/\s+/g," "),d.push(w),n.push(Ke.create({matchType:I,matchValue:y,contactPrimaryKey:f.contactId,store:u}))}c=d.join(", ")}return dt.create({primaryLabel:a,secondaryLabel:1===s?_.d("ContactsAutocomplete.GroupSecondaryLabel.Single"):_.d("ContactsAutocomplete.GroupSecondaryLabel.Multiple",{numberOfContacts:s}),category:null,value:c,previewValue:i+a.substr(r)+" ("+s+")",isContactsGroup:!0,contactMatch:E.b(Ke,{matchType:ze.GROUP,matchValue:n})})},_dataCache:null,initializeDataCache:function(){for(var e={recents:{},contacts:{},groups:{},guidToRecordMapping:{},lastMatch:null},t=0;t<3;++t){var n,i;switch(t){case 0:n="recents",i=ft;break;case 1:n="contacts",i=ht;break;case 2:n="groups",i=pt}for(var r=e[n],a=i.length,s=0;s<a;++s)r[i[s]]={values:[],records:[]};r.guidToRecordMapping={}}return e},generateDataCache:function(e,t){var n=this.initializeDataCache();this._dataCache&&!t&&(e.contacts?n.recents=this._dataCache.recents:e.result&&(n.contacts=this._dataCache.contacts,n.groups=this._dataCache.groups)),e.result&&(n=this._processRecentsRecords(e.result,n,t)),e.contacts&&(n=this._processContactsRecords(e.contacts,"Contact",n)),e.groups&&(n=this._processContactsRecords(e.groups,"ContactsGroup",n)),n.guidToRecordMapping=st.a(n.recents.guidToRecordMapping,n.contacts.guidToRecordMapping,n.groups.guidToRecordMapping);var i=this.__dummy_prefix__;return Ot(ft,n.recents,i),Ot(ht,n.contacts,i),Ot(pt,n.groups,i),n},_processRecentsRecords:function(e,t,n){if(!Array.isArray(e))return nt.b.warn("Invalid %@ records found, cannot process.","Recents"),t;var i,r,a,s,o,c,l,u,d,h,p,f,g,m,v,b,y=t.recents,I=[],w=this.__dummy_prefix__;if(n)v=e;else{v=e.filter(function(e){return"CoreMail.RecentRecipient"===e.type}),b=e.filter(function(e){return"CoreMail.RecentGroup"===e.type});var S=v.length;for(r=0;r<S;r++)c=(s=v[r]).guid,o=s.name,(m=s.address)&&(s.recentsGuid=c,c=w+m.toLowerCase(),s.guid=c,1===(I=(o=o.replace(/["|“|”]/g,"").replace(/,/g," ")).split(/\s+/)).length&&(I=o.split(/,/)),s.names=I,y.guidToRecordMapping[c]=s);for(i=b.length,r=0;r<i;r++)if(c=(s=b[r]).guid,o=s.name,u=s.members)for(p=u.length,a=0;a<p;a++)o=(d=u[a]).name,(h=d.address)&&(l=w+h.toLowerCase(),d.guid=l,I=o.replace(/["|“|”]/g,"").split(/\s+/),d.isMemberOf=[{guid:c,memberName:o,memberNames:I}],(g=y.guidToRecordMapping[l])?g.isMemberOf?(g.isMemberOf.push({guid:c,memberName:o,memberNames:I}),g.names.concat(o)):g.isMemberOf=[{guid:c,memberName:o,memberNames:I}]:(d.timestamps=s.timestamps,d.names=I,d.isGroupMemberOnly=!0,v.push(d),y.guidToRecordMapping[l]=d),y.guidToRecordMapping[c]=s)}var C={};f=v.length;var O=this._contactsStore;for(a=0;a<f;a++){var A=v[a],E=A.recentsGuid,T=rt.a.getStoreIdForPrimaryKey($e.a,E);if(!O.hasDataFor(T)){var M=A.recentsGuid,D=A.name,L=A.address;C[L]=M,O.writeData(T,{contactId:M,firstName:D,emailAddresses:[{label:_.d("ContactsAutocomplete.Category.RECENTS"),field:L}]})}St(A,y,w)}return t},_processContactsRecords:function(e,t,n){if(!Array.isArray(e))return nt.b.warn("Invalid %@ records found, cannot process.",t),n;for(var i,r,a,s,o,c,l,u,d,h=this.__dummy_prefix__,p=this._contactsStore,f=0,g=e.length;f<g;f++)if(i=e[f],u=null,ot.a(i)){if("Contact"===t){var m=i.emailAddresses,v=this.isPhoneNumberSupportEnabled&&i.phones?i.phones:[];if(!(m&&Array.isArray(m)||v&&Array.isArray(v)))continue;if(m&&(m=m.filter(function(e){return!!e.field})),v&&(v=v.filter(function(e){return!!e.field})),m&&m.length<=0&&v&&v.length<=0)continue;u=i.normalized,r=n.contacts,s=ht,l=i.contactId;var _=i.contactId,b=rt.a.getStoreIdForPrimaryKey($e.a,_);p.hasDataFor(b)||p.writeData(b,i)}else if("ContactsGroup"===t){if(!i.contactIds)continue;r=n.groups,s=pt,l=i.groupId,(c=i.name)&&(u=it.b(c).toLowerCase()+":")}if(u){var y,I;l&&(r.guidToRecordMapping[l]=i),d=u.split(":");for(var w=0,S=s.length;w<S;w++){var C=i[o=s[w]];if(C)if("emailAddresses"===o)for(var O=C.length,A=0;A<O;A++)(u=d[w+A])&&"NULL"!==u&&((y=(a=r[o]).temp)||(y={},a.temp=y),(I=y[h+u])?I.push({idx:A,rec:i}):(y[h+u]=[{idx:A,rec:i}],a.values.push(u)));else{if(!(u=d[w])||"NULL"===u)continue;(y=(a=r[o]).temp)||(y={},a.temp=y),(I=y[h+u])?I.push(i):(y[h+u]=[i],a.values.push(u))}}}}else nt.b.warn("Invalid %@ record found, skipping.",t);return n},_nameDisplayOrder:d.b({readOnly:!0,get:function(){return lt.a()}}),_sortOrder:d.b({readOnly:!0,get:function(){var e=_.c();return lt.b(e)?ut.FIRST_LAST:ut.LAST_FIRST}}),_lastSyncToken:null,_lastPrefToken:null,_skipSyncCount:0,_redirectCountForTimeout:0,_redirectCount:0,MAX_REDIRECT:4,MAX_REDIRECT_FOR_TIMEOUT:1,REDIRECT_RESPONSE_TEXT:"<h1>Redirect</h1>",INTERVAL_XHR_TIMEOUT_FOR_RECENTS_REQUEST:3e4,requestDidComplete:function(e,t){this._requestDidComplete(e,t)},_requestDidComplete:function(e,t){var n=t.type,i=t.onComplete;i&&this[i].call(this,e,n);var r,a,s,o=!1,c=e.status,l=!1;if(200!=100*Math.floor(c/100))if(o=!0,n===gt.CONTACTS)switch(c){case 420:case 422:l=!0}else gt.RECENT_RECIPIENTS;if(r=e.encodedBody)if(0===r.indexOf("<"))o=!0,s="ContactsAutocomplete.Error.Generic";else if(l)s=r;else if("not found"===r)o=!0,s="ContactsAutocomplete.Error.NotFound";else{try{a=e.body}catch(e){o=!0}a?a.errorValue&&(s=a.message,o=!0):o=!0}else o=!0;if(n===gt.CONTACTS&&!o){var u=this.get("syncTokenInUse");a.syncToken?(this._lastSyncToken=a.syncToken,a.prefToken?this._lastPrefToken=a.prefToken:(o=!0,this._lastPrefToken=null,nt.b.warn("Autocomplete contacts response error: no prefToken found."))):u&&"{}"===r||(o=!0,this._lastSyncToken=null,nt.b.warn("Autocomplete  contacts response error:  no sync token found.")),!u&&this._lastSyncToken&&this._lastPrefToken&&this.sendContactsRequest()}if(o)if(l)this._lastSyncToken=null,this._lastPrefToken=null,this.sendContactsRequest();else{s||(s="ContactsAutocomplete.Error.Generic"),a&&nt.b.warn(at.a("Autocomplete server error: %{err}",{err:c}));var d=t.onError;d?this[d].call(this,e,n,s):this.requestDidError(e,n,s)}else{var h=t.onSuccess;h?this[h].call(this,a,n):this.requestDidSucceed(n)}},requestDidSucceed:function(e){},_failedNetworkRequestCount:d.b(0),requestDidError:function(e,t,n){t===gt.RECENT_RECIPIENTS?this.set("recentsDataIsLoaded",!1):this.set("contactsDataIsLoaded",!1);var i=n;if(!i)try{i=e.body}catch(e){i="ContactsAutocomplete.Error.Generic"}this._failedNetworkRequestCount+=1},recentRecipientsRequestCompleted:function(){this.set("recentsRequestIsOutstanding",!1)},recentRecipientsRequestSucceeded:function(e,t){if(this.set("recentsRequestHasCompleted",!0),t===gt.RECENT_RECIPIENTS){if(e&&e.result){var n=this.generateDataCache(e);this._dataCache=n}this.set("recentsDataIsLoaded",!0),this.set("allDataIsLoadedForQuery",!0)}else this.set("recentsRequestHasCompleted",!1),this._lastSearchedPrefix=null,this._lastSearchedDataCache=null},contactsRequestCompleted:function(){this.set("contactsRequestIsOutstanding",!1)},contactsRequestSucceeded:function(e,t){if(this.set("contactsRequestHasCompleted",!0),e&&e.contacts){var n=this.generateDataCache(e);this._dataCache=n,this.resolveGroupsMembershipAsPossibleWithLoadedData(n)}this.set("contactsDataIsLoaded",!0),this.set("allDataIsLoadedForQuery",!0)},_haveDelegatePerform:function(e,t,n){var i=this.get("delegate");return!!i&&i[e](t,n)},_indexForString:function(e,t){if(0===e.length)return 0;for(var n,i,r=!1,a=0,s=e.length-1;!r&&a<=s;){n=!1;var o=e[i=Math.floor((a+s)/2)];o===t?r=!0:o<t?(a=i+1,n=!0):s=i-1}var c=i;return n&&++c,c},_sortRecentsResultsByTimeStamp:function(e){return e.length>1&&e.sort(function(e,t){var n=e.timestamps.length,i=t.timestamps.length;if(n>i)return-1;if(n<i)return 1;e.timestamps.sort(function(e,t){return t-e}),t.timestamps.sort(function(e,t){return t-e});var r=e.timestamps[n-1],a=t.timestamps[i-1];return r===a?0:r>a?-1:1}),e},_loadingStatus:d.b(),_updateLoadingStatus:T.f("_failedNetworkRequestCount","contactsRequestIsOutstanding","contactsDataIsLoaded",function(e,t,n){var i,r,a,s,o=this._loadingStatus;this._loadingStatus=(i=o,r=t,a=n,s=ke,e>0?s.Failed:r?s.Loading:!r&&a?s.Completed:i===s.Completed||i===s.Failed&&!r&&!a?s.Initial:i)}),staticMembers:{__QUALIFIED_CLASS_NAME__:"DataSource"}});function St(e,t,n){var i=e.normalizedValues;if(i){for(var r=ft,a=0,s=r.length;a<s;a++){var o,c=r[a];if("names"===c)for(var l=e.names.length,u=0;u<l;u++)(o=i[a+u])&&Ct("names",o,e,t,n);else(o=i[a])&&Ct(c,o,e,t,n)}var d=e.guid;t.guidToRecordMapping[d]=e}else{var h=e.address;if(!h)return;i=[h=it.b(h).toLowerCase()],Ct("address",h,e,t,n);var p=e.name;if(p){p=p.replace(/["|“|”]/g," ").trim(),e.name=p;var f=p.split(/\s/),g=f.length;1===g&&(g=(f=p.split(/,/)).length);for(var m=0;m<g;m++){var v=f[m];-1===i.indexOf(v)&&(v=it.b(v).toLowerCase(),i.push(v),Ct("names",v,e,t,n))}}e.normalizedValues=i}}function Ct(e,t,n,i,r){var a=i[e],s=a.temp;s||(s={},a.temp=s);var o=r+t,c=s[o];return c?c.push(n):(s[o]=[n],a.values.push(t)),t}function Ot(e,t,n){e.forEach(function(e){var i=t[e],r=i.values,a=i.temp;if(a){r.sort();for(var s=[],o=0,c=r.length;o<c;o++){var l=a[n+r[o]];s.push(l)}i.records=s,delete i.temp}})}function At(e){if(!e)return 0;if("MAIN"===e)return 3;if("HOME"===e)return 3;if("WORK"===e)return 2;switch(e.toLowerCase()){case"main":return 3;case"home":return 2;case"work":return 1;default:return 0}}function Et(e){return e.reduce(function(e,t){return At(e.label)>At(t.label)?t:e})}var Tt=n(406),Mt=n(171),Dt=n(1222),Lt=n(188),Nt=Q.a.extend(T.a,{action:d.b(),title:d.b(),titleIsAlwaysLTR:d.b({type:"boolean"}),iconClass:d.b(),isDisabled:d.b(),keyCombo:d.b(),keySequence:d.b({dependencies:["keyCombo"],get:Object.assign(function(){return this._keySequence||Lt.a.create(this.keyCombo)},{__CW__getter:function(e,t,n,i){return this._keySequence||Lt.a.create(i.internalGet(this,t[0+n]))}}),set:function(e){this._keySequence=e}}),hasCheckmark:d.b({type:"boolean"}),shouldEscape:d.b(),staticMembers:{__QUALIFIED_CLASS_NAME__:"MenuItem"}}),Pt=Q.a.extend({staticMembers:{__QUALIFIED_CLASS_NAME__:"DividerItem"}}),Rt=(T.a,n(1277)),xt=n(1169),Ft={mixinDependencies:[f.a],autocompleteItemWasSelected:xt.a},kt=Te.a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",styles:{width:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"width",attributes:{},unit:"px",property:"width"}}}},__QUALIFIED_CLASS_NAME__:"AutocompleteTextField"},delegate:d.b({type:Ft}),dataSource:d.b({type:Xe}),autocomplete:"off",autocorrect:"off",spellcheck:"false",autocapitalize:"false",width:d.b(500),didAttach:function(){var e=this.dataSource;e&&e.load()},didDetach:function(){},query:d.b(""),fullPreview:d.b(m.c("menu.highlightedItem.previewValue")),highlightedItem:d.b(m.c("menu.highlightedItem")),autocompleteItemWasSelected:function(e){var t=(this.value=e.value).length;G.a.sharedInstance.isEdge&&(this._shouldSkipNextInputEvent=!0),this.selection={start:t,end:t},this.menu.hide(),this.query="";var n=this.delegate;n&&n.autocompleteItemWasSelected&&n.autocompleteItemWasSelected(this,e),this.sendEvent("didAutocomplete",e)},minimumCharacters:d.b(0),backspaceDelay:800,menu:d.b(),isMenuVisible:d.b({readOnly:!0,dependencies:["_items","_items.contentsDidChange","isFocused"],get:Object.assign(function(){return this.isFocused&&this._items.length>0},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[2+n])&&i.internalGet(this,t[0+n]).length>0}})}),_isMenuVisibleDidChange:T.f("isMenuVisible",function(e){var t=this.menu;t&&(e?(t.show(),this.sendEvent("pauseParsing")):(t.hide(),this.sendEvent("resumeParsing")))}),_timeElapsedFromBackspace:d.b({defaultValue:function(){return this.backspaceDelay}}),_isAutocompletingTextField:d.b({readOnly:!0,dependencies:["isMenuVisible","_timeElapsedFromBackspace","isFocused","isIMEInputActive"],get:Object.assign(function(){return this.isMenuVisible&&this.isFocused&&!this.isIMEInputActive&&this._timeElapsedFromBackspace>=this.backspaceDelay},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])&&i.internalGet(this,t[2+n])&&!i.internalGet(this,t[3+n])&&i.internalGet(this,t[1+n])>=this.backspaceDelay}})}),_isAutocompletingTextFieldDidChange:T.f("_isAutocompletingTextField","fullPreview",function(e,t){if(e&&t&&t.length>0){this.value=t;var n=this.query.length,i=this.value.length;G.a.sharedInstance.isEdge&&(this._shouldSkipNextInputEvent=!0),this.selection={start:n,end:i}}}),_items:d.b({readOnly:!0,strong:!0,dependencies:["query","minimumCharacters","dataSource"],get:Object.assign(function(){var e=this.query,t=this.dataSource;return t&&e.length>this.minimumCharacters?t.autocompleteItemsForText(e):et.a.create()},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[2+n]);return a&&r.length>i.internalGet(this,t[1+n])?a.autocompleteItemsForText(r):et.a.create()}})}),_shouldSkipNextInputEvent:!1,input:function(e){if(this.__s._$1Va$input.call(this,e),this._shouldSkipNextInputEvent)this._shouldSkipNextInputEvent=!1;else{var t=this.value;this.query=t?this.value:""}},keyDown:function(e){var t=arguments,n=!1,i=this.isMenuVisible,r=this.highlightedItem;switch(e.which){case ee.a.DOWN:e.preventDefault(),this.menu.highlightNextItem(),n=i;break;case ee.a.UP:e.preventDefault(),this.menu.highlightPreviousItem(),n=i;break;case ee.a.LEFT:case ee.a.RIGHT:case ee.a.COMMA:r&&i&&(e.preventDefault(),this.autocompleteItemWasSelected(r),n=!0);break;case ee.a.ENTER:r&&i?(e.preventDefault(),this.autocompleteItemWasSelected(r),n=!0):i||(n=this.__s._$1zL$keyDown.apply(this,t));break;case ee.a.BACKSPACE:this._timeElapsedFromBackspace=0,this._backspaceCompletionTimer.restart(),n=!1;break;default:n=!1}return n},_backspaceCompletionTimer:d.b({defaultValue:function(){return Ee.a.create({delay:this.backspaceDelay,target:this,action:"_recordTimeElapsedFromBackspace"})}}),_recordTimeElapsedFromBackspace:function(){this._timeElapsedFromBackspace+=this._backspaceCompletionTimer.delay},_isAttachedDidChange:T.f("isAttached",function(e){e?this.didAttach():this.didDetach()}),__superMap:{_$1Va$input:"input",_$1zL$keyDown:"keyDown"}}),Vt=M.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"textField"},{type:"ELEMENT",tagname:"span",name:"testMeasurer",styles:{position:"absolute",left:"-1000px",top:"-1000px",visibility:"hidden","white-space":"pre"}}],styles:{width:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"width",attributes:{signal:"widthDidRender"},unit:"px",property:"width"}}},extraSpace:d.b({readOnly:!0,get:function(){var e=G.a.sharedInstance;return e.isIE||e.isEdge?5:0}}),className:"ck-sharing-resizing-autocomplete-text-field",__QUALIFIED_CLASS_NAME__:"ResizingAutocompleteTextField"},_items:d.b({strong:!0,binding:m.c("textField._items")}),isFocusable:!0,defaultFocusChild:m.c("textField"),focusAsLeaf:function(){this.focusDefault()},isFocused:d.b({readOnly:!0,dependencies:["isInFocusedBranch"],get:Object.assign(function(){return this.isInFocusedBranch},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])}})}),textField:d.b({defaultValue:E.b(kt,{additionalClassNames:["token-item-textfield"]}),downstreamBindings:{value:"(owner).value",menu:"(owner).menu",delegate:"(owner).delegate",dataSource:"(owner).dataSource",isDisabled:"(owner).isDisabled",width:"(owner).width"}}),value:d.b(),menu:d.b(),delegate:d.b(),dataSource:d.b(),isDisabled:d.b(),width:d.b({readOnly:!0,dependencies:["value","isAttached"],get:Object.assign(function(){var e=this.testMeasurer;e.textContent=this.value;var t=e.offsetWidth+this.constructor.extraSpace;return e.innerText="",t+3},{__CW__getter:function(e,t,n,i){var r=this.testMeasurer;r.textContent=i.internalGet(this,t[0+n]);var a=r.offsetWidth+this.constructor.extraSpace;return r.innerText="",a+3}})}),_windowDidResize:T.f(G.a.bindingFor("sharedInstance.window.width"),"textField.isMenuVisible",function(e,t){var n=this.menu;if(n&&t){var i=n.anchorLayoutMeasurer;i&&i.recomputeLayoutIfNecessary()}}),selection:d.b({cacheable:!1,readOnly:!0,dependencies:["textField.selection"],get:Object.assign(function(){return this.getPath("textField.selection")},{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])}})})}),jt=H.b("TokenItemStatus",{OK:"OK",PENDING:"PENDING",INVALID:"INVALID"}),Bt=n(79),Ut=n(114),Wt=n(103),Gt=Le.extend({tokenTextField:Vt,staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isInvalid",truevalue:"invalid",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isPending",truevalue:"pending",attributes:{}}]}},__QUALIFIED_CLASS_NAME__:"TokenItemView"},status:d.b(jt.OK),isInvalid:d.b({readOnly:!0,dependencies:["status"],get:Object.assign(function(){return this.status===jt.INVALID},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])===jt.INVALID}})}),isPending:d.b({readOnly:!0,dependencies:["status"],get:Object.assign(function(){return this.status===jt.PENDING},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])===jt.PENDING}})}),autocompleteItem:d.b(null),menuTitle:d.b({didChange:function(e){var t=this.menuItems,n=t&&t.objectAt(0);n&&(n.title=e||"")}}),hydratedValue:d.b({readOnly:!0,dependencies:["value","userIdentity"],get:Object.assign(function(){var e=this.userIdentity;if(!e)return this.value;var t=(e.givenName||"").trim(),n=(e.familyName||"").trim(),i=(e.phoneNumber||"").trim(),r=(e.emailAddress||"").trim(),a=this.formatDisplayName(e);return(t||n)&&(i||r)?a+" <"+(i||r)+">":a},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[1+n]);if(!r)return i.internalGet(this,t[0+n]);var a=(r.givenName||"").trim(),s=(r.familyName||"").trim(),o=(r.phoneNumber||"").trim(),c=(r.emailAddress||"").trim(),l=this.formatDisplayName(r);return(a||s)&&(o||c)?l+" <"+(o||c)+">":l}})}),userIdentity:d.b({strong:!0,didChange:function(e){if(e){this.value=this.formatDisplayName(e);var t=e.emailAddress,n=e.phoneNumber,i=jt.INVALID;t?(this.menuTitle=t,this.contentIsAlwaysLTR=!1,Bt.a.isValidEmailAddress(t)&&(i=jt.OK)):n?(this._configureForPhoneNumber(n),i=jt.PENDING):this.menuTitle=this.value,this.status=i,this.sendEvent("tokenValueChanged")}}}),_configureForPhoneNumber:function(e){this.menuTitle=e,this.contentIsAlwaysLTR=!0;var t=this;this.formatPhoneNumber(e).then(function(e){if(t.sendEvent("phoneNumberValidationDidComplete",e.isValid),e.isValid){var n=e.canonical,i=t.userIdentity;i.lookupInfo={phoneNumber:n},t.value=t.formatDisplayName(i),t.menuTitle=n}t.status=e.isValid?jt.OK:jt.INVALID,t.sendEvent("tokenValueChanged")}).catch(function(e){t.status=jt.INVALID,t.sendEvent("tokenValueChanged")})},formatDisplayName:function(e){return p.a(e)},buildMenuItemsForPhoneNumber:function(){var e=this.createInitialContactMenuItems(!0);return this.addCommonMenuItems(e,"Phone"),et.a.create(e)},buildMenuItemsForEmailAddress:function(){var e=this.createInitialContactMenuItems(!1);return this.addCommonMenuItems(e,"Email"),et.a.create(e)},buildMenuItemsForUnknownItem:function(){var e=this.createInitialContactMenuItems();return this.addCommonMenuItems(e,"Unknown"),et.a.create(e)},addCommonMenuItems:function(e,t){e.push(Nt.create({title:_.d("CKSharing.AddParticipants.TokenItemMenu.Edit"+t),target:this,action:"editItem"})),e.push(Nt.create({title:_.d("CKSharing.AddParticipants.TokenItemMenu.Remove"+t),target:this,action:"removeItem"}))},createInitialContactMenuItems:function(e){var t=[Nt.create({title:this.menuTitle,titleIsAlwaysLTR:e,action:"",isDisabled:!0,hasCheckmark:!0})],n=this.autocompleteItem,i=n&&n.contact,r=i&&i.emailAddresses,a=i&&i.phones,s=this;return r&&r.forEach(function(e){s._addAutocompleteMenuItem(t,i,e)}),a&&a.forEach(function(e){s._addAutocompleteMenuItem(t,i,e,!0)}),t.push(Pt.create({})),t},_addAutocompleteMenuItem:function(e,t,n,i){var r=n.field,a=n.label,s="ContactsAutocomplete.Category."+a,o=_.d(s);if(o!==s&&(a=o),this.autocompleteItem.matchValue!==r){var c={nameComponents:{givenName:t.firstName,familyName:t.lastName},lookupInfo:{emailAddress:i?void 0:r,phoneNumber:i?r:void 0}},l=_.d("CKSharing.AddParticipants.TokenItemMenu.AutocompleteItem.Title",{field:r,label:a});e.push(Nt.create({title:l,userIdentityData:c,matchType:i?ze.PHONE:ze.EMAIL,matchValue:r,target:this,action:"didSelectAutocompleteMenuItem"}))}},didSelectAutocompleteMenuItem:function(e){var t=e&&e.item;if(t){var n=t.userIdentityData;n&&(this.userIdentity=Bt.a.create(n)),this.autocompleteItem.matchValue=t.matchValue,this.autocompleteItem.matchType=t.matchType}},serverCanonicalizePhoneNumber:function(e){var t={};return this.sendEvent("canonicalizePhoneNumbers",[e],t),t.value},formatPhoneNumber:function(e){var t=Rt.a.sharedInstance;return this.serverCanonicalizePhoneNumber(e).catch(function(n){return t.format(e,void 0,!0).then(function(e){return e.isValid=!1,e})}).then(function(n){var i=n[0]&&"+"+n[0];return t.format(i||e,void 0,!0).then(function(e){return i||(e.isValid=!1),e})})},displayMenu:function(e){var t=this.menuController=he.create({listCollection:e,target:this,listLayoutRowHeight:27,shouldMeasure:!0,verticalAlignment:Dt.b.Bottom,horizontalAlignment:Dt.a.Left,allowedLayouts:[Z.c,Z.b,Z.a,Z.d],resolutionStrategy:Y.a,isAlignmentRequired:!1,arrowAlignment:se.a.None}),n=this.tokenButton.menuButton;t.show(n)},menuController:d.b({strong:!0}),tokenMenuButtonClicked:function(){var e=this.userIdentity;e&&e.phoneNumber?this.displayMenu(this.menuItems=this.buildMenuItemsForPhoneNumber()):e&&e.emailAddress?this.displayMenu(this.menuItems=this.buildMenuItemsForEmailAddress()):this.displayMenu(this.menuItems=this.buildMenuItemsForUnknownItem())},editItem:function(){ne.a(this.startEditing.bind(this),0)},startEditing:function(){var e=arguments,t=this.userIdentity;t&&(t.emailAddress?this.value=t.emailAddress:t.phoneNumber&&(this.value=t.phoneNumber)),this.__s._$6Y7$startEditing.apply(this,e)},updateForContactMatch:function(e){if(e){var t=e.matchValue,n=e.matchType.value,i=e.contact;if("GROUP"!==n){var r="",a="";i&&(r=i.firstName,a=i.lastName),r=e.getPath("contact.firstName")||"",a=e.getPath("contact.lastName")||"","EMAIL"!==n||Bt.a.isValidEmailAddress(t)||(r||a||(r=t),t=void 0),this.userIdentity=Bt.a.create({nameComponents:{givenName:r,familyName:a},lookupInfo:{emailAddress:"EMAIL"===n?t:void 0,phoneNumber:"PHONE"===n?t:void 0}}),this.autocompleteItem=e}else{for(var s=t.length-1,o=0,c=s;o<c;++o)this.sendEvent("createNewTokenItemFromAutocompleteItemBeforeCurrentToken",this,t[o]);this.updateForContactMatch(t[s])}}},didAutocomplete:function(e){this._isInDidAutocomplete=!0,this.updateForContactMatch(e.contactMatch),this.sendEvent("createNewEditingTokenAfterCurrentToken",this),this.stopEditing(),this._isInDidAutocomplete=!1},removeItem:function(){this.sendEvent("deleteCurrentToken",this)},shouldUpdateUserIdentity:function(e){var t=this.userIdentity;return!t||!e||!t.familyName&&!t.givenName||!t.emailAddress&&!t.phoneNumber||Object(Ut.a)(t.emailAddress)!==Object(Ut.a)(e.emailAddress)||Object(Wt.a)(t.phoneNumber)!==Object(Wt.a)(e.phoneNumber)},tokenStoppedEditing:function(){var e=(this.value||"").trim();if(!this.isEditing||this._isInDidAutocomplete||!e)return!1;var t=Bt.a.createFromString(e);return this.shouldUpdateUserIdentity(t)?(this.userIdentity=t,this.autocompleteItem=null):this.value=this.formatDisplayName(this.userIdentity),!1},keyDown:function(e){var t=e.which,n=this.value+",",i=this.parseValueForTokens(n),r=this.__s._$8j_$keyDown.call(this,e);return!r&&this.isEditing&&t===ee.a.COMMA&&i.length>1&&(this.stopEditing(),this.reEmptyToken.test(n)||this.sendEvent("createNewEditingTokenAfterCurrentToken",this),e.preventDefault(),r=!0),r},__superMap:{_$6Y7$startEditing:"startEditing",_$8j_$keyDown:"keyDown"}}),Ht=je.extend({CustomAutocompleteDataSourceClass:d.b(),CustomLoadMembershipInfoHandlerClass:d.b(),hostedByCloudOSOne:d.b(!0),tokenItemViewClass:Gt,menu:d.b({dependencies:["CustomLoadMembershipInfoHandlerClass"],readOnly:!0,get:Object.assign(function(){var e=qe.create({target:this,anchor:this,layout:Ie.DOUBLE_LINE,allowedLayouts:[Z.a],width:this.bindingFor("width")}),t=this.CustomLoadMembershipInfoHandlerClass;return t&&(e.contentController.membershipInfoLoader.loadMembershipInfoHandler=t.create()),e},{__CW__getter:function(e,t,n,i){var r=qe.create({target:this,anchor:this,layout:Ie.DOUBLE_LINE,allowedLayouts:[Z.a],width:this.bindingFor("width")}),a=i.internalGet(this,t[0+n]);return a&&(r.contentController.membershipInfoLoader.loadMembershipInfoHandler=a.create()),r}})}),autocompleteDataSource:d.b({dependencies:["CustomAutocompleteDataSourceClass","hostedByCloudOSOne"],readOnly:!0,get:function(){var e=this.CustomAutocompleteDataSourceClass,t=this.hostedByCloudOSOne;if(e)return e.create();var n=wt;return t?n.create({isPhoneNumberSupportEnabled:!0}):n.extend({isPhoneNumberSupportEnabled:!0,isRecentsEnabled:d.b({dependencies:[],get:function(){return!1}}),createContactsRequest:function(){var e=arguments,t=this.__s._$_7$createContactsRequest.apply(this,e);return Tt.a.create(t.url.toString(),{serviceName:t.serviceName,useCredentialsIfCrossOrigin:t.useCredentialsIfCrossOrigin})},createRecentRecipientsRequest:function(){var e=arguments,t=this.__s._$17r$createRecentRecipientsRequest.apply(this,e);return Tt.a.create(t.url.toString(),{serviceName:t.serviceName,method:t.method,body:t.body,timeout:t.timeout,useCredentialsIfCrossOrigin:t.useCredentialsIfCrossOrigin,shouldFinalizeWithResponse:t.shouldFinalizeWithResponse,headers:t.headers})},__superMap:{_$_7$createContactsRequest:"createContactsRequest",_$17r$createRecentRecipientsRequest:"createRecentRecipientsRequest"}}).create()}}),staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",classes:["add-participants-tokenizedtextfield-view"]}},__QUALIFIED_CLASS_NAME__:"AutocompleteTokenizedTextField"},labelField:d.b({defaultValue:E.b(M.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"toFieldText",attributes:{}}],name:"toField",classes:["to-field"]}}})),downstreamBindings:{toFieldText:"(owner).toFieldText"}}),toFieldText:d.b(_.d("CKSharing.AddParticipants.TokenItemView.Add")),invitees:d.b({readOnly:!0,dependencies:["tokenViews","tokenViews.contentsDidChange","_tokenValueChangedSignal"],get:Object.assign(function(){var e=[],t=this.tokenViews;return t&&t.forEach(function(t){t.userIdentity&&t.value&&e.push(Mt.a.create({userIdentity:t.userIdentity}))}),e},{__CW__getter:function(e,t,n,i){var r=[],a=i.internalGet(this,t[0+n]);return a&&a.forEach(function(e){e.userIdentity&&e.value&&r.push(Mt.a.create({userIdentity:e.userIdentity}))}),r}})}),hasPendingTokens:d.b({readOnly:!0,dependencies:["tokenViews","tokenViews.contentsDidChange","_tokenValueChangedSignal"],get:Object.assign(function(){var e=this.tokenViews;return e&&e.some(function(e){return e.isPending})},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return r&&r.some(function(e){return e.isPending})}})}),hasInvalidTokens:d.b({readOnly:!0,dependencies:["tokenViews","tokenViews.contentsDidChange","_tokenValueChangedSignal"],get:Object.assign(function(){var e=this.tokenViews;return e&&e.some(function(e){return e.isInvalid})},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return r&&r.some(function(e){return e.isInvalid})}})}),hasAtLeastOneValidToken:d.b({readOnly:!0,dependencies:["tokenViews","tokenViews.contentsDidChange","_tokenValueChangedSignal"],get:Object.assign(function(){var e=this.tokenViews;return e&&e.some(function(e){return e.userIdentity&&!e.isInvalid})},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return r&&r.some(function(e){return e.userIdentity&&!e.isInvalid})}})}),parseValueForTokens:function(e){return Bt.a.splitAddressString(e)},createNewTokenItemFromAutocompleteItemBeforeCurrentToken:function(e,t){this.createNewTokenItemBeforeCurrentToken(e,"PLACEHOLDER").updateForContactMatch(t)},logService:d.b(),phoneNumberValidationDidComplete:function(e){var t=this.logService;t&&t.recordStat("PhoneNumberValidation"+(e?"Succeeded":"Failed"))},autocompleteItemWasSelected:function(e){var t=l.a(this,"lastEditedToken.tokenTextField.textField");t&&"function"==typeof t.autocompleteItemWasSelected&&t.autocompleteItemWasSelected(e)},_createNewEditingTokenAtIndex:function(e){var t=this.lastEditedToken;t&&t.isEditing&&t.stopEditing(),this.__s._$2rv$_createNewEditingTokenAtIndex.call(this,e)},hydrateValues:function(e){var t=[];return this.tokenViews.forEach(function(n){e&&!e(n)||t.push(n.hydratedValue)}),t.join(", ")},__superMap:{_$2rv$_createNewEditingTokenAtIndex:"_createNewEditingTokenAtIndex"}}),$t=M.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"header",children:[{type:"ELEMENT",tagname:"h1",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"title",attributes:{escape:"false"}}]},{type:"ELEMENT",tagname:"h2",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"subtitle",attributes:{}}]}]},__QUALIFIED_CLASS_NAME__:"AddParticipantsHeaderView"},title:d.b({type:String}),subtitle:d.b({type:String})}),zt=n(1233),Kt=(n(944),M.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"spinnerView"}],classes:["busy-view",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isVisible",truevalue:"",falsevalue:"hidden",attributes:{}}]},className:"ck-sharing-busy-view",__QUALIFIED_CLASS_NAME__:"BusyView"},isVisible:d.b(!1),spinnerView:E.b(zt.a)})),Qt=(n(946),M.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"h1",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"title",attributes:{}}]},{type:"ELEMENT",tagname:"h2",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"description",attributes:{}}]}],classes:["offline-view",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isVisible",truevalue:"",falsevalue:"hidden",attributes:{}}]},className:"ck-sharing-offline-view",__QUALIFIED_CLASS_NAME__:"OfflineView"},title:_.d("CKSharing.Offline.Title"),description:_.d("CKSharing.Offline.Description"),isVisible:d.b(!1)})),qt=M.a.extend({supportedTransports:d.b(),shareItemType:d.b(),transportItemsForDisplay:d.b({readOnly:!0,dependencies:["supportedTransports"],get:Object.assign(function(){var e=(this.supportedTransports||[]).map(function(e){var t=R.a[e],n=t===R.a.WEB_MAIL||t===R.a.NATIVE_MAIL?"EMAIL":t,i=F.a(B(n.toLowerCase())),r="CKSharing.AddParticipants.Transports."+i+"Button.Title",a=U.a(i).toLowerCase();return{title:_.d(r),value:t,classNames:[a]}});return W.a.create(e)},{__CW__getter:function(e,t,n,i){var r=(i.internalGet(this,t[0+n])||[]).map(function(e){var t=R.a[e],n=t===R.a.WEB_MAIL||t===R.a.NATIVE_MAIL?"EMAIL":t,i=F.a(B(n.toLowerCase())),r="CKSharing.AddParticipants.Transports."+i+"Button.Title",a=U.a(i).toLowerCase();return{title:_.d(r),value:t,classNames:[a]}});return W.a.create(r)}})}),shouldShowParticipantsEntry:d.b({dependencies:["transport","accessDropdownValue"],readOnly:!0,get:Object.assign(function(){var e=this.transport,t=this.accessDropdownValue===A.a.PRIVATE,n=e===R.a.COPY_LINK,i=e===R.a.NATIVE_MAIL;return t&&(n||i)},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n])===A.a.PRIVATE,s=r===R.a.COPY_LINK,o=r===R.a.NATIVE_MAIL;return a&&(s||o)}})}),invitees:d.b(m.c("invitationsTextField.invitees")),logService:d.b(),CustomLoadMembershipInfoHandlerClass:d.b(),CustomAutocompleteDataSourceClass:d.b(),sharePopoverIsActive:d.b(),clearInvitationsTextField:function(e){var t=this.invitationsTextField;t&&t.setValue()},invitationsTextField:d.b({defaultValue:E.b(Ht.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isVisible",truevalue:"",falsevalue:"hidden",attributes:{signal:"isVisibleDidRender"}}]}}},placeholder:_.d("CKSharing.AddParticipants.InvitationsTextField.Placeholder")})),downstreamBindings:{isVisible:"(owner).shouldShowParticipantsEntry",CustomLoadMembershipInfoHandlerClass:"(owner).CustomLoadMembershipInfoHandlerClass",logService:"(owner).logService",CustomAutocompleteDataSourceClass:"(owner).CustomAutocompleteDataSourceClass",hostedByCloudOSOne:"(owner).hostedByCloudOSOne"}}),title:d.b(),subtitle:d.b(null),subtitleString:d.b({readOnly:!0,dependencies:["subtitle","shareItemType","supportedTransports","accessDropdownValue"],get:Object.assign(function(){var e=this.supportedTransports,t=this.subtitle;if(e&&e.length>0){if(null===t){var n="CKSharing.AddParticipants.Subtitle.";return 1===e.length?(n+="SingleTransport.",n+=A.a.PUBLIC===this.accessDropdownValue?"Public.":"Private.",n+=this.shareItemType):n+="MultipleTransports",_.d(n)}return t}return""},{__CW__getter:function(e,t,n,i){var r=this.supportedTransports,a=this.subtitle;if(r&&r.length>0){if(null===a){var s="CKSharing.AddParticipants.Subtitle.";return 1===r.length?(s+="SingleTransport.",s+=A.a.PUBLIC===i.internalGet(this,t[3+n])?"Public.":"Private.",s+=i.internalGet(this,t[1+n])):s+="MultipleTransports",_.d(s)}return a}return""}})}),headerView:d.b({defaultValue:E.b($t),downstreamBindings:{title:"(owner).title",subtitle:"(owner).subtitleString"}}),busyDescription:d.b(_.d("CKSharing.Busy.Loading.Description")),isLoading:d.b(!1),busyView:d.b({readOnly:!0,get:function(){return Kt.create()},downstreamBindings:{isVisible:"(owner).isLoading"}}),shouldShowSendingSpinner:d.b({defaultValue:!1,type:Boolean}),isOffline:d.b(G.a.sharedInstance.bindingFor("isOffline")),offlineView:d.b({readOnly:!0,get:function(){return Qt.create()},downstreamBindings:{isVisible:"(owner).isOffline"}}),accessDropdownValue:d.b(),permissionDropdownValue:d.b(),summaryTextNoOption:d.b(),summaryTextWOption:d.b(),shouldShowUserName:d.b(),loggedInUserInfo:d.b(),transport:d.b(),isSavingShare:d.b(!1),showPermissionsDropdown:d.b(!0),primaryInteractionMode:d.b(),shareButtonTitle:d.b(),supportedAccess:d.b(),supportedPermissions:d.b(),hostedByCloudOSOne:d.b(!0),staticMembers:{__QUALIFIED_CLASS_NAME__:"AddParticipantsViewBase"}}),Yt=n(1197),Zt=L.a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isHidden",truevalue:"hidden",attributes:{}}]}},__QUALIFIED_CLASS_NAME__:"CancelButton"},ariaLabel:_.d("CKSharing.AddParticipants.CancelButton.Title"),title:_.d("CKSharing.AddParticipants.CancelButton.Title"),action:"didCancelAddParticipant",keyEquivalent:ee.a.ESC,additionalClassNames:y.a(["cancel-button"])}),Jt={TOUCH_PRIMARY:18,MOUSE_PRIMARY:24};Object.freeze(Jt);var Xt=L.a.extend({triggerButtonAction:function(){var e=arguments,t=document.createElement("a");t.target="_top",t.href=this.link,t.click(),this.__s._$4R$triggerButtonAction.apply(this,e)},link:void 0,__superMap:{_$4R$triggerButtonAction:"triggerButtonAction"},staticMembers:{__QUALIFIED_CLASS_NAME__:"AnchorButton"}}),en=M.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"footer",children:[{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"spinnerView"},{type:"VIEWOUTLET",tagname:"view",name:"cancelButton"},{type:"ELEMENT",tagname:"span",classes:["divider"]},{type:"VIEWOUTLET",tagname:"view",name:"shareButton"},{type:"VIEWOUTLET",tagname:"view",name:"doneButton"}],classes:["button-container"],name:"buttonContainer"},{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"span",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"username",attributes:{}}]}],classes:["username",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"usernameIsHidden",truevalue:"",falsevalue:"hidden",attributes:{}}]}]},__QUALIFIED_CLASS_NAME__:"AddParticipantsFooterViewForMouse"},spinnerView:d.b({downstreamBindings:{isVisible:"(owner).shouldShowSendingSpinner"},defaultValue:E.b(zt.a.extend({primaryInteractionMode:d.b(),size:Jt.MOUSE_PRIMARY}))}),shareButtonTitle:d.b({type:String}),shareButtonIsHidden:d.b({defaultValue:!1,type:Boolean}),shareButtonIsDisabled:d.b({defaultValue:!0,type:Boolean}),cancelButtonIsDisabled:d.b({defaultValue:!0,type:Boolean}),cancelButtonIsHidden:d.b({defaultValue:!1,type:Boolean}),doneButtonIsHidden:d.b({defaultValue:!1,type:Boolean}),username:d.b({type:String}),usernameIsHidden:d.b({defaultValue:!1,type:Boolean}),shouldShowSendingSpinner:d.b({defaultValue:!1,type:Boolean}),mailToLink:d.b(),sendShareButton:d.b({defaultValue:E.b(L.a.extend({ariaLabel:_.d("CKSharing.AddParticipants.OKButton.Share.Title"),action:"sendShare",staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isHidden",truevalue:"hidden",attributes:{}}]}}},additionalClassNames:y.a(["primary"])})),downstreamBindings:{isHidden:"(owner).shareButtonIsHidden",isDisabled:"(owner).shareButtonIsDisabled",title:"(owner).shareButtonTitle"}}),mailToButton:d.b({readOnly:!0,dependencies:["mailToLink"],get:Object.assign(function(){var e=this;return Xt.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isHidden",truevalue:"hidden",attributes:{}}]}}},ariaLabel:_.d("CKSharing.AddParticipants.OKButton.Share.Title"),action:"mailToLinkClicked",additionalClassNames:y.a(["primary"])}).create({link:this.mailToLink,target:{mailToLinkClicked:function(){return e.sendEvent("didCompleteSendMessage")}},isDisabled:this.bindingFor("shareButtonIsDisabled"),isHidden:this.bindingFor("shareButtonIsHidden"),title:this.bindingFor("shareButtonTitle")})},{__CW__getter:function(e,t,n,i){var r=this;return Xt.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isHidden",truevalue:"hidden",attributes:{}}]}}},ariaLabel:_.d("CKSharing.AddParticipants.OKButton.Share.Title"),action:"mailToLinkClicked",additionalClassNames:y.a(["primary"])}).create({link:i.internalGet(this,t[0+n]),target:{mailToLinkClicked:function(){return r.sendEvent("didCompleteSendMessage")}},isDisabled:this.bindingFor("shareButtonIsDisabled"),isHidden:this.bindingFor("shareButtonIsHidden"),title:this.bindingFor("shareButtonTitle")})}})}),transport:d.b(),shareButton:d.b({readOnly:!0,dependencies:["mailToLink","transport"],get:function(){var e=this.mailToLink,t=this.transport;return Yt.a(e)||t!==R.a.NATIVE_MAIL?this.sendShareButton:this.mailToButton}}),doneButton:d.b({defaultValue:E.b(L.a.extend({ariaLabel:_.d("CKSharing.Dialog.Button.Done"),title:_.d("CKSharing.Dialog.Button.Done"),action:"didCancelAddParticipant",isVisible:d.b(),staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isVisible",truevalue:"",falsevalue:"hidden",attributes:{}}]}}}})),downstreamBindings:{isVisible:"(owner).doneButtonIsHidden"}}),cancelButton:d.b({defaultValue:E.b(Zt),downstreamBindings:{isHidden:"(owner).cancelButtonIsHidden",isDisabled:"(owner).cancelButtonIsDisabled"}})}),tn=n(505),nn=qt.extend({init:function(e,t){this.shouldHideAddParticipantsSummary=e,this.__s._$Cz$init.call(this,t)},shouldHideAddParticipantsSummary:d.b(!1),staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"headerView"},{type:"VIEWOUTLET",tagname:"view",name:"busyView"},{type:"VIEWOUTLET",tagname:"view",name:"offlineView"},{type:"VIEWOUTLET",tagname:"view",name:"transportsView"},{type:"VIEWOUTLET",tagname:"view",name:"invitationsTextField"},{type:"VIEWOUTLET",tagname:"view",name:"accessControlsSection"},{type:"VIEWOUTLET",tagname:"view",name:"footerView"}],classes:["workflow-screen","add-participants-view","sharing-dialog",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isOffline",truevalue:"is-offline",attributes:{}}]},__QUALIFIED_CLASS_NAME__:"AddParticipantsViewForMouse"},transportsView:d.b({defaultValue:E.b(tn.a),readOnly:!0,downstreamBindings:{isLoading:"(owner).isLoading",value:"(owner).transport",segments:"(owner).transportItemsForDisplay",isDisabled:"(owner).isSavingShare"}}),accessControlsSection:d.b({readOnly:!0,defaultValue:E.b(x.extend({isToggleEnabled:!1})),downstreamBindings:{shouldHideAddParticipantsSummary:"(owner).shouldHideAddParticipantsSummary",isDisabled:"(owner).isSavingShare",accessDropdownValue:"(owner).accessDropdownValue",permissionDropdownValue:"(owner).permissionDropdownValue",isLoading:"(owner).isLoading",showPermissionsDropdown:"(owner).showPermissionsDropdown",supportedAccess:"(owner).supportedAccess",supportedPermissions:"(owner).supportedPermissions",summaryTextNoOption:"(owner).summaryTextNoOption",summaryTextWOption:"(owner).summaryTextWOption",transport:"(owner).transport"}}),shareButtonIsDisabled:d.b({dependencies:["transport","accessDropdownValue","isSavingShare","isLoading","sharePopoverIsActive","invitationsTextField.value","invitationsTextField.hasInvalidTokens"],readOnly:!0,get:Object.assign(function(){if(this.isSavingShare||this.isLoading||this.sharePopoverIsActive)return!0;var e=[R.a.COPY_LINK,R.a.NATIVE_MAIL];if(this.accessDropdownValue!==A.a.PRIVATE||!e.includes(this.transport))return!1;var t=this.invitationsTextField;return!(!t||t.value&&t.hasAtLeastOneValidToken)},{__CW__getter:function(e,t,n,i){if(i.internalGet(this,t[2+n])||i.internalGet(this,t[3+n])||i.internalGet(this,t[4+n]))return!0;var r=[R.a.COPY_LINK,R.a.NATIVE_MAIL];if(i.internalGet(this,t[1+n])!==A.a.PRIVATE||!r.includes(i.internalGet(this,t[0+n])))return!1;var a=this.invitationsTextField;return!(!a||a.value&&a.hasAtLeastOneValidToken)}})}),isCancelButtonDisabled:d.b({dependencies:["isSavingShare","sharePopoverIsActive"],readOnly:!0,get:Object.assign(function(){return this.isSavingShare||this.sharePopoverIsActive},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])||i.internalGet(this,t[1+n])}})}),username:d.b({readOnly:!0,dependencies:["loggedInUserInfo"],get:Object.assign(function(e){var t=this.loggedInUserInfo;if(t){var n=t.displayName,i=t.appleId;if(n&&i)return _.d("CKSharing.AddParticipants.CurrentlyLoggedUser.NameAndAppleId",{displayName:n,appleId:i});if(n||i)return _.d("CKSharing.AddParticipants.CurrentlyLoggedUser.NameOrAppleId",{nameOrAppleId:n||i})}return""},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);if(r){var a=r.displayName,s=r.appleId;if(a&&s)return _.d("CKSharing.AddParticipants.CurrentlyLoggedUser.NameAndAppleId",{displayName:a,appleId:s});if(a||s)return _.d("CKSharing.AddParticipants.CurrentlyLoggedUser.NameOrAppleId",{nameOrAppleId:a||s})}return""}})}),footerView:d.b({defaultValue:E.b(en),downstreamBindings:{shareButtonTitle:"(owner).shareButtonTitle",shareButtonIsHidden:"(owner).isOffline",shareButtonIsDisabled:"(owner).shareButtonIsDisabled",doneButtonIsHidden:"(owner).isOffline",username:"(owner).username",usernameIsHidden:"(owner).shouldShowUserName",cancelButtonIsDisabled:"(owner).isCancelButtonDisabled",cancelButtonIsHidden:"(owner).isOffline",shouldShowSendingSpinner:"(owner).shouldShowSendingSpinner",transport:"(owner).transport"}}),_updateLayout:T.f({inputs:["isAttached","transport","transportsView.transportsSegmentedViewDidLayoutButtons","shouldShowParticipantsEntry"],callback:function(e,t,n){if(e){var i=this.element,r=this.invitationsTextField;if(void 0!==l.a(n,"context")){var a=i.style,s=r.element.style;a.maxWidth="",s.maxWidth="0px";var o=i.clientWidth;"number"==typeof o&&0!==o&&(a.maxWidth=o+"px"),s.maxWidth=""}this.sendEvent("contentDidResize"),t===R.a.COPY_LINK&&r&&r.focus()}}}),__superMap:{_$Cz$init:"init"}}),rn=(n(925),M.a.extend({staticMembers:{template:{type:"MULTIVIEWOUTLET",tagname:"views",name:"buttons",attributes:{tagName:"footer"}},__QUALIFIED_CLASS_NAME__:"AddParticipantsFooterViewForTouch"},transportItemsForDisplay:d.b(),shouldTransportButtonsBeDisabled:d.b(),buttons:d.b({readOnly:!0,dependencies:["transportItemsForDisplay","mailToLink"],get:Object.assign(function(){var e=this,t=J.b.create(),n=this.transportItemsForDisplay;if(n&&n.length>0){for(var i=0,r=n.length;i<r;i++){var a=n.objectAt(i),s=void 0;if(a.value!==R.a.NATIVE_MAIL||Yt.a(this.mailToLink))s=L.a.create({additionalClassNames:y.a([a.value.toLowerCase()]),title:a.title,action:"setTransportAndSendShare",isDisabled:m.c("parent.shouldTransportButtonsBeDisabled"),context:a.value});else{var o=this.mailToLink;s=Xt.create({link:o,additionalClassNames:y.a([a.value.toLowerCase()]),title:_.d("ConfirmNativeMail.ConfirmButton"),action:"notificationDidComplete",target:{notificationDidComplete:function(){return e.sendEvent("didCompleteSendMessage")}},isDisabled:m.c("parent.shouldTransportButtonsBeDisabled")})}t.push(s)}t.push(Zt.create())}return t},{__CW__getter:function(e,t,n,i){var r=this,a=J.b.create(),s=i.internalGet(this,t[0+n]);if(s&&s.length>0){for(var o=0,c=s.length;o<c;o++){var l=s.objectAt(o),u=void 0;if(l.value!==R.a.NATIVE_MAIL||Yt.a(i.internalGet(this,t[1+n])))u=L.a.create({additionalClassNames:y.a([l.value.toLowerCase()]),title:l.title,action:"setTransportAndSendShare",isDisabled:m.c("parent.shouldTransportButtonsBeDisabled"),context:l.value});else{var d=i.internalGet(this,t[1+n]);u=Xt.create({link:d,additionalClassNames:y.a([l.value.toLowerCase()]),title:_.d("ConfirmNativeMail.ConfirmButton"),action:"notificationDidComplete",target:{notificationDidComplete:function(){return r.sendEvent("didCompleteSendMessage")}},isDisabled:m.c("parent.shouldTransportButtonsBeDisabled")})}a.push(u)}a.push(Zt.create())}return a}})}),mailToLink:d.b()})),an=qt.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"headerView"},{type:"VIEWOUTLET",tagname:"view",name:"busyView"},{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"sendingSpinnerView"},{type:"ELEMENT",tagname:"span",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"spinnerLabel",attributes:{}}]}],classes:["sending-spinner-wrapper"]},{type:"VIEWOUTLET",tagname:"view",name:"offlineView"},{type:"VIEWOUTLET",tagname:"view",name:"footerView"}],classes:["workflow-screen","add-participants-view","sharing-dialog",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isOffline",truevalue:"is-offline",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"shouldShowSendingSpinner",truevalue:"is-sending-share",attributes:{}}]},__QUALIFIED_CLASS_NAME__:"AddParticipantsViewForTouch"},sendingSpinnerView:d.b({downstreamBindings:{isVisible:"(owner).shouldShowSendingSpinner"},defaultValue:E.b(zt.a.extend({additionalClassNames:["sending-spinner"],primaryInteractionMode:d.b(),size:Jt.TOUCH_PRIMARY}))}),spinnerLabel:d.b(_.d("CKSharing.Sending.Description")),shouldTransportButtonsBeDisabled:d.b({readOnly:!0,dependencies:["isLoading","isSavingShare"],get:Object.assign(function(){return this.isLoading||this.isSavingShare},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])||i.internalGet(this,t[1+n])}})}),footerView:d.b({defaultValue:E.b(rn),downstreamBindings:{transportItemsForDisplay:"(owner).transportItemsForDisplay",shouldTransportButtonsBeDisabled:"(owner).shouldTransportButtonsBeDisabled"}})}),sn=n(97),on=n(101),cn=n(100),ln="https",un="www.icloud.com",dn="share";function hn(e,t){var n=e.shortGUID,i=t&&t.shareUrl;if(Yt.a(i)){var r=e.displayedHostname||un,a=t&&t.shareUrlNamespace||dn;i=ln+"://"+r+"/"+encodeURIComponent(a)}var s=/%\{shortGUID\}/.test(i),o=i.indexOf("#")>=0;if(s)i=at.a(i,{shortGUID:n});else{var c=i.length-1,l=i.charAt(c);i+="#"===l||"/"===l?n:"/"+n}var u=t&&t.shareUrlDescription;if(!Yt.a(u)&&!o){var d=encodeURIComponent(u);i+="#"+(d=(d=d.replace(/_/g,"%5F")).replace(/%20/g,"_"))}return i}var pn=n(1180),fn={pages:"CKSharing.iWork.Pages",keynote:"CKSharing.iWork.Keynote",numbers:"CKSharing.iWork.Numbers"};function gn(e,t){var n=e.shareItemType,i="";if("CloudKit"!==n){var r=["CKSharing.AddParticipants.Email.Bodyprefix"];r.push(t.loggedInUserCanEditShare?"OwnerAdmin":"Participant"),r.push(n),i=_.d(r.join("."))}return i}function mn(e){var t=e.shareTitle;return t?_.d("CKSharing.AddParticipants.Email.Subject.ShareTitle",{shareTitle:t}):_.d("CKSharing.AddParticipants.Email.Subject.AppName",{appName:e.appName})}function vn(e,t,n){var i=hn(t,e),r=R.a.NATIVE_MAIL;return e.provideBodyForTransport(r,i).then(function(e){return{share:t,unencodedBody:e}}).then(function(t){var n=t.newShare;return void 0!==t.unencodedBody?t:function(e,t){var n=gn(e,t)+"\n"+hn(t,e);return a.a.resolve(n)}(e,n).then(function(e){return{newShare:n,unencodedBody:e}})}).then(function(t){var n=t.unencodedBody;return e.provideSubjectForMail().then(function(e){return{unencodedBody:n,customSubject:e}})}).then(function(t){var i=t.customSubject,r=t.unencodedBody;return void 0===i&&(i=mn(e)),"mailto:"+n.filter(function(e){return o.a(e.userIdentity.emailAddress)}).map(function(e){return e.displayName+"<"+e.userIdentity.emailAddress+">"}).join(",")+"?subject="+i+"&body="+encodeURIComponent(r)})}var _n={mixinDependencies:[f.a,sn.b],invitees:d.b(),transport:d.b(),sendShare:g.a.define()},bn=sn.a.extend(_n,{preselectedTransport:d.b(),operationType:sn.c.ADD_PARTICIPANTS,invitees:d.b(m.c("view.invitees")),transport:d.b({dependencies:["settings.supportedTransports","preselectedTransport"],writeDependencies:[],get:Object.assign(function(e){if(e)return e;var t=R.a.SCHOOLWORK,n=R.a.NATIVE_MAIL,i=R.a.WEB_MAIL,r=R.a.COPY_LINK,a=v.a.create(this.settings.supportedTransports),s=a.has(t)?t:a.has(n)?n:a.has(i)?i:r,o=this.preselectedTransport;return o?(a.has(o)||c.b("An unsupported transport was provided for preselectedTransport. Use `CKSharing.Service.getSupportedTransports()` to know which transports can be chosen from."),o):s},{__CW__getter:function(e,t,n,i){if(e)return e;var r=R.a.SCHOOLWORK,a=R.a.NATIVE_MAIL,s=R.a.WEB_MAIL,o=R.a.COPY_LINK,l=v.a.create(i.internalGetPath(this,t[0+n])),u=l.has(r)?r:l.has(a)?a:l.has(s)?s:o,d=i.internalGet(this,t[1+n]);return d?(l.has(d)||c.b("An unsupported transport was provided for preselectedTransport. Use `CKSharing.Service.getSupportedTransports()` to know which transports can be chosen from."),d):u}})}),sharePopoverIsActive:d.b(),showPermissionsDropdown:d.b({readOnly:!0,dependencies:["settings.supportedPermissions","share.isPublic"],get:Object.assign(function(){var e=this.settings.supportedPermissions;return!!(e&&e.length>1)&&!this.share.isPublic},{__CW__getter:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return!!(r&&r.length>1)&&!i.internalGetPath(this,t[1+n])}})}),shouldShowSendingSpinner:d.b({defaultValue:!1}),shouldShowUserName:d.b({readOnly:!0,dependencies:["share.loggedInUserCanEditShare","share.effectiveAccess"],get:Object.assign(function(){return this.share.loggedInUserCanEditShare&&this.share.effectiveAccess===A.a.PRIVATE},{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])&&i.internalGetPath(this,t[1+n])===A.a.PRIVATE}})}),createView:function(){var e=this.settings,t=e.primaryInteractionMode,n=e.shouldHideAddParticipantsSummary;return t===cn.a.TOUCH?an.create():nn.create(n)},view:d.b({downstreamBindings:{accessDropdownValue:"(owner).share.effectiveAccess",isLoading:"(owner).isLoading",isSavingShare:"(owner).isSavingShare",CustomLoadMembershipInfoHandlerClass:"(owner).settings.CustomLoadMembershipInfoHandlerClass",CustomAutocompleteDataSourceClass:"(owner).settings.CustomAutocompleteDataSourceClass",logService:"(owner).settings.logService",permissionDropdownValue:"(owner).permissionValueForAddingParticipants",summaryTextNoOption:"(owner).summaryTextNoOption",summaryTextWOption:"(owner).summaryTextWOption",showPermissionsDropdown:"(owner).showPermissionsDropdown",supportedPermissions:"(owner).settings.supportedPermissions",supportedTransports:"(owner).settings.supportedTransports",transport:"(owner).transport",loggedInUserInfo:"(owner).loggedInUserInfo",title:"(owner).shareSpecificPaneTitle",shareButtonTitle:"(owner).shareSpecificShareButtonTitle",shouldShowUserName:"(owner).shouldShowUserName",sharePopoverIsActive:"(owner).sharePopoverIsActive",primaryInteractionMode:"(owner).settings.primaryInteractionMode",shouldShowSendingSpinner:"(owner).shouldShowSendingSpinner",shareItemType:"(owner).settings.shareItemType",hostedByCloudOSOne:"(owner).settings.hostedByCloudOSOne"}}),shareSpecificPaneTitle:d.b({readOnly:!0,dependencies:["share","share.isPublic","settings","settings.sendLinkPaneTitle","settings.addParticipantsPaneTitle"],get:Object.assign(function(){var e=this.share,t=this.settings;return t&&e?e.isPublic?t.sendLinkPaneTitle:t.addParticipantsPaneTitle:""},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[2+n]);return a&&r?r.isPublic?a.sendLinkPaneTitle:a.addParticipantsPaneTitle:""}})}),shareSpecificShareButtonTitle:d.b({readOnly:!0,dependencies:["share","share.isPublic"],get:Object.assign(function(){var e=this.share;return sn.c.INITIATE_SHARE!==this.operationType&&e&&e.isPublic?_.d("CKSharing.Dialog.Button.Continue"):_.d("CKSharing.AddParticipants.OKButton.Share.Title")},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return sn.c.INITIATE_SHARE!==this.operationType&&r&&r.isPublic?_.d("CKSharing.Dialog.Button.Continue"):_.d("CKSharing.AddParticipants.OKButton.Share.Title")}})}),loggedInUserInfo:d.b({readOnly:!0,dependencies:["settings.loggedInUserIdentity"],get:Object.assign(function(){var e=this.getPath("settings.loggedInUserIdentity");if(e){var t,n=e.givenName,i=e.familyName;return(n||i)&&(t=p.a({givenName:n,familyName:i})),{displayName:t,appleId:e.appleId}}},{__CW__getter:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);if(r){var a,s=r.givenName,o=r.familyName;return(s||o)&&(a=p.a({givenName:s,familyName:o})),{displayName:a,appleId:r.appleId}}}})}),toggleSpinner:function(){this.shouldShowSendingSpinner=!this.shouldShowSendingSpinner},sendShare:function(e){var t=this,n=this._state,i=void 0;switch(this.toggleSpinner(),this.transport){case R.a.WEB_MAIL:this.sendEvent("shareByWebMail"),i=a.a.resolve();break;case R.a.SCHOOLWORK:this.sendEvent("shareBySchoolwork"),i=a.a.resolve();break;case R.a.NATIVE_MAIL:i=this.awaitPendingTokenValidations().then(function(e){return e.ok?t.shareByNativeMail(e):a.a.resolve(e)});break;case R.a.COPY_LINK:i=this.awaitPendingTokenValidations().then(function(e){return e.ok?t.shareByCopyingLink():a.a.resolve(e)});break;default:throw new Error("Unrecognized transport for AddParticipantsViewController: "+this.transport,{viewController:this,transport:this.transport})}return i.finally(function(){t._state=n,t.toggleSpinner()}).then(function(e){return e&&e.ok&&t.transport===R.a.NATIVE_MAIL&&t.sendEvent("didCompleteSendMessage"),e})},setTransportAndSendShare:function(e){this.transport=e,this.sendShare()},shareByNativeMail:function(e){var t=this,n=this.share,i=this.invitees,r="INVITE_TO_";n.isPrivate?r+="PRIVATE.VIA_EMAIL."+(1===i.length?"TO_PERSON":"TO_PEOPLE"):r+="PUBLIC";var s=this.settings,c={operationType:r,appName:s.shareItemType,interactionMode:s.primaryInteractionMode};return this._state=sn.d.LOADED_SAVING,n.isPrivate&&n.addParticipantsIgnoringDupes(i,this.permissionValueForAddingParticipants),this.saveShare(!0).then(function(e){return vn(s,e,i)}).then(function(i){var r=s.shareItemType,c=o.a(b.a)?s.primaryInteractionMode===cn.a.TOUCH?b.a.ACTION_SHEET:b.a.ALERT:void 0,l=a.a.create(),u={notificationDidComplete:function(){t.sendEvent("softShow"),l.resolve()}};return s.notificationService.info("ConfirmNativeMail",{interactionMode:s.primaryInteractionMode,messageLocSuffix:"Message."+r,descriptionLocSuffix:"Description",primaryButtonConfig:Xt.create({link:i,additionalClassNames:y.a(["alert-button-container"]),title:_.d("ConfirmNativeMail.ConfirmButton"),action:"notificationDidComplete",target:u}),alternateButtonConfig:{title:_.d("ConfirmNativeMail.CloseButton"),action:"notificationDidComplete",target:u},alertStyle:c}),t.sendEvent("softHide"),t.sendEvent("didUpdateShareRecord",n,!0),l.then(function(){return e})}).catch(Object(on.a)(c,s.notificationService,s.logService)).finally(function(){t._state=sn.d.LOADED})},shareByCopyingLink:function(){var e=this,t=this.settings,n=t.shareItemType,i={operationType:"INVITE_TO_"+(this.share.isPublic?"PUBLIC":"PRIVATE.VIA_UNKNOWN"),appName:n,interactionMode:t.primaryInteractionMode};return this._state=sn.d.LOADED_SAVING,this.saveShare(!0).then(function(t){return e.sendEvent("didShareByCopyingLink"),t}).catch(Object(on.a)(i,t.notificationService,t.logService)).finally(function(){e._state=sn.d.LOADED})},saveShare:function(e){var t=arguments,n=this.invitees,i=this.share,r=this.permissionValueForAddingParticipants;return i.isPrivate&&i.addParticipantsIgnoringDupes(n,r),this.isShareSignificantlyDirty(i,this.ioService.mostRecentShareDataHashFromServer)?this.__s._$4V9$saveShare.apply(this,t):a.a.resolve(i)},awaitPendingTokenValidations:function(){var e=this,t=this.share,n=this.getPath("view.invitationsTextField");return t.isPublic||this.validateInviteesToAddToShare(n.invitees)?this.waitForAutocompleteHasPendingTokensToClear(n).catch(function(t){return e.showPendingValidationFailAlert(),O.create({status:400})}).then(function(){return n.hasInvalidTokens?(e.showPendingValidationFailAlert(),O.create({status:400})):O.create({status:200})}):a.a.resolve(O.create({status:400}))},setEffectivePermission:function(e){this.permissionValueForAddingParticipants=e},waitForAutocompleteHasPendingTokensToClear:function(e){if(!e.hasPendingTokens)return a.a.resolve();var t=a.a.create(),n=e.observe("hasPendingTokens",function(e){e||(t.resolve(),n&&n.disconnect())});return t},showPendingValidationFailAlert:function(){var e,t=this.getPath("view.invitationsTextField").tokenViews,n=t&&t.length||0,i=0;return t&&t.forEach(function(t){t.isInvalid&&(++i,e=t.value)}),this.displayInvalidInviteesAlert(i,n,e)},isShareSignificantlyDirty:function(e,t){var n=e.owner&&e.owner.isMe?null:["fields"];return I.a(t,e.getDataHash(),n)},__superMap:{_$4V9$saveShare:"saveShare"},staticMembers:{__QUALIFIED_CLASS_NAME__:"AddParticipantsViewController"}});var yn=n(788),In=n(336),wn=n(267);function Sn(e,t){return t.map(e).find(function(e,n){return e!==t[n]})}var Cn=yn.a.extend({viewClass:In.a,view:d.b({downstreamBindings:{subtitle:"(owner).subtitle",title:"(owner).title",url:"(owner).url",shouldHideCopyLinkButton:"(owner).shouldHideCopyLinkButton"}}),permission:d.b(),_effectivePermission:d.b({dependencies:["permission","share.effectivePermission"],readOnly:!0,get:Object.assign(function(e){return function(e){for(var t=e.length,n=0;n<t;n++){var i=e[n];if(i)return i}}([this.permission,this.getPath("share.effectivePermission"),this.getPath("settings.defaultPermission")])},{__CW__getter:function(e,t,n,i){return function(e){for(var t=e.length,n=0;n<t;n++){var i=e[n];if(i)return i}}([i.internalGet(this,t[0+n]),i.internalGetPath(this,t[1+n]),this.getPath("settings.defaultPermission")])}})}),share:d.b(),settings:d.b(),subtitle:d.b({dependencies:["share.effectiveAccess","share.loggedInUserCanEditShare","share.owner","share.owner.displayName","_effectivePermission","settings.shareItemType"],readOnly:!0,get:Object.assign(function(){if("Photos"!==this.settings.shareItemType){var e=["CKSharing.AddParticipants.CopyLink"],t=this.share,n=this.settings,i=t.effectiveAccess,r=this._effectivePermission,a=this.share.loggedInUserCanEditShare;switch(e.push(a?"OwnerAdmin":"Participant"),e.push("Subtitle"),i){case A.a.PUBLIC:e.push("Public");break;case A.a.PRIVATE:e.push("Private");break;default:c.b("Unknown CKSharing.ACCESS type %{type}",{type:i})}if(a||t.isPublic)switch(r){case N.a.READ_ONLY:e.push("ReadOnly");break;case N.a.READ_WRITE:e.push("ReadWrite");break;case N.a.MIXED:e.push("Mixed");break;default:c.b("Unknown CKSharing.PERMISSIONS type %{type}",{type:r})}return e.push(n.shareItemType),a?_.d(e.join(".")):_.d(e.join("."),{ownerDisplayName:t.owner.displayName})}},{__CW__getter:function(e,t,n,i){if("Photos"!==i.internalGetPath(this,t[5+n])){var r=["CKSharing.AddParticipants.CopyLink"],a=this.share,s=this.settings,o=a.effectiveAccess,l=i.internalGet(this,t[4+n]),u=i.internalGetPath(this,t[1+n]);switch(r.push(u?"OwnerAdmin":"Participant"),r.push("Subtitle"),o){case A.a.PUBLIC:r.push("Public");break;case A.a.PRIVATE:r.push("Private");break;default:c.b("Unknown CKSharing.ACCESS type %{type}",{type:o})}if(u||a.isPublic)switch(l){case N.a.READ_ONLY:r.push("ReadOnly");break;case N.a.READ_WRITE:r.push("ReadWrite");break;case N.a.MIXED:r.push("Mixed");break;default:c.b("Unknown CKSharing.PERMISSIONS type %{type}",{type:l})}return r.push(s.shareItemType),u?_.d(r.join(".")):_.d(r.join("."),{ownerDisplayName:a.owner.displayName})}}})}),title:d.b({dependencies:["settings.shareItemType","share.loggedInUserCanEditShare"],readOnly:!0,get:Object.assign(function(){var e="CKSharing.AddParticipants.CopyLink",t=this.getPath("share.loggedInUserCanEditShare")?"OwnerAdmin":"Participant",n="Title",i=this.getPath("settings.primaryInteractionMode")===cn.a.TOUCH?"Compact":"Expanded",r=this.getPath("settings.shareItemType"),a=[e,t,n,r,i].join("."),s=[e,t,n,r].join(".");return Sn(_.d,[a,s])},{__CW__getter:function(e,t,n,i){var r="CKSharing.AddParticipants.CopyLink",a=i.internalGetPath(this,t[1+n])?"OwnerAdmin":"Participant",s="Title",o=this.getPath("settings.primaryInteractionMode")===cn.a.TOUCH?"Compact":"Expanded",c=i.internalGetPath(this,t[0+n]),l=[r,a,s,c,o].join("."),u=[r,a,s,c].join(".");return Sn(_.d,[l,u])}})}),url:d.b({dependencies:["share","settings"],readOnly:!0,get:Object.assign(function(){return hn(this.share,this.settings)},{__CW__getter:function(e,t,n,i){return hn(i.internalGet(this,t[0+n]),i.internalGet(this,t[1+n]))}})}),shouldHideCopyLinkButton:d.b({dependencies:["url"],readOnly:!0,get:function(){return!Object(wn.b)()}}),didAttach:function(){var e=arguments;this.__s._$1f4$didAttach.apply(this,e),this.view.selectURL(),this.sendEvent("contentDidResize")},copyLinkAction:function(e){return Object(wn.a)(e.url),this.close()},close:function(){this.blur(),this.sendEvent("didCompleteCopyLink")},__superMap:{_$1f4$didAttach:"didAttach"},staticMembers:{__QUALIFIED_CLASS_NAME__:"CopyLinkViewController"}}),On=n(507),An=n(1187),En={up:0,down:1};Object.freeze(En);var Tn=n(415),Mn=(n(921),M.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"modalBackground"},{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"contentView"}],name:"contentWrapper",classes:["popup-content"]}],classes:["cw-popup-view","cksharing-popup-view"]},__QUALIFIED_CLASS_NAME__:"PopupView"},shouldShowModalBackground:d.b(!0),modalBackground:d.b({dependencies:["shouldShowModalBackground"],writeDependencies:[],defaultValue:E.b(M.a,{additionalClassNames:y.a(["modal-background"])}),get:Object.assign(function(e){return this.shouldShowModalBackground?e:null},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?e:null}}),set:function(e){return e}}),isFocusable:!0})),Dn=(n(919),Mn.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"VIEWOUTLET",tagname:"view",name:"uilessSpinnerView"}],classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isTouchInteractionStyle",truevalue:"ck-sharing-touch-style",falsevalue:"ck-sharing-mouse-style",attributes:{}}]}},__QUALIFIED_CLASS_NAME__:"WorkflowPopupView"},additionalClassNames:y.a(["workflow-popup-view"]),isTouchInteractionStyle:d.b({dependencies:["primaryInteractionMode"],readOnly:!0,get:Object.assign(function(){return this.primaryInteractionMode===cn.a.TOUCH},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])===cn.a.TOUCH}})}),primaryInteractionMode:d.b({readOnly:!0,defaultValue:cn.a.MOUSE,get:function(e){return e||cn.a.MOUSE}}),uilessSpinnerView:d.b({readOnly:!0,strong:!0,dependencies:["uilessSpinnerNeedLevel"],get:Object.assign(function(){return this.uilessSpinnerNeedLevel?zt.a.create({size:36,color:"white"}):void 0},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?zt.a.create({size:36,color:"white"}):void 0}})}),uilessSpinnerNeedLevel:d.b(0)})),Ln=Tn.a.extend({delegate:null,viewClass:Dn,view:d.b({downstreamBindings:{primaryInteractionMode:"(owner).contentController.settings.primaryInteractionMode"}}),softHide:function(){this.view.element.style.display="none"},softShow:function(){this.view.element.style.display=""},dragOver:function(e){e.preventDefault()},defaultFocusChild:m.c("contentController"),showViewController:function(e){this.contentController=e,this._appendedContentController=e},_appendedContentControllerDidChange:T.f("_appendedContentController.isAttached",function(e){e&&this.sendEvent("contentDidResize")}),workflowDesiresUilessSpinner:function(){this.view.uilessSpinnerNeedLevel++},workflowNoLongerDesiresUilessSpinner:function(){this.view.uilessSpinnerNeedLevel=Math.max(0,this.view.uilessSpinnerNeedLevel-1)},staticMembers:{__QUALIFIED_CLASS_NAME__:"WorkflowPopupViewController"}}),Nn=Ln.extend({viewClass:y.a({additionalClassNames:y.a(["schoolwork-compose"])}),didCompleteSchoolwork:function(){this.delegate.didCompleteSchoolwork(),this.animateOffScreen(En.up)},didCancelSchoolwork:function(){this.delegate.didCancelSchoolwork(),this.animateOffScreen(En.down)},animateOffScreen:function(e){var t=this.getPath("view.element"),n=t.classList;n?(e===En.up?n.add("is-completing"):n.add("is-canceling"),An.a(t,"transitionend",this.hide.bind(this))):this.hide()},staticMembers:{__QUALIFIED_CLASS_NAME__:"SchoolworkComposePopupViewController"}}),Pn=n(1204),Rn=(n(957),yn.a.extend({viewClass:M.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"hosted-schoolwork-view"}],classes:["schoolwork-share-view"]}}}),schoolworkHostedApplicationViewController:Pn.b({viewOutlet:"hosted-schoolwork-view"}),settings:d.b(),becomeActive:function(){return this.schoolworkHostedApplicationViewController.becomeActive()},staticMembers:{__QUALIFIED_CLASS_NAME__:"SchoolworkComposeViewController"}})),xn=n(509),Fn=n(1192),kn=n(1174),Vn=yn.a.extend({viewClass:In.a,view:d.b({downstreamBindings:{subtitle:"(owner).subtitle",title:"(owner).title",url:"(owner).value",valueIsAlwaysLTR:"(owner).valueIsAlwaysLTR"}}),title:d.b(),subtitle:d.b(),value:d.b(),valueIsAlwaysLTR:d.b(),didAttach:function(){var e=arguments;this.__s._$ER$didAttach.apply(this,e),this.view.selectURL(),this.sendEvent("contentDidResize")},close:function(){this.sendEvent("didCompleteCopyText")},__superMap:{_$ER$didAttach:"didAttach"},staticMembers:{__QUALIFIED_CLASS_NAME__:"CopyTextViewController"}}),jn=n(167),Bn=n(337),Un=(n(923),M.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"activeView"}],classes:["workflow-view"]},className:"ck-sharing-workflow-view",__QUALIFIED_CLASS_NAME__:"WorkflowView"}})),Wn=yn.a.extend({permissionValueForAddingParticipants:d.b(),ioService:d.b({strong:!0}),cacheingProvideRootRecordFunction:null,share:d.b(),settings:d.b({type:jn.a}),state:w.c({readOnly:!0,get:function(){return this._promise.promiseState}}),showViewController:function(e){this.activeViewController=e},start:function(e){throw new Error("start not overriden")},complete:function(){this.didComplete()},didComplete:function(){var e=Fn.a(this.ioService.mostRecentShareDataHashFromServer);e&&delete e.currentUserParticipant,this._promise.resolve({share:e})},showCopyTextViewController:function(e,t,n,i){var r=Vn.create({title:e,subtitle:t,value:n,valueIsAlwaysLTR:i,viewClass:y.a({additionalClassNames:y.a(["workflow-view"])})}),a=Ln.extend({didCompleteCopyText:function(){this.hide()}}).create();a.showViewController(r),a.show()},cancel:function(e){this._promise.reject(e)},sharingUIIsReady:function(){var e=void 0,t=h.a.application;t&&(e=t.getPath("topFocusablePane.contentController.view.element"));var n=o.a(e)?[e.getBoundingClientRect()]:void 0;return Gn(this.settings,"sharingUIIsReady",n)},additionalButtonWasPressed:function(){return Gn(this.settings,"additionalButtonWasPressed",arguments)},viewClass:Un,activeViewController:Pn.a.define({viewOutlet:"activeView"}),init:function(e,t,n,i){if(!e||!e.constructor.kindOf||!e.constructor.kindOf(Bn.a))throw new Error("Dependency missing: CKSharing.WorkflowViewController.create() requires an object implementing `CKSharing.SharingIOServiceProtocol` as the first argument.");if(!t||"function"!=typeof t)throw new Error("Dependency missing: CKSharing.WorkflowViewController.create() requires a cacheingProvideRootRecordFunction function of type `() -> Promise<CKSharing.CKRecord>` as the second argument");if(!n||!n.constructor.kindOf||!n.constructor.kindOf(jn.a))throw new Error("Dependency missing: CKSharing.WorkflowViewController.create() requires a `CKSharing.Settings` object as the third argument.");this.ioService=e,this.cacheingProvideRootRecordFunction=t,this.settings=n,this.__s._$24b$init.call(this,i)},_promise:d.b({defaultValue:E.b(a.a)}),__superMap:{_$24b$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"WorkflowViewController"}}),Gn=function(e,t,n){var i=e&&e[t];if(!kn.a(i))return!1;i.apply(i,n)},Hn=Ln.extend({viewClass:y.a({additionalClassNames:y.a(["mail-compose"])}),didCompleteSendMessage:function(){this.beginAnimateOffScreen(En.up,this.delegate.didCompleteSendMessage.bind(this.delegate))},didCancelSendMessage:function(){this.delegate.didCancelSendMessage(),this.beginAnimateOffScreen(En.down)},beginAnimateOffScreen:function(e,t){var n=this.getPath("view.element"),i=n.classList;i?(e===En.up?i.add("is-sending"):i.add("is-canceling"),An.a(n,"transitionend",this.endAnimateOffScreen.bind(this,t))):this.endAnimateOffScreen(t)},endAnimateOffScreen:function(e){e&&e(),this.hide()},staticMembers:{__QUALIFIED_CLASS_NAME__:"MailComposePopupViewController"}}),$n=Wn.extend({preselectedTransport:d.b(),addParticipantsViewController:d.b({strong:!0,get:function(){return bn.create({ioService:this.bindingFor("ioService"),cacheingProvideRootRecordFunction:this.cacheingProvideRootRecordFunction,settings:this.bindingFor("settings"),share:this.bindingFor("share"),sharePopoverIsActive:this.bindingFor("sharePopoverIsActive"),permissionValueForAddingParticipants:this.bindingFor("permissionValueForAddingParticipants"),preselectedTransport:this.bindingFor("preselectedTransport")})}}),copyLinkViewController:d.b({strong:!0,get:function(){return Cn.create({settings:this.settings,share:this.share,permission:this.bindingFor("permissionValueForAddingParticipants")})}}),mailComposeViewController:d.b({strong:!0,get:function(){return On.a.create({ioService:this.bindingFor("ioService"),cacheingProvideRootRecordFunction:this.cacheingProvideRootRecordFunction,settings:this.bindingFor("settings"),share:this.bindingFor("share"),permissionValueForAddingParticipants:this.bindingFor("permissionValueForAddingParticipants"),originatorSharingWorkflowVC:this})}}),generateSchoolworkViewController:function(e,t){var n=xn.a.create(e,t);return Rn.create({schoolworkHostedApplicationViewController:n})},sharePopoverIsActive:d.b(),start:function(){var e=R.a.COPY_LINK,t=this.settings,n=t.supportedTransports,i=1===n.length&&n[0]===e,r=this.share;return r&&r.isPublic&&i?this.showCopyLinkViewController():this.showAddUI(),t.logService.recordStat("StartedAddParticipantsWorkflow",{appName:t.appName}),this._promise},didCompleteCopyLink:function(){this.didComplete()},didCancelAddParticipant:function(){this.didComplete()},didCancelSendMessage:function(){this.sharePopoverIsActive=!1},didShareByCopyingLink:function(){this.showCopyLinkViewController(),this.sendEvent("didUpdateShareRecord",this.share,!0)},didCompleteSendMessage:function(){this.sharePopoverIsActive=!1,this.didComplete()},didCompleteSchoolwork:function(){this.sharePopoverIsActive=!1,this.didComplete()},didCancelSchoolwork:function(){this.sharePopoverIsActive=!1,this.didComplete()},shareByWebMail:function(){var e=this;if(this.sharePopoverIsActive=!0,this.share.shortGUID)return this.showComposeMailViewController().then(function(){return e.share});var t=this.settings,n={provideRootRecordForUpdate:this.cacheingProvideRootRecordFunction,provideLatestRootRecordAfterUpdateConflict:t.provideLatestRootRecordAfterUpdateConflict,didUpdateRootRecord:t.didUpdateRootRecord},i={operationType:"INVITE_TO_PUBLIC",appName:t.shareItemType,interactionMode:t.primaryInteractionMode};return this.cacheingProvideRootRecordFunction().then(function(t){return e.ioService.createShortGUID(t,n)}).then(function(t){return e.share.shortGUID=t.shortGUID,e.showComposeMailViewController().then(function(){return e.share})}).catch(Object(on.a)(i,t.notificationService,t.logService))},shareBySchoolwork:function(){this.sharePopoverIsActive=!0,this.showSchoolworkViewController()},createComposeWindowConfiguration:function(){var e=this.settings,t=this.share,n=hn(t,e),i=R.a.WEB_MAIL;return e.provideBodyForTransport(i,n).then(function(n){var i=n;return void 0===i&&(i=function(e,t){var n=function(e,t,n,i,r,a){var s;s=n,n=(s=pn.b(s))&&s.length>0?s:null,e=pn.a(e);var o,c=(i=pn.b(i)).toLowerCase();if(i=c in fn?_.d(fn[c]):i,r)r=pn.a(r);else switch(a){case"pages":r="https://www.icloud.com/mail_resources/app_icons/pages@2x.png";break;case"numbers":r="https://www.icloud.com/mail_resources/app_icons/numbers@2x.png";break;case"keynote":r="https://www.icloud.com/mail_resources/app_icons/keynote@2x.png";break;case"notes":r="https://www.icloud.com/mail_resources/app_icons/notes@2x.png";break;default:r="https://www.icloud.com/mail_resources/app_icons/icloud@2x.png"}o=n?'<div style="color:#000000;font-weight:500;text-align:left;text-overflow:ellipsis;font-size:12px;word-wrap:break-word;overflow:hidden;"><a rel="nofollow" href="'+e+'" style="text-decoration: none" draggable="false"><font color="#000000">'+n+'</font></a></div><div style="color:#8E8E93;font-weight:400;text-align:left;text-overflow:ellipsis;font-size:11px;word-wrap:break-word;overflow:hidden;"><a rel="nofollow" href="'+e+'" style="text-decoration: none" draggable="false"><font color="#8E8E93">'+i+"</font></a></div>":'<div style="color:#000000;font-weight:500;text-align:left;text-overflow:ellipsis;font-size:12px;word-wrap:break-word;overflow:hidden;"><a rel="nofollow" href="'+e+'" style="text-decoration: none" draggable="false"><font color="#000000">'+_.d("CKSharing.RichLink.NoShareTitle",{appName:i})+"</font></a></div>";var l=_.a.sharedInstance.isRTL?"rtl":"ltr";return'<div dir="'+l+'"><div>'+t+'</div><a contenteditable="false" style="border-radius:5px;display:block;text-decoration:none;font-family:-apple-system, Helvetica, Arial, sans-serif;overflow:hidden;width:300px;" rel="nofollow" href="'+e+'" dir="'+l+'" role="button" draggable="false" width="300"><table style="table-layout:fixed;border-collapse:collapse;width:300px;background-color:#E5E6E9;font-family:-apple-system, Helvetica, Arial, sans-serif;" cellpadding="0" cellspacing="0" border="0" width="300"><tbody><tr><td vertical-align="center"><table bgcolor="#E5E6E9" cellpadding="0" cellspacing="0" width="300" style="font-family:-apple-system, Helvetica, Arial, sans-serif;table-layout:fixed;"><tbody><tr><td style="padding:9px 0px 9px 9px;" width="30"><a rel="nofollow" href="'+e+'" draggable="false"><img src="'+r+'" draggable="false" style="pointer-events:none !important;display:inline-block;width:30px;height:30px;vertical-align:middle;" width="30" height="30"></a></td><td style="padding:8px 0px 8px 0px;"><div style="max-width:100%;margin:0px 16px 0px 8px;overflow:hidden;">'+o+"</div></td></tr></tbody></table></td></tr></tbody></table></a></div>"}(hn(t,e),gn(e,t),e.shareTitle,e.appName,null,e.shareUrlNamespace);return'<div dir="'+(_.a.sharedInstance.isRTL?"rtl":"ltr")+'"><br><br></div>'+n}(e,t)),e.provideSubjectForMail().then(function(t){var n=t;return void 0===n&&(n=mn(e)),{subject:n,body:i,appName:e.appName}})})},showAddUI:function(){var e=this.addParticipantsViewController;this.showViewController(e),e.setUp()},showComposeMailViewController:function(){var e=this;return this.createComposeWindowConfiguration(this.share).then(function(t){var n=e.mailComposeViewController;n.setUp(),n.composeMail(t);var i=e.previousViewController=e.activeViewController;i&&(n.operationType=i.operationType);var r=Hn.create({delegate:e});r.showViewController(n);var a=h.a.application;a&&a.presentViewController(r)})},showCopyLinkViewController:function(){var e=this.copyLinkViewController;this.showViewController(e)},showSchoolworkViewController:function(){var e=this;this.cacheingProvideRootRecordFunction().then(function(t){var n=e.ioService.zoneID,i=e.generateSchoolworkViewController(n,t);i.becomeActive().catch(function(e){throw e});var r=Nn.create({contentController:i,delegate:e});r.showViewController(i);var a=h.a.application;a&&a.presentViewController(r)})},canonicalizePhoneNumbers:function(e,t){var n=this.settings;t.value=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i={lookupInfos:e.map(function(e){return{phoneNumber:e=Object(Wt.a)(e)}})};return(t?t(i):function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=Ue.a.create({serviceName:"cksharews",pathname:"/ws/v1/autocomplete/canonicalizePhoneNumbers"}),i=We.a.create({method:"POST",url:n,body:e,useCredentialsIfCrossOrigin:!0,timeout:6e4});if(!1===t){var r=i.url.toString();i=Tt.a.create(r,{method:"POST",body:e,useCredentialsIfCrossOrigin:!0,timeout:6e4})}return i}(i,n)).send().then(function(e){var t=e.body&&e.body.results;if(!t||!t.map)throw new Error("Server response to canonicalizePhoneNumbers returned data in an invalid format");return t.map(function(e){return e.canonicalized})})}(e,n.canonicalizePhoneNumberRequestGenerationFunction,n.hostedByCloudOSOne)},staticMembers:{__QUALIFIED_CLASS_NAME__:"AddParticipantsWorkflowViewController"}}),zn=M.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"header",children:[{type:"ELEMENT",tagname:"h1",children:[{type:"TEXT",data:" "}]}]},{type:"VIEWOUTLET",tagname:"view",name:"busyView"}],classes:["easy-share-view"]},__QUALIFIED_CLASS_NAME__:"EasyShareView"},busyView:d.b({readOnly:!0,get:function(){return Kt.create({isVisible:!0})}}),busyDescription:d.b(_.d("CKSharing.Busy.Loading.Description"))}),Kn=yn.a.extend({viewClass:zn,staticMembers:{__QUALIFIED_CLASS_NAME__:"EasyShareViewController"}}),Qn={staticMembers:{className:"initiate-share-view",templateExtensions:{root:{type:"ELEMENT",tagname:"ext",classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"shouldShowShareOptions",truevalue:"has-share-options",attributes:{}}]}}},additionalButtonTitle:d.b(),additionalClassNames:y.a(["sharing-dialog"]),shouldShowShareOptions:d.b({readOnly:!0,dependencies:["supportedAccess","supportedPermissions"],get:Object.assign(function(){var e=this.supportedAccess,t=this.supportedPermissions;if(e&&t)return e.length>1||t.length>1},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]);if(r&&a)return r.length>1||a.length>1}})}),accessControlsSection:d.b({defaultValue:E.b(x.extend({isToggleEnabled:!0})),downstreamBindings:{additionalButtonTitle:"(owner).additionalButtonTitle"}})},qn=nn.extend({mixinDependencies:[Qn],staticMembers:{__QUALIFIED_CLASS_NAME__:"InitiateShareViewForMouse"}}),Yn=an.extend({mixinDependencies:[Qn],staticMembers:{__QUALIFIED_CLASS_NAME__:"InitiateShareViewForTouch"}}),Zn=bn.extend({operationType:sn.c.INITIATE_SHARE,showPermissionsDropdown:d.b({readOnly:!0,dependencies:["settings.supportedPermissions"],get:Object.assign(function(){var e=this.settings.supportedPermissions;return e&&e.length>1},{__CW__getter:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return r&&r.length>1}})}),createView:function(){var e=this.settings,t=e.primaryInteractionMode,n=e.shouldHideAddParticipantsSummary;return t===cn.a.TOUCH?Yn.create():qn.create(n)},view:d.b({downstreamBindings:{additionalButtonTitle:"(owner).settings.additionalButtonTitle",supportedAccess:"(owner).settings.supportedAccess",title:"(owner).settings.initiateSharePaneTitle",subtitle:"(owner).settings.initiateSharePaneSubtitle"}}),setEffectiveAccess:function(e){var t=this.share;t.setEffectiveAccess(e,this.permissionValueForAddingParticipants),t.effectiveAccess===A.a.PUBLIC&&this.view.clearInvitationsTextField()},setEffectivePermission:function(e){var t=this.share;t.isPublic&&t.setEffectivePermission(e),this.permissionValueForAddingParticipants=e},setUp:function(){var e=arguments,t=this.settings,n=t.recordHasShare,i=Boolean(t.useAnonymousPublicAccess);if(n)this.__s._$11n$setUp.apply(this,e);else{var r=t.defaultAccess===A.a.PUBLIC?t.defaultPermission:N.a.NONE;this.share=this.ioService.createShareFromDataHash({fields:t.shareRecordFields,forRecord:null,publicPermission:r,shortGUID:void 0,recordType:"cloudkit.share",anonymousPublicAccess:i}),this.permissionValueForAddingParticipants=t.defaultPermission,this.sendEvent("sharingUIIsReady")}},shouldShowUserName:d.b({readOnly:!0,get:function(){return!0}}),__superMap:{_$11n$setUp:"setUp"},staticMembers:{__QUALIFIED_CLASS_NAME__:"InitiateShareViewController"}}),Jn=$n.extend({initiateShareViewControllerClass:Zn,initiateShareViewController:d.b({strong:!0,get:function(){return this.initiateShareViewControllerClass.create({cacheingProvideRootRecordFunction:this.cacheingProvideRootRecordFunction,ioService:this.bindingFor("ioService"),settings:this.bindingFor("settings"),share:this.bindingFor("share"),sharePopoverIsActive:this.bindingFor("sharePopoverIsActive"),permissionValueForAddingParticipants:this.bindingFor("permissionValueForAddingParticipants"),preselectedTransport:this.bindingFor("preselectedTransport")})}}),showInitiateUI:function(){var e=this.initiateShareViewController;this.showViewController(e),e.setUp()},start:function(){this.showInitiateUI();var e=this.settings;return e.logService.recordStat("StartedInitiateShareWorkflow",{appName:e.appName}),this._promise},shareByWebMail:function(){var e=this,t=arguments;this.sharePopoverIsActive=!0;var n=this.initiateShareViewController;return this.getPath("share.isPublic")&&n?n.saveShare().then(function(n){if(void 0!==n)return e.__s._$_p$shareByWebMail.apply(e,t)}):e.__s._$_p$shareByWebMail.apply(e,t)},didCancelSendMessage:function(){var e=arguments;this.getPath("share.isPublic")?this.didComplete():this.__s._$1Ix$didCancelSendMessage.apply(this,e)},__superMap:{_$_p$shareByWebMail:"shareByWebMail",_$1Ix$didCancelSendMessage:"didCancelSendMessage"},staticMembers:{__QUALIFIED_CLASS_NAME__:"InitiateShareWorkflowViewController"}}),Xn=(n(479),n(1283)),ei=n(1209),ti=n(1227),ni=n(845),ii=n(179),ri={"０":"0","１":"1","２":"2","３":"3","４":"4","５":"5","６":"6","７":"7","８":"8","９":"9","٠":"0","١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","۰":"0","۱":"1","۲":"2","۳":"3","۴":"4","۵":"5","۶":"6","۷":"7","۸":"8","۹":"9","०":"0","१":"1","२":"2","३":"3","४":"4","५":"5","६":"6","७":"7","८":"8","९":"9","০":"0","১":"1","২":"2","৩":"3","৪":"4","৫":"5","৬":"6","৭":"7","৮":"8","৿":"9","๐":"0","๑":"1","๒":"2","๓":"3","๔":"4","๕":"5","๖":"6","๗":"7","๘":"8","๙":"9"},ai={"Ä":"Å","ä":"å"};function si(e){return(e=ri[e]||e)>="0"&&e<="9"}function oi(e,t){for(var n="";;){var i=e.charAt(t++);if((i=ri[i]||i)<"0"||i>"9")return n;n+=i}}function ci(e){return e<32?1:e<33?1:e<48?0:e<58?1:e<65?0:e<91?1:e<97?0:e<123?1:0}function li(e){return e<="Z"?2:e<="z"?1:3}function ui(e,t,n){if(e===t)return 0;if(""===e)return-1;if(""===t)return 1;if(ai[e]===t||ai[t]===e){var i=e;e=t,t=i}var r=(it.a[e]||e).toUpperCase(),a=(it.a[t]||t).toUpperCase(),s=ci(r.charCodeAt(0)),o=ci(a.charCodeAt(0));if(s!==o)return s<o?-1:1;if(r!==a)return r<a?-1:1;if(!n)return 0;var c=li(e),l=li(t);return c!==l?c<l?-1:1:e<t?-1:1}var di=n(244),hi=n(846),pi=(n(968),M.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"figure",children:[{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"img",classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"photoUrl",truevalue:"photo",attributes:{}}],name:"image",styles:{transform:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"inlineTransform",attributes:{},unit:null,property:"transform"}},attributes:{src:{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"photoUrl",attributes:{},attribute:"src"}}}],classes:["image-container"],name:"imageContainer"}],classes:["participant-icon-view",{type:"CLASSNAMEOUTLET",bindingtype:"DIRECTBINDING",name:"state",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"shouldAnimate",truevalue:"should-animate",attributes:{}}],attributes:{"data-title":{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"displayNameInitials",attributes:{},attribute:"data-title"}}},className:"ck-sharing-participant-icon-view",__QUALIFIED_CLASS_NAME__:"ParticipantIconView"},photoUrl:d.b(),cropRect:d.b(),displayNameInitials:d.b(),shouldAnimate:d.b(!1),inlineTransform:d.b({readOnly:!0,dependencies:["scale","offsetX","offsetY"],get:Object.assign(function(){var e=[];return e.push("translateY(-100%) translateY(36px)"),e.push("scale("+this.scale+")"),_.a.sharedInstance.isRTL?e.push("translate("+-this.offsetX+"px, "+this.offsetY+"px)"):e.push("translate("+this.offsetX+"px, "+this.offsetY+"px)"),e.join(" ")},{__CW__getter:function(e,t,n,i){var r=[];return r.push("translateY(-100%) translateY(36px)"),r.push("scale("+i.internalGet(this,t[0+n])+")"),_.a.sharedInstance.isRTL?r.push("translate("+-i.internalGet(this,t[1+n])+"px, "+i.internalGet(this,t[2+n])+"px)"):r.push("translate("+i.internalGet(this,t[1+n])+"px, "+i.internalGet(this,t[2+n])+"px)"),r.join(" ")}})}),init:function(){var e=this,t=arguments;this.__s._$Wz$init.apply(this,t),An.a(this.image,"load",function(t){e.onload(t)})},onload:function(e){this.propertyChanged("scale")},scale:d.b({readOnly:!0,dependencies:["photoUrl","cropRect.width"],get:Object.assign(function(){var e=this.getPath("cropRect.width")||this.image.naturalWidth;return o.a(this.photoUrl)?36/e:1},{__CW__getter:function(e,t,n,i){var r=i.internalGetPath(this,t[1+n])||this.image.naturalWidth;return o.a(i.internalGet(this,t[0+n]))?36/r:1}})}),offsetX:d.b({readOnly:!0,dependencies:["photoUrl","cropRect.x"],get:Object.assign(function(){var e=this.getPath("cropRect.x");return o.a(this.photoUrl)&&o.a(e)?-1*e:0},{__CW__getter:function(e,t,n,i){var r=i.internalGetPath(this,t[1+n]);return o.a(i.internalGet(this,t[0+n]))&&o.a(r)?-1*r:0}})}),offsetY:d.b({readOnly:!0,dependencies:["photoUrl","cropRect.y"],get:Object.assign(function(){var e=this.getPath("cropRect.y");return o.a(this.photoUrl)&&o.a(e)?e:0},{__CW__getter:function(e,t,n,i){var r=i.internalGetPath(this,t[1+n]);return o.a(i.internalGet(this,t[0+n]))&&o.a(r)?r:0}})}),state:d.b({readOnly:!0,dependencies:["photoUrl","displayNameInitials"],get:Object.assign(function(){return this.photoUrl?"has-icon":this.displayNameInitials?"has-initials":"has-silhouette"},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?"has-icon":i.internalGet(this,t[1+n])?"has-initials":"has-silhouette"}})}),__superMap:{_$Wz$init:"init"}})),fi=(n(966),hi.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"iconView"},{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"span",children:[{type:"ELEMENT",tagname:"h1",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"name",attributes:{}}],classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"displayNameIsPhoneNumber",truevalue:"is-phone-number",attributes:{}}]},{type:"ELEMENT",tagname:"span",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"listLabel",attributes:{}}]}]},{type:"ELEMENT",tagname:"p",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"statusText",attributes:{}}]}],classes:["title-area"]},{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"participantSettingsButton"},{type:"VIEWOUTLET",tagname:"view",name:"badge"}],classes:["item-controls"]}],classes:["container"]}],classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"hasAcceptedShare",truevalue:"accepted",attributes:{}}],attributes:{"aria-disabled":{type:"ATTRIBUTEOUTLET",bindingtype:"IFBINDING",name:"isDisabled",truevalue:"true",falsevalue:"false",attributes:{},attribute:"aria-disabled"}}},className:"ck-sharing-manage-share-list-item-view",__QUALIFIED_CLASS_NAME__:"ManageShareListItemView"},isDisabled:d.b(!1),name:d.b(m.c("content.displayName")),displayNameIsPhoneNumber:d.b(m.c("content.displayNameIsPhoneNumber")),hasAcceptedShare:d.b({readOnly:!0,dependencies:["content.acceptanceStatus"],get:Object.assign(function(){return this.getPath("content.acceptanceStatus")===di.a.ACCEPTED},{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])===di.a.ACCEPTED}})}),isViewOnly:d.b({readOnly:!0,dependencies:["content.permission"],get:Object.assign(function(){return this.getPath("content.permission")===N.a.READ_ONLY},{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])===N.a.READ_ONLY}})}),iconView:d.b({downstreamBindings:{displayNameInitials:"(owner).content.displayNameInitials",photoUrl:"(owner).content.addressBookContact.imageDataUrl",cropRect:"(owner).content.addressBookContact.photo.crop"},defaultValue:E.b(pi)}),listLabel:d.b({readOnly:!0,dependencies:["content.isOwner","content.isMe"],get:Object.assign(function(){return this.getPath("content.isOwner")?_.d("CKSharing.ManageShare.List.Label.Owner"):this.getPath("content.isMe")?_.d("CKSharing.ManageShare.List.Label.Me"):void 0},{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])?_.d("CKSharing.ManageShare.List.Label.Owner"):i.internalGetPath(this,t[1+n])?_.d("CKSharing.ManageShare.List.Label.Me"):void 0}})}),pointerOver:function(){this.sendEvent("setShouldShowParticipantSettingsButtonOnListItem",this)},shouldShowParticipantSettingsButton:d.b(),isParticipantSettingsMenuOpened:d.b(!1),participantSettingsButton:d.b({dependencies:["isDisabled"],readOnly:!0,downstreamBindings:{item:"(owner).content",shouldShow:"(owner).shouldShowParticipantSettingsButton",isParticipantSettingsMenuOpened:"(owner).isParticipantSettingsMenuOpened"},get:Object.assign(function(){return this.isDisabled?null:gi.create()},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?null:gi.create()}})}),statusText:d.b({readOnly:!0,dependencies:["hasAcceptedShare","isViewOnly"],get:Object.assign(function(){return this.hasAcceptedShare?this.isViewOnly?_.d("CKSharing.ManageShare.StatusText.ViewOnly"):null:_.d("CKSharing.ManageShare.StatusText.Invited")},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?i.internalGet(this,t[1+n])?_.d("CKSharing.ManageShare.StatusText.ViewOnly"):null:_.d("CKSharing.ManageShare.StatusText.Invited")}})})})),gi=M.a.extend(D.a,{staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"svg",children:[{type:"ELEMENT",tagname:"ellipse",classes:["background"],namespace:"http://www.w3.org/2000/svg",attributes:{ry:"15",rx:"15",cy:"15",cx:"15"}},{type:"ELEMENT",tagname:"ellipse",classes:["dot"],namespace:"http://www.w3.org/2000/svg",attributes:{ry:"3",rx:"3",cy:"15",cx:"7"}},{type:"ELEMENT",tagname:"ellipse",classes:["dot"],namespace:"http://www.w3.org/2000/svg",attributes:{ry:"3",rx:"3",cy:"15",cx:"15"}},{type:"ELEMENT",tagname:"ellipse",classes:["dot"],namespace:"http://www.w3.org/2000/svg",attributes:{ry:"3",rx:"3",cy:"15",cx:"23"}}],classes:["menu-affordance"],namespace:"http://www.w3.org/2000/svg",attributes:{width:"15",height:"15",viewBox:"0 0 30 30"}}],classes:["menu-affordance-container",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"shouldShow",truevalue:"",falsevalue:"hidden",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isParticipantSettingsMenuOpened",truevalue:"open",attributes:{}}]},__QUALIFIED_CLASS_NAME__:"ParticipantSettingsButton"},action:"showParticipantSettingsMenu",item:d.b(),contextKeys:["context","item"],shouldShow:d.b(),isParticipantSettingsMenuOpened:d.b()});function mi(e,t,n,i,r){var a=r?void 0:J.b.create(),s=e.userIdentity,o=null;if(s&&(o=s.emailAddress||s.formattedPhoneNumber),o){if(r)return!0;var c=o===s.formattedPhoneNumber;a.push({title:o,titleIsAlwaysLTR:c,action:"",isDisabled:!0})}s&&(s.phoneNumber||s.emailAddress)&&a.push({title:_.d("CKSharing.ManageShare.ParticipantSettings."+(s.phoneNumber?"CopyPhoneNumber":"CopyEmail")),action:"copySelectedParticipantAddress"});var l=N.a.READ_WRITE,u=N.a.READ_ONLY;if(i&&n&&!e.isMe&&!e.isOwner&&!e.isOrgUser&&!t&&n){if(r)return!0;vi(a),a.push({title:_.d("CKSharing.ManageShare.ParticipantSettings.CanEdit"),action:"setSelectedParticipantPermissionsToReadWrite",hasCheckmark:e.permission===l},{title:_.d("CKSharing.ManageShare.ParticipantSettings.ViewOnly"),action:"setSelectedParticipantPermissionsToReadOnly",hasCheckmark:e.permission===u})}if(!Bt.a.isCurrentUserUnauthenticated&&!e.isOwner&&!e.isOrgUser&&(i||e.isMe)&&(e.isMe||!t)){if(r)return!0;vi(a);var d={action:"removeSelectedParticipant"};e.isMe?d.title=_.d("CKSharing.ManageShare.ParticipantSettings.RemoveMe"):t||(d.title=_.d("CKSharing.ManageShare.ParticipantSettings.RemoveAccess")),a.push(d)}return!r&&a}function vi(e){e.length>0&&e.push({})}n(964);var _i=ei.a.extend(ti.a,{shareIsPublic:d.b(),settings:d.b(),participants:d.b(),shareSupportsMultiplePermissions:d.b({readOnly:!0,dependencies:["settings.supportedPermissions"],get:function(){return this.getPath("settings.supportedPermissions.length")>1}}),sortedParticipantList:d.b({strong:!0,readOnly:!0,dependencies:["participants","participants.contentsDidChange","shareIsPublic","shareSupportsMultiplePermissions","loggedInUserCanEditShare"],get:Object.assign(function(e){return J.b.from(this.participants).sort(this._compareParticipants.bind(this))},{__CW__getter:function(e,t,n,i){return J.b.from(i.internalGet(this,t[0+n])).sort(this._compareParticipants.bind(this))}})}),collection:d.b(m.c("sortedParticipantList")),isShareStateUnknown:d.b({defaultValue:!1,didChange:function(e){e||this.measureViewport()}}),itemViewClass:fi,layoutMetrics:{rowHeight:56,rowSpacing:1},loggedInUserCanEditShare:d.b(),_lastMenuContext:d.b(),_menuStateChangeObserve:T.f("menu.isAttached",function(e){var t=this._lastMenuContext;t&&!e&&(t.isParticipantSettingsMenuOpened=!1)}),view:d.b({downstreamBindings:{isHidden:"(owner).isShareStateUnknown"}}),viewClass:y.a({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isHidden",truevalue:"hidden",attributes:{}}]}}},mixinDependencies:[$.a],scrollIndicatorTopMargin:2,scrollIndicatorBottomMargin:2,isHidden:d.b(!1)}),setShouldShowParticipantSettingsButtonOnListItem:function(e){var t=function(e,t,n,i){return mi(e,t,n,i,!0)}(e.content,this.shareIsPublic,this.shareSupportsMultiplePermissions,this.loggedInUserCanEditShare);e.shouldShowParticipantSettingsButton=t},showParticipantSettingsMenu:function(e){var t=this.menu;if(t.isAttached)return t.hide();this._lastMenuContext=e,e.isParticipantSettingsMenuOpened=!0;var n=e.item;this.selectedParticipant=n,this.menuItems=mi(n,this.shareIsPublic,this.shareSupportsMultiplePermissions,this.loggedInUserCanEditShare),t.show(e)},_windowDidResize:T.f(G.a.bindingFor("sharedInstance.window.width"),function(){var e=this.menu,t=this._lastMenuContext;e.isAttached&&t&&e.show(t)}),presenter:d.b({defaultValue:E.b(ni.a.extend({settings:d.b(),itemViewDidEnter:function(e){var t=arguments;this.__s._$1X8$itemViewDidEnter.apply(this,t),ne.a(function(){e.iconView.shouldAnimate=!0},100)},itemViewDidMove:function(e,t){var n=arguments;this.__s._$1fN$itemViewDidMove.apply(this,n),e[this.dataProperty]=t.handle.value},itemViewDidExit:function(e){var t=arguments;e.iconView.shouldAnimate=!1,this.__s._$1ia$itemViewDidExit.apply(this,t)},shouldLoadContacts:d.b(!0),cellsDidMove:function(e){var t=arguments;if(this.__s._$1oi$cellsDidMove.apply(this,t),e&&this.shouldLoadContacts){var n=e.objectAt(0);if(n){for(var i=e.length,r=Math.floor(i/2),a=n.handle.previous,s=this.settings.contactsService,o=0,c=r;o<c&&a.isValid;o++)bi(a.value,s),a=a.previous;for(var l=0;l<i;l++)bi(e.objectAt(l).getPath("handle.value"),s);for(var u=e.objectAt(i-1).handle.next,d=0,h=r;d<h&&u.isValid;d++)bi(u.value,s),u=u.next}}},__superMap:{_$1X8$itemViewDidEnter:"itemViewDidEnter",_$1fN$itemViewDidMove:"itemViewDidMove",_$1ia$itemViewDidExit:"itemViewDidExit",_$1oi$cellsDidMove:"cellsDidMove"}})),downstreamBindings:{itemViewClass:"(owner).itemViewClass",shouldLoadContacts:"(owner).settings.isAuthenticated",settings:"(owner).settings"}}),selectedParticipant:d.b(),setSelectedParticipantPermissionsToReadWrite:function(){return this.selectedParticipant.permission=N.a.READ_WRITE,this.sendEvent("participantPermissionDidChange",this.selectedParticipant)},setSelectedParticipantPermissionsToReadOnly:function(){return this.selectedParticipant.permission=N.a.READ_ONLY,this.sendEvent("participantPermissionDidChange",this.selectedParticipant)},removeSelectedParticipant:function(){return this.sendEvent("confirmRemoveParticipant",this.selectedParticipant)},showSelectedParticipantContactCard:function(){},copySelectedParticipantAddress:function(){var e=this.selectedParticipant,t=e&&e.userIdentity;if(t){var n,i=o.a(t.phoneNumber);if(n=i?t.formattedPhoneNumber:t.emailAddress,Object(wn.b)())Object(wn.a)(n);else{var r=i?"Phone":"Email",a=_.d("CKSharing.CopyEmailOrPhone.Title."+r),s=_.d("CKSharing.CopyEmailOrPhone.Subtitle."+r);this.sendEvent("showCopyTextViewController",a,s,n,i)}}},menuItems:d.b({strong:!0}),menu:d.b({defaultValue:function(){return he.extend({keyDown:function(e){switch(e.which){case ee.a.DOWN:this.highlightNextItem();break;case ee.a.UP:this.highlightPreviousItem();break;case ee.a.LEFT:case ee.a.RIGHT:e.preventDefault();break;case ee.a.ENTER:this._activateWithItem(this.highlightedItem);break;default:return!1}}}).create({target:this,listLayoutRowHeight:27,verticalAlignment:Dt.b.Top,horizontalAlignment:Dt.a.Left,resolutionStrategy:Y.a,isFocusable:!0,arrowAlignment:se.a.None})},strong:!0,downstreamBindings:{listCollection:"(owner).menuItems"}}),_compareParticipants:function(e,t){var n=this._getParticipantSortCategory(e),i=this._getParticipantSortCategory(t);return n<i?-1:n>i?1:function(e,t){if(Object(ii.a)(e)&&Object(ii.a)(t))return e<t?-1:e>t?1:0;e+="",t+="";for(var n=0,i=0,r=!1;;){var a=e.charAt(n),s=t.charAt(i);if(""!==a||""!==s)if(si(a)&&si(s)){var o=oi(e,n),c=oi(t,i);if(n+=o.length,i+=c.length,(o=parseInt(o,10))!==(c=parseInt(c,10)))return o<c?-1:1}else{++n,++i;var l=ui(a,s,r);if(l)return l}else{if(r)return 0;r=!0,n=i=0}}}(e.displayName,t.displayName)},_getParticipantSortCategory:function(e){if(e.isOrgUser)return 1;if(e.isMe)return 2;if(e.isOwner)return 3;var t=e.additionalParticipantInfo;return t&&t.isOnline?4:e.acceptanceStatus===di.a.ACCEPTED?5:6},staticMembers:{__QUALIFIED_CLASS_NAME__:"ManageShareListViewController"}});function bi(e,t){var n=e.userIdentity,i=n&&(n.emailAddress||n.phoneNumber);o.a(i)&&t&&e.loadAddressBookContact(t)}n(970);var yi=M.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"toggleButton"},{type:"ELEMENT",tagname:"label",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"summaryTextWOption",attributes:{}}],classes:["summary-text",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isExpanded",truevalue:"hidden",attributes:{}}]}],classes:["container",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"hasNoDropdowns",truevalue:"hidden",attributes:{}}]},{type:"ELEMENT",tagname:"p",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"summaryTextNoOption",attributes:{}}],classes:["summary-text",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"hasNoDropdowns",truevalue:"",falsevalue:"hidden",attributes:{}}]},{type:"ELEMENT",tagname:"section",children:[{type:"VIEWOUTLET",tagname:"view",name:"permissionsView"},{type:"ELEMENT",tagname:"menu",children:[{type:"VIEWOUTLET",tagname:"view",name:"stopSharingButton"},{type:"ELEMENT",tagname:"span",classes:["divider",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"shouldHideCopyLinkButton",truevalue:"hidden",attributes:{}}]},{type:"VIEWOUTLET",tagname:"view",name:"copyLinkButton"}],classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"shouldHideCopyLinkAndStopSharing",truevalue:"hidden",attributes:{}}]}]}],classes:["options-view",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isExpanded",truevalue:"isExpanded",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isHidden",truevalue:"hidden",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"hasNoDropdowns",truevalue:"has-no-dropdowns",attributes:{}}]},className:"ck-sharing-manage-share-options-view",__QUALIFIED_CLASS_NAME__:"ManageShareOptionsView"},summaryTextNoOption:d.b(),summaryTextWOption:d.b(),shouldShowShareOptions:d.b(!0),isCopyLinkDisabled:d.b(!1),isStopSharingDisabled:d.b(!1),isExpanded:d.b(!1),isHidden:d.b({dependencies:["isShareStateUnknown","shouldShowShareOptions"],readOnly:!0,get:Object.assign(function(){return this.isShareStateUnknown||!this.shouldShowShareOptions},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])||!i.internalGet(this,t[1+n])}})}),isShareStateUnknown:d.b(!1),shouldHideAccessDropdown:d.b(!1),shouldHidePermissionDropdown:d.b(!1),hasNoDropdowns:d.b(),shouldHideCopyLinkAndStopSharing:d.b(),toggleButton:d.b({defaultValue:E.b(M.a.extend(D.a,{staticMembers:{template:{type:"ELEMENT",tagname:"span",children:[{type:"ELEMENT",tagname:"svg",children:[{type:"ELEMENT",tagname:"path",namespace:"http://www.w3.org/2000/svg",attributes:{d:"m1.250001,1.062507l14.843682,14.875035l14.843815,-14.875035",fill:"none"}}],classes:["chevron"],namespace:"http://www.w3.org/2000/svg",attributes:{width:"12px",height:"11px",viewBox:"0 0 32 20"}},{type:"ELEMENT",tagname:"span",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"title",attributes:{}}]}],classes:["options-button"]}},title:_.d("CKSharing.ManageShare.Button.ShareOptions"),action:"toggleOptions"}))}),shouldHideCopyLinkButton:d.b(),copyLinkButton:d.b({defaultValue:E.b(L.a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"shouldHideCopyLinkButton",truevalue:"hidden",attributes:{}}]}}},title:_.d("CKSharing.ManageShare.Button.CopyLink"),action:"showCopyLink",shouldHideCopyLinkButton:d.b()})),downstreamBindings:{isDisabled:"(owner).isCopyLinkDisabled",shouldHideCopyLinkButton:"(owner).shouldHideCopyLinkButton"}}),stopSharingButton:d.b({defaultValue:E.b(L.a.extend({title:_.d("CKSharing.ManageShare.Button.StopSharing"),additionalClassNames:["warning"],action:"confirmStopSharing"})),downstreamBindings:{isDisabled:"(owner).isStopSharingDisabled"}})}),Ii=M.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"label",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"accessLabelString",attributes:{}}]},{type:"VIEWOUTLET",tagname:"view",name:"accessSelectView"}],classes:["row",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"shouldHideAccessDropdown",truevalue:"hidden",attributes:{}}]},{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"label",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"permissionLabelString",attributes:{}}]},{type:"VIEWOUTLET",tagname:"view",name:"permissionSelectView"}],classes:["row",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"shouldHidePermissionDropdown",truevalue:"hidden",attributes:{}}]}],classes:["container"]}],classes:["access-control-section",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isVisible",truevalue:"",falsevalue:"hidden",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"hasNoDropdowns",truevalue:"has-no-dropdowns",attributes:{}}]},className:"ck-sharing-manage-share-permissions-view",__QUALIFIED_CLASS_NAME__:"ManageSharePermissionsView"},isVisible:d.b(),hasNoDropdowns:d.b(),accessDropdownValue:d.b(),shouldHideAccessDropdown:d.b(),accessLabelString:w.c(_.d("CKSharing.AddParticipants.AccessLabel.Title")),accessOptions:d.b(),accessSelectView:d.b({defaultValue:E.b(P.a,{action:"setEffectiveAccess",ariaLabel:"Share Access Level"}),downstreamBindings:{options:"(owner).accessOptions",value:"(owner).accessDropdownValue",isVisibleOnScreen:"(owner).isVisible"}}),permissionDropdownValue:d.b(),shouldHidePermissionDropdown:d.b(),permissionLabelString:w.c(_.d("CKSharing.AddParticipants.AllowLabel.Title")),permissionOptions:d.b(),permissionSelectView:d.b({defaultValue:E.b(P.a,{action:"setEffectivePermission",ariaLabel:"Share Permission"}),downstreamBindings:{value:"(owner).permissionDropdownValue",options:"(owner).permissionOptions",isVisibleOnScreen:"(owner).isVisible"}})}),wi=yn.a.extend({viewClass:Ii,view:d.b({downstreamBindings:{accessDropdownValue:"(owner).share.effectiveAccess",accessOptions:"(owner).accessOptions",hasNoDropdowns:"(owner).hasNoDropdowns",isVisible:"(owner).optionsIsExpanded",permissionDropdownValue:"(owner).permissionDropdownValue",permissionOptions:"(owner).permissionOptions",shouldHideAccessDropdown:"(owner).shouldHideAccessDropdown",shouldHidePermissionDropdown:"(owner).shouldHidePermissionDropdown"}}),settings:d.b(),permissionValueForAddingParticipants:d.b(),share:d.b(),shouldHideAccessDropdown:d.b(),shouldHidePermissionDropdown:d.b(),optionsIsExpanded:d.b(),hasNoDropdowns:d.b(),accessOptions:d.b({dependencies:["share.effectiveAccess","settings","settings.supportedAccess"],readOnly:!0,get:Object.assign(function(){if(this.settings){var e=[],t=A.a.PRIVATE,n=A.a.PUBLIC,i=this.share.effectiveAccess;return this.settings.supportsAccess(t)?e.push({value:t,label:_.d("CKSharing.AddParticipants.Private")}):i===t&&e.push({value:t,label:_.d("CKSharing.AddParticipants.Private"),isDisabled:!0}),this.settings.supportsAccess(n)?e.push({value:n,label:_.d("CKSharing.AddParticipants.Public")}):i===n&&e.push({value:n,label:_.d("CKSharing.AddParticipants.Public"),isDisabled:!0}),J.b.create(e)}},{__CW__getter:function(e,t,n,i){if(i.internalGet(this,t[1+n])){var r=[],a=A.a.PRIVATE,s=A.a.PUBLIC,o=i.internalGetPath(this,t[0+n]);return i.internalGet(this,t[1+n]).supportsAccess(a)?r.push({value:a,label:_.d("CKSharing.AddParticipants.Private")}):o===a&&r.push({value:a,label:_.d("CKSharing.AddParticipants.Private"),isDisabled:!0}),i.internalGet(this,t[1+n]).supportsAccess(s)?r.push({value:s,label:_.d("CKSharing.AddParticipants.Public")}):o===s&&r.push({value:s,label:_.d("CKSharing.AddParticipants.Public"),isDisabled:!0}),J.b.create(r)}}})}),permissionDropdownValue:d.b({dependencies:["share.effectivePermission","permissionValueForAddingParticipants"],readOnly:!0,get:Object.assign(function(){if(this.share){var e=this.share.effectivePermission;return void 0===e?this.permissionValueForAddingParticipants:e}return this.permissionValueForAddingParticipants},{__CW__getter:function(e,t,n,i){if(this.share){var r=i.internalGetPath(this,t[0+n]);return void 0===r?i.internalGet(this,t[1+n]):r}return i.internalGet(this,t[1+n])}})}),permissionOptions:d.b({dependencies:["share.effectivePermission","settings","settings.supportedPermissions"],readOnly:!0,get:Object.assign(function(){var e=this.settings;if(e){var t=[],n=N.a.READ_ONLY,i=N.a.READ_WRITE,r=this.share.effectivePermission;return e.supportsPermission(i)?t.push({value:i,label:_.d("CKSharing.PermissionsCombo.AllowEditing")}):r===i&&t.push({value:i,label:_.d("CKSharing.PermissionsCombo.AllowEditing"),isDisabled:!0}),e.supportsPermission(n)?t.push({value:n,label:_.d("CKSharing.PermissionsCombo.ViewOnly")}):r===n&&t.push({value:n,label:_.d("CKSharing.PermissionsCombo.ViewOnly"),isDisabled:!0}),r===N.a.MIXED&&t.push({value:N.a.MIXED,label:_.d("CKSharing.PermissionsCombo.Mixed"),isDisabled:!0}),J.b.create(t)}},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[1+n]);if(r){var a=[],s=N.a.READ_ONLY,o=N.a.READ_WRITE,c=i.internalGetPath(this,t[0+n]);return r.supportsPermission(o)?a.push({value:o,label:_.d("CKSharing.PermissionsCombo.AllowEditing")}):c===o&&a.push({value:o,label:_.d("CKSharing.PermissionsCombo.AllowEditing"),isDisabled:!0}),r.supportsPermission(s)?a.push({value:s,label:_.d("CKSharing.PermissionsCombo.ViewOnly")}):c===s&&a.push({value:s,label:_.d("CKSharing.PermissionsCombo.ViewOnly"),isDisabled:!0}),c===N.a.MIXED&&a.push({value:N.a.MIXED,label:_.d("CKSharing.PermissionsCombo.Mixed"),isDisabled:!0}),J.b.create(a)}}})}),staticMembers:{__QUALIFIED_CLASS_NAME__:"ManageSharePermissionsViewController"}}),Si=yn.a.extend({isCopyLinkDisabled:d.b(!1),isStopSharingDisabled:d.b(!1),permissionValueForAddingParticipants:d.b(),viewClass:yi,view:d.b({downstreamBindings:{hasNoDropdowns:"(owner).hasNoDropdowns",isCopyLinkDisabled:"(owner).isCopyLinkDisabled",isStopSharingDisabled:"(owner).isStopSharingDisabled",isExpanded:"(owner).isExpanded",isShareStateUnknown:"(owner).isShareStateUnknown",shouldHideCopyLinkAndStopSharing:"(owner).shouldHideCopyLinkAndStopSharing",shouldHideCopyLinkButton:"(owner).shouldHideCopyLinkButton",shouldShowShareOptions:"(owner).shouldShowShareOptions",summaryTextNoOption:"(owner).summaryTextNoOption",summaryTextWOption:"(owner).summaryTextWOption"}}),permissionsViewController:Pn.a.define({viewOutlet:"permissionsView",defaultValue:E.b(wi),downstreamBindings:{hasNoDropdowns:"(owner).hasNoDropdowns",optionsIsExpanded:"(owner).isExpanded",settings:"(owner).settings",share:"(owner).share",shouldHideAccessDropdown:"(owner).shouldHideAccessDropdown",shouldHidePermissionDropdown:"(owner).shouldHidePermissionDropdown",permissionValueForAddingParticipants:"(owner).permissionValueForAddingParticipants"}}),shouldShowShareOptions:d.b({dependencies:["share.loggedInUserCanEditShare"],readOnly:!0,get:Object.assign(function(){return!!this.getPath("share.loggedInUserCanEditShare")},{__CW__getter:function(e,t,n,i){return!!i.internalGetPath(this,t[0+n])}})}),settings:d.b(),share:d.b(),isShareStateUnknown:d.b(!1),summaryTextWOption:d.b(),summaryTextNoOption:d.b(),shouldHideCopyLinkButton:d.b({dependencies:["share.isPublic"],readOnly:!0,get:Object.assign(function(){return!!this.getPath("share.isPublic")},{__CW__getter:function(e,t,n,i){return!!i.internalGetPath(this,t[0+n])}})}),isExpanded:d.b(!1),toggleOptions:function(){this.isExpanded=!this.isExpanded},shouldHideAccessDropdown:d.b({readOnly:!0,dependencies:["settings.supportedAccess"],get:Object.assign(function(){var e=this.getPath("settings.supportedAccess");return e&&e.length<2},{__CW__getter:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return r&&r.length<2}})}),shouldHidePermissionDropdown:d.b({readOnly:!0,dependencies:["settings.supportedPermissions"],get:Object.assign(function(){var e=this.getPath("settings.supportedPermissions");return e&&e.length<2},{__CW__getter:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return r&&r.length<2}})}),hasNoDropdowns:d.b({readOnly:!0,dependencies:["shouldHideAccessDropdown","shouldHidePermissionDropdown"],get:Object.assign(function(){return this.shouldHideAccessDropdown&&this.shouldHidePermissionDropdown},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])&&i.internalGet(this,t[1+n])}})}),shouldHideCopyLinkAndStopSharing:d.b({readOnly:!0,dependencies:["hasNoDropdowns","isExpanded","shouldShowShareOptions"],get:Object.assign(function(){return!(this.shouldShowShareOptions&&(this.isExpanded||this.hasNoDropdowns))},{__CW__getter:function(e,t,n,i){return!(i.internalGet(this,t[2+n])&&(i.internalGet(this,t[1+n])||i.internalGet(this,t[0+n])))}})}),staticMembers:{__QUALIFIED_CLASS_NAME__:"ManageShareOptionsViewController"}}),Ci=(n(960),n(962),M.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"headerView"},{type:"VIEWOUTLET",tagname:"view",name:"busyView"},{type:"VIEWOUTLET",tagname:"view",name:"offlineView"},{type:"VIEWOUTLET",tagname:"view",name:"contentView"},{type:"VIEWOUTLET",tagname:"view",name:"optionsView"},{type:"ELEMENT",tagname:"footer",children:[{type:"VIEWOUTLET",tagname:"view",name:"doneButton"},{type:"VIEWOUTLET",tagname:"view",name:"actionButton"}],classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isShareStateUnknown",truevalue:"hidden",attributes:{}}]}],classes:["manage-share-view","sharing-dialog",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isOffline",truevalue:"is-offline",attributes:{}}]},className:"ck-sharing-manage-share-view",__QUALIFIED_CLASS_NAME__:"ManageShareView"},headerView:d.b({defaultValue:E.b(M.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"header",children:[{type:"ELEMENT",tagname:"h1",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"title",attributes:{escape:"false"}}]},{type:"ELEMENT",tagname:"h2",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"summaryTextNoOption",attributes:{}}],classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"shouldShowSubtitle",truevalue:"hidden",attributes:{}}]}],classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isShareStateUnknown",truevalue:"hidden",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"shouldShowSubtitle",truevalue:"",falsevalue:"has-summary-text",attributes:{}}]}},title:d.b(),shouldShowSubtitle:d.b(),summaryTextNoOption:d.b()})),downstreamBindings:{isShareStateUnknown:"(owner).isShareStateUnknown",shouldShowSubtitle:"(owner).shouldShowSubtitle",title:"(owner).title",summaryTextNoOption:"(owner).summaryTextNoOption"}}),title:d.b(),isCopyLinkDisabled:d.b(!1),share:d.b(),shouldShowSubtitle:d.b({readOnly:!0,dependencies:["share.loggedInUserCanEditShare"],get:Object.assign(function(){return this.getPath("share.loggedInUserCanEditShare")},{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])}})}),summaryTextWOption:d.b(),summaryTextNoOption:d.b(),actionButton:d.b({readOnly:!0,dependencies:["isLoading","isOffline","share.isPublic","share.loggedInUserCanEditShare"],get:Object.assign(function(){return this.isLoading||this.isOffline?null:this.getPath("share.isPublic")?this.sendLinkButton:this.getPath("share.loggedInUserCanEditShare")?this.addPeopleButton:this.copyLinkButton},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])||i.internalGet(this,t[1+n])?null:i.internalGetPath(this,t[2+n])?this.sendLinkButton:i.internalGetPath(this,t[3+n])?this.addPeopleButton:this.copyLinkButton}})}),addPeopleButton:d.b({readOnly:!0,get:function(){return L.a.create({action:"goToAddParticipantsUI",title:_.d("CKSharing.ManageShare.Button.AddPeople")})}}),sendLinkButton:d.b({readOnly:!0,get:function(){return L.a.create({action:"sendLink",title:_.d("CKSharing.ManageShare.Button.SendLink")})}}),copyLinkButton:d.b({readOnly:!0,get:function(){return L.a.create({action:"showCopyLink",title:_.d("CKSharing.ManageShare.Button.CopyLink")})},downstreamBindings:{isDisabled:"(owner).isCopyLinkDisabled"}}),doneButton:d.b({defaultValue:E.b(L.a.extend({title:_.d("CKSharing.ManageShare.Button.Close"),action:"complete",keyEquivalent:ee.a.ESC,additionalClassNames:y.a(["primary"])})),downstreamBindings:{isDisabled:"(owner).isDoneButtonDisabled"}}),busyView:d.b({readOnly:!0,get:function(){return Kt.create()},downstreamBindings:{isVisible:"(owner).isShareStateUnknown"}}),busyDescription:d.b(_.d("CKSharing.Busy.LoadingParticipants.Description")),isLoading:d.b(!1),isShareStateUnknown:d.b(!1),isTearingDown:d.b(!1),isDoneButtonDisabled:d.b({readOnly:!0,dependencies:["isLoading","isTearingDown"],get:Object.assign(function(){return this.isLoading||this.isTearingDown},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])||i.internalGet(this,t[1+n])}})}),offlineView:d.b({readOnly:!0,get:function(){return Qt.create()},downstreamBindings:{isVisible:"(owner).isOffline"}}),isOffline:d.b(G.a.sharedInstance.bindingFor("isOffline"))})),Oi=n(265),Ai={mixinDependencies:[f.a,sn.b],stopSharing:g.a.define(),removeParticipant:g.a.define()},Ei=sn.a.extend(Ai,{viewClass:Ci,view:d.b({downstreamBindings:{isCopyLinkDisabled:"(owner).isCopyLinkDisabled",isShareStateUnknown:"(owner).isShareStateUnknown",isTearingDown:"(owner).isTearingDown",share:"(owner).share",title:"(owner).settings.manageSharePaneTitle",summaryTextWOption:"(owner).summaryTextWOption",summaryTextNoOption:"(owner).summaryTextNoOption"}}),contentViewController:Pn.a.define({viewOutlet:"contentView",defaultValue:E.b(_i),downstreamBindings:{isShareStateUnknown:"(owner).isShareStateUnknown",shareIsPublic:"(owner).share.isPublic",settings:"(owner).settings",participants:"(owner).share.participants",loggedInUserCanEditShare:"(owner).share.loggedInUserCanEditShare"}}),isTearingDown:d.b(!1),isCopyLinkDisabled:d.b({dependencies:["share","share.effectiveAccess","share.participants","share.effectivePermission","settings.appName"],readOnly:!0,get:Object.assign(function(){var e=!1,t=this.share;if(t){var n=this.getPath("settings.appName"),i=["Pages","Numbers","Keynote"].indexOf(n)>-1,r=1===t.participants.length&&t.effectiveAccess===A.a.PRIVATE;(void 0===t.effectivePermission||i&&r)&&(e=!0)}else e=!0;return e},{__CW__getter:function(e,t,n,i){var r=!1,a=i.internalGet(this,t[0+n]);if(a){var s=i.internalGetPath(this,t[4+n]),o=["Pages","Numbers","Keynote"].indexOf(s)>-1,c=1===a.participants.length&&a.effectiveAccess===A.a.PRIVATE;(void 0===a.effectivePermission||o&&c)&&(r=!0)}else r=!0;return r}})}),isStopSharingDisabled:d.b({dependencies:["share","share.effectiveAccess","share.participants","share.participants.contentsDidChange","state"],readOnly:!0,get:Object.assign(function(){var e=this.share;return this.state===sn.d.DESTROYING||e&&e.effectiveAccess===A.a.PRIVATE&&1===e.participants.length},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return i.internalGet(this,t[4+n])===sn.d.DESTROYING||r&&r.effectiveAccess===A.a.PRIVATE&&1===r.participants.length}})}),isShareStateUnknown:d.b({dependencies:["isDestroying","isLoading"],readOnly:!0,get:Object.assign(function(){return this.isDestroying||this.isLoading},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])||i.internalGet(this,t[1+n])}})}),optionsViewController:Pn.a.define({viewOutlet:"optionsView",defaultValue:E.b(Si),downstreamBindings:{share:"(owner).share",settings:"(owner).settings",isCopyLinkDisabled:"(owner).isCopyLinkDisabled",isStopSharingDisabled:"(owner).isStopSharingDisabled",isShareStateUnknown:"(owner).isShareStateUnknown",summaryTextWOption:"(owner).summaryTextWOption",summaryTextNoOption:"(owner).summaryTextNoOption",permissionValueForAddingParticipants:"(owner).permissionValueForAddingParticipants"}}),_generateConfirmationStrings:function(e){var t,n,i="CKSharing.ConfirmationDialog."+e+".",r=this.settings,a=r.shareItemType,s=r.shareTitle;t=_.d(i+"Message."+a);var o=i+"Description."+a;return"CloudKit"===a?s?(o+=".WithTitle",n=_.d(o,{shareTitle:s})):(o+=".WithoutTitle",n=_.d(o)):n=_.d(o),{message:t,description:n}},confirmStopSharing:function(){var e=this._generateConfirmationStrings("StopSharing");Xn.a.show({iconNames:"ck-sharing-icon",message:e.message,description:e.description,primaryButton:{title:_.d("CKSharing.Dialog.Button.OK"),target:this,action:"stopSharing"},alternateButton:{title:_.d("CKSharing.Dialog.Button.Cancel")}})},stopSharing:function(){var e=this,t=this.share;this._state=sn.d.DESTROYING;var n=this.settings,i={operationType:"DESTROY",appName:n.shareItemType,interactionMode:n.primaryInteractionMode},r={didUpdateRootRecord:n.didUpdateRootRecord,didUpdateShareRecord:n.didUpdateShareRecord};return this.ioService.deleteShare(t,r).then(function(t){return e._state=sn.d.DESTROYED,e.sendEvent("shareWasDeleted",t,!0),t}).catch(function(t){throw e._state=sn.d.LOADED,t}).catch(Object(on.a)(i,n.notificationService,n.logService))},confirmRemoveParticipant:function(e){var t=void 0;e.isMe?t=this._generateConfirmationStrings("RemoveYourself"):this.getPath("share.loggedInUserCanEditShare")?2===this.getPath("share.participants.length")?t={message:_.d("CKSharing.ConfirmationDialog.RemoveFinalParticipant.Message",{name:e.displayName}),description:_.d("CKSharing.ConfirmationDialog.RemoveFinalParticipant.Description")}:this.removeParticipant(e):c.b("Should not have attempted to remove participants from share for user"),t&&Xn.a.show({iconNames:"ck-sharing-icon",message:t.message,description:t.description,primaryButton:{title:_.d("CKSharing.Dialog.Button.OK"),target:this,action:"userDidConfirmParticipantRemoval",participant:e},alternateButton:{title:_.d("CKSharing.Dialog.Button.Cancel")}})},confirmSetEffectiveAccessToPrivate:function(){var e,t="CKSharing.ConfirmationDialog.PublicToPrivate.Description.",n=this.settings.shareItemType,i=this.settings.shareTitle;t+=n,"CloudKit"===n?i?(t+=".WithTitle",e=_.d(t,{shareTitle:i})):(t+=".WithoutTitle",e=_.d(t)):e=_.d(t),Xn.a.show({iconNames:"ck-sharing-icon",message:_.d("CKSharing.ConfirmationDialog.PublicToPrivate.Message"),description:e,primaryButton:{title:_.d("CKSharing.Dialog.Button.OK"),target:this,action:"_setEffectiveAccessToPrivate"},alternateButton:{title:_.d("CKSharing.Dialog.Button.Cancel")}})},setEffectiveAccess:function(e){var t=this.share.effectiveAccess,n=A.a.PRIVATE;t===A.a.PUBLIC&&e===n?this.confirmSetEffectiveAccessToPrivate():(this.share.setEffectiveAccess(e,this.settings.defaultPermission),this.updateShare())},setEffectivePermission:function(e){var t=this.share;t.setEffectivePermission(e),this.permissionValueForAddingParticipants=e,t.effectivePermission&&this.updateShare()},userDidConfirmParticipantRemoval:function(e){this.removeParticipant(e.participant)},removeParticipant:function(e){var t=this,n=this.share;if(e.isMe){var i=this.settings,r={operationType:"DESTROY",appName:i.shareItemType,interactionMode:i.primaryInteractionMode},a={didUpdateRootRecord:i.didUpdateRootRecord,didUpdateShareRecord:i.didUpdateShareRecord};return this.ioService.deleteShare(n,a).then(function(){var e=t.share;return t._state=sn.d.DESTROYED,t.sendEvent("itemIsNoLongerSharedWithMe",e,!0),e}).catch(function(e){throw t._state=sn.d.LOADED,e}).catch(Object(on.a)(r,i.notificationService,i.logService))}var s=n.findEquivalentParticipant(e);return n.participants.remove(s),this.permissionValueForAddingParticipants=Object(Oi.a)(n.effectivePermission,this.settings.supportedPermissions),this.updateShare()},participantPermissionDidChange:function(e){var t=this.share;return t.participantPermissionChanged(),this.permissionValueForAddingParticipants=Object(Oi.a)(t.effectivePermission,this.settings.supportedPermissions),this.updateShare()},_setEffectiveAccessToPrivate:function(){var e=this,t=this.share,n=this.settings,i=this.cacheingProvideRootRecordFunction;t.setEffectiveAccess(A.a.PRIVATE,n.defaultAccess);for(var r=t.participants||[],a=r.length-1;a>=0;a--)r.objectAt(a).isOwner||r.removeAt(a);this._state=sn.d.LOADED_SAVING;var s={didUpdateRootRecord:n.didUpdateRootRecord,didUpdateShareRecord:n.didUpdateShareRecord,provideRootRecordForUpdate:i,provideLatestRootRecordAfterUpdateConflict:n.provideLatestRootRecordAfterUpdateConflict},o={operationType:"UPDATE",appName:n.shareItemType,interactionMode:n.primaryInteractionMode};return i().then(function(t){return e.ioService.convertToPrivateShare(t,s)}).then(function(t){return e.share=t,e.sendEvent("shareWasUpdated",t,!0),t}).catch(Object(on.a)(o,n.notificationService,n.logService)).finally(function(){e._state=sn.d.LOADED})},goToAddParticipantsUI:function(){var e=this.share;if(!e||e.isPublic)return!1;var t=(e&&e.participants&&e.participants.length||0)-1,n=this.settings.maxNumberOfInvitees;return!!(n&&t>=n)&&(this.displayCKSharingErrorDialog("AddingParticipants.TOO_MANY_INVITEES"),!0)},_loadAddressBookForOwner:T.f("share.owner","settings","settings.contactsService",function(e,t){e&&t&&t.contactsService&&e.loadAddressBookContact(t.contactsService)}),staticMembers:{__QUALIFIED_CLASS_NAME__:"ManageShareViewController"}}),Ti=Wn.extend({copyLinkViewControllerClass:w.c({readOnly:!0,defaultValue:Cn}),manageShareViewController:d.b({strong:!0,get:function(){return Ei.create({cacheingProvideRootRecordFunction:this.cacheingProvideRootRecordFunction})},downstreamBindings:{ioService:"(owner).ioService",settings:"(owner).settings",share:"(owner).share",permissionValueForAddingParticipants:"(owner).permissionValueForAddingParticipants"}}),complete:function(){var e=this;this.manageShareViewController.isTearingDown=!0;var t=this.share;if(t&&t.isPrivate&&1===t.participants.length&&this.manageShareViewController.stopSharing(),this.ioService.isServiceBusy){var n=T.b.create(this,{inputs:["ioService.isServiceBusy"],notifyOnCreate:!1,callback:function(t){t||(n.disconnect(),e.didComplete())}});n.connect()}else this.didComplete()},start:function(){this.showListUI().catch(this.cancel.bind(this));var e=this.settings;return e.logService.recordStat("StartedManageShareWorkflow",{appName:e.appName}),this._promise},showListUI:function(){var e=this.manageShareViewController;return this.showViewController(e),e.setUp()},goToAddParticipantsUI:function(){var e=this,t=this.activeViewController,n=$n.create(this.ioService,this.cacheingProvideRootRecordFunction,this.settings,{share:this.bindingFor("share"),permissionValueForAddingParticipants:this.permissionValueForAddingParticipants});n.start().then(function(){e.showViewController(t)}).catch(function(t){e.cancel(t)}),this.showViewController(n)},didCompleteCopyLink:function(){this.didComplete()},showCopyLink:function(){var e=this.createBoundCopyLinkViewController();this.showViewController(e)},sendLink:function(){var e=this.getPath("settings.supportedTransports");e&&e.length>1?this.goToAddParticipantsUI():this.showCopyLink()},itemIsNoLongerSharedWithMe:function(e,t){this.nextResponder&&this.nextResponder.sendEvent("itemIsNoLongerSharedWithMe",e,t),this.didComplete()},shareWasDeleted:function(e,t){this.share=e,this.nextResponder&&this.nextResponder.sendEvent("shareWasDeleted",e,t),this.didComplete()},createBoundCopyLinkViewController:function(){return this.copyLinkViewControllerClass.create({settings:this.bindingFor("settings"),share:this.bindingFor("share")})},staticMembers:{__QUALIFIED_CLASS_NAME__:"ManageShareWorkflowViewController"}}),Mi=Wn.extend({loadingShareViewController:d.b({strong:!0,get:function(){return Kn.create()}}),_gotoInitiateShare:function(e){var t=Jn.create(this.ioService,e,this.settings);this._startWorkflow(t)},_gotoManageShare:function(e){var t=Ti.create(this.ioService,e,this.settings);this._startWorkflow(t)},_startWorkflow:function(e){var t=this;this.showViewController(e),e.start().then(function(){t.didComplete()}).catch(function(e){t._promise.reject(e)})},_showLoadingUI:function(){var e=this.loadingShareViewController;this.showViewController(e)},start:function(){var e=this,t=this.cacheingProvideRootRecordFunction;return t().then(function(n){Di(n)?e._gotoManageShare(t):(e._showLoadingUI(),e.ioService.fetchDataRecord(n.recordName).then(function(t){var n=function(e){var n=e||t;return a.a.resolve(n)};Di(t)?e._gotoManageShare(n):e._gotoInitiateShare(n)}).catch(function(t){e._promise.reject(t)}))}),this._promise},staticMembers:{__QUALIFIED_CLASS_NAME__:"EasyShareWorkflowViewController"}});function Di(e){return!(!e.share||!e.share.recordName)}function Li(e){return!(!e.share||!e.share.recordName)}var Ni=Zn,Pi=Jn.extend({initiateShareViewControllerClass:Ni,isWaitingForFirstUI:!1,setUpInitiateController:function(){var e=this.initiateShareViewController;e.nextResponder=this,e.setUp()},start:function(){this.isWaitingForFirstUI=!0,this.sendEvent("workflowDesiresUilessSpinner"),this.setUpInitiateController();var e=this.settings;return e.logService.recordStat("StartedInitiateShareInSingleStepWorkflow",{appName:e.appName}),this._promise},didComplete:function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?this._promise.resolve({share:null}):this.__s._$jm$didComplete.call(this)},didCancelAddParticipant:function(){var e=this.settings,t=this.share,n={didUpdateRootRecord:e.didUpdateRootRecord,didUpdateShareRecord:e.didUpdateShareRecord};this.ioService.deleteShare(t,n).catch(function(){}),this.didComplete(!0)},shareByWebMail:function(){var e=this;return this.__s._$139$shareByWebMail.call(this).then(function(t){void 0===t&&e.didCompleteSendMessage()})},sharingUIIsReady:function(){var e=this,t=arguments,n=this.__s._$160$sharingUIIsReady.apply(this,t),i=this.initiateShareViewController,r=this.preselectedTransport;if(r)i.sendShare().then(function(t){r!==R.a.COPY_LINK&&r!==R.a.NATIVE_MAIL||void 0!==t||e.didCompleteSendMessage()});else{var a=this.share,s=this.settings,o=i.invitees,c=s.shareItemType,l=s.primaryInteractionMode,u=s.notificationService,d=s.logService,h="INVITE_TO_";a.isPrivate?h+="PRIVATE.VIA_EMAIL."+(1===o.length?"TO_PERSON":"TO_PEOPLE"):h+="PUBLIC";var p={operationType:h,appName:c,interactionMode:l};i.saveShare(!0).then(function(e){return vn(s,e,o)}).then(function(t){e.initiateShareViewController.view.footerView.mailToLink=t,e.showViewController(i)}).catch(function(t){e.isWaitingForFirstUI&&e.didCompleteSendMessage(),Object(on.a)(p,u,d)(t)})}return n},showViewController:function(e){var t=arguments;return e&&this.isWaitingForFirstUI&&(this.isWaitingForFirstUI=!1,this.sendEvent("workflowNoLongerDesiresUilessSpinner")),this.__s._$1vB$showViewController.apply(this,t)},__superMap:{_$jm$didComplete:"didComplete",_$139$shareByWebMail:"shareByWebMail",_$160$sharingUIIsReady:"sharingUIIsReady",_$1vB$showViewController:"showViewController"},staticMembers:{__QUALIFIED_CLASS_NAME__:"InitiateShareInSingleStepWorkflowViewController"}}),Ri=bn,xi=$n.extend({addParticipantsViewControllerClass:Ri,isWaitingForFirstUI:!1,setUpAddParticipantsController:function(){this.preselectedTransport||c.b("AddParticipantsInSingleStepWorkflowViewController requires, but lacks, a preselectedTransport.");var e=this.addParticipantsViewController;e.nextResponder=this,e.setUp()},start:function(){this.setUpAddParticipantsController(),this.isWaitingForFirstUI=!0,this.sendEvent("workflowDesiresUilessSpinner");var e=this.settings;return e.logService.recordStat("StartedAddParticipantsInSingleStepWorkflow",{appName:e.appName}),this._promise},sharingUIIsReady:function(){var e=arguments,t=this.__s._$ig$sharingUIIsReady.apply(this,e);return this.addParticipantsViewController.sendShare(),t},showViewController:function(e){var t=arguments;return e&&this.isWaitingForFirstUI&&(this.isWaitingForFirstUI=!1,this.sendEvent("workflowNoLongerDesiresUilessSpinner")),this.__s._$sW$showViewController.apply(this,t)},__superMap:{_$ig$sharingUIIsReady:"sharingUIIsReady",_$sW$showViewController:"showViewController"},staticMembers:{__QUALIFIED_CLASS_NAME__:"AddParticipantsInSingleStepWorkflowViewController"}}),Fi=n(510),ki={mixinDependencies:[f.a],info:g.a.define(),warn:g.a.define(),error:g.a.define()},Vi={},ji=Q.a.extend(ki,{info:function(e,t){Bi(e,t,"ck-sharing-icon")},warn:function(e,t){Bi(e,t,"ck-sharing-warn-icon")},error:function(e,t){Bi(e,t,"ck-sharing-error-icon")},staticMembers:{__QUALIFIED_CLASS_NAME__:"UserNotificationService"}});function Bi(e,t,n){var i=o.a(t)?t:Vi,r=i.locNamespace?i.locNamespace+".":"",a=i.interactionMode===cn.a.TOUCH?"Compact":"Expanded",s=function(e,t){return _.d(t,e)},c=Sn(s.bind(null,i.messageFormatValues),[r+e+"."+(i.messageLocSuffix||"Message")+"."+a,r+e+"."+(i.messageLocSuffix||"Message")]),l=Sn(s.bind(null,i.descriptionFormatValues),[r+(i.descriptionKey||e)+"."+(i.descriptionLocSuffix||"Description")+"."+a,r+(i.descriptionKey||e)+"."+(i.descriptionLocSuffix||"Description")]);void 0===l&&(l=null);var u=i.primaryButtonConfig,d=i.alternateButtonConfig;u||d||(u={keyEquivalent:[ee.a.ESC,ee.a.RETURN],title:_.d("CKSharing.ErrorDialog.OKButton.Title")});var p=Xn.a.create({iconNames:n,message:c,description:l,primaryButton:u,alternateButton:d,alertStyle:i.alertStyle});p._appendedContentController=p.contentController,h.a.application.presentViewController(p)}var Ui=n(144);function Wi(e){return(Gi||Hi())[e]}var Gi=void 0,Hi=function(){var e;return(e={})[R.a.NATIVE_MAIL]={transportValue:R.a.NATIVE_MAIL,displayName:_.d("CKSharing.AddParticipants.Transports.EmailButton.Title"),iconMouse2x:n(480),iconMouse1x:n(481),iconTouch3x:n(482),iconTouch2x:n(483),iconTouch1x:n(484),bestIconSizeMouse:74,bestIconSizeTouch:32},e[R.a.WEB_MAIL]={transportValue:R.a.WEB_MAIL,displayName:_.d("CKSharing.AddParticipants.Transports.EmailButton.Title"),iconMouse2x:n(480),iconMouse1x:n(481),iconTouch3x:n(482),iconTouch2x:n(483),iconTouch1x:n(484),bestIconSizeMouse:74,bestIconSizeTouch:32},e[R.a.SCHOOLWORK]={transportValue:R.a.SCHOOLWORK,displayName:_.d("CKSharing.AddParticipants.Transports.SchoolworkButton.Title"),iconMouse2x:n(972),iconMouse1x:n(973),iconTouch3x:void 0,iconTouch2x:void 0,iconTouch1x:void 0,bestIconSizeMouse:74,bestIconSizeTouch:32},e[R.a.COPY_LINK]={transportValue:R.a.COPY_LINK,displayName:_.d("CKSharing.AddParticipants.Transports.CopyLinkButton.Title"),iconMouse2x:n(974),iconMouse1x:n(975),iconTouch3x:n(976),iconTouch2x:n(977),iconTouch1x:n(978),bestIconSizeMouse:74,bestIconSizeTouch:32},Gi=e};n.d(t,"a",function(){return $i});var $i={initiateShare:Yi.bind(void 0,Jn),initiateShareInSingleStep:Yi.bind(void 0,Pi),addParticipants:Yi.bind(void 0,$n),addParticipantsInSingleStep:Yi.bind(void 0,xi),manageShare:Yi.bind(void 0,Ti),share:Yi.bind(void 0,Mi),createWorkflow:Ki.bind(void 0),presentWorkflow:qi.bind(void 0),unshare:function(e,t,n,i,r){var s=zi(e,t,n).retain();return Zi(i)().then(function(e){return(Li(e)?a.a.resolve(e):s.fetchDataRecord(e.recordName)).then(function(e){if(Li(e))return s.loadShareFromDataHash(e.share),s.deleteShare()}).catch(function(e){throw e})})},getSupportedTransportsForSettings:function(e){return Qi(e).retain().autorelease().supportedTransports.map(Wi)}};function zi(e,t,n){return Fi.a.create(e,t,n).retain().autorelease()}function Ki(e,t,n,i,r,a,s){var o=Qi(a),c=Zi(r);return e.create(zi(t,n,i),c,o,s)}function Qi(e){var t=void 0;if(!(t=s.a(e,jn.a)?e:jn.a.fromJSON(e||{})).logService){var n=i.a.cloudOSService;!1&!o.a(n)&&c.b("Cloudkit-Sharing: no logService available! If CKSharing is running in a non-CloudOS context, you must manually provide a logService via CKSharing.Settings"),t.logService=i.a.cloudOSService}if(t.notificationService||(t.notificationService=ji.create()),!t.loggedInUserIdentity){var a=i.a.currentUser;t.loggedInUserIdentity={givenName:a.firstName,familyName:a.lastName,appleId:a.appleId}}var u=t.supportedTransports,d=l.a(r,"globals.environment.authBag"),h=o.a(d)&&d.servicesInfo||{},p=o.a(d)&&d.apps||{};return o.a(h.mail)?u.unshift(R.a.WEB_MAIL):e.supportsNativeMail&&u.unshift(R.a.NATIVE_MAIL),-1===u.indexOf(R.a.SCHOOLWORK)&&o.a(p.schoolwork)&&t.supportsSchoolwork&&u.unshift(R.a.SCHOOLWORK),t}function qi(e){var t=Ln.create();t.showViewController(e),t.show();var n=u.a(arguments,0,1),i=e.start.apply(e,n);return function(e){var t=function e(t,n){if(t){var i=(t=t.view||t).element||t;if(i){var r=i.view&&n(i.view);if(r)return r;for(var a=i.firstChild;a;a=a.nextSibling)if(r=e(a,n))return r}}}(e,function(e){if(e.isFocusable)return e});if(t){t.focus();var n=t.element;n&&n.focus&&n.focus()}}(t),i.finally(function(){t.hide()})}function Yi(e,t,n,i,r,a,s){return qi(Ki.apply(void 0,arguments))}function Zi(e){var t=null;return function(n){return e(n||t).then(function(e){return t=e,e}).catch(Ui.d)}}},,,function(e,t,n){e.exports=!n(26)&&!n(18)(function(){return 7!=Object.defineProperty(n(368)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){t.f=n(24)},function(e,t,n){var i=n(48),r=n(51),a=n(294)(!1),s=n(370)("IE_PROTO");e.exports=function(e,t){var n,o=r(e),c=0,l=[];for(n in o)n!=s&&i(o,n)&&l.push(n);for(;t.length>c;)i(o,n=t[c++])&&(~a(l,n)||l.push(n));return l}},function(e,t,n){var i=n(27),r=n(14),a=n(232);e.exports=n(26)?Object.defineProperties:function(e,t){r(e);for(var n,s=a(t),o=s.length,c=0;o>c;)i.f(e,n=s[c++],t[n]);return e}},function(e,t,n){var i=n(51),r=n(235).f,a={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return s&&"[object Window]"==a.call(e)?function(e){try{return r(e)}catch(e){return s.slice()}}(e):r(i(e))}},function(e,t,n){"use strict";var i=n(232),r=n(295),a=n(275),s=n(31),o=n(274),c=Object.assign;e.exports=!c||n(18)(function(){var e={},t={},n=Symbol(),i="abcdefghijklmnopqrst";return e[n]=7,i.split("").forEach(function(e){t[e]=e}),7!=c({},e)[n]||Object.keys(c({},t)).join("")!=i})?function(e,t){for(var n=s(e),c=arguments.length,l=1,u=r.f,d=a.f;c>l;)for(var h,p=o(arguments[l++]),f=u?i(p).concat(u(p)):i(p),g=f.length,m=0;g>m;)d.call(p,h=f[m++])&&(n[h]=p[h]);return n}:c},function(e,t,n){"use strict";var i=n(35),r=n(19),a=n(447),s=[].slice,o={};e.exports=Function.bind||function(e){var t=i(this),n=s.call(arguments,1),c=function(){var i=n.concat(s.call(arguments));return this instanceof c?function(e,t,n){if(!(t in o)){for(var i=[],r=0;r<t;r++)i[r]="a["+r+"]";o[t]=Function("F,a","return new F("+i.join(",")+")")}return o[t](e,n)}(t,i.length,i):a(t,i,e)};return r(t.prototype)&&(c.prototype=t.prototype),c}},function(e,t){e.exports=function(e,t,n){var i=void 0===n;switch(t.length){case 0:return i?e():e.call(n);case 1:return i?e(t[0]):e.call(n,t[0]);case 2:return i?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return i?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return i?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){var i=n(15).parseInt,r=n(255).trim,a=n(374),s=/^[-+]?0[xX]/;e.exports=8!==i(a+"08")||22!==i(a+"0x16")?function(e,t){var n=r(String(e),3);return i(n,t>>>0||(s.test(n)?16:10))}:i},function(e,t,n){var i=n(15).parseFloat,r=n(255).trim;e.exports=1/i(n(374)+"-0")!=-1/0?function(e){var t=r(String(e),3),n=i(t);return 0===n&&"-"==t.charAt(0)?-0:n}:i},function(e,t,n){var i=n(57);e.exports=function(e,t){if("number"!=typeof e&&"Number"!=i(e))throw TypeError(t);return+e}},function(e,t,n){var i=n(19),r=Math.floor;e.exports=function(e){return!i(e)&&isFinite(e)&&r(e)===e}},function(e,t){e.exports=Math.log1p||function(e){return(e=+e)>-1e-8&&e<1e-8?e-e*e/2:Math.log(1+e)}},function(e,t,n){var i=n(377),r=Math.pow,a=r(2,-52),s=r(2,-23),o=r(2,127)*(2-s),c=r(2,-126);e.exports=Math.fround||function(e){var t,n,r=Math.abs(e),l=i(e);return r<c?l*(r/c/s+1/a-1/a)*c*s:(n=(t=(1+s/a)*r)-(t-r))>o||n!=n?l*(1/0):l*n}},function(e,t,n){var i=n(14);e.exports=function(e,t,n,r){try{return r?t(i(n)[0],n[1]):t(n)}catch(t){var a=e.return;throw void 0!==a&&i(a.call(e)),t}}},function(e,t,n){var i=n(35),r=n(31),a=n(274),s=n(28);e.exports=function(e,t,n,o,c){i(t);var l=r(e),u=a(l),d=s(l.length),h=c?d-1:0,p=c?-1:1;if(n<2)for(;;){if(h in u){o=u[h],h+=p;break}if(h+=p,c?h<0:d<=h)throw TypeError("Reduce of empty array with no initial value")}for(;c?h>=0:d>h;h+=p)h in u&&(o=t(o,u[h],h,l));return o}},function(e,t,n){"use strict";var i=n(31),r=n(233),a=n(28);e.exports=[].copyWithin||function(e,t){var n=i(this),s=a(n.length),o=r(e,s),c=r(t,s),l=arguments.length>2?arguments[2]:void 0,u=Math.min((void 0===l?s:r(l,s))-c,s-o),d=1;for(c<o&&o<c+u&&(d=-1,c+=u-1,o+=u-1);u-- >0;)c in n?n[o]=n[c]:delete n[o],o+=d,c+=d;return n}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){n(26)&&"g"!=/./g.flags&&n(27).f(RegExp.prototype,"flags",{configurable:!0,get:n(299)})},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,n){var i=n(14),r=n(19),a=n(392);e.exports=function(e,t){if(i(e),r(t)&&t.constructor===e)return t;var n=a.f(e);return(0,n.resolve)(t),n.promise}},function(e,t,n){"use strict";var i=n(462),r=n(257);e.exports=n(303)("Map",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){var t=i.getEntry(r(this,"Map"),e);return t&&t.v},set:function(e,t){return i.def(r(this,"Map"),0===e?0:e,t)}},i,!0)},function(e,t,n){"use strict";var i=n(27).f,r=n(234),a=n(239),s=n(56),o=n(237),c=n(238),l=n(380),u=n(457),d=n(236),h=n(26),p=n(214).fastKey,f=n(257),g=h?"_s":"size",m=function(e,t){var n,i=p(t);if("F"!==i)return e._i[i];for(n=e._f;n;n=n.n)if(n.k==t)return n};e.exports={getConstructor:function(e,t,n,l){var u=e(function(e,i){o(e,u,t,"_i"),e._t=t,e._i=r(null),e._f=void 0,e._l=void 0,e[g]=0,void 0!=i&&c(i,n,e[l],e)});return a(u.prototype,{clear:function(){for(var e=f(this,t),n=e._i,i=e._f;i;i=i.n)i.r=!0,i.p&&(i.p=i.p.n=void 0),delete n[i.i];e._f=e._l=void 0,e[g]=0},delete:function(e){var n=f(this,t),i=m(n,e);if(i){var r=i.n,a=i.p;delete n._i[i.i],i.r=!0,a&&(a.n=r),r&&(r.p=a),n._f==i&&(n._f=r),n._l==i&&(n._l=a),n[g]--}return!!i},forEach:function(e){f(this,t);for(var n,i=s(e,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(i(n.v,n.k,this);n&&n.r;)n=n.p},has:function(e){return!!m(f(this,t),e)}}),h&&i(u.prototype,"size",{get:function(){return f(this,t)[g]}}),u},def:function(e,t,n){var i,r,a=m(e,t);return a?a.v=n:(e._l=a={i:r=p(t,!0),k:t,v:n,p:i=e._l,n:void 0,r:!1},e._f||(e._f=a),i&&(i.n=a),e[g]++,"F"!==r&&(e._i[r]=a)),e},getEntry:m,setStrong:function(e,t,n){l(e,t,function(e,n){this._t=f(e,t),this._k=n,this._l=void 0},function(){for(var e=this._k,t=this._l;t&&t.r;)t=t.p;return this._t&&(this._l=t=t?t.n:this._t._f)?u(0,"keys"==e?t.k:"values"==e?t.v:[t.k,t.v]):(this._t=void 0,u(1))},n?"entries":"values",!n,!0),d(t)}}},function(e,t,n){"use strict";var i=n(462),r=n(257);e.exports=n(303)("Set",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return i.def(r(this,"Set"),e=0===e?0:e,e)}},i)},function(e,t,n){"use strict";var i,r=n(64)(0),a=n(44),s=n(214),o=n(445),c=n(465),l=n(19),u=n(18),d=n(257),h=s.getWeak,p=Object.isExtensible,f=c.ufstore,g={},m=function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},v={get:function(e){if(l(e)){var t=h(e);return!0===t?f(d(this,"WeakMap")).get(e):t?t[this._i]:void 0}},set:function(e,t){return c.def(d(this,"WeakMap"),e,t)}},_=e.exports=n(303)("WeakMap",m,v,c,!0,!0);u(function(){return 7!=(new _).set((Object.freeze||Object)(g),7).get(g)})&&(o((i=c.getConstructor(m,"WeakMap")).prototype,v),s.NEED=!0,r(["delete","has","get","set"],function(e){var t=_.prototype,n=t[e];a(t,e,function(t,r){if(l(t)&&!p(t)){this._f||(this._f=new i);var a=this._f[e](t,r);return"set"==e?this:a}return n.call(this,t,r)})}))},function(e,t,n){"use strict";var i=n(239),r=n(214).getWeak,a=n(14),s=n(19),o=n(237),c=n(238),l=n(64),u=n(48),d=n(257),h=l(5),p=l(6),f=0,g=function(e){return e._l||(e._l=new m)},m=function(){this.a=[]},v=function(e,t){return h(e.a,function(e){return e[0]===t})};m.prototype={get:function(e){var t=v(this,e);if(t)return t[1]},has:function(e){return!!v(this,e)},set:function(e,t){var n=v(this,e);n?n[1]=t:this.a.push([e,t])},delete:function(e){var t=p(this.a,function(t){return t[0]===e});return~t&&this.a.splice(t,1),!!~t}},e.exports={getConstructor:function(e,t,n,a){var l=e(function(e,i){o(e,l,t,"_i"),e._t=t,e._i=f++,e._l=void 0,void 0!=i&&c(i,n,e[a],e)});return i(l.prototype,{delete:function(e){if(!s(e))return!1;var n=r(e);return!0===n?g(d(this,t)).delete(e):n&&u(n,this._i)&&delete n[this._i]},has:function(e){if(!s(e))return!1;var n=r(e);return!0===n?g(d(this,t)).has(e):n&&u(n,this._i)}}),l},def:function(e,t,n){var i=r(a(t),!0);return!0===i?g(e).set(t,n):i[e._i]=n,e},ufstore:g}},function(e,t,n){var i=n(62),r=n(28);e.exports=function(e){if(void 0===e)return 0;var t=i(e),n=r(t);if(t!==n)throw RangeError("Wrong length!");return n}},function(e,t,n){var i=n(235),r=n(295),a=n(14),s=n(15).Reflect;e.exports=s&&s.ownKeys||function(e){var t=i.f(a(e)),n=r.f;return n?t.concat(n(e)):t}},function(e,t,n){"use strict";var i=n(296),r=n(19),a=n(28),s=n(56),o=n(24)("isConcatSpreadable");e.exports=function e(t,n,c,l,u,d,h,p){for(var f,g,m=u,v=0,_=!!h&&s(h,p,3);v<l;){if(v in c){if(f=_?_(c[v],v,n):c[v],g=!1,r(f)&&(g=void 0!==(g=f[o])?!!g:i(f)),g&&d>0)m=e(t,n,f,a(f.length),m,d-1)-1;else{if(m>=9007199254740991)throw TypeError();t[m]=f}m++}v++}return m}},function(e,t,n){var i=n(28),r=n(376),a=n(61);e.exports=function(e,t,n,s){var o=String(a(e)),c=o.length,l=void 0===n?" ":String(n),u=i(t);if(u<=c||""==l)return o;var d=u-c,h=r.call(l,Math.ceil(d/l.length));return h.length>d&&(h=h.slice(0,d)),s?h+o:o+h}},function(e,t,n){var i=n(232),r=n(51),a=n(275).f;e.exports=function(e){return function(t){for(var n,s=r(t),o=i(s),c=o.length,l=0,u=[];c>l;)a.call(s,n=o[l++])&&u.push(e?[n,s[n]]:s[n]);return u}}},function(e,t,n){var i=n(276),r=n(472);e.exports=function(e){return function(){if(i(this)!=e)throw TypeError(e+"#toJSON isn't generic");return r(this)}}},function(e,t,n){var i=n(238);e.exports=function(e,t){var n=[];return i(e,!1,n.push,n,t),n}},function(e,t){e.exports=Math.scale||function(e,t,n,i,r){return 0===arguments.length||e!=e||t!=t||n!=n||i!=i||r!=r?NaN:e===1/0||e===-1/0?e:(e-t)*(r-i)/(n-t)+i}},function(e,t,n){"use strict";function i(e,t,n){return t in e||(e[t]=n),e}var r,a,s=window.Window;s&&(r=s.prototype);var o=window.HTMLDocument;o&&(a=o.prototype);var c=Element.prototype,l=[];if(!("addEventListener"in c)){var u=function(e,t,n){if(n)throw new Error("The optional `useCapture` argument is not supported in this browser");for(var i=0,r=l.length;i<r;i++){var a=l[i];if(a.type===e&&a.listener===t)return}var s=this,o=function(e){e.target=e.srcElement,e.currentTarget=s,t.call(s,e)},c=e,u=o;if("DOMContentLoaded"===e&&(c="readystatechange",u=function(e){"complete"===document.readyState&&o(e)},"complete"===document.readyState)){var d=document.createEventObject();d.srcElement=window,u(d)}this.attachEvent("on"+c,u),l.push({object:this,type:e,listener:t,wrapper:u})};i(c,"addEventListener",u),r&&i(r,"addEventListener",u),a&&i(a,"addEventListener",u)}if(!("removeEventListener"in c)){var d=function(e,t,n){if(n)throw new Error("The optional `useCapture` argument is not supported in this browser");for(var i=-1,r=l.length;++i<r;){var a=l[i];if(a.object===this&&a.type===e&&a.listener===t){var s;s="DOMContentLoaded"===e?"readystatechange":e,this.detachEvent("on"+s,a.wrapper),l.splice(i,1);break}}};i(c,"removeEventListener",d),r&&i(r,"removeEventListener",d),a&&i(a,"removeEventListener",d)}if(!c.hasOwnProperty("classList")){var h=function(e){this.element=e},p=h.prototype;p.item=function(e){var t=this.element.getAttribute("class"),n=t?t.trim().split(/\s+/):null;return n?n[e]:void 0},p.contains=function(e){var t=this.element.getAttribute("class");return(t?" "+t+" ":"").indexOf(" "+e+" ")>-1},p.add=function(){for(var e=this.element,t=e.getAttribute("class"),n=t?" "+t+" ":" ",i=!1,r=arguments.length,a=0;a<r;a++){var s=arguments[a]+" ";-1===n.indexOf(" "+s)&&(n+=s,i=!0)}i&&e.setAttribute("class",n.substring(1,n.length-1))},p.remove=function(){for(var e=this.element,t=e.getAttribute("class"),n=t?" "+t+" ":" ",i=!1,r=arguments.length,a=0;a<r;a++)for(var s,o=arguments[a],c=" "+o+" ";(s=n.indexOf(c))>-1;)n=n.substr(0,s)+n.substr(s+o.length+1),i=!0;i&&(" "===(n=n.substring(1,n.length-1))&&(n=""),e.setAttribute("class",n))},p.toggle=function(e,t){var n=this.contains(e),i=!1;return 2===arguments.length?(n&&!t&&(i="remove"),!n&&t&&(i="add")):i=n?"remove":"add",i?(this[i](e),!n):n},p.toString=function(){return this.element.getAttribute("class")||""},Object.defineProperty&&Object.defineProperty(c,"classList",{get:function(){return new h(this)},configurable:!0})}if(window.DOMTokenList){var f=window.DOMTokenList.prototype,g=document.createElement("div");if(!1!==g.classList.toggle("polyfill-test-class",!1)){var m=f.toggle;f.toggle=function(e,t){if(1===arguments.length)return m.call(this,e);var n=this.contains(e),i=t?!n&&"add":!!n&&"remove";return i?(this[i](e),!n):n}}if(g.classList.add("foo","bar","baz"),!g.classList.contains("baz")){var v=f.add;f.add=function(){for(var e=arguments.length,t=0;t<e;t++)v.call(this,arguments[t])}}if(g.classList.add("foo","bar","baz"),g.classList.remove("foo","bar","baz"),g.classList.contains("baz")){var _=f.remove;f.remove=function(){for(var e=arguments.length,t=0;t<e;t++)_.call(this,arguments[t])}}}i(c,"addEventListener",u),i(window,"addEventListener",u),i(c,"removeEventListener",d),i(window,"removeEventListener",d),i(window.document,"contains",function(){var e=this.documentElement;return e.contains.apply(e,arguments)});var b=CSSStyleDeclaration.prototype;"setProperty"in b||i(b,"setProperty",function(e,t){return this.setAttribute.call(this,e,t)})},function(e,t,n){"use strict";e.exports=u;var i,r=n(240),a=r.LongBits,s=r.base64,o=r.utf8;function c(e,t,n){this.fn=e,this.len=t,this.next=void 0,this.val=n}function l(){}function u(){this.len=0,this.head=new c(l,0,0),this.tail=this.head,this.states=null}function d(e,t,n){t[n]=255&e}function h(e,t){this.len=e,this.next=void 0,this.val=t}function p(e,t,n){for(;e.hi;)t[n++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[n++]=127&e.lo|128,e.lo=e.lo>>>7;t[n++]=e.lo}function f(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}u.create=r.Buffer?function(){return(u.create=function(){return new i})()}:function(){return new u},u.alloc=function(e){return new r.Array(e)},r.Array!==Array&&(u.alloc=r.pool(u.alloc,r.Array.prototype.subarray)),u.prototype._push=function(e,t,n){return this.tail=this.tail.next=new c(e,t,n),this.len+=t,this},h.prototype=Object.create(c.prototype),h.prototype.fn=function(e,t,n){for(;e>127;)t[n++]=127&e|128,e>>>=7;t[n]=e},u.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new h((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},u.prototype.int32=function(e){return e<0?this._push(p,10,a.fromNumber(e)):this.uint32(e)},u.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},u.prototype.uint64=function(e){var t=a.from(e);return this._push(p,t.length(),t)},u.prototype.int64=u.prototype.uint64,u.prototype.sint64=function(e){var t=a.from(e).zzEncode();return this._push(p,t.length(),t)},u.prototype.bool=function(e){return this._push(d,1,e?1:0)},u.prototype.fixed32=function(e){return this._push(f,4,e>>>0)},u.prototype.sfixed32=u.prototype.fixed32,u.prototype.fixed64=function(e){var t=a.from(e);return this._push(f,4,t.lo)._push(f,4,t.hi)},u.prototype.sfixed64=u.prototype.fixed64,u.prototype.float=function(e){return this._push(r.float.writeFloatLE,4,e)},u.prototype.double=function(e){return this._push(r.float.writeDoubleLE,8,e)};var g=r.Array.prototype.set?function(e,t,n){t.set(e,n)}:function(e,t,n){for(var i=0;i<e.length;++i)t[n+i]=e[i]};u.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(d,1,0);if(r.isString(e)){var n=u.alloc(t=s.length(e));s.decode(e,n,0),e=n}return this.uint32(t)._push(g,t,e)},u.prototype.string=function(e){var t=o.length(e);return t?this.uint32(t)._push(o.write,t,e):this._push(d,1,0)},u.prototype.fork=function(){return this.states=new function(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}(this),this.head=this.tail=new c(l,0,0),this.len=0,this},u.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new c(l,0,0),this.len=0),this},u.prototype.ldelim=function(){var e=this.head,t=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=e.next,this.tail=t,this.len+=n),this},u.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),n=0;e;)e.fn(e.val,t,n),n+=e.len,e=e.next;return t},u._configure=function(e){i=e}},function(e,t,n){"use strict";e.exports=c;var i,r=n(240),a=r.LongBits,s=r.utf8;function o(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function c(e){this.buf=e,this.pos=0,this.len=e.length}var l,u="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new c(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new c(e);throw Error("illegal buffer")};function d(){var e=new a(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw o(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw o(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function h(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function p(){if(this.pos+8>this.len)throw o(this,8);return new a(h(this.buf,this.pos+=4),h(this.buf,this.pos+=4))}c.create=r.Buffer?function(e){return(c.create=function(e){return r.Buffer.isBuffer(e)?new i(e):u(e)})(e)}:u,c.prototype._slice=r.Array.prototype.subarray||r.Array.prototype.slice,c.prototype.uint32=(l=4294967295,function(){if(l=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return l;if((this.pos+=5)>this.len)throw this.pos=this.len,o(this,10);return l}),c.prototype.int32=function(){return 0|this.uint32()},c.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},c.prototype.bool=function(){return 0!==this.uint32()},c.prototype.fixed32=function(){if(this.pos+4>this.len)throw o(this,4);return h(this.buf,this.pos+=4)},c.prototype.sfixed32=function(){if(this.pos+4>this.len)throw o(this,4);return 0|h(this.buf,this.pos+=4)},c.prototype.float=function(){if(this.pos+4>this.len)throw o(this,4);var e=r.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},c.prototype.double=function(){if(this.pos+8>this.len)throw o(this,4);var e=r.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},c.prototype.bytes=function(){var e=this.uint32(),t=this.pos,n=this.pos+e;if(n>this.len)throw o(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,n):t===n?new this.buf.constructor(0):this._slice.call(this.buf,t,n)},c.prototype.string=function(){var e=this.bytes();return s.read(e,0,e.length)},c.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw o(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw o(this)}while(128&this.buf[this.pos++]);return this},c.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},c._configure=function(e){i=e;var t=r.Long?"toLong":"toNumber";r.merge(c.prototype,{int64:function(){return d.call(this)[t](!1)},uint64:function(){return d.call(this)[t](!0)},sint64:function(){return d.call(this).zzDecode()[t](!1)},fixed64:function(){return p.call(this)[t](!0)},sfixed64:function(){return p.call(this)[t](!1)}})}},function(e,t){e.exports='<svg version="1.0" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 38 50"><polyline fill="none" stroke-width="2" points="12,8 19,1 26,8 "/><line fill="none" stroke-width="2" x1="19" y1="1" x2="19" y2="34"/><polyline fill="none" stroke-width="2" points="24,15 37,15 37,49 1,49 1,15 14,15 "/></svg>'},function(e,t){e.exports='<svg version="1.0" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 34 46"><polyline fill="none" stroke-width="2" points="0,7 9,7 34,7 "/><path fill="none" stroke-width="2" d="M9,6c0,0,0-2,0-3s1-2,2-2c1.7,0,10.3,0,12,0c1,0,2,1,2,2s0,3,0,3"/><line fill="none" stroke-width="2" x1="17" y1="12" x2="17" y2="40"/><line fill="none" stroke-width="2" x1="10" y1="12" x2="11.5" y2="40"/><line fill="none" stroke-width="2" x1="22.5" y1="40" x2="24" y2="12"/><path fill="none" stroke-width="2" d="M3,7c0,0,2,34,2,35c0,2,1,3,3,3c1,0,17,0,18,0c2,0,3-1,3-3c0-1,2-35,2-35"/></svg>'},function(e,t,n){},function(e,t,n){(function(t){e.exports=t.__CW_BLOB_URLS[62]}).call(this,n(6))},function(e,t,n){(function(t){e.exports=t.__CW_BLOB_URLS[48]}).call(this,n(6))},function(e,t,n){(function(t){e.exports=t.__CW_BLOB_URLS[61]}).call(this,n(6))},function(e,t,n){(function(t){e.exports=t.__CW_BLOB_URLS[60]}).call(this,n(6))},function(e,t,n){(function(t){e.exports=t.__CW_BLOB_URLS[55]}).call(this,n(6))},function(e,t,n){},function(e,t,n){},function(e,t){e.exports="/applications/photos3/1906Hotfix1/en-us/r$__63.svg"},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="#000" viewBox="0 0 19 15">\n    <polyline points="18.012908935546875,2 6.54241943359375,12.891815185546875 2,8.348480224609375"/>\n</svg>\n'},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var i=n(36),r=n(121),a=n(41),s=n(180),o=n(799),c=n(1187),l=n(1279),u=n(34),d=n(65),h=(n(125),n(1184),n(1195),n(46)),p=(n(1217),n(412)),f=n(243),g=n(1133),m=[],v=document.getCSSCanvasContext instanceof Function,_=f.a.extend({isLoaded:u.b({readOnly:!0,dependencies:["element"],get:Object.assign(function(){return Boolean(this.element)},{__CW__getter:function(e,t,n,i){return Boolean(i.internalGet(this,t[0+n]))}})}),element:u.b(),imageBitmap:null,drawableEntity:a.c({readOnly:!0,get:function(){return this.imageBitmap||this.element}}),drawIntoContext:function(e,t,n,i,r,a,s,o,c){return this.drawIntoContextUsingCustomDrawImage(e,b,t,n,i,r,a,s,o,c,arguments.length+1)},drawIntoContextUsingCustomDrawImage:function(e,t,n,i,r,a,s,o,c,l,u){var h=this.rectInElement;h||d.b("Attempting to draw an ImageDerivative that is not ready.");var p=h.width,f=h.height;return(u||arguments.length)-1<9&&(s=n,o=i,c=r||p,l=a||f,n=0,i=0,r=p,a=f),n+=h.x,i+=h.y,t(e,this.drawableEntity,n,i,r,a,s,o,c,l)},rectInElement:u.b({readOnly:!0,dependencies:["element"],get:Object.assign(function(){var e=this.element;if(!e)return null;var t=this._reusableRect||(this._reusableRect={});return t.x=t.y=0,t.width=e.naturalWidth||e.width,t.height=e.naturalHeight||e.height,t},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);if(!r)return null;var a=this._reusableRect||(this._reusableRect={});return a.x=a.y=0,a.width=r.naturalWidth||r.width,a.height=r.naturalHeight||r.height,a}})}),toCanvas:function(){if(this.isLoaded){var e=h.d.getInstance();return e.width=this.physicalWidth,e.height=this.physicalHeight,this.drawIntoContext(e.getContext("2d"),0,0),e}},toAppendableImagelike:function(){if(!v)return this.toCanvas();if(this.isLoaded){var e=h.e.getInstance();e.width=this.physicalWidth,e.height=this.physicalHeight;var t=e.style;return t.backgroundSize="cover",t.backgroundRepeat="none",t.pointerEvents="none",t.backgroundImage="-webkit-canvas("+this.cssCanvasContextID+")",e}},cssCanvasContextID:a.c({get:function(){var e=this._cssCanvasContextId;if(e)return e;e="cssCanvasContext_for_"+r.a(this);var t=document.getCSSCanvasContext("2d",e,this.physicalWidth,this.physicalHeight);return this.drawIntoContext(t,0,0),this._cssCanvasContext=t,this._cssCanvasContextId=e,e},set:function(e){void 0!==e&&d.b("To clear the CSS Canvas Context, assign `undefined` to it.");var t=this._cssCanvasContext;t&&(t.canvas.width=t.canvas.height=0),this._cssCanvasContext=this._cssCanvasContextId=void 0}}),checkOutAppendableImagelike:function(e){if(this.isLoaded){var t=this.canCheckOutInternalImage,n=t?this.element:this.toAppendableImagelike();return this._markImageAsCheckedOutFromThis(n),t&&(this.internalImageUser=e||!0),n}},internalImageUser:u.b(),canCheckOutInternalImage:u.b({readOnly:!0,dependencies:["element","rectInElement","internalImageUser"],get:Object.assign(function(){if(this.internalImageUser)return!1;var e=this.element,t=this.rectInElement;return e.width===t.width&&e.height===t.height},{__CW__getter:function(e,t,n,i){if(i.internalGet(this,t[2+n]))return!1;var r=this.element,a=this.rectInElement;return r.width===a.width&&r.height===a.height}})}),_markImageAsCheckedOutFromThis:function(e){e._id_isCheckedOutFromOwner||(e._id_retainCount=0,e._id_isCheckedOutFromOwner=this,e.retain=this._retainCheckedOutImage,e.release=this._releaseCheckedOutImage)},_unmarkImageAsCheckedOut:function(e){delete e._id_isCheckedOutFromOwner,delete e._id_retainCount,delete e.retain,delete e.release},_retainCheckedOutImage:function(){return this._id_retainCount++,this},_releaseCheckedOutImage:function(){return--this._id_retainCount||this._id_isCheckedOutFromOwner._handleFinalReleaseOfCheckedOutImage(this),this},_handleFinalReleaseOfCheckedOutImage:function(e){this._unmarkImageAsCheckedOut(e),this.isDisposed||e!==this.element||(this.internalImageUser=null),this._giveElementBackToAppropriatePoolIfUnused(e)},_giveElementBackToAppropriatePoolIfUnused:function(e){switch(!0){case Boolean(e._id_isCheckedOutFromOwner):case!this.isDisposed&&e===this.element:return;case e instanceof Image:return void h.f.disposeInstance(e);case e instanceof HTMLCanvasElement:return void h.d.disposeInstance(e);case e instanceof HTMLDivElement:return delete e.width,delete e.height,e.style.cssText="",void h.e.disposeInstance(e);default:return}},cleanup:function(){var e=arguments,t=this.element;t&&(this.element=null,this._giveElementBackToAppropriatePoolIfUnused(t)),this.internalImageUser=null;var n=this.imageBitmap;n&&(this.imageBitmap=null,n.close()),this.cssCanvasContextID=void 0,this.__s._$2p6$cleanup.apply(this,e)},resetForChangeset:function(){var e=arguments;g.a.cancelAllRefsForDerivativeId(this.derivativeId),this.__s._$2rs$resetForChangeset.apply(this,e)},createResampledDerivative:function(e,t,i){if(this.isLoaded){var r=e/this.physicalGeometricLength;if(!t&&r>=1)return null;var a=h.d.getInstance(),s=Math.round(this.physicalWidth*r),o=Math.round(this.physicalHeight*r);(t||y).call(this,a,s,o);var c=this.media.constructor,l=c.synthesizeDerivativeInfo(this,a.width,a.height,i),u=n(490).imageDerivativeStore.getItem(l,c).retain(this);return u.element=a,u.release(this),u}},_load:function(e){return g.a.makeRequestForDerivative(this,e)},_debug_display:function(e,t,n){},__superMap:{_$2p6$cleanup:"cleanup",_$2rs$resetForChangeset:"resetForChangeset"},staticMembers:{__QUALIFIED_CLASS_NAME__:"ImageDerivative"}}),b=function(e){var t=arguments.length;m.length=t+0-1;for(var n=1,i=0;n<t;n++,i++)m[i]=arguments[n];var r=m;return e.drawImage.apply(e,r)},y=function(e,t,n){e.width=t,e.height=n,this.drawIntoContextUsingCustomDrawImage(e.getContext("2d"),p.a,0,0,t,n)},I=n(99);n.d(t,"imageDerivativeStore",function(){return w});var w=l.a.extend({itemClass:_.extend({_currentPixelCountContribution:0,_pixelCountDidChange:i.f("rectInElement",function(e){if(this.isInitialized){var t=e&&e.width*e.height|0;this.ownerObjectStore._livingPixelCount+=t-this._currentPixelCountContribution,this._currentPixelCountContribution=t,this.ownerObjectStore.pruneCache()}})}),computeStoreKey:function(e,t){return e.derivativeId+r.a(t)},_livingPixelCount:0,isCacheSizeAcceptable:function(){return!!I.a.enableDerivativeCache&&this._livingPixelCount<=this._maxPixelCount},_maxPixelCount:a.c({defaultValue:1e6*I.a.maxStoredMegapixels,set:function(e){return this.__maxPixelCount=e,this.isInitialized&&this.pruneCache(),e}}),_cacheBleeder:s.b(o.a.extend({delay:1e3,timesToFire:1/0,_beginCacheBleed:i.f("appDidBecomeSuspended","windowDidBlur",function(e,t){!e&&!t||this.isRunning||(this._targetPixelCount=1e6*I.a.maxStoredMegapixelsInBackground,this._currentAmountOverTarget=this.owner._maxPixelCount-this._targetPixelCount,this.start())}),_reinstateCacheLimit:i.f("appDidBecomeActive","windowDidFocus",function(e,t){(e||t)&&(this.stop(),this.owner._maxPixelCount=1e6*I.a.maxStoredMegapixels)}),callAction:function(){this._currentAmountOverTarget/=Math.pow(2,this.delay/I.a.maxStoredMegapixelsHalfLife),this._currentAmountOverTarget-=1e6*I.a.maxStoredMegapixelsLinearBleed;var e=this._targetPixelCount+this._currentAmountOverTarget;e<this._targetPixelCount&&(e=this._targetPixelCount,this.stop()),this.owner._maxPixelCount=e},appDidBecomeSuspended:i.g(),appDidBecomeActive:i.g(),windowDidBlur:i.g(),windowDidFocus:i.g(),init:function(){var e=arguments;this.__s._$1E8$init.apply(this,e),c.a(window,"blur",this.windowDidBlur.bind(this)),c.a(window,"focus",this.windowDidFocus.bind(this))},__superMap:{_$1E8$init:"init"}})),_debug_statsString:function(){var e=this.items,t=this.cachedItems,n=this._maxPixelCount,i=function(e){return e?e.toArray().reduce(function(e,t){return e+t.physicalWidth*t.physicalHeight},0):0},r=function(e){return e?e.length:0},a=function(e){return(e/1e4|0)/100+" MP"},s=function(e){return r(e)+" ("+a(i(e))+")"};return"Total Derivative Storage: "+s(e)+".\n    Retained: "+(r(e)-r(t))+" ("+a(i(e)-i(t))+").\n    Purgeable: "+s(t)+".\nCache limit: "+a(n)+".\n"},_debug_showAllDerivatives:function(){},_debug_showAllCachedDerivatives:function(){},staticMembers:{__QUALIFIED_CLASS_NAME__:"ImageDerivativeStore"}}).create()},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n(561),r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(t,n,i){!function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this._postMessageTarget=t,this._postMessageTargetOrigin=n,this._buildInfo=i}return e.prototype.exceptionHandler=function(e){var t=Object.assign(Object(i.a)(e),{buildInfo:this._buildInfo}),n=this._createCrashMessage(t);this._postMessageTarget.postMessage(n,this._postMessageTargetOrigin)},e.prototype._createCrashMessage=function(e){var t={jsonrpc:"2.0",method:"MessagingFromChildProtocol-didEnd",params:["UNCAUGHT_EXCEPTION",e]};return JSON.stringify(t)},r(e,[{key:"isExceptionHandlingEnabled",get:function(){return!0}},{key:"isExceptionHandlingFatal",get:function(){return!0}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n(77),r=n(131),a=i.a.extend({action:function(){Object(r.b)()},staticMembers:{__QUALIFIED_CLASS_NAME__:"MobileBrowserInitializer"}})},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return l});var i=n(77),r=n(1187),a=n(1184),s=n(784),o=n(1198),c=n(131),l=i.a.extend({action:function(){var t;t=!1,u&&(t={passive:!1,useCapture:!0}),r.a(document.body,"touchmove",function(e){return e.preventDefault()},t),c.a.sharedInstance.isiPhone&&!Object(o.b)()&&(d(),r.a(e,"resize",d),r.a(e,"orientationchange",function(){return a.a(d,400)}))},staticMembers:{__QUALIFIED_CLASS_NAME__:"DisableTouchScrollingInitializer"}}),u=function(){var t=!1;try{e.addEventListener("test",null,{get passive(){t=!0}})}catch(e){}return t}();function d(){c.a.sharedInstance.isiPhone&&e.innerHeight<e.innerWidth&&(s.b.debug("Adjusting scroll position for landscape orientation current scrollY: "+e.scrollY),e.scrollTo(0,1),a.a(function(){return e.scrollTo(0,0)},0))}}).call(this,n(6))},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var i=n(80),r=n(781),a=n(41),s=n(65),o=n(1197),c=n(321),l=i.a.extend({mixinDependencies:[r.a],configurationProvider:a.c({type:c.a}),webServices:a.c({readOnly:!0,type:Map,get:function(){var e=this.configurationProvider;return e||s.b("[WebServicesConfiguration] No configuration provider found"),e?e.webServices:void 0}}),hasWebService:function(e){var t=this.webServices;return!!t&&!!u(t,e,"hasWebService",!1)},isWebServiceActive:function(e){return"active"===u(this.webServices,e,"isWebServiceActive").status},urlForServiceName:function(e,t){return u(this.webServices,e,"urlForServiceName").url+"/"+t},staticMembers:{__QUALIFIED_CLASS_NAME__:"WebServicesConfiguration"}});function u(e,t,n){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];e||s.b(n+": No services found"),o.a(t)&&s.b(n+": a serviceName must be specified");var r=e.get(t);return i&&!r&&s.b(n+": Service "+t+" was not found"),r}},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n(65),r=n(1185),a=n(784),s=n(1273);function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"icloud.com";e||i.b("[RegionFormatter] No locale specfied info");var a=void 0,s="https://www."+n+"/locales/";if(t){var o=t.version,u=t.rules,d=t.baseUrl;o===l.rulesVersion&&u?(l.registerRegionFormat(u),a=r.a.resolve()):a=c(e,d||s,l.rulesVersion)}else a=c(e,s,l.rulesVersion);return a}function c(e,t,n){e||i.b("[RegionFormatter] no locale specified to load"),t||i.b("[RegionFormatter] no base url specified to load from"),n||i.b("[RegionFormatter] no version specified to load"),t=t.replace(/\/$/,"");var r=s.a.create({urlString:t+"/"+n,requestProperties:{useCredentialsIfCrossOrigin:!1}});return l.loadFormattingRules(r,e).catch(function(e){a.b.error("Could not load formatting rules",e)})}var l=n(552).a.create({rulesVersion:5})},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n(80),r=n(553),a=i.a.extend(r.a,{regionFormat:"",formattingRules:{},serializedProperties:["regionFormat","formattingRules"],toString:function(){return this.serialize()},staticMembers:{__QUALIFIED_CLASS_NAME__:"Response"}})},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n(81),r=regeneratorRuntime.mark(c),a=i.b.Possible,s=i.b.Ended,o=i.b.Failed;function c(e){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return void(e.next=2);case 2:if((t=e.sent)===a){e.next=5;break}throw new Error("DiscreteGestureRecognizer: state must be initialized to Possible.");case 5:return void(e.next=7);case 7:if((t=e.sent)!==o){e.next=12;break}return e.abrupt("return");case 12:if(t!==s){e.next=16;break}return e.abrupt("return");case 16:throw new Error("GestureRecognizer: invalid state "+t+" for DiscreteGestureRecognizer after Possible. Must be either Ended or Failed.");case 17:case"end":return e.stop()}},r,this)}},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return T});var i=n(177),r=n(120),a=n(1174),s=n(80),o=n(122),c=n(36),l=n(34),u=n(41),d=n(65),h=n(1187),p=n(1184),f=n(1176),g=n(69),m=n(1195),v=n(1214),_=n(849),b=n(46),y=n(155),I=n(83),w=n(99),S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},C=i.b("State",{UNLOADED:"unloaded",LOADING:"loading",PREPARING:"preparing",LOADED:"loaded",ERRORED:"errored"}),O=e.URL||e.webkitURL,A=r.a.sharedInstance.isSafari&&6===r.a.sharedInstance.majorVersion,E=a.a((new Image).decode),T=s.a.extend(o.a,c.a,_.a).extend({requiresLoadProgressAndPerfectCancelability:!0,staticMembers:{State:C,loggingRequests:[],__QUALIFIED_CLASS_NAME__:"ImageRequest"},state:l.b({isRevertible:!0,defaultValue:C.UNLOADED,didChange:function(e){var t=this._lastState;this._lastState=e,e===C.LOADED&&this._dlm_didFinish&&this._dlm_didFinish(this),e===C.ERRORED&&this._dlm_didFail&&this._dlm_didFail(this),e!==C.UNLOADED||t!==C.LOADING&&t!==C.PREPARING||this._dlm_wasCanceled(this)}}),url:l.b({isRevertible:!0,defaultValue:""}),progress:l.b({isRevertible:!0,defaultValue:NaN}),image:l.b({isRevertible:!0,defaultValue:null}),imageBitmap:l.b({isRevertible:!0,defaultValue:null}),mimeType:u.c({isRevertible:!0,defaultValue:null}),shouldCheckOrientation:u.c({isRevertible:!0,defaultValue:!1}),_remainingLoadAttemptCount:u.c({isRevertible:!0,defaultValue:3}),_totalLoadAttemptsMade:u.c({readOnly:!0,get:function(){return 3-this._remainingLoadAttemptCount}}),_shouldUseArrayBufferModeOnXHR:u.c({readOnly:!0,get:function(){return this.shouldCheckOrientation||A}}),_internalImage:null,_exifOrientation:u.c({isRevertible:!0,defaultValue:NaN}),_xhr:u.c(function(){return new XMLHttpRequest}),_dlm_didFinish:u.c({isRevertible:!0,defaultValue:null}),_dlm_didFail:u.c({isRevertible:!0,defaultValue:null}),_dlm_wasCanceled:u.c({isRevertible:!0,defaultValue:null}),_dlm_refGroup:u.c({isRevertible:!0,defaultValue:null}),_dlm_derivative:u.c({isRevertible:!0,defaultValue:null,strong:!0}),cleanup:function(){var e=arguments;this.reset(),this.__s._$1TY$cleanup.apply(this,e)},reset:function(){this._cleanUpXHR(),this.state===C.PREPARING&&this._cleanUpAndGiveBackInternalImage();var e=this.image;e instanceof Image&&b.f.disposeInstance(e),e instanceof HTMLCanvasElement&&b.d.disposeInstance(e);var t=this.imageBitmap;t&&t.close(),this.revertRevertibleProperties()},open:function(e,t,n){this.state!==C.UNLOADED&&this.reset(),this.url=e,this.mimeType=t,this.shouldCheckOrientation=n,n&&"image/jpeg"!==t&&d.b("We incorrectly think we need to check orientation on non-jpeg images.")},send:function(){this.state=C.LOADING,this.requiresLoadProgressAndPerfectCancelability||this.shouldCheckOrientation?this._sendWithXHR():this._sendWithImage()},shouldLogTimingOfRequest:u.c(!1),loggingRequestId:u.c(!1),_requestSentTime:0,_sendWithXHR:function(){var e=this._xhr;e.open("GET",this.url,!0),e.responseType=this._shouldUseArrayBufferModeOnXHR?"arraybuffer":"blob",h.a(e,"readystatechange",this._handleXHRReadyStateChange),h.a(e,"progress",this._handleXHRProgress);var t=w.a.extraImageRequestDelayMax;if(t){var n=w.a.extraImageRequestDelayMin,i=Math.random()*(t-n)+n;this._delayedSendTimeout=p.a(f.a(e.send,e,null),i)}else this.shouldLogTimingOfRequest&&(this._requestSentTime=Date.now()),e.send(null)},_sendWithImage:function(){this.state=C.PREPARING,this._exifOrientation=1;var e=w.a.extraImageRequestDelayMax;if(e){var t=w.a.extraImageRequestDelayMin,n=Math.random()*(e-t)+t;this._delayedSendTimeout=p.a(y.a(this._loadImageFromSrc,this,this.url),n)}else this._loadImageFromSrc(this.url)},_handleXHRReadyStateChange:I.a(function(){if(this.state===C.LOADING){var e=this._xhr;return e.readyState>=2&&200!==e.status?this._xhrLoadDidFail():3===e.readyState&&200===e.status?this._checkForLogging():4===e.readyState&&200===e.status?this._xhrLoadDidFinish():void 0}}),_checkForLogging:function(){if(this._requestSentTime>0){var e=Date.now()-this._requestSentTime,t={};t[this.isDynamicResJPEGMedResRequest?"dynamicResDerivativeTiming":"normalResDerivativeTiming"]=e;var n=this.constructor.loggingRequests[this.loggingRequestId];if(n){var i=this._dlm_derivative,r=i&&i.byteSize;r=r||0;var a=i&&i.media&&i.media.primaryMaster,s=a&&a.itemType,o=g.b().feedbackService;r=o.getSignificantNum(r);var c=S({size:r,fileType:s,width:i&&i.width,height:i&&i.height},t,n);o&&o.report("dynamicResDerivativeData",c)}else this.constructor.loggingRequests[this.loggingRequestId]=t;this._requestSentTime=0}},_handleXHRProgress:I.a(function(e){this.state===C.LOADING&&(this.progress=e.lengthComputable?e.loaded/e.total:NaN)}),_loadDidFail:function(){this.state=C.ERRORED},_xhrLoadDidFail:function(){if(this._cleanUpXHR(),--this._remainingLoadAttemptCount>0)this._sendWithXHR();else{if(this._totalLoadAttemptsMade>1){var e=g.b().feedbackService;e&&e.report("cvwsRequestFailure",{totalLoadAttemptsMade:this._totalLoadAttemptsMade})}this._loadDidFail()}},_cleanUpXHR:function(){clearTimeout(this._delayedSendTimeout);var e=this._xhr;m.a(e,"readystatechange",this._handleXHRReadyStateChange),m.a(e,"progress",this._handleXHRProgress),e.abort()},_xhrLoadDidFinish:function(){if(this._totalLoadAttemptsMade>1){var e=g.b().feedbackService;e&&e.report("cvwsRequestRetry",{totalLoadAttemptsMade:this._totalLoadAttemptsMade})}if(this.state=C.PREPARING,this._shouldUseArrayBufferModeOnXHR){var t=this._xhr.response,n=1;if(this.shouldCheckOrientation){var i=v.a.read(t);i&&(n=i.Orientation)}this._exifOrientation=n,this._loadImageFromArrayBuffer(t)}else this._exifOrientation=1,this._loadImageFromBlob(this._xhr.response)},_loadImageFromArrayBuffer:function(e){M[0]=e,D.type=this.mimeType,this._loadImageFromBlob(new Blob(M,D)),M[0]=null,D.type=null},_loadImageFromBlob:function(e){this._loadImageFromSrc(O.createObjectURL(e))},_loadImageFromSrc:function(e){var t=this._internalImage=b.f.getInstance();h.a(t,"load",E?this._imageLoadDidReachDecodability:this._imageLoadDidFinish),h.a(t,"error",this._imageLoadDidFail),t.src=e},_imageLoadDidReachDecodability:I.a(function(){this.retain(this,"self-retain during async image decode"),this._internalImage.decode().then(this._imageDecodeDidFinish,this._imageDecodeDidFail)}),_imageDecodeDidFinish:I.b(function(){this.autorelease(this,"self-retain during async image decode"),this._imageLoadDidFinish()}),_imageDecodeDidFail:I.b(function(){this.autorelease(this,"self-retain during async image decode"),this._imageLoadDidFail()}),_imageLoadDidFinish:I.a(function(){this._cleanUpInternalImage(),1!==this._exifOrientation?this._useCanvasForFinalImage():this._useInternalImageForFinalImage(),this._entireLoadProcessDidFinish()}),_imageBitmapDidFinish:I.b(function(e){this.autorelease(this,"self-retain during async createImageBitmap"),this.imageBitmap=e,this._entireLoadProcessDidFinish()}),_imageBitmapDidFail:I.b(function(){this.autorelease(this,"self-retain during async createImageBitmap"),this._entireLoadProcessDidFinish()}),_entireLoadProcessDidFinish:function(){this.state=C.LOADED},_imageLoadDidFail:I.a(function(){this._cleanUpAndGiveBackInternalImage(),this._loadDidFail()}),_cleanUpInternalImage:function(){var e=this._internalImage;e&&(O.revokeObjectURL(e.src),m.a(e,"load",E?this._imageLoadDidReachDecodability:this._imageLoadDidFinish),m.a(e,"error",this._imageLoadDidFail))},_cleanUpAndGiveBackInternalImage:function(){this._internalImage&&(this._cleanUpInternalImage(),b.f.disposeInstance(this._internalImage),this._internalImage=null)},_useInternalImageForFinalImage:function(){this.image=this._internalImage,this._internalImage=null},_useCanvasForFinalImage:function(){var e=this._exifOrientation,t=this._internalImage,n=b.d.getInstance(),i=n.getContext("2d"),r=7===e||8===e?270:3===e||4===e?180:5===e||6===e?90:0,a=t.naturalWidth,s=t.naturalHeight,o=r%180==0?a:s,c=r%180==0?s:a,l=2===e||4===e?-1:1,u=5===e||7===e?-1:1;n.width=o,n.height=c;for(var d=0;d<r;d+=90)i.translate(d%180?c:o,0),i.rotate(Math.PI/2);i.scale(l,u),i.translate((l-1)/2*a,(u-1)/2*s),i.drawImage(t,0,0),b.f.disposeInstance(t),this._internalImage=null,this.image=n},__superMap:{_$1TY$cleanup:"cleanup"}}),M=[null],D={}}).call(this,n(6))},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n(80),r=n(41),a=n(775),s=n(1183),o=i.a.extend({init:function(e){this.__s._$2V$init.call(this),this.raw=function e(t){var n=t;for(var i in n)a.a(n[i])&&delete(n=s.a(n,e(n[i])))[i];return n}(e)},raw:r.c(null),__superMap:{_$2V$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"BaseInterface"}})},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=n(177).b("MediaMetaDataType",{CGImageProperties:"CGImageProperties",AVAssetProxy:"AVAssetProxy"})},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return o});var i,r=n(41),a=n(785),s=n(46),o={_sl_selfLog:null,includesStacksWithSelfLogging:!1,activeSelfLogger:null,selfLoggingIndentStartingPrefix:"BEGIN",selfLoggingIndentEndingPrefix:"END",activeLoggingName:null,selfLogOnlyStrings:!0,cumulativeSelfLog:r.c({readOnly:!0,get:(i=function(e){return Array.isArray(e)?c(e):e},function(){return this._sl_selfLog.map(i).join("\n")})}),selfLog:function(){if(arguments.length){var e=new Date,t="."+("00"+Number(e)%1e3).slice(-3),n=e.toTimeString();n=n.substring(0,n.indexOf(" "))+t;var i=this.selfLoggingIndentEndingPrefix,r=String(arguments[0]);r.slice(0,i.length)===i&&this._sl_indentLevel--;var o=s.c.getAutodisposingInstance();o.push(n+":");for(var l=0;l<this._sl_indentLevel;l++)o.push("    ");o.push.apply(o,arguments);var u=this.selfLoggingIndentStartingPrefix;r.slice(0,u.length)===u&&this._sl_indentLevel++,this.includesStacksWithSelfLogging&&o.push("\n"+Object(a.a)()),this._sl_selfLog=this._sl_selfLog||[],this._sl_selfLog.push(this.selfLogOnlyStrings?c(o):o);var d=this.activeSelfLogger;d&&(o.unshift(this.activeLoggingName||this.toString(),"at"),this._logEntry(o,d))}else this._showSelfLog()},_sl_indentLevel:0,_showSelfLog:function(){this._sl_selfLog.forEach(this._logEntryToConsole,this)},_logEntryToConsole:function(t){this._logEntry(t,e.console.log)},_logEntry:function(e,t){if(Array.isArray(e))try{t.apply(console,e)}catch(n){t.call(console,c(e))}else t.call(console,e)},initFromPool:function(){var e=arguments;this.selfLog("BEGIN initFromPool from SelfLogging downwards."),this.__s._$1qk$initFromPool.apply(this,e),this.selfLog("END initFromPool from SelfLogging downwards.")},init:function(){var e=arguments;this.selfLog("BEGIN init from SelfLogging downwards."),this.__s._$1tp$init.apply(this,e),this.selfLog("END init from SelfLogging downwards.")},cleanup:function(){var e=arguments;this.selfLog("BEGIN cleanup from SelfLogging downwards."),this.__s._$1ws$cleanup.apply(this,e),this.selfLog("END cleanup from SelfLogging downwards.")},__superMap:{_$1qk$initFromPool:"initFromPool",_$1tp$init:"init",_$1ws$cleanup:"cleanup"}},c=function(e){for(var t=String(e[0]),n=e.length,i=1;i<n;i++)t+=" "+e[i];return t}}).call(this,n(6))},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return A});var i=n(781),r=n(34),a=n(69),s=n(93),o=n(1185),c=n(41),l=n(36),u=n(92),d=n(180),h=n(1203),p=n(1139),f=n(1136),g=n(1184),m=n(410),v=n(65),_=n(33),b=n(40),y=n(1154),I=n(1156),w=n(46),S=n(90),C=n(503),O=S.a.moments_cluster_size,A=C.a.extend(i.a,{dataManager:r.b(a.b),container:r.b({dependencies:["dataManager.cplSystemContainersMap"],strong:!0,readOnly:!0,get:function(){var e=this.dataManager.cplSystemContainersMap;if(void 0!==e)return e.get(_.a.PredefinedName.MOMENTS)}}),items:r.b(s.c("_assetsByPositionInMoments")),sections:r.b(s.c("_publishedMomentsWithPlaceholders")),ensureRange:function(e,t){var n=this.container.medias.length,i=this._rankForCellIndex(e,n),r=this._rankForCellIndex(t,n);return this._oldestRankMostRecentlyDemanded=i,this._newestRankMostRecentlyDemanded=r,this._ensureSealedMomentsInDemandRangeDeferred(),this.ensureRangeHasActuallyLoaded(e,t)},ensureRangeHasActuallyLoaded:function(e,t){var n=o.a.create(),i={start:e,end:t,promise:n};return this._rangesToEnsure.push(i),this.checkIfRangesAreLoaded([i]),n},_rangesToEnsure:c.c({defaultValue:[],readOnly:!0,type:Array}),_ensureRangeObserver:l.e({inputs:["items","items.contentsDidChange"],callback:function(){this.checkIfRangesAreLoaded(this._rangesToEnsure)}}),checkIfRangesAreLoaded:function(e){for(var t=e.length-1;t>=0;t--){var n=e[t],i=n.start,r=n.end,a=n.promise;!0===this.areAllItemsInRangeLoaded(i,r)&&(a.resolve(),e.splice(t,1))}},areAllItemsInRangeLoaded:function(e,t){for(var n=this.items,i=Math.max(0,Math.min(e,t)),r=Math.min(n.length-1,Math.max(e,t)),a=i;a<=r;a++)if(void 0===n.encodedObjectAt(a))return!1;return!0},maxExpansionItems:c.c(180),_assetsByPositionInMoments:r.b({readOnly:!0,strong:!0,defaultValue:function(){return u.a.create(void 0,b.a)}}),_publishedMomentsWithPlaceholders:r.b({defaultValue:d.b(h.a),readOnly:!0,strong:!0}),_sealedMomentsByAssetPrimaryKey:c.c(function(){return w.h.getInstance()}),_setOfSealedMoments:c.c(d.b(p.a)),_sealedRanks:c.c(d.b(f.a)),_loadedRanks:c.c(d.b(f.a)),_requestedRanks:c.c(d.b(f.a)),_storeHasDataForRank:function(e,t,n){var i=t[e];if("string"!=typeof i)return!1;var r=b.a.getStoreIdForPrimaryKey(i);return n.hasDataFor(r)},_rankForCellIndex:function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.container.medias.length)-e-1},_scheduledEnsureSealedMomentsInDemandRangeId:0,_ensureSealedMomentsInDemandRangeDeferred:function(){this._scheduledEnsureSealedMomentsInDemandRangeId&&e.clearTimeout(this._scheduledEnsureSealedMomentsInDemandRangeId),g.a(this._ensureSealedMomentsInDemandRangeBound,10)},_ensureSealedMomentsInDemandRange:function(e,t){if(!this._scheduledClusterSweepId){var n=e||this._oldestRankMostRecentlyDemanded,i=t||this._newestRankMostRecentlyDemanded,r=this._loadedRanks;if(r.contains(i,n)){var a=this._sealedRanks,s=a.contains(n),o=a.contains(i);if(!s||!o){var c=this.container.medias.length,l=this.maxExpansionItems,u=Math.ceil(l/2),d=Math.floor(l/2),h=NaN,p=NaN,f=NaN,g=NaN,m=NaN,v=0,_=0;o?(h=r.rangeEnd(n))<c-1&&(f=h+1,h=r.firstIndexAfter(h),v=(p=Math.min(f+l-1,h>-1?h-1:c-1,c-1))-f+1):s?(h=r.rangeStart(i))>0&&(g=h-1,h=r.lastIndexBefore(g),_=g-(m=Math.max(g-l+1,h>-1?h+1:0,0))+1):((h=r.rangeEnd(n))<c-1&&(f=h+1,h=r.firstIndexAfter(h),v=(p=Math.min(f+u-1,h>-1?h-1:c-1,c-1))-f+1),(h=r.rangeStart(i))>0&&(g=h-1,h=r.lastIndexBefore(g),_=g-(m=Math.max(g-d+1,h>-1?h+1:0,0))+1)),v&&this._requestUnrequestedRanksInRange(p,f),_&&this._requestUnrequestedRanksInRange(g,m)}}else this._requestUnrequestedRanksInRange(n,i)}},_ensureSealedMomentsInDemandRangeBound:c.c(function(){return function(){this._scheduledEnsureSealedMomentsInDemandRangeId=0,this._ensureSealedMomentsInDemandRange()}.bind(this)}),_requestUnrequestedRanksInRange:function(e,t){if(!Number.isSafeInteger(e)||e<0||!Number.isSafeInteger(t)||t<0)return!1;var n=this._requestedRanks;if(n.contains(t,e))return!1;for(var i=this.container,r=n.contains(e)?n.rangeStart(e)-1:e,a=n.contains(t)?n.rangeEnd(t)+1:t,s=r,o=n.lastIndexBefore(s),c=o>=a?o+1:a,l=i.medias.length;l--&&(i.loadMediasForRange(c,s).catch(function(e){throw e}),n.add(c,s),c!==a);)s=(o=n.rangeStart(c))-1,c=(o=n.lastIndexBefore(s))>=a?o+1:a;return!0},_onSourceMediasChanged:l.f({inputs:["container.medias.contentsDidChange","container.medias","container.medias.length"],callback:function(e,t,n){var i=this,r=e&&e.context;if(r)if(n){for(var s=0===r.lengthDelta,o=this._loadedRanks,c=this._sealedRanks,l=this._requestedRanks,u=this._sealedMomentsByAssetPrimaryKey,d=NaN,h=!0,p=new Map,f=new Map,g=!1,v=NaN,_=r.length,b=t._array,y=a.b(),I=0;I<_;I++){var w=r.objectAt(I),S=w.index,C=w.operation,O=w.encodedItem;if(d!==I){if(v!==I)if(g)I<_-1&&r.objectAt(I+1).index<S&&(g=!1);else{if(C===m.b.REMOVE){if(O&&I<_-3){var A=r.objectAt(I+1);if(A.operation===m.b.INSERT&&A.index===S&&A.encodedItem&&(A=r.objectAt(I+3)).operation===m.b.INSERT&&A.index===S+1&&A.encodedItem===O){v=I+1,g=!0,h=!1;continue}}if(!O&&I<_-1){var E=r.objectAt(I+1);if(s&&E.index===S&&E.operation===m.b.INSERT&&E.encodedItem){d=I+1;continue}}if(l.itemsRemovedAtIndex(S,1),o.itemsRemovedAtIndex(S,1),c.itemsRemovedAtIndex(S,1),O)if(f.has(O)){var T=f.get(O);f.set(O,T+1)}else f.set(O,1)}else if(C===m.b.INSERT&&(l.itemsInsertedAtIndex(S,1),o.itemsInsertedAtIndex(S,1),c.itemsInsertedAtIndex(S,1),O))if(o.add(S),l.add(S),p.has(O)){var M=p.get(O);p.set(O,M+1)}else p.set(O,1);h=!1}else if(l.itemsInsertedAtIndex(S,1),o.itemsInsertedAtIndex(S,1),c.itemsInsertedAtIndex(S,1),o.add(S),l.add(S),O)if(p.has(O)){var D=p.get(O);p.set(O,D+1)}else p.set(O,1)}else o.add(S)}if(h)this._rescheduleClusterSweep();else{var L=f.size>p.size?f:p,N=f.size<p.size?f:p;L.forEach(function(e,t){if(N.has(t)){var n=N.get(t);n===e?(L.delete(t),N.delete(t)):n>e?L.delete(t):e>n&&N.delete(t)}});var P=f.size,R=p.size;if(P&&f.forEach(function(e,t){t&&u[t]&&i._unsealMomentForAssetPrimaryKey(t)}),R){for(var x={},F=0;F<n;F++){var k=b[F];x[k]=F}var V=0,j=n-1;p.forEach(function(e,r){var a=r&&x[r];if(r&&a>=0){var s=i._oldestRankPossiblyAffectedByRank(a,t,n,b,y,!1);s>V&&(V=s);var o=i._newestRankPossiblyAffectedByRank(a,t,n,b,y,!1);o<j&&(j=o)}}),this._unsealMomentsForRange(V,j,x)}this._republishRequired=!0,this._rescheduleClusterSweep()}}else this._initializeMediasLength(n);else n&&this._initializeMediasLength(n)}}),_momentDataClass:y.a,_clusterDelegate:c.c(d.b(I.a)),_scheduledClusterSweepId:0,_postLoadClusterSweepDelay:300,_rescheduleClusterSweep:function(){this._scheduledClusterSweepId&&e.clearTimeout(this._scheduledClusterSweepId),this._scheduledClusterSweepId=g.a(this._sweepClustersBound,this._postLoadClusterSweepDelay)},_sweepClustersBound:c.c(function(){return this._sweepClusters.bind(this)}),_sweepClusters:function(){this._scheduledClusterSweepId=0,this._processClustersInLoadedUnsealedRanks()},_initializeMediasLength:function(e){var t=this._momentDataClass.createPlaceholder(e,0).retain(),n=this._publishedMomentsWithPlaceholders,i=this._requestedRanks,r=this._loadedRanks,a=this._sealedRanks,s=this._assetsByPositionInMoments,o=this._setOfSealedMoments;this.batchedChangesWillBegin(),s.beginIgnoringChanges(),s.length>0&&s.clear(),s.length=e,s.endIgnoringChanges(),n.length>0&&n.clear(),n.push(t),i.length>0&&i.clear(),r.length>0&&r.clear(),a.length>0&&a.clear(),o.length>0&&o.clear(),this.batchedChangesDidEnd()},_completeNuclearAnnihilation:function(){var e=this.container.medias.length,t=this.container.getDataHash().medias,n=a.b(),i=w.h;i.disposeInstance(this._sealedMomentsByAssetPrimaryKey),this._sealedMomentsByAssetPrimaryKey=i.getInstance(),this._initializeMediasLength(e);for(var r=this._loadedRanks,s=0;s<e;s++)this._storeHasDataForRank(s,t,n)&&r.add(s)},_processClustersInLoadedUnsealedRanks:function(){var e=this.container.medias,t=e.length,n=this._clusterDelegate,i=this._loadedRanks,r=this._sealedRanks,a=this._republishRequired;if(r.length!==i.length){var s=i.lastIndexBefore(t),o=r.contains(s)?r.rangeStart(s)-1:s;(s<0||o<0||!i.contains(s))&&v.b("Moments could not establish a processing range. ("+t+" total, "+i.length+" loaded, "+r.length+" sealed in "+this._setOfSealedMoments.length+" moments; cursor: "+s+", oldest: "+o+")"),s=i.firstIndexAfter(-1);for(var c=r.contains(s)?r.rangeEnd(s)+1:s,l=0,u=o,d=NaN,h=t;h--;)if(i.contains(u)||(u=i.lastIndexBefore(u)),r.contains(u)&&(u=r.rangeStart(u)-1),i.contains(u)){if(u<c)break;s=Math.max(i.rangeStart(u),c),d=r.contains(s)?Math.max(r.rangeEnd(s)+1,s):Math.max(r.lastIndexBefore(u)+1,s);var p=n.generateClustersInRange(e,u,d,t);l+=p.length-this._sealOrDiscardClusters(p,u,d),u=d-1}(l||a)&&this._republish(),this._ensureSealedMomentsInDemandRangeDeferred()}else a&&this._republish()},_republish:function(){this._republishRequired=!1,this.batchedChangesWillBegin(),this._updateSectionsAndItems(),this.batchedChangesDidEnd()},_sealOrDiscardClusters:function(e,t,n){for(var i=this._momentDataClass,r=this.container.medias,a=e.length,s=w.c,o=s.getInstance(),c=0,l=0;l<a;l++){var u=e[l];if(this._shouldMarkAsSealed(u,l,e,a,t,n)){var d=i.create(r,u).retain();this._markSealedMoment(d,u)}else c=o.push(u)}for(l=0;l<c;l++){var h=o[l];h.length,s.disposeInstance(h)}return s.disposeInstance(o),s.disposeInstance(e),c},_shouldMarkAsSealed:function(e,t,n,i,r,a){var s=this._sealedRanks,o=this.container.medias,c=o.length,l=this._clusterDelegate,u=e.length;if(1===i&&u===c&&c)return!0;if(O&&u>=O)return!0;var d=NaN,h=void 0,p=e[0],f=e[u-1],g=NaN,m=NaN,v=!1,_=!1;if(p!==c-1||v)if(t)for(d=t;d;){if(g=(h=n[--d])[0],m=h[h.length-1],O&&h.length>=O){v=!0;break}if(l.checkMaxBoundarySeparationForRanks(o,m,p)){v=!0;break}d||(g===c-1?v=!0:s.contains(r+1)&&(v=!0))}else s.contains(r+1)&&(v=!0);else v=!0;if(0===f)_=!0;else if(t===i-1)s.contains(a-1)&&(_=!0);else for(d=t;d<i-1;){if(g=(h=n[++d])[0],m=h[h.length-1],O&&h.length>=O){_=!0;break}if(l.checkMaxBoundarySeparationForRanks(o,f,g)){_=!0;break}d===i-1&&(0===m?_=!0:s.contains(a-1)&&(_=!0))}if(v&&_)return!0;if(e.isGeoSpatial&&0!==t){if(t===n.length-1)return!0;var b=n[t+1],y=n[t-1];return b.isGeoSpatial&&y.isGeoSpatial}return!1},_markSealedMoment:function(e,t){var n=this._sealedRanks,i=this._sealedMomentsByAssetPrimaryKey;this._setOfSealedMoments.add(e);for(var r=0,a=t.length;r<a;r++){var s=t[r],o=this.container.medias._array[s];n.add(s),i[o]=e}},_unsealMomentForAssetPrimaryKey:function(e){var t=this._sealedMomentsByAssetPrimaryKey,n=this._sealedRanks,i=t[e];if(i){for(var r=this.container.getDataHash().medias,a=i.identifiers,s=0,o=a.length;s<o;s++){var c=a[s],l=r.indexOf(c);t[c]=void 0,l>=0&&n.remove(l)}this._setOfSealedMoments.remove(i),i.release()}},_unsealMomentsForRange:function(e,t,n){for(var i=this._sealedRanks,r=this._setOfSealedMoments,a=this._sealedMomentsByAssetPrimaryKey,s=e,o=0;s>=t;){var c=a[this.container.medias._array[s]];if(c){for(var l=c.identifiers,u=l.length,d=0;d<u;d++){var h=l[d],p=n[h];a[h]=void 0,p>=0&&i.remove(p)}r.remove(c),c.release(),o++,s--}else s--}return o},_oldestRankPossiblyAffectedByRank:function(e,t,n,i,r){var a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(e===n-1)return e;var s=this._clusterDelegate,o=this._loadedRanks,c=this._sealedRanks,l=o.firstIndexAfter(e);if(-1===l)return e;for(var u=a?c.firstIndexAfter(l)-1:o.lastIndexBefore(n),d=l;d<=u;)if(this._storeHasDataForRank(d,i,r)){if(s.checkMaxBoundarySeparationForRanks(t,e,d))break;d++}else d++;return Math.min(d,u)},_newestRankPossiblyAffectedByRank:function(e,t,n,i,r){var a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(0===e)return e;var s=this._clusterDelegate,o=this._loadedRanks,c=this._sealedRanks,l=o.lastIndexBefore(e);if(-1===l)return e;for(var u=a?c.lastIndexBefore(l)+1:o.firstIndexAfter(-1),d=l;d>=u;)if(this._storeHasDataForRank(d,i,r)){if(s.checkMaxBoundarySeparationForRanks(t,e,d))break;d--}else d--;return Math.max(d,u)},_updateSectionsAndItems:function(){for(var e=this._publishedMomentsWithPlaceholders,t=this._assetsByPositionInMoments,n=this._momentDataClass,i=this.container.medias._array,r=new Set,a=this._sealedMomentsByAssetPrimaryKey,s=0,o=0,c=e.length;o<c;o++){var l=e.objectAt(o);l.isPlaceholder&&l.release()}e.beginBatchedChanges(),e.length=0,t.beginBatchedChanges(),t.length=0;for(var u=i.length-1;u>=0;u--){var d=i[u];if(d){var h=a[d];h?(s>0&&(e.push(n.createPlaceholder(s).retain()),t.length+=s,s=0),r.has(h)||(r.add(h),e.push(h),t.push.apply(t,h.identifiers))):s++}else s++}s>0&&(e.push(n.createPlaceholder(s).retain()),t.length+=s),t.endBatchedChanges(),e.endBatchedChanges()},staticMembers:{__QUALIFIED_CLASS_NAME__:"MomentsIndexedProvider"}})}).call(this,n(6))},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n(80),r=n(36),a=n(34),s=n(180),o=n(410),c=i.a.extend(r.a,{items:a.b(s.b(o.b)),sections:a.b(s.b(o.b)),ensureRange:function(){},batchedChangesWillBegin:r.g(),batchedChangesDidEnd:r.g(),staticMembers:{__QUALIFIED_CLASS_NAME__:"BaseIndexedProvider"}})},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return c});var i=n(1231),r=n(180),a=n(189),s=n(1187),o=n(1195),c=(n(898),i.a.extend({staticMembers:{className:"p2-inline-text-field",__QUALIFIED_CLASS_NAME__:"InlineTextField"},model:null,acceptableHitTargets:r.b(Array),_parentNode:null,_targetElement:null,_targetElementDisplayValue:null,insert:function(t,n){null!==this._targetElement&&this.remove(),this._targetElement=t,this.parent=n;var i=this._parentNode=t.parentNode,r=this.element;!function(t,n){var i=r.style,a=e.getComputedStyle(t);i.width=a.getPropertyValue("width"),i.height=a.getPropertyValue("height"),i.position=a.getPropertyValue("position"),i.top=a.getPropertyValue("top"),i.bottom=a.getPropertyValue("bottom"),i.right=a.getPropertyValue("right"),i.left=a.getPropertyValue("left"),i.display=a.getPropertyValue("display"),i.flex=a.getPropertyValue("flex"),i.transform=a.getPropertyValue("transform"),i.zIndex=a.getPropertyValue("z-index")}(t),function(t,n){var i=r.style,a=e.getComputedStyle(t);i.fontFamily=a.getPropertyValue("font-family"),i.fontSize=a.getPropertyValue("font-size"),i.fontWeight=a.getPropertyValue("font-weight"),i.lineHeight=a.getPropertyValue("line-height"),i.textAlign=a.getPropertyValue("text-align")}(t),i.insertBefore(r,t);var a=e.getComputedStyle(t);this._targetElementDisplayValue=a.getPropertyValue("display"),""===this._targetElementDisplayValue&&(this._targetElementDisplayValue="block"),t.style.display="none",this.element.focus(),this.select(),this._addGlobalClickListener()},remove:function(){this._targetElement&&(this._parentNode.removeChild(this.element),this._targetElement.style.display=this._targetElementDisplayValue,this._targetElement=null,this.acceptableHitTargets.length=0,this.parent=null,this._removeGlobalClickListener())},sendEvent:function(e){this.__s._$t6$sendEvent.call(this,e,this),e===this.action&&this.remove()},keyDown:function(e){var t=arguments;switch(this.__s._$xM$keyDown.apply(this,t),e.keyCode){case a.a.ESC:this.remove()}return!0},keyUp:function(){return!0},pointerDown:function(){return!0},_clickEventHandler:function(e){var t=e.target;if(this._targetElement&&t!==this._targetElement&&t!==this.element&&t!==this.inputNode){if(this._targetElement.hasChildNodes())for(var n=this._targetElement.children,i=0,r=n.length;i<r;i++)if(t===n[i])return;if(this.acceptableHitTargets.length>0)for(var a=this.acceptableHitTargets,s=0,o=a.length;s<o;s++){var c=a[s];if("string"==typeof c&&l(t,c))return;if(c instanceof HTMLElement&&c===t)return}return this.sendEvent(this.action),!0}},_addGlobalClickListener:function(){this.__eventListener||(this.__eventListener=this._clickEventHandler.bind(this)),s.a(document.body,"mousedown",this.__eventListener)},_removeGlobalClickListener:function(){this.__eventListener&&o.a(document.body,"mousedown",this.__eventListener)},__superMap:{_$t6$sendEvent:"sendEvent",_$xM$keyDown:"keyDown"}}).create());function l(e,t){if(!t||0===t.length)return!1;var n=e.parentNode;n||(n=document);var i=n.querySelectorAll(t);if(!i)return!1;for(var r=0,a=i.length;r<a;r++)if(i[r]===e)return!0;return!1}}).call(this,n(6))},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return u});var i=n(1155),r=n(1182),a=n(34),s=n(36),o=n(410),c=n(41),l=n(506).a.extend({computeConstraintWidthForItem:function(t){var n=e.getComputedStyle(t,"::before").width;return Math.ceil(parseFloat(n))},computeOuterWidthForItem:function(e){return e.clientWidth},staticMembers:{__QUALIFIED_CLASS_NAME__:"TransportsLayoutManager"}}),u=i.a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isHidden",truevalue:"hidden",attributes:{}}]}},__QUALIFIED_CLASS_NAME__:"TransportsSegmentedView"},additionalClassNames:r.a(["ck-sharing-transports-view"]),isHidden:a.b({readOnly:!0,dependencies:["isLoading","segments"],get:Object.assign(function(){var e=this.segments;return this.isLoading||!e||e.length<=1},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[1+n]);return i.internalGet(this,t[0+n])||!r||r.length<=1}})}),isLoading:a.b(),buttonsObserver:s.f("_buttons","_buttons.contentsDidChange",function(e,t){var n=this;if(e&&t){var i=this._buttonAttachmentObservers,r=this._buttons,a=this._layoutManager;t.context.forEach(function(t){var s=t.operation,c=t.index,l=e.objectAt(c);if(s===o.b.INSERT){var u=l.observe("isAttached",function(){var e=r.map(function(e){return e.element}).toArray();a.layoutItems(e),n.transportsSegmentedViewDidLayoutButtons(n)});i.set(l,u)}else if(s===o.b.REMOVE){var d=t.encodedItem,h=i.get(d);void 0!==h&&h.disconnect(),i.delete(d)}})}}),init:function(){var e=arguments;this._layoutManager=l.create(),this._buttonAttachmentObservers=new Map,this.__s._$o1$init.apply(this,e)},_layoutManager:c.c({readOnly:!0,type:l}),_buttonAttachmentObservers:c.c({readOnly:!0,type:Map}),transportsSegmentedViewDidLayoutButtons:s.g(),__superMap:{_$o1$init:"init"}})}).call(this,n(6))},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n(80),r=n(65),a=i.a.extend({computeConstraintWidthForItem:function(e){r.b("ConstraintBasedEvenLayoutManager#computeConstraintWidthForItem must be implemented")},computeOuterWidthForItem:function(e){r.b("ConstraintBasedEvenLayoutManager#computeOuterWidthForItem must be implemented")},resetLayout:function(e){for(var t=0,n=e.length;t<n;t++){var i=e[t].style;i.marginLeft="",i.marginRight=""}},layoutItems:function(e){this.resetLayout(e);var t=this._determineMaxSpaceBetweenConstrainingElements(e);this._applyMaxSpaceBetweenConstrainingElements(e,t),this._ensureCentering(e)},_determineMaxSpaceBetweenConstrainingElements:function(e){for(var t=0,n=e.map(this.computeOuterWidthForItem.bind(this)),i=e.map(this.computeConstraintWidthForItem.bind(this)),r=1,a=e.length;r<a;r++){var s=n[r-1],o=(n[r]+s)/2-(i[r-1]+i[r])/2;t=Math.max(o,t)}return t},_applyMaxSpaceBetweenConstrainingElements:function(e,t){for(var n=e.map(this.computeOuterWidthForItem.bind(this)),i=e.map(this.computeConstraintWidthForItem.bind(this)),r=1,a=e.length;r<a;r++){var s=n[r-1],o=n[r],c=t-(s-i[r-1])/2-(o-i[r])/2;e[r].style.marginLeft=c+"px"}},_ensureCentering:function(e){if(e.length>1){var t=e[0],n=Math.max((this.computeOuterWidthForItem(t)-this.computeConstraintWidthForItem(t))/2,0),i=e[e.length-1],r=n-Math.max((this.computeOuterWidthForItem(i)-this.computeConstraintWidthForItem(i))/2,0);r>0?i.style.marginRight=r+"px":t.style.marginLeft=-r+"px"}},staticMembers:{__QUALIFIED_CLASS_NAME__:"ConstraintBasedEvenLayoutManager"}})},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return O});var i=n(340),r=n(49),a=n(34),s=n(172),o=n(54),c=n(41),l=n(123),u=n(1197),d=n(1184),h=n(189),p=n(1185),f=n(1213),g=n(784),m=n(97),v=n(539),_=n(532),b=n(538),y=n(171),I=n(7),w=n(79),S=n(101),C=(n(21),{mixinDependencies:[r.a,m.b],composeUrl:a.b({readOnly:!0,get:function(){var t=s.c();s.a.sharedInstance.isRTL&&(t=this.getPath("COSK.globals.environment.accountPreferences.secondaryLocale")||"en-us");return i.a("https://"+e.location.hostname+"/message/current/"+t+"/index.html#compose?willPM=true")}}),composeMail:o.a.define()}),O=m.a.extend(C,{transport:I.a.WEB_MAIL,viewClass:b.a,originatorSharingWorkflowVC:c.c(),animationDuration:c.c(250),composeMail:function(e){var t=e.appName;if(!t)throw new Error("Cannot compose email: appName not specified.");this.initializeJsonRpcTransceiver(),this._composeData={subject:e.subject,body:e.body,appName:t,isForSharingWorkflow:!0}},cancelOnUnrecoverableError:function(e){var t=e.error;this.originatorSharingWorkflowVC.sendEvent("cancel",t)},createParticipantsFromEmailEntries:function(e){l.a(e)&&(e=e.split(","));var t=this.permissionValueForAddingParticipants;return e.filter(function(e){return!u.a(e)}).map(function(e){return y.a.create({permission:t,userIdentity:w.a.createFromString(e.trim())})},this)},init:function(){var e=arguments;this.__s._$1ck$init.apply(this,e),this.initializeJsonRpcTransceiver(),this.view.iframeView.bind("src",this.bindingFor("composeUrl"))},initializeJsonRpcTransceiver:function(){if(!this.transceiver){var t=this.view.iframeView,n=this.transceiver=_.a.create({channel:v.a.create({iframe:t.element,remoteOrigin:"https://"+e.location.hostname})});n.registerMethodHandler("postPopulateFieldsMessage",this,"_postPopulateFieldsMessageHandler"),n.registerMethodHandler("closeIframe",this,"_closeIframeHandler"),n.registerMethodHandler("addParticipants",this,"addParticipantsHandler"),n.registerMethodHandler("sendMessageSuccessful",this,"_sendMessageSuccessful")}},willAttach:function(){this._loadTimer=d.a(function(){var e={keyEquivalent:h.a.RETURN,title:s.d("CKSharing.ErrorDialog.OKButton.Title"),target:this,action:"_closeIframeHandler",error:"MailComposer.LoadTimeout"};this.settings.notificationService.error("MailComposer.LoadTimeout",{locNamespace:"CKSharing.ErrorDialog",primaryButtonConfig:e})}.bind(this),6e4)},_postPopulateFieldsMessageHandler:function(){return clearTimeout(this._loadTimer),this.view.iframeView.element.classList.remove("hidden"),this.view.loadingViewWrapper.classList.add("hidden"),this.view.loadingView.isVisible=!1,this.originatorSharingWorkflowVC.sendEvent("contentDidResize"),this._composeData},_closeIframeHandler:function(){this._cleanUpTransceiver(),this.sendEvent("didCancelSendMessage")},addParticipantsHandler:function(e){var t=this.share;if(t.isPublic&&t.owner&&!t.owner.isMe)return p.a.resolve("success");var n=this.permissionValueForAddingParticipants,i=void 0,r=this.createParticipantsFromEmailEntries(e.to),a=this.createParticipantsFromEmailEntries(e.cc),o=r.concat(a);if(t.isPrivate){if(!this.validateInviteesToAddToShare(o,!0)){var c=new Error("Add participants failed");return c.code=-1,p.a.resolve(c)}t.addParticipantsIgnoringDupes(o,n),i="INVITE_TO_PRIVATE.VIA_EMAIL."+(1===o.length?"TO_PERSON":"TO_PEOPLE")}else{if(this.checkAndDisplayErrorForInvalidInvitees(o,!0)){var l=new Error("Add participants failed");return l.code=-1,p.a.resolve(l)}i="INVITE_TO_PUBLIC"}if(f.a(this.ioService.mostRecentShareDataHashFromServer,t.getDataHash())){var u=this.settings,d={operationType:i,appName:u.shareItemType,interactionMode:u.primaryInteractionMode},g=this,m=u.notificationService;return this.saveShare(!0).then(function(e){return"success"}).catch(Object(S.a)(d,m,u.logService)).catch(function(e){m.error("AddingParticipants.MAIL_ADD_PARTICIPANTS_FAILED",{locNamespace:"CKSharing.ErrorDialog",primaryButtonConfig:{keyEquivalent:[h.a.ESC,h.a.RETURN],title:s.d("CKSharing.ErrorDialog.OKButton.Title"),target:g,action:"cancelOnUnrecoverableError",error:e}});var t=new Error("Add participants failed");return t.code=-1,t})}return p.a.resolve("success")},_sendMessageSuccessful:function(){this._cleanUpTransceiver(),this.sendEvent("didCompleteSendMessage")},_cleanUpTransceiver:function(){var e=this.transceiver;g.b.debug("MailComposeViewController._cleanUpTransceiver:  unregister method handlers and disconnect JsonRpcTransceiver.channel."),e.unregisterMethodHandler("postPopulateFieldsMessage",this),e.unregisterMethodHandler("closeIframe",this),e.unregisterMethodHandler("addParticipants",this),e.unregisterMethodHandler("sendMessageSuccessful",this),e.channel.disconnect(),this.transceiver=null,clearTimeout(this._loadTimer)},_loadTimer:void 0,__superMap:{_$1ck$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"MailComposeViewController"}})}).call(this,n(6))},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return s});var i=n(25),r=n(1125),a=n(172),s=(n(21),function(t){var n=r.a.application.workflowSettings;return n&&n.sharesOrigin||/\.icloud\.com$/i.test(e.location.hostname)?t:t.isCKError?(delete t.stack,t):((n&&n.logService||i.a.cloudOSService).recordStat("Exception in ck-sharing-app:",{message:t.message}),a.d("CKSharing.UnexpectedTerminationMessage"))})}).call(this,n(6))},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return g});var i=n(25),r=n(340),a=n(80),s=n(36),o=n(34),c=n(180),l=n(172),u=n(431),d=n(432),h=n(1145),p=a.a.extend(s.a,u.a,d.a,{staticMembers:{__QUALIFIED_CLASS_NAME__:"SchoolworkHost"}}),f={USER_CANCELLED:"USER_CANCELLED"};Object.freeze(f);var g=h.a.extend({init:function(e,t,n){this.processInfo={record:t,zoneId:e.toHash().zoneID},this.__s._$9Y$init.call(this,n),this.userInfo.webBag=i.a.cloudOSService.cloudOSState},host:o.b(c.b(p)),url:o.b({readOnly:!0,get:function(){var t=e.location.hostname,n=l.c();l.a.sharedInstance.isRTL&&(n=this.getPath("COSK.globals.environment.accountPreferences.secondaryLocale")||"en-us");return r.a("https://"+t+"/applications/schoolwork/current/"+n+"/index.html#/activity-share")}}),didEnd:function(e,t){var n=arguments;this.__s._$Ro$didEnd.apply(this,n),e===f.USER_CANCELLED?this.sendEvent("didCancelSchoolwork"):this.sendEvent("didCompleteSchoolwork")},__superMap:{_$9Y$init:"init",_$Ro$didEnd:"didEnd"},staticMembers:{__QUALIFIED_CLASS_NAME__:"SchoolworkHostedApplicationViewController"}})}).call(this,n(6))},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return B});var i=n(164),r=n(91),a=n(406),s=n(80),o=n(36),c=n(34),l=n(41),u=n(180),d=n(1237),h=n(1125),p=n(1172),f=n(1177),g=n(1192),m=n(775),v=n(123),_=n(1173),b=n(1197),y=n(1185),I=n(784),w=n(1184),S=n(141),C=n(511),O=n(513),A=n(512),E=n(282),T=n(283),M=n(245),D=n(433),L=n(144),N=n(272),P=n(337),R=n(514),x=n(79),F=n(269),k=n(338),V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j=C.a.create(),B=s.a.extend(o.a,P.a,{container:c.b(),databaseScope:c.b(),materializedShareRecord:l.c(),mostRecentShareDataHashFromServer:l.c(),isServiceBusy:c.b({readOnly:!0,dependencies:["processor.isQueueEmpty"],get:Object.assign(function(){return!this.getPath("processor.isQueueEmpty")},{__CW__getter:function(e,t,n,i){return!i.internalGetPath(this,t[0+n])}})}),processor:c.b({defaultValue:u.b(d.a.extend(o.a,{isQueueEmpty:c.b(!0),canSafelyTerminate:c.b(!0),_rejectAction:function(e,t){var n=arguments;return this._hack_silentlyClearQueuedOperations(),this.__s._$ux$_rejectAction.apply(this,n)},_hack_silentlyClearQueuedOperations:function(){for(var e,t,n=this._queue,i=this._actionDataToPromiseMap,r=n.length-1;r>=0;r--)e=n[r],t=i.get(e),this._clearQueuedAction(e,t)},enqueue:function(){var e=arguments;return this.isQueueEmpty=!1,this.__s._$16w$enqueue.apply(this,e)},didProcess:function(e,t){this.isQueueEmpty=0===e.length&&0===t.length;var n=e.concat(t).map(function(e){return e[2].type}).filter(function(e){return"FETCH"!==e&&"FETCH_SHARE"!==e}).length;this.canSafelyTerminate=0===n},dispose:function(){var e=arguments;this.canSafelyTerminate=!0,this.__s._$1VP$dispose.apply(this,e)},__superMap:{_$ux$_rejectAction:"_rejectAction",_$16w$enqueue:"enqueue",_$1VP$dispose:"dispose"}}),{maxConcurrentActions:1})}),processorCanSafelyTerminateDidChange:o.e("processor.canSafelyTerminate",function(e){var t=h.a.application;"function"==typeof p.a(t,"removeIsReadyToTerminateBlock")&&"function"==typeof p.a(t,"setIsReadyToTerminateBlock")?e?h.a.application.removeIsReadyToTerminateBlock(this):h.a.application.setIsReadyToTerminateBlock(this):this.canSafelyTerminate=e}),canSafelyTerminate:c.b(!0),zoneID:c.b(),database:c.b({readOnly:!0,dependencies:["container","databaseScope"],get:Object.assign(function(){var t="sharedCloudDatabase";return this.databaseScope===e.CloudKit.DatabaseScope.PRIVATE&&(t="privateCloudDatabase"),this.container[t]},{__CW__getter:function(t,n,i,r){var a="sharedCloudDatabase";return r.internalGet(this,n[1+i])===e.CloudKit.DatabaseScope.PRIVATE&&(a="privateCloudDatabase"),r.internalGet(this,n[0+i])[a]}})}),reset:function(){this.processor._hack_silentlyClearQueuedOperations();var e=this.mostRecentShareDataHashFromServer,t=this.materializedShareRecord;f.a(t)&&f.a(e)&&(t.replaceData(g.a(e)),this.mostRecentOriginalShareDataHash=null)},init:function(e,t,n,i){if(!e||!t||!n)throw new Error("Dependency Missing: CKSharing.SharingIOService.create() requires the following properties: container, databaseScope, zoneID.");if(m.a(n)?n=F.a.create(n.zoneName,n.ownerRecordName):v.a(n)&&(n=F.a.create(n)),!_.a(n,F.a))throw new Error("zoneID must be an Object or instance of CKSharing.ZoneID",{zoneID:n});this.__s._$2hZ$init.call(this,i),this.container=e,this.databaseScope=t,this.zoneID=n},createShare:function(e){var t=this.materializedShareRecord.toJSON(),n=E.a.create(t,null,e);return this.retain(this,"this - createShare"),this.processor.enqueue(Y,this,n).finally(this.release.bind(this,this,"this - createShare"))},createShareFromDataHash:function(e){var t=this.materializedShareRecord=N.a.create(e);return function(e){var t=e.participants;t&&t.forEach(function(e){e.propertyChanged("userIdentity")});var n=e.owner;n&&n.propertyChanged("userIdentity");var i=e.currentUserParticipant;i&&i.propertyChanged("userIdentity")}(t),t},createShortGUID:function(e,t){var n=e.shortGUID;return v.a(n)&&!b.a(n)?y.a.resolve(e):$(this,A.a.create(e,null,t)).then(ee).then(function(e){return e})},convertToPrivateShare:function(e,t){var n=this.materializedShareRecord.toJSON(),i=O.a.create(n,e,t);return this.mostRecentOriginalShareDataHash=n,this.retain(this,"this - convertToPrivateShare"),this.processor.enqueue(q,this,i).finally(this.release.bind(this,this,"this - convertToPrivateShare"))},fetchDataRecord:function(e){var t=M.a.create(e);return this.retain(this,"this - fetchDataRecord"),this.processor.enqueue(J,this,t).finally(this.release.bind(this,this,"this - fetchDataRecord"))},fetchShareRecord:function(e){var t=this,n=D.a.create(e);return this.retain(this,"this - fetchShareRecord"),this.processor.enqueue(J,this,n).then(function(e){var n=t.materializedShareRecord;return n?(n.replaceData(e),n):t.loadShareFromDataHash(e)}).finally(this.release.bind(this,this,"this - fetchShareRecord"))},loadShareFromDataHash:function(e){if(e.currentUserParticipant){var t=e.currentUserParticipant.userIdentity.userRecordName;x.a.currentUserRecordName=t}return this.mostRecentShareDataHashFromServer=g.a(N.a.processDataHashThroughModel(e)),this.createShareFromDataHash(e)},unforkIfAppropriate:function(e){for(var t=this.processor._queue,n=0,i=t.length,r=!1;n<i;n++){var a=t[n][2];if("UPDATE_SHARE"===a.type||"CONVERT_SHARE_TO_PRIVATE"===a.type){r=!0;break}}r||(I.b.debug("== UNFORKING"),this.materializedShareRecord.replaceData(e),this.mostRecentOriginalShareDataHash=null)},updateShare:function(e){this.mostRecentOriginalShareDataHash||I.b.debug("== FORKING");var t=this.mostRecentOriginalShareDataHash||this.mostRecentShareDataHashFromServer,n=g.a(t),i=this.materializedShareRecord.toJSON(),r=R.a.create(i,n,e);return this.mostRecentOriginalShareDataHash=i,this.retain(this,"this - updateShare"),this.processor.enqueue(X,this,r).finally(this.release.bind(this,this,"this - updateShare"))},deleteShare:function(e,t){var n=this.mostRecentOriginalShareDataHash||this.mostRecentShareDataHashFromServer,i=g.a(n),r=this.materializedShareRecord.toJSON(),a=T.a.create(r,i,t);return this.retain(this,"this - deleteShare"),this.processor.enqueue(Z,this,a).finally(this.release.bind(this,this,"this - deleteShare"))},membershipInfo:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n={lookupInfo:e.map(function(e){return(e=e.userIdentity||e).phoneNumber?{type:"phoneNumber",value:e.phoneNumber}:e.emailAddress?{type:"email",value:e.emailAddress}:void 0})},s=i.a.create({serviceName:"cksharews",pathname:"/ws/v1/autocomplete/membershipInfo"}),o=r.a.create({method:"POST",url:s,body:n,useCredentialsIfCrossOrigin:!0,timeout:6e4});if(1==!t){var c=o.url.toString();o=a.a.create(c,{method:"POST",body:n,useCredentialsIfCrossOrigin:!0,timeout:6e4,serviceName:"cksharews"})}return o.send().then(function(e){return e.body})},__superMap:{_$2hZ$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"SharingIOService"}});function U(e,t){return function(e){var t=e.type;return e.didUpdateShareRecord&&("CREATE_SHARE"===t||"UPDATE_SHARE"===t||"DELETE_SHARE"===t)}(t)?(0,t.didUpdateShareRecord)(ee(e)).then(function(){return e}):y.a.resolve(e)}function W(e,t){if(function(e){var t=e.type;return e.didUpdateRootRecord&&("CREATE_SHORT_GUID"===t||"CREATE_SHARE"===t||"DELETE_SHARE"===t)}(t)){var n=t.didUpdateRootRecord,i=t.recordDataHash;if(!i.recordName){var r=i.forRecord;r&&r.recordName}return n("CREATE_SHORT_GUID"===t.type?ee(e):null).then(function(){return e})}return y.a.resolve(e)}function G(e,t,n){return e.retain(e,"subject - ckDeleteRecords"),e.database.deleteRecords(t.body,e.zoneID.toHash()).catch(L.c).then(L.b).then(function(e){return W(e,t)}).then(function(e){return U(e,t)}).catch(z(e,t,n)).finally(e.release.bind(e,e,"subject - ckDeleteRecords"))}function H(e,t,n){return e.retain(e,"subject - ckFetchRecords"),e.database.fetchRecords(t.body,e.zoneID.toHash()).catch(L.c).then(L.b).catch(z(e,t,n)).finally(e.release.bind(e,e,"subject - ckFetchRecords"))}function $(e,t,n){var i=void 0,r=t.provideRootRecordForUpdate,a=t.willUpdateShareRecord,s=t.type;return i="CREATE_SHARE"!==s&&"CREATE_SHORT_GUID"!==s||!r?"UPDATE_SHARE"===s&&a?a(t.recordDataHash):y.a.resolve():"CREATE_SHARE"===s?r(t.recordDataHash.forRecord).catch(L.d).then(function(e){t.recordDataHash.forRecord=g.a(e),t.propertyChanged("recordDataHash")}):r(t.recordDataHash).catch(L.d).then(function(e){t.recordDataHash=g.a(e)}),e.retain(e,"subject - ckSaveRecords"),i.then(function(){if("CREATE_SHORT_GUID"===s){var i=t.recordDataHash,r=i.shortGUID;if(v.a(r)&&!b.a(r))return{records:[i],isRecordsResponse:!0}}return e.database.saveRecords(t.body,e.zoneID.toHash()).catch(L.c).then(L.b).then(function(e){return W(e,t)}).then(function(e){return U(e,t)}).catch(z(e,t,n))}).finally(e.release.bind(e,e,"subject - ckSaveRecords"))}function z(e,t,n){return function(i){var r=i.errors;if(r)for(var a=CloudKit.CKError,s=t.type,o=r.length,c=function(){var i=r[l],c=!1,p=void 0;switch(Object(k.a)(i)){case a.ATOMIC_ERROR:l===o-1&&(c=!0);break;case a.ACCESS_DENIED:case"MANAGED_APPLE_ID_RESTRICTED":c=!0;break;case a.TRY_AGAIN_LATER:case a.THROTTLED:case"ZONE_BUSY":null==n&&(n=0),n<5?(u=y.a.create(),d=1e3*Math.exp(n),w.a(function(){u.resolve(n+1)},d),p=u.then(function(n){return Q(e,t,n)})):c=!0;break;case a.CONFLICT:case"OP_LOCK_FAILURE":if("CREATE_SHARE"===s||"CREATE_SHORT_GUID"===s){var f=t.provideLatestRootRecordAfterUpdateConflict;if(f){var m=t.recordDataHash,v="CREATE_SHARE"===s;v&&(m=m.forRecord),p=f(m).catch(L.d).then(function(n){if(n.recordChangeTag===m.recordChangeTag)throw e.reset(),i;return v?t.recordDataHash.forRecord=n:t.recordDataHash=n,Q(e,t)})}else c=!0}else h=D.a.create(t.recordDataHash.recordName),p=J(e,h).then(function(n){n=N.a.processDataHashThroughModel(n),e.mostRecentShareDataHashFromServer=g.a(n);var r=S.d(t.recordDataHash,n,t.originalRecordDataHash,j);if(r===S.b)throw e.reset(),i;return t.originalRecordDataHash=e.mostRecentShareDataHashFromServer,e.mostRecentOriginalShareDataHash=r,t.recordDataHash=r,Q(e,t)});break;default:c=!0}if(p)return{v:p};if(c)throw e.reset(),i},l=0;l<o;l++){var u,d,h,p=c();if("object"===(void 0===p?"undefined":V(p)))return p.v}throw i}}function K(e,t){t=N.a.processDataHashThroughModel(t),e.mostRecentShareDataHashFromServer=g.a(t);for(var n=e.processor._queue,i=0,r=n.length;i<r;i++){var a=n[i][2];if("FETCH_SHARE"===a.type){var s=t.recordName;a.recordName=s}else if("DELETE_SHARE"===a.type)a.recordDataHash=g.a(t);else if("CONVERT_SHARE_TO_PRIVATE"===a.type)a.shareRecordDataHash=g.a(t);else if("UPDATE_SHARE"===a.type){var o=a.recordDataHash,c=a.originalRecordDataHash,l=S.d(o,t,c,j);if(l===S.b)break;a.recordDataHash=l,a.originalRecordDataHash=t,t=l}}}function Q(e,t,n){switch(t.type){case"CREATE_SHARE":case"CREATE_SHORT_GUID":case"UPDATE_SHARE":return $(e,t,n);case"DELETE_SHARE":return G(e,t,n);case"FETCH":case"FETCH_SHARE":return H(e,t,n);default:throw"Attempted to re-run an unknown operation type: "+t.type}}function q(e,t){return e.retain(e,"subject - runConvertToPrivateShareTransaction"),Z(e,t.operationForDeleteShareRecord).then(function(n){return void 0===n?J(e,t.operationForFetchDataRecord).then(function(n){return t.dataRecordDataHash=n,Y(e,t.operationForCreateShareRecord)}):(K(e,n.toJSON()),e.materializedShareRecord)}).finally(e.release.bind(e,e,"subject - runConvertToPrivateShareTransaction"))}function Y(e,t){e.retain(e,"subject - runCreateShareTransaction");var n=t.proposedShareRecordName;return f.a(n)&&(t.recordDataHash.recordName=n),$(e,t).then(ee).then(function(t){return e.createShareFromDataHash(t),K(e,t),e.unforkIfAppropriate(t),e.materializedShareRecord}).finally(e.release.bind(e,e,"subject - runCreateShareTransaction"))}function Z(e,t){return G(e,t).then(ee).then(function(t){if(!t.deleted){t=N.a.processDataHashThroughModel(t),e.mostRecentShareDataHashFromServer=g.a(t);var n=e.materializedShareRecord;return n.replaceData(t),n}e.mostRecentShareDataHashFromServer=null})}function J(e,t){return H(e,t).then(ee)}function X(e,t){return e.retain(e,"subject - runUpdateShareTransaction"),$(e,t).then(ee).then(function(t){return K(e,t),e.unforkIfAppropriate(t),e.materializedShareRecord}).finally(e.release.bind(e,e,"subject - runUpdateShareTransaction"))}function ee(e){return function(e,t){var n=t.records?t.records.length:-1;if(!t.isRecordsResponse||n<1)throw new Error("Expected %{amount} record(s), found %{count}",{amount:1,count:n,response:t});return t.records.slice(0,1)}(0,e).pop()}}).call(this,n(6))},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var i=n(80),r=n(360),a=n(141),s=n(1192),o=n(798),c=n(1224),l=i.a.extend(r.a,{valueForChange:function(e){var t=arguments,n=e.leftValue,i=e.rightValue,r=e.baseValue,o=e.direction,l=e.key;if(o===a.a.BOTH){if("participants"===l)return function(e,t,n){var i=n.length,r={addedValues:[],updatedIndices:[],updatedValues:[],removedIndices:[]},o={addedValues:[],updatedIndices:[],updatedValues:[],removedIndices:[]},l=0,u=s.a(e),p=s.a(t);do{f(r,l,n,u),f(o,l,n,p),l++}while(l<i);var g=r.addedValues,m=r.removedIndices,v=r.updatedIndices,_=o.addedValues,b=o.removedIndices,y=o.updatedIndices,I=void 0;for(I=v.length-1;I>=0;I--)if(y.indexOf(v[I])>=0)return a.b;if(g.length>0&&_.length>0||g.length>0&&b.length>0||m.length>0&&_.length>0)return a.b;if(m.length>0&&b.length>0)for(I=m.length-1;I>=0;I--)if(!(b.indexOf(m[I])>=0))return a.b;return function(e,t,n){var i=s.a(e);h(i,t.updatedIndices,t.updatedValues),h(i,n.updatedIndices,n.updatedValues);for(var r=c.a(t.removedIndices.concat(n.removedIndices)).sort(),a=r.length-1;a>=0;a--)i.splice(r[a],1);return d(i,t.addedValues),d(i,n.addedValues),i}(n,r,o)}(n,i,r);if("fields"===l)return a.d(n,i,r,u.create())}return this.__s._$BO$valueForChange.apply(this,t)},__superMap:{_$BO$valueForChange:"valueForChange"},staticMembers:{__QUALIFIED_CLASS_NAME__:"CKShareRecordMergingDelegate"}}),u=i.a.extend(r.a,{valueForChange:function(e){var t=arguments,n=e.leftValue,i=e.rightValue;return e.direction!==a.a.BOTH?this.__s._$R5$valueForChange.apply(this,t):!n||!i||n.value!==i.value||n.type&&i.type&&n.type!==i.type?a.b:n},__superMap:{_$R5$valueForChange:"valueForChange"},staticMembers:{__QUALIFIED_CLASS_NAME__:"FieldsMergingDelegate"}});function d(e,t){for(var n=t.length-1;n>=0;n--){var i=t[n];e.push(s.a(i))}}function h(e,t,n){for(var i=t.length-1;i>=0;i--){var r=t[i],a=n[i];e[r]=s.a(a)}}function p(e,t){for(var n=0,i=t.length,r=e.userIdentity.lookupInfo;n<i;n++){var a=t[n];if(o.a(a.userIdentity.lookupInfo,r))return t.splice(n,1),!1}return!0}function f(e,t,n,i){for(var r=n[t],a=s.a(n),c=r?r.userIdentity.lookupInfo:null,l=!1,u=i.length-1;u>=0;u--){var d=i[u];!l&&o.a(c,d.userIdentity.lookupInfo)?(o.a(r,d)||(e.updatedIndices.push(t),e.updatedValues.push(d)),l=!0,i.splice(u,1)):p(d,a)&&(e.addedValues.push(d),i.splice(u,1))}l||e.removedIndices.push(t)}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n(41),r=n(218).a.extend({body:i.c({dependencies:["recordDataHash"],readOnly:!0,get:Object.assign(function(){var e=this.recordDataHash;return{recordName:e.recordName,recordChangeTag:e.recordChangeTag,createShortGUID:!0}},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return{recordName:r.recordName,recordChangeTag:r.recordChangeTag,createShortGUID:!0}}})}),provideRootRecordForUpdate:null,provideLatestRootRecordAfterUpdateConflict:null,didUpdateRootRecord:null,type:"CREATE_SHORT_GUID",staticMembers:{__QUALIFIED_CLASS_NAME__:"CreateRecordShortGUIDOperation"}})},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var i=n(80),r=n(36),a=n(34),s=n(41),o=n(282),c=n(283),l=n(245),u=n(9),d=i.a.extend(r.a,{dataRecordDataHash:a.b(),didUpdateRootRecord:null,didUpdateShareRecord:null,provideRootRecordForUpdate:null,provideLatestRootRecordAfterUpdateConflict:null,operationForCreateShareRecord:s.c({dependencies:["dataRecordDataHash"],readOnly:!0,get:Object.assign(function(){return o.a.create({publicPermission:u.a.NONE,forRecord:this.dataRecordDataHash,fields:this.shareRecordDataHash.fields,recordType:"cloudkit.share"},null,{didUpdateRootRecord:this.didUpdateRootRecord,didUpdateShareRecord:this.didUpdateShareRecord,provideRootRecordForUpdate:this.provideRootRecordForUpdate,provideLatestRootRecordAfterUpdateConflict:this.provideLatestRootRecordAfterUpdateConflict})},{__CW__getter:function(e,t,n,i){return o.a.create({publicPermission:u.a.NONE,forRecord:i.internalGet(this,t[0+n]),fields:this.shareRecordDataHash.fields,recordType:"cloudkit.share"},null,{didUpdateRootRecord:this.didUpdateRootRecord,didUpdateShareRecord:this.didUpdateShareRecord,provideRootRecordForUpdate:this.provideRootRecordForUpdate,provideLatestRootRecordAfterUpdateConflict:this.provideLatestRootRecordAfterUpdateConflict})}})}),operationForDeleteShareRecord:s.c({dependencies:["shareRecordDataHash"],readOnly:!0,get:Object.assign(function(){return c.a.create(this.shareRecordDataHash,null,{didUpdateRootRecord:this.didUpdateRootRecord,didUpdateShareRecord:this.didUpdateShareRecord})},{__CW__getter:function(e,t,n,i){return c.a.create(i.internalGet(this,t[0+n]),null,{didUpdateRootRecord:this.didUpdateRootRecord,didUpdateShareRecord:this.didUpdateShareRecord})}})}),operationForFetchDataRecord:s.c({dependencies:["dataRecordDataHash"],readOnly:!0,get:Object.assign(function(){return l.a.create(this.dataRecordDataHash.recordName)},{__CW__getter:function(e,t,n,i){return l.a.create(i.internalGet(this,t[0+n]).recordName)}})}),shareRecordDataHash:a.b(),type:"CONVERT_SHARE_TO_PRIVATE",init:function(e,t,n){this.__s._$qC$init.call(this,n),this.shareRecordDataHash=e,this.dataRecordDataHash=t},__superMap:{_$qC$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"ConvertShareRecordToPrivateOperation"}})},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var i=n(41),r=n(1192),a=n(218),s=n(9),o=n(114),c=n(103),l=a.a.extend({body:i.c({dependencies:["recordDataHash"],readOnly:!0,get:Object.assign(function(){var e=r.a(this.recordDataHash);e.publicPermission===s.a.NONE?e.participants=u(e.participants):delete e.participants;var t=e.participants;return t&&t.forEach(function(e){var t=e&&e.userIdentity,n=t&&t.lookupInfo,i=n&&n.phoneNumber;i&&(e.userIdentity.lookupInfo.phoneNumber=Object(c.a)(i))}),delete e.created,delete e.modified,delete e.currentUserParticipant,e},{__CW__getter:function(e,t,n,i){var a=r.a(i.internalGet(this,t[0+n]));a.publicPermission===s.a.NONE?a.participants=u(a.participants):delete a.participants;var o=a.participants;return o&&o.forEach(function(e){var t=e&&e.userIdentity,n=t&&t.lookupInfo,i=n&&n.phoneNumber;i&&(e.userIdentity.lookupInfo.phoneNumber=Object(c.a)(i))}),delete a.created,delete a.modified,delete a.currentUserParticipant,a}})}),type:"UPDATE_SHARE",didUpdateShareRecord:null,staticMembers:{__QUALIFIED_CLASS_NAME__:"UpdateShareRecordOperation"}});function u(e){var t={},n={};return e&&e.filter(function(e){var i=e.userIdentity&&e.userIdentity.lookupInfo;if(!i)return!0;var r=Object(o.a)(i.emailAddress);if(r){if(t[r])return!1;t[r]=!0}var a=i.phoneNumber;if(a){if(n[a])return!1;n[a]=!0}return!0})}},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return b});var i=n(34),r=n(1173),a=n(1182),s=n(36),o=n(96),c=n(780),l=n(41),u=n(121),d=n(1184),h=n(1125),p=n(125),f=n(81),g=n(1239),m=n(46),v=n(361),_=void 0,b=n(115).a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"ELEMENT",tagname:"div",classes:["pok-live-photo-container"],name:"livePhotoContainer"}],classes:["pok-live-photo-presenter-view",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isInLivePhotoMode",truevalue:"pok-showing-live-photo",attributes:{}}]}},__QUALIFIED_CLASS_NAME__:"LivePhotoPresenterView"},lpkBadge:i.b({readOnly:!0,dependencies:["media.primaryAsset.isLivePhotoPlayEnabled","topLeftBadges","topLeftBadges.contentsDidChange"],get:Object.assign(function(){if(this.getPath("media.primaryAsset.isLivePhotoPlayEnabled")){var e=this.topLeftBadges;if(e)for(var t=0;t<e.length;t++){var n=e.objectAt(t);if(r.a(n,v.a))return n}}},{__CW__getter:function(e,t,n,i){if(i.internalGetPath(this,t[0+n])){var a=this.topLeftBadges;if(a)for(var s=0;s<a.length;s++){var o=a.objectAt(s);if(r.a(o,v.a))return o}}}})}),topLeftBadgeViewClasses:a.a([v.a]),_playLivePhoto:s.e("lpkBadge.playLivePhoto",function(){this._wantsButLacksLPPPlayback=!0;var e=this.feedbackService;e&&e.report("livePhotoPlayback")}),_stopLivePhoto:s.f("lpkBadge.stopLivePhoto",function(){this._wantsButLacksLPPPlayback=!1,this.livePhotoPlayer&&this.livePhotoPlayer.beginFinishingPlaybackEarly()}),_wantsButLacksLPPPlayback:i.b(!1),init:function(){var e=this,t=arguments;this._propagateLPPStatus=o.a(function(t,n,i,r,a,s){c.a.begin().setIfChanged(e,"_lpp_progress",t).setIfChanged(e,"_lpp_errorCount",n&&n.length).setIfChanged(e,"_lpp_isPlaying",i).setIfChanged(e,"_lpp_videoWidth",r).setIfChanged(e,"_lpp_videoHeight",a).setIfChanged(e,"_lpp_canPlay",s).end()}),this.oneUpLivePhotoLongTapGR=g.a.create({event:"oneUpLivePhotoLongTap",delegate:this}),this.addGestureRecognizer(this.oneUpLivePhotoLongTapGR),this.__s._$zp$init.apply(this,t)},isInLivePhotoMode:i.b({readOnly:!0,dependencies:["isBackgroundablySteadilyAloneInParent","isImageSizeStationary","canHoldDerivatives","imageDerivativeLoader.isComplete","media.primaryAsset.isLivePhotoPlayEnabled"],get:Object.assign(function(){return Boolean(void 0!==e.LivePhotosKit&&this.isBackgroundablySteadilyAloneInParent&&this.isImageSizeStationary&&this.canHoldDerivatives&&this.getPath("imageDerivativeLoader.isComplete")&&this.getPath("media.primaryAsset.isLivePhotoPlayEnabled"))},{__CW__getter:function(t,n,i,r){return Boolean(void 0!==e.LivePhotosKit&&r.internalGet(this,n[0+i])&&r.internalGet(this,n[1+i])&&r.internalGet(this,n[2+i])&&r.internalGetPath(this,n[3+i])&&r.internalGetPath(this,n[4+i]))}})}),isLivePhotoPlayerVisible:i.b({readOnly:!0,dependencies:["livePhotoPlayer","_lpp_isPlaying"],get:Object.assign(function(){return Boolean(this._lpp_isPlaying&&this.livePhotoPlayer)},{__CW__getter:function(e,t,n,i){return Boolean(i.internalGet(this,t[1+n])&&i.internalGet(this,t[0+n]))}})}),isRenderDisabled:function(){var e=arguments;return this.__s._$1S4$isRenderDisabled.apply(this,e)||this.isLivePhotoPlayerVisible},_rerenderSelfWhenLPPVisibilityChanges:s.f("isLivePhotoPlayerVisible",function(){var e=this.isRenderDisabled();this._rswlppvc_last_isRenderDisabled!==(this._rswlppvc_last_isRenderDisabled=e)&&this.renderSelfSoon()}),_mediaChanged:s.f({inputs:["media","lpkBadge"],callback:function(){var e=this.effectType,t=this.media,n=this.lpkBadge;t&&n&&e&&n.updateBadgeText(e.value)}}),effectType:l.c({readOnly:!0,get:function(){var e=this.media;if(e)return e.primaryAsset.livePhotoEffectType}}),livePhotoPlayer:i.b({readOnly:!0,dependencies:["isInLivePhotoMode"],get:Object.assign(function(){return!_&&e.LivePhotosKit&&((_=e.LivePhotosKit.createPlayer({autoplay:!0,effectType:"live",proactivelyLoadsVideo:!0,showsNativeControls:!1})).style.cssText="position: absolute; left: 0px; top: 0px; width: 100%; height:100%;"),this.isInLivePhotoMode?_:null},{__CW__getter:function(t,n,i,r){return!_&&e.LivePhotosKit&&((_=e.LivePhotosKit.createPlayer({autoplay:!0,effectType:"live",proactivelyLoadsVideo:!0,showsNativeControls:!1})).style.cssText="position: absolute; left: 0px; top: 0px; width: 100%; height:100%;"),r.internalGet(this,n[0+i])?_:null}}),didChange:function(e){var t=this.livePhotoContainer,n=this._lastLivePhotoPlayer;if(n!==e){if(this._lastLivePhotoPlayer=e,n){n.parentNode===t&&t.removeChild(n);var i=this._statusObserverKeyOnLPP&&n[this._statusObserverKeyOnLPP];i&&i.disconnect()}if(e){var r=e.parentNode;r&&r!==t&&r.removeChild(e),t.appendChild(e);var a=this.media,s=a.derivativeInfoForGeometricLength(this.getPath("imageDerivativeLoader.perfectGeometricLength"),"renderableVideo");s?(this.lpkBadge.attachPlayerInstance(e),e.setProperties({caption:a.caption,effectType:this.effectType.value,photo:this.derivative.element,videoSrc:s.url}),this._statusObserverKeyOnLPP||(this._statusObserverKeyOnLPP="_statusObserverFor_"+u.a(this)),e[this._statusObserverKeyOnLPP]?e[this._statusObserverKeyOnLPP].connect():e[this._statusObserverKeyOnLPP]=e.observe("loadProgress","errors","isPlaying","videoWidth","videoHeight","canPlay",this._propagateLPPStatus),this.lpkBadge.resetBadge()):this._propagateLPPStatus(0,m.c.getAutodisposingInstanceFromParams("NO_DERIVATIVE_ERROR"))}}}}),_lpp_progress:i.b(),_lpp_errorCount:i.b(),_lpp_isPlaying:i.b(),_lpp_videoWidth:i.b(),_lpp_videoHeight:i.b(),_lpp_canPlay:i.b(),_playLPPOnceAble:s.f("livePhotoPlayer","_lpp_canPlay","_lpp_isPlaying","_wantsButLacksLPPPlayback",function(e,t,n,i){var r=this,a=Boolean(e&&t&&!n&&i);Boolean(this._plppoa_last_shouldPlayNowResult)!==(this._plppoa_last_shouldPlayNowResult=a)&&a&&(this._wantsButLacksLPPPlayback=!1,d.a(function(){r.livePhotoPlayer&&r._lpp_canPlay&&r.livePhotoPlayer.play()},0))}),feedbackService:i.b(h.a.bindingFor("application.feedbackService")),_maintainLivePhotoPlayerStyling:s.f("imageLeft","imageTop","imageWidth","imageHeight","_lpp_videoWidth","_lpp_videoHeight","isLivePhotoPlayerVisible","livePhotoPlayer","livePhotoContainer",function(e,t,n,i,r,a,s,o,c){if(!s)return c.style.display="none",void(o?(o.style.display="none",o.style.width=o.style.height="0px",this._mlpps_lppSize!==(this._mlpps_lppSize=0)&&o.updateSize()):this._mlpps_lppSize=0);var l=Math.min(n,r),u=Math.min(i,a);o.style.display=c.style.display="",o.style.width=c.style.width=l+"px",o.style.height=c.style.width=u+"px",c.style.transformOrigin="0 0",c.style.position="absolute",p.a(c).layerBack().translateDevicePixels(e,t).scale(n/l,i/u),this._mlpps_lppSize!==(this._mlpps_lppSize=1e5*l+u)&&o.updateSize()}),_updateBadge:s.f("_lpp_progress","_lpp_errorCount",function(e,t){if(this.lpkBadge){if(this.lpkBadge.shouldShowError=Boolean(t),1===e&&0===this.lpkBadge.progress)return;this.lpkBadge.progress=e}}),_userLocaleChanged:s.f(h.a.bindingFor("application.userLocale"),function(t){return e.LivePhotosKit.Localization.locale=t}),oneUpLivePhotoLongTap:function(){this.oneUpLivePhotoLongTapGR.state===f.b.Ended&&this._playLivePhoto()},__superMap:{_$zp$init:"init",_$1S4$isRenderDisabled:"isRenderDisabled"}})}).call(this,n(6))},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return E}),n(29);var i,r,a=n(1185),s=n(34),o=n(1172),c=n(36),l=n(1184),u=n(180),d=n(172),h=n(1283),p=n(69),f=n(1147),g=n(404),m=n(1148),v=n(197),_=n(201),b=n(73),y=n(285),I=n(517),w=n(220),S=(i=a.a,(r=function(e){var t=i.create();try{e(t.resolve.bind(t),t.reject.bind(t))}catch(e){t.reject(e)}return t}).all=i.all.bind(i),r.race=i.race.bind(i),r.resolve=i.resolve.bind(i),r.reject=i.reject.bind(i),r);function C(e){return function(){var t=e.apply(this,arguments);return new S(function(e,n){return function i(r,a){try{var s=t[r](a),o=s.value}catch(e){return void n(e)}if(!s.done)return S.resolve(o).then(function(e){i("next",e)},function(e){i("throw",e)});e(o)}("next")})}}var O=Object(_.f)("ImportJob.Adding"),A=Object(_.f)("ImportSuccess.Alert.Description."),E={mixinDependencies:[f.a,I.a],shouldPollEvenWhenNotAttached:!0,shouldShowShareBackToastIfAvailable:s.b(!1),importedAssetDescriptor:s.b(""),importedAssetCount:s.b({type:Number,get:function(e){return e},set:function(e){var t=o.a(this,"container.medias.length")||0;return Math.max(0,Math.min(t,e))}}),importProgressLabel:s.b(""),importProgressValue:s.b(0),possibleImportProgressLabels:s.b([]),shouldShowImportProgressView:s.b(!1),_importingAssetDescriptor:_.b,_importingAssetCount:s.b(0),_importJobFinishedTimeout:void 0,_importProgressObserver:c.f({inputs:["jobToDisplay.animatedJobProgress","jobToDisplay.jobStatus"],callback:function(e,t){if(this.importIsInProgress){var n=this.jobToDisplay.getFailedJobs();if(n.length>0)this.importDidFail(n),0===this.jobToDisplay.numberOfChildren&&(this.importIsInProgress=!1,this.shouldShowImportProgressView=!1);else if(t===g.b.IN_PROGRESS||t===g.b.COMPLETED){var i=this._importingAssetCount,r=this._importingAssetDescriptor;this.importProgressLabel=Object(b.c)(O[r],{count:i}),this.importProgressIsIndeterminate=!1,this.shouldShowShareBackToastIfAvailable=!0}isNaN(e)||(this.importProgressValue=100*e,1===e&&t===g.b.COMPLETED&&this.importDidFinish())}}}),importDidFinish:function(){var e=this;this.shouldShowImportProgressView=!1,this.isAttached?this._importJobFinishedTimeout=l.a(function(){e._cleanUpImport()},y.a+y.b):this._cleanUpImport()},_cleanUpImport:function(){this.jobToDisplay.removeAllChildJobs();var e=this._importingAssetCount,t=this._importingAssetDescriptor;this.importedAssetCount+=e,""===this.importedAssetDescriptor?this.importedAssetDescriptor=t:this.importedAssetDescriptor!==t&&(this.importedAssetDescriptor=_.a),this._importingAssetCount=0,this._importingAssetDescriptor="",!0===this.isAllAddedToLibrary?(this.gridViewController.deselectAll(),this.selectionModeIsActive=!1):this.removeImportedItemsFromSelection(),this.isAttached&&this.showImportSuccessDialog(e,t)},removeItemsInProgressFromSelection:function(e){var t=this.gridViewController,n=this.collection;e.forEach(function(e){var i=n.encodedObjectAt(e);if(void 0!==i){var r=n.encodedHandleFor(i);t.deselectItem({handle:r})}})},removeImportedItemsFromSelection:function(){var e=this,t=w.a.sharedInstance;this.gridViewController.selection.forEach(function(n){if(t.isMediaImported(n)){var i=e.collection.handleFor(n);e.gridViewController.deselectItem({handle:i})}})},jobToDisplay:s.b({readOnly:!0,strong:!0,defaultValue:u.b(m.a)}),importDidFail:function(t){var n=this;t.forEach(function(e){return n.jobToDisplay.removeChildJob(e)}),-1!==t.map(function(e){return e.serverErrorCode}).indexOf(e.CloudKit.CKError.QUOTA_EXCEEDED)?(this.showUnableToImportErrorDialog(),this.userIsUnableToImport=!0):this.showImportErrorDialog()},importDidBegin:function(e){var t=e.itemCounts,n=e.recordCopierJob,i=e.selectedIndices,r=t.assetCount,a=t.photosCount,s=t.videosCount,o=Object(_.g)(r,a,s);this._importingAssetDescriptor=o,this._importingAssetCount=this._importingAssetCount+r,this.jobToDisplay.addChildJob(n),this.removeItemsInProgressFromSelection(i)},showImportSuccessDialog:function(e,t){var n,i=this,r=this.primaryInteractionMode===v.a.TOUCH,a=A[t];n=r?{message:Object(b.c)(a,{count:e}),primaryButton:{title:d.d("ImportSuccess.Alert.Button.GoToPhotos"),wasActivated:function(){return i.navigateToAllPhotos()}},alternateButton:{title:d.d("ImportSuccess.Alert.Button.Dismiss"),action:"hide"}}:{iconNames:["photos-icon"],message:d.d("ImportSuccess.Alert.Message.Photos"),description:Object(b.c)(a,{count:e}),primaryButton:{title:d.d("ImportSuccess.Alert.Button.GoToPhotos"),wasActivated:function(){return i.redirectToPhotos()}},alternateButton:{title:d.d("ImportSuccess.Alert.Button.Dismiss"),action:"hide"}},h.a.show(n)},navigateToAllPhotos:function(){this.sendEvent("navigateToAllPhotosPage")},showImportErrorDialog:function(){var e={iconNames:["photos-icon"],message:d.d("Import.Error.Alert.Message"),description:d.d("Import.Error.Alert.Description"),primaryButton:{title:d.d("Import.Error.Alert.Button"),action:"hide"}};h.a.show(e)},showUnableToImportErrorDialog:function(){var e={iconNames:["photos-icon"],message:d.d("UnableToImport.Error.Alert.Message"),description:d.d("UnableToImport.Error.Alert.Description"),primaryButton:{title:d.d("UnableToImport.Error.Alert.Button"),action:"hide"}};h.a.show(e)},redirectToPhotos:function(){var t=e.top.location.origin+"/#photos";window.top.location.assign(t)},verifyUserCanImport:function(){var e=p.b();return e&&!e.isCplZoneWritable?(this.showUnableToImportErrorDialog(),this.userIsUnableToImport=!0,!1):!this.currentUserIsShareOwner},setUpImportProgressView:function(e){this.possibleImportProgressLabels=[d.d("ImportJob.Preparing"),Object(b.c)(O[_.b],{count:e}),Object(b.c)(O[_.c],{count:e}),Object(b.c)(O[_.a],{count:e})],this.importProgressLabel=d.d("ImportJob.Preparing"),this.importIsInProgress=!0,this.shouldShowImportProgressView=!0,this.view&&this.view.importProgressView&&this.view.importProgressView.reset(),this.importProgressIsIndeterminate=!0},importSelectionToLibrary:function(e){var t=this;return C(regeneratorRuntime.mark(function n(){var i,r,a,s,o,c,l,u;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t.verifyUserCanImport()){n.next=2;break}return n.abrupt("return");case 2:return i=t.collection,r=t.container,a=t.rootRecord,s=t.selectionModeIsActive,o=t.importMediasManager.normalizeSelectedIndices(i,e,s).length,t.setUpImportProgressView(o),n.next=7,t.importMediasManager.importMedias(i,r,a,e,s);case 7:c=n.sent,l=c.itemCounts,u=c.recordCopierJob,c.hasError?t.importDidFail():t.importDidBegin({itemCounts:l,recordCopierJob:u,selectedIndices:e});case 12:case"end":return n.stop()}},n,t)}))()},importIsInProgress:s.b({defaultValue:!1,type:Boolean}),importProgressIsIndeterminate:s.b({defaultValue:!1,type:Boolean}),signInAndImportMedias:function(e){var t=this;return C(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.signIn();case 2:if(!n.sent.ok){n.next=5;break}return n.abrupt("return",t.importSelectionToLibrary(e));case 5:return n.abrupt("return");case 6:case"end":return n.stop()}},n,t)}))()}}}).call(this,n(6))},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n(49),r=n(54),a={mixinDependencies:[i.a],verifyUserCanImport:r.a.define(),setUpImportProgressView:r.a.define(),importDidBegin:r.a.define(),importDidFail:r.a.define()}},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n(200),r=n(1182),a=i.a.extend({init:function(){this.__s._$1n$init.call(this),this.element.innerHTML=n(1092)},additionalClassNames:r.a(["disclosure-arrow"]),action:"disclosureArrowWasClicked",__superMap:{_$1n$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"DisclosureArrow"}})},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return v}),n(394);var i,r,a=n(1185),s=n(409),o=n(36),c=n(34),l=n(180),u=n(790),d=n(93),h=n(200),p=n(1182),f=n(172),g=n(76),m=(n(485),n(1102),i=a.a,(r=function(e){var t=i.create();try{e(t.resolve.bind(t),t.reject.bind(t))}catch(e){t.reject(e)}return t}).all=i.all.bind(i),r.race=i.race.bind(i),r.resolve=i.resolve.bind(i),r.reject=i.reject.bind(i),r),v=s.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"settingsButton"},{type:"VIEWOUTLET",tagname:"view",name:"signOutButton"}],classes:["cosk-account-menu"]},className:"cosk-ui-title-bar-account-menu-view",__QUALIFIED_CLASS_NAME__:"UserPopoverMenuView"},_measure:o.f({inputs:["isAttached"],callback:function(e){if(e){this.get("style").set("width","auto").set("height","auto");var t=this.element,n=this.desiredSize;n.set("width",t.offsetWidth),n.set("height",t.offsetHeight),this.get("style").set("width","").set("height","")}}}),desiredSize:c.b({strong:!0,defaultValue:l.b(u.a,{width:100,height:100})}),minimumSize:c.b({strong:!0,binding:d.c("desiredSize")}),settingsButton:c.b({defaultValue:l.b(h.a.extend({action:"navigateToAccountSettings",additionalClassNames:p.a(["cosk-ui-title-bar-account-menu-item-view"]),title:f.d("Application.HeaderForMouse.AccountSettings")})),readOnly:!0,strong:!0,type:h.a}),signOutButton:c.b({defaultValue:l.b(h.a.extend({action:"signOutOfiCloud",additionalClassNames:p.a(["cosk-ui-title-bar-account-menu-item-view"]),title:f.d("Application.HeaderForMouse.SignOutButton")})),readOnly:!0,strong:!0,type:h.a}),navigateToAccountSettings:function(){var t=e.top.location.origin+"/#settings";window.top.location.assign(t)},signOutOfiCloud:function(){var e,t=this;return(e=regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.sharedInstance.unauthenticate();case 2:case"end":return e.stop()}},e,t)}),function(){var t=e.apply(this,arguments);return new m(function(e,n){return function i(r,a){try{var s=t[r](a),o=s.value}catch(e){return void n(e)}if(!s.done)return m.resolve(o).then(function(e){i("next",e)},function(e){i("throw",e)});e(o)}("next")})})()}})}).call(this,n(6))},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n(65),r=n(152),a=n(69),s=n(1192),o=n(263),c={removeDataByStoreIds:function(e){if(!(e&&Array.isArray(e)&&e.length>0&&Number.isSafeInteger(e[0])))throw new i.a("DataManager#removeDataByStoreIds: storeIds must be an array of store ID numbers.",{dataManager:this});for(var t=r.a.create(),n=void 0,s=a.b()._persistenceStore,o=0,c=e.length;o<c;o++)n=e[o],t.recordChange(l(n,s));return this.merge(t).then(this.didRemoveData.bind(this,t))}};function l(e,t){var n=s.a(t.readData(e));return t.deleteData(e),o.a.create(e,n,null)}},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i={linkModel:function(e,t,n){var i=arguments,r=this.__s._$AO$linkModel.apply(this,i);return e.isInitialized&&void 0===t&&"number"==typeof e._cwStoreId&&this.notifyModelClassThatStoreItemDidChange(e.constructor,e._cwStoreId,!1),r},didRemoveData:function(e){for(var t=arguments,n=this.__s._$N4$didRemoveData.apply(this,t),i=e.storeIds,r=0,a=i.length;r<a;r++){var s=i[r],o=this.constructor.getModelClassForStoreId(s);this.notifyModelClassThatStoreItemDidChange(o,s,!0)}return n},didLoadData:function(e){for(var t=arguments,n=this.__s._$XC$didLoadData.apply(this,t),i=0,r=e.length;i<r;i++){var a=e.objectAt(i);if(null!==a.diff){var s=a.storeId,o=this.constructor.getModelClassForStoreId(s);this.notifyModelClassThatStoreItemDidChange(o,s,!1)}}return n},_fastBulkLoadedStoreIdsToNotify:[],loadData:function(e,t,n){var i=this,r=arguments,a=this.__s._$pg$loadData.apply(this,r);return"function"!=typeof this.persistenceDataDidUpdate?a:a.then(function(t){for(var n=i._fastBulkLoadedStoreIdsToNotify,r=0,a=n.length;r<a;r++){var s=n[r];i.notifyModelClassThatStoreItemDidChange(e,s,!1)}return n.length=0,t})},persistenceDataDidUpdate:function(e,t){var n=arguments,i=this.__s._$17E$persistenceDataDidUpdate.apply(this,n);return null!==t&&this._fastBulkLoadedStoreIdsToNotify.push(e),i},notifyModelClassThatStoreItemDidChange:function(e,t,n){"function"==typeof e.storeItemDidChange&&e.storeItemDidChange(t,n)},__superMap:{_$AO$linkModel:"linkModel",_$N4$didRemoveData:"didRemoveData",_$XC$didLoadData:"didLoadData",_$pg$loadData:"loadData",_$17E$persistenceDataDidUpdate:"persistenceDataDidUpdate"}}},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return f});var i=n(80),r=n(36),a=n(86),s=n(34),o=n(69),c=n(180),l=n(96),u=n(345),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},p=e.CloudKit,f=i.a.extend(r.a,{method:a.a.POST,requestPath:s.b({readOnly:!0,dependencies:["scope"],get:function(){var e=this.scope,t=o.b().getDatabaseForScope(e);return t.partition+"/database/1/"+t.containerIdentifier+"/"+t.environment+"/private/internal/records/query/batch?parallel=true"}}),scope:s.b(null),queries:c.b(Array),addQuery:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=h({},t,{query:e});return this.queries.push(n),this},commit:function(){return this.send()},send:function(){var e=this.queries,t={credentials:"include",body:{batch:e},headers:{"Content-Type":"text/plain"},method:a.a.POST};return this.fetch(this.requestPath,t).then(function(e){return function(t){return t.json().then(function(t){return t.batch.map(function(t,n){return new g(e[n],t)})})}}(e))},fetch:function(e,t){return l.a(u.a)(o.b().getCustomCloudKitUrlFromUrl(e),t)},staticMembers:{__QUALIFIED_CLASS_NAME__:"CKBatchRequest"}}),g=function(){function e(t,n){!function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this.query=t.query,this._ckResponse=n,this.continuationMarker=n.continuationMarker;var i=[],r=[],a=function(e){return p&&p.CKError&&p.CKError.isErrorObject(e)};a(n)?r.push(p.CKError.fromServerError(n)):n.records.forEach(function(e){a(e)?r.push(p.CKError.fromServerError(e)):i.push(e)}),this._errors=r,this._results=i,this.desiredKeys=t.desiredKeys,this.resultsLimit=t.resultsLimit,this.zoneID=t.zoneID,this.numbersAsStrings=t.numbersAsStrings||!1,this.zoneWide=t.zoneWide}return d(e,[{key:"isQueryResponse",get:function(){return!0}},{key:"isRecordResponse",get:function(){return!0}},{key:"records",get:function(){return this._results}},{key:"errors",get:function(){return this._errors}},{key:"hasErrors",get:function(){return this.errors.length>0}},{key:"moreComing",get:function(){return Boolean(this.continuationMarker)}}]),e}()}).call(this,n(6))},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n(69),r=n(12),a=n(284).a,s=r.a.extend({handlesType:"createSubscription",action:function(e){var t=this,n=i.b();return this.ckRequest(e).send("fetchAllSubscriptions").then(function(i){var r=i.subscriptions;if(!(r&&r.length&&r.filter(o).length))return t._createSubscription(e);n.subscriptionState=a.LISTENING})},_createSubscription:function(e){var t=i.b(),n={subscriptionType:"zone",zoneID:this.baseCKOptions().zoneID};return this.ckRequest(e).send("saveSubscriptions",n).then(function(){return t.subscriptionState=a.LISTENING}).catch(function(){return t.subscriptionState=a.FAILED})},staticMembers:{__QUALIFIED_CLASS_NAME__:"CreateSubscriptionOperationHandler"}});function o(e){return e.subscriptionType&&"zone"===e.subscriptionType}},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var i=n(69),r=n(1185),a=n(12),s=n(33),o=n(70),c=n(67),l=n(47),u=a.a.extend({handlesType:i.a.WRITE.BULK,shouldIngestChangesOnResponse:!0,shouldIngestChangesAsChangeSet:!0,action:function(e){var t=e.context.changes.filter(d);if(0===t.length)return r.a.resolve();var n=t.objectAt(0).model,i=n.zoneID,a=(n.zone,n.zone.scope);t.models.toArray().map(function(e){return e.pk});for(var s=this.baseCKOptions(i),o=[],c=0;c<t.length;c++){var l=t.objectAt(c).modelClass;-1===o.indexOf(l)&&o.push(l)}for(var u=[],g=0;g<o.length;g++)o[g].serviceKeys.forEach(function(e){-1===u.indexOf(e)&&u.push(e)});s.desiredKeys=u;var m=t.filter(p),v=t.filter(f),_=t.filter(h),b=[];if(m.length>0){var y=this.ckRequest(e,a).chain("newRecordsBatch",s);m.forEach(function(e){var t=e.model,n=e.diff,i=n.added,r=n.updated,a=[].concat(i,r);if(0!==a.length){var s=t.getServiceValuesFromDataValues(a);y.chain("create",s)}}),b.push(y.send("commit"))}if(v.length>0){var I=this.ckRequest(e,a).chain("newRecordsBatch",s);v.forEach(function(e){var t=e.model,n=e.diff,i=n.added,r=n.updated,a=[].concat(i,r);if(0!==a.length){var s=t.getServiceValuesFromDataValues(a);I.chain("update",s)}}),b.push(I.send("commit"))}if(_.length>0){var w=_.map(function(e){return e.originalData.recordName}),S=[];_.forEach(function(e){return S.push(e.model)}),this.deletedModels=S;var C=this.ckRequest(e,a).send("deleteRecords",w.toArray(),s);b.push(C)}return r.a.all(b)},ingestChangesOnResponse:function(e){var t=arguments;return e.records.every(function(e){return e.deleted})?e:this.__s._$1EJ$ingestChangesOnResponse.apply(this,t)},__superMap:{_$1EJ$ingestChangesOnResponse:"ingestChangesOnResponse"},staticMembers:{__QUALIFIED_CLASS_NAME__:"BulkHandlerOperationHandler"}});function d(e){var t=e.modelClass;return t===c.a||t===l.a||t===s.a||t===o.a}function h(e){var t=function(e){return e.changeType===i.a.WRITE.DESTROY}(e);if(t&&e.modelClass===o.a){var n=e.originalData.containerId,r=n&&!s.a.isSystemAlbumRecordName(n);if(!r){var a=i.b().feedbackService,c=i.b().FeedbackErrorType;c&&a&&a.reportError({errorType:c.SYSTEM_ALBUM_ACTION.value})}return r}return t}function p(e){var t,n=function(e){return!e.model.recordChangeTag&&e.changeType!==i.a.WRITE.DESTROY}(e);if(n&&(e.modelClass===o.a||e.modelClass===s.a)){var r="CPLContainerRelation"===(t=e.newData).recordType?t.containerId:"CPLAlbum"===t.recordType?t.recordName:null,a=r&&!s.a.isSystemAlbumRecordName(r);if(!a){var c=i.b().feedbackService,l=i.b().FeedbackErrorType;c&&l&&c.reportError({errorType:l.SYSTEM_ALBUM_ACTION.value})}return a}return n}function f(e){var t,n=function(e){var t=e.model;return Boolean(t.recordChangeTag)}(e);if(n&&e.modelClass===s.a){var r="CPLAlbum"===(t=e.newData).recordType?t.recordName:null,a=r&&!s.a.isSystemAlbumRecordName(r);if(!a){var o=i.b().feedbackService,c=i.b().FeedbackErrorType;o&&c&&o.reportError({errorType:c.SYSTEM_ALBUM_ACTION.value})}return a}return n}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n(166),r=function(e){function t(){!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this));return Object.setPrototypeOf(n,t.prototype),n.type=i.a.NO_ZONES,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(Error)},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n(69),r={isTransactionForCMM:function(e){var t=i.b(),n=e&&e.operation;n&&n.operation&&(n=n.operation);var r=n&&n.context,a=r&&r.newData&&r.newData.zoneID&&r.newData.zoneID.zoneName;if(t.isZoneNameForCMM(a))return!0;var s=r&&r.sourceZoneID&&r.sourceZoneID.zoneName,o=r&&r.targetZoneID&&r.targetZoneID.zoneName;return t.isZoneNameForCMM(s)||t.isZoneNameForCMM(o)},shouldSendInReadOnlyMode:function(e){var t=arguments;return!0===this.isTransactionForCMM(e)||this.__s._$Zr$shouldSendInReadOnlyMode.apply(this,t)},__superMap:{_$Zr$shouldSendInReadOnlyMode:"shouldSendInReadOnlyMode"}}},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return l});var i=n(65),r=n(86),a=n(533),s=n(349),o=n(537),c=n(205),l=a.a.extend({mixinDependencies:[s.a],fetch:function(e,t){var n=o.a.create(e,t);return this.fetchRequest(n)},willSendRequest:function(t){this.__s._$RO$willSendRequest.call(this,t),t.timeRequestSent=e.performance.now(),this.handleWillSendReportingRequest(t)},didReceiveResponseForRequest:function(t,n){var i=this;t.timeResponseReceived=e.performance.now(),n.text().then(function(e){i.handleDidReceiveResponseForReportingRequest(t,n,e)})},handleWillSendReportingRequest:function(e){var t=this.dsid;t&&e.url.setQueryParameter("dsid",t),this.willSendReportingRequest(e)},handleDidReceiveResponseForReportingRequest:function(e,t,n){this._handleStat(e,t,n),d(t)&&this.handleSpecialResponseWasReceived(e,t,n),this._responseWasHandledForRequest(e,t)},willSendReportingRequest:function(e){},recordStat:function(e,t,n,i){},handleSpecialResponseWasReceived:function(e,t,n){e||i.b("[CloudOSUrlService]: handleSpecialResponseWasReceived: No request specified"),t||i.b("[CloudOSUrlService]: handleSpecialResponseWasReceived: No request specified");var r={timeTaken:e.duration},a=t.status;this.specialResponseWasReceived(a,n,r)},specialResponseWasReceived:function(e,t,n){},_handleStat:function(e,t,n){e||i.b("[CloudOSUrlService]: handleDidReceiveResponseForReportingRequest: No reporting request specified"),t||i.b("[CloudOSUrlService]: handleDidReceiveResponseForReportingRequest: No response specified");var a=e.url,s=e.method,o=e.reportingMethod,l=e.duration,u=e.state,h=e.reportingPathname,p=null,f=t.status;(function(e,t){var n=t.status;return e.shouldReportFailure&&function(e){var t=Object(c.b)(e);return 421!==e&&(t===c.a.NONE||t===c.a.REQUEST_ERROR||t===c.a.SERVER_ERROR)}(n)||e.shouldReportSuccess&&function(e){return Object(c.b)(e)===c.a.SUCCESS}(n)||d(t)})(e,t)&&(p={httpMethod:o?o+" VIA "+s:s,statusCode:f,hostname:a.hostname,clientTiming:l,net_uncompressedResponseSize:n?n.length:null,timedOut:u===r.b.TIMEDOUT,urlPath:h||a.pathname}),this.recordStat(p,f,a.toString(),n)},_responseWasHandledForRequest:function(e,t){},__superMap:{_$RO$willSendRequest:"willSendRequest"},staticMembers:{__QUALIFIED_CLASS_NAME__:"ReportingURLConnection"}}),u=[330,401,421,423,503];function d(e){var t=e.status;return-1!==u.indexOf(t)}}).call(this,n(6))},function(e,t,n){"use strict";var i=n(1140),r=n(408),a=n(784),s=n(1184),o=n(69),c=n(152),l=n(1185),u=n(914),d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h={bulkFilterPredicate:function(e){var t=e.operation.type;return o.a.WRITEBULK===t},processBulkRequests:function(e){for(var t=this,n=u.a.maxOperationsInSingleRequest,i=0;i<e.length;i++){var r=e[i];if((r.operation.operation||r.operation).type===o.a.WRITEBULK){var a=r.changes,s=a.filter(f),l=a.filter(g),h=a.filter(p);if(this._verifySingleType(s,l,h)){if(a.length>n){for(var m=[],v=void 0,_=0;_<a.length;_++){v||(v=c.a.create());var b=a.objectAt(_);v.recordChange(b),v.length===n&&(m.push(v),v=void 0)}return v&&m.push(v),this.splitAndSendTransactions(r,m)}this.sendTransaction(r)}else{var y=function(){var e=[];return[s,l,h].forEach(function(t){if(t.length>0){var n=c.a.create();t.forEach(function(e){n.recordChange(e)}),e.push(n)}}),{v:t.splitAndSendTransactions(r,e)}}();if("object"===(void 0===y?"undefined":d(y)))return y.v}}}return!1},_verifySingleType:function(e,t,n){var i=0;return[e,t,n].forEach(function(e){e.length>0&&i++}),!(i>1)},splitAndSendTransactions:function(e,t){var n=[];return t.forEach(function(e){var t=r.a.create({changes:e,operation:e.get("operation")});n.push(t)}),this.addTransactions(n),this.removeTransaction(e),l.a.all(n).then(function(t){e.complete(t)},function(t){e.fail(t)}),!0}};function p(e){return e.changeType===o.a.WRITE.DESTROY}function f(e){var t=e.model;return t&&!t.recordChangeTag&&e.changeType!==o.a.WRITE.DESTROY}function g(e){var t=e.model;return!!t&&Boolean(t.recordChangeTag)}var m=n(92),v=n(113),_=n(50),b=n(40),y={burstListFilterPredicate:function(e){var t=e.operation,n=t.operation;return e.status===r.a.PENDING&&t.type===b.a&&n&&n.type===_.a.Media.BurstList},processBurstList:function(e,t){for(var n=[].concat(e,t).map(function(e){return e._burstOrigData}),i=0,r=e.length;i<r;i++){var a=I(e[i]);if(this.isBurstTransactionDuplicate(n,a))this.removeTransaction(a);else if(this.splitBurstListTransactionIfOversized(a))return!0}return e.sort(this.pendingTimeSortComparator).forEach(this.sendTransaction.bind(this)),!1},isBurstTransactionDuplicate:function(e,t){if(t._isBurstSplit)return!1;var n=t._burstOrigData;return e.indexOf(n)>-1},splitBurstListTransactionIfOversized:function(e){if(e._isBurstSplit)return!1;var t=v.MediaListOperationHandler.itemsMax,n=e.operation.operation.context,i=n.parentMediaPK,r=n.first,a=n.last;if(Math.abs(a-r)+1<=t)return!1;for(var s=b.a.find(i),o=[],c=(t-1)*(r<=a?1:-1),u=r;u<=a;){var d=u+c;d>a&&(d=a);var h=s.loadBurstMediasForRange(u,d);h._burstOrigData=e._burstOrigData,h._isBurstSplit=!0,o.push(h),u=d+1}return this.removeTransaction(e),l.a.all(o).then(function(){var t=s.burstMedias._array.slice(r,a+1),n=m.a.createFromStoreIds(t,b.a);return e.complete(n)}).catch(e.fail.bind(e)),!0}};function I(e){if(e._burstOrigData)return e;var t=e.operation.operation.context,n=t.burstId,i=t.first,r=t.last;return e._burstOrigData=n+":"+i+":"+r,e}var w={delayableOperationsFilterPredicate:function(e){return w._getTransactionDelay(e)>0},processDelayableOperations:function(e){var t=this;return 0!==e.length&&e.reduce(function(e,n){return Math.max(t._getTransactionDelay(n,!0),e)},0)},_getTransactionDelay:function(e){var t=e.operation,n=o.b().findNestedOperationHandlerForOperation(t),i=void 0;if(!(n instanceof Object&&(i=n.constructor)instanceof Object&&"function"==typeof i.getIsDelayable))return-1;if(!i.getIsDelayable(t))return-1;var r=i.getDelay(t);if(r<=0)return-1;var a=Date.now()-t._pendTime;return Math.max(r-a,0)}},S=n(121),C=n(798),O=n(67),A=n(47),E={MASTER_ASSET_DEBOUNCE_TIME:500,masterAssetFilterPredicate:function(e){return e.operation.type===A.a||e.operation.type===O.a},processMastersOrAssets:function(e){var t={},n=!1;e.sort(this.pendingTimeSortComparator);for(var i=0,r=e.length;i<r;i++){var a=e[i],s=a.operation,o=s.operation.context.model,c=S.a(o),l=s.operation.context.diff;if(!1!==l)if(l||"LOAD"!==s.operation.type.name){var u=l.added,d=l.removed,h=l.updated,p=[].concat(u,d,h);if(t.hasOwnProperty(c)&&C.a(p,t[c]))this.cancelTransaction(a);else{t[c]=p;var f=Date.now();a._masterAssetSendTime||(a._masterAssetSendTime=f+this.MASTER_ASSET_DEBOUNCE_TIME),f>a._masterAssetSendTime?this.sendTransaction(a):n=!0}}else this.sendTransaction(a)}return n}},T=n(33),M={maxActiveMedia:5,mediaListFilterPredicate:function(e){var t=e.operation,n=t.operation;return e.status===r.a.PENDING&&t.type===b.a&&n&&n.type===o.a.READ.LIST},processMedia:function(e,t){if(0===e.length)return!1;var n=v.MediaListOperationHandler.itemsMax;e.sort(this.pendingTimeSortComparator);for(var i=0,r=e.length;i<r;i++){var a=e[i],s=a.operation,c=s.operation;if(c&&c.type===o.a.READ.LIST){if(this.shrinkMediaListRangeIfFulfilled(a,e,t),s._removeTime){e.splice(i,1),i--,r--;continue}if(this.splitMediaListRangeIfOversized(a,n),s._removeTime)return!0}}e.sort(this.pendingTimeSortComparator);for(var l=0,u=e.length;l<u;l++){var d=e[l];this.sendTransaction(d)}return!1},splitMediaListRangeIfOversized:function(e,t){var n=e.operation,i=n.operation.context,r=i.containerPK,a=i.queryType,s=i.first,o=i.last,c=i.limit,u=i.hydrationLevel;if(a&&a!==v.MediaListOperationHandler.QueryType.RANK)return e;if(Math.max(c||0,Math.abs(o-s)+1)<=t)return e;for(var d=n._pendTimeOriginal||n._pendTime,h=[],p=(t-1)*(s<=o?1:-1),f=s;f<=o;){var g=f+p;g>o&&(g=o);var m=b.a.list({containerPK:r,first:f,last:g,hydrationLevel:u});m.operation._pendTimeOriginal=d,h.push(m),f=g+1}return this.removeTransaction(e),l.a.all(h).then(function(){return e.complete()},function(t){return e.fail(t)})},shrinkMediaListRangeIfFulfilled:function(e,t,n){var i=e.operation,r=i.operation.context,a=r.containerPK,s=r.queryType,c=r.first,l=r.last,u=r.limit,d=r.hydrationLevel;if(s&&s!==v.MediaListOperationHandler.QueryType.RANK)return e;for(var h=Math.max(u||0,Math.abs(l-c)+1),p=d.value,f=c<=l?1:-1,g=c,m=l,_=h,y=T.a.findOrCreatePlaceholder(a).medias,I=void 0,w=void 0,S=[],C=[];_>0&&(w=y.storeIdForObjectAt(g))>=0&&(I=y.store.readData(w),p<=b.a.HydrationLevel[I.hydrationLevel].value);)S.push(w),g+=f,_--;for(;_>0&&(w=y.storeIdForObjectAt(m))>=0&&(I=y.store.readData(w),p<=b.a.HydrationLevel[I.hydrationLevel].value);)C.push(w),m-=f,_--;if(_>0)for(var O=g<m?g:m,A=g<m?m:g,E=[].concat(n,t),M=0,D=E.length;M<D;M++){var L=E[M];if(L!==e){var N=L.operation;if(N&&N.type===b.a){var P=N.operation;if(P&&P.type===o.a.READ.LIST){var R=P.context;if(R.containerPK===a){var x=R.queryType;if(!x||x===v.MediaListOperationHandler.QueryType.RANK){var F=R.first,k=R.last,V=F<k?F:k,j=F<k?k:F,B=V<=O&&O<=j,U=V<=A&&A<=j;if(B&&!U?(g=O=j+1,m=A):U&&!B&&(g=O,m=A=V-1),(B||U)&&i._pendTimeOriginal>N._pendTimeOriginal&&(N._pendTimeOriginal=i._pendTimeOriginal),B&&U||O>A)return this.removeTransaction(e),L.then(e.complete.bind(e))}}}}}}return 0===_?(this.removeTransaction(e),e.complete()):(_!==h&&(r.first=g,r.last=m),e)}},D={mergeableOperationsFilterPredicate:function(e){var t=e.operation,n=o.b().findNestedOperationHandlerForOperation(t);return e.status===r.a.PENDING&&n instanceof Object&&"function"==typeof n.constructor.merge},processMergeableOperations:function(e){var t=this._groupTransactionsByType(e),n=Object.keys(t),i=Array.isArray(n),r=0;for(n=i?n:n[Symbol.iterator]();;){var a;if(i){if(r>=n.length)break;a=n[r++]}else{if((r=n.next()).done)break;a=r.value}var s=t[a];this._mergeAndSendTransactions(s)}return!1},_groupTransactionsByType:function(e){var t=o.b(),n={},i=e,r=Array.isArray(i),a=0;for(i=r?i:i[Symbol.iterator]();;){var s;if(r){if(a>=i.length)break;s=i[a++]}else{if((a=i.next()).done)break;s=a.value}var c=s,l=t.findNestedOperationHandlerForOperation(c.operation).constructor.name,u=n[l];u||(u=[],n[l]=u),u.push(c)}return n},_mergeAndSendTransactions:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(0!==e.length){for(var n=o.b(),i=[],r=e[t],a=r.operation,s=n.findNestedOperationHandlerForOperation(a).constructor,c=e.length,l=t;!s.isOperationMergeable(a)&&l<c;)i.push(r),a=(r=e[++l]).operation;for(l+=1;l<c;l++){var d=e[l],h=d.operation,p=s.isOperationMergeable(h)&&s.isOperationPairMergeable(a,h);if(r.storeIds.length>=u.a.maxOperationsInSingleRequest)break;p&&s.merge(a,h)?(this.removeTransaction(d),r.then(d.complete.bind(d),d.fail.bind(d))):i.push(d)}this.sendTransaction(r);var f=i,g=Array.isArray(f),m=0;for(f=g?f:f[Symbol.iterator]();;){var v;if(g){if(m>=f.length)break;v=f[m++]}else{if((m=f.next()).done)break;v=m.value}var _=v;this.sendTransaction(_)}l<c&&this._mergeAndSendTransactions(e,l)}}},L=n(180),N=n(1272),P={_currentBatchTransactions:L.b(N.a),_processBatchTransactions:function(e,t,n,i,r){for(var s=!1,o=0,c=0,l=e.length;c<l;c++){var u=e[c];if(u.__isBatch)Date.now()-u.operation._pendTimeOriginal>r&&(a.b.debug("Batch timeout reached, sending batch..."),this.sendBatchTransaction(u),o++);else{var d=this.getBatchTransaction(t,n),h=d||this.createBatchTransaction(t,n),p=h.operation.operation.context;d||(s=!0);var f=p._coalescedTransactions;f.push(u),this.removeTransaction(u),f.length>=i&&(a.b.debug("Batch limit reached, sending batch..."),this.sendBatchTransaction(h))}}return 0===o&&(s=!0),s},getBatchTransaction:function(e,t){return this._currentBatchTransactions.get(t)},createBatchTransaction:function(e,t){var n=e.performOperation(t,{_coalescedTransactions:[]});return n.__isBatch=!0,n.then(this.completeInFlightBatchTransactions.bind(this,n)),this._currentBatchTransactions.set(t,n),n},sendBatchTransaction:function(e){var t=e.operation.operation,n=t.context,i=t.type,r=n._coalescedTransactions;0===r.length?this.removeTransaction(e):this.sendTransaction(e)?a.b.debug("sending "+i.fullName+": "+r.length+" coalesced requests"):a.b.debug(i.fullName+" transaction queued... "+r.length+" coalesced requests"),e===this._currentBatchTransactions.get(i)&&this._currentBatchTransactions.delete(i)},completeInFlightBatchTransactions:function(e,t){var n=e.operation.operation.context._coalescedTransactions;t.forEach(function(e,t){var i=n[t];e.then(function(e){return i.complete(e)}).catch(function(e){return i.fail(e)})})}},R=n(156),x=n(1218),F={isAppReadOnly:function(){var e=o.b();return e&&e.readOnly},initTransactionFiltering:function(e){this.numTransactionsCKJS=0,this.writeOnWireCKJS=!1,this._processActiveTransactions(e)},_processActiveTransactions:function(e){var t=this;e.forEach(function(e){t.isCKJSTransaction(e)&&(t.numTransactionsCKJS++,t.isWriteTransaction(e)&&(t.writeOnWireCKJS=!0))})},isWriteTransaction:function(e){var t=e.operation,n=t.type;return t.operation&&(n=t.operation.type),"string"!=typeof n&&o.a.WRITE.contains(n)},isReadTransaction:function(e){var t=e.operation,n=t.type;return t.operation&&(n=t.operation.type),"string"==typeof n||n===_.a.Container.CountItemsInIndex||o.a.READ.contains(n)},isCKJSTransaction:function(e){var t=e.operation.type;if("string"==typeof t)return"getZoneInfo"===t;if(t===o.a.WRITEBULK){var n=e.changes.objectAt(0);n&&(t=n.modelClass)}return t===b.a||x.a(t,R.a)},shouldSendInReadOnlyMode:function(e){return this.isReadTransaction(e)},sendTransaction:function(e){var t=arguments;if(this.isAppReadOnly()&&!this.shouldSendInReadOnlyMode(e))return this.removeTransaction(e),a.b.warn("dropping write transaction while in read-only mode"),!1;var n=!0;return this.isCKJSTransaction(e)&&(n=this._shouldSendCJKSTransaction(e)),n&&this.__s._$1Mv$sendTransaction.apply(this,t),n},_shouldSendCJKSTransaction:function(e){return!(this.numTransactionsCKJS>=this.maxActive||(this.isWriteTransaction(e)?this.writeOnWireCKJS||(this.writeOnWireCKJS=!0,0):(this.numTransactionsCKJS++,0)))},__superMap:{_$1Mv$sendTransaction:"sendTransaction"}},k=function(){function e(){!function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this)}return e.prototype.init=function(e,t,n){return this.pending=e,this.active=t,this.context=n,this._reprocessDelay=-1,this},e.prototype.next=function(e,t){var n=this.pending;if(n.length>0){var i=void 0;if(t){var r=function(e,t){for(var n=[],i=[],r=0,a=e.length;r<a;r++){var s=e[r];t.call(this,s)?n.push(s):i.push(s)}return[n,i]}(n,t);i=r[0],this.pending=r[1]}else i=n;if(i.length>0){var a=e.call(this.context,i,this.active);"number"==typeof a?a>=0&&a>this._reprocessDelay&&(this._reprocessDelay=a):!0===a&&this._reprocessDelay<0&&(this._reprocessDelay=0)}}return this},e.prototype.reprocess=function(e){this._reprocessDelay>=0&&(e.call(this.context,this._reprocessDelay),this._reprocessDelay=-1)},e}(),V={keyMediaFilterPredicate:function(e){var t=e.operation,n=t.operation;return e.status===r.a.PENDING&&t.type===b.a&&(n&&n.type===_.a.Media.LoadKey||n&&n.type===_.a.Media.BatchLoadKey)},KEY_MEDIA_BATCH_SIZE:10,KEY_MEDIA_BATCH_WAIT_TIME:50,processKeyMedia:function(e){return this._processBatchTransactions(e,b.a,_.a.Media.BatchLoadKey,this.KEY_MEDIA_BATCH_SIZE,this.KEY_MEDIA_BATCH_WAIT_TIME)}},j=n(36),B=n(34),U=n(410),W={mixinDependencies:[j.a],progressTrackedPendingTransactions:B.b({readOnly:!0,defaultValue:L.b(U.b)}),progressTrackedCompletedTransactions:B.b({defaultValue:L.b(U.b)}),progress:B.b({readOnly:!0,dependencies:["progressTrackedPendingTransactions.length","progressTrackedCompletedTransactions.length"],get:function(){var e=this.progressTrackedPendingTransactions.length,t=this.progressTrackedCompletedTransactions.length;return 0===e&&0===t?NaN:t/(e+t)}}),_cleanupCompletedTransactions:j.f({inputs:["progress"],callback:function(){1===this.progress&&0===this.progressTrackedPendingTransactions.length&&(this.progressTrackedCompletedTransactions=U.b.create())}}),progressReportingFilterPredicate:function(e){return this.isWriteTransaction(e)},transactionWasCompletedOrErrored:function(e){var t=this;return function(){var n=t.progressTrackedPendingTransactions,i=t.progressTrackedCompletedTransactions;n.beginBatchedChanges(),i.beginBatchedChanges(),t._removeTransactionFromList(e)&&i.push(e),n.endBatchedChanges(),i.endBatchedChanges()}},addTransaction:function(e){var t=arguments,n=this.progressTrackedPendingTransactions;return this.progressReportingFilterPredicate(e)&&(n.push(e),e.finally(this.transactionWasCompletedOrErrored(e).bind(this))),this.__s._$ig$addTransaction.apply(this,t)},addTransactions:function(e){var t=this,n=arguments,i=this.progressTrackedPendingTransactions;return i.beginBatchedChanges(),e.forEach(function(e){t.progressReportingFilterPredicate(e)&&(i.push(e),e.finally(t.transactionWasCompletedOrErrored(e).bind(t)))}),i.endBatchedChanges(),this.__s._$sK$addTransactions.apply(this,n)},removeTransaction:function(e){var t=arguments;return this._removeTransactionFromList(e),this.__s._$uG$removeTransaction.apply(this,t)},_removeTransactionFromList:function(e){var t=this.progressTrackedPendingTransactions,n=t.indexOf(e);return-1!==n&&(t.removeAt(n),!0)},__superMap:{_$ig$addTransaction:"addTransaction",_$sK$addTransactions:"addTransactions",_$uG$removeTransaction:"removeTransaction"}};n.d(t,"a",function(){return H});var G=new k,H=i.a.extend(P,y,V,D,w,M,E,h,F,W).extend({staticMembers:{getTransactionId:function(e){for(var t=[],n=e.operation;n;n=n.operation){var i=n,r=i.handlesType,a=i.type;r&&t.push(r.name),t.push("string"==typeof a?a:a.name)}return t.join("/")},__QUALIFIED_CLASS_NAME__:"TransactionProcessor"},maxActive:6,process:function(e,t){t.length>=this.maxActive||(this.initTransactionFiltering(t),G.init(e,t,this).next(this.processDelayableOperations,this.delayableOperationsFilterPredicate).next(this.processMergeableOperations,this.mergeableOperationsFilterPredicate).next(this.processMedia,this.mediaListFilterPredicate).next(this.processKeyMedia,this.keyMediaFilterPredicate).next(this.processMastersOrAssets,this.masterAssetFilterPredicate).next(this.processBurstList,this.burstListFilterPredicate).next(this.processBulkRequests,this.bulkFilterPredicate).next(this.processRemaining).reprocess(this.reprocess))},processRemaining:function(e){for(var t=e.length,n=0;n<t;n++){var i=e[n];i.status===r.a.PENDING&&(i.operation._removeTime||this.sendTransaction(i))}return!1},addTransaction:function(e){var t=arguments,n=Date.now(),i=e.operation;return this._pended=(this._pended||(this._pended=0))+1,i._pendId=this._pended,i._pendTime=n,i._pendTimeOriginal||(i._pendTimeOriginal=n),this.__s._$1Ws$addTransaction.apply(this,t)},addTransactions:function(e){for(var t=arguments,n=Date.now(),i=0,r=e.length;i<r;i++){var a=e[i].operation;this._pended=(this._pended||(this._pended=0))+1,a._pendId=this._pended,a._pendTime=n,a._pendTimeOriginal||(a._pendTimeOriginal=n)}return this.__s._$1iq$addTransactions.apply(this,t)},sendTransaction:function(e){var t=arguments;e.operation._sendTime=Date.now();var n=this.constructor.getTransactionId(e);return a.b.debug("TransactionProcessor#sendTransaction: "+n),this.__s._$1rQ$sendTransaction.apply(this,t)},removeTransaction:function(e){var t=arguments;return e.operation._removeTime=Date.now(),this.__s._$1xr$removeTransaction.apply(this,t)},reprocess:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=Date.now(),i=void 0;if(this._reprocessTimer){var r=n-this._reprocessTimerOrigStart;if((i=Math.min(200-r,t))<=0)return;clearTimeout(this._reprocessTimer)}else i=Math.min(200,t),this._reprocessTimerOrigStart=n;this._reprocessTimer=s.a(function(){e._reprocessTimer=null,e._reprocessTimerOrigStart=null,e._process()},i)},_reprocessTimer:null,_reprocessTimerOrigStart:0,pendingTimeSortComparator:function(e,t){var n=e.operation,i=t.operation;return i._pendTimeOriginal-n._pendTimeOriginal||n._pendId-i._pendId},__superMap:{_$1Ws$addTransaction:"addTransaction",_$1iq$addTransactions:"addTransactions",_$1rQ$sendTransaction:"sendTransaction",_$1xr$removeTransaction:"removeTransaction"}})},function(e,t,n){"use strict";var i,r,a=n(1219),s=n(69),o=n(1223),c=n(12),l=n(50),u=n(40),d=CloudKit.QueryFilterComparator.IN,h=o.a.STRING_LIST.name,p=c.a.extend({handlesType:l.a.Media.BurstCount,action:function(e){var t=e.context,n=t.burstId,i=t.parentMediaPK,r=u.a.find(i),a=this.baseCKOptions(r.primaryAsset.zoneID),o={recordType:"HyperionIndexCountLookup",filterBy:{fieldName:"indexCountID",comparator:d,fieldValue:{value:["CPLAssetForBurstId:"+n],type:h}}};return this.ckRequest(e,r.primaryAsset.zone.scope).send("performQuery",o,a).then(function(e){var t=s.b(),n=0;return e.records.forEach(function(e){var a={pk:i,burstMedias:r.getDataHash().burstMedias||[]};n=e.fields.itemCount.value,a.burstMedias.length=n,t.loadData(u.a,a,!0)}),n})},staticMembers:{__QUALIFIED_CLASS_NAME__:"MediaBurstCountOperationHandler"}}),f=n(1185),g=n(784),m=n(156),v=n(102),_=n(67),b=n(47),y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},I=(i=f.a,(r=function(e){var t=i.create();try{e(t.resolve.bind(t),t.reject.bind(t))}catch(e){t.reject(e)}return t}).all=i.all.bind(i),r.race=i.race.bind(i),r.resolve=i.resolve.bind(i),r.reject=i.reject.bind(i),r),w=CloudKit.QueryFilterComparator.EQUALS,S=o.a.INT64.name,C=o.a.STRING.name,O=c.a.extend({handlesType:l.a.Media.BurstList,action:function(e,t,n){var i,r=this;return(i=regeneratorRuntime.mark(function t(){var i,a,o,c,l,d,h,p,f,I,O,A,E,T,M,D,L,N,P,R,x,F,k,V,j,B,U,W,G;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:i=s.b(),a=e.context,o=a.burstId,c=a.parentMediaPK,l=a.first,d=a.last,h=m.a.getZonePrimaryKeyFromPrimaryKey(c),t.next=5;break;case 5:p=u.a.HydrationLevel.FULL,f=l<=d?1:-1,I=Math.abs(d-l)+1,O=u.a.find(c),A=O.burstMedias.length-1,T={recordType:"CPLAssetAndMasterInBurstByAssetDate",filterBy:[{comparator:w,fieldName:"burstId",fieldValue:{value:o,type:C}},{fieldName:"startRank",comparator:w,fieldValue:{value:E=A-l,type:S}},{fieldName:"direction",comparator:w,fieldValue:{value:E<=A-d?"ASCENDING":"DESCENDING",type:C}}]},M=y({},r.baseCKOptions(O.primaryAsset.zoneID),{desiredKeys:v.a.systemContainerItemServiceKeys,resultsLimit:2*I}),t.prev=14,D=T,L=0;case 17:return t.next=19,r.ckRequest(e,O.primaryAsset.zone.scope).send("performQuery",D,M);case 19:P=t.sent,R=v.a.getRawHashesForRecordsByType(h,P.records,p),x=R.mediaPKs,F=R.mediaHashes,k=R.masterHashes,V=R.assetHashes,j=l+L*f,L+=F.length,i.loadData(_.a,k,!1),i.loadData(b.a,V,!1),i.loadData(u.a,F,!0),B=O.getDataHash(),U=B.originalBurstMedias,W={pk:c,burstMedias:[].concat(void 0===U?[]:U)},(N=W.burstMedias).splice.apply(N,[j,F.length].concat(x)),i.loadData(u.a,W,!0),D=P,L<I&&(G=I-L,M.resultsLimit=2*G);case 33:if(!0===D.moreComing&&L<I){t.next=17;break}case 34:return L<I&&g.b.warn("Media/BurstList: expected "+I+" but got "+L+" for burst "+o),t.abrupt("return",O.burstMedias);case 38:return t.prev=38,t.t0=t.catch(14),t.abrupt("return",r.handleError(t.t0,e,n));case 41:case"end":return t.stop()}},t,r,[[14,38]])}),function(){var e=i.apply(this,arguments);return new I(function(t,n){return function i(r,a){try{var s=e[r](a),o=s.value}catch(e){return void n(e)}if(!s.done)return I.resolve(o).then(function(e){i("next",e)},function(e){i("throw",e)});t(o)}("next")})})()},staticMembers:{__QUALIFIED_CLASS_NAME__:"MediaBurstListOperationHandler"}}),A=n(113),E=n(74),T=n(33),M=function(){var e=f.a,t=function(t){var n=e.create();try{t(n.resolve.bind(n),n.reject.bind(n))}catch(e){n.reject(e)}return n};return t.all=e.all.bind(e),t.race=e.race.bind(e),t.resolve=e.resolve.bind(e),t.reject=e.reject.bind(e),t}(),D=CloudKit.QueryFilterComparator.EQUALS,L=o.a.STRING.name,N=a.a.extend({mixinDependencies:[E.a],handlesType:l.a.Media.LoadKey,staticMembers:{getRequestFromOperation:function(e){var t=e.context,n=t.parentPK,i=t.hydrationLevel,r=T.a.find(n),a=r.zone;return{query:{recordType:"HyperionKeyAssetRelationsForContainerIdEndpoint",filterBy:{fieldName:"parentId",comparator:D,fieldValue:{value:r.recordName,type:L}}},options:{zoneID:a.zoneID,desiredKeys:v.a.getDesiredKeys(r,i)}}},__QUALIFIED_CLASS_NAME__:"MediaLoadKeyOperationHandler"},action:function(e,t,n){var i,r=this;return(i=regeneratorRuntime.mark(function t(){var i,a,o,c,l,d,h,p,f,g,m,y,I,w,S,C,O,A,E,M,D,L,P,R,x;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:i=e.context,a=i.parentPK,o=i.hydrationLevel,t.next=3;break;case 3:t.next=5;break;case 5:c=T.a.find(a),t.next=8;break;case 8:return l=c.zone,d=s.b(),h=d.getDatabaseForScope(l.scope).databaseInstance,p=o.value<u.a.HydrationLevel.FULL.value,f=N.getRequestFromOperation(e),g=f.query,m=f.options,t.prev=13,t.next=16,h.performQuery(g,m);case 16:if(!(y=t.sent).hasErrors){t.next=33;break}I=y.errors,w=Array.isArray(I),S=0,I=w?I:I[Symbol.iterator]();case 19:if(!w){t.next=25;break}if(!(S>=I.length)){t.next=22;break}return t.abrupt("break",33);case 22:C=I[S++],t.next=29;break;case 25:if(!(S=I.next()).done){t.next=28;break}return t.abrupt("break",33);case 28:C=S.value;case 29:O=C,r.handleError(O,e,n);case 31:t.next=19;break;case 33:if(0!==(A=y.records).length){t.next=36;break}return t.abrupt("return");case 36:return E=v.a.getRawHashesForRecordsByType(A,o),M=E.mediaHashes,D=E.masterHashes,L=E.assetHashes,d.loadData(_.a,D,p),d.loadData(b.a,L,p),t.next=41,d.loadData(u.a,M,p);case 41:return P=t.sent,R=P[0],x=R?d.materializeModel(R):void 0,c.keyMediaByUser=x,t.abrupt("return",x);case 48:return t.prev=48,t.t0=t.catch(13),t.abrupt("return",r.handleError(t.t0,e,n));case 51:case"end":return t.stop()}},t,r,[[13,48]])}),function(){var e=i.apply(this,arguments);return new M(function(t,n){return function i(r,a){try{var s=e[r](a),o=s.value}catch(e){return void n(e)}if(!s.done)return M.resolve(o).then(function(e){i("next",e)},function(e){i("throw",e)});t(o)}("next")})})()}}),P=n(183),R=n(25),x=n(86),F=n(1128),k=n(180),V=F.a.extend({copyKeys:k.b(Array),copy:function(){for(var e=this.copyKeys,t=this.constructor.create(),n=0;n<e.length;n++){var i=e[n];t[i]=this[i]}return t._statusEventListeners?g.b.warn("New request has event handlers, old handlers not copied."):t._statusEventListeners=this._statusEventListeners,t},staticMembers:{__QUALIFIED_CLASS_NAME__:"Request"}}).extend({method:x.a.POST,useCredentialsIfCrossOrigin:!0,staticMembers:{__QUALIFIED_CLASS_NAME__:"UploadWSRepairRequest"}}),j=a.a.extend({handlesType:l.a.Media.Repair,getRequestFromOperation:function(e){var t=s.b(),n=e.context.primaryKeys,i=R.a.environment,r=(void 0===i?{}:i).authBag,a=void 0===r?{}:r,o=a.servicesInfo,c=void 0===o?{}:o,l=a.user,u=c.uploadimagews,d=void 0===u?{}:u,h=(Array.isArray(n)?n:[n]).map(function(e){var n=t.readDataForPrimaryKey(_.a,e)||t.readDataForPrimaryKey(b.a,e);return{recordType:n.recordType,recordName:n.recordName}}),p=P.a.create(P.a.parse(d.url));p.pathname="/repair",p.setQueryParameter("dsid",l.dsid);var f=V.create({url:p});return f.body={records:h},f},action:function(e){return g.b.debug("Media/Repair: begin"),this.getRequestFromOperation(e).send().then(function(){g.b.debug("Media/Repair: success")})},staticMembers:{__QUALIFIED_CLASS_NAME__:"MediaRepairOperationHandler"}}),B=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},U=c.a.extend({handlesType:l.a.Media.BatchLoadKey,action:function(e){var t=e.context._coalescedTransactions,n=t[0],i=(n.operation&&n.operation.operation).context.parentPK,r=T.a.find(i).zone.scope,a=this.ckRequest(e,r).chain("batchRequest"),o=t,c=Array.isArray(o),l=0;for(o=c?o:o[Symbol.iterator]();;){var d;if(c){if(l>=o.length)break;d=o[l++]}else{if((l=o.next()).done)break;d=l.value}var h=d,p=N.getRequestFromOperation(h.operation.operation),g=p.query,m=p.options;a.chain("addQuery",g,B({},m,{desiredKeys:void 0,resultsLimit:3}))}return a.send("commit").then(function(e){return e.map(function(e,n){return function(e,t){if(t.hasErrors){var n=t.errors[0];return f.a.reject(n)}var i=s.b(),r=e.operation.operation.context,a=r.parentPK,o=r.hydrationLevel,c=T.a.find(a),l=o.value<u.a.HydrationLevel.FULL.value,d=v.a.getRawHashesForRecordsByType(t.records,o),h=d.mediaHashes,p=d.masterHashes,g=d.assetHashes;return f.a.all([i.loadData(_.a,p,l),i.loadData(b.a,g,l)]).then(function(){return i.loadData(u.a,h,l)}).then(function(e){var t=Array.isArray(e)?e[0]:e,n=t?i.materializeModel(t):null;return c.keyMediaByUser=n,n})}(t[n],e)})})},staticMembers:{__QUALIFIED_CLASS_NAME__:"MediaBatchLoadKeyOperationHandler"}});n.d(t,"a",function(){return W});var W=a.a.extend({handlesType:u.a,nestedOperationHandlers:[A.MediaListOperationHandler,N,U,p,O,j].map(function(e){return e.create()}),staticMembers:{__QUALIFIED_CLASS_NAME__:"MediaOperations"}})},function(e,t,n){"use strict";var i,r,a=n(1219),s=n(66),o=n(1185),c=n(69),l=n(74),u=(i=o.a,(r=function(e){var t=i.create();try{e(t.resolve.bind(t),t.reject.bind(t))}catch(e){t.reject(e)}return t}).all=i.all.bind(i),r.race=i.race.bind(i),r.resolve=i.resolve.bind(i),r.reject=i.reject.bind(i),r),d=a.a.extend({mixinDependencies:[l.a],handlesType:c.a.WRITE.CREATE,action:function(e,t,n){var i,r=this;return(i=regeneratorRuntime.mark(function t(){var i,a,o,l,u,d,h,p,f,g,m,v,_,b;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.context,a=i.primaryKey,o=i.newData,l=o.scope,u=c.b(),d=u.getDatabaseForScope(l).databaseInstance,t.prev=4,h=s.a.getZoneNameFromPrimaryKey(a),t.next=8,d.saveRecordZones(h);case 8:if((p=t.sent).hasErrors)for(f=0;f<p.errors.length;f++)g=p.errors[f],r.handleError(g,e,n);for(m=[],v=0;v<p.zones.length;v++)_=p.zones[v],b=s.a.getDataValuesFromServiceValues(_,{scope:l}),m.push(b);return t.abrupt("return",u.loadData(s.a,m,!1));case 15:return t.prev=15,t.t0=t.catch(4),t.abrupt("return",r.handleError(t.t0,e,n));case 18:case"end":return t.stop()}},t,r,[[4,15]])}),function(){var e=i.apply(this,arguments);return new u(function(t,n){return function i(r,a){try{var s=e[r](a),o=s.value}catch(e){return void n(e)}if(!s.done)return u.resolve(o).then(function(e){i("next",e)},function(e){i("throw",e)});t(o)}("next")})})()},staticMembers:{__QUALIFIED_CLASS_NAME__:"ZoneCreateOperation"}}),h=n(65),p=n(156),f=function(){var e=o.a,t=function(t){var n=e.create();try{t(n.resolve.bind(n),n.reject.bind(n))}catch(e){n.reject(e)}return n};return t.all=e.all.bind(e),t.race=e.race.bind(e),t.resolve=e.resolve.bind(e),t.reject=e.reject.bind(e),t}(),g=a.a.extend({mixinDependencies:[l.a],handlesType:c.a.WRITE.DESTROY,action:function(e,t,n){var i,r=this;return(i=regeneratorRuntime.mark(function t(){var i,a,o,l,u,d,f,g,v,_,b,y,I,w,S,C,O,A,E,T,M,D,L,N,P,R,x,F,k,V,j,B;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:i=e.context.primaryKeys,a=c.b(),o=void 0,l=i,u=Array.isArray(l),d=0,l=u?l:l[Symbol.iterator]();case 5:if(!u){t.next=11;break}if(!(d>=l.length)){t.next=8;break}return t.abrupt("break",24);case 8:f=l[d++],t.next=15;break;case 11:if(!(d=l.next()).done){t.next=14;break}return t.abrupt("break",24);case 14:f=d.value;case 15:g=f,(v=s.a.find(g,a))||h.b("Invalid Zone PK"),(_=v.scope)||h.b("No scope found for Zone"),o&&o!==_&&h.b("Cannot delete Zones with different scopes"),o=_;case 22:t.next=5;break;case 24:t.next=26;break;case 26:return b=a.getDatabaseForScope(o),y=b.databaseInstance,t.prev=27,I=i.map(s.a.getPartsFromPrimaryKey),t.next=31,y.deleteRecordZones(I);case 31:if(w=t.sent,S=w.zones,C=w.hasErrors,O=w.errors,!C){t.next=51;break}A=O,E=Array.isArray(A),T=0,A=E?A:A[Symbol.iterator]();case 37:if(!E){t.next=43;break}if(!(T>=A.length)){t.next=40;break}return t.abrupt("break",51);case 40:M=A[T++],t.next=47;break;case 43:if(!(T=A.next()).done){t.next=46;break}return t.abrupt("break",51);case 46:M=T.value;case 47:D=M,r.handleError(D,e,n);case 49:t.next=37;break;case 51:L=[],N=S,P=Array.isArray(N),R=0,N=P?N:N[Symbol.iterator]();case 53:if(!P){t.next=59;break}if(!(R>=N.length)){t.next=56;break}return t.abrupt("break",72);case 56:x=N[R++],t.next=63;break;case 59:if(!(R=N.next()).done){t.next=62;break}return t.abrupt("break",72);case 62:x=R.value;case 63:F=x.zoneID,k=s.a.getPrimaryKeyFromParts(F),V=a.constructor.getStoreIdForPrimaryKey(s.a,k),j=p.a.getAllRecordsByClassForZonePK(k,a),B=Object.values(j).reduce(m,[]),L.push.apply(L,[V].concat(B));case 70:t.next=53;break;case 72:return t.abrupt("return",a.removeDataByStoreIds(L));case 75:return t.prev=75,t.t0=t.catch(27),t.abrupt("return",r.handleError(t.t0,e,n));case 78:case"end":return t.stop()}},t,r,[[27,75]])}),function(){var e=i.apply(this,arguments);return new f(function(t,n){return function i(r,a){try{var s=e[r](a),o=s.value}catch(e){return void n(e)}if(!s.done)return f.resolve(o).then(function(e){i("next",e)},function(e){i("throw",e)});t(o)}("next")})})()},staticMembers:{__QUALIFIED_CLASS_NAME__:"ZoneDeleteOperation"}});function m(e,t){return e.push.apply(e,t.storeIds),e}var v=n(92),_=function(){var e=o.a,t=function(t){var n=e.create();try{t(n.resolve.bind(n),n.reject.bind(n))}catch(e){n.reject(e)}return n};return t.all=e.all.bind(e),t.race=e.race.bind(e),t.resolve=e.resolve.bind(e),t.reject=e.reject.bind(e),t}(),b=a.a.extend({mixinDependencies:[l.a],handlesType:c.a.READ.LOAD,action:function(e,t,n){var i,r=this;return(i=regeneratorRuntime.mark(function t(){var i,a,o,l,u,d,h,p,f,g,m,_,b,y,I,w,S;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:i=e.context,a=i.primaryKeys,o=i.scope,l=void 0===o?CloudKit.DatabaseScope.PRIVATE:o,t.next=3;break;case 3:t.next=5;break;case 5:return u=a.map(function(e){return{ownerRecordName:s.a.getOwnerRecordNameFromPrimaryKey(e),zoneName:s.a.getZoneNameFromPrimaryKey(e)}}),d=c.b(),h=d.getDatabaseForScope(l).databaseInstance,t.prev=8,t.next=11,h.fetchRecordZones(u);case 11:if((p=t.sent).hasErrors)for(f=0;f<p.errors.length;f++)g=p.errors[f],r.handleError(g,e,n);for(m=[],_=0;_<p.zones.length;_++)b=p.zones[_],y=s.a.getDataValuesFromServiceValues(b,{scope:l}),m.push(y);return t.next=17,d.loadData(s.a,m,!1);case 17:return I=t.sent,w=Array.isArray(I)?I:I.storeIds,S=v.a.createFromStoreIds(w,s.a,d),t.abrupt("return",S);case 23:return t.prev=23,t.t0=t.catch(8),t.abrupt("return",r.handleError(t.t0,e,n));case 26:case"end":return t.stop()}},t,r,[[8,23]])}),function(){var e=i.apply(this,arguments);return new _(function(t,n){return function i(r,a){try{var s=e[r](a),o=s.value}catch(e){return void n(e)}if(!s.done)return _.resolve(o).then(function(e){i("next",e)},function(e){i("throw",e)});t(o)}("next")})})()},staticMembers:{__QUALIFIED_CLASS_NAME__:"ZoneLoadOperation"}}),y=function(){var e=o.a,t=function(t){var n=e.create();try{t(n.resolve.bind(n),n.reject.bind(n))}catch(e){n.reject(e)}return n};return t.all=e.all.bind(e),t.race=e.race.bind(e),t.resolve=e.resolve.bind(e),t.reject=e.reject.bind(e),t}(),I=a.a.extend({mixinDependencies:[l.a],handlesType:c.a.READ.LIST,action:function(e,t,n){var i,r=this;return(i=regeneratorRuntime.mark(function t(){var i,a,o,l,u,d,p,f,g,m,v,_,b,y;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:i=e.context.scope,a=void 0===i?CloudKit.DatabaseScope.PRIVATE:i,t.next=3;break;case 3:return o=c.b(),l=o.getDatabaseForScope(a).databaseInstance,t.prev=5,t.next=8,l.fetchAllRecordZones();case 8:if((u=t.sent).hasErrors)for(d=0;d<u.errors.length;d++)p=u.errors[d],r.handleError(p,e,n);if(u.isRecordZonesResponse){t.next=12;break}throw new h.a("Expected Record Zone Response");case 12:for(f=[],g=0;g<u.zones.length;g++)m=u.zones[g],v=s.a.getDataValuesFromServiceValues(m,{scope:a}),f.push(v);return t.next=16,o.loadData(s.a,f,!1);case 16:return _=t.sent,b=Array.isArray(_)?_:_.storeIds,(y=o.getZonesForScope(a)).encodedRawSplice.apply(y,[0,y.length].concat(b)),o.updateZonesLoadedTimeForScope(a),t.abrupt("return",y);case 24:return t.prev=24,t.t0=t.catch(5),t.abrupt("return",r.handleError(t.t0,e,n));case 27:case"end":return t.stop()}},t,r,[[5,24]])}),function(){var e=i.apply(this,arguments);return new y(function(t,n){return function i(r,a){try{var s=e[r](a),o=s.value}catch(e){return void n(e)}if(!s.done)return y.resolve(o).then(function(e){i("next",e)},function(e){i("throw",e)});t(o)}("next")})})()},staticMembers:{__QUALIFIED_CLASS_NAME__:"ZoneListOperation"}}),w=n(329),S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};function C(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}var O=function(){var e=o.a,t=function(t){var n=e.create();try{t(n.resolve.bind(n),n.reject.bind(n))}catch(e){n.reject(e)}return n};return t.all=e.all.bind(e),t.race=e.race.bind(e),t.resolve=e.resolve.bind(e),t.reject=e.reject.bind(e),t}();function A(e){return function(){var t=e.apply(this,arguments);return new O(function(e,n){return function i(r,a){try{var s=t[r](a),o=s.value}catch(e){return void n(e)}if(!s.done)return O.resolve(o).then(function(e){i("next",e)},function(e){i("throw",e)});e(o)}("next")})}}var E={isRecordZoneChangesResponse:!0,zones:[]},T=a.a.extend({mixinDependencies:[l.a],handlesType:"fetchRecordZoneChanges",shouldThrowMaxRetryFatalError:!1,retryRequest:function(){var e=this,t=arguments;return A(regeneratorRuntime.mark(function n(){var i,r,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i=e,r=t,n.prev=1,n.next=4,i.__s._$Lp$retryRequest.apply(i,r);case 4:return a=n.sent,n.abrupt("return",a);case 8:if(n.prev=8,n.t0=n.catch(1),!(n.t0 instanceof w.a)){n.next=12;break}return n.abrupt("return",E);case 12:throw n.t0;case 13:case"end":return n.stop()}},n,e,[[1,8]])}))()},action:function(e,t,n){var i=this;return A(regeneratorRuntime.mark(function t(){var r,a,o,l,u,d,h,p,f,g,m;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=e.context,a=r.zonePK,o=C(r,["zonePK"]),t.next=3;break;case 3:return l=s.a.find(a),u=l.scope,d=l.zoneID,h=c.b(),p=h.getDatabaseForScope(u).databaseInstance,t.prev=7,t.next=10,p.fetchRecordZoneChanges(S({},o,{zoneID:d}));case 10:if((f=t.sent).hasErrors)for(g=0;g<f.errors.length;g++)m=f.errors[g],i.handleError(m,e,n);return t.abrupt("return",f);case 15:return t.prev=15,t.t0=t.catch(7),t.abrupt("return",i.handleError(t.t0,e,n));case 18:case"end":return t.stop()}},t,i,[[7,15]])}))()},__superMap:{_$Lp$retryRequest:"retryRequest"},staticMembers:{__QUALIFIED_CLASS_NAME__:"ZoneRecordChangesOperation"}}),M=n(328),D=n(107),L=function(){var e=o.a,t=function(t){var n=e.create();try{t(n.resolve.bind(n),n.reject.bind(n))}catch(e){n.reject(e)}return n};return t.all=e.all.bind(e),t.race=e.race.bind(e),t.resolve=e.resolve.bind(e),t.reject=e.reject.bind(e),t}();function N(e){return function(){var t=e.apply(this,arguments);return new L(function(e,n){return function i(r,a){try{var s=t[r](a),o=s.value}catch(e){return void n(e)}if(!s.done)return L.resolve(o).then(function(e){i("next",e)},function(e){i("throw",e)});e(o)}("next")})}}var P=a.a.extend({handlesType:"fetchRecords",action:function(e,t,n){var i=this;return N(regeneratorRuntime.mark(function t(){var r,a,s,o,l,u,d,h,p,f,g,m,v,_,b,y,I,w,S,C,O,A,E,T,M;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.context,a=r.recordNames,s=r.recordClassNames,o=r.zonePK,l=r.scope,u=D.a.getFromZonePK(o),d=c.b(),h=d.getDatabaseForScope(l).databaseInstance,t.prev=6,t.next=9,h.fetchRecords(a,{zoneID:u});case 9:if(!(p=t.sent).hasErrors){t.next=26;break}f=p.errors,g=Array.isArray(f),m=0,f=g?f:f[Symbol.iterator]();case 12:if(!g){t.next=18;break}if(!(m>=f.length)){t.next=15;break}return t.abrupt("break",26);case 15:v=f[m++],t.next=22;break;case 18:if(!(m=f.next()).done){t.next=21;break}return t.abrupt("break",26);case 21:v=m.value;case 22:return _=v,t.abrupt("return",i.handleError(_,e,n));case 24:t.next=12;break;case 26:b=p.syncToken,y=p.records,I=Array.isArray(y),w=0,y=I?y:y[Symbol.iterator]();case 28:if(!I){t.next=34;break}if(!(w>=y.length)){t.next=31;break}return t.abrupt("break",58);case 31:S=y[w++],t.next=38;break;case 34:if(!(w=y.next()).done){t.next=37;break}return t.abrupt("break",58);case 37:S=w.value;case 38:C=S,O=s,A=Array.isArray(O),E=0,O=A?O:O[Symbol.iterator]();case 40:if(!A){t.next=46;break}if(!(E>=O.length)){t.next=43;break}return t.abrupt("break",56);case 43:T=O[E++],t.next=50;break;case 46:if(!(E=O.next()).done){t.next=49;break}return t.abrupt("break",56);case 49:T=E.value;case 50:if(M=T,C.recordType!==M.CK_RECORD_TYPE){t.next=54;break}return i._ingestRecord(d,M,C,o,u,b),t.abrupt("break",56);case 54:t.next=40;break;case 56:t.next=28;break;case 58:t.next=63;break;case 60:return t.prev=60,t.t0=t.catch(6),t.abrupt("return",i.handleError(t.t0,e,n));case 63:case"end":return t.stop()}},t,i,[[6,60]])}))()},_ingestRecord:function(e,t,n,i,r,a){var s=this;return N(regeneratorRuntime.mark(function o(){var c;return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return c=t.getDataValuesFromServiceValues(n,{zone:i,zoneID:r,recordChangeTag:a}),s.next=3,e.loadData(t,c,!1);case 3:case"end":return s.stop()}},o,s)}))()},staticMembers:{__QUALIFIED_CLASS_NAME__:"ZoneFetchRecordsOperation"}});n.d(t,"a",function(){return R});var R=a.a.extend({handlesType:s.a,nestedOperationHandlers:[d,g,b,I,T,M.a,P].map(function(e){return e.create()}),staticMembers:{__QUALIFIED_CLASS_NAME__:"ZoneOperations"}})},function(e,t,n){"use strict";var i,r,a=n(784),s=n(1219),o=n(33),c=n(69),l=n(1185),u=n(66),d=n(12),h=d.a.extend({handlesType:c.a.WRITE.CREATE,shouldIngestChangesOnResponse:!0,shouldIngestChangesAsChangeSet:!0,action:function(e){var t=e.context,n=t.model,i=t.newData;i.parentId&&(n.parentId=i.parentId);var r=n.getServiceValuesFromDataValues(["albumNameEnc","albumType","isDeleted","isExpunged","parentId","position","sortType","sortTypeExt","sortAscending"]);if(o.a.isSystemAlbumRecordName(r.recordName)){var a=c.b().feedbackService,s=c.b().FeedbackErrorType;return a&&a.reportError&&a.reportError({errorType:s.SYSTEM_ALBUM_ACTION.value}),l.a.resolve()}var d=i.zoneID,h=i.zone,p=u.a.find(h).scope,f=this.baseCKOptions(d);return f.desiredKeys=o.a.serviceKeys,this.ckRequest(e,p).send("saveRecords",r,f)},staticMembers:{__QUALIFIED_CLASS_NAME__:"ContainerCreateOperation"}}),p=n(92),f=n(1223),g=n(74),m=n(1280),v=n(1274),_=n(169),b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},y=(i=l.a,(r=function(e){var t=i.create();try{e(t.resolve.bind(t),t.reject.bind(t))}catch(e){t.reject(e)}return t}).all=i.all.bind(i),r.race=i.race.bind(i),r.resolve=i.resolve.bind(i),r.reject=i.reject.bind(i),r),I=CloudKit.QueryFilterComparator.IN,w=f.a.STRING_LIST.name,S=s.a.extend({mixinDependencies:[g.a,m.a,v.a],staticMembers:{getRequestFromOperation:function(e){var t=e.context.primaryKeys,n=t.map(function(e){var t=o.a.find(e),n=t.recordName,i=t.type;return o.a.getQueryIndexCountId(n,i)}),i=t[0],r=o.a.getZonePrimaryKeyFromPrimaryKey(i),a=u.a.find(r);return{query:{recordType:"HyperionIndexCountLookup",filterBy:{fieldName:"indexCountID",comparator:I,fieldValue:{value:n,type:w}}},options:{zoneID:a.zoneID},zone:a}},getDataHashesFromResponse:function(e){for(var t=[],n=e.records,i=e.zoneID,r=u.a.getPrimaryKey(i),a=0,s=n.length;a<s;a++){var c=n[a],l=c.recordName,d=o.a.getRecordNameFromIndexCountId(l),h=o.a.getPrimaryKeyWithZonePK(r,d),p=o.a.find(h),f=_.d(c,"itemCount"),g="number"==typeof f&&f>0?f:0,m=d===o.a.ROOT_RECORD_NAME?g+o.a.PredefinedNames.length-1:g,v=p.getDataHash(),y=b({},v);if(o.a.isQueryIndexCountIdForContainers(l)){var I=y.containers,w=[].concat(void 0===I?[]:I);w.length=m,y.containers=w}else{var S=y.medias,C=[].concat(void 0===S?[]:S);C.length=m,y.medias=C}t.push(y)}return t},__QUALIFIED_CLASS_NAME__:"ContainerLoadOperation"},handlesType:c.a.READ.LOAD,action:function(e,t,n){var i,r=this;return(i=regeneratorRuntime.mark(function t(){var i,a,s,l,u,d,h,f,g,m,v,_,b,y,I,w;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:i=r.constructor.getRequestFromOperation(e),a=i.query,s=i.options,l=i.zone,u=c.b(),d=u.getDatabaseForScope(l.scope).databaseInstance,t.prev=3,h=[],f=a;case 6:return t.next=8,d.performQuery(f,s);case 8:if(!(g=t.sent).hasErrors){t.next=25;break}m=g.errors,v=Array.isArray(m),_=0,m=v?m:m[Symbol.iterator]();case 11:if(!v){t.next=17;break}if(!(_>=m.length)){t.next=14;break}return t.abrupt("break",25);case 14:b=m[_++],t.next=21;break;case 17:if(!(_=m.next()).done){t.next=20;break}return t.abrupt("break",25);case 20:b=_.value;case 21:y=b,r.handleError(y,e,n);case 23:t.next=11;break;case 25:return I=S.getDataHashesFromResponse(g),t.next=28,u.loadData(o.a,I,!1);case 28:w=t.sent,h.push.apply(h,w),f=g;case 31:if(!0===a.moreComing){t.next=6;break}case 32:return t.abrupt("return",p.a.createFromStoreIds(h,o.a,u));case 35:return t.prev=35,t.t0=t.catch(3),t.abrupt("return",r.handleError(t.t0,e,n));case 38:case"end":return t.stop()}},t,r,[[3,35]])}),function(){var e=i.apply(this,arguments);return new y(function(t,n){return function i(r,a){try{var s=e[r](a),o=s.value}catch(e){return void n(e)}if(!s.done)return y.resolve(o).then(function(e){i("next",e)},function(e){i("throw",e)});t(o)}("next")})})()}}),C=n(102),O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},A=function(){var e=l.a,t=function(t){var n=e.create();try{t(n.resolve.bind(n),n.reject.bind(n))}catch(e){n.reject(e)}return n};return t.all=e.all.bind(e),t.race=e.race.bind(e),t.resolve=e.resolve.bind(e),t.reject=e.reject.bind(e),t}(),E=s.a.extend({mixinDependencies:[g.a],staticMembers:{getRequestFromOperation:function(e){var t=e.context.parentPK,n=o.a.find(t),i=n.isRootFolder,r=n.zone,a={recordType:"CPLAlbumByPositionLive"};return i||(a.filterBy=[o.a.getQueryItemListFilterBy(n.recordName)]),{query:a,options:{zoneID:r.zoneID}}},getDataHashesFromResponse:function(e,t){for(var n=[],i=e.records,r=0,s=i.length;r<s;r++){var c=i[r],l=c.recordType;if(l===o.a.CK_RECORD_TYPE){if(C.a.getIsContainerRecordUsable(c)){var u=o.a.getDataValuesFromServiceValues(c,{zone:t});n.push(u)}}else a.b.warn("Container/List: Ignoring unknown recordType="+l)}return n},__QUALIFIED_CLASS_NAME__:"ContainerListOperation"},handlesType:c.a.READ.LIST,action:function(e,t,n){var i,r=this;return(i=regeneratorRuntime.mark(function t(){var i,s,l,u,d,h,p,f,g,m,v,_,b,y,I,w,S,C,A,T,M,D,L,N,P,R,x,F,k,V,j,B,U,W,G,H,$,z;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:i=E.getRequestFromOperation(e),s=i.query,l=i.options,u=e.context.parentPK,d=o.a.find(u),h=d.isRootFolder,p=d.zone,f=p.pk,g=c.b(),m=g.getDatabaseForScope(p.scope).databaseInstance,t.prev=7,v=s,_=0;case 10:return t.next=12,m.performQuery(v,l);case 12:if(!(y=t.sent).hasErrors){t.next=29;break}I=y.errors,w=Array.isArray(I),S=0,I=w?I:I[Symbol.iterator]();case 15:if(!w){t.next=21;break}if(!(S>=I.length)){t.next=18;break}return t.abrupt("break",29);case 18:C=I[S++],t.next=25;break;case 21:if(!(S=I.next()).done){t.next=24;break}return t.abrupt("break",29);case 24:C=S.value;case 25:A=C,r.handleError(A,e,n);case 27:t.next=15;break;case 29:if(T=[],M=E.getDataHashesFromResponse(y,f),!h||0!==_){t.next=53;break}D=o.a.PredefinedNames,L=Array.isArray(D),N=0,D=L?D:D[Symbol.iterator]();case 33:if(!L){t.next=39;break}if(!(N>=D.length)){t.next=36;break}return t.abrupt("break",48);case 36:P=D[N++],t.next=43;break;case 39:if(!(N=D.next()).done){t.next=42;break}return t.abrupt("break",48);case 42:P=N.value;case 43:R=P,x=o.a.getPrimaryKey(p,R),T.push(x);case 46:t.next=33;break;case 48:for(F=void 0,k=0,V=M.length;k<V;k++)j=M[k],h&&j.recordName===o.a.ROOT_RECORD_NAME?(g.loadData(o.a,j,!0),F=k):T.push(j.pk);"number"==typeof F&&M.splice(F,1),t.next=54;break;case 53:for(B=0,U=M.length;B<U;B++)W=M[B],T.push(W.pk);case 54:g.loadData(o.a,M,!0),G=d.getDataHash(),H=G.containers,$=O({},G,{containers:[].concat(void 0===H?[]:H)}),(b=$.containers).splice.apply(b,[_,T.length].concat(T)),y.moreComing||(z=_+T.length,$.containers.length!==z&&(h&&a.b.warn("Container/List: container "+$.recordName+" expected length of "+z+" but actual length is "+$.containers.length+"; truncating…"),$.containers.length=z)),g.loadData(o.a,$,!1),v=y,_+=M.length;case 63:if(!0===v.moreComing){t.next=10;break}case 64:return t.abrupt("return",d.containers);case 67:return t.prev=67,t.t0=t.catch(7),t.abrupt("return",r.handleError(t.t0,e,n));case 70:case"end":return t.stop()}},t,r,[[7,67]])}),function(){var e=i.apply(this,arguments);return new A(function(t,n){return function i(r,a){try{var s=e[r](a),o=s.value}catch(e){return void n(e)}if(!s.done)return A.resolve(o).then(function(e){i("next",e)},function(e){i("throw",e)});t(o)}("next")})})()}}),T=d.a.extend({handlesType:c.a.WRITE.UPDATE,shouldIngestChangesOnResponse:!0,shouldIngestChangesAsChangeSet:!0,action:function(e){var t=e.context,n=t.model,i=t.diff;if(!i)return l.a.resolve();var r=i.added,s=i.updated,u=[].concat(r,s);if(0===u.length)return l.a.resolve();var d=n.zone.scope,h=n.getServiceValuesFromDataValues(u);if(o.a.isSystemAlbumRecordName(h.recordName)){var p=c.b().feedbackService,f=c.b().FeedbackErrorType;return p&&f&&p.reportError({errorType:f.SYSTEM_ALBUM_ACTION.value}),l.a.resolve()}var g=this.baseCKOptions(n.zoneID);return g.desiredKeys=o.a.serviceKeys,this.ckRequest(e,d).send("saveRecords",h,g).then(function(){a.b.debug("handleSuccess: ContainerUpdate")})},staticMembers:{__QUALIFIED_CLASS_NAME__:"ContainerUpdateOperation"}}),M=n(107),D=n(50),L=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},N=function(){var e=l.a,t=function(t){var n=e.create();try{t(n.resolve.bind(n),n.reject.bind(n))}catch(e){n.reject(e)}return n};return t.all=e.all.bind(e),t.race=e.race.bind(e),t.resolve=e.resolve.bind(e),t.reject=e.reject.bind(e),t}(),P=CloudKit.QueryFilterComparator.EQUALS,R=f.a.STRING.name,x=d.a.extend({handlesType:D.a.Container.CountItemsInIndex,staticMembers:{getRequestFromOperation:function(e){var t=e.context,n=t.containerPK,i=t.preset,r=o.a.find(n),a=r.recordName,s=r.type,c=r.zone;return{query:{recordType:"CountItemsInIndex",filterBy:[{fieldName:"indexName",comparator:P,fieldValue:{value:o.a.getQueryIndexCountId(a,s),type:R}},{fieldName:"preset",comparator:P,fieldValue:{value:i,type:R}}]},options:{zoneID:c.zoneID}}},__QUALIFIED_CLASS_NAME__:"CountItemsInIndexOperation"},action:function(e){var t,n=this;return(t=regeneratorRuntime.mark(function t(){var i,r,a,s,l,d,h,p,f,g,m,v,b;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=c.b(),r=x.getRequestFromOperation(e),a=r.query,s=r.options,l=e.context.containerPK,d=o.a.find(l),h=d.zone,t.next=7,n.ckRequest(e,h.scope).send("performQuery",a,s);case 7:if(p=t.sent,f=p.records,!p.hasErrors&&1===f.length){t.next=11;break}return t.abrupt("return");case 11:if(g=f[0],"number"==typeof(m=_.d(g,"count"))){t.next=15;break}return t.abrupt("return");case 15:return v=M.a.getZoneIdString(p.zoneID),(b=L({},d.getDataHash(),{zone:v})).medias||(b.medias=[]),b.medias.length=m,i.loadData(o.a,b,!1),"string"==typeof p.httpResponse.body.syncToken&&u.a.updateSyncToken(v,p.httpResponse.body.syncToken),t.abrupt("return",d);case 23:case"end":return t.stop()}},t,n)}),function(){var e=t.apply(this,arguments);return new N(function(t,n){return function i(r,a){try{var s=e[r](a),o=s.value}catch(e){return void n(e)}if(!s.done)return N.resolve(o).then(function(e){i("next",e)},function(e){i("throw",e)});t(o)}("next")})})()}});n.d(t,"a",function(){return F});var F=s.a.extend({handlesType:o.a,nestedOperationHandlers:[h,S,E,T,x].map(function(e){return e.create()}),ingestChange:function(e,t,n){if(!e.isRootFolder){var i=e.albumType;if(i&&C.a.getIsContainerAlbumTypeUsable(i.value)){var r=!1;if(t){var s=e&&t.sortType!==e.sortType,o=e&&t.sortAscending!==e.sortAscending;(s||o)&&a.b.error("Unimplemented changeset handling for container re-sorting");var c=!e||e.isDeleted&&!t.isDeleted,l=e&&t.parentId!==e.parentId,u=e&&t.position!==e.position;if(c||l||u){var d=t.parent;d&&d.removeContainerRef(t),r=!0}}if((!t||r||n)&&e&&!e.isDeleted){var h=e.parent;h&&h.addContainerRef(e)}}}},staticMembers:{__QUALIFIED_CLASS_NAME__:"ContainerOperations"}})},function(e,t,n){"use strict";var i=n(80),r=n(36),a=n(34),s=n(180),o=n(775),c=n(1186),l=n(805),u=n(179),d=n(65),h=n(54),p=n(341),f=i.a.extend(r.a,{channel:a.b({type:p.a}),_messageObserver:r.f("channel.incomingMessage",function(e){if(e){var t=l.a.sharedInstance.decode(e.context);t&&"2.0"===t.jsonrpc&&this.handleMessage(t)}}),handleMessage:h.a.define(),staticMembers:{__QUALIFIED_CLASS_NAME__:"JsonRpcBase"}}),g=n(508),m=f.extend({init:function(e){var t=arguments;this.__s._$GZ$init.apply(this,t),e&&o.a(e.methodHandlers)&&this.registerMethodHandlers(e.methodHandlers)},registerMethodHandler:function(e,t,n){return function(e,t,n,i,r){var a=_.get(i),s=a&&a.has(e);s&&d.b("A handler for `%{methodName}` was already registered for channel",{methodName:e,handler:t,handlerMethodName:n,registration:s}),a||(a=new Map,_.set(i,a)),a.set(e,{channel:i,registrant:r,methodName:e,handler:t,handlerMethodName:n})}(e,t,n=n||e,this.channel,this),this},unregisterMethodHandler:function(e){return function(e,t,n){var i=_.get(t);if(i){var r=i.get(e);r&&(r.registrant!==n&&d.b("Trying to unregistring handler for %{methodName} that was not registered by JsonRpcReceiver",{methodName:e,JsonRpcReceiver:n,registration:r}),i.delete(e))}}(e,this.channel,this),this},registerMethodHandlers:function(e){for(var t,n,i,r=Object.keys(e),a=r.length,s=0;s<a;s++)n=e[t=r[s]],i=t,Array.isArray(n)&&(i=n[1],n=n[0]),this.registerMethodHandler(t,n,i);return this},handleMessage:function(e){if(e&&e.method)if(void 0===e.error&&void 0===e.result){var t=e.params||[];if(Array.isArray(t)){var n=e.id,i=function(e,t,n){var i=_.get(t);if(i){var r=i.get(e);return r&&r.registrant===n?r:void 0}}(e.method,this.channel,this);if(i){var r,a=i.handler,s=i.handlerMethodName;try{r=a[s].apply(a,e.params||[])}catch(t){var o=Object(g.a)(t);return void this._handleHandlerError(e,o)}c.a(r)?this._handleHandlerPromise(e,r):this._handleHandlerResult(e,r)}}else this._sendErrorResponse(n,"Invalid params",v.INVALID_PARAMS)}else this._sendErrorResponse(n,"Invalid Request",v.INVALID_REQUEST)},_handleHandlerPromise:function(e,t){t.then(this._handleHandlerResult.bind(this,e),this._handleHandlerError.bind(this,e))},_handleHandlerResult:function(e,t){if(e&&void 0!==e.id)return t instanceof Error?this._handleHandlerError(e,t):this._sendResultResponse(e.id,t)},_handleHandlerError:function(e,t){if(e&&void 0!==e.id){var n=t.toJSON?JSON.stringify(t):String(t),i=t.code||v.UNKNOWN_ERROR,r={stack:t.stack};return this._sendErrorResponse(e.id,n,i,r)}},_sendResultResponse:function(e,t){if(void 0!==e){var n={jsonrpc:"2.0",id:e,result:t};return this.channel.send(l.a.sharedInstance.encode(n)),n}},_sendErrorResponse:function(e,t,n,i){if(void 0!==e){u.a(n)||(n=v.UNKNOWN_ERROR);var r={jsonrpc:"2.0",id:e,error:{code:n,message:t}};return o.a(i)&&(r.error.data=i),this.channel.send(l.a.sharedInstance.encode(r)),r}},__superMap:{_$GZ$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"JsonRpcReceiver"}}),v={PARSE_ERROR:-32700,METHOD_NOT_FOUND:-32601,INVALID_PARAMS:-32600,INTERNAL_ERROR:-32603,UNKNOWN_ERROR:-31209},_=new Map,b=n(777),y=n(1185),I=n(784),w=f.extend({callMethod:function(e){this.channel||d.b("Attempted to call method '%{methodName}' on JsonRpcSender with no channel.",{methodName:e,JsonRpcSender:this});var t=b.a(arguments,1),n={jsonrpc:"2.0",id:++C,method:e,params:t},i=y.a.create();return function(e,t,n){O[t]&&d.b("A handler was already registered for response on "+t),O[t]=[e,n]}(i,n.id,this),this.channel.send(l.a.sharedInstance.encode(n)),i},callMethodWithoutResponse:function(e){this.channel||d.b("Attempted to call method '%{methodName}' on JsonRpcSender with no channel.",{methodName:e,JsonRpcSender:this});var t={jsonrpc:"2.0",method:e,params:b.a(arguments,1)};this.channel.send(l.a.sharedInstance.encode(t))},handleMessage:function(e){if(e&&void 0===e.method){var t=function(e,t){var n=O[e];if(n&&n[1]===t)return O[e]=void 0,n[0]}(e.id,this);t&&(void 0!==e.error?this._handleErrorResponse(e,t):this._handleResultResponse(e,t))}},_handleResultResponse:function(e,t){t.resolve(e.result)},_handleErrorResponse:function(e,t){var n=e.error;o.a(n)||(I.b.warning("Invalid error response for message "+e.id),n={code:S,message:"Unknown error"}),t.reject(n)},staticMembers:{__QUALIFIED_CLASS_NAME__:"JsonRpcSender"}}),S=-31209,C=0,O={};n.d(t,"a",function(){return A});var A=i.a.extend(r.a,{channel:a.b({didChange:function(e){this._transmitter.channel=e,this._receiver.channel=e}}),_transmitter:a.b(s.b(w)),_receiver:a.b(s.b(m)),init:function(e){var t=arguments;this.__s._$L3$init.apply(this,t),e&&o.a(e.methodHandlers)&&this._receiver.registerMethodHandlers(e.methodHandlers)},callMethod:function(){return this._transmitter.callMethod.apply(this._transmitter,arguments)},callMethodWithoutResponse:function(){return this._transmitter.callMethodWithoutResponse.apply(this._transmitter,arguments)},registerMethodHandler:function(){return this._receiver.registerMethodHandler.apply(this._receiver,arguments)},registerMethodHandlers:function(){return this._receiver.registerMethodHandlers.apply(this._receiver,arguments)},unregisterMethodHandler:function(){return this._receiver.unregisterMethodHandler.apply(this._receiver,arguments)},__superMap:{_$L3$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"JsonRpcTransceiver"}})},function(e,t,n){"use strict";var i=n(41),r=n(65),a=n(80),s=n(179),o=n(1185),c=n(49),l=n(54),u={mixinDependencies:[c.a],arrayBuffer:l.a.define(),blob:l.a.define(),formData:l.a.define(),json:l.a.define(),text:l.a.define()},d=n(205),h=a.a.extend({mixinDependencies:[u],init:function(e,t,n){this.__s._$Dk$init.call(this,n),this._encodedBody=e,this._jsonBody=t},headers:i.c({type:Object}),ok:i.c({readOnly:!0,type:Boolean,get:function(){return Object(d.b)(this.status)===d.a.SUCCESS}}),redirected:i.c({readOnly:!0,type:Boolean,get:function(){r.b("URLResponse: redirected: not implmented")}}),status:i.c({type:Number}),statusText:i.c({type:String}),type:i.c({type:String,defaultValue:"default"}),url:i.c({type:String}),useFinalUrl:i.c({type:Boolean}),body:i.c({readOnly:!0,get:function(){r.b("URLResponse: body: not implemented")}}),bodyUsed:i.c({readOnly:!0,type:Boolean,get:function(){r.b("URLResponse: bodyUsed: not implemented")}}),clone:function(){r.b("URLResponse: clone: not implemented")},error:function(){r.b("URLResponse: error: not implemented")},redirect:function(e,t){r.b("URLResponse: redirect: not implemented")},arrayBuffer:function(){r.b("URLResponse: arrayBuffer: not implemented")},blob:function(){r.b("URLResponse: blob: not implemented")},formData:function(){r.b("URLResponse: formData: not implemented")},json:function(){return o.a.resolve(this._jsonBody)},text:function(){return o.a.resolve(this._encodedBody)},_encodedBody:i.c({type:String}),_jsonBody:i.c({type:Object}),__superMap:{_$Dk$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"URLResponse"}}),p=n(406),f=a.a.extend({fetch:function(e,t){var n=p.a.create(e,t);return this.fetchRequest(n)},fetchRequest:function(e){var t=this;e||r.b("URLConnection: fetchRequest: no request specified"),this.willSendRequest(e);var n=e.send().then(function(n){return t._responseWasReceived(e,n)},function(n){return t._responseWasReceived(e,n)});return this.didSendRequest(e),n},willSendRequest:function(e){},didSendRequest:function(e){},didReceiveResponseForRequest:function(e,t){},_responseWasReceived:function(e,t){var n=function(e,t){var n=t.headers,i=t.status,r=t.body,a=t.encodedBody,o=e.url,c=function(e){return s.a(e)?e:0}(i);return h.create(a,r,{status:c,url:o.toString(),headers:function(e){var t={};if(e)for(var n=e.split("\n"),i=0;i<n.length;i++)if(!(n[i].length<1)){var r=n[i].split(": "),a=r.shift(),s=r.join(":");t[a]=s}return t}(n)})}(e,t);return this.didReceiveResponseForRequest(e,n),n},staticMembers:{__QUALIFIED_CLASS_NAME__:"URLConnection"}}),g=n(349);n.d(t,"a",function(){return m});var m=f.extend({mixinDependencies:[g.a],clientId:i.c({type:String}),masteringNumber:i.c({type:String}),buildNumber:i.c({type:String}),init:function(e,t,n){this.__s._$av$init.call(this),e||r.b("[CloudOSURLFetchService] no client id specified"),t||r.b("[CloudOSURLFetchService] no mastering number specified"),n||r.b("[CloudOSURLFetchService] no build number specified"),this.clientId=e,this.masteringNumber=t,this.buildNumber=n},willSendRequest:function(e){var t=e.url,n=this.clientId,i=this.masteringNumber;v(t,"clientBuildNumber",this.buildNumber),v(t,"clientMasteringNumber",i),v(t,"clientId",n)},__superMap:{_$av$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"CoreOSURLConnection"}});function v(e,t,n){e.setQueryParameter(t,n)}},function(e,t,n){"use strict";var i,r,a=n(1219),s=n(168),o=n(1185),c=n(69),l=n(162),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},d=(i=o.a,(r=function(e){var t=i.create();try{e(t.resolve.bind(t),t.reject.bind(t))}catch(e){t.reject(e)}return t}).all=i.all.bind(i),r.race=i.race.bind(i),r.resolve=i.resolve.bind(i),r.reject=i.reject.bind(i),r),h=a.a.extend({handlesType:c.a.WRITE.CREATE,action:function(e){var t,n=this;return(t=regeneratorRuntime.mark(function t(){var i,r,a,o,d,h,p,f;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.context,r=c.b(),a=r.privateDatabase.databaseInstance,delete(o=u({},i))._knownMediasCount,delete o._temporaryJobID,t.prev=6,t.next=9,a.startAssetCopierJob(o);case 9:return d=t.sent,h=r.constructor.getStoreIdForPrimaryKey(s.a,i._temporaryJobID),r.constructor.setPrimaryKeyForStoreId(h,d.jobID),p=s.a.getDataValuesFromServiceValues(d,u({},o,{status:l.a.SUBMITTED.value,itemsProcessed:0,itemsTotalEstimate:2*i._knownMediasCount})),t.next=15,r.loadData(s.a,p,!1);case 15:return t.abrupt("return",s.a.find(d.jobID).retain().autorelease());case 18:return t.prev=18,t.t0=t.catch(6),f=i._temporaryJobID,r.loadData(s.a,{jobID:f,status:l.a.FAILED.value},!0),t.abrupt("return",n.handleError(t.t0,f));case 23:case"end":return t.stop()}},t,n,[[6,18]])}),function(){var e=t.apply(this,arguments);return new d(function(t,n){return function i(r,a){try{var s=e[r](a),o=s.value}catch(e){return void n(e)}if(!s.done)return d.resolve(o).then(function(e){i("next",e)},function(e){i("throw",e)});t(o)}("next")})})()},handleError:function(e,t){var n=c.b().feedbackService;if(n&&n.report){var i=s.a.find(t);n.report("assetCopierRequestFailed",{endpoint:"jobStart",message:e.message,workflowSource:i&&i.workflowSource})}},staticMembers:{__QUALIFIED_CLASS_NAME__:"RecordCopierJobCreateOperation"}}),p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},f=function(){var e=o.a,t=function(t){var n=e.create();try{t(n.resolve.bind(n),n.reject.bind(n))}catch(e){n.reject(e)}return n};return t.all=e.all.bind(e),t.race=e.race.bind(e),t.resolve=e.resolve.bind(e),t.reject=e.reject.bind(e),t}(),g=a.a.extend({handlesType:c.a.READ.LOAD,action:function(e){var t,n=this;return(t=regeneratorRuntime.mark(function t(){var i,r,a,o,u,d,h,f,g;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:i=e.context.primaryKeys,t.next=3;break;case 3:if(!(r=i[0]).startsWith("temporaryJobID-")){t.next=6;break}return t.abrupt("return");case 6:return a=c.b(),o=a.privateDatabase.databaseInstance,u=s.a.findByPrimaryKeys(i),(d=u.objectAt(0))&&(d.countOfStatusCalls+=1),t.prev=11,t.next=14,o.checkAssetCopierJobStatus({jobID:r});case 14:return h=t.sent,f=s.a.getDataHashForPrimaryKey(r),g=s.a.getDataValuesFromServiceValues(h,p({},f)),a.loadData(s.a,g,!1),t.abrupt("return",u);case 21:return t.prev=21,t.t0=t.catch(11),d&&(d.countOfFailedStatusCalls+=1,d.countOfFailedStatusCalls>=5&&a.loadData(s.a,{jobID:r,status:l.a.FAILED.value},!0)),t.abrupt("return",n.handleError(t.t0,d));case 25:case"end":return t.stop()}},t,n,[[11,21]])}),function(){var e=t.apply(this,arguments);return new f(function(t,n){return function i(r,a){try{var s=e[r](a),o=s.value}catch(e){return void n(e)}if(!s.done)return f.resolve(o).then(function(e){i("next",e)},function(e){i("throw",e)});t(o)}("next")})})()},handleError:function(e,t){var n=c.b().feedbackService;n&&n.report&&n.report("assetCopierRequestFailed",{endpoint:"jobStatus",message:e.message,workflowSource:t&&t.workflowSource})},staticMembers:{__QUALIFIED_CLASS_NAME__:"RecordCopierJobLoadOperation"}});n.d(t,"a",function(){return m});var m=a.a.extend({handlesType:s.a,nestedOperationHandlers:[h,g].map(function(e){return e.create()}),staticMembers:{__QUALIFIED_CLASS_NAME__:"RecordCopierJobOperations"}})},function(e,t,n){"use strict";var i,r,a=n(1219),s=n(1185),o=n(69),c=n(784),l=n(66),u=n(12),d=n(166),h=function(e){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"request error",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this));return Object.setPrototypeOf(r,t.prototype),r.type=d.a.INDEXING_STATE_ERROR,r.state=n,r.progress=i,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(Error),p=n(148),f=n(224),g=(i=s.a,(r=function(e){var t=i.create();try{e(t.resolve.bind(t),t.reject.bind(t))}catch(e){t.reject(e)}return t}).all=i.all.bind(i),r.race=i.race.bind(i),r.resolve=i.resolve.bind(i),r.reject=i.reject.bind(i),r),m=function(e){var t=e.state,n=void 0===t?p.a.UNKNOWN:t,i=e.progress;if(n!==p.a.FINISHED)throw new h(n.value,i)},v=u.a.extend({handlesType:o.a.READ.LIST,action:function(e){var t,n=this;return(t=regeneratorRuntime.mark(function t(){var i,r,a,s,u,d,h,p,g;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:i=e.context.zonePK,t.next=3;break;case 3:return r=l.a.find(i),a={recordType:f.a.CK_RECORD_TYPE},s=n.baseCKOptions(r.zoneID),t.next=8,n.ckRequest(e,r.scope).send("performQuery",a,s);case 8:if(u=t.sent,d=u.records,h=d[0]){t.next=12;break}return t.abrupt("return");case 12:return p=f.a.getDataValuesFromServiceValues(h,{zone:i}),g=f.a.createFromDataHash(p),o.b().indexingState=g,m(g),c.b.debug("INIT: CPL CheckIndexingState: state="+g.state),t.abrupt("return");case 19:case"end":return t.stop()}},t,n)}),function(){var e=t.apply(this,arguments);return new g(function(t,n){return function i(r,a){try{var s=e[r](a),o=s.value}catch(e){return void n(e)}if(!s.done)return g.resolve(o).then(function(e){i("next",e)},function(e){i("throw",e)});t(o)}("next")})})()},staticMembers:{__QUALIFIED_CLASS_NAME__:"IndexingStateListOperation"}});n.d(t,"a",function(){return _});var _=a.a.extend({handlesType:f.a,nestedOperationHandlers:[v].map(function(e){return e.create()}),staticMembers:{__QUALIFIED_CLASS_NAME__:"IndexingStateOperations"}})},function(e,t,n){"use strict";var i=n(1184),r=n(156),a=n(47),s=n(12),o=n(69),c=n(1185),l=n(33),u=n(70),d=s.a.extend({handlesType:o.a.WRITE.CREATE,shouldIngestChangesOnResponse:!0,shouldIngestChangesAsChangeSet:!0,action:function(e){var t=e.context,n=t.model,i=t.diff,r=n.getServiceValuesFromDataValues(i.added);if(l.a.isSystemAlbumRecordName(r.fields.containerId.value)){var a=o.b().feedbackService,s=o.b().FeedbackErrorType;return a&&a.reportError&&a.reportError({errorType:s.SYSTEM_ALBUM_ACTION.value}),c.a.resolve()}var d=this.baseCKOptions(r.zoneID);return d.desiredKeys=u.a.serviceKeys,this.ckRequest(e,n.zone.scope).send("saveRecords",r,d)},staticMembers:{__QUALIFIED_CLASS_NAME__:"ContainerRelationCreateOperationHandler"}}),h=n(1280),p=n(1274),f=s.a.extend({mixinDependencies:[h.a,p.a],handlesType:o.a.WRITE.DESTROY,shouldIngestChangesOnResponse:!0,shouldIngestChangesAsChangeSet:!0,action:function(e){var t=[],n=void 0,i=e.context.primaryKeys,r=Array.isArray(i),a=0;for(i=r?i:i[Symbol.iterator]();;){var s;if(r){if(a>=i.length)break;s=i[a++]}else{if((a=i.next()).done)break;s=a.value}var o=s,c={recordName:(n=u.a.find(o)).recordName,recordChangeTag:n.recordChangeTag};t.push(c)}var l=n.zone.scope;return this.ckRequest(e,l).send("deleteRecords",t,this.baseCKOptions(n.zoneID))},staticMembers:{__QUALIFIED_CLASS_NAME__:"ContainerRelationDeleteOperationHandler"}}),g=n(40),m=n(160);n.d(t,"a",function(){return v});var v=s.a.extend({handlesType:u.a,nestedOperationHandlers:[d,f].map(function(e){return e.create()}),ingestChange:function(e,t,n){var s=!1;if(t){var o=!e||e.isDeleted&&!t.isDeleted,c=e&&t.position!==e.position;if(o||c){var u=a.a.getPrimaryKey(t.zone,t.itemId),d=g.a.findByAssetPK(u);if(d){d.removeContainerRelationRef(t);var h=l.a.getPrimaryKey(t.zone,t.containerId),p=l.a.find(h);p&&p.removeMediaRef(d)}s=!0}}if((!t||n||s)&&e&&!e.isDeleted){var f=l.a.getPrimaryKey(e.zone,e.containerId),v=l.a.find(f);if(v){var _=r.a.getPrimaryKey(v.zone,e.itemId),b=g.a.findByAssetPK(_);if(b)b.addContainerRelationRef(e),v.addMediaRef(b);else if(v.sortType===m.a.MANUAL){var y={position:e.position};v.addMediaRef(y)}else i.a(function(){g.a.load({primaryKeys:[_]}).then(function(e){var t=l.a.find(f);t&&t.addMediaRef(e.objectAt(0))})},0)}}if(t||e){var I=e?e.containerId:t.containerId,w=e?e.zone.pk:t.zone.pk,S=r.a.getPrimaryKeyWithZonePK(w,I),C=l.a.find(S);if(C){var O=e?g.a.findByAssetPK(r.a.getPrimaryKeyWithZonePK(w,e.itemId)):void 0;O&&e.isKeyAsset?C.keyMediaByUser=O:(C.keyMediaByUser=null,C.keyMediaBySystem=null)}}},staticMembers:{__QUALIFIED_CLASS_NAME__:"ContainerRelationOperations"}})},function(e,t,n){"use strict";var i=n(41),r=n(65),a={timeRequestSent:i.c({type:Number,defaultValue:void 0}),timeResponseReceived:i.c({type:Number,defaultValue:void 0}),duration:i.c({type:Number,readOnly:!0,get:function(){return this._timeRequestSent||r.b("No request sent time set"),this._timeResponseReceived||r.b("No response time set"),this._timeResponseReceived-this._timeRequestSent}}),shouldReportSuccess:i.c({type:Boolean,defaultValue:!0}),shouldReportFailure:i.c({type:Boolean,defaultValue:!0}),reportingPathname:i.c({defaultValue:null}),reportingMethod:null},s=n(406).a.extend({init:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.hasOwnProperty("credentials")||t.hasOwnProperty("useCredentialsIfCrossOrigin")||(t.credentials="include"),this.__s._$Ew$init.call(this,e,t)},__superMap:{_$Ew$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"CloudOSRequest"}});n.d(t,"a",function(){return o});var o=s.extend({mixinDependencies:[a],staticMembers:{__QUALIFIED_CLASS_NAME__:"URLReportingRequest"}})},function(e,t,n){"use strict";var i=n(409),r=n(180),a=n(1233),s=n(1182),o=i.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"iframe",attributes:{src:{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"src",attributes:{},attribute:"src"}}},className:"ck-sharing-iframe-view",__QUALIFIED_CLASS_NAME__:"IframeView"}});n(952),n.d(t,"a",function(){return c});var c=i.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"loadingView"}],name:"loadingViewWrapper",classes:["loading-wrapper"]},{type:"VIEWOUTLET",tagname:"view",name:"iframeView"}],classes:["mail-compose-view"]},className:"ck-sharing-mail-compose-view",__QUALIFIED_CLASS_NAME__:"MailComposeView"},loadingView:r.b(a.a),iframeView:r.b(o,{additionalClassNames:s.a(["hidden"])})})},function(e,t,n){"use strict";var i=n(34),r=n(36),a=n(1195),s=n(1187),o=n(80),c=n(811),l=n(65),u=n(123),d=n(183),h=n(1197),p=n(341),f=o.a.extend(r.a,p.a,{incomingMessage:r.g(),outgoingMessage:r.g(),messageClass:c.a,autoconnect:!0,connected:!1,remoteOrigin:null,_incomingWindow:window,_outgoingWindow:i.b({set:function(e){return{actualOutgoingWindow:e}}}),init:function(){var e=arguments;this.__s._$bk$init.apply(this,e),this._handleMessage=this._handleMessage.bind(this)},connect:function(){this.connected||(this._outgoingWindow&&this._outgoingWindow.actualOutgoingWindow.postMessage||l.b("No window configured for remote end of the Channel"),s.a(this._incomingWindow,"message",this._handleMessage),this.connected=!0)},disconnect:function(){this.connected&&(a.a(this._incomingWindow,"message",this._handleMessage),this.connected=!1)},send:function(e){this.connected||l.b("Trying to send a message on a disconnected channel");var t=this.remoteOrigin;u.a(t)&&0!==t.trim().length||l.b("No origin specified for PostMessageChannel messages.");var n=e;e.bodySerializer&&(n=e.bodySerializer.encode(n)),this.outgoingMessage(e),this._outgoingWindow.actualOutgoingWindow.postMessage(n,t)},receive:function(e){e&&(e.bodySerializer&&(e.body=e.bodySerializer.decode(e.body)),this.incomingMessage(e))},_handleMessage:function(e){(function(e,t){if(e===t||"*"===e||"*"===t)return!0;var n=d.a.parse(e),i=d.a.parse(t);if(h.a(n.protocol)||h.a(i.protocol)||n.protocol!==i.protocol)return!1;if(h.a(n.hostname)||h.a(i.hostname)||n.hostname!==i.hostname)return!1;var r=n.port;h.a(r)&&(r="https:"===n.protocol?"443":"80");var a=i.port;return h.a(a)&&(a="https:"===i.protocol?"443":"80"),r===a})((e.orignalEvent||e).origin,this.remoteOrigin)&&this.receive((e.originalEvent||e).data)},_outgoingWindowDidChange:r.f("_outgoingWindow",function(e){e&&e.actualOutgoingWindow?this.autoconnect&&this.connect():this.disconnect()}),__superMap:{_$bk$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"WindowPostMessageChannel"}});n.d(t,"a",function(){return g});var g=f.extend({iframe:i.b({set:function(e,t){return this._previousIframe=t,e}}),_setOutgoingWindowOnIFrameChange:r.f("iframe",function(e){var t=this._previousIframe,n=this._iframeDidLoad;t&&n&&e!==t&&a.a(t,"load",n),e&&((this._outgoingWindow=e.contentWindow)||(n||(n=this._iframeDidLoad=function(){this._outgoingWindow=e.contentWindow,a.a(e,"load",this._iframeDidLoad)}.bind(this)),s.a(e,"load",n)))}),staticMembers:{__QUALIFIED_CLASS_NAME__:"IFrameWindowChannel"}})},function(e,t,n){"use strict";var i,r,a=n(1219),s=n(163),o=n(1185),c=n(69),l=n(107),u=(i=o.a,(r=function(e){var t=i.create();try{e(t.resolve.bind(t),t.reject.bind(t))}catch(e){t.reject(e)}return t}).all=i.all.bind(i),r.race=i.race.bind(i),r.resolve=i.resolve.bind(i),r.reject=i.reject.bind(i),r),d=a.a.extend({handlesType:c.a.WRITE.CREATE,action:function(e,t){var n,i=this;return(n=regeneratorRuntime.mark(function n(){var r,a,o,u,d,h,p,f,g,m,v,_,b,y,I;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.context,a=r.model,o=r.newData,u=o.scope,d=o.zoneID,h=a.getServiceValuesFromDataValues(a.constructor.serviceKeys,{createShortGUID:!0}),p=c.b(),f=p.getDatabaseForScope(u).databaseInstance,n.prev=5,n.next=8,f.saveRecords(h,{zoneID:d});case 8:if((g=n.sent).hasErrors)for(m=g.errors,v=0;v<m.length;v++)i.handleError(m[v],e,t);for(_=[],b=g.records,y=0;y<b.length;y++)I=s.a.getDataValuesFromServiceValues(b[y],{scope:u,zone:l.a.getZoneIdString(d),zoneID:d}),_.push(I);return n.abrupt("return",p.loadData(s.a,_,!1));case 16:return n.prev=16,n.t0=n.catch(5),n.abrupt("return",i.handleError(n.t0,e,t));case 19:case"end":return n.stop()}},n,i,[[5,16]])}),function(){var e=n.apply(this,arguments);return new u(function(t,n){return function i(r,a){try{var s=e[r](a),o=s.value}catch(e){return void n(e)}if(!s.done)return u.resolve(o).then(function(e){i("next",e)},function(e){i("throw",e)});t(o)}("next")})})()},staticMembers:{__QUALIFIED_CLASS_NAME__:"CMMRootCreateOperation"}});n.d(t,"a",function(){return h});var h=a.a.extend({handlesType:s.a,nestedOperationHandlers:[d.create()],staticMembers:{__QUALIFIED_CLASS_NAME__:"CMMRootOperations"}})},function(e,t,n){"use strict";var i,r,a=n(1219),s=n(149),o=n(1185),c=n(69),l=n(92),u=n(74),d=n(66),h=(i=o.a,(r=function(e){var t=i.create();try{e(t.resolve.bind(t),t.reject.bind(t))}catch(e){t.reject(e)}return t}).all=i.all.bind(i),r.race=i.race.bind(i),r.resolve=i.resolve.bind(i),r.reject=i.reject.bind(i),r),p=a.a.extend({mixinDependencies:[u.a],handlesType:c.a.READ.LOAD,action:function(e,t,n){var i,r=this;return(i=regeneratorRuntime.mark(function t(){var i,a,o,u,h,p,f,g,m,v,_,b,y,I,w,S,C,O,A,E,T;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:i=e.context.primaryKeys,t.next=3;break;case 3:a=c.b(),o=s.a.getZonePrimaryKeyFromPrimaryKey(i[0]),u=d.a.find(o,a),h=u.zoneID,t.next=9;break;case 9:return p=i.map(function(e){return s.a.getRecordNameFromPrimaryKey(e)}),f=a.getDatabaseForScope(u.scope).databaseInstance,t.prev=11,t.next=14,f.fetchRecords(p,{zoneID:h});case 14:if(!(g=t.sent).hasErrors){t.next=31;break}m=g.errors,v=Array.isArray(m),_=0,m=v?m:m[Symbol.iterator]();case 17:if(!v){t.next=23;break}if(!(_>=m.length)){t.next=20;break}return t.abrupt("break",31);case 20:b=m[_++],t.next=27;break;case 23:if(!(_=m.next()).done){t.next=26;break}return t.abrupt("break",31);case 26:b=_.value;case 27:y=b,r.handleError(y,e,n);case 29:t.next=17;break;case 31:I=[],w=g.records,S=Array.isArray(w),C=0,w=S?w:w[Symbol.iterator]();case 33:if(!S){t.next=39;break}if(!(C>=w.length)){t.next=36;break}return t.abrupt("break",48);case 36:O=w[C++],t.next=43;break;case 39:if(!(C=w.next()).done){t.next=42;break}return t.abrupt("break",48);case 42:O=C.value;case 43:A=O,E=s.a.getDataValuesFromServiceValues(A,{zone:o,zoneID:h}),I.push(E);case 46:t.next=33;break;case 48:return t.next=50,a.loadData(s.a,I,!1);case 50:return T=t.sent,t.abrupt("return",l.a.createFromStoreIds(T,s.a,a));case 54:return t.prev=54,t.t0=t.catch(11),t.abrupt("return",r.handleError(t.t0,e,n));case 57:case"end":return t.stop()}},t,r,[[11,54]])}),function(){var e=i.apply(this,arguments);return new h(function(t,n){return function i(r,a){try{var s=e[r](a),o=s.value}catch(e){return void n(e)}if(!s.done)return h.resolve(o).then(function(e){i("next",e)},function(e){i("throw",e)});t(o)}("next")})})()},staticMembers:{__QUALIFIED_CLASS_NAME__:"CountInfoLoadOperation"}});n.d(t,"a",function(){return f});var f=a.a.extend({handlesType:s.a,nestedOperationHandlers:[p].map(function(e){return e.create()}),staticMembers:{__QUALIFIED_CLASS_NAME__:"CountInfoOperations"}})},function(e,t,n){"use strict";var i,r,a=n(1219),s=n(407),o=n(1185),c=n(69),l=n(92),u=n(66),d=(i=o.a,(r=function(e){var t=i.create();try{e(t.resolve.bind(t),t.reject.bind(t))}catch(e){t.reject(e)}return t}).all=i.all.bind(i),r.race=i.race.bind(i),r.resolve=i.resolve.bind(i),r.reject=i.reject.bind(i),r),h=a.a.extend({handlesType:c.a.READ.LOAD,action:function(e,t,n){var i,r=this;return(i=regeneratorRuntime.mark(function t(){var i,a,o,d,h,p,f,g,m,v,_,b,y,I,w,S,C;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:i=e.context.primaryKeys,t.next=3;break;case 3:a=i[0],o=s.a.getZonePrimaryKeyFromPrimaryKey(a),d=u.a.find(o),t.next=8;break;case 8:return h=d.zoneID,p=i.map(s.a.getRecordNameFromPrimaryKey),f=c.b(),g=f.getDatabaseForScope(d.scope).databaseInstance,t.prev=12,t.next=15,g.fetchRecords(p,{zoneID:h});case 15:m=t.sent,v=[],_=m.records,b=Array.isArray(_),y=0,_=b?_:_[Symbol.iterator]();case 18:if(!b){t.next=24;break}if(!(y>=_.length)){t.next=21;break}return t.abrupt("break",33);case 21:I=_[y++],t.next=28;break;case 24:if(!(y=_.next()).done){t.next=27;break}return t.abrupt("break",33);case 27:I=y.value;case 28:w=I,S=s.a.getDataValuesFromServiceValues(w,{zone:o,zoneID:h}),v.push(S);case 31:t.next=18;break;case 33:return t.next=35,f.loadData(s.a,v,!1);case 35:return C=t.sent,t.abrupt("return",l.a.createFromStoreIds(C,s.a,f));case 39:return t.prev=39,t.t0=t.catch(12),t.abrupt("return",r.handleError(t.t0,e,n));case 42:case"end":return t.stop()}},t,r,[[12,39]])}),function(){var e=i.apply(this,arguments);return new d(function(t,n){return function i(r,a){try{var s=e[r](a),o=s.value}catch(e){return void n(e)}if(!s.done)return d.resolve(o).then(function(e){i("next",e)},function(e){i("throw",e)});t(o)}("next")})})()},staticMembers:{__QUALIFIED_CLASS_NAME__:"LibraryInfoLoadOperation"}});n.d(t,"a",function(){return p});var p=a.a.extend({handlesType:s.a,nestedOperationHandlers:[h].map(function(e){return e.create()}),ingestChange:function(){},staticMembers:{__QUALIFIED_CLASS_NAME__:"LibraryInfoOperations"}})},function(e,t,n){"use strict";var i,r,a=n(69),s=n(784),o=n(1185),c=n(156),l=n(66),u=n(47),d=n(12),h=(i=o.a,(r=function(e){var t=i.create();try{e(t.resolve.bind(t),t.reject.bind(t))}catch(e){t.reject(e)}return t}).all=i.all.bind(i),r.race=i.race.bind(i),r.resolve=i.resolve.bind(i),r.reject=i.reject.bind(i),r),p=d.a.extend({handlesType:a.a.READ.LOAD,shouldIngestChangesOnResponse:!0,shouldIngestChangesAsChangeSet:!0,action:function(e){var t,n=this;return(t=regeneratorRuntime.mark(function t(){var i,r,o,d,h;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:s.b.debug("INIT: CPL DataManager Asset/Load"),i=e.context.primaryKeys,t.next=4;break;case 4:r=Array.isArray(i)?i:[i],o=r.map(u.a.getRecordNameFromPrimaryKey),d=c.a.getZonePrimaryKeyFromPrimaryKey(r[0]),h=a.b().readDataForPrimaryKey(l.a,d),t.next=10;break;case 10:return t.next=12,n.ckRequest(e,h.scope).send("fetchRecords",o,n.baseCKOptions(h.zoneID));case 12:return t.abrupt("return",u.a.findByPrimaryKeys(i).retain().autorelease());case 13:case"end":return t.stop()}},t,n)}),function(){var e=t.apply(this,arguments);return new h(function(t,n){return function i(r,a){try{var s=e[r](a),o=s.value}catch(e){return void n(e)}if(!s.done)return h.resolve(o).then(function(e){i("next",e)},function(e){i("throw",e)});t(o)}("next")})})()},staticMembers:{__QUALIFIED_CLASS_NAME__:"AssetLoadOperationHandler"}}),f=n(348),g=n(33),m=n(40);n.d(t,"a",function(){return v});var v=d.a.extend({handlesType:u.a,nestedOperationHandlers:[f.a,p].map(function(e){return e.create()}),ingestChange:function(e,t,n){var i=a.b(),r=e instanceof Object,o=t instanceof Object,c=void 0;if(r&&(c=m.a.findOrCreateByAssetPK(e.pk),e.remappedRef instanceof Object))s.b.debug("Skipping ingestion of asset w/ remapped ref: "+e.pk);else{var l=r?e.zone:o?t.zone:void 0;if(l instanceof Object&&l===i.cplZone){var d=i.cplSystemContainersMap;if(!t&&!n){var h=[d.get(g.a.PredefinedName.MOMENTS),d.get(g.a.PredefinedName.PHOTOS),d.get(g.a.PredefinedName.FAVORITES),d.get(g.a.PredefinedName.HIDDEN)],p=d.get(g.a.PredefinedName.DELETED);if(Array.isArray(p.medias)&&p.medias.length>0){if(e.isDeleted){var f=p.getDataHash(),v=f.pk,_=f.recordType,b=f.medias;b||(b=[]);var y=b.slice(0);y.splice(0,0,void 0);var I={recordType:_,pk:v,medias:y};i.loadData(g.a,I,!0)}}else h.push(p);for(var w=0,S=h.length;w<S;w++){var C=h[w],O=C.medias.length,A=[];A.length=O;var E={recordType:C.recordType,pk:C.pk,medias:A};i.loadData(g.a,E,!0),C.load()}return}for(var T=g.a.PredefinedNames,M=0,D=T.length;M<D;M++){var L=T[M],N=d.get(L),P=g.a.QueryInfoByPredefinedName[L].isMediaMemberOf,R=!1,x=void 0;o&&(x=m.a.findByAssetPK(t.pk))&&(R=P(t,x.primaryMaster));var F=!1;if(r){if(!c||!c.primaryMaster)continue;F=P(e,c.primaryMaster)}R&&x&&!F&&N.removeMediaRef(x),F&&c&&!R&&N.addMediaRef(c)}}r&&o&&c instanceof Object&&(e.isEdited!==t.isEdited||e.isEdited&&u.a.isContentDifferent(e,t))&&(s.b.warn("resetting derivative..."),c.resetDerivatives())}},staticMembers:{__QUALIFIED_CLASS_NAME__:"AssetOperations"}})},function(e,t,n){"use strict";var i,r,a=n(12),s=n(1185),o=n(69),c=n(784),l=n(156),u=n(66),d=n(67),h=(i=s.a,(r=function(e){var t=i.create();try{e(t.resolve.bind(t),t.reject.bind(t))}catch(e){t.reject(e)}return t}).all=i.all.bind(i),r.race=i.race.bind(i),r.resolve=i.resolve.bind(i),r.reject=i.reject.bind(i),r),p=a.a.extend({handlesType:o.a.READ.LOAD,shouldIngestChangesOnResponse:!0,shouldIngestChangesAsChangeSet:!0,action:function(e){var t,n=this;return(t=regeneratorRuntime.mark(function t(){var i,r,a,s,h;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:c.b.debug("INIT: CPL DataManager Master/Load"),i=e.context.primaryKeys,t.next=4;break;case 4:r=Array.isArray(i)?i:[i],a=r.map(d.a.getRecordNameFromPrimaryKey),s=l.a.getZonePrimaryKeyFromPrimaryKey(r[0]),h=o.b().readDataForPrimaryKey(u.a,s),t.next=10;break;case 10:return t.next=12,n.ckRequest(e,h.scope).send("fetchRecords",a,n.baseCKOptions(h.zoneID));case 12:return t.abrupt("return",d.a.findByPrimaryKeys(i).retain().autorelease());case 13:case"end":return t.stop()}},t,n)}),function(){var e=t.apply(this,arguments);return new h(function(t,n){return function i(r,a){try{var s=e[r](a),o=s.value}catch(e){return void n(e)}if(!s.done)return h.resolve(o).then(function(e){i("next",e)},function(e){i("throw",e)});t(o)}("next")})})()},staticMembers:{__QUALIFIED_CLASS_NAME__:"MasterLoadOperationHandler"}}),f=n(348);n.d(t,"a",function(){return g});var g=a.a.extend({handlesType:d.a,nestedOperationHandlers:[f.a,p].map(function(e){return e.create()}),ingestChange:function(){},staticMembers:{__QUALIFIED_CLASS_NAME__:"MasterOperations"}})},function(e,t,n){"use strict";var i,r,a=n(784),s=n(12),o=n(1185),c=n(69),l=n(66),u=n(147),d=(i=o.a,(r=function(e){var t=i.create();try{e(t.resolve.bind(t),t.reject.bind(t))}catch(e){t.reject(e)}return t}).all=i.all.bind(i),r.race=i.race.bind(i),r.resolve=i.resolve.bind(i),r.reject=i.reject.bind(i),r),h=s.a.extend({handlesType:c.a.READ.LOAD,shouldIngestChangesOnResponse:!0,action:function(e){var t,n=this;return(t=regeneratorRuntime.mark(function t(){var i,r,a,s,o,d,h,p,f,g;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:i=e.context.primaryKeys,t.next=3;break;case 3:return r=i[0],a=u.a.getZonePrimaryKeyFromPrimaryKey(r),s=l.a.find(a),o=s.zoneID,d=u.a.getRecordNameFromPrimaryKey(r),t.next=10,n.ckRequest(e,s.scope).send("fetchRecords",d,n.baseCKOptions(o));case 10:if(h=t.sent,0!==(p=h.records).length){t.next=14;break}return t.abrupt("return");case 14:return f=p[0],g=u.a.getDataValuesFromServiceValues(f,{zone:a,zoneID:o}),c.b().loadData(u.a,g,!1),t.abrupt("return",u.a.find(g.pk));case 19:case"end":return t.stop()}},t,n)}),function(){var e=t.apply(this,arguments);return new d(function(t,n){return function i(r,a){try{var s=e[r](a),o=s.value}catch(e){return void n(e)}if(!s.done)return d.resolve(o).then(function(e){i("next",e)},function(e){i("throw",e)});t(o)}("next")})})()},processResponseErrors:function(e){var t=arguments;if(e.hasErrors&&e.errors[0].ckErrorCode!==CloudKit.CKError.NOT_FOUND)return this.__s._$ap$processResponseErrors.apply(this,t)},__superMap:{_$ap$processResponseErrors:"processResponseErrors"},staticMembers:{__QUALIFIED_CLASS_NAME__:"ZoneStateLoadOperationHandler"}});n.d(t,"a",function(){return p});var p=s.a.extend({handlesType:u.a,nestedOperationHandlers:[h].map(function(e){return e.create()}),ingestChange:function(e,t,n){var i=e.recordType;a.b.error("Unhandled change records recordType="+i)},staticMembers:{__QUALIFIED_CLASS_NAME__:"ZoneStateOperations"}})},function(e,t,n){"use strict";var i,r,a=n(1219),s=n(170),o=n(1185),c=n(69),l=n(92),u=n(74),d=(i=o.a,(r=function(e){var t=i.create();try{e(t.resolve.bind(t),t.reject.bind(t))}catch(e){t.reject(e)}return t}).all=i.all.bind(i),r.race=i.race.bind(i),r.resolve=i.resolve.bind(i),r.reject=i.reject.bind(i),r),h=a.a.extend({mixinDependencies:[u.a],handlesType:c.a.READ.LOAD,action:function(e,t,n){var i,r=this;return(i=regeneratorRuntime.mark(function t(){var i,a,o,u,d,h,p,f,g,m,v,_,b,y,I,w;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:i=e.context.primaryKeys,t.next=3;break;case 3:return a=c.b(),o=a.sharedDatabase.databaseInstance,t.prev=5,u=o._container,t.next=9,u.fetchRecordInfos(i);case 9:if((d=t.sent).hasErrors)for(h=0;h<d.errors.length;h++)p=d.errors[h],r.handleError(p,e,n);f=[],g=d.results,m=Array.isArray(g),v=0,g=m?g:g[Symbol.iterator]();case 13:if(!m){t.next=19;break}if(!(v>=g.length)){t.next=16;break}return t.abrupt("break",28);case 16:_=g[v++],t.next=23;break;case 19:if(!(v=g.next()).done){t.next=22;break}return t.abrupt("break",28);case 22:_=v.value;case 23:b=_,y=s.a.getDataValuesFromServiceValues(b),f.push(y);case 26:t.next=13;break;case 28:return t.next=30,a.loadData(s.a,f,!1);case 30:return I=t.sent,w=Array.isArray(I)?I:I.storeIds,t.abrupt("return",l.a.createFromStoreIds(w,s.a,a));case 35:return t.prev=35,t.t0=t.catch(5),t.abrupt("return",r.handleError(t.t0,e,n));case 38:case"end":return t.stop()}},t,r,[[5,35]])}),function(){var e=i.apply(this,arguments);return new d(function(t,n){return function i(r,a){try{var s=e[r](a),o=s.value}catch(e){return void n(e)}if(!s.done)return d.resolve(o).then(function(e){i("next",e)},function(e){i("throw",e)});t(o)}("next")})})()},staticMembers:{__QUALIFIED_CLASS_NAME__:"RecordInfoLoadOperation"}});n.d(t,"a",function(){return p});var p=a.a.extend({handlesType:s.a,nestedOperationHandlers:[h].map(function(e){return e.create()}),staticMembers:{__QUALIFIED_CLASS_NAME__:"RecordInfoOperations"}})},function(e,t,n){"use strict";var i,r,a=n(1219),s=n(1105),o=n(1185),c=n(69),l=n(74),u=(i=o.a,(r=function(e){var t=i.create();try{e(t.resolve.bind(t),t.reject.bind(t))}catch(e){t.reject(e)}return t}).all=i.all.bind(i),r.race=i.race.bind(i),r.resolve=i.resolve.bind(i),r.reject=i.reject.bind(i),r),d=a.a.extend({mixinDependencies:[l.a],handlesType:"fetchChanges",action:function(e,t,n){var i,r=this;return(i=regeneratorRuntime.mark(function t(){var i,a,s,o,l,u,d;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:i=e.context.scope,t.next=3;break;case 3:a=c.b(),s=a.getDatabaseForScope(i).databaseInstance,o={_results:[]},t.prev=6,l=void 0;case 8:return t.next=10,s.fetchDatabaseChanges(o);case 10:if((l=t.sent).hasErrors)for(u=0;u<l.errors.length;u++)d=l.errors[u],r.handleError(d,e,n);o=r._mergeResponses(o,l);case 13:if(!0===l.moreComing){t.next=8;break}case 14:return o.scope=i,t.abrupt("return",o);case 18:return t.prev=18,t.t0=t.catch(6),t.abrupt("return",r.handleError(t.t0,e,n));case 21:case"end":return t.stop()}},t,r,[[6,18]])}),function(){var e=i.apply(this,arguments);return new u(function(t,n){return function i(r,a){try{var s=e[r](a),o=s.value}catch(e){return void n(e)}if(!s.done)return u.resolve(o).then(function(e){i("next",e)},function(e){i("throw",e)});t(o)}("next")})})()},_mergeResponses:function(e,t){var n=t._results;return t._results=e._results.concat(n),t},staticMembers:{__QUALIFIED_CLASS_NAME__:"DatabaseFetchChangesOperation"}});n.d(t,"a",function(){return h});var h=a.a.extend({handlesType:s.a,nestedOperationHandlers:[d.create()],staticMembers:{__QUALIFIED_CLASS_NAME__:"DatabaseOperations"}})},function(e,t,n){"use strict";var i=n(784),r=n(1215),a=n(324),s=n(108),o=n(135),c={app0:function(e,t){return t},app1:function(e,t){var n=e.cursor+10;if(!Object(o.a)(e.fastForward(4).uint32))return i.b.warn("No valid EXIF data! Missing `Exif` ID code."),t;e.jumpTo(n);var r=Object(o.c)(e.uint32);if(null===r)return i.b.warn("No valid EXIF data! Can't find endianness string."),t;e.le=r,e.offset=n;var a=e.jumpTo(4).uint32;return Object(o.f)(e.jumpTo(a),s.a.Tiff,t),t.ExifOffset&&Object(o.f)(e.jumpTo(t.ExifOffset),s.a.Exif,t),t.GPSOffset&&Object(o.f)(e.jumpTo(t.GPSOffset),s.a.GPS,t),t},sof:function(e,t){return e.fastForward(5),t.VerticalLines=e.uint16,t.HorizontalLines=e.uint16,t}};n.d(t,"a",function(){return u});var l=s.a.MarkerSegments;function u(e){if(e!==r.b)return i.b.warn("Jpeg parser must accept an ByteStream.ByteStream."),{};var t=e.length,n={},s={},o=void 0,u=void 0,d=void 0;for(e.jumpTo(a.b);e.cursor<t&&(u=e.cursor,o=e.uint16,d=e.uint16,null!==o||null!==d)&&(s.hasOwnProperty(o)||(s[o]=u),o!==l.SOS);)e.jumpTo(u+2+d);for(var h in s)if(s.hasOwnProperty(h)){var p=s[h];switch(Number(h)){case l.APP1:c.app1(e.jumpTo(p),n);break;case l.SOF:c.sof(e.jumpTo(p),n)}}return n}},function(e,t,n){"use strict";var i=n(200),r=n(1182),a=n(34),s=n(832),o=n(198);n(1090),n.d(t,"a",function(){return c}),n(1089);var c=i.a.extend(s.a,{additionalClassNames:r.a(["icloud-logo"]),action:"redirectToPhotos",icon:a.b({dependencies:["domainProperties"],readOnly:!0,get:function(){var e=this.domainProperties;if(e instanceof Object){var t=e.iCloudLogoSVG;if(t instanceof Object){var n=t.resource,i=t.cssStyle;if("string"==typeof n&&"string"==typeof i){var r=function(e){var t=document.createElement("div");t.innerHTML=e;var n=t.children[0];return t.removeChild(n),n}(n);return r.setAttribute("style",i),r.outerHTML}}}}}),domainProperties:a.b({binding:o.a.sharedInstance.bindingFor("current"),readOnly:!0}),staticMembers:{__QUALIFIED_CLASS_NAME__:"iCloudLogo"}})},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return w});var i=n(80),r=n(41),a=n(195),s=n(65),o=n(1185),c=n(123),l=n(365),u=n(180),d=n(1170),h=n(1184),p=n(1174),f=n(288),g=n(98),m=n(196),v=n(194),_=n(138),b=n(420),y=n(418),I=n(419),w=i.a.extend({channel:r.c({type:a.a}),connectionTimeout:r.c({type:Number,defaultValue:5e3}),init:function(e,t){if(this.__s._$2WW$init.call(this),!Object(m.b)(e,a.a))throw new g.a("MessagingChannel - A CW.ChannelProtocol is required");this.channel=e,t&&(this.connectionTimeout=t)},setListener:function(e,t){if(!Object(m.b)(t,e))throw new g.a("MessagingChannel: The specified protocol class target does not implement specified protocol");this._listenerProtocolMetadata=f.a.create(e,t)},setConnection:function(e,t){this._connectionProtocolMetadata=f.a.create(e,t)},start:function(){var e=this._listenerProtocolMetadata,t=this._connectionProtocolMetadata;if(!e&&!t)throw new g.a("Messaging channel has not been configured");var n=this.channel,i=this.connectionTimeout;e&&this._configureListener(n,e),t&&this._configureConnection(n,i,t)},stop:function(){var e=this._connection,t=this._connectionProtocolMetadata,n=this._connectionPendingPromises,i=this._listener,r=this._listenerProtocolMetadata;if(i&&(r||s.b("MessagingChannel listener exists without a corresponding protocol metadata"),this._unregisterListenerMethods(i,r),this._listener=void 0,this._listenerProtocolMetadata=void 0),e&&(t||s.b("MessagingChannel connection exists without a corresponding protocol metadata"),this._connection=void 0,this._connectionProtocolMetadata=void 0,this._connectionPendingPromises=void 0,n.size)){var a=Array.from(n),c=v.a.create({status:_.a.DISCONNECTED});return a.every(function(e){return e.resolve(c)}),y.a.every(a).then(function(e){return e&&e.length||0})}return o.a.resolve(0)},_constructRPCMethodName:function(e,t){if(!e)throw new g.a("MessagingUtils - no class name specified");if(!c.a(e))throw new g.a("MessagingUtils - class name specified is not a string");if(!t)throw new g.a("MessagingUtils - no method name specified");if(!c.a(t))throw new g.a("MessagingUtils - method name specified is not a string");return e+"-"+t},_createJsonRpcListener:function(e){if(!e)throw new g.a("MessagingChannel: _createJsonRpcListener - A CW.ChannelProtocol is required");return I.a.create({channel:e})},_createJsonRpcCaller:function(e){if(!e)throw new g.a("MessagingChannel: _createJsonRpcCaller - A CW.ChannelProtocol is required");return l.a.create({channel:e})},_listenerProtocolMetadata:r.c({type:f.a}),_listener:r.c({type:I.a,strong:!0}),_connectionProtocolMetadata:r.c({type:f.a}),_connection:r.c({type:l.a,strong:!0}),_connectionPendingPromises:u.b(Set),_configureListener:function(e,t){this._listener=this._setupJsonRpcListener(e,t)},_configureConnection:function(e,t,n){this._connection=this._setupJsonRpcCaller(e,t,n)},_setupJsonRpcCaller:function(t,n,i){var r=this,a=this._connectionPendingPromises,c=i.protocolName,l=i.protocolMethodNames,u=i.protocolTarget,p=d.a(u),f=this._connection=this._createJsonRpcCaller(t),g=function(t){var i=r._constructRPCMethodName(c,t);u[t]=function(){for(var l=arguments.length,u=Array(l),d=0;d<l;d++)u[d]=arguments[d];r._connection||s.b("["+p+" => OUTBOUND] MesssgingChannel has no connection --\x3e '"+c+"."+t+"'");var g=o.a.create();a.add(g),f.callRemoteProcedure.apply(f,[i].concat(u)).then(function(e){g.resolve(v.a.deserialize(e))}).catch(function(e){g.resolve(v.a.createFromError(e))});var m=h.a(function(){g.resolve(v.a.create({status:_.a.TIMEOUT}))},n);return g.finally(function(){e.clearTimeout(m),a.delete(g)}),g}},m=l,b=Array.isArray(m),y=0;for(m=b?m:m[Symbol.iterator]();;){var I;if(b){if(y>=m.length)break;I=m[y++]}else{if((y=m.next()).done)break;I=y.value}g(I)}return f},_setupJsonRpcListener:function(e,t){var n=t.protocolName,i=t.protocolMethodNames,r=t.protocolTarget,a=(d.a(r),this._listener=this._createJsonRpcListener(e)),s=Object(b.a)(r,i),o=i,c=Array.isArray(o),l=0;for(o=c?o:o[Symbol.iterator]();;){var u;if(c){if(l>=o.length)break;u=o[l++]}else{if((l=o.next()).done)break;u=l.value}var h=u,f=this._constructRPCMethodName(n,h),m=s[h];if(!p.a(m))throw new g.a("Protocol method name "+h+" is not a Function");a.registerProcedure(f,s,h)}return a},_unregisterListenerMethods:function(e,t){var n=t.protocolName,i=t.protocolMethodNames,r=t.protocolTarget,a=(d.a(r),Object(b.a)(r,i)),o=i,c=Array.isArray(o),l=0;for(o=c?o:o[Symbol.iterator]();;){var u;if(c){if(l>=o.length)break;u=o[l++]}else{if((l=o.next()).done)break;u=l.value}var h=u,f=this._constructRPCMethodName(n,h),g=a[h];p.a(g)||s.b("Protocol method name "+h+" is not a Function"),e.unregisterProcedure(f)}},__superMap:{_$2WW$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"MessagingChannel"}})}).call(this,n(6))},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n(54),r={mixinDependencies:[n(804).a],name:"MessagingToUIChildProtocol",version:.1,didBecomeActive:i.a.define(),willResignActive:i.a.define(),willEnterForeground:i.a.define(),didEnterBackground:i.a.define(),didReceiveSyntheticBrowserEvent:i.a.define()}},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return d}),n.d(t,"b",function(){return h});var i=n(80),r=n(784),a=n(65),s=n(183),o=n(1128),c=n(776),l=n(496),u=(n(810),e.IntlPolyfill),d=i.a.extend({_region:null,_cachedNumberInstances:{},_cachedDateTimeInstances:{},_pendingRegionsToRegister:{},_is12HourTimeForRegions:{},localeMap:null,SHORT_DATE:{month:"numeric",day:"numeric",year:"numeric"},MEDIUM_DATE:{month:"short",day:"numeric",year:"numeric"},LONG_DATE:{month:"long",day:"numeric",year:"numeric"},FULL_DATE:{weekday:"long",month:"long",day:"numeric",year:"numeric"},SHORT_TIME:{hour:"numeric",minute:"numeric"},MEDIUM_TIME:{hour:"numeric",minute:"numeric",second:"numeric"},LONG_TIME:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},FULL_TIME:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"long"},registerRegionFormat:function(e){if(e&&u){u.__disableRegExpRestore();var t=e.locale.toLowerCase();this._region=t,this._pendingRegionsToRegister[t]=e}else r.b.info("No Intl polyfill or region rules. Skipping RegionFormatter initialization.")},loadFormattingRules:function(e,t,n){e.validate()||a.b("Invalid hostInfo",e.errors);var i=this.localeMap;i&&t in i&&(t=i[t]);var r=s.a.create(e.urlString),c=o.a.create(e.requestProperties);n||(n={});var u=n.fallbackRegionFormat||"en-us",d="maxRetries"in n?n.maxRetries:3,h=r.pathname;"/"!==h.charAt(h.length-1)&&(r.pathname=h+"/");var p=this._getISOnameForRegion(t);return r.pathname=r.pathname+p+".json",c.url=r,c.send().then(function(e){var n=e.body;return this.registerRegionFormat(n),l.a.create({regionFormat:t,formattingRules:n})}.bind(this)).catch(function(i){var r=t.split("-"),a=u;if(404===i.status&&t!==u&&r.length>1&&(r.pop(),a=r.join("-")),d>0)return a===u&&(n.maxRetries=d-1),this.loadFormattingRules(e,a,n);throw new Error("Cannot load region formatting rules from host.")}.bind(this))},getNumberFormatter:function(e){u||a.b("Cannot use Intl without polyfill."),this._registerPendingRegionFormats();var t=this._getCacheKeyForOptions(e),n=this._cachedNumberInstances[t];return n||(n=new u.NumberFormat(this._region,e),this._cachedNumberInstances[t]=n),n},getDateTimeFormatter:function(e){u||a.b("Cannot use Intl without polyfill."),this._registerPendingRegionFormats();var t=this._getCacheKeyForOptions(e),n=this._cachedDateTimeInstances[t];return n||(n=new u.DateTimeFormat(this._region,e),this._cachedDateTimeInstances[t]=n),n},is12HourTime:function(e){this._registerPendingRegionFormats();var t=e?e.toLowerCase():this._region;return this._is12HourTimeForRegions[t]},_registerPendingRegionFormats:function(){for(var e=this._pendingRegionsToRegister,t=Object.keys(e),n=0;n<t.length;n++){var i=e[t[n]];u.__addLocaleData(i);var r=i.locale.toLowerCase();this._is12HourTimeForRegions[r]=i.date.hour12,delete this._pendingRegionsToRegister[r]}},_getCacheKeyForOptions:function(e){return e?this._region+":"+c.a(e):this._region+":default"},_getISOnameForRegion:function(e){var t="",n=e?e.split("-"):["en","us"];return t=n[0].toLowerCase(),n.length>2?(t+="-"+this._capitalizeFirstLetter(n[1]),t+="-"+n[2].toUpperCase()):n.length>1&&(t+=n[1].length>2?"-"+this._capitalizeFirstLetter(n[1]):"-"+n[1].toUpperCase()),t},_capitalizeFirstLetter:function(e){var t=e.toLowerCase();return t.charAt(0).toUpperCase()+t.slice(1)},staticMembers:{__QUALIFIED_CLASS_NAME__:"RegionFormatter"}}),h=d.create({localeMap:{no:"nb","no-no":"nb-no"}})}).call(this,n(6))},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n(805),r=n(41),a={serializer:Object(r.c)(function(){return i.a.get("sharedInstance")}),serializedProperties:null,serialize:function(){var e=this.get("serializedProperties"),t=this.get("serializer"),n={};if(e)for(var i=0,r=e.length;i<r;i++){var a=e[i];n[a]=this.get(a)}return t.encode(n)},deserialize:function(e){return e?this.get("serializer").decode(e):null}}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n(1136);function r(e){var t=i.a.create(e).ranges();return Array.from(t).map(function(e){return[e.start,e.end]})}},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var i=n(142),r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=i.Reader,s=i.Writer,o=i.util,c=i.roots.default||(i.roots.default={}),l=c.CPLMomentSharePreviewData=function(){function e(e){if(this.previewImageData=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.previewImageData=o.emptyArray,e.prototype.keyAssetIdentifier="",e.prototype.cropRectString="",e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=s.create()),null!=e.previewImageData&&e.previewImageData.length)for(var n=0;n<e.previewImageData.length;++n)t.uint32(10).bytes(e.previewImageData[n]);return null!=e.keyAssetIdentifier&&e.hasOwnProperty("keyAssetIdentifier")&&t.uint32(18).string(e.keyAssetIdentifier),null!=e.cropRectString&&e.hasOwnProperty("cropRectString")&&t.uint32(26).string(e.cropRectString),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n=void 0===t?e.len:e.pos+t,i=new c.CPLMomentSharePreviewData;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:i.previewImageData&&i.previewImageData.length||(i.previewImageData=[]),i.previewImageData.push(e.bytes());break;case 2:i.keyAssetIdentifier=e.string();break;case 3:i.cropRectString=e.string();break;default:e.skipType(7&r)}}return i},e.decodeDelimited=function(e){return e instanceof a||(e=new a(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!==(void 0===e?"undefined":r(e))||null===e)return"object expected";if(null!=e.previewImageData&&e.hasOwnProperty("previewImageData")){if(!Array.isArray(e.previewImageData))return"previewImageData: array expected";for(var t=0;t<e.previewImageData.length;++t)if(!(e.previewImageData[t]&&"number"==typeof e.previewImageData[t].length||o.isString(e.previewImageData[t])))return"previewImageData: buffer[] expected"}return null!=e.keyAssetIdentifier&&e.hasOwnProperty("keyAssetIdentifier")&&!o.isString(e.keyAssetIdentifier)?"keyAssetIdentifier: string expected":null!=e.cropRectString&&e.hasOwnProperty("cropRectString")&&!o.isString(e.cropRectString)?"cropRectString: string expected":null},e.fromObject=function(e){if(e instanceof c.CPLMomentSharePreviewData)return e;var t=new c.CPLMomentSharePreviewData;if(e.previewImageData){if(!Array.isArray(e.previewImageData))throw TypeError(".CPLMomentSharePreviewData.previewImageData: array expected");t.previewImageData=[];for(var n=0;n<e.previewImageData.length;++n)"string"==typeof e.previewImageData[n]?o.base64.decode(e.previewImageData[n],t.previewImageData[n]=o.newBuffer(o.base64.length(e.previewImageData[n])),0):e.previewImageData[n].length&&(t.previewImageData[n]=e.previewImageData[n])}return null!=e.keyAssetIdentifier&&(t.keyAssetIdentifier=String(e.keyAssetIdentifier)),null!=e.cropRectString&&(t.cropRectString=String(e.cropRectString)),t},e.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.previewImageData=[]),t.defaults&&(n.keyAssetIdentifier="",n.cropRectString=""),e.previewImageData&&e.previewImageData.length){n.previewImageData=[];for(var i=0;i<e.previewImageData.length;++i)n.previewImageData[i]=t.bytes===String?o.base64.encode(e.previewImageData[i],0,e.previewImageData[i].length):t.bytes===Array?Array.prototype.slice.call(e.previewImageData[i]):e.previewImageData[i]}return null!=e.keyAssetIdentifier&&e.hasOwnProperty("keyAssetIdentifier")&&(n.keyAssetIdentifier=e.keyAssetIdentifier),null!=e.cropRectString&&e.hasOwnProperty("cropRectString")&&(n.cropRectString=e.cropRectString),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n(1195),r=n(1187),a=n(784),s=n(34),o=n(36),c=n(353).a.extend({iframe:Object(s.b)({set:function(e,t){return this._previousIFrame=t,e},didChange:function(e){var t=this._previousIFrame,n=this._iframeDidLoad;if(t&&e!==t&&(Object(i.a)(t,"load",n),this._iframeDidLoad=null),e&&!this.outgoingWindow){var a=this._iframeDidLoad=function(){this._iframeIsLoaded(),Object(i.a)(e,"load",this._iframeDidLoad),this._iframeDidLoad=null}.bind(this);Object(r.a)(e,"load",a)}}}),outgoingWindow:Object(s.b)({dependencies:["iframe","_iframeIsLoaded"],readOnly:!0,get:function(){var e=this.getPath("iframe.contentWindow");return e?{actualOutgoingWindow:e,postMessage:function(e,t){var n=this.actualOutgoingWindow;if(n.postMessage)return n.postMessage(e,t);a.b.warn("ChildWindowChannel: postMessage of "+e+" to detached iframe at "+t+" was ignored")}}:null}}),_iframeDidLoad:null,_iframeIsLoaded:Object(o.g)(),_previousIFrame:null,staticMembers:{__QUALIFIED_CLASS_NAME__:"ChildWindowChannel"}})},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n(1185),r=n(1177),a=n(784),s=n(65),o=n(140),c=n(287).a.extend({hasHandlerForProcedure:function(e){return Object(r.a)(u(e,this))},registerProcedure:function(e,t,n){!function(e,t,n,i){var r=i.channel,a=l.get(r);a||(a=new Map,l.set(r,a));var o=a.get(e);o&&Object(s.b)("A handler for `%{procedureName}` was already registered on this channel",{procedureName:e,registration:o}),a.set(e,{listener:i,target:t,handlerMethodName:n})}(e,t,n=n||e,this)},registerProcedures:function(e,t){for(var n=e.length,i=0;i<n;i++){var r=e[i];Array.isArray(r)?this.registerProcedure(r[0],t,r[1]):this.registerProcedure(r,t)}},unregisterProcedure:function(e){var t=this.channel,n=l.get(t);n&&n.get(e).listener===this&&(n.delete(e),0===n.size&&n.delete(t))},unregisterProcedures:function(e){var t=this;e.forEach(function(e){t.unregisterProcedure(e)})},unregisterAllProcedures:function(){var e=l.get(this.channel);if(e)for(var t=e.entries(),n=void 0;n=t.next().value;){var i=n[0];n[1].listener===this&&e.delete(i)}},shouldHandleMessage:function(e){var t=this;return(Array.isArray(e)?e:[e]).filter(function(e){return e&&Object(r.a)(e.jsonrpc)&&e.jsonrpc===t.messageFormatter.jsonRpcVersion&&Object(r.a)(e.method)}).length>0},handleMessage:function(e){var t=this,n=Array.isArray(e),a=n?e:[e],s=i.a.wrapFunction(d),c=this.messageFormatter,l=[],u={};return a.forEach(function(e){var n=e.id,i=s(e,t).then(function(e){u[n]=function(e,t,n){if(Object(r.a)(t))return e.generateResultMessageFor(t,n)}(c,n,e)}).catch(function(e){if(u[n]=h(c,n,e),!(e instanceof o.b))throw e});l.push(i)}),i.a.all(l).then(function(){return p(t,a,u,n)},function(e){throw p(t,a,u,n),e})},dispose:function(){this.unregisterAllProcedures(),this.__s._$2_Q$dispose.call(this)},__superMap:{_$2_Q$dispose:"dispose"},staticMembers:{__QUALIFIED_CLASS_NAME__:"JsonRpcListener"}}),l=new Map;function u(e,t){var n=l.get(t.channel);if(n){var i=n.get(e);if(i&&i.listener===t)return i}return null}function d(e,t){if(t.isDisposed)return new Promise(function(){});var n=e.method,i=e.params,s=void 0===i?[]:i;if(Object(r.a)(s)&&!Array.isArray(s)){var c="JSON-RPC calls in JavaScript cannot support `params` as an Object, only as an Array";throw a.b.error(c,e),new o.d(c,{message:e})}var l=u(n,t);if(!l)throw a.b.error("The JSON-RPC registration was not found",e,t),new o.e("The JSON-RPC registration was not found",{message:e,listener:t});var d=l.target;if(!d)throw a.b.error("The JSON-RPC target was not found",e,t),new o.e("The JSON-RPC target was not found",{message:e,listener:t});var h=d[l.handlerMethodName];if(!h)throw a.b.error("The JSON-RPC method was not found",e,t),new o.e("The JSON-RPC method was not found",{message:e,listener:t});return h.call.apply(h,[d].concat(s))}function h(e,t,n){if(Object(r.a)(t))return e.generateErrorMessageFor(t,n)}function p(e,t,n,i){var a=e.messageFormatter,s=[];if(t.forEach(function(e){var t=e.id;if(Object(r.a)(t)){var i=n[t];if(!i){var c=new o.c("The JSON-RPC call was part of a batch which failed due to a fatal error thrown by another call.");i=h(a,t,c)}s.push(i)}}),s.length>0){var c=i?s:s[0];e.channel.send(e.serializer.encode(c))}}},function(e,t,n){"use strict";function i(e,t){if(0===e.length)return Array.from(Array(t).keys());if(e.length===t)return[];for(var n=[],i=0,r=0;r<t;r++)r!==e[i]?n.push(r):i+=1;return n}n.d(t,"a",function(){return i})},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n(49),r=n(1185),a={mixinDependencies:[i.a],operationHandlers:i.b.define(),startup:function(){return r.a.resolve()}}},function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"a",function(){return c});var i=n(177),r=n(80),a=n(41),s=n(65),o=i.b("iCloudWeb.Data.CKDatabaseType",function(e){e("Public"),e("Private"),e("Shared")}),c=r.a.extend({environment:null,containerIdentifier:null,databaseType:null,partition:null,services:null,databaseInstance:a.c({readOnly:!0,get:function(){var e=this._databaseInstance;if(e)return e;var t=this.containerIdentifier,n=this.databaseType,i=window.CloudKit.getContainer(t);return n===o.Public?e=i.publicCloudDatabase:n===o.Private?e=i.privateCloudDatabase:n===o.Shared?e=i.sharedCloudDatabase:s.b("DatabaseSupport - Invalid database type: %{database}",{database:e}),this._databaseInstance=e}}),bootstrapConfiguration:a.c({readOnly:!0,get:function(){var e=this.partition,t={containers:[{containerIdentifier:this.containerIdentifier,environment:this.environment,privateDatabasePartition:e,publicDatabasePartition:e,sharedDatabasePartition:e}]},n=this.services;return n&&(t.services=n),t}}),init:function(e){var t=arguments;this.__s._$1VO$init.apply(this,t);var n=this.bootstrapConfiguration;window.CloudKit||s.b("CloudKit.js is missing"),window.CloudKit.configure(n)},_databaseInstance:null,__superMap:{_$1VO$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"CKDatabase"}})},function(e,t,n){"use strict";var i=n(123),r=n(179),a=n(191);function s(e){return e?{message:e.message,type:e.type,stack:function(e){if(!e||!Object(i.a)(e.stack))return null;var t=e.stack.trim().split("\n"),n=t.length;if(n>500){var r=n-500;t.splice(400,r,"… "+r+" lines truncated …")}return t.join("\n")}(e),lineNumber:function(e){if(!e)return null;if(e.lineNumber)return e.lineNumber;if(e.line)return e.line;if(Object(i.a)(e.stack)){var t=e.stack.split("\n")[1];if(Object(i.a)(t)){var n=t.split(":"),a=n[n.length-2],s=parseInt(a,10);if(Object(r.a)(s)&&!Number.isNaN(s))return s}}return null}(e),context:Object(a.a)(e.context)}:null}n.d(t,"a",function(){return s})},,,,,,function(e,t,n){n(1268),n(1269),n(1265),n(1262),n(1267),n(1266),n(1263),n(1260),n(1264),n(1261),n(1270),n(1271),n(1257),n(1258),n(1255),n(1254),n(568),n(771),e.exports=n(1124)},function(e,t,n){"use strict";n(569)},function(e,t,n){"use strict";(function(e){if(n(570),n(767),n(768),e._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");e._babelPolyfill=!0;var t="defineProperty";function i(e,n,i){e[n]||Object[t](e,n,{writable:!0,configurable:!0,value:i})}i(String.prototype,"padLeft","".padStart),i(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function(e){[][e]&&i(Array,e,Function.call.bind([][e]))})}).call(this,n(6))},function(e,t,n){n(571),n(573),n(574),n(575),n(576),n(577),n(578),n(579),n(580),n(581),n(582),n(583),n(584),n(585),n(586),n(587),n(589),n(590),n(591),n(592),n(593),n(594),n(595),n(596),n(597),n(598),n(599),n(600),n(601),n(602),n(603),n(604),n(605),n(606),n(607),n(608),n(609),n(610),n(611),n(612),n(613),n(614),n(615),n(616),n(617),n(618),n(619),n(620),n(621),n(622),n(623),n(624),n(625),n(626),n(627),n(628),n(629),n(630),n(631),n(632),n(633),n(634),n(635),n(636),n(637),n(638),n(639),n(640),n(641),n(642),n(643),n(644),n(645),n(646),n(647),n(648),n(649),n(651),n(652),n(654),n(655),n(656),n(657),n(658),n(659),n(660),n(662),n(663),n(664),n(665),n(666),n(667),n(668),n(669),n(670),n(671),n(672),n(673),n(674),n(389),n(675),n(676),n(458),n(677),n(678),n(679),n(680),n(681),n(461),n(463),n(464),n(682),n(683),n(684),n(685),n(686),n(687),n(688),n(689),n(690),n(691),n(692),n(693),n(694),n(695),n(696),n(697),n(698),n(699),n(700),n(701),n(702),n(703),n(704),n(705),n(706),n(707),n(708),n(709),n(710),n(711),n(712),n(713),n(714),n(715),n(716),n(717),n(718),n(719),n(720),n(721),n(722),n(723),n(724),n(725),n(726),n(727),n(728),n(729),n(730),n(731),n(732),n(733),n(734),n(735),n(736),n(737),n(738),n(739),n(740),n(741),n(742),n(743),n(744),n(745),n(746),n(747),n(748),n(749),n(750),n(751),n(752),n(753),n(754),n(755),n(756),n(757),n(758),n(759),n(760),n(761),n(762),n(763),n(764),n(765),n(766),e.exports=n(55)},function(e,t,n){"use strict";var i=n(15),r=n(48),a=n(26),s=n(3),o=n(44),c=n(214).KEY,l=n(18),u=n(293),d=n(254),h=n(231),p=n(24),f=n(441),g=n(369),m=n(572),v=n(296),_=n(14),b=n(19),y=n(51),I=n(60),w=n(230),S=n(234),C=n(444),O=n(52),A=n(27),E=n(232),T=O.f,M=A.f,D=C.f,L=i.Symbol,N=i.JSON,P=N&&N.stringify,R=p("_hidden"),x=p("toPrimitive"),F={}.propertyIsEnumerable,k=u("symbol-registry"),V=u("symbols"),j=u("op-symbols"),B=Object.prototype,U="function"==typeof L,W=i.QObject,G=!W||!W.prototype||!W.prototype.findChild,H=a&&l(function(){return 7!=S(M({},"a",{get:function(){return M(this,"a",{value:7}).a}})).a})?function(e,t,n){var i=T(B,t);i&&delete B[t],M(e,t,n),i&&e!==B&&M(B,t,i)}:M,$=function(e){var t=V[e]=S(L.prototype);return t._k=e,t},z=U&&"symbol"==typeof L.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof L},K=function(e,t,n){return e===B&&K(j,t,n),_(e),t=I(t,!0),_(n),r(V,t)?(n.enumerable?(r(e,R)&&e[R][t]&&(e[R][t]=!1),n=S(n,{enumerable:w(0,!1)})):(r(e,R)||M(e,R,w(1,{})),e[R][t]=!0),H(e,t,n)):M(e,t,n)},Q=function(e,t){_(e);for(var n,i=m(t=y(t)),r=0,a=i.length;a>r;)K(e,n=i[r++],t[n]);return e},q=function(e){var t=F.call(this,e=I(e,!0));return!(this===B&&r(V,e)&&!r(j,e))&&(!(t||!r(this,e)||!r(V,e)||r(this,R)&&this[R][e])||t)},Y=function(e,t){if(e=y(e),t=I(t,!0),e!==B||!r(V,t)||r(j,t)){var n=T(e,t);return!n||!r(V,t)||r(e,R)&&e[R][t]||(n.enumerable=!0),n}},Z=function(e){for(var t,n=D(y(e)),i=[],a=0;n.length>a;)r(V,t=n[a++])||t==R||t==c||i.push(t);return i},J=function(e){for(var t,n=e===B,i=D(n?j:y(e)),a=[],s=0;i.length>s;)!r(V,t=i[s++])||n&&!r(B,t)||a.push(V[t]);return a};U||(o((L=function(){if(this instanceof L)throw TypeError("Symbol is not a constructor!");var e=h(arguments.length>0?arguments[0]:void 0),t=function(n){this===B&&t.call(j,n),r(this,R)&&r(this[R],e)&&(this[R][e]=!1),H(this,e,w(1,n))};return a&&G&&H(B,e,{configurable:!0,set:t}),$(e)}).prototype,"toString",function(){return this._k}),O.f=Y,A.f=K,n(235).f=C.f=Z,n(275).f=q,n(295).f=J,a&&!n(215)&&o(B,"propertyIsEnumerable",q,!0),f.f=function(e){return $(p(e))}),s(s.G+s.W+s.F*!U,{Symbol:L});for(var X="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ee=0;X.length>ee;)p(X[ee++]);for(var te=E(p.store),ne=0;te.length>ne;)g(te[ne++]);s(s.S+s.F*!U,"Symbol",{for:function(e){return r(k,e+="")?k[e]:k[e]=L(e)},keyFor:function(e){if(!z(e))throw TypeError(e+" is not a symbol!");for(var t in k)if(k[t]===e)return t},useSetter:function(){G=!0},useSimple:function(){G=!1}}),s(s.S+s.F*!U,"Object",{create:function(e,t){return void 0===t?S(e):Q(S(e),t)},defineProperty:K,defineProperties:Q,getOwnPropertyDescriptor:Y,getOwnPropertyNames:Z,getOwnPropertySymbols:J}),N&&s(s.S+s.F*(!U||l(function(){var e=L();return"[null]"!=P([e])||"{}"!=P({a:e})||"{}"!=P(Object(e))})),"JSON",{stringify:function(e){for(var t,n,i=[e],r=1;arguments.length>r;)i.push(arguments[r++]);if(n=t=i[1],(b(t)||void 0!==e)&&!z(e))return v(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!z(t))return t}),i[1]=t,P.apply(N,i)}}),L.prototype[x]||n(43)(L.prototype,x,L.prototype.valueOf),d(L,"Symbol"),d(Math,"Math",!0),d(i.JSON,"JSON",!0)},function(e,t,n){var i=n(232),r=n(295),a=n(275);e.exports=function(e){var t=i(e),n=r.f;if(n)for(var s,o=n(e),c=a.f,l=0;o.length>l;)c.call(e,s=o[l++])&&t.push(s);return t}},function(e,t,n){var i=n(3);i(i.S,"Object",{create:n(234)})},function(e,t,n){var i=n(3);i(i.S+i.F*!n(26),"Object",{defineProperty:n(27).f})},function(e,t,n){var i=n(3);i(i.S+i.F*!n(26),"Object",{defineProperties:n(443)})},function(e,t,n){var i=n(51),r=n(52).f;n(63)("getOwnPropertyDescriptor",function(){return function(e,t){return r(i(e),t)}})},function(e,t,n){var i=n(31),r=n(53);n(63)("getPrototypeOf",function(){return function(e){return r(i(e))}})},function(e,t,n){var i=n(31),r=n(232);n(63)("keys",function(){return function(e){return r(i(e))}})},function(e,t,n){n(63)("getOwnPropertyNames",function(){return n(444).f})},function(e,t,n){var i=n(19),r=n(214).onFreeze;n(63)("freeze",function(e){return function(t){return e&&i(t)?e(r(t)):t}})},function(e,t,n){var i=n(19),r=n(214).onFreeze;n(63)("seal",function(e){return function(t){return e&&i(t)?e(r(t)):t}})},function(e,t,n){var i=n(19),r=n(214).onFreeze;n(63)("preventExtensions",function(e){return function(t){return e&&i(t)?e(r(t)):t}})},function(e,t,n){var i=n(19);n(63)("isFrozen",function(e){return function(t){return!i(t)||!!e&&e(t)}})},function(e,t,n){var i=n(19);n(63)("isSealed",function(e){return function(t){return!i(t)||!!e&&e(t)}})},function(e,t,n){var i=n(19);n(63)("isExtensible",function(e){return function(t){return!!i(t)&&(!e||e(t))}})},function(e,t,n){var i=n(3);i(i.S+i.F,"Object",{assign:n(445)})},function(e,t,n){var i=n(3);i(i.S,"Object",{is:n(588)})},function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},function(e,t,n){var i=n(3);i(i.S,"Object",{setPrototypeOf:n(373).set})},function(e,t,n){"use strict";var i=n(276),r={};r[n(24)("toStringTag")]="z",r+""!="[object z]"&&n(44)(Object.prototype,"toString",function(){return"[object "+i(this)+"]"},!0)},function(e,t,n){var i=n(3);i(i.P,"Function",{bind:n(446)})},function(e,t,n){var i=n(27).f,r=Function.prototype,a=/^\s*function ([^ (]*)/;"name"in r||n(26)&&i(r,"name",{configurable:!0,get:function(){try{return(""+this).match(a)[1]}catch(e){return""}}})},function(e,t,n){"use strict";var i=n(19),r=n(53),a=n(24)("hasInstance"),s=Function.prototype;a in s||n(27).f(s,a,{value:function(e){if("function"!=typeof this||!i(e))return!1;if(!i(this.prototype))return e instanceof this;for(;e=r(e);)if(this.prototype===e)return!0;return!1}})},function(e,t,n){var i=n(3),r=n(448);i(i.G+i.F*(parseInt!=r),{parseInt:r})},function(e,t,n){var i=n(3),r=n(449);i(i.G+i.F*(parseFloat!=r),{parseFloat:r})},function(e,t,n){"use strict";var i=n(15),r=n(48),a=n(57),s=n(375),o=n(60),c=n(18),l=n(235).f,u=n(52).f,d=n(27).f,h=n(255).trim,p=i.Number,f=p,g=p.prototype,m="Number"==a(n(234)(g)),v="trim"in String.prototype,_=function(e){var t=o(e,!1);if("string"==typeof t&&t.length>2){var n,i,r,a=(t=v?t.trim():h(t,3)).charCodeAt(0);if(43===a||45===a){if(88===(n=t.charCodeAt(2))||120===n)return NaN}else if(48===a){switch(t.charCodeAt(1)){case 66:case 98:i=2,r=49;break;case 79:case 111:i=8,r=55;break;default:return+t}for(var s,c=t.slice(2),l=0,u=c.length;l<u;l++)if((s=c.charCodeAt(l))<48||s>r)return NaN;return parseInt(c,i)}}return+t};if(!p(" 0o1")||!p("0b1")||p("+0x1")){p=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof p&&(m?c(function(){g.valueOf.call(n)}):"Number"!=a(n))?s(new f(_(t)),n,p):_(t)};for(var b,y=n(26)?l(f):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),I=0;y.length>I;I++)r(f,b=y[I])&&!r(p,b)&&d(p,b,u(f,b));p.prototype=g,g.constructor=p,n(44)(i,"Number",p)}},function(e,t,n){"use strict";var i=n(3),r=n(62),a=n(450),s=n(376),o=1..toFixed,c=Math.floor,l=[0,0,0,0,0,0],u="Number.toFixed: incorrect invocation!",d=function(e,t){for(var n=-1,i=t;++n<6;)i+=e*l[n],l[n]=i%1e7,i=c(i/1e7)},h=function(e){for(var t=6,n=0;--t>=0;)n+=l[t],l[t]=c(n/e),n=n%e*1e7},p=function(){for(var e=6,t="";--e>=0;)if(""!==t||0===e||0!==l[e]){var n=String(l[e]);t=""===t?n:t+s.call("0",7-n.length)+n}return t},f=function(e,t,n){return 0===t?n:t%2==1?f(e,t-1,n*e):f(e*e,t/2,n)};i(i.P+i.F*(!!o&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!n(18)(function(){o.call({})})),"Number",{toFixed:function(e){var t,n,i,o,c=a(this,u),l=r(e),g="",m="0";if(l<0||l>20)throw RangeError(u);if(c!=c)return"NaN";if(c<=-1e21||c>=1e21)return String(c);if(c<0&&(g="-",c=-c),c>1e-21)if(n=(t=function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t}(c*f(2,69,1))-69)<0?c*f(2,-t,1):c/f(2,t,1),n*=4503599627370496,(t=52-t)>0){for(d(0,n),i=l;i>=7;)d(1e7,0),i-=7;for(d(f(10,i,1),0),i=t-1;i>=23;)h(1<<23),i-=23;h(1<<i),d(1,1),h(2),m=p()}else d(0,n),d(1<<-t,0),m=p()+s.call("0",l);return l>0?g+((o=m.length)<=l?"0."+s.call("0",l-o)+m:m.slice(0,o-l)+"."+m.slice(o-l)):g+m}})},function(e,t,n){"use strict";var i=n(3),r=n(18),a=n(450),s=1..toPrecision;i(i.P+i.F*(r(function(){return"1"!==s.call(1,void 0)})||!r(function(){s.call({})})),"Number",{toPrecision:function(e){var t=a(this,"Number#toPrecision: incorrect invocation!");return void 0===e?s.call(t):s.call(t,e)}})},function(e,t,n){var i=n(3);i(i.S,"Number",{EPSILON:Math.pow(2,-52)})},function(e,t,n){var i=n(3),r=n(15).isFinite;i(i.S,"Number",{isFinite:function(e){return"number"==typeof e&&r(e)}})},function(e,t,n){var i=n(3);i(i.S,"Number",{isInteger:n(451)})},function(e,t,n){var i=n(3);i(i.S,"Number",{isNaN:function(e){return e!=e}})},function(e,t,n){var i=n(3),r=n(451),a=Math.abs;i(i.S,"Number",{isSafeInteger:function(e){return r(e)&&a(e)<=9007199254740991}})},function(e,t,n){var i=n(3);i(i.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(e,t,n){var i=n(3);i(i.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(e,t,n){var i=n(3),r=n(449);i(i.S+i.F*(Number.parseFloat!=r),"Number",{parseFloat:r})},function(e,t,n){var i=n(3),r=n(448);i(i.S+i.F*(Number.parseInt!=r),"Number",{parseInt:r})},function(e,t,n){var i=n(3),r=n(452),a=Math.sqrt,s=Math.acosh;i(i.S+i.F*!(s&&710==Math.floor(s(Number.MAX_VALUE))&&s(1/0)==1/0),"Math",{acosh:function(e){return(e=+e)<1?NaN:e>94906265.62425156?Math.log(e)+Math.LN2:r(e-1+a(e-1)*a(e+1))}})},function(e,t,n){var i=n(3),r=Math.asinh;i(i.S+i.F*!(r&&1/r(0)>0),"Math",{asinh:function e(t){return isFinite(t=+t)&&0!=t?t<0?-e(-t):Math.log(t+Math.sqrt(t*t+1)):t}})},function(e,t,n){var i=n(3),r=Math.atanh;i(i.S+i.F*!(r&&1/r(-0)<0),"Math",{atanh:function(e){return 0==(e=+e)?e:Math.log((1+e)/(1-e))/2}})},function(e,t,n){var i=n(3),r=n(377);i(i.S,"Math",{cbrt:function(e){return r(e=+e)*Math.pow(Math.abs(e),1/3)}})},function(e,t,n){var i=n(3);i(i.S,"Math",{clz32:function(e){return(e>>>=0)?31-Math.floor(Math.log(e+.5)*Math.LOG2E):32}})},function(e,t,n){var i=n(3),r=Math.exp;i(i.S,"Math",{cosh:function(e){return(r(e=+e)+r(-e))/2}})},function(e,t,n){var i=n(3),r=n(378);i(i.S+i.F*(r!=Math.expm1),"Math",{expm1:r})},function(e,t,n){var i=n(3);i(i.S,"Math",{fround:n(453)})},function(e,t,n){var i=n(3),r=Math.abs;i(i.S,"Math",{hypot:function(e,t){for(var n,i,a=0,s=0,o=arguments.length,c=0;s<o;)c<(n=r(arguments[s++]))?(a=a*(i=c/n)*i+1,c=n):a+=n>0?(i=n/c)*i:n;return c===1/0?1/0:c*Math.sqrt(a)}})},function(e,t,n){var i=n(3),r=Math.imul;i(i.S+i.F*n(18)(function(){return-5!=r(4294967295,5)||2!=r.length}),"Math",{imul:function(e,t){var n=+e,i=+t,r=65535&n,a=65535&i;return 0|r*a+((65535&n>>>16)*a+r*(65535&i>>>16)<<16>>>0)}})},function(e,t,n){var i=n(3);i(i.S,"Math",{log10:function(e){return Math.log(e)*Math.LOG10E}})},function(e,t,n){var i=n(3);i(i.S,"Math",{log1p:n(452)})},function(e,t,n){var i=n(3);i(i.S,"Math",{log2:function(e){return Math.log(e)/Math.LN2}})},function(e,t,n){var i=n(3);i(i.S,"Math",{sign:n(377)})},function(e,t,n){var i=n(3),r=n(378),a=Math.exp;i(i.S+i.F*n(18)(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function(e){return Math.abs(e=+e)<1?(r(e)-r(-e))/2:(a(e-1)-a(-e-1))*(Math.E/2)}})},function(e,t,n){var i=n(3),r=n(378),a=Math.exp;i(i.S,"Math",{tanh:function(e){var t=r(e=+e),n=r(-e);return t==1/0?1:n==1/0?-1:(t-n)/(a(e)+a(-e))}})},function(e,t,n){var i=n(3);i(i.S,"Math",{trunc:function(e){return(e>0?Math.floor:Math.ceil)(e)}})},function(e,t,n){var i=n(3),r=n(233),a=String.fromCharCode,s=String.fromCodePoint;i(i.S+i.F*(!!s&&1!=s.length),"String",{fromCodePoint:function(e){for(var t,n=[],i=arguments.length,s=0;i>s;){if(t=+arguments[s++],r(t,1114111)!==t)throw RangeError(t+" is not a valid code point");n.push(t<65536?a(t):a(55296+((t-=65536)>>10),t%1024+56320))}return n.join("")}})},function(e,t,n){var i=n(3),r=n(51),a=n(28);i(i.S,"String",{raw:function(e){for(var t=r(e.raw),n=a(t.length),i=arguments.length,s=[],o=0;n>o;)s.push(String(t[o++])),o<i&&s.push(String(arguments[o]));return s.join("")}})},function(e,t,n){"use strict";n(255)("trim",function(e){return function(){return e(this,3)}})},function(e,t,n){"use strict";var i=n(379)(!0);n(380)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=i(t,n),this._i+=e.length,{value:e,done:!1})})},function(e,t,n){"use strict";var i=n(3),r=n(379)(!1);i(i.P,"String",{codePointAt:function(e){return r(this,e)}})},function(e,t,n){"use strict";var i=n(3),r=n(28),a=n(382),s="".endsWith;i(i.P+i.F*n(383)("endsWith"),"String",{endsWith:function(e){var t=a(this,e,"endsWith"),n=arguments.length>1?arguments[1]:void 0,i=r(t.length),o=void 0===n?i:Math.min(r(n),i),c=String(e);return s?s.call(t,c,o):t.slice(o-c.length,o)===c}})},function(e,t,n){"use strict";var i=n(3),r=n(382);i(i.P+i.F*n(383)("includes"),"String",{includes:function(e){return!!~r(this,e,"includes").indexOf(e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){var i=n(3);i(i.P,"String",{repeat:n(376)})},function(e,t,n){"use strict";var i=n(3),r=n(28),a=n(382),s="".startsWith;i(i.P+i.F*n(383)("startsWith"),"String",{startsWith:function(e){var t=a(this,e,"startsWith"),n=r(Math.min(arguments.length>1?arguments[1]:void 0,t.length)),i=String(e);return s?s.call(t,i,n):t.slice(n,n+i.length)===i}})},function(e,t,n){"use strict";n(45)("anchor",function(e){return function(t){return e(this,"a","name",t)}})},function(e,t,n){"use strict";n(45)("big",function(e){return function(){return e(this,"big","","")}})},function(e,t,n){"use strict";n(45)("blink",function(e){return function(){return e(this,"blink","","")}})},function(e,t,n){"use strict";n(45)("bold",function(e){return function(){return e(this,"b","","")}})},function(e,t,n){"use strict";n(45)("fixed",function(e){return function(){return e(this,"tt","","")}})},function(e,t,n){"use strict";n(45)("fontcolor",function(e){return function(t){return e(this,"font","color",t)}})},function(e,t,n){"use strict";n(45)("fontsize",function(e){return function(t){return e(this,"font","size",t)}})},function(e,t,n){"use strict";n(45)("italics",function(e){return function(){return e(this,"i","","")}})},function(e,t,n){"use strict";n(45)("link",function(e){return function(t){return e(this,"a","href",t)}})},function(e,t,n){"use strict";n(45)("small",function(e){return function(){return e(this,"small","","")}})},function(e,t,n){"use strict";n(45)("strike",function(e){return function(){return e(this,"strike","","")}})},function(e,t,n){"use strict";n(45)("sub",function(e){return function(){return e(this,"sub","","")}})},function(e,t,n){"use strict";n(45)("sup",function(e){return function(){return e(this,"sup","","")}})},function(e,t,n){var i=n(3);i(i.S,"Date",{now:function(){return(new Date).getTime()}})},function(e,t,n){"use strict";var i=n(3),r=n(31),a=n(60);i(i.P+i.F*n(18)(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(e){var t=r(this),n=a(t);return"number"!=typeof n||isFinite(n)?t.toISOString():null}})},function(e,t,n){var i=n(3),r=n(650);i(i.P+i.F*(Date.prototype.toISOString!==r),"Date",{toISOString:r})},function(e,t,n){"use strict";var i=n(18),r=Date.prototype.getTime,a=Date.prototype.toISOString,s=function(e){return e>9?e:"0"+e};e.exports=i(function(){return"0385-07-25T07:06:39.999Z"!=a.call(new Date(-5e13-1))})||!i(function(){a.call(new Date(NaN))})?function(){if(!isFinite(r.call(this)))throw RangeError("Invalid time value");var e=this,t=e.getUTCFullYear(),n=e.getUTCMilliseconds(),i=t<0?"-":t>9999?"+":"";return i+("00000"+Math.abs(t)).slice(i?-6:-4)+"-"+s(e.getUTCMonth()+1)+"-"+s(e.getUTCDate())+"T"+s(e.getUTCHours())+":"+s(e.getUTCMinutes())+":"+s(e.getUTCSeconds())+"."+(n>99?n:"0"+s(n))+"Z"}:a},function(e,t,n){var i=Date.prototype,r=i.toString,a=i.getTime;new Date(NaN)+""!="Invalid Date"&&n(44)(i,"toString",function(){var e=a.call(this);return e==e?r.call(this):"Invalid Date"})},function(e,t,n){var i=n(24)("toPrimitive"),r=Date.prototype;i in r||n(43)(r,i,n(653))},function(e,t,n){"use strict";var i=n(14),r=n(60);e.exports=function(e){if("string"!==e&&"number"!==e&&"default"!==e)throw TypeError("Incorrect hint");return r(i(this),"number"!=e)}},function(e,t,n){var i=n(3);i(i.S,"Array",{isArray:n(296)})},function(e,t,n){"use strict";var i=n(56),r=n(3),a=n(31),s=n(454),o=n(384),c=n(28),l=n(385),u=n(386);r(r.S+r.F*!n(298)(function(e){Array.from(e)}),"Array",{from:function(e){var t,n,r,d,h=a(e),p="function"==typeof this?this:Array,f=arguments.length,g=f>1?arguments[1]:void 0,m=void 0!==g,v=0,_=u(h);if(m&&(g=i(g,f>2?arguments[2]:void 0,2)),void 0==_||p==Array&&o(_))for(n=new p(t=c(h.length));t>v;v++)l(n,v,m?g(h[v],v):h[v]);else for(d=_.call(h),n=new p;!(r=d.next()).done;v++)l(n,v,m?s(d,g,[r.value,v],!0):r.value);return n.length=v,n}})},function(e,t,n){"use strict";var i=n(3),r=n(385);i(i.S+i.F*n(18)(function(){function e(){}return!(Array.of.call(e)instanceof e)}),"Array",{of:function(){for(var e=0,t=arguments.length,n=new("function"==typeof this?this:Array)(t);t>e;)r(n,e,arguments[e++]);return n.length=t,n}})},function(e,t,n){"use strict";var i=n(3),r=n(51),a=[].join;i(i.P+i.F*(n(274)!=Object||!n(58)(a)),"Array",{join:function(e){return a.call(r(this),void 0===e?",":e)}})},function(e,t,n){"use strict";var i=n(3),r=n(372),a=n(57),s=n(233),o=n(28),c=[].slice;i(i.P+i.F*n(18)(function(){r&&c.call(r)}),"Array",{slice:function(e,t){var n=o(this.length),i=a(this);if(t=void 0===t?n:t,"Array"==i)return c.call(this,e,t);for(var r=s(e,n),l=s(t,n),u=o(l-r),d=new Array(u),h=0;h<u;h++)d[h]="String"==i?this.charAt(r+h):this[r+h];return d}})},function(e,t,n){"use strict";var i=n(3),r=n(35),a=n(31),s=n(18),o=[].sort,c=[1,2,3];i(i.P+i.F*(s(function(){c.sort(void 0)})||!s(function(){c.sort(null)})||!n(58)(o)),"Array",{sort:function(e){return void 0===e?o.call(a(this)):o.call(a(this),r(e))}})},function(e,t,n){"use strict";var i=n(3),r=n(64)(0),a=n(58)([].forEach,!0);i(i.P+i.F*!a,"Array",{forEach:function(e){return r(this,e,arguments[1])}})},function(e,t,n){var i=n(19),r=n(296),a=n(24)("species");e.exports=function(e){var t;return r(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!r(t.prototype)||(t=void 0),i(t)&&null===(t=t[a])&&(t=void 0)),void 0===t?Array:t}},function(e,t,n){"use strict";var i=n(3),r=n(64)(1);i(i.P+i.F*!n(58)([].map,!0),"Array",{map:function(e){return r(this,e,arguments[1])}})},function(e,t,n){"use strict";var i=n(3),r=n(64)(2);i(i.P+i.F*!n(58)([].filter,!0),"Array",{filter:function(e){return r(this,e,arguments[1])}})},function(e,t,n){"use strict";var i=n(3),r=n(64)(3);i(i.P+i.F*!n(58)([].some,!0),"Array",{some:function(e){return r(this,e,arguments[1])}})},function(e,t,n){"use strict";var i=n(3),r=n(64)(4);i(i.P+i.F*!n(58)([].every,!0),"Array",{every:function(e){return r(this,e,arguments[1])}})},function(e,t,n){"use strict";var i=n(3),r=n(455);i(i.P+i.F*!n(58)([].reduce,!0),"Array",{reduce:function(e){return r(this,e,arguments.length,arguments[1],!1)}})},function(e,t,n){"use strict";var i=n(3),r=n(455);i(i.P+i.F*!n(58)([].reduceRight,!0),"Array",{reduceRight:function(e){return r(this,e,arguments.length,arguments[1],!0)}})},function(e,t,n){"use strict";var i=n(3),r=n(294)(!1),a=[].indexOf,s=!!a&&1/[1].indexOf(1,-0)<0;i(i.P+i.F*(s||!n(58)(a)),"Array",{indexOf:function(e){return s?a.apply(this,arguments)||0:r(this,e,arguments[1])}})},function(e,t,n){"use strict";var i=n(3),r=n(51),a=n(62),s=n(28),o=[].lastIndexOf,c=!!o&&1/[1].lastIndexOf(1,-0)<0;i(i.P+i.F*(c||!n(58)(o)),"Array",{lastIndexOf:function(e){if(c)return o.apply(this,arguments)||0;var t=r(this),n=s(t.length),i=n-1;for(arguments.length>1&&(i=Math.min(i,a(arguments[1]))),i<0&&(i=n+i);i>=0;i--)if(i in t&&t[i]===e)return i||0;return-1}})},function(e,t,n){var i=n(3);i(i.P,"Array",{copyWithin:n(456)}),n(216)("copyWithin")},function(e,t,n){var i=n(3);i(i.P,"Array",{fill:n(388)}),n(216)("fill")},function(e,t,n){"use strict";var i=n(3),r=n(64)(5),a=!0;"find"in[]&&Array(1).find(function(){a=!1}),i(i.P+i.F*a,"Array",{find:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),n(216)("find")},function(e,t,n){"use strict";var i=n(3),r=n(64)(6),a="findIndex",s=!0;a in[]&&Array(1)[a](function(){s=!1}),i(i.P+i.F*s,"Array",{findIndex:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),n(216)(a)},function(e,t,n){n(236)("Array")},function(e,t,n){var i=n(15),r=n(375),a=n(27).f,s=n(235).f,o=n(297),c=n(299),l=i.RegExp,u=l,d=l.prototype,h=/a/g,p=/a/g,f=new l(h)!==h;if(n(26)&&(!f||n(18)(function(){return p[n(24)("match")]=!1,l(h)!=h||l(p)==p||"/a/i"!=l(h,"i")}))){l=function(e,t){var n=this instanceof l,i=o(e),a=void 0===t;return!n&&i&&e.constructor===l&&a?e:r(f?new u(i&&!a?e.source:e,t):u((i=e instanceof l)?e.source:e,i&&a?c.call(e):t),n?this:d,l)};for(var g=function(e){e in l||a(l,e,{configurable:!0,get:function(){return u[e]},set:function(t){u[e]=t}})},m=s(u),v=0;m.length>v;)g(m[v++]);d.constructor=l,l.prototype=d,n(44)(i,"RegExp",l)}n(236)("RegExp")},function(e,t,n){"use strict";n(458);var i=n(14),r=n(299),a=n(26),s=/./.toString,o=function(e){n(44)(RegExp.prototype,"toString",e,!0)};n(18)(function(){return"/a/b"!=s.call({source:"a",flags:"b"})})?o(function(){var e=i(this);return"/".concat(e.source,"/","flags"in e?e.flags:!a&&e instanceof RegExp?r.call(e):void 0)}):"toString"!=s.name&&o(function(){return s.call(this)})},function(e,t,n){n(300)("match",1,function(e,t,n){return[function(n){"use strict";var i=e(this),r=void 0==n?void 0:n[t];return void 0!==r?r.call(n,i):new RegExp(n)[t](String(i))},n]})},function(e,t,n){n(300)("replace",2,function(e,t,n){return[function(i,r){"use strict";var a=e(this),s=void 0==i?void 0:i[t];return void 0!==s?s.call(i,a,r):n.call(String(a),i,r)},n]})},function(e,t,n){n(300)("search",1,function(e,t,n){return[function(n){"use strict";var i=e(this),r=void 0==n?void 0:n[t];return void 0!==r?r.call(n,i):new RegExp(n)[t](String(i))},n]})},function(e,t,n){n(300)("split",2,function(e,t,i){"use strict";var r=n(297),a=i,s=[].push;if("c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length){var o=void 0===/()??/.exec("")[1];i=function(e,t){var n=String(this);if(void 0===e&&0===t)return[];if(!r(e))return a.call(n,e,t);var i,c,l,u,d,h=[],p=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),f=0,g=void 0===t?4294967295:t>>>0,m=new RegExp(e.source,p+"g");for(o||(i=new RegExp("^"+m.source+"$(?!\\s)",p));(c=m.exec(n))&&!((l=c.index+c[0].length)>f&&(h.push(n.slice(f,c.index)),!o&&c.length>1&&c[0].replace(i,function(){for(d=1;d<arguments.length-2;d++)void 0===arguments[d]&&(c[d]=void 0)}),c.length>1&&c.index<n.length&&s.apply(h,c.slice(1)),u=c[0].length,f=l,h.length>=g));)m.lastIndex===c.index&&m.lastIndex++;return f===n.length?!u&&m.test("")||h.push(""):h.push(n.slice(f)),h.length>g?h.slice(0,g):h}}else"0".split(void 0,0).length&&(i=function(e,t){return void 0===e&&0===t?[]:a.call(this,e,t)});return[function(n,r){var a=e(this),s=void 0==n?void 0:n[t];return void 0!==s?s.call(n,a,r):i.call(String(a),n,r)},i]})},function(e,t,n){"use strict";var i,r,a,s,o=n(215),c=n(15),l=n(56),u=n(276),d=n(3),h=n(19),p=n(35),f=n(237),g=n(238),m=n(301),v=n(390).set,_=n(391)(),b=n(392),y=n(459),I=n(302),w=n(460),S=c.TypeError,C=c.process,O=C&&C.versions,A=O&&O.v8||"",E=c.Promise,T="process"==u(C),M=function(){},D=r=b.f,L=!!function(){try{var e=E.resolve(1),t=(e.constructor={})[n(24)("species")]=function(e){e(M,M)};return(T||"function"==typeof PromiseRejectionEvent)&&e.then(M)instanceof t&&0!==A.indexOf("6.6")&&-1===I.indexOf("Chrome/66")}catch(e){}}(),N=function(e){var t;return!(!h(e)||"function"!=typeof(t=e.then))&&t},P=function(e,t){if(!e._n){e._n=!0;var n=e._c;_(function(){for(var i=e._v,r=1==e._s,a=0,s=function(t){var n,a,s,o=r?t.ok:t.fail,c=t.resolve,l=t.reject,u=t.domain;try{o?(r||(2==e._h&&F(e),e._h=1),!0===o?n=i:(u&&u.enter(),n=o(i),u&&(u.exit(),s=!0)),n===t.promise?l(S("Promise-chain cycle")):(a=N(n))?a.call(n,c,l):c(n)):l(i)}catch(e){u&&!s&&u.exit(),l(e)}};n.length>a;)s(n[a++]);e._c=[],e._n=!1,t&&!e._h&&R(e)})}},R=function(e){v.call(c,function(){var t,n,i,r=e._v,a=x(e);if(a&&(t=y(function(){T?C.emit("unhandledRejection",r,e):(n=c.onunhandledrejection)?n({promise:e,reason:r}):(i=c.console)&&i.error&&i.error("Unhandled promise rejection",r)}),e._h=T||x(e)?2:1),e._a=void 0,a&&t.e)throw t.v})},x=function(e){return 1!==e._h&&0===(e._a||e._c).length},F=function(e){v.call(c,function(){var t;T?C.emit("rejectionHandled",e):(t=c.onrejectionhandled)&&t({promise:e,reason:e._v})})},k=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),P(t,!0))},V=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw S("Promise can't be resolved itself");(t=N(e))?_(function(){var i={_w:n,_d:!1};try{t.call(e,l(V,i,1),l(k,i,1))}catch(e){k.call(i,e)}}):(n._v=e,n._s=1,P(n,!1))}catch(e){k.call({_w:n,_d:!1},e)}}};L||(E=function(e){f(this,E,"Promise","_h"),p(e),i.call(this);try{e(l(V,this,1),l(k,this,1))}catch(e){k.call(this,e)}},(i=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(239)(E.prototype,{then:function(e,t){var n=D(m(this,E));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=T?C.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&P(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),a=function(){var e=new i;this.promise=e,this.resolve=l(V,e,1),this.reject=l(k,e,1)},b.f=D=function(e){return e===E||e===s?new a(e):r(e)}),d(d.G+d.W+d.F*!L,{Promise:E}),n(254)(E,"Promise"),n(236)("Promise"),s=n(55).Promise,d(d.S+d.F*!L,"Promise",{reject:function(e){var t=D(this);return(0,t.reject)(e),t.promise}}),d(d.S+d.F*(o||!L),"Promise",{resolve:function(e){return w(o&&this===s?E:this,e)}}),d(d.S+d.F*!(L&&n(298)(function(e){E.all(e).catch(M)})),"Promise",{all:function(e){var t=this,n=D(t),i=n.resolve,r=n.reject,a=y(function(){var n=[],a=0,s=1;g(e,!1,function(e){var o=a++,c=!1;n.push(void 0),s++,t.resolve(e).then(function(e){c||(c=!0,n[o]=e,--s||i(n))},r)}),--s||i(n)});return a.e&&r(a.v),n.promise},race:function(e){var t=this,n=D(t),i=n.reject,r=y(function(){g(e,!1,function(e){t.resolve(e).then(n.resolve,i)})});return r.e&&i(r.v),n.promise}})},function(e,t,n){"use strict";var i=n(465),r=n(257);n(303)("WeakSet",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return i.def(r(this,"WeakSet"),e,!0)}},i,!1,!0)},function(e,t,n){"use strict";var i=n(3),r=n(304),a=n(393),s=n(14),o=n(233),c=n(28),l=n(19),u=n(15).ArrayBuffer,d=n(301),h=a.ArrayBuffer,p=a.DataView,f=r.ABV&&u.isView,g=h.prototype.slice,m=r.VIEW;i(i.G+i.W+i.F*(u!==h),{ArrayBuffer:h}),i(i.S+i.F*!r.CONSTR,"ArrayBuffer",{isView:function(e){return f&&f(e)||l(e)&&m in e}}),i(i.P+i.U+i.F*n(18)(function(){return!new h(2).slice(1,void 0).byteLength}),"ArrayBuffer",{slice:function(e,t){if(void 0!==g&&void 0===t)return g.call(s(this),e);for(var n=s(this).byteLength,i=o(e,n),r=o(void 0===t?n:t,n),a=new(d(this,h))(c(r-i)),l=new p(this),u=new p(a),f=0;i<r;)u.setUint8(f++,l.getUint8(i++));return a}}),n(236)("ArrayBuffer")},function(e,t,n){var i=n(3);i(i.G+i.W+i.F*!n(304).ABV,{DataView:n(393).DataView})},function(e,t,n){n(116)("Int8",1,function(e){return function(t,n,i){return e(this,t,n,i)}})},function(e,t,n){n(116)("Uint8",1,function(e){return function(t,n,i){return e(this,t,n,i)}})},function(e,t,n){n(116)("Uint8",1,function(e){return function(t,n,i){return e(this,t,n,i)}},!0)},function(e,t,n){n(116)("Int16",2,function(e){return function(t,n,i){return e(this,t,n,i)}})},function(e,t,n){n(116)("Uint16",2,function(e){return function(t,n,i){return e(this,t,n,i)}})},function(e,t,n){n(116)("Int32",4,function(e){return function(t,n,i){return e(this,t,n,i)}})},function(e,t,n){n(116)("Uint32",4,function(e){return function(t,n,i){return e(this,t,n,i)}})},function(e,t,n){n(116)("Float32",4,function(e){return function(t,n,i){return e(this,t,n,i)}})},function(e,t,n){n(116)("Float64",8,function(e){return function(t,n,i){return e(this,t,n,i)}})},function(e,t,n){var i=n(3),r=n(35),a=n(14),s=(n(15).Reflect||{}).apply,o=Function.apply;i(i.S+i.F*!n(18)(function(){s(function(){})}),"Reflect",{apply:function(e,t,n){var i=r(e),c=a(n);return s?s(i,t,c):o.call(i,t,c)}})},function(e,t,n){var i=n(3),r=n(234),a=n(35),s=n(14),o=n(19),c=n(18),l=n(446),u=(n(15).Reflect||{}).construct,d=c(function(){function e(){}return!(u(function(){},[],e)instanceof e)}),h=!c(function(){u(function(){})});i(i.S+i.F*(d||h),"Reflect",{construct:function(e,t){a(e),s(t);var n=arguments.length<3?e:a(arguments[2]);if(h&&!d)return u(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var i=[null];return i.push.apply(i,t),new(l.apply(e,i))}var c=n.prototype,p=r(o(c)?c:Object.prototype),f=Function.apply.call(e,p,t);return o(f)?f:p}})},function(e,t,n){var i=n(27),r=n(3),a=n(14),s=n(60);r(r.S+r.F*n(18)(function(){Reflect.defineProperty(i.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(e,t,n){a(e),t=s(t,!0),a(n);try{return i.f(e,t,n),!0}catch(e){return!1}}})},function(e,t,n){var i=n(3),r=n(52).f,a=n(14);i(i.S,"Reflect",{deleteProperty:function(e,t){var n=r(a(e),t);return!(n&&!n.configurable)&&delete e[t]}})},function(e,t,n){"use strict";var i=n(3),r=n(14),a=function(e){this._t=r(e),this._i=0;var t,n=this._k=[];for(t in e)n.push(t)};n(381)(a,"Object",function(){var e,t=this._k;do{if(this._i>=t.length)return{value:void 0,done:!0}}while(!((e=t[this._i++])in this._t));return{value:e,done:!1}}),i(i.S,"Reflect",{enumerate:function(e){return new a(e)}})},function(e,t,n){var i=n(52),r=n(53),a=n(48),s=n(3),o=n(19),c=n(14);s(s.S,"Reflect",{get:function e(t,n){var s,l,u=arguments.length<3?t:arguments[2];return c(t)===u?t[n]:(s=i.f(t,n))?a(s,"value")?s.value:void 0!==s.get?s.get.call(u):void 0:o(l=r(t))?e(l,n,u):void 0}})},function(e,t,n){var i=n(52),r=n(3),a=n(14);r(r.S,"Reflect",{getOwnPropertyDescriptor:function(e,t){return i.f(a(e),t)}})},function(e,t,n){var i=n(3),r=n(53),a=n(14);i(i.S,"Reflect",{getPrototypeOf:function(e){return r(a(e))}})},function(e,t,n){var i=n(3);i(i.S,"Reflect",{has:function(e,t){return t in e}})},function(e,t,n){var i=n(3),r=n(14),a=Object.isExtensible;i(i.S,"Reflect",{isExtensible:function(e){return r(e),!a||a(e)}})},function(e,t,n){var i=n(3);i(i.S,"Reflect",{ownKeys:n(467)})},function(e,t,n){var i=n(3),r=n(14),a=Object.preventExtensions;i(i.S,"Reflect",{preventExtensions:function(e){r(e);try{return a&&a(e),!0}catch(e){return!1}}})},function(e,t,n){var i=n(27),r=n(52),a=n(53),s=n(48),o=n(3),c=n(230),l=n(14),u=n(19);o(o.S,"Reflect",{set:function e(t,n,o){var d,h,p=arguments.length<4?t:arguments[3],f=r.f(l(t),n);if(!f){if(u(h=a(t)))return e(h,n,o,p);f=c(0)}if(s(f,"value")){if(!1===f.writable||!u(p))return!1;if(d=r.f(p,n)){if(d.get||d.set||!1===d.writable)return!1;d.value=o,i.f(p,n,d)}else i.f(p,n,c(0,o));return!0}return void 0!==f.set&&(f.set.call(p,o),!0)}})},function(e,t,n){var i=n(3),r=n(373);r&&i(i.S,"Reflect",{setPrototypeOf:function(e,t){r.check(e,t);try{return r.set(e,t),!0}catch(e){return!1}}})},function(e,t,n){"use strict";var i=n(3),r=n(294)(!0);i(i.P,"Array",{includes:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),n(216)("includes")},function(e,t,n){"use strict";var i=n(3),r=n(468),a=n(31),s=n(28),o=n(35),c=n(387);i(i.P,"Array",{flatMap:function(e){var t,n,i=a(this);return o(e),t=s(i.length),n=c(i,0),r(n,i,i,t,0,1,e,arguments[1]),n}}),n(216)("flatMap")},function(e,t,n){"use strict";var i=n(3),r=n(468),a=n(31),s=n(28),o=n(62),c=n(387);i(i.P,"Array",{flatten:function(){var e=arguments[0],t=a(this),n=s(t.length),i=c(t,0);return r(i,t,t,n,0,void 0===e?1:o(e)),i}}),n(216)("flatten")},function(e,t,n){"use strict";var i=n(3),r=n(379)(!0);i(i.P,"String",{at:function(e){return r(this,e)}})},function(e,t,n){"use strict";var i=n(3),r=n(469),a=n(302);i(i.P+i.F*/Version\/10\.\d+(\.\d+)? Safari\//.test(a),"String",{padStart:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0,!0)}})},function(e,t,n){"use strict";var i=n(3),r=n(469),a=n(302);i(i.P+i.F*/Version\/10\.\d+(\.\d+)? Safari\//.test(a),"String",{padEnd:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0,!1)}})},function(e,t,n){"use strict";n(255)("trimLeft",function(e){return function(){return e(this,1)}},"trimStart")},function(e,t,n){"use strict";n(255)("trimRight",function(e){return function(){return e(this,2)}},"trimEnd")},function(e,t,n){"use strict";var i=n(3),r=n(61),a=n(28),s=n(297),o=n(299),c=RegExp.prototype,l=function(e,t){this._r=e,this._s=t};n(381)(l,"RegExp String",function(){var e=this._r.exec(this._s);return{value:e,done:null===e}}),i(i.P,"String",{matchAll:function(e){if(r(this),!s(e))throw TypeError(e+" is not a regexp!");var t=String(this),n="flags"in c?String(e.flags):o.call(e),i=new RegExp(e.source,~n.indexOf("g")?n:"g"+n);return i.lastIndex=a(e.lastIndex),new l(i,t)}})},function(e,t,n){n(369)("asyncIterator")},function(e,t,n){n(369)("observable")},function(e,t,n){var i=n(3),r=n(467),a=n(51),s=n(52),o=n(385);i(i.S,"Object",{getOwnPropertyDescriptors:function(e){for(var t,n,i=a(e),c=s.f,l=r(i),u={},d=0;l.length>d;)void 0!==(n=c(i,t=l[d++]))&&o(u,t,n);return u}})},function(e,t,n){var i=n(3),r=n(470)(!1);i(i.S,"Object",{values:function(e){return r(e)}})},function(e,t,n){var i=n(3),r=n(470)(!0);i(i.S,"Object",{entries:function(e){return r(e)}})},function(e,t,n){"use strict";var i=n(3),r=n(31),a=n(35),s=n(27);n(26)&&i(i.P+n(305),"Object",{__defineGetter__:function(e,t){s.f(r(this),e,{get:a(t),enumerable:!0,configurable:!0})}})},function(e,t,n){"use strict";var i=n(3),r=n(31),a=n(35),s=n(27);n(26)&&i(i.P+n(305),"Object",{__defineSetter__:function(e,t){s.f(r(this),e,{set:a(t),enumerable:!0,configurable:!0})}})},function(e,t,n){"use strict";var i=n(3),r=n(31),a=n(60),s=n(53),o=n(52).f;n(26)&&i(i.P+n(305),"Object",{__lookupGetter__:function(e){var t,n=r(this),i=a(e,!0);do{if(t=o(n,i))return t.get}while(n=s(n))}})},function(e,t,n){"use strict";var i=n(3),r=n(31),a=n(60),s=n(53),o=n(52).f;n(26)&&i(i.P+n(305),"Object",{__lookupSetter__:function(e){var t,n=r(this),i=a(e,!0);do{if(t=o(n,i))return t.set}while(n=s(n))}})},function(e,t,n){var i=n(3);i(i.P+i.R,"Map",{toJSON:n(471)("Map")})},function(e,t,n){var i=n(3);i(i.P+i.R,"Set",{toJSON:n(471)("Set")})},function(e,t,n){n(306)("Map")},function(e,t,n){n(306)("Set")},function(e,t,n){n(306)("WeakMap")},function(e,t,n){n(306)("WeakSet")},function(e,t,n){n(307)("Map")},function(e,t,n){n(307)("Set")},function(e,t,n){n(307)("WeakMap")},function(e,t,n){n(307)("WeakSet")},function(e,t,n){var i=n(3);i(i.G,{global:n(15)})},function(e,t,n){var i=n(3);i(i.S,"System",{global:n(15)})},function(e,t,n){var i=n(3),r=n(57);i(i.S,"Error",{isError:function(e){return"Error"===r(e)}})},function(e,t,n){var i=n(3);i(i.S,"Math",{clamp:function(e,t,n){return Math.min(n,Math.max(t,e))}})},function(e,t,n){var i=n(3);i(i.S,"Math",{DEG_PER_RAD:Math.PI/180})},function(e,t,n){var i=n(3),r=180/Math.PI;i(i.S,"Math",{degrees:function(e){return e*r}})},function(e,t,n){var i=n(3),r=n(473),a=n(453);i(i.S,"Math",{fscale:function(e,t,n,i,s){return a(r(e,t,n,i,s))}})},function(e,t,n){var i=n(3);i(i.S,"Math",{iaddh:function(e,t,n,i){var r=e>>>0,a=n>>>0;return(t>>>0)+(i>>>0)+((r&a|(r|a)&~(r+a>>>0))>>>31)|0}})},function(e,t,n){var i=n(3);i(i.S,"Math",{isubh:function(e,t,n,i){var r=e>>>0,a=n>>>0;return(t>>>0)-(i>>>0)-((~r&a|~(r^a)&r-a>>>0)>>>31)|0}})},function(e,t,n){var i=n(3);i(i.S,"Math",{imulh:function(e,t){var n=+e,i=+t,r=65535&n,a=65535&i,s=n>>16,o=i>>16,c=(s*a>>>0)+(r*a>>>16);return s*o+(c>>16)+((r*o>>>0)+(65535&c)>>16)}})},function(e,t,n){var i=n(3);i(i.S,"Math",{RAD_PER_DEG:180/Math.PI})},function(e,t,n){var i=n(3),r=Math.PI/180;i(i.S,"Math",{radians:function(e){return e*r}})},function(e,t,n){var i=n(3);i(i.S,"Math",{scale:n(473)})},function(e,t,n){var i=n(3);i(i.S,"Math",{umulh:function(e,t){var n=+e,i=+t,r=65535&n,a=65535&i,s=n>>>16,o=i>>>16,c=(s*a>>>0)+(r*a>>>16);return s*o+(c>>>16)+((r*o>>>0)+(65535&c)>>>16)}})},function(e,t,n){var i=n(3);i(i.S,"Math",{signbit:function(e){return(e=+e)!=e?e:0==e?1/e==1/0:e>0}})},function(e,t,n){"use strict";var i=n(3),r=n(55),a=n(15),s=n(301),o=n(460);i(i.P+i.R,"Promise",{finally:function(e){var t=s(this,r.Promise||a.Promise),n="function"==typeof e;return this.then(n?function(n){return o(t,e()).then(function(){return n})}:e,n?function(n){return o(t,e()).then(function(){throw n})}:e)}})},function(e,t,n){"use strict";var i=n(3),r=n(392),a=n(459);i(i.S,"Promise",{try:function(e){var t=r.f(this),n=a(e);return(n.e?t.reject:t.resolve)(n.v),t.promise}})},function(e,t,n){var i=n(117),r=n(14),a=i.key,s=i.set;i.exp({defineMetadata:function(e,t,n,i){s(e,t,r(n),a(i))}})},function(e,t,n){var i=n(117),r=n(14),a=i.key,s=i.map,o=i.store;i.exp({deleteMetadata:function(e,t){var n=arguments.length<3?void 0:a(arguments[2]),i=s(r(t),n,!1);if(void 0===i||!i.delete(e))return!1;if(i.size)return!0;var c=o.get(t);return c.delete(n),!!c.size||o.delete(t)}})},function(e,t,n){var i=n(117),r=n(14),a=n(53),s=i.has,o=i.get,c=i.key,l=function(e,t,n){if(s(e,t,n))return o(e,t,n);var i=a(t);return null!==i?l(e,i,n):void 0};i.exp({getMetadata:function(e,t){return l(e,r(t),arguments.length<3?void 0:c(arguments[2]))}})},function(e,t,n){var i=n(463),r=n(472),a=n(117),s=n(14),o=n(53),c=a.keys,l=a.key,u=function(e,t){var n=c(e,t),a=o(e);if(null===a)return n;var s=u(a,t);return s.length?n.length?r(new i(n.concat(s))):s:n};a.exp({getMetadataKeys:function(e){return u(s(e),arguments.length<2?void 0:l(arguments[1]))}})},function(e,t,n){var i=n(117),r=n(14),a=i.get,s=i.key;i.exp({getOwnMetadata:function(e,t){return a(e,r(t),arguments.length<3?void 0:s(arguments[2]))}})},function(e,t,n){var i=n(117),r=n(14),a=i.keys,s=i.key;i.exp({getOwnMetadataKeys:function(e){return a(r(e),arguments.length<2?void 0:s(arguments[1]))}})},function(e,t,n){var i=n(117),r=n(14),a=n(53),s=i.has,o=i.key,c=function(e,t,n){if(s(e,t,n))return!0;var i=a(t);return null!==i&&c(e,i,n)};i.exp({hasMetadata:function(e,t){return c(e,r(t),arguments.length<3?void 0:o(arguments[2]))}})},function(e,t,n){var i=n(117),r=n(14),a=i.has,s=i.key;i.exp({hasOwnMetadata:function(e,t){return a(e,r(t),arguments.length<3?void 0:s(arguments[2]))}})},function(e,t,n){var i=n(117),r=n(14),a=n(35),s=i.key,o=i.set;i.exp({metadata:function(e,t){return function(n,i){o(e,t,(void 0!==i?r:a)(n),s(i))}}})},function(e,t,n){var i=n(3),r=n(391)(),a=n(15).process,s="process"==n(57)(a);i(i.G,{asap:function(e){var t=s&&a.domain;r(t?t.bind(e):e)}})},function(e,t,n){"use strict";var i=n(3),r=n(15),a=n(55),s=n(391)(),o=n(24)("observable"),c=n(35),l=n(14),u=n(237),d=n(239),h=n(43),p=n(238),f=p.RETURN,g=function(e){return null==e?void 0:c(e)},m=function(e){var t=e._c;t&&(e._c=void 0,t())},v=function(e){return void 0===e._o},_=function(e){v(e)||(e._o=void 0,m(e))},b=function(e,t){l(e),this._c=void 0,this._o=e,e=new y(this);try{var n=t(e),i=n;null!=n&&("function"==typeof n.unsubscribe?n=function(){i.unsubscribe()}:c(n),this._c=n)}catch(t){return void e.error(t)}v(this)&&m(this)};b.prototype=d({},{unsubscribe:function(){_(this)}});var y=function(e){this._s=e};y.prototype=d({},{next:function(e){var t=this._s;if(!v(t)){var n=t._o;try{var i=g(n.next);if(i)return i.call(n,e)}catch(e){try{_(t)}finally{throw e}}}},error:function(e){var t=this._s;if(v(t))throw e;var n=t._o;t._o=void 0;try{var i=g(n.error);if(!i)throw e;e=i.call(n,e)}catch(e){try{m(t)}finally{throw e}}return m(t),e},complete:function(e){var t=this._s;if(!v(t)){var n=t._o;t._o=void 0;try{var i=g(n.complete);e=i?i.call(n,e):void 0}catch(e){try{m(t)}finally{throw e}}return m(t),e}}});var I=function(e){u(this,I,"Observable","_f")._f=c(e)};d(I.prototype,{subscribe:function(e){return new b(e,this._f)},forEach:function(e){var t=this;return new(a.Promise||r.Promise)(function(n,i){c(e);var r=t.subscribe({next:function(t){try{return e(t)}catch(e){i(e),r.unsubscribe()}},error:i,complete:n})})}}),d(I,{from:function(e){var t="function"==typeof this?this:I,n=g(l(e)[o]);if(n){var i=l(n.call(e));return i.constructor===t?i:new t(function(e){return i.subscribe(e)})}return new t(function(t){var n=!1;return s(function(){if(!n){try{if(p(e,!1,function(e){if(t.next(e),n)return f})===f)return}catch(e){if(n)throw e;return void t.error(e)}t.complete()}}),function(){n=!0}})},of:function(){for(var e=0,t=arguments.length,n=new Array(t);e<t;)n[e]=arguments[e++];return new("function"==typeof this?this:I)(function(e){var t=!1;return s(function(){if(!t){for(var i=0;i<n.length;++i)if(e.next(n[i]),t)return;e.complete()}}),function(){t=!0}})}}),h(I.prototype,o,function(){return this}),i(i.G,{Observable:I}),n(236)("Observable")},function(e,t,n){var i=n(15),r=n(3),a=n(302),s=[].slice,o=/MSIE .\./.test(a),c=function(e){return function(t,n){var i=arguments.length>2,r=!!i&&s.call(arguments,2);return e(i?function(){("function"==typeof t?t:Function(t)).apply(this,r)}:t,n)}};r(r.G+r.B+r.F*o,{setTimeout:c(i.setTimeout),setInterval:c(i.setInterval)})},function(e,t,n){var i=n(3),r=n(390);i(i.G+i.B,{setImmediate:r.set,clearImmediate:r.clear})},function(e,t,n){for(var i=n(389),r=n(232),a=n(44),s=n(15),o=n(43),c=n(256),l=n(24),u=l("iterator"),d=l("toStringTag"),h=c.Array,p={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},f=r(p),g=0;g<f.length;g++){var m,v=f[g],_=p[v],b=s[v],y=b&&b.prototype;if(y&&(y[u]||o(y,u,h),y[d]||o(y,d,v),c[v]=h,_))for(m in i)y[m]||a(y,m,i[m],!0)}},function(e,t,n){(function(t){!function(t){"use strict";var n,i=Object.prototype,r=i.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},s=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag",l="object"==typeof e,u=t.regeneratorRuntime;if(u)l&&(e.exports=u);else{(u=t.regeneratorRuntime=l?e.exports:{}).wrap=y;var d="suspendedStart",h="suspendedYield",p="executing",f="completed",g={},m={};m[s]=function(){return this};var v=Object.getPrototypeOf,_=v&&v(v(L([])));_&&_!==i&&r.call(_,s)&&(m=_);var b=C.prototype=w.prototype=Object.create(m);S.prototype=b.constructor=C,C.constructor=S,C[c]=S.displayName="GeneratorFunction",u.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===S||"GeneratorFunction"===(t.displayName||t.name))},u.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,C):(e.__proto__=C,c in e||(e[c]="GeneratorFunction")),e.prototype=Object.create(b),e},u.awrap=function(e){return{__await:e}},O(A.prototype),A.prototype[o]=function(){return this},u.AsyncIterator=A,u.async=function(e,t,n,i){var r=new A(y(e,t,n,i));return u.isGeneratorFunction(t)?r:r.next().then(function(e){return e.done?e.value:r.next()})},O(b),b[c]="Generator",b[s]=function(){return this},b.toString=function(){return"[object Generator]"},u.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var i=t.pop();if(i in e)return n.value=i,n.done=!1,n}return n.done=!0,n}},u.values=L,D.prototype={constructor:D,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(M),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=n)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function i(i,r){return o.type="throw",o.arg=e,t.next=i,r&&(t.method="next",t.arg=n),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var s=this.tryEntries[a],o=s.completion;if("root"===s.tryLoc)return i("end");if(s.tryLoc<=this.prev){var c=r.call(s,"catchLoc"),l=r.call(s,"finallyLoc");if(c&&l){if(this.prev<s.catchLoc)return i(s.catchLoc,!0);if(this.prev<s.finallyLoc)return i(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return i(s.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return i(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var s=a?a.completion:{};return s.type=e,s.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),M(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var r=i.arg;M(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,i){return this.delegate={iterator:L(e),resultName:t,nextLoc:i},"next"===this.method&&(this.arg=n),g}}}function y(e,t,n,i){var r=t&&t.prototype instanceof w?t:w,a=Object.create(r.prototype),s=new D(i||[]);return a._invoke=function(e,t,n){var i=d;return function(r,a){if(i===p)throw new Error("Generator is already running");if(i===f){if("throw"===r)throw a;return N()}for(n.method=r,n.arg=a;;){var s=n.delegate;if(s){var o=E(s,n);if(o){if(o===g)continue;return o}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===d)throw i=f,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=p;var c=I(e,t,n);if("normal"===c.type){if(i=n.done?f:h,c.arg===g)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i=f,n.method="throw",n.arg=c.arg)}}}(e,n,s),a}function I(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function w(){}function S(){}function C(){}function O(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function A(e){function n(t,i,a,s){var o=I(e[t],e,i);if("throw"!==o.type){var c=o.arg,l=c.value;return l&&"object"==typeof l&&r.call(l,"__await")?Promise.resolve(l.__await).then(function(e){n("next",e,a,s)},function(e){n("throw",e,a,s)}):Promise.resolve(l).then(function(e){c.value=e,a(c)},s)}s(o.arg)}var i;"object"==typeof t.process&&t.process.domain&&(n=t.process.domain.bind(n)),this._invoke=function(e,t){function r(){return new Promise(function(i,r){n(e,t,i,r)})}return i=i?i.then(r,r):r()}}function E(e,t){var i=e.iterator[t.method];if(i===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=n,E(e,t),"throw"===t.method))return g;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var r=I(i,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,g;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=n),t.delegate=null,g):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,g)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function M(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function D(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function L(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function t(){for(;++i<e.length;)if(r.call(e,i))return t.value=e[i],t.done=!1,t;return t.value=n,t.done=!0,t};return a.next=a}}return{next:N}}function N(){return{value:n,done:!0}}}("object"==typeof t?t:"object"==typeof window?window:"object"==typeof self?self:this)}).call(this,n(6))},function(e,t,n){n(769),e.exports=n(55).RegExp.escape},function(e,t,n){var i=n(3),r=n(770)(/[\\^$*+?.()|[\]{}]/g,"\\$&");i(i.S,"RegExp",{escape:function(e){return r(e)}})},function(e,t){e.exports=function(e,t){var n=t===Object(t)?function(e){return t[e]}:t;return function(t){return String(t).replace(e,n)}}},function(e,t,n){"use strict";(function(e){if(e.performance||(e.performance={}),!e.performance.now){var t,n=e.performance.timing;t=n&&n.navigationStart?n.navigationStart:Date.now(),e.performance.now=function(){return Date.now()-t}}}).call(this,n(6))},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n(310),r=function(e,t){for(var n=0,r=t,a=void 0,s=void 0;r&&-1!==(s=e.indexOf(".",n));)a=e.substring(n,s),r=Object(i.a)(r,a),n=s+1;return r}},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(e){return e.substring(e.lastIndexOf(".")+1)}},function(e,t,n){"use strict";function i(e,t,n,i){void 0===n&&(n=0),void 0===i&&(i=n);var r=t.length;e.length=r+n-i;for(var a=i,s=n;a<r;a++,s++)e[s]=t[a];return e}n.d(t,"a",function(){return i})},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function r(e){return"object"===(void 0===e?"undefined":i(e))&&null!==e&&e.constructor===Object&&!e.isClass}},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n(65),r=n(121),a=n(111),s=n(124),o=[],c=function(e,t){var n=0|t,r="",c=void 0,u=void 0,d=void 0,h=void 0;if(Object(a.a)(e)){for(c=e.length,u=0;u<c;u++)u&&(r+=","),r+=l(e[u],n);return"["+r+"]"}if(e._isCwCollection&&e.objectAt){for(c=e.length,u=0;u<c;u++)u&&(r+=","),r+=l(e.objectAt(u),n);return"["+r+"]"}if(!Object(s.a)(e)){for(d in h=o.length,e)e.hasOwnProperty(d)&&o.push(d);for(o.sort(),c=o.length,u=h;u<c;u++)d=o[u],u!==h&&(r+=","),r+='"'+d+'":'+l(e[d],n);return o.length=h,"{"+r+"}"}return Object(i.b)("Object expected in call to `guidForContents`.",e),null},l=function(e,t){return t>0&&!Object(s.a)(e)?c(e,t-1):'"'+Object(r.a)(e)+'"'}},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(e,t,n){return Array.prototype.slice.call(e,0|t,n)}},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n(65),r=n(68),a=n(122),s=r.a.extend(a.a,{staticMembers:{begin:function(e){var t=this.create();return t.retain(t,o),t._isReady=!0,t._rootObject=e,t._batchSetter=this._beginBatchSetter(),t},_beginBatchSetter:function(){return r.c.begin()},__QUALIFIED_CLASS_NAME__:"BatchSetterForNonObservableObject"},begin:function(){Object(i.b)("BatchSetterForObject Begin must be called on the class, reusing BatchSetterForObject objects is not allowed.")},_rootObject:null,set:function(e,t){return this._batchSetter.set(this._rootObject,e,t),this},setIfChanged:function(e,t){return this._batchSetter.setIfChanged(this._rootObject,e,t),this},end:function(){this._batchSetter.end(),this._batchSetter=null,this._rootObject=null,this.release(this,o)}}),o="BatchSetterForObject: self-reference for the duration"},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i={toString:function(){return"CW.ITSELF"}};Object.freeze(i)},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n(68),r=n(39),a=i.c.extend({staticMembers:{init:function(){var e=arguments;this.__s._$H5$init.apply(this,e),i.c._bestBatchSetterClass=this,this._bestBatchSetterClass=this},__superMap:{_$H5$init:"init"},__QUALIFIED_CLASS_NAME__:"BatchSetter"},init:function(){var e=arguments;this.__s._$Oq$init.apply(this,e),this._toSetObservableArray=[]},end:function(){var e=arguments;this.__s._$QZ$end.apply(this,e),this._toSetObservableArray.length=0},_toSetObservableArray:null,_performSet:function(e){if(0!==e.length){for(var t=this._toSetObservableArray,n=this._pointerTuple,i=0,a=e.length;i<a;i++){var s=e[i],o=s.value,c=this._resolvePointer(s,n),l=c[0],u=c[1],d=l.upstreamNodes?l.upstreamNodes[u]:void 0;d?(t.push(o),t.push(d)):l[u]=o}t.length>0&&r.a.setValuesForNodes.apply(this,t)}},__superMap:{_$Oq$init:"init",_$QZ$end:"end"}})},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n(41),r={staticMembers:{sharedInstance:Object(i.c)({get:function(){return this.hasOwnProperty("_sharedInstance")&&this._sharedInstance||(this._sharedInstance=this.create())},set:function(e){this._sharedInstance=e}})},dispose:function(){var e=arguments;this.constructor._sharedInstance===this&&delete this.constructor._sharedInstance,this.__s._$O4$dispose.apply(this,e)},__superMap:{_$O4$dispose:"dispose"}}},function(e,t,n){},,function(e,t,n){"use strict";n.d(t,"a",function(){return l}),n.d(t,"b",function(){return u});var i=n(174),r=n(173),a="debug",s="warn",o={group:"GROUP: ",debug:"DEBUG: ",info:"INFO:  ",warn:"WARN:  ",error:"ERROR: "},c={debug:4,info:3,warn:2,error:1,group:1,none:0},l=function(){function e(t){!function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this.messagePrefix=null,this.outputMessagePrefix=null,this.recordedMessagePrefix=null,this.logOutputLevel=s,this.logRecordingLevel=a,this.recordedLogMessagesMaximumLength=500,this._recordedLogMessagesEnd=-1,this.reporter=console,this._recordedLogMessages=[],this._indentationLevel=0,t&&(this.reporter=t)}return e.prototype.debug=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];this._handleMessage(a,arguments)},e.prototype.info=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];this._handleMessage("info",arguments)},e.prototype.warn=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];this._handleMessage(s,arguments)},e.prototype.error=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];this._handleMessage("error",arguments)},e.prototype.group=function(e){this._handleMessage("group",arguments),"none"!==this.logRecordingLevel&&this._indentationLevel++},e.prototype.groupEnd=function(){this._outputMessage("groupEnd","");var e=this.logRecordingLevel;this._indentationLevel>0&&"none"!==e&&this._indentationLevel--},e.prototype.outputRecordedLogMessages=function(){for(var e=this._orderedRecordedLogMessages(),t=0;t<e.length;t++)this._outputMessage("log",e[t])},e.prototype.stringifyRecordedLogMessages=function(){return this._orderedRecordedLogMessages().join("\n")},e.prototype._orderedRecordedLogMessages=function(){var e=[],t=this._recordedLogMessages||[],n=this.recordedLogMessagesMaximumLength-1,i=this._recordedLogMessagesEnd,r=i;if(t.length>0)do{e.push(t[r]),r=0===r?n:r-1}while(t[r]&&r!==i);return e.reverse()},e.prototype._handleMessage=function(e,t){var n=this._shouldOutputType(e),i=this._shouldRecordType(e);if(n||i){var a=(this.messagePrefix||"")+r.a.apply(this,t);n&&this._outputMessage(e,a,t),i&&this._recordMessage(e,a)}},e.prototype._shouldOutputType=function(e){return c[e]<=c[this.logOutputLevel]},e.prototype._shouldRecordType=function(e){return c[e]<=c[this.logRecordingLevel]},e.prototype._outputMessage=function(e,t,n){var r=this.reporter,a=r?r[e]:null,s=this.outputMessagePrefix||"";if(a){var o=[];n&&n.length>1&&(o=Object(i.a)(n,0,1));try{var c;(c=Function.prototype.call).call.apply(c,[a,r,s+t].concat(o))}catch(e){Function.prototype.call.call(a,r,s+t,"Cycle argument")}}},e.prototype._recordMessage=function(e,t){var n=this._recordedLogMessages,i=this._createRecordedMessageString(e,t),r=this.recordedLogMessagesMaximumLength-1,a=this._recordedLogMessagesEnd,s=a===r?0:a+1;n[s]=i,this._recordedLogMessagesEnd=s},e.prototype._createRecordedMessageString=function(e,t){var n=function(e){(!e||e<0)&&(e=0);var t="",n=void 0;for(n=0;n<e;++n)t+="    ";return t}(this._indentationLevel),i=(new Date).toUTCString()+":  ",r=o[e];return n+i+(this.recordedMessagePrefix||"")+r+t},e}();l.LOG_LEVEL_NONE="none",l.LOG_LEVEL_GROUP="group",l.LOG_LEVEL_DEBUG=a,l.LOG_LEVEL_INFO="info",l.LOG_LEVEL_WARN=s,l.LOG_LEVEL_ERROR="error";var u=new l},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n(65),r=function(){var e=(new Error).stack;if(!e)try{throw new i.a}catch(t){e=t.stack}return"STACK\n"+(e=String(e)).substring(1+e.indexOf("\n",e.indexOf("getStack")))}},function(e,t,n){},,function(e,t,n){"use strict";n.d(t,"a",function(){return g});var i=n(80),r=n(180),a=n(41),s=n(184),o=n(789),c=n(36),l=n(34),u=n(93),d=n(1175),h=n(65),p=n(1193),f=n(409),g=i.a.extend(c.a,s.a,o.a,{_childViewControllers:Object(r.b)(Array),parent:Object(l.b)(null),_isViewLoaded:!1,isViewLoaded:Object(a.c)({readOnly:!0,get:function(){return this._isViewLoaded}}),_isAttached:void 0,isAttached:Object(l.b)({dependencies:["parent.isAttached"],defaultValue:!1,readOnly:!0,get:Object.assign(function(){var e=this._isAttached;return Object(d.a)(e)?e:Boolean(this.getPath("parent.isAttached"))},{__CW__getter:function(e,t,n,i){var r=this._isAttached;return Object(d.a)(r)?r:Boolean(i.internalGetPath(this,t[0+n]))}})}),_setIsAttached:function(e){this._isAttached=e,this.propertyChanged("isAttached")},isRootViewController:!1,_view:null,view:Object(l.b)({readOnly:!0,strong:!0,get:function(){return this.loadView(),this._view}}),presentingViewController:null,viewClass:f.a,dispose:function(){var e=arguments,t=this._childViewControllers,n=0,i=t.length;for(n=0;n<i;n++)t[n].parent=null,t[n].release(this,"holding as a childViewController");this.unloadView(!0),this.__s._$1Fq$dispose.apply(this,e)},loadView:function(){if(!this._isViewLoaded){this.viewWillLoad();var e=this.createView();e.beginBatchSet().set("viewController",this).set("nextResponder",this).set("focusParent",this).end(),this._view=e,this._isViewLoaded=!0,this._loadChildViews(e),this.viewDidLoad(e)}},viewWillLoad:function(){},viewDidLoad:function(e){},viewWillUnload:function(e){},viewDidUnload:function(){},createView:function(){return this.viewClass.create({isRootView:this.isRootViewController})},unloadView:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this._isViewLoaded){var t=this._view;this.viewWillUnload(t),t.beginBatchSet().set("viewController",null).set("nextResponder",null).set("focusParent",null).end(),this._view=null,this._isViewLoaded=!1,e||this.propertyChanged("view"),this.viewDidUnload()}},willMoveToParentViewController:function(e){e&&e.isAttached&&!this.isAttached?this.willAttach():!e&&this.isAttached&&this.willDetach()},didMoveToParentViewController:function(e){e&&e.isAttached?this.didAttach():e||this.didDetach()},willAttach:function(){var e,t=this._childViewControllers,n=t.length;for(e=0;e<n;e++)t[e].willAttach()},didAttach:function(){var e,t=this._childViewControllers,n=t.length;for(e=0;e<n;e++)t[e].didAttach()},willDetach:function(){var e,t=this._childViewControllers,n=t.length;for(e=0;e<n;e++)t[e].willDetach()},didDetach:function(){var e,t=this._childViewControllers,n=t.length;for(e=0;e<n;e++)t[e].didDetach()},addChildViewController:function(e,t){var n=this._childViewControllers;e.parent&&Object(h.b)("Cannot add view controller because it is already a child of a view controller",{parent:this,child:e}),n.push(e),t?(t.set(e,"parent",this),t.set(e,"focusParent",this)):(e.parent=this,e.focusParent=this),e.retain(this,"holding as a childViewController")},removeChildViewController:function(e,t){var n=this._childViewControllers;n.indexOf(e)<0&&Object(h.b)("Cannot remove view controller because it is not a child of this view controller",{parent:this,child:e}),t?(t.set(e,"parent",null),t.set(e,"focusParent",null)):(e.parent=null,e.focusParent=null),e.release(this,"holding as a childViewController"),Object(p.a)(e,n)},_loadChildViews:function(e){for(var t=this._childViewControllers,n=0;n<t.length;n++){var i=t[n],r=i._destinationViewOutlet;r&&e.setPath(r,i.view)}},defaultFocusChild:Object(u.c)("view"),focusAsLeaf:function(){var e=arguments,t=this.__s._$3_i$focusAsLeaf.apply(this,e);return t&&this.view.focus(),t},nextResponder:Object(a.c)({get:function(e){if(e)return e;var t=this.view;return t?t.parent:null}}),performAction:function(e){var t=this.targetViewControllerForAction(e,this);if(t){for(var n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return t[e].apply(t,i)}Object(h.b)("CW.ViewController"+e+" No view controller in hierarchy implements "+e+".",{viewController:this})},canPerformAction:function(e,t){var n=arguments,i=this[e];switch(e){case"showViewController":case"showDetailViewController":case"presentViewController":case"dismissViewController":return"function"==typeof i&&i!==g.prototype[e];default:return this.__s._$4dZ$canPerformAction.apply(this,n)}},targetViewControllerForAction:function(e,t){var n=null;if(this.canPerformAction(e,t))n=this;else{var i=this.nextResponder;i&&(n=i.targetViewControllerForAction(e,t))}return n},showViewController:function(e){this.performAction("showViewController",e)},showDetailViewController:function(e){this.performAction("showDetailViewController",e)},presentViewController:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e.presentingViewController=this,this.performAction("presentViewController",e,t)},dismissViewController:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.performAction("dismissViewController",e,t)},dismiss:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.presentingViewController;if(t)return t.dismissViewController(this,e);Object(h.b)("CW.ViewController#dismiss The view controller has no presentingViewController.",{viewController:this})},__superMap:{_$1Fq$dispose:"dispose",_$3_i$focusAsLeaf:"focusAsLeaf",_$4dZ$canPerformAction:"canPerformAction"},staticMembers:{__QUALIFIED_CLASS_NAME__:"ViewController"}})},function(e,t,n){"use strict";n.d(t,"a",function(){return u}),n.d(t,"b",function(){return f});var i=n(1173),r=n(1169),a=n(1184),s=n(36),o=n(34),c=n(93),l=n(184),u={mixinDependencies:[s.a,l.a],defaultFocusChildren:Object(o.b)(),isFocused:Object(o.b)({readOnly:!0,dependencies:["isInFocusedBranch","focusedChild"],get:Object.assign(function(){return this.isInFocusedBranch&&!this.focusedChild},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])&&!i.internalGet(this,t[1+n])}})}),descendantHasFocus:Object(o.b)({readOnly:!0,dependencies:["isInFocusedBranch","focusedChild"],get:Object.assign(function(){return this.isInFocusedBranch&&!!this.focusedChild},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])&&!!i.internalGet(this,t[1+n])}})}),isFocusable:Object(o.b)(!1),isFocusablePane:Object(o.b)(!0),shouldFocusPaneOnAttach:Object(o.b)(!0),isFocusedPane:Object(o.b)({readOnly:!0,dependencies:["focusParent.isFocusedLayer"],get:Object.assign(function(){return this.getPath("focusParent.isFocusedLayer")},{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])}})}),isInTheFocusedPane:Object(o.b)({readOnly:!0,dependencies:["focusParent.isInTheFocusedPane","isFocusedPane"],get:Object.assign(function(){return!!this.isFocusedPane||!!this.getPath("focusParent.isInTheFocusedPane")},{__CW__getter:function(e,t,n,i){return!!i.internalGet(this,t[1+n])||!!i.internalGetPath(this,t[0+n])}})}),inheritsFocusLayer:Object(o.b)(!1),isInFocusableLayer:Object(o.b)(Object(c.c)("focusParent.isInFocusableLayer")),isInFocusedLayer:Object(o.b)(Object(c.c)("focusParent.isInFocusedLayer")),isInFocusedBranch:Object(o.b)({readOnly:!0,dependencies:["isInFocusedLayer","isFocusedInParent","focusParent.isInFocusedBranch"],get:Object.assign(function(){var e=this.isInFocusedLayer,t=this.isFocusedInParent,n=this.getPath("focusParent.isInFocusedBranch");return e&&t&&n},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]),s=i.internalGetPath(this,t[2+n]);return r&&a&&s}})}),isFocusedInParent:Object(o.b)({dependencies:["focusParent.focusedChild"],readOnly:!0,get:Object.assign(function(){var e=this.getPath("focusParent.focusedChild");return this.isRootViewController||e===this},{__CW__getter:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return this.isRootViewController||r===this}})}),focusResponder:Object(o.b)({dependencies:["focusedChild","focusedChild.focusResponder"],readOnly:!0,get:Object.assign(function(){return this.focusedChild&&this.focusedChild.focusResponder||(this.isFocusable?this:null)},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])&&i.internalGetPath(this,t[1+n])||(this.isFocusable?this:null)}})}),parent:Object(o.b)(null),focusParent:Object(o.b)({dependencies:["parent"],writeDependencies:[],get:Object.assign(function(e){var t=e||this.parent;return Object(i.a)(t,u)?t:void 0},{__CW__getter:function(e,t,n,r){var a=e||r.internalGet(this,t[0+n]);return Object(i.a)(a,u)?a:void 0}}),set:function(e){return e}}),focusedChild:Object(o.b)(),_focusInTree:function(){if(this.isInFocusedBranch)return!0;if(!this.isInFocusableLayer)return!1;var e=this.focusParent;return e.focusedChild=this,e._focusInTree()},focus:function(e){if(!this.isInFocusableLayer&&(this.sendEvent("appGainedFocusability"),!this.isInFocusableLayer))return!1;if(!e&&this.isInFocusedBranch)return this.focusAsLeaf();var t=!1;return(t=this.reFocus())||(t=this.focusDefault()),t||(t=this.focusAsLeaf()),t},focusAsLeaf:function(){return!!this.isFocusable&&(this.focusedChild=null,this._focusInTree(),this.sendEvent("appWantsFocus"),this.isFocused)},reFocus:function(){var e=this.focusResponder;return!(!e||e===this)&&e.focus()},focusDefault:function(){var e=this.defaultFocusChildren;if(e)for(var t=0,n=e.length;t<n;t++){var r=e.objectAt(t);if(r&&Object(i.a)(r,u)&&r.focus())return!0}var a=this.defaultFocusChild;return!!a&&a.focus()},_blurInTree:function(){if(!this.isInFocusedBranch)return!0;if(!this.isInFocusableLayer)return!1;var e=this.focusParent;return!e||!this.isFocusedInParent||(e._blurInTree(),e.focusedChild=null,!0)},blur:function(){return!(!this.isInFocusableLayer&&(this.sendEvent("appGainedFocusability"),!this.isInFocusableLayer))&&this._blurInTree()},didFocus:r.a,didBlur:r.a,defaultFocusChild:Object(o.b)(),isFocusedLayer:Object(o.b)({readOnly:!0,defaultValue:!1}),_wasFocused:!1,isFocusedDidChange:Object(s.f)("isFocused",function(e){e?(this._wasFocused=!0,this.didFocus()):this._wasFocused&&(this._wasFocused=!1,this.didBlur())}),didReceiveFocus:function(e){var t=!1;return null===e.relatedTarget&&(this.sendEvent("appGainedFocusability"),t=!0),this.isInFocusableLayer&&this.isFocusable||this.sendEvent("focusReleasedInApp"),this.isFocused||this.focus(t),!0},didReceiveBlur:function(e){return null!==e.relatedTarget||document.hasFocus()||this.sendEvent("appLostFocus"),!0}},d=null,h=null;function p(){d&&d.focus(),d=null,h=null}var f={mixinDependencies:[u],tabIndex:Object(o.b)(0),_previousDefaultFocusElement:Object(o.b)(),tabIndexObserver:Object(s.f)({inputs:["isFocusable","tabIndex","defaultFocusElement"],callback:function(e,t,n){var i=this._previousDefaultFocusElement;i&&i.removeAttribute("tabIndex"),this._previousDefaultFocusElement=n,n&&(e?n.setAttribute("tabIndex",t):n.removeAttribute("tabIndex"))}}),focusAsLeaf:function(){var e=arguments,t=this.__s._$4dT$focusAsLeaf.apply(this,e);if(t){var n=this.defaultFocusElement;h||(h=Object(a.a)(p,0)),d=n}return t},blur:function(){var e=arguments,t=this.__s._$4op$blur.apply(this,e);if(t){var n=this.defaultFocusElement;n&&n.blur()}return t},defaultFocusElement:Object(o.b)({binding:Object(c.c)("element"),readOnly:!0}),didFocus:function(){},__superMap:{_$4dT$focusAsLeaf:"focusAsLeaf",_$4op$blur:"blur"}}},function(e,t,n){"use strict";n.d(t,"b",function(){return h}),n.d(t,"a",function(){return p});var i=n(49),r=n(32),a=n(82),s=n(80),o=n(122),c=n(173),l=n(179),u=n(36),d=n(34),h={mixinDependencies:[i.a],width:Object(r.c)(a.a),height:Object(r.c)(a.a),toString:function(){var e=arguments;return this.__s._$8L$toString.apply(this,e)+Object(c.a)("{ width: %{width}, height: %{height} }",this)},__superMap:{_$8L$toString:"toString"}},p=s.a.extend(u.a,h,o.a,{initFromPool:function(e,t){var n=arguments;if(Object(l.a)(t))return this.width=e,this.height=t,this.__s._$Fe$initFromPool.call(this);this.__s._$Fe$initFromPool.apply(this,n)},didEnterPool:function(){var e=arguments;this.width=0,this.height=0,this.__s._$Hn$didEnterPool.apply(this,e)},width:Object(d.b)(0),height:Object(d.b)(0),__superMap:{_$Fe$initFromPool:"initFromPool",_$Hn$didEnterPool:"didEnterPool"},staticMembers:{__QUALIFIED_CLASS_NAME__:"Size"}})},function(e,t,n){"use strict";n.d(t,"a",function(){return p});var i=n(49),r=n(32),a=n(80),s=n(122),o=n(179),c=n(173),l=n(36),u=n(126),d=n(34),h={mixinDependencies:[i.a],x:Object(r.c)(u.a),y:Object(r.c)(u.a)},p=a.a.extend(l.a,h,s.a,{initFromPool:function(e,t){var n=arguments;if(Object(o.a)(e))return this.x=e,this.y=t,this.__s._$DW$initFromPool.call(this);this.__s._$DW$initFromPool.apply(this,n)},didEnterPool:function(){var e=arguments;this.x=0,this.y=0,this.__s._$FW$didEnterPool.apply(this,e)},x:Object(d.b)(0),y:Object(d.b)(0),toString:function(){var e=arguments;return Object(c.a)("["+this.__s._$L7$toString.apply(this,e)+"(%{x}, %{y}) ]",this)},__superMap:{_$DW$initFromPool:"initFromPool",_$FW$didEnterPool:"didEnterPool",_$L7$toString:"toString"},staticMembers:{__QUALIFIED_CLASS_NAME__:"Point2D"}})},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n(65),r=n(784);function a(e){e||Object(i.b)("An element is required to be able to measure it");var t=e.getBoundingClientRect();return 0!==t.height||0!==t.width||document.body.contains(e)?t:(r.b.error("Tried to measure an element that is not in the document",e),null)}},function(e,t,n){"use strict";n.d(t,"a",function(){return p});var i=n(111),r=n(777),a=n(1173),s=n(1191),o=n(1192),c=n(65),l=n(80),u=n(41),d=n(127),h=n(436),p=l.a.extend(h.a,{staticMembers:{from:function(e){return this.create(e)},__QUALIFIED_CLASS_NAME__:"CoreArray"},shouldDoPostInitProcessing:Object(u.c)(!0),init:function(e){var t,n=arguments,s=!1;Object(i.a)(e)?t=Object(r.a)(e):Object(a.a)(e,d.a)?t=e.toArray():(t=[],s=!0),this._array=t,s?this.__s._$dc$init.apply(this,n):this.__s._$dc$init.call(this),this.shouldDoPostInitProcessing&&this.postInitProcessing()},postInitProcessing:function(){var e=this._array;if(e){var t=this.serializer;if(e&&t&&t.encode)for(var n=0,i=e.length;n<i;n++)e[n]=t.encode(e[n],n)}},appendArrays:function(){g.length=0,g[0]=1/0;for(var e=0,t=arguments.length;e<t;e++){var n=arguments[e];Object(s.a)(g,n)}return this.insertAt.apply(this,g),this},_array:null,encodedRawSplice:function(e,t){var n=arguments.length-2;this.itemsWillChange(),t>0&&this.itemsWillBeRemoved(e,t),n>0&&this.itemsWillBeInserted(e,n);var i=this._array.splice.apply(this._array,arguments);return t>0&&this.itemsWereRemoved(e,t),n>0&&this.itemsWereInserted(e,n),this.itemsDidChange(),i},encodedObjectAt:function(e){return this._array[e]},length:Object(u.c)({get:f,set:function(e){e<0&&Object(c.b)("Invalid length %{length}. Must be a non-negative integer.",{length:e,object:this});var t,n=this._internalLength,i=e-n;0!==i&&(this.itemsWillChange(),i>0?this.itemsWillBeInserted(n,i):i<0&&(t=n- -1*i,this.itemsWillBeRemoved(t,-i)),this._array.length=e,i>0?this.itemsWereInserted(n,i):i<0&&this.itemsWereRemoved(t,-i),this.itemsDidChange());return e}}),_internalLength:Object(u.c)({readOnly:!0,get:f}),shallowCopy:function(){return this.constructor.create(Object(r.a)(this._array))},toJSON:function(){return Object(o.a)(this._array)},encodedPush:function(){var e,t=arguments.length,n=this.length;if(0===t)return n;this.itemsWillChange(),this.itemsWillBeInserted(n,t);var i=(e=this._array).push.apply(e,arguments);return this.itemsWereInserted(n,t),this.itemsDidChange(),i},clear:function(){var e=this.length;return this.itemsWillChange(),this.itemsWillBeRemoved(0,e),this._array.length=0,this.itemsWereRemoved(0,e),this.itemsDidChange(),this},removeAt:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=this.length;return e<0&&(e=n+e)<0&&(e=0),e<n&&e>=0&&(this.itemsWillChange(),this.itemsWillBeRemoved(e,t),this._array.splice(e,t),this.itemsWereRemoved(e,t),this.itemsDidChange()),this},encodedPop:function(){var e=this.length-1;this.itemsWillChange(),this.itemsWillBeRemoved(e,1);var t=this._array.pop();return this.itemsWereRemoved(e,1),this.itemsDidChange(),t},encodedSetIndex:function(e,t){var n=this.length;if(e<n)e<0&&(e=n+e)<0&&(e=0),this.itemsWillChange(),this.itemsWillBeRemoved(e,1),this.itemsWillBeInserted(e,1),this._array[e]=t,this.itemsWereRemoved(e,1),this.itemsWereInserted(e,1),this.itemsDidChange();else{var i=n,r=e-i+1;this.itemsWillChange(),this.itemsWillBeInserted(i,r),this._array[e]=t,this.itemsWereInserted(i,r),this.itemsDidChange()}return this},encodedShift:function(){this.itemsWillChange(),this.itemsWillBeRemoved(0,1);var e=this._array.shift();return this.itemsWereRemoved(0,1),this.itemsDidChange(),e},encodedUnshift:function(){var e,t=arguments.length;if(0===t)return this.length;this.itemsWillChange(),this.itemsWillBeInserted(0,t);var n=(e=this._array).unshift.apply(e,arguments);return this.itemsWereInserted(0,t),this.itemsDidChange(),n},__superMap:{_$dc$init:"init"}});function f(){return this._array&&this._array.length||0}var g=[]},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n(80),r=n(122),a=n(41),s=n(1169),o=n(795),c=i.a.extend(r.a,o.a,{initFromPool:function(e,t,n){n=n||0,this.encodedValue=e.encodedObjectAt(n),this._position=n,this.__s._$H1$initFromPool.call(this,e,t)},didEnterPool:function(){this._wasRemoved=!1,this.encodedValue=void 0,this._position=NaN,this._formerPosition=NaN,this.__s._$KQ$didEnterPool.call(this)},atDistance:function(e){var t=arguments;if(this._wasRemoved){var n=this._formerPosition;return e>0?this.at(n+e-1):e<0?this.at(n+e):this}return this.__s._$Vl$atDistance.apply(this,t)},hasHandleAtDistance:function(e){var t=arguments;if(this._wasRemoved){var n=this._formerPosition;return e>0?this.hasHandleAt(n+e-1):!(e<0)||this.hasHandleAt(n+e)}return this.__s._$hU$hasHandleAtDistance.apply(this,t)},encodedValue:Object(a.c)({strong:!0}),position:Object(a.c)({readOnly:!0,defaultValue:NaN}),maximumPosition:Object(a.c)({readOnly:!0,get:function(){return this.source.length-1}}),wasRemoved:Object(a.c)({readOnly:!0,defaultValue:!1}),_formerPosition:NaN,hasHandleAt:function(e){return e>=0&&e<=this.maximumPosition},_handleRemove:s.a,_applyRemove:function(e,t,n){if(this._wasRemoved){var i=this._formerPosition;if(i<e)return;this._formerPosition=i<t?e:i-n}else{var r=this._position;if(r<e)return;r<t?(this._formerPosition=e,this._wasRemoved=!0,this._handleRemove()):this._position=r-n}},_applyInsert:function(e,t){if(this._wasRemoved){var n=this._formerPosition;if(n<e)return;this._formerPosition=n+t}else{var i=this._position;if(i<e)return;this._position=i+t}},__superMap:{_$H1$initFromPool:"initFromPool",_$KQ$didEnterPool:"didEnterPool",_$Vl$atDistance:"atDistance",_$hU$hasHandleAtDistance:"hasHandleAtDistance"},staticMembers:{__QUALIFIED_CLASS_NAME__:"OrderedListHandle"}})},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n(54),r=n(82),a=n(41),s={mixinDependencies:[n(796).a],at:function(e){return this._provider.at(e)},hasHandleAt:i.a.define(),position:r.a.define(),maximumPosition:r.a.define(),atDistance:function(e){return this.at(this.position+e)},hasHandleAtDistance:function(e){return this.hasHandleAt(this.position+e)},previous:Object(a.c)({get:function(){return this.atDistance(-1)}}),hasPrevious:Object(a.c)({get:function(){return this.hasHandleAtDistance(-1)}}),next:Object(a.c)({get:function(){return this.atDistance(1)}}),hasNext:Object(a.c)({get:function(){return this.hasHandleAtDistance(1)}}),start:Object(a.c)({readOnly:!0,get:function(){return this._provider.startHandle}}),end:Object(a.c)({readOnly:!0,get:function(){return this._provider.endHandle}}),isValid:Object(a.c)({readOnly:!0,get:function(){var e=this.position;return e>=0&&e<=this.maximumPosition}})}},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n(54),r=n(41),a=n(82),s={mixinDependencies:[n(797).a],atDistance:function(e){for(var t=Math.sign(e),n=this.retain(this,"atDistance: current handle"),i=0;i!==e;i+=t){var r=t>0?n.next:n.previous;r.retain(this,"atDistance: current handle"),n.release(this,"atDistance: current handle"),n=r}return n.autorelease(this,"atDistance: current handle")},hasHandleAtDistance:i.a.define(),end:Object(r.c)({get:function(){return this._provider.endHandle}}),previous:a.a.define(),hasPrevious:a.a.define()}},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n(49),r=n(82),a=n(41),s={mixinDependencies:[i.a],isValid:r.a.define(),wasRemoved:r.a.define(),value:Object(a.c)({readOnly:!0,get:function(){return this.source.decode(this.encodedValue,this.position)}}),encodedValue:r.a.define(),start:Object(a.c)({get:function(){return this._provider.startHandle}}),next:r.a.define(),hasNext:r.a.define(),init:function(e,t){this.source=e,this._provider=t,this.__s._$24M$init.call(this)},initFromPool:function(e,t){this.source=e,this._provider=t,this.__s._$275$initFromPool.call(this)},didEnterPool:function(){this.source=null,this._provider=null,this.__s._$28y$didEnterPool.call(this)},source:Object(a.c)({strong:!0}),_provider:Object(a.c)(),__superMap:{_$24M$init:"init",_$275$initFromPool:"initFromPool",_$28y$didEnterPool:"didEnterPool"}}},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n(65),r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function a(e,t,n,o){if(e===t)return!0;var c=void 0,l=void 0,u=void 0,d=void 0;if(s[void 0===e?"undefined":r(e)]||s[void 0===t?"undefined":r(t)])return!1;if(null===e||null===t)return!1;if(n||(n=e.constructor),o||(o=t.constructor),n!==o)return!1;if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Object){var h=0;for(c in e)if(++h,(l=e[c])!==(u=t[c])){if(d=void 0===l?"undefined":r(l),s[d])return!1;if(!a(l,u))return!1}for(c in t)--h;return 0===h}if(n===Array){var p=e.length;if(p!==t.length)return!1;for(var f=p-1;f>=0;--f)if((l=e[f])!==(u=t[f])){if(d=void 0===l?"undefined":r(l),s[d])return!1;if(!a(l,u))return!1}return!0}var g=n.name&&n.name.length?n.name:String(n);return Object(i.b)("Unsupported type for 'deepEqual': "+g),null}var s={string:!0,number:!0,boolean:!0,undefined:!0}},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var i=n(80),r=n(41),a=n(1184),s=n(36),o=n(800),c=n(93),l=n(34),u=i.a.extend(s.a,o.a,{target:Object(c.c)("owner"),delay:0,timesToFire:1,delays:null,fireCount:0,isRunning:!1,isPaused:!1,timeUntilFire:Object(r.c)({readOnly:!0,get:function(){return this.isRunning?this.isPaused?1/0:this._nextFiringTime-Date.now():NaN}}),start:function(){return this.isRunning?this:(this.isRunning=!0,this._nextFiringTime=Date.now(),this._scheduleNextFiringOrStop(),this)},restart:function(){return this.stop(),this.start(),this},stop:function(){return this.isRunning?(this._handle&&(clearTimeout(this._handle),this._handle=null),this.fireCount=0,this.isRunning=!1,this.isPaused&&(this.isPaused=!1,this._pauseCount=0,this._timeRemainingAtPause=NaN),this):this},pause:function(){return this.isRunning?(this._pauseCount++,1===this._pauseCount&&(this._timeRemainingAtPause=this.get("timeUntilFire"),this.isPaused=!0,this._nextFiringTime=NaN,clearTimeout(this._handle),this._handle=null),this):this},resume:function(){return this.isRunning?(this._pauseCount--,0===this._pauseCount&&(this._nextFiringTime=Date.now()+this._timeRemainingAtPause,this._handle=Object(a.a)(d,Math.max(0,this._timeRemainingAtPause),this),this._timeRemainingAtPause=NaN,this.isPaused=!1),this._pauseCount<0&&(this._pauseCount=0),this):this},fastForward:function(e){return this.isRunning?e<0?this.rewind(-e):0===e?this:(e||(e=this._getRunningTimeUntilNextFiring()),this.isPaused?this._timeRemainingAtPause-=e:(this._nextFiringTime-=e,clearTimeout(this._handle),this._handle=Object(a.a)(d,Math.max(0,this._nextFiringTime-Date.now()),this)),this):this},rewind:function(e){return this.isRunning?e<0?this.fastForward(-e):0===e?this:(e||(e=this.getDelayAfterFireCount(this.fireCount)-this._getRunningTimeUntilNextFiring()),this.isPaused?this._timeRemainingAtPause+=e:(this._nextFiringTime+=e,clearTimeout(this._handle),this._handle=Object(a.a)(d,Math.max(0,this._nextFiringTime-Date.now()),this)),this):this},getDelayAfterFireCount:function(e){var t=this.delays;return t?t[Math.min(t.length-1,e)]:e>=this.timesToFire?1/0:this.delay},fire:function(){this.callAction(this)},owner:Object(l.b)(),_handle:null,_nextFiringTime:NaN,_pauseCount:0,_timeRemainingAtPause:NaN,_getRunningTimeUntilNextFiring:function(){return this.isPaused?this._timeRemainingAtPause:this.get("timeUntilFire")},_scheduleNextFiringOrStop:function(){if(this.isRunning){var e=this.getDelayAfterFireCount(this.fireCount);if(e<1/0){var t=this._nextFiringTime+=e;this._handle=Object(a.a)(d,Math.max(0,t-Date.now()),this)}else this.stop()}},dispose:function(){var e=arguments;this.stop(),this.__s._$4AA$dispose.apply(this,e)},__superMap:{_$4AA$dispose:"dispose"},staticMembers:{__QUALIFIED_CLASS_NAME__:"Timer"}}),d=function(e){e.fireCount++,e.callAction(),e._scheduleNextFiringOrStop()}},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n(123),r=n(65),a=n(36),s=n(34),o={mixinDependencies:[a.a],target:Object(s.b)(),action:Object(s.b)(),callAction:function(){var e=this.action,t=this.target||this;Object(i.a)(e)||Object(r.b)("An action must be a method name only (as a string)",this);var n=t[e];n&&n.call||Object(r.b)("CW.TargetAction: The specified target did not respond to the action `"+e+"`.",this),n.call(t,this)}}},function(e,t,n){},,function(e,t,n){"use strict";n.d(t,"a",function(){return d}),n.d(t,"b",function(){return h});var i=n(251),r=n(80),a=n(252),s=n(1189),o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=["is-","are-","has-"],l=Object(a.a)(["isConnected","isInitialized","isDisposed","isAbstract","propertiesAreInitialized","window"]),u={},d=function(e,t,n){n=n||"";var r=Object(i.a)(e),a=r?l:u;for(var s in e)if(!a[s]&&"_"!==s[0]&&e.hasOwnProperty(s)){var o=r?e.get(s):e[s];h(s,o,t,n)}},h=function(e,t,n,i){i=i||"";var r=void 0===t?"undefined":o(t);if("boolean"===r){for(var a,l,u=Object(s.a)(e),d=0;a=c[d];d++)l=a.length,u.substring(0,l)===a&&(u=u.substring(l));u&&n.classList.toggle(u,t)}else{if("object"===r||"function"===r){var h=t&&t.toString;h!==p&&h!==f&&h!==g||(t=null)}var m=i+Object(s.a)(e);t||0===t?n.setAttribute(m,""+t):n.removeAttribute(m)}},p=Object.prototype.toString,f=Function.prototype.toString,g=r.a.prototype.toString},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n(49),r={mixinDependencies:[i.a],name:i.b.define(),version:i.b.define()}},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var i=n(123),r=n(65),a=n(784),s=n(80),o=n(806),c=n(781),l=s.a.extend(c.a,o.a,{contentType:"application/json",encode:function(e){if(!Object(i.a)(e))try{e=JSON.stringify(e)}catch(t){Object(r.b)("Could not encode object to JSON.",{object:e,error:t})}return e},decode:function(e){if(Object(i.a)(e))try{e=JSON.parse(e)}catch(t){a.b.warn("Could not decode string as JSON",e),e=null}return e},staticMembers:{__QUALIFIED_CLASS_NAME__:"JSONSerializer"}})},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n(49),r=n(54),a={mixinDependencies:[i.a],encode:r.a.create(),decode:r.a.create()}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n(279),r=n(318).a.extend({mixinDependencies:[i.a],applicationDidBecomeActive:function(e){},applicationWillResignActive:function(e){},applicationDidEnterBackground:function(e){},applicationWillEnterForeground:function(e){},staticMembers:{__QUALIFIED_CLASS_NAME__:"UIApplicationDelegate"}})},function(e,t){e.exports='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 118 50"><g><g><path stroke="none" d="M11.5,39.5v10.3h-1v-0.9H2.3v0.9h-1V39.5h4.6v-2.2h1v2.2H11.5z M2.3,43.6h3.6v-3.1H2.3V43.6z M2.3,47.9h3.6v-3.4H2.3V47.9z M7,40.4v3.1h3.6v-3.1H7z M7,47.9h3.6v-3.4H7V47.9z"/><path stroke="none" d="M26.8,41.9v1h-6.6c-1.3,2.6-2.4,4.3-3.3,5.4c2.5-0.1,5-0.3,7.4-0.7c-0.2-0.5-0.5-1-0.8-1.4c-0.3-0.5-0.6-0.9-0.9-1.4l0.8-0.5c0.6,0.9,1.2,1.9,1.7,2.7c0.5,0.8,0.9,1.6,1.3,2.4L25.6,50c-0.1-0.3-0.2-0.5-0.3-0.7c-0.1-0.3-0.3-0.5-0.4-0.7c-1.4,0.2-2.8,0.3-4.3,0.5l-4.7,0.4l-0.3-1c0.1,0,0.1,0,0.1-0.1c0-0.1,0.1-0.1,0.1-0.1c0.9-0.7,2.1-2.5,3.4-5.4h-4.6v-1L26.8,41.9L26.8,41.9z M25.6,38.1V39h-9.7v-0.9H25.6z"/><path stroke="none" d="M33.1,37.2h1.1v4.2h5.1v1h-5.1v5.8h6.2v1H28.2v-1h5L33.1,37.2L33.1,37.2z"/><path stroke="none" d="M47.9,41.9V41h-4v-2.8h4v-0.9h1v0.9h4V41h-4v0.9h5.6v0.9H42.4v-0.9C42.4,41.9,47.9,41.9,47.9,41.9z M49.1,45.2c-0.2,1.7-0.6,2.8-1.3,3.3c-0.7,0.6-2.4,1.1-5,1.3l-0.4-0.9c2.4-0.1,3.7-0.5,4.5-1.1c0.8-0.7,1.2-1.8,1.2-2.8L49.1,45.2zM52.8,47.5h-0.9v-3h-6.8v3.1h-0.9v-4.1h8.6L52.8,47.5z M47.9,39h-3v1.1h3V39z M49.4,47.4c0.9,0.3,1.8,0.5,2.7,0.8c0.8,0.3,1.6,0.6,2.4,0.9l-0.5,0.9c-1.6-0.8-3.3-1.4-5-1.9L49.4,47.4z M52,39h-3.1v1.1H52V39z"/><path stroke="none" d="M58.5,40.8c-0.1,0.7-0.2,1.4-0.4,2.1l-0.6,2l-0.9-0.3c0.3-0.6,0.5-1.3,0.6-2c0.2-0.7,0.3-1.4,0.4-2.1L58.5,40.8zM60.3,37.4v4.1c-0.1,3.7-0.9,6.5-2.6,8.3L57,49.2c1.6-1.6,2.4-4.1,2.4-7.6v-4.1L60.3,37.4z M61.3,40.9c0.3,0.5,0.5,1.1,0.8,1.7c0.3,0.6,0.5,1.1,0.7,1.8L62,44.7c-0.2-0.6-0.5-1.3-0.7-1.9c-0.2-0.6-0.5-1.1-0.8-1.6L61.3,40.9z M64.3,37.7v11.7h-0.9V37.7H64.3zM65.1,40.8l0.8,1.6c0.3,0.6,0.5,1.1,0.7,1.8l-0.8,0.4c-0.2-0.6-0.5-1.2-0.7-1.8c-0.2-0.6-0.5-1.1-0.8-1.6L65.1,40.8z M68,37.3v12.5h-0.9V37.3H68z"/><path stroke="none" d="M78.9,49.6h-2.4c-0.4,0-0.8-0.1-1.2-0.1c-0.3,0-0.6-0.1-0.9-0.2c-0.6-0.2-1.1-0.5-1.5-1c-0.2-0.2-0.3-0.3-0.5-0.3c-0.3,0-0.9,0.7-1.7,2l-0.7-0.7c0.5-0.9,1.2-1.6,2-2.2V43h-2v-1H73v5.1l0.1,0.1c0.1,0.1,0.1,0.1,0.1,0.1c0.3,0.4,0.7,0.7,1.1,0.9c0.6,0.2,1.2,0.4,1.8,0.3h4.5c0.7,0,1.2-0.1,1.6-0.1l-0.3,1h-3L78.9,49.6z M70.8,37.4c0.5,0.4,0.9,0.7,1.3,1.1c0.4,0.3,0.7,0.7,1.1,1.1l-0.7,0.7c-0.7-0.8-1.5-1.5-2.4-2.2L70.8,37.4z M82.1,41.2v0.9h-4.3c-0.4,1-0.7,1.9-1.1,2.6c-0.3,0.6-0.6,1.2-1,1.7c0.8-0.1,1.7-0.2,2.5-0.3c0.7-0.1,1.4-0.3,2-0.4c-0.2-0.4-0.3-0.8-0.5-1.1c-0.2-0.4-0.4-0.7-0.6-1.1l0.8-0.3c0.8,1.4,1.5,2.8,2,4.3L81,47.8c-0.1-0.2-0.1-0.4-0.2-0.7c-0.1-0.2-0.2-0.4-0.3-0.6c-0.9,0.2-1.8,0.4-2.7,0.5c-1,0.1-2.1,0.3-3.3,0.4l-0.3-0.9c0.6-0.2,1.4-1.7,2.5-4.3h-2.8v-0.9L82.1,41.2L82.1,41.2z M81.1,38v0.9h-6.3V38H81.1z"/><path stroke="none" d="M84.3,38.2h3.1v-0.9h0.9v0.9h3.7v-0.9h1v0.9h3.1v0.9H93v0.8h-1v-0.8h-3.7v0.8h-0.9v-0.8h-3.1V38.2z M95.7,40.5V43h-1v-1.8h-9.1V43h-0.9v-2.7L95.7,40.5L95.7,40.5z M94.9,46v3.8h-1v-0.5h-7.4v0.5h-0.9V46H94.9z M86.5,48.4h7.4v-1.7h-7.4V48.4z M86.8,42.3h6.8V45h-6.8V42.3z M92.7,44.3V43h-5v1.3H92.7z"/></g><g><path stroke="none" d="M1.4,9.7h4.5v22.2H1.4V9.7z"/><path stroke="none" d="M10,16.7C10,7.1,15.4,1,23.9,1C30.8,1,36,5.2,36.8,11.6H32c-0.8-3.8-4.2-6.6-8.3-6.4c-5.5,0-9.1,4.5-9.1,11.6s3.5,11.6,9.1,11.6c4.2,0,7.3-2.2,8.3-5.8h4.7c-1.2,6.3-6,10-12.9,10C15.4,32.4,10,26.4,10,16.7z"/><path stroke="none" d="M40.8,1.5h4.6v30.4h-4.5L40.8,1.5z"/><path stroke="none" d="M49,20.8c0-7,4.1-11.4,10.5-11.4S70,13.8,70,20.8s-4,11.4-10.5,11.4C53.1,32.2,49,27.8,49,20.8z M65.4,20.8c0-4.7-2.2-7.6-5.9-7.6s-5.9,2.8-5.9,7.6s2.2,7.6,5.9,7.6S65.4,25.7,65.4,20.8z"/><path stroke="none" d="M92.5,31.9h-4.3v-3.7h-0.1c-1.3,2.7-3.5,4-6.9,4c-4.8,0-7.8-3.1-7.8-8.3V9.7H78v13.4c0,3.3,1.6,5.2,4.7,5.2c3.3,0,5.3-2.3,5.3-5.8V9.7h4.5V31.9L92.5,31.9z"/><path stroke="none" d="M96.1,20.8c0-6.9,3.7-11.3,9.2-11.3c3.1,0,5.7,1.5,7,3.9h0.1v-12h4.5v30.4h-4.4v-3.8h-0.1c-1.3,2.6-3.8,4-7.1,4C99.8,32.1,96.1,27.6,96.1,20.8z M100.8,20.8c0,4.5,2.4,7.5,5.9,7.5c3.5,0,5.8-2.9,5.8-7.5s-2.4-7.4-5.8-7.4S100.8,16.3,100.8,20.8L100.8,20.8z"/><circle stroke="none" cx="3.7" cy="3.9" r="2.7"/></g></g></svg>'},function(e,t){e.exports='<svg version="1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 118 34"><path stroke="none" d="M1 3.9c0-1.4 1.2-2.6 2.6-2.6 1.4 0 2.6 1.1 2.6 2.5S5.1 6.4 3.7 6.4h-.1C2.2 6.5 1 5.3 1 3.9zm.4 5.8h4.5v22H1.4v-22zm8.8 6.9C10.2 7 15.7 1 24.1 1 31 1 36.2 5.2 37 11.5h-4.7c-.8-3.9-4.1-6.4-8.2-6.4-5.5 0-9.1 4.5-9.1 11.5s3.5 11.5 9.1 11.5c4.2 0 7.2-2.2 8.2-5.8H37c-1.2 6.2-5.9 9.9-12.9 9.9-8.5 0-13.9-6-13.9-15.6zM40.9 1.5h4.5v30.2h-4.5V1.5zm18.7 7.9c-6.4 0-10.5 4.4-10.5 11.3S53.2 32 59.6 32s10.5-4.3 10.5-11.3c0-6.9-4-11.3-10.5-11.3zm0 18.8c-3.7 0-5.9-2.8-5.9-7.6 0-4.7 2.2-7.6 5.9-7.6s5.9 2.8 5.9 7.6-2.2 7.6-5.9 7.6zm33 3.5h-4.4v-3.8h-.1c-1.3 2.6-3.5 4-6.9 4-4.8 0-7.8-3.1-7.8-8.1V9.7h4.5v13.2c0 3.3 1.6 5.1 4.7 5.1 3.3 0 5.3-2.3 5.3-5.7V9.7h4.5l.2 22zm19.8-30.2v11.8h-.1c-1.3-2.4-3.8-3.9-6.9-3.9-5.5 0-9.3 4.4-9.3 11.2s3.8 11.2 9.3 11.2c3.2 0 5.7-1.5 7-4h.1v3.7h4.4v-30h-4.5zm-5.8 26.6c-3.5 0-5.9-2.9-5.9-7.4s2.3-7.4 5.9-7.4c3.5 0 5.8 2.9 5.8 7.4.1 4.5-2.3 7.4-5.8 7.4z"/></svg>\n'},function(e,t,n){"use strict";(function(e){var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,t){e.IntlPolyfill=t()}(e,function(){var n="function"==typeof Symbol&&"symbol"===t(Symbol.iterator)?function(e){return void 0===e?"undefined":t(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":t(e)},i=function(){function e(e){this.value=e}function t(t){var n,i;function r(n,i){try{var s=t[n](i),o=s.value;o instanceof e?Promise.resolve(o.value).then(function(e){r("next",e)},function(e){r("throw",e)}):a(s.done?"return":"normal",s.value)}catch(e){a("throw",e)}}function a(e,t){switch(e){case"return":n.resolve({value:t,done:!0});break;case"throw":n.reject(t);break;default:n.resolve({value:t,done:!1})}(n=n.next)?r(n.key,n.arg):i=null}this._invoke=function(e,t){return new Promise(function(a,s){var o={key:e,arg:t,resolve:a,reject:s,next:null};i?i=i.next=o:(n=i=o,r(e,t))})},"function"!=typeof t.return&&(this.return=void 0)}return"function"==typeof Symbol&&Symbol.asyncIterator&&(t.prototype[Symbol.asyncIterator]=function(){return this}),t.prototype.next=function(e){return this._invoke("next",e)},t.prototype.throw=function(e){return this._invoke("throw",e)},t.prototype.return=function(e){return this._invoke("return",e)},{wrap:function(e){return function(){return new t(e.apply(this,arguments))}},await:function(t){return new e(t)}}}(),r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},o=void 0===e?self:e,c=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],i=!0,r=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(i=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){r=!0,a=e}finally{try{!i&&o.return&&o.return()}finally{if(r)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},l=Object.freeze({asyncIterator:function(e){if("function"==typeof Symbol){if(Symbol.asyncIterator){var t=e[Symbol.asyncIterator];if(null!=t)return t.call(e)}if(Symbol.iterator)return e[Symbol.iterator]()}throw new TypeError("Object is not async iterable")},asyncGenerator:i,asyncGeneratorDelegate:function(e,t){var n={},i=!1;function r(n,r){return i=!0,r=new Promise(function(t){t(e[n](r))}),{done:!1,value:t(r)}}return"function"==typeof Symbol&&Symbol.iterator&&(n[Symbol.iterator]=function(){return this}),n.next=function(e){return i?(i=!1,e):r("next",e)},"function"==typeof e.throw&&(n.throw=function(e){if(i)throw i=!1,e;return r("throw",e)}),"function"==typeof e.return&&(n.return=function(e){return r("return",e)}),n},asyncToGenerator:function(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function i(r,a){try{var s=t[r](a),o=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(o).then(function(e){i("next",e)},function(e){i("throw",e)});e(o)}("next")})}},classCallCheck:function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},createClass:r,defineEnumerableProperties:function(e,t){for(var n in t){var i=t[n];i.configurable=i.enumerable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,n,i)}return e},defaults:function(e,t){for(var n=Object.getOwnPropertyNames(t),i=0;i<n.length;i++){var r=n[i],a=Object.getOwnPropertyDescriptor(t,r);a&&a.configurable&&void 0===e[r]&&Object.defineProperty(e,r,a)}return e},defineProperty:a,get:function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0},inherits:function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+(void 0===n?"undefined":t(n)));e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)},interopRequireDefault:function(e){return e&&e.__esModule?e:{default:e}},interopRequireWildcard:function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},newArrowCheck:function(e,t){if(e!==t)throw new TypeError("Cannot instantiate an arrow function")},objectDestructuringEmpty:function(e){if(null==e)throw new TypeError("Cannot destructure undefined")},objectWithoutProperties:function(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n},possibleConstructorReturn:function(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!==(void 0===n?"undefined":t(n))&&"function"!=typeof n?e:n},selfGlobal:o,set:function e(t,n,i,r){var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var s=Object.getPrototypeOf(t);null!==s&&e(s,n,i,r)}else if("value"in a&&a.writable)a.value=i;else{var o=a.set;void 0!==o&&o.call(r,i)}return i},slicedToArray:c,slicedToArrayLoose:function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e)){for(var n,i=[],r=e[Symbol.iterator]();!(n=r.next()).done&&(i.push(n.value),!t||i.length!==t););return i}throw new TypeError("Invalid attempt to destructure non-iterable instance")},taggedTemplateLiteral:function(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))},taggedTemplateLiteralLoose:function(e,t){return e.raw=t,e},temporalRef:function(e,t,n){if(e===n)throw new ReferenceError(t+" is not defined - temporal dead zone");return e},temporalUndefined:{},toArray:function(e){return Array.isArray(e)?e:Array.from(e)},toConsumableArray:function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},typeof:n,extends:s,instanceof:function(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}}),u=function(){var e=function(){};try{return Object.defineProperty(e,"a",{get:function(){return 1}}),Object.defineProperty(e,"prototype",{writable:!1}),1===e.a&&e.prototype instanceof Object}catch(e){return!1}}(),d=!u&&!Object.prototype.__defineGetter__,h=Object.prototype.hasOwnProperty,p=u?Object.defineProperty:function(e,t,n){"get"in n&&e.__defineGetter__?e.__defineGetter__(t,n.get):(!h.call(e,t)||"value"in n)&&(e[t]=n.value)},f=Array.prototype.indexOf||function(e){var t=this;if(!t.length)return-1;for(var n=arguments[1]||0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1},g=Object.create||function(e,t){var n;function i(){}for(var r in i.prototype=e,n=new i,t)h.call(t,r)&&p(n,r,t[r]);return n},m=Array.prototype.slice,v=Array.prototype.concat,_=Array.prototype.push,b=Array.prototype.join,y=Array.prototype.shift,I=Function.prototype.bind||function(e){var t=this,n=m.call(arguments,1);return t.length,function(){return t.apply(e,v.call(n,m.call(arguments)))}},w=g(null),S=Math.random();function C(e){for(var t in e)(e instanceof C||h.call(e,t))&&p(this,t,{value:e[t],enumerable:!0,writable:!0,configurable:!0})}function O(){p(this,"length",{writable:!0,value:0}),arguments.length&&_.apply(this,m.call(arguments))}function A(){if(w.disableRegExpRestore)return function(){};for(var e={lastMatch:RegExp.lastMatch||"",leftContext:RegExp.leftContext,multiline:RegExp.multiline,input:RegExp.input},t=!1,n=1;n<=9;n++)t=(e["$"+n]=RegExp["$"+n])||t;return function(){var n=/[.?*+^$[\]\\(){}|-]/g,i=e.lastMatch.replace(n,"\\$&"),r="";if(t)for(var a=1;a<=9;a++){var s=e["$"+a];s?(s=s.replace(n,"\\$&"),r+=i.substring(0,i.indexOf(s))+"(",i=s+")"+i.substring(i.indexOf(s)+s.length)):(r+="(",i=")"+i)}r=(r+=i).replace(/((^|[^\\])((\\\\)*\\[()])+|[^()])+/g,function(e){return"[\\s\\S]{"+e.replace(/\\(.)/g,"$1").length+"}"});var o=new RegExp(r,e.multiline?"gm":"g");o.lastIndex=e.leftContext.length,o.exec(e.input)}}function E(e){if(null===e)throw new TypeError("Cannot convert null or undefined to object");return"object"===(void 0===e?"undefined":l.typeof(e))?e:Object(e)}function T(e){return"number"==typeof e?e:Number(e)}function M(e){return h.call(e,"__getInternalProperties")?e.__getInternalProperties(S):g(null)}C.prototype=g(null),O.prototype=g(null);var D=RegExp("^(?:(?:[a-z]{2,3}(?:-[a-z]{3}(?:-[a-z]{3}){0,2})?|[a-z]{4}|[a-z]{5,8})(?:-[a-z]{4})?(?:-(?:[a-z]{2}|\\d{3}))?(?:-(?:[a-z0-9]{5,8}|\\d[a-z0-9]{3}))*(?:-[0-9a-wy-z](?:-[a-z0-9]{2,8})+)*(?:-x(?:-[a-z0-9]{1,8})+)?|x(?:-[a-z0-9]{1,8})+|(?:(?:en-GB-oed|i-(?:ami|bnn|default|enochian|hak|klingon|lux|mingo|navajo|pwn|tao|tay|tsu)|sgn-(?:BE-FR|BE-NL|CH-DE))|(?:art-lojban|cel-gaulish|no-bok|no-nyn|zh-(?:guoyu|hakka|min|min-nan|xiang))))$","i"),L=RegExp("^(?!x).*?-((?:[a-z0-9]{5,8}|\\d[a-z0-9]{3}))-(?:\\w{4,8}-(?!x-))*\\1\\b","i"),N=RegExp("^(?!x).*?-([0-9a-wy-z])-(?:\\w+-(?!x-))*\\1\\b","i"),P=RegExp("-[0-9a-wy-z](?:-[a-z0-9]{2,8})+","ig"),R=void 0,x={tags:{"art-lojban":"jbo","i-ami":"ami","i-bnn":"bnn","i-hak":"hak","i-klingon":"tlh","i-lux":"lb","i-navajo":"nv","i-pwn":"pwn","i-tao":"tao","i-tay":"tay","i-tsu":"tsu","no-bok":"nb","no-nyn":"nn","sgn-BE-FR":"sfb","sgn-BE-NL":"vgt","sgn-CH-DE":"sgg","zh-guoyu":"cmn","zh-hakka":"hak","zh-min-nan":"nan","zh-xiang":"hsn","sgn-BR":"bzs","sgn-CO":"csn","sgn-DE":"gsg","sgn-DK":"dsl","sgn-ES":"ssp","sgn-FR":"fsl","sgn-GB":"bfi","sgn-GR":"gss","sgn-IE":"isg","sgn-IT":"ise","sgn-JP":"jsl","sgn-MX":"mfs","sgn-NI":"ncs","sgn-NL":"dse","sgn-NO":"nsl","sgn-PT":"psr","sgn-SE":"swl","sgn-US":"ase","sgn-ZA":"sfs","zh-cmn":"cmn","zh-cmn-Hans":"cmn-Hans","zh-cmn-Hant":"cmn-Hant","zh-gan":"gan","zh-wuu":"wuu","zh-yue":"yue"},subtags:{BU:"MM",DD:"DE",FX:"FR",TP:"TL",YD:"YE",ZR:"CD",heploc:"alalc97",in:"id",iw:"he",ji:"yi",jw:"jv",mo:"ro",ayx:"nun",bjd:"drl",ccq:"rki",cjr:"mom",cka:"cmr",cmk:"xch",drh:"khk",drw:"prs",gav:"dev",hrr:"jal",ibi:"opa",kgh:"kml",lcq:"ppr",mst:"mry",myt:"mry",sca:"hle",tie:"ras",tkk:"twm",tlw:"weo",tnf:"prs",ybd:"rki",yma:"lrr"},extLang:{aao:["aao","ar"],abh:["abh","ar"],abv:["abv","ar"],acm:["acm","ar"],acq:["acq","ar"],acw:["acw","ar"],acx:["acx","ar"],acy:["acy","ar"],adf:["adf","ar"],ads:["ads","sgn"],aeb:["aeb","ar"],aec:["aec","ar"],aed:["aed","sgn"],aen:["aen","sgn"],afb:["afb","ar"],afg:["afg","sgn"],ajp:["ajp","ar"],apc:["apc","ar"],apd:["apd","ar"],arb:["arb","ar"],arq:["arq","ar"],ars:["ars","ar"],ary:["ary","ar"],arz:["arz","ar"],ase:["ase","sgn"],asf:["asf","sgn"],asp:["asp","sgn"],asq:["asq","sgn"],asw:["asw","sgn"],auz:["auz","ar"],avl:["avl","ar"],ayh:["ayh","ar"],ayl:["ayl","ar"],ayn:["ayn","ar"],ayp:["ayp","ar"],bbz:["bbz","ar"],bfi:["bfi","sgn"],bfk:["bfk","sgn"],bjn:["bjn","ms"],bog:["bog","sgn"],bqn:["bqn","sgn"],bqy:["bqy","sgn"],btj:["btj","ms"],bve:["bve","ms"],bvl:["bvl","sgn"],bvu:["bvu","ms"],bzs:["bzs","sgn"],cdo:["cdo","zh"],cds:["cds","sgn"],cjy:["cjy","zh"],cmn:["cmn","zh"],coa:["coa","ms"],cpx:["cpx","zh"],csc:["csc","sgn"],csd:["csd","sgn"],cse:["cse","sgn"],csf:["csf","sgn"],csg:["csg","sgn"],csl:["csl","sgn"],csn:["csn","sgn"],csq:["csq","sgn"],csr:["csr","sgn"],czh:["czh","zh"],czo:["czo","zh"],doq:["doq","sgn"],dse:["dse","sgn"],dsl:["dsl","sgn"],dup:["dup","ms"],ecs:["ecs","sgn"],esl:["esl","sgn"],esn:["esn","sgn"],eso:["eso","sgn"],eth:["eth","sgn"],fcs:["fcs","sgn"],fse:["fse","sgn"],fsl:["fsl","sgn"],fss:["fss","sgn"],gan:["gan","zh"],gds:["gds","sgn"],gom:["gom","kok"],gse:["gse","sgn"],gsg:["gsg","sgn"],gsm:["gsm","sgn"],gss:["gss","sgn"],gus:["gus","sgn"],hab:["hab","sgn"],haf:["haf","sgn"],hak:["hak","zh"],hds:["hds","sgn"],hji:["hji","ms"],hks:["hks","sgn"],hos:["hos","sgn"],hps:["hps","sgn"],hsh:["hsh","sgn"],hsl:["hsl","sgn"],hsn:["hsn","zh"],icl:["icl","sgn"],ils:["ils","sgn"],inl:["inl","sgn"],ins:["ins","sgn"],ise:["ise","sgn"],isg:["isg","sgn"],isr:["isr","sgn"],jak:["jak","ms"],jax:["jax","ms"],jcs:["jcs","sgn"],jhs:["jhs","sgn"],jls:["jls","sgn"],jos:["jos","sgn"],jsl:["jsl","sgn"],jus:["jus","sgn"],kgi:["kgi","sgn"],knn:["knn","kok"],kvb:["kvb","ms"],kvk:["kvk","sgn"],kvr:["kvr","ms"],kxd:["kxd","ms"],lbs:["lbs","sgn"],lce:["lce","ms"],lcf:["lcf","ms"],liw:["liw","ms"],lls:["lls","sgn"],lsg:["lsg","sgn"],lsl:["lsl","sgn"],lso:["lso","sgn"],lsp:["lsp","sgn"],lst:["lst","sgn"],lsy:["lsy","sgn"],ltg:["ltg","lv"],lvs:["lvs","lv"],lzh:["lzh","zh"],max:["max","ms"],mdl:["mdl","sgn"],meo:["meo","ms"],mfa:["mfa","ms"],mfb:["mfb","ms"],mfs:["mfs","sgn"],min:["min","ms"],mnp:["mnp","zh"],mqg:["mqg","ms"],mre:["mre","sgn"],msd:["msd","sgn"],msi:["msi","ms"],msr:["msr","sgn"],mui:["mui","ms"],mzc:["mzc","sgn"],mzg:["mzg","sgn"],mzy:["mzy","sgn"],nan:["nan","zh"],nbs:["nbs","sgn"],ncs:["ncs","sgn"],nsi:["nsi","sgn"],nsl:["nsl","sgn"],nsp:["nsp","sgn"],nsr:["nsr","sgn"],nzs:["nzs","sgn"],okl:["okl","sgn"],orn:["orn","ms"],ors:["ors","ms"],pel:["pel","ms"],pga:["pga","ar"],pks:["pks","sgn"],prl:["prl","sgn"],prz:["prz","sgn"],psc:["psc","sgn"],psd:["psd","sgn"],pse:["pse","ms"],psg:["psg","sgn"],psl:["psl","sgn"],pso:["pso","sgn"],psp:["psp","sgn"],psr:["psr","sgn"],pys:["pys","sgn"],rms:["rms","sgn"],rsi:["rsi","sgn"],rsl:["rsl","sgn"],sdl:["sdl","sgn"],sfb:["sfb","sgn"],sfs:["sfs","sgn"],sgg:["sgg","sgn"],sgx:["sgx","sgn"],shu:["shu","ar"],slf:["slf","sgn"],sls:["sls","sgn"],sqk:["sqk","sgn"],sqs:["sqs","sgn"],ssh:["ssh","ar"],ssp:["ssp","sgn"],ssr:["ssr","sgn"],svk:["svk","sgn"],swc:["swc","sw"],swh:["swh","sw"],swl:["swl","sgn"],syy:["syy","sgn"],tmw:["tmw","ms"],tse:["tse","sgn"],tsm:["tsm","sgn"],tsq:["tsq","sgn"],tss:["tss","sgn"],tsy:["tsy","sgn"],tza:["tza","sgn"],ugn:["ugn","sgn"],ugy:["ugy","sgn"],ukl:["ukl","sgn"],uks:["uks","sgn"],urk:["urk","ms"],uzn:["uzn","uz"],uzs:["uzs","uz"],vgt:["vgt","sgn"],vkk:["vkk","ms"],vkt:["vkt","ms"],vsi:["vsi","sgn"],vsl:["vsl","sgn"],vsv:["vsv","sgn"],wuu:["wuu","zh"],xki:["xki","sgn"],xml:["xml","sgn"],xmm:["xmm","ms"],xms:["xms","sgn"],yds:["yds","sgn"],ysl:["ysl","sgn"],yue:["yue","zh"],zib:["zib","sgn"],zlm:["zlm","ms"],zmi:["zmi","ms"],zsl:["zsl","sgn"],zsm:["zsm","ms"]}};function F(e){for(var t=e.length;t--;){var n=e.charAt(t);n>="a"&&n<="z"&&(e=e.slice(0,t)+n.toUpperCase()+e.slice(t+1))}return e}function k(e){return!!D.test(e)&&!L.test(e)&&!N.test(e)}function V(e){for(var t=void 0,n=void 0,i=1,r=(n=(e=e.toLowerCase()).split("-")).length;i<r;i++)if(2===n[i].length)n[i]=n[i].toUpperCase();else if(4===n[i].length)n[i]=n[i].charAt(0).toUpperCase()+n[i].slice(1);else if(1===n[i].length&&"x"!==n[i])break;(t=(e=b.call(n,"-")).match(P))&&t.length>1&&(t.sort(),e=e.replace(RegExp("(?:"+P.source+")+","i"),b.call(t,""))),h.call(x.tags,e)&&(e=x.tags[e]);for(var a=1,s=(n=e.split("-")).length;a<s;a++)h.call(x.subtags,n[a])?n[a]=x.subtags[n[a]]:h.call(x.extLang,n[a])&&(n[a]=x.extLang[n[a]][0],1===a&&x.extLang[n[1]][1]===n[0]&&(n=m.call(n,a++),s-=1));return b.call(n,"-")}var j=/^[A-Z]{3}$/,B=/-u(?:-[0-9a-z]{2,8})+/gi;function U(e){if(void 0===e)return new O;for(var t=new O,n=E(e="string"==typeof e?[e]:e),i=function(e){var t=function(e){var t=T(e);return isNaN(t)?0:0===t||-0===t||t===1/0||t===-1/0?t:t<0?-1*Math.floor(Math.abs(t)):Math.floor(Math.abs(t))}(e);return t<=0?0:t===1/0?Math.pow(2,53)-1:Math.min(t,Math.pow(2,53)-1)}(n.length),r=0;r<i;){var a=String(r);if(a in n){var s=n[a];if(null===s||"string"!=typeof s&&"object"!==(void 0===s?"undefined":l.typeof(s)))throw new TypeError("String or Object type expected");var o=String(s);if(!k(o))throw new RangeError("'"+o+"' is not a structurally valid language tag");o=V(o),-1===f.call(t,o)&&_.call(t,o)}r++}return t}function W(e,t){for(var n=t;n;){if(f.call(e,n)>-1)return n;var i=n.lastIndexOf("-");if(i<0)return;i>=2&&"-"===n.charAt(i-2)&&(i-=2),n=n.substring(0,i)}}function G(e,t){for(var n=0,i=t.length,r=void 0,a=void 0,s=void 0;n<i&&!r;)a=t[n],r=W(e,s=String(a).replace(B,"")),n++;var o=new C;if(void 0!==r){if(o["[[locale]]"]=r,String(a)!==String(s)){var c=a.match(B)[0],l=a.indexOf("-u-");o["[[extension]]"]=c,o["[[extensionIndex]]"]=l}}else o["[[locale]]"]=R;return o}function H(e,t,n,i,r){if(0===e.length)throw new ReferenceError("No locale data has been provided for this object yet.");var a,s=(a="lookup"===n["[[localeMatcher]]"]?G(e,t):function(e,t){return G(e,t)}(e,t))["[[locale]]"],o=void 0,c=void 0;h.call(a,"[[extension]]")&&(c=(o=function(e){var t=e.length;if(0===t)return[];for(var n=[],i=!0,r=3,a=r,s=r;r<t;){if(45===e.codePointAt(r)){if(r-a==2){if(a-s>1){var o=e.substring(s,a-1);n.push(o)}var c=e.substring(a,r);n.push(c),s=r+1,i=!1}else if(!0===i){var l=e.substring(a,r);n.push(l),s=r+1}a=r+1}r+=1}if(t-a==2){if(a-s>1){var u=e.substring(s,a-1);n.push(u)}s=a}var d=e.substring(s,t);return n.push(d),n}(a["[[extension]]"])).length);var l=new C;l["[[dataLocale]]"]=s;for(var u="-u",d=0,p=i.length;d<p;){var g=i[d],m=r[s][g],v=m[0],_="",b=f;if(void 0!==o){var y=b.call(o,g);if(-1!==y)if(y+1<c&&o[y+1].length>2){var I=o[y+1];-1!==b.call(m,I)&&(_="-"+g+"-"+(v=I))}else-1!==b(m,"true")&&(v="true")}if(h.call(n,"[["+g+"]]")){var w=n["[["+g+"]]"];-1!==b.call(m,w)&&w!==v&&(v=w,_="")}l["[["+g+"]]"]=v,u+=_,d++}if(u.length>2){var S=s.indexOf("-x-");-1===S?s+=u:s=s.substring(0,S)+u+s.substring(S),s=V(s)}return l["[[locale]]"]=s,l}function $(e,t){for(var n=t.length,i=new O,r=0;r<n;){var a=t[r];void 0!==W(e,String(a).replace(B,""))&&_.call(i,a),r++}return m.call(i)}function z(e,t,n){var i,r=void 0;if(void 0!==n&&void 0!==(r=(n=new C(E(n))).localeMatcher)&&"lookup"!==(r=String(r))&&"best fit"!==r)throw new RangeError('matcher should be "lookup" or "best fit"');for(var a in i=void 0===r||"best fit"===r?function(e,t){return $(e,t)}(e,t):$(e,t))h.call(i,a)&&p(i,a,{writable:!1,configurable:!1,value:i[a]});try{p(i,"length",{writable:!1})}catch(e){}return i}function K(e,t,n,i,r){var a=e[t];if(void 0!==a){if(a="boolean"===n?Boolean(a):"string"===n?String(a):a,void 0!==i&&-1===f.call(i,a))throw new RangeError("'"+a+"' is not an allowed value for `"+t+"`");return a}return r}function Q(e,t,n,i,r){var a=e[t];if(void 0!==a){if(a=Number(a),isNaN(a)||a<n||a>i)throw new RangeError("Value is not a number or outside accepted range");return Math.floor(a)}return r}var q={};Object.defineProperty(q,"getCanonicalLocales",{enumerable:!1,configurable:!0,writable:!0,value:function(e){for(var t=U(e),n=[],i=t.length,r=0;r<i;)n[r]=t[r],r++;return n}});var Y={BHD:3,BYR:0,XOF:0,BIF:0,XAF:0,CLF:4,CLP:0,KMF:0,DJF:0,XPF:0,GNF:0,ISK:0,IQD:3,JPY:0,JOD:3,KRW:0,KWD:3,LYD:3,OMR:3,PYG:0,RWF:0,TND:3,UGX:0,UYI:0,VUV:0,VND:0};function Z(){var e=arguments[0],t=arguments[1];return this&&this!==q?function(e,t,n){var i=M(e),r=A();if(!0===i["[[initializedIntlObject]]"])throw new TypeError("`this` object has already been initialized as an Intl object");p(e,"__getInternalProperties",{value:function(){if(arguments[0]===S)return i}}),i["[[initializedIntlObject]]"]=!0;var a=U(t);n=void 0===n?{}:E(n);var s=new C,o=K(n,"localeMatcher","string",new O("lookup","best fit"),"best fit");s["[[localeMatcher]]"]=o;var c=w.NumberFormat["[[localeData]]"],l=H(w.NumberFormat["[[availableLocales]]"],a,s,w.NumberFormat["[[relevantExtensionKeys]]"],c);i["[[locale]]"]=l["[[locale]]"],i["[[numberingSystem]]"]=l["[[nu]]"],i["[[dataLocale]]"]=l["[[dataLocale]]"];var u=l["[[dataLocale]]"],h=K(n,"style","string",new O("decimal","percent","currency"),"decimal");i["[[style]]"]=h;var f,g=K(n,"currency","string");if(void 0!==g&&(f=F(String(g)),!1===j.test(f)))throw new RangeError("'"+g+"' is not a valid currency code");if("currency"===h&&void 0===g)throw new TypeError("Currency code is required when style is currency");var m=void 0;"currency"===h&&(g=g.toUpperCase(),i["[[currency]]"]=g,m=function(e){return void 0!==Y[e]?Y[e]:2}(g));var v=K(n,"currencyDisplay","string",new O("code","symbol","name"),"symbol");"currency"===h&&(i["[[currencyDisplay]]"]=v),J(i,n,"currency"===h?m:0),void 0===i["[[maximumFractionDigits]]"]&&(i["[[maximumFractionDigits]]"]="currency"===h?Math.max(i["[[minimumFractionDigits]]"],m):"percent"===h?Math.max(i["[[minimumFractionDigits]]"],0):Math.max(i["[[minimumFractionDigits]]"],3));var _=K(n,"useGrouping","boolean",void 0,!0);i["[[useGrouping]]"]=_;var b=c[u].patterns[h];return i["[[positivePattern]]"]=b.positivePattern,i["[[negativePattern]]"]=b.negativePattern,i["[[boundFormat]]"]=void 0,i["[[initializedNumberFormat]]"]=!0,d&&(e.format=X.call(e)),r(),e}(E(this),e,t):new q.NumberFormat(e,t)}function J(e,t,n){var i=Q(t,"minimumIntegerDigits",1,21,1),r=Q(t,"minimumFractionDigits",0,20,n),a=Q(t,"maximumFractionDigits",r,20),s=t.minimumSignificantDigits,o=t.maximumSignificantDigits;e["[[minimumIntegerDigits]]"]=i,e["[[minimumFractionDigits]]"]=r,e["[[maximumFractionDigits]]"]=a,void 0===s&&void 0===o||(o=Q(t,"maximumSignificantDigits",s=Q(t,"minimumSignificantDigits",1,21,1),21,21),e["[[minimumSignificantDigits]]"]=s,e["[[maximumSignificantDigits]]"]=o)}function X(){var e=null!==this&&"object"===l.typeof(this)&&M(this);if(!e||!e["[[initializedNumberFormat]]"])throw new TypeError("`this` value for format() is not an initialized Intl.NumberFormat object.");if(void 0===e["[[boundFormat]]"]){var t=I.call(function(e){return ne(this,Number(e))},this);e["[[boundFormat]]"]=t}return e["[[boundFormat]]"]}function ee(e,t){var n=M(e);return h.call(n,"[[minimumSignificantDigits]]")&&h.call(n,"[[maximumSignificantDigits]]")?function(e,t,n){var i=n,r=void 0,a=void 0;if(0===e)r=b.call(Array(i+1),"0"),a=0;else{a=function(e){if("function"==typeof Math.log10)return Math.floor(Math.log10(e));var t=Math.round(Math.log(e)*Math.LOG10E);return t-(Number("1e"+t)>e)}(Math.abs(e));var s=Math.round(Math.exp(Math.abs(a-i+1)*Math.LN10));r=String(Math.round(a-i+1<0?e*s:e/s))}if(a>=i)return r+b.call(Array(a-i+1+1),"0");if(a===i-1)return r;if(a>=0?r=r.slice(0,a+1)+"."+r.slice(a+1):a<0&&(r="0."+b.call(Array(1-(a+1)),"0")+r),r.indexOf(".")>=0&&n>t){for(var o=n-t;o>0&&"0"===r.charAt(r.length-1);)r=r.slice(0,-1),o--;"."===r.charAt(r.length-1)&&(r=r.slice(0,-1))}return r}(t,n["[[minimumSignificantDigits]]"],n["[[maximumSignificantDigits]]"]):function(e,t,n,i){var r,a=i,s=Math.pow(10,a)*e,o=0===s?"0":s.toFixed(0),c=(r=o.indexOf("e"))>-1?o.slice(r+1):0;c&&(o=o.slice(0,r).replace(".",""),o+=b.call(Array(c-(o.length-1)+1),"0"));var l=void 0;if(0!==a){var u=o.length;if(u<=a)o=b.call(Array(a+1-u+1),"0")+o,u=a+1;var d=o.substring(0,u-a);o=d+"."+o.substring(u-a,o.length),l=d.length}else l=o.length;for(var h=i-n;h>0&&"0"===o.slice(-1);)o=o.slice(0,-1),h--;("."===o.slice(-1)&&(o=o.slice(0,-1)),l<t)&&(o=b.call(Array(t-l+1),"0")+o);return o}(t,n["[[minimumIntegerDigits]]"],n["[[minimumFractionDigits]]"],n["[[maximumFractionDigits]]"])}function te(e,t){var n=M(e),i=n["[[dataLocale]]"],r=n["[[numberingSystem]]"],a=w.NumberFormat["[[localeData]]"][i],s=a.symbols[r]||a.symbols.latn,o=void 0;!isNaN(t)&&t<0?(t=-t,o=n["[[negativePattern]]"]):o=n["[[positivePattern]]"];for(var c=new O,l=o.indexOf("{",0),u=0,d=0,h=o.length;l>-1&&l<h;){if(-1===(u=o.indexOf("}",l)))throw new Error;if(l>d){var p=o.substring(d,l);_.call(c,{"[[type]]":"literal","[[value]]":p})}var f=o.substring(l+1,u);if("number"===f)if(isNaN(t)){var g=s.nan;_.call(c,{"[[type]]":"nan","[[value]]":g})}else if(isFinite(t)){"percent"===n["[[style]]"]&&(t*=100);var m=ee(e,t);ie[r]?function(){var e=ie[r];m=String(m).replace(/\d/g,function(t){return e[t]})}():m=String(m);var v=void 0,b=void 0,I=m.indexOf(".",0);if(I>0?(v=m.substring(0,I),b=m.substring(I+1,I.length)):(v=m,b=void 0),!0===n["[[useGrouping]]"]){var S=s.group,C=[],A=a.patterns.primaryGroupSize||3,E=a.patterns.secondaryGroupSize||A;if(v.length>A){var T=v.length-A,D=T%E,L=v.slice(0,D);for(L.length&&_.call(C,L);D<T;)_.call(C,v.slice(D,D+E)),D+=E;_.call(C,v.slice(T))}else _.call(C,v);if(0===C.length)throw new Error;for(;C.length;){var N=y.call(C);_.call(c,{"[[type]]":"integer","[[value]]":N}),C.length&&_.call(c,{"[[type]]":"group","[[value]]":S})}}else _.call(c,{"[[type]]":"integer","[[value]]":v});if(void 0!==b){var P=s.decimal;_.call(c,{"[[type]]":"decimal","[[value]]":P}),_.call(c,{"[[type]]":"fraction","[[value]]":b})}}else{var R=s.infinity;_.call(c,{"[[type]]":"infinity","[[value]]":R})}else if("plusSign"===f){var x=s.plusSign;_.call(c,{"[[type]]":"plusSign","[[value]]":x})}else if("minusSign"===f){var F=s.minusSign;_.call(c,{"[[type]]":"minusSign","[[value]]":F})}else if("percentSign"===f&&"percent"===n["[[style]]"]){var k=s.percentSign;_.call(c,{"[[type]]":"literal","[[value]]":k})}else if("currency"===f&&"currency"===n["[[style]]"]){var V=n["[[currency]]"],j=void 0;"code"===n["[[currencyDisplay]]"]?j=V:"symbol"===n["[[currencyDisplay]]"]?j=a.currencies[V]||V:"name"===n["[[currencyDisplay]]"]&&(j=V),_.call(c,{"[[type]]":"currency","[[value]]":j})}else{var B=o.substring(l,u);_.call(c,{"[[type]]":"literal","[[value]]":B})}d=u+1,l=o.indexOf("{",d)}if(d<h){var U=o.substring(d,h);_.call(c,{"[[type]]":"literal","[[value]]":U})}return c}function ne(e,t){for(var n=te(e,t),i="",r=0;n.length>r;r++)i+=n[r]["[[value]]"];return i}p(q,"NumberFormat",{configurable:!0,writable:!0,value:Z}),p(q.NumberFormat,"prototype",{writable:!1}),w.NumberFormat={"[[availableLocales]]":[],"[[relevantExtensionKeys]]":["nu"],"[[localeData]]":{}},p(q.NumberFormat,"supportedLocalesOf",{configurable:!0,writable:!0,value:I.call(function(e){if(!h.call(this,"[[availableLocales]]"))throw new TypeError("supportedLocalesOf() is not a constructor");var t=A(),n=arguments[1],i=this["[[availableLocales]]"],r=U(e);return t(),z(i,r,n)},w.NumberFormat)}),p(q.NumberFormat.prototype,"format",{configurable:!0,get:X}),Object.defineProperty(q.NumberFormat.prototype,"formatToParts",{configurable:!0,enumerable:!1,writable:!0,value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=null!==this&&"object"===l.typeof(this)&&M(this);if(!t||!t["[[initializedNumberFormat]]"])throw new TypeError("`this` value for formatToParts() is not an initialized Intl.NumberFormat object.");return function(t,n){for(var i=te(t,Number(e)),r=[],a=0,s=0;i.length>s;s++){var o=i[s],c={};c.type=o["[[type]]"],c.value=o["[[value]]"],r[a]=c,a+=1}return r}(this)}});var ie={arab:["٠","١","٢","٣","٤","٥","٦","٧","٨","٩"],arabext:["۰","۱","۲","۳","۴","۵","۶","۷","۸","۹"],bali:["᭐","᭑","᭒","᭓","᭔","᭕","᭖","᭗","᭘","᭙"],beng:["০","১","২","৩","৪","৫","৬","৭","৮","৯"],deva:["०","१","२","३","४","५","६","७","८","९"],fullwide:["０","１","２","３","４","５","６","７","８","９"],gujr:["૦","૧","૨","૩","૪","૫","૬","૭","૮","૯"],guru:["੦","੧","੨","੩","੪","੫","੬","੭","੮","੯"],hanidec:["〇","一","二","三","四","五","六","七","八","九"],khmr:["០","១","២","៣","៤","៥","៦","៧","៨","៩"],knda:["೦","೧","೨","೩","೪","೫","೬","೭","೮","೯"],laoo:["໐","໑","໒","໓","໔","໕","໖","໗","໘","໙"],latn:["0","1","2","3","4","5","6","7","8","9"],limb:["᥆","᥇","᥈","᥉","᥊","᥋","᥌","᥍","᥎","᥏"],mlym:["൦","൧","൨","൩","൪","൫","൬","൭","൮","൯"],mong:["᠐","᠑","᠒","᠓","᠔","᠕","᠖","᠗","᠘","᠙"],mymr:["၀","၁","၂","၃","၄","၅","၆","၇","၈","၉"],orya:["୦","୧","୨","୩","୪","୫","୬","୭","୮","୯"],tamldec:["௦","௧","௨","௩","௪","௫","௬","௭","௮","௯"],telu:["౦","౧","౨","౩","౪","౫","౬","౭","౮","౯"],thai:["๐","๑","๒","๓","๔","๕","๖","๗","๘","๙"],tibt:["༠","༡","༢","༣","༤","༥","༦","༧","༨","༩"]};p(q.NumberFormat.prototype,"resolvedOptions",{configurable:!0,writable:!0,value:function(){var e=void 0,t=new C,n=["locale","numberingSystem","style","currency","currencyDisplay","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","useGrouping"],i=null!==this&&"object"===l.typeof(this)&&M(this);if(!i||!i["[[initializedNumberFormat]]"])throw new TypeError("`this` value for resolvedOptions() is not an initialized Intl.NumberFormat object.");for(var r=0,a=n.length;r<a;r++)h.call(i,e="[["+n[r]+"]]")&&(t[n[r]]={value:i[e],writable:!0,configurable:!0,enumerable:!0});return g({},t)}});var re=/(?:[Eec]{1,6}|G{1,5}|[Qq]{1,5}|(?:[yYur]+|U{1,5})|[ML]{1,5}|d{1,2}|D{1,3}|F{1}|[abB]{1,5}|[hkHK]{1,2}|w{1,2}|W{1}|m{1,2}|s{1,2}|[zZOvVxX]{1,4})(?=([^']*'[^']*')*[^']*$)/g,ae=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,se=/[rqQASjJgwWIQq]/,oe=["era","year","month","day","weekday","quarter"],ce=["hour","minute","second","hour12","timeZoneName"];function le(e){for(var t=0;t<ce.length;t+=1)if(e.hasOwnProperty(ce[t]))return!1;return!0}function ue(e){for(var t=0;t<oe.length;t+=1)if(e.hasOwnProperty(oe[t]))return!1;return!0}function de(e,t){for(var n={_:{}},i=0;i<oe.length;i+=1)e[oe[i]]&&(n[oe[i]]=e[oe[i]]),e._[oe[i]]&&(n._[oe[i]]=e._[oe[i]]);for(var r=0;r<ce.length;r+=1)t[ce[r]]&&(n[ce[r]]=t[ce[r]]),t._[ce[r]]&&(n._[ce[r]]=t._[ce[r]]);return n}function he(e){return e.pattern12=e.extendedPattern.replace(/'([^']*)'/g,function(e,t){return t||"'"}),e.pattern=e.pattern12.replace("{ampm}","").replace(ae,""),e}function pe(e,t){switch(e.charAt(0)){case"G":return t.era=["short","short","short","long","narrow"][e.length-1],"{era}";case"y":case"Y":case"u":case"U":case"r":return t.year=2===e.length?"2-digit":"numeric","{year}";case"Q":case"q":return t.quarter=["numeric","2-digit","short","long","narrow"][e.length-1],"{quarter}";case"M":case"L":return t.month=["numeric","2-digit","short","long","narrow"][e.length-1],"{month}";case"w":return t.week=2===e.length?"2-digit":"numeric","{weekday}";case"W":return t.week="numeric","{weekday}";case"d":return t.day=2===e.length?"2-digit":"numeric","{day}";case"D":case"F":case"g":return t.day="numeric","{day}";case"E":return t.weekday=["short","short","short","long","narrow","short"][e.length-1],"{weekday}";case"e":return t.weekday=["numeric","2-digit","short","long","narrow","short"][e.length-1],"{weekday}";case"c":return t.weekday=["numeric",void 0,"short","long","narrow","short"][e.length-1],"{weekday}";case"a":case"b":case"B":return t.hour12=!0,"{ampm}";case"h":case"H":return t.hour=2===e.length?"2-digit":"numeric","{hour}";case"k":case"K":return t.hour12=!0,t.hour=2===e.length?"2-digit":"numeric","{hour}";case"m":return t.minute=2===e.length?"2-digit":"numeric","{minute}";case"s":return t.second=2===e.length?"2-digit":"numeric","{second}";case"S":case"A":return t.second="numeric","{second}";case"z":case"Z":case"O":case"v":case"V":case"X":case"x":return t.timeZoneName=e.length<4?"short":"long","{timeZoneName}"}}function fe(e,t){if(!se.test(t)){var n={originalPattern:t,_:{}};return n.extendedPattern=t.replace(re,function(e){return pe(e,n._)}),e.replace(re,function(e){return pe(e,n)}),he(n)}}var ge={second:{numeric:"s","2-digit":"ss"},minute:{numeric:"m","2-digit":"mm"},year:{numeric:"y","2-digit":"yy"},day:{numeric:"d","2-digit":"dd"},month:{numeric:"L","2-digit":"LL",narrow:"LLLLL",short:"LLL",long:"LLLL"},weekday:{narrow:"ccccc",short:"ccc",long:"cccc"}},me=g(null,{narrow:{},short:{},long:{}});function ve(e,t,n,i,r){var a=e[t]&&e[t][n]?e[t][n]:e.gregory[n],s={narrow:["short","long"],short:["long","narrow"],long:["short","narrow"]},o=h.call(a,i)?a[i]:h.call(a,s[i][0])?a[s[i][0]]:a[s[i][1]];return null!==r?o[r]:o}function _e(){var e=arguments[0],t=arguments[1];return this&&this!==q?function(e,t,n){var i=M(e),r=A();if(!0===i["[[initializedIntlObject]]"])throw new TypeError("`this` object has already been initialized as an Intl object");p(e,"__getInternalProperties",{value:function(){if(arguments[0]===S)return i}}),i["[[initializedIntlObject]]"]=!0;var s=U(t);n=ye(n,"any","date");var o=new C,c=K(n,"localeMatcher","string",new O("lookup","best fit"),"best fit");o["[[localeMatcher]]"]=c;var l=w.DateTimeFormat,u=l["[[localeData]]"],g=H(l["[[availableLocales]]"],s,o,l["[[relevantExtensionKeys]]"],u);i["[[locale]]"]=g["[[locale]]"],i["[[calendar]]"]=g["[[ca]]"],i["[[numberingSystem]]"]=g["[[nu]]"],i["[[dataLocale]]"]=g["[[dataLocale]]"];var m=g["[[dataLocale]]"],v=n.timeZone;if(void 0!==v&&"UTC"!==(v=F(v)))throw new RangeError("timeZone is not supported.");for(var _ in i["[[timeZone]]"]=v,o=new C,be)if(h.call(be,_)){var b=K(n,_,"string",be[_]);o["[["+_+"]]"]=b}var y=void 0,I=u[m],E=function(e){return"[object Array]"===Object.prototype.toString.call(e)?e:function(e){var t=e.availableFormats,n=e.timeFormats,i=e.dateFormats,r=[],a=void 0,s=void 0,o=void 0,c=void 0,l=void 0,u=[],d=[];for(a in t)t.hasOwnProperty(a)&&(o=fe(a,s=t[a]))&&(r.push(o),le(o)?d.push(o):ue(o)&&u.push(o));for(a in n)n.hasOwnProperty(a)&&(o=fe(a,s=n[a]))&&(r.push(o),u.push(o));for(a in i)i.hasOwnProperty(a)&&(o=fe(a,s=i[a]))&&(r.push(o),d.push(o));for(c=0;c<u.length;c+=1)for(l=0;l<d.length;l+=1)s="long"===d[l].month?d[l].weekday?e.full:e.long:"short"===d[l].month?e.medium:e.short,(o=de(d[l],u[c])).originalPattern=s,o.extendedPattern=s.replace("{0}",u[c].extendedPattern).replace("{1}",d[l].extendedPattern).replace(/^[,\s]+|[,\s]+$/gi,""),r.push(he(o));return r}(e)}(I.formats);if(c=K(n,"formatMatcher","string",new O("basic","best fit"),"best fit"),I.formats=E,"basic"===c)y=function(e,t){for(var n=-1/0,i=void 0,r=0,a=t.length;r<a;){var s=t[r],o=0;for(var c in be)if(h.call(be,c)){var l=e["[["+c+"]]"],u=h.call(s,c)?s[c]:void 0;if(void 0===l&&void 0!==u)o-=20;else if(void 0!==l&&void 0===u)o-=120;else{var d=["2-digit","numeric","narrow","short","long"],p=f.call(d,l),g=f.call(d,u),m=Math.max(Math.min(g-p,2),-2);2===m?o-=6:1===m?o-=3:-1===m?o-=6:-2===m&&(o-=8)}}o>n&&(n=o,i=s),r++}return i}(o,E);else{var T=K(n,"hour12","boolean");o.hour12=void 0===T?I.hour12:T,y=function(e,t){var n=[];for(var i in be)h.call(be,i)&&void 0!==e["[["+i+"]]"]&&n.push(i);if(1===n.length){var r=function(e,t){var n;if(ge[e]&&ge[e][t])return n={originalPattern:ge[e][t],_:a({},e,t),extendedPattern:"{"+e+"}"},a(n,e,t),a(n,"pattern12","{"+e+"}"),a(n,"pattern","{"+e+"}"),n}(n[0],e["[["+n[0]+"]]"]);if(r)return r}for(var s=-1/0,o=void 0,c=0,l=t.length;c<l;){var u=t[c],d=0;for(var p in be)if(h.call(be,p)){var g=e["[["+p+"]]"],m=h.call(u,p)?u[p]:void 0;if(g!==(h.call(u._,p)?u._[p]:void 0)&&(d-=2),void 0===g&&void 0!==m)d-=20;else if(void 0!==g&&void 0===m)d-=120;else{var v=["2-digit","numeric","narrow","short","long"],_=f.call(v,g),b=f.call(v,m),y=Math.max(Math.min(b-_,2),-2);b<=1&&_>=2||b>=2&&_<=1?y>0?d-=6:y<0&&(d-=8):y>1?d-=3:y<-1&&(d-=6)}}u._.hour12!==e.hour12&&(d-=1),d>s&&(s=d,o=u),c++}return o}(o,E)}for(var D in be)if(h.call(be,D)&&h.call(y,D)){var L=y[D];L=y._&&h.call(y._,D)?y._[D]:L,i["[["+D+"]]"]=L}var N=void 0,P=K(n,"hour12","boolean");if(i["[[hour]]"])if(P=void 0===P?I.hour12:P,i["[[hour12]]"]=P,!0===P){var R=I.hourNo0;i["[[hourNo0]]"]=R,N=y.pattern12}else N=y.pattern;else N=y.pattern;return i["[[pattern]]"]=N,i["[[boundFormat]]"]=void 0,i["[[initializedDateTimeFormat]]"]=!0,d&&(e.format=Ie.call(e)),r(),e}(E(this),e,t):new q.DateTimeFormat(e,t)}p(q,"DateTimeFormat",{configurable:!0,writable:!0,value:_e}),p(_e,"prototype",{writable:!1});var be={weekday:["narrow","short","long"],era:["narrow","short","long"],year:["2-digit","numeric"],month:["2-digit","numeric","narrow","short","long"],day:["2-digit","numeric"],hour:["2-digit","numeric"],minute:["2-digit","numeric"],second:["2-digit","numeric"],timeZoneName:["short","long"]};function ye(e,t,n){if(void 0===e)e=null;else{var i=E(e);for(var r in e=new C,i)e[r]=i[r]}e=g(e);var a=!0;return"date"!==t&&"any"!==t||void 0===e.weekday&&void 0===e.year&&void 0===e.month&&void 0===e.day||(a=!1),"time"!==t&&"any"!==t||void 0===e.hour&&void 0===e.minute&&void 0===e.second||(a=!1),!a||"date"!==n&&"all"!==n||(e.year=e.month=e.day="numeric"),!a||"time"!==n&&"all"!==n||(e.hour=e.minute=e.second="numeric"),e}function Ie(){var e=null!==this&&"object"===l.typeof(this)&&M(this);if(!e||!e["[[initializedDateTimeFormat]]"])throw new TypeError("`this` value for format() is not an initialized Intl.DateTimeFormat object.");if(void 0===e["[[boundFormat]]"]){var t=I.call(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return Se(this,void 0===e?Date.now():T(e))},this);e["[[boundFormat]]"]=t}return e["[[boundFormat]]"]}function we(e,t){if(!isFinite(t))throw new RangeError("Invalid valid date passed to format");var n=e.__getInternalProperties(S);A();for(var i,r,a,s,o=n["[[locale]]"],c=new q.NumberFormat([o],{useGrouping:!1}),l=new q.NumberFormat([o],{minimumIntegerDigits:2,useGrouping:!1}),u=(i=t,n["[[calendar]]"],r=n["[[timeZone]]"],new C({"[[weekday]]":(a=new Date(i))[(s="get"+(r||""))+"Day"](),"[[era]]":+(a[s+"FullYear"]()>=0),"[[year]]":a[s+"FullYear"](),"[[month]]":a[s+"Month"](),"[[day]]":a[s+"Date"](),"[[hour]]":a[s+"Hours"](),"[[minute]]":a[s+"Minutes"](),"[[second]]":a[s+"Seconds"](),"[[inDST]]":!1})),d=n["[[pattern]]"],h=new O,p=0,f=d.indexOf("{"),g=0,m=n["[[dataLocale]]"],v=w.DateTimeFormat["[[localeData]]"][m].calendars,b=n["[[calendar]]"];-1!==f;){var y=void 0;if(-1===(g=d.indexOf("}",f)))throw new Error("Unclosed pattern");f>p&&_.call(h,{type:"literal",value:d.substring(p,f)});var I=d.substring(f+1,g);if(be.hasOwnProperty(I)){var E=n["[["+I+"]]"],T=u["[["+I+"]]"];if("year"===I&&T<=0?T=1-T:"month"===I?T++:"hour"===I&&!0===n["[[hour12]]"]&&0==(T%=12)&&!0===n["[[hourNo0]]"]&&(T=12),"numeric"===E)y=ne(c,T);else if("2-digit"===E)(y=ne(l,T)).length>2&&(y=y.slice(-2));else if(E in me)switch(I){case"month":y=ve(v,b,"months",E,u["[["+I+"]]"]);break;case"weekday":try{y=ve(v,b,"days",E,u["[["+I+"]]"])}catch(e){throw new Error("Could not find weekday data for locale "+o)}break;case"timeZoneName":y="";break;case"era":try{y=ve(v,b,"eras",E,u["[["+I+"]]"])}catch(e){throw new Error("Could not find era data for locale "+o)}break;default:y=u["[["+I+"]]"]}_.call(h,{type:I,value:y})}else"ampm"===I?(y=ve(v,b,"dayPeriods",u["[[hour]]"]>11?"pm":"am",null),_.call(h,{type:"dayPeriod",value:y})):_.call(h,{type:"literal",value:d.substring(f,g+1)});p=g+1,f=d.indexOf("{",p)}return g<d.length-1&&_.call(h,{type:"literal",value:d.substr(g+1)}),h}function Se(e,t){for(var n=we(e,t),i="",r=0;n.length>r;r++)i+=n[r].value;return i}w.DateTimeFormat={"[[availableLocales]]":[],"[[relevantExtensionKeys]]":["ca","nu"],"[[localeData]]":{}},p(q.DateTimeFormat,"supportedLocalesOf",{configurable:!0,writable:!0,value:I.call(function(e){if(!h.call(this,"[[availableLocales]]"))throw new TypeError("supportedLocalesOf() is not a constructor");var t=A(),n=arguments[1],i=this["[[availableLocales]]"],r=U(e);return t(),z(i,r,n)},w.NumberFormat)}),p(q.DateTimeFormat.prototype,"format",{configurable:!0,get:Ie}),Object.defineProperty(q.DateTimeFormat.prototype,"formatToParts",{enumerable:!1,writable:!0,configurable:!0,value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=null!==this&&"object"===l.typeof(this)&&M(this);if(!t||!t["[[initializedDateTimeFormat]]"])throw new TypeError("`this` value for formatToParts() is not an initialized Intl.DateTimeFormat object.");return function(t,n){for(var i=we(t,void 0===e?Date.now():T(e)),r=[],a=0;i.length>a;a++){var s=i[a];r.push({type:s.type,value:s.value})}return r}(this)}}),p(q.DateTimeFormat.prototype,"resolvedOptions",{writable:!0,configurable:!0,value:function(){var e=void 0,t=new C,n=["locale","calendar","numberingSystem","timeZone","hour12","weekday","era","year","month","day","hour","minute","second","timeZoneName"],i=null!==this&&"object"===l.typeof(this)&&M(this);if(!i||!i["[[initializedDateTimeFormat]]"])throw new TypeError("`this` value for resolvedOptions() is not an initialized Intl.DateTimeFormat object.");for(var r=0,a=n.length;r<a;r++)h.call(i,e="[["+n[r]+"]]")&&(t[n[r]]={value:i[e],writable:!0,configurable:!0,enumerable:!0});return g({},t)}});var Ce=q.__localeSensitiveProtos={Number:{},Date:{}};Ce.Number.toLocaleString=function(){if("[object Number]"!==Object.prototype.toString.call(this))throw new TypeError("`this` value must be a number for Number.prototype.toLocaleString()");return ne(new Z(arguments[0],arguments[1]),this)},Ce.Date.toLocaleString=function(){if("[object Date]"!==Object.prototype.toString.call(this))throw new TypeError("`this` value must be a Date instance for Date.prototype.toLocaleString()");var e=+this;if(isNaN(e))return"Invalid Date";var t=arguments[0],n=arguments[1];return Se(new _e(t,n=ye(n,"any","all")),e)},Ce.Date.toLocaleDateString=function(){if("[object Date]"!==Object.prototype.toString.call(this))throw new TypeError("`this` value must be a Date instance for Date.prototype.toLocaleDateString()");var e=+this;if(isNaN(e))return"Invalid Date";var t=arguments[0],n=arguments[1];return Se(new _e(t,n=ye(n,"date","date")),e)},Ce.Date.toLocaleTimeString=function(){if("[object Date]"!==Object.prototype.toString.call(this))throw new TypeError("`this` value must be a Date instance for Date.prototype.toLocaleTimeString()");var e=+this;if(isNaN(e))return"Invalid Date";var t=arguments[0],n=arguments[1];return Se(new _e(t,n=ye(n,"time","time")),e)};var Oe=[function(e,t){return"other"},function(e,t){return t?"other":1==e?"one":"other"},function(e,t){return t?"other":0==e||1==e?"one":"other"},function(e,t){var n=!String(e).split(".")[1];return t?"other":1==e&&n?"one":"other"}],Ae={af:Oe[1],ak:Oe[2],am:function(e,t){return t?"other":e>=0&&e<=1?"one":"other"},ar:function(e,t){var n=String(e).split("."),i=Number(n[0])==e&&n[0].slice(-2);return t?"other":0==e?"zero":1==e?"one":2==e?"two":i>=3&&i<=10?"few":i>=11&&i<=99?"many":"other"},ars:function(e,t){var n=String(e).split("."),i=Number(n[0])==e&&n[0].slice(-2);return t?"other":0==e?"zero":1==e?"one":2==e?"two":i>=3&&i<=10?"few":i>=11&&i<=99?"many":"other"},as:function(e,t){return t?1==e||5==e||7==e||8==e||9==e||10==e?"one":2==e||3==e?"two":4==e?"few":6==e?"many":"other":e>=0&&e<=1?"one":"other"},asa:Oe[1],ast:Oe[3],az:function(e,t){var n=String(e).split(".")[0],i=n.slice(-1),r=n.slice(-2),a=n.slice(-3);return t?1==i||2==i||5==i||7==i||8==i||20==r||50==r||70==r||80==r?"one":3==i||4==i||100==a||200==a||300==a||400==a||500==a||600==a||700==a||800==a||900==a?"few":0==n||6==i||40==r||60==r||90==r?"many":"other":1==e?"one":"other"},be:function(e,t){var n=String(e).split("."),i=Number(n[0])==e,r=i&&n[0].slice(-1),a=i&&n[0].slice(-2);return t?2!=r&&3!=r||12==a||13==a?"other":"few":1==r&&11!=a?"one":r>=2&&r<=4&&(a<12||a>14)?"few":i&&0==r||r>=5&&r<=9||a>=11&&a<=14?"many":"other"},bem:Oe[1],bez:Oe[1],bg:Oe[1],bh:Oe[2],bm:Oe[0],bn:function(e,t){return t?1==e||5==e||7==e||8==e||9==e||10==e?"one":2==e||3==e?"two":4==e?"few":6==e?"many":"other":e>=0&&e<=1?"one":"other"},bo:Oe[0],br:function(e,t){var n=String(e).split("."),i=Number(n[0])==e,r=i&&n[0].slice(-1),a=i&&n[0].slice(-2),s=i&&n[0].slice(-6);return t?"other":1==r&&11!=a&&71!=a&&91!=a?"one":2==r&&12!=a&&72!=a&&92!=a?"two":(3==r||4==r||9==r)&&(a<10||a>19)&&(a<70||a>79)&&(a<90||a>99)?"few":0!=e&&i&&0==s?"many":"other"},brx:Oe[1],bs:function(e,t){var n=String(e).split("."),i=n[0],r=n[1]||"",a=!n[1],s=i.slice(-1),o=i.slice(-2),c=r.slice(-1),l=r.slice(-2);return t?"other":a&&1==s&&11!=o||1==c&&11!=l?"one":a&&s>=2&&s<=4&&(o<12||o>14)||c>=2&&c<=4&&(l<12||l>14)?"few":"other"},ca:function(e,t){var n=!String(e).split(".")[1];return t?1==e||3==e?"one":2==e?"two":4==e?"few":"other":1==e&&n?"one":"other"},ce:Oe[1],cgg:Oe[1],chr:Oe[1],ckb:Oe[1],cs:function(e,t){var n=String(e).split("."),i=n[0],r=!n[1];return t?"other":1==e&&r?"one":i>=2&&i<=4&&r?"few":r?"other":"many"},cy:function(e,t){return t?0==e||7==e||8==e||9==e?"zero":1==e?"one":2==e?"two":3==e||4==e?"few":5==e||6==e?"many":"other":0==e?"zero":1==e?"one":2==e?"two":3==e?"few":6==e?"many":"other"},da:function(e,t){var n=String(e).split("."),i=n[0],r=Number(n[0])==e;return t?"other":1!=e&&(r||0!=i&&1!=i)?"other":"one"},de:Oe[3],dsb:function(e,t){var n=String(e).split("."),i=n[0],r=n[1]||"",a=!n[1],s=i.slice(-2),o=r.slice(-2);return t?"other":a&&1==s||1==o?"one":a&&2==s||2==o?"two":a&&(3==s||4==s)||3==o||4==o?"few":"other"},dv:Oe[1],dz:Oe[0],ee:Oe[1],el:Oe[1],en:function(e,t){var n=String(e).split("."),i=!n[1],r=Number(n[0])==e,a=r&&n[0].slice(-1),s=r&&n[0].slice(-2);return t?1==a&&11!=s?"one":2==a&&12!=s?"two":3==a&&13!=s?"few":"other":1==e&&i?"one":"other"},eo:Oe[1],es:Oe[1],et:Oe[3],eu:Oe[1],fa:function(e,t){return t?"other":e>=0&&e<=1?"one":"other"},ff:function(e,t){return t?"other":e>=0&&e<2?"one":"other"},fi:Oe[3],fil:function(e,t){var n=String(e).split("."),i=n[0],r=n[1]||"",a=!n[1],s=i.slice(-1),o=r.slice(-1);return t?1==e?"one":"other":a&&(1==i||2==i||3==i)||a&&4!=s&&6!=s&&9!=s||!a&&4!=o&&6!=o&&9!=o?"one":"other"},fo:Oe[1],fr:function(e,t){return t?1==e?"one":"other":e>=0&&e<2?"one":"other"},fur:Oe[1],fy:Oe[3],ga:function(e,t){var n=String(e).split("."),i=Number(n[0])==e;return t?1==e?"one":"other":1==e?"one":2==e?"two":i&&e>=3&&e<=6?"few":i&&e>=7&&e<=10?"many":"other"},gd:function(e,t){var n=String(e).split("."),i=Number(n[0])==e;return t?"other":1==e||11==e?"one":2==e||12==e?"two":i&&e>=3&&e<=10||i&&e>=13&&e<=19?"few":"other"},gl:Oe[3],gsw:Oe[1],gu:function(e,t){return t?1==e?"one":2==e||3==e?"two":4==e?"few":6==e?"many":"other":e>=0&&e<=1?"one":"other"},guw:Oe[2],gv:function(e,t){var n=String(e).split("."),i=n[0],r=!n[1],a=i.slice(-1),s=i.slice(-2);return t?"other":r&&1==a?"one":r&&2==a?"two":!r||0!=s&&20!=s&&40!=s&&60!=s&&80!=s?r?"other":"many":"few"},ha:Oe[1],haw:Oe[1],he:function(e,t){var n=String(e).split("."),i=n[0],r=!n[1],a=Number(n[0])==e,s=a&&n[0].slice(-1);return t?"other":1==e&&r?"one":2==i&&r?"two":r&&(e<0||e>10)&&a&&0==s?"many":"other"},hi:function(e,t){return t?1==e?"one":2==e||3==e?"two":4==e?"few":6==e?"many":"other":e>=0&&e<=1?"one":"other"},hr:function(e,t){var n=String(e).split("."),i=n[0],r=n[1]||"",a=!n[1],s=i.slice(-1),o=i.slice(-2),c=r.slice(-1),l=r.slice(-2);return t?"other":a&&1==s&&11!=o||1==c&&11!=l?"one":a&&s>=2&&s<=4&&(o<12||o>14)||c>=2&&c<=4&&(l<12||l>14)?"few":"other"},hsb:function(e,t){var n=String(e).split("."),i=n[0],r=n[1]||"",a=!n[1],s=i.slice(-2),o=r.slice(-2);return t?"other":a&&1==s||1==o?"one":a&&2==s||2==o?"two":a&&(3==s||4==s)||3==o||4==o?"few":"other"},hu:function(e,t){return t?1==e||5==e?"one":"other":1==e?"one":"other"},hy:function(e,t){return t?1==e?"one":"other":e>=0&&e<2?"one":"other"},id:Oe[0],ig:Oe[0],ii:Oe[0],in:Oe[0],is:function(e,t){var n=String(e).split("."),i=n[0],r=Number(n[0])==e,a=i.slice(-1),s=i.slice(-2);return t?"other":r&&1==a&&11!=s||!r?"one":"other"},it:function(e,t){var n=!String(e).split(".")[1];return t?11==e||8==e||80==e||800==e?"many":"other":1==e&&n?"one":"other"},iu:function(e,t){return t?"other":1==e?"one":2==e?"two":"other"},iw:function(e,t){var n=String(e).split("."),i=n[0],r=!n[1],a=Number(n[0])==e,s=a&&n[0].slice(-1);return t?"other":1==e&&r?"one":2==i&&r?"two":r&&(e<0||e>10)&&a&&0==s?"many":"other"},ja:Oe[0],jbo:Oe[0],jgo:Oe[1],ji:Oe[3],jmc:Oe[1],jv:Oe[0],jw:Oe[0],ka:function(e,t){var n=String(e).split(".")[0],i=n.slice(-2);return t?1==n?"one":0==n||i>=2&&i<=20||40==i||60==i||80==i?"many":"other":1==e?"one":"other"},kab:function(e,t){return t?"other":e>=0&&e<2?"one":"other"},kaj:Oe[1],kcg:Oe[1],kde:Oe[0],kea:Oe[0],kk:function(e,t){var n=String(e).split("."),i=Number(n[0])==e,r=i&&n[0].slice(-1);return t?6==r||9==r||i&&0==r&&0!=e?"many":"other":1==e?"one":"other"},kkj:Oe[1],kl:Oe[1],km:Oe[0],kn:function(e,t){return t?"other":e>=0&&e<=1?"one":"other"},ko:Oe[0],ks:Oe[1],ksb:Oe[1],ksh:function(e,t){return t?"other":0==e?"zero":1==e?"one":"other"},ku:Oe[1],kw:function(e,t){return t?"other":1==e?"one":2==e?"two":"other"},ky:Oe[1],lag:function(e,t){var n=String(e).split(".")[0];return t?"other":0==e?"zero":0!=n&&1!=n||0==e?"other":"one"},lb:Oe[1],lg:Oe[1],lkt:Oe[0],ln:Oe[2],lo:function(e,t){return t&&1==e?"one":"other"},lt:function(e,t){var n=String(e).split("."),i=n[1]||"",r=Number(n[0])==e,a=r&&n[0].slice(-1),s=r&&n[0].slice(-2);return t?"other":1==a&&(s<11||s>19)?"one":a>=2&&a<=9&&(s<11||s>19)?"few":0!=i?"many":"other"},lv:function(e,t){var n=String(e).split("."),i=n[1]||"",r=i.length,a=Number(n[0])==e,s=a&&n[0].slice(-1),o=a&&n[0].slice(-2),c=i.slice(-2),l=i.slice(-1);return t?"other":a&&0==s||o>=11&&o<=19||2==r&&c>=11&&c<=19?"zero":1==s&&11!=o||2==r&&1==l&&11!=c||2!=r&&1==l?"one":"other"},mas:Oe[1],mg:Oe[2],mgo:Oe[1],mk:function(e,t){var n=String(e).split("."),i=n[0],r=n[1]||"",a=!n[1],s=i.slice(-1),o=i.slice(-2),c=r.slice(-1);return t?1==s&&11!=o?"one":2==s&&12!=o?"two":7!=s&&8!=s||17==o||18==o?"other":"many":a&&1==s||1==c?"one":"other"},ml:Oe[1],mn:Oe[1],mo:function(e,t){var n=String(e).split("."),i=!n[1],r=Number(n[0])==e&&n[0].slice(-2);return t?1==e?"one":"other":1==e&&i?"one":!i||0==e||1!=e&&r>=1&&r<=19?"few":"other"},mr:function(e,t){return t?1==e?"one":2==e||3==e?"two":4==e?"few":"other":e>=0&&e<=1?"one":"other"},ms:function(e,t){return t&&1==e?"one":"other"},mt:function(e,t){var n=String(e).split("."),i=Number(n[0])==e&&n[0].slice(-2);return t?"other":1==e?"one":0==e||i>=2&&i<=10?"few":i>=11&&i<=19?"many":"other"},my:Oe[0],nah:Oe[1],naq:function(e,t){return t?"other":1==e?"one":2==e?"two":"other"},nb:Oe[1],nd:Oe[1],ne:function(e,t){var n=String(e).split("."),i=Number(n[0])==e;return t?i&&e>=1&&e<=4?"one":"other":1==e?"one":"other"},nl:Oe[3],nn:Oe[1],nnh:Oe[1],no:Oe[1],nqo:Oe[0],nr:Oe[1],nso:Oe[2],ny:Oe[1],nyn:Oe[1],om:Oe[1],or:Oe[1],os:Oe[1],pa:Oe[2],pap:Oe[1],pl:function(e,t){var n=String(e).split("."),i=n[0],r=!n[1],a=i.slice(-1),s=i.slice(-2);return t?"other":1==e&&r?"one":r&&a>=2&&a<=4&&(s<12||s>14)?"few":r&&1!=i&&(0==a||1==a)||r&&a>=5&&a<=9||r&&s>=12&&s<=14?"many":"other"},prg:function(e,t){var n=String(e).split("."),i=n[1]||"",r=i.length,a=Number(n[0])==e,s=a&&n[0].slice(-1),o=a&&n[0].slice(-2),c=i.slice(-2),l=i.slice(-1);return t?"other":a&&0==s||o>=11&&o<=19||2==r&&c>=11&&c<=19?"zero":1==s&&11!=o||2==r&&1==l&&11!=c||2!=r&&1==l?"one":"other"},ps:Oe[1],pt:function(e,t){var n=String(e).split("."),i=Number(n[0])==e;return t?"other":i&&e>=0&&e<=2&&2!=e?"one":"other"},"pt-PT":Oe[3],rm:Oe[1],ro:function(e,t){var n=String(e).split("."),i=!n[1],r=Number(n[0])==e&&n[0].slice(-2);return t?1==e?"one":"other":1==e&&i?"one":!i||0==e||1!=e&&r>=1&&r<=19?"few":"other"},rof:Oe[1],root:Oe[0],ru:function(e,t){var n=String(e).split("."),i=n[0],r=!n[1],a=i.slice(-1),s=i.slice(-2);return t?"other":r&&1==a&&11!=s?"one":r&&a>=2&&a<=4&&(s<12||s>14)?"few":r&&0==a||r&&a>=5&&a<=9||r&&s>=11&&s<=14?"many":"other"},rwk:Oe[1],sah:Oe[0],saq:Oe[1],sdh:Oe[1],se:function(e,t){return t?"other":1==e?"one":2==e?"two":"other"},seh:Oe[1],ses:Oe[0],sg:Oe[0],sh:function(e,t){var n=String(e).split("."),i=n[0],r=n[1]||"",a=!n[1],s=i.slice(-1),o=i.slice(-2),c=r.slice(-1),l=r.slice(-2);return t?"other":a&&1==s&&11!=o||1==c&&11!=l?"one":a&&s>=2&&s<=4&&(o<12||o>14)||c>=2&&c<=4&&(l<12||l>14)?"few":"other"},shi:function(e,t){var n=String(e).split("."),i=Number(n[0])==e;return t?"other":e>=0&&e<=1?"one":i&&e>=2&&e<=10?"few":"other"},si:function(e,t){var n=String(e).split("."),i=n[0],r=n[1]||"";return t?"other":0==e||1==e||0==i&&1==r?"one":"other"},sk:function(e,t){var n=String(e).split("."),i=n[0],r=!n[1];return t?"other":1==e&&r?"one":i>=2&&i<=4&&r?"few":r?"other":"many"},sl:function(e,t){var n=String(e).split("."),i=n[0],r=!n[1],a=i.slice(-2);return t?"other":r&&1==a?"one":r&&2==a?"two":r&&(3==a||4==a)||!r?"few":"other"},sma:function(e,t){return t?"other":1==e?"one":2==e?"two":"other"},smi:function(e,t){return t?"other":1==e?"one":2==e?"two":"other"},smj:function(e,t){return t?"other":1==e?"one":2==e?"two":"other"},smn:function(e,t){return t?"other":1==e?"one":2==e?"two":"other"},sms:function(e,t){return t?"other":1==e?"one":2==e?"two":"other"},sn:Oe[1],so:Oe[1],sq:function(e,t){var n=String(e).split("."),i=Number(n[0])==e,r=i&&n[0].slice(-1),a=i&&n[0].slice(-2);return t?1==e?"one":4==r&&14!=a?"many":"other":1==e?"one":"other"},sr:function(e,t){var n=String(e).split("."),i=n[0],r=n[1]||"",a=!n[1],s=i.slice(-1),o=i.slice(-2),c=r.slice(-1),l=r.slice(-2);return t?"other":a&&1==s&&11!=o||1==c&&11!=l?"one":a&&s>=2&&s<=4&&(o<12||o>14)||c>=2&&c<=4&&(l<12||l>14)?"few":"other"},ss:Oe[1],ssy:Oe[1],st:Oe[1],sv:function(e,t){var n=String(e).split("."),i=!n[1],r=Number(n[0])==e,a=r&&n[0].slice(-1),s=r&&n[0].slice(-2);return t?1!=a&&2!=a||11==s||12==s?"other":"one":1==e&&i?"one":"other"},sw:Oe[3],syr:Oe[1],ta:Oe[1],te:Oe[1],teo:Oe[1],th:Oe[0],ti:Oe[2],tig:Oe[1],tk:Oe[1],tl:function(e,t){var n=String(e).split("."),i=n[0],r=n[1]||"",a=!n[1],s=i.slice(-1),o=r.slice(-1);return t?1==e?"one":"other":a&&(1==i||2==i||3==i)||a&&4!=s&&6!=s&&9!=s||!a&&4!=o&&6!=o&&9!=o?"one":"other"},tn:Oe[1],to:Oe[0],tr:Oe[1],ts:Oe[1],tzm:function(e,t){var n=String(e).split("."),i=Number(n[0])==e;return t?"other":0==e||1==e||i&&e>=11&&e<=99?"one":"other"},ug:Oe[1],uk:function(e,t){var n=String(e).split("."),i=n[0],r=!n[1],a=Number(n[0])==e,s=a&&n[0].slice(-1),o=a&&n[0].slice(-2),c=i.slice(-1),l=i.slice(-2);return t?3==s&&13!=o?"few":"other":r&&1==c&&11!=l?"one":r&&c>=2&&c<=4&&(l<12||l>14)?"few":r&&0==c||r&&c>=5&&c<=9||r&&l>=11&&l<=14?"many":"other"},ur:Oe[3],uz:Oe[1],ve:Oe[1],vi:function(e,t){return t&&1==e?"one":"other"},vo:Oe[1],vun:Oe[1],wa:Oe[2],wae:Oe[1],wo:Oe[0],xh:Oe[1],xog:Oe[1],yi:Oe[3],yo:Oe[0],yue:Oe[0],zh:Oe[0],zu:function(e,t){return t?"other":e>=0&&e<=1?"one":"other"}};function Ee(){var e=arguments[0],t=arguments[1];return this&&this!==q?function(e,t,n){var i=M(e);if(!0===i["[[InitializedIntlObject]]"])throw new TypeError("`this` object has already been initialized as an Intl object");p(e,"__getInternalProperties",{value:function(){if(arguments[0]===S)return i}}),i["[[InitializedIntlObject]]"]=!0;var r=U(t),a=K(n=void 0===n?{}:E(n),"type","string",new O("cardinal","ordinal"),"cardinal");i["[[type]]"]=a;var s=new C,o=K(n,"localeMatcher","string",new O("lookup","best fit"),"best fit");s["[[localeMatcher]]"]=o,J(w,n,0),void 0===w["[[maximumFractionDigits]]"]&&(w["[[maximumFractionDigits]]"]=Math.max(w["[[minimumFractionDigits]]"],3));var c=w.PluralRules["[[localeData]]"],l=H(w.PluralRules["[[availableLocales]]"],r,s,w.PluralRules["[[relevantExtensionKeys]]"],c);return i["[[locale]]"]=l["[[locale]]"],i["[[InitializedPluralRules]]"]=!0,e}(E(this),e,t):new q.PluralRules(e,t)}if(p(q,"PluralRules",{configurable:!0,writable:!0,value:Ee}),p(Ee,"prototype",{writable:!1}),w.PluralRules={"[[availableLocales]]":Object.keys(Ae),"[[relevantExtensionKeys]]":[],"[[localeData]]":{}},p(q.PluralRules,"supportedLocalesOf",{configurable:!0,writable:!0,value:I.call(function(e){if(!h.call(this,"[[availableLocales]]"))throw new TypeError("supportedLocalesOf() is not a constructor");var t=A(),n=arguments[1],i=this["[[availableLocales]]"],r=U(e);return t(),z(i,r,n)},w.PluralRules)}),p(q.PluralRules.prototype,"select",{configurable:!0,value:function(e){return function(e,t){if(!Number.isFinite(t))return"other";var n=M(e);return function(e,t,n){for(var i=e;i;i=i.replace(/[-_]?[^-_]*$/,"")){var r=Ae[i];if(r)return r(n,"ordinal"===t)}return"other"}(n["[[locale]]"],n["[[type]]"],t)}(this,Number(e))}}),p(q.PluralRules.prototype,"resolvedOptions",{configurable:!0,writable:!0,value:function(){var e=void 0,t=new C,n=["locale","type","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits"],i=null!==this&&"object"===l.typeof(this)&&M(this);if(!i||!i["[[InitializedPluralRules]]"])throw new TypeError("`this` value for resolvedOptions() is not an initialized Intl.PluralRules object.");for(var r=0,a=n.length;r<a;r++)h.call(i,e="[["+n[r]+"]]")&&(t[n[r]]={value:i[e],writable:!0,configurable:!0,enumerable:!0});return g({},t)}}),p(q,"__applyLocaleSensitivePrototypes",{writable:!0,configurable:!0,value:function(){for(var e in p(Number.prototype,"toLocaleString",{writable:!0,configurable:!0,value:Ce.Number.toLocaleString}),p(Date.prototype,"toLocaleString",{writable:!0,configurable:!0,value:Ce.Date.toLocaleString}),Ce.Date)h.call(Ce.Date,e)&&p(Date.prototype,e,{writable:!0,configurable:!0,value:Ce.Date[e]})}}),p(q,"__addLocaleData",{value:function(e){if(!k(e.locale))throw new Error('Invalid language tag "'+e.locale+'" when calling __addLocaleData("'+e.locale+'", ...) to register new locale data.');!function(e,t){if(!e.number)throw new Error("Object passed doesn't contain locale data for Intl.NumberFormat");var n=void 0,i=[t],r=t.split("-");for(r.length>2&&4===r[1].length&&_.call(i,r[0]+"-"+r[2]);n=y.call(i);)_.call(w.NumberFormat["[[availableLocales]]"],n),w.NumberFormat["[[localeData]]"][n]=e.number,e.date&&(e.date.nu=e.number.nu,_.call(w.DateTimeFormat["[[availableLocales]]"],n),w.DateTimeFormat["[[localeData]]"][n]=e.date);void 0===R&&(R=t)}(e,e.locale)}}),p(q,"__disableRegExpRestore",{value:function(){w.disableRegExpRestore=!0}}),"undefined"==typeof Intl)try{window.Intl=q,q.__applyLocaleSensitivePrototypes()}catch(e){}return q})}).call(this,n(6))},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var i=n(80),r=n(41),a=n(805),s=n(36),o=n(34),c=n(86),l=0,u=i.a.extend(s.a,{id:Object(r.c)({get:function(){return this._id||(this._id=++l)}}),body:null,bodySerializer:Object(r.c)(a.a.sharedInstance),timeout:null,state:Object(o.b)(c.b.UNSENT),staticMembers:{__QUALIFIED_CLASS_NAME__:"Message"}})},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n(80),r=n(553),a=n(41),s=i.a.extend(r.a,{status:0,headers:"",body:Object(a.c)({get:function(){return this._cachedBody||(this._cachedBody=this.deserialize(this.get("encodedBody")))}}),encodedBody:Object(a.c)(),toJSON:function(){return this.getPropertiesAsObject("status","headers","encodedBody")},_cachedBody:Object(a.c)(),staticMembers:{__QUALIFIED_CLASS_NAME__:"Response"}})},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i={REGULAR:"REGULAR",COMPACT:"COMPACT"};Object.freeze(i)},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n(49),r=n(82),a={mixinDependencies:[i.a],eventsToReport:r.a.define()}},function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return p});var i=n(409),r=n(120),a=n(125),s=n(36),o=n(784),c=n(34),l=n(180),u=n(93),d=n(825),h=n(824),p=(n(822),i.a.extend(h.a,{staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"VIEWOUTLET",tagname:"view",name:"backBarButtonItem"},{type:"VIEWOUTLET",tagname:"view",name:"leftBarButtonItem"},{type:"MULTIVIEWOUTLET",tagname:"views",classes:["bar-button-items","left-bar-button-items"],name:"leftBarButtonItems"},{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"title",attributes:{}}],classes:["title-text"]},{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"subtitle",attributes:{}}],classes:["subtitle-text"]}],classes:["title-content"],name:"titleContent"}],classes:["title",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"subtitle",truevalue:"has-subtitle",attributes:{}}],name:"titleWrapper"},{type:"MULTIVIEWOUTLET",tagname:"views",classes:["bar-button-items","right-bar-button-items"],name:"rightBarButtonItems"},{type:"VIEWOUTLET",tagname:"view",name:"rightBarButtonItem"}],classes:["navigation-bar",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isHidden",truevalue:"cw-hidden",attributes:{}}]}},__QUALIFIED_CLASS_NAME__:"NavigationBarView"},updateTitleLayout:function(){if(this.isAttached&&void 0!==this.title){var e=this.titleContent,t=e.offsetWidth,n=(this.titleWrapper.clientWidth-t)/2,i=0;if(n>0){var s=Math.floor(e.getBoundingClientRect().left),o=parseInt(e.style.left,10)||0,c=r.a.sharedInstance.window.width/2,l=t/2+(s-o);i=Math.min(Math.abs(c-l),n),l>c&&(i*=-1)}a.a(e,{left:i+"px"})}},_maintainLayoutObserver:s.f({inputs:["viewportWidth"],callback:function(){this.updateTitleLayout()}}),_isAttachedObserver:s.f({inputs:["isAttached"],callback:function(t){if(t){if(!e.MutationObserver)return void o.b.warn("No MutationObserver available");if(this._mutationObserver)return;this._mutationObserver=new MutationObserver(this.updateTitleLayout.bind(this)),this._mutationObserver.observe(this.element,{childList:!0,characterData:!0,subtree:!0})}else this._mutationObserver&&(this._mutationObserver.disconnect(),this._mutationObserver=void 0)}}),layoutDidChange:s.g(),isEmpty:c.b({dependencies:["backBarButtonItem","leftBarButtonItem","leftBarButtonItems","leftBarButtonItems.contentsDidChange","rightBarButtonItems","rightBarButtonItems.contentsDidChange","rightBarButtonItem","title","subtitle"],readOnly:!0,type:Boolean,get:function(){var e=this.backBarButtonItem,t=this.leftBarButtonItem,n=this.leftBarButtonItems,i=this.rightBarButtonItems,r=this.rightBarButtonItem,a=this.title,s=this.subtitle;return!(void 0!==e||void 0!==t||void 0!==n&&0!==n.length||void 0!==i&&0!==i.length||void 0!==r||void 0!==a&&0!==a.length||void 0!==s&&0!==s.length)}}),isHidden:c.b({dependencies:["hidesNavigationBar","isEmpty"],readOnly:!0,type:Boolean,get:function(){var e=this.hidesNavigationBar,t=this.isEmpty;return!0===e||!0===t}}),lowerNavItem:c.b({dependencies:["navItems","navItems.contentsDidChange","isAtBottomNavItem"],readOnly:!0,get:function(){var e=this.isAtBottomNavItem,t=this.navItems;return void 0===t||e?{}:t[t.length-1]}}),backBarButtonItem:c.b({defaultValue:l.b(d.a),dependencies:["hidesBackButton","isAtBottomNavItem"],downstreamBindings:{lowerNavItem:"(owner).lowerNavItem"},readOnly:!0,strong:!0,type:d.a,get:function(e){var t=this.hidesBackButton,n=this.isAtBottomNavItem;if(!1===t&&!1===n)return e}}),isAtBottomNavItem:c.b({dependencies:["navItems","navItems.contentsDidChange"],readOnly:!0,get:Object.assign(function(){return void 0!==this.navItems&&this.navItems.length<2},{__CW__getter:function(e,t,n,i){return void 0!==i.internalGet(this,t[0+n])&&i.internalGet(this,t[0+n]).length<2}})}),hidesBackButton:c.b(u.c("topNavItem.hidesBackButton")),hidesNavigationBar:c.b(u.c("topNavItem.hidesNavigationBar")),leftBarButtonItem:c.b(u.c("topNavItem.leftBarButtonItem")),leftBarButtonItems:c.b(u.c("topNavItem.leftBarButtonItems")),rightBarButtonItems:c.b(u.c("topNavItem.rightBarButtonItems")),rightBarButtonItem:c.b(u.c("topNavItem.rightBarButtonItem")),title:c.b(u.c("topNavItem.title")),subtitle:c.b(u.c("topNavItem.subtitle")),navItems:c.b(),topNavItem:c.b(),_notifyOfSizeChange:s.f("isHidden",function(){this.sendEvent("navigationBarSizeMayHaveChanged")})}))}).call(this,n(6))},function(e,t,n){},,function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n(93),r=n(34),a=n(36),s=n(120),o=n(39),c={mixinDependencies:[n(105).a],viewportWidth:i.c("measuredViewportWidth"),viewportHeight:i.c("measuredViewportHeight"),isViewportSizeDOMReadingEnabled:r.b(!0),measuredViewportWidth:r.b({readOnly:!0,get:function(){return this._measuredViewportWidth}}),_measuredViewportWidth:0,measuredViewportHeight:r.b({readOnly:!0,get:function(){return this._measuredViewportHeight}}),_measuredViewportHeight:0,_measureViewport:a.f("isAttached","isViewportSizeDOMReadingEnabled",s.a.sharedInstance.window.bindingFor("width"),s.a.sharedInstance.window.bindingFor("height"),function(e,t){t&&this.measureViewport()}),measureViewport:function(){var e=this.element,t=void 0,n=void 0;e&&this.isAttached?(t=e.offsetWidth,n=e.offsetHeight):(t=0,n=0);var i=this._measuredViewportWidth!==(this._measuredViewportWidth=t),r=this._measuredViewportHeight!==(this._measuredViewportHeight=n);o.a.pause(),i&&this.propertyChanged("measuredViewportWidth"),r&&this.propertyChanged("measuredViewportHeight"),o.a.resume()}}},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n(200),r=n(1182),a=n(34),s=n(832),o=(n(827),n(826)),c=i.a.extend({mixinDependencies:[s.a],action:"popViewController",additionalClassNames:r.a(["navigation-back-button","expanded-touch-target"]),hasLeftIcon:!0,icon:o,title:a.b({dependencies:["lowerNavItem"],readOnly:!0,get:function(){return this.getPath("lowerNavItem.title")}}),lowerNavItem:a.b(),staticMembers:{__QUALIFIED_CLASS_NAME__:"NavigationBackButton"}})},function(e,t){e.exports='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="12px" height="22px" viewBox="0 0 12 22" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g transform="translate(-13.000000, -55.000000)" fill-rule="nonzero">\n            <g transform="translate(13.000000, 55.000000)">\n                <path d="M3.62132034,11 L11.5606602,3.06066017 C12.1464466,2.47487373 12.1464466,1.52512627 11.5606602,0.939339828 C10.9748737,0.353553391 10.0251263,0.353553391 9.43933983,0.939339828 L0.439339828,9.93933983 C-0.146446609,10.5251263 -0.146446609,11.4748737 0.439339828,12.0606602 L9.43933983,21.0606602 C10.0251263,21.6464466 10.9748737,21.6464466 11.5606602,21.0606602 C12.1464466,20.4748737 12.1464466,19.5251263 11.5606602,18.9393398 L3.62132034,11 Z" id="Path"></path>\n            </g>\n        </g>\n    </g>\n</svg>\n'},function(e,t,n){},,function(e,t,n){},,function(e,t,n){"use strict";n.d(t,"a",function(){return l});var i=n(36),r=n(34),a=n(93),s=n(789),o=n(1178),c=Symbol("NOT_SET"),l={mixinDependencies:[i.a,s.a],controlElement:Object(r.b)({get:function(e){return e||this.element}}),isDisabled:Object(r.b)({defaultValue:!1,didChange:function(e){var t=this.controlElement;t&&(e?t.setAttribute("disabled",!0):t.removeAttribute("disabled"))}}),isFocusable:Object(r.b)({dependencies:["isDisabled"],writeDependencies:[],defaultValue:c,get:Object.assign(function(e){return e!==c?e:!this.isDisabled},{__CW__getter:function(e,t,n,i){return e!==c?e:!i.internalGet(this,t[0+n])}}),set:o.a}),ariaDisabled:Object(a.c)("isDisabled")}},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n(1182),r=n(36),a=n(34),s=(n(833),{staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"ELEMENT",tagname:"span",classes:["svg-container"],name:"svgContainer"}]}}},additionalClassNames:i.a(["has-svg-icon"]),_iconObserver:r.f({inputs:["icon"],callback:function(e){void 0!==e&&(this.svgContainer.innerHTML=e)}}),icon:a.b()})},function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n(840);var i=n(409),r=n(1138),a=i.a.extend(r.a,{staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"div",children:[{type:"MULTIVIEWOUTLET",tagname:"views",name:"itemViews"}],classes:["cw-collection-view"]}},className:"cw-ui-collections-collection-view",__QUALIFIED_CLASS_NAME__:"CollectionView"},_scrollBy:function(e,t){this.sendEvent("didScroll",e,t)}})},function(e,t,n){},,function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return l}),n.d(t,"b",function(){return h});var i=n(177),r=n(180),a=n(1184),s=n(192),o=n(497),c=n(81),l=Object(i.b)("ModifierKeys",function(e){e("Shift"),e("Ctrl"),e("Option"),e("Meta"),e("Cmd"),e("Win")});l.Alt=l.Option;var u=c.b.Ended,d=c.b.Failed,h=c.a.extend({initFromPool:function(){var e=arguments;this.__s._$MI$initFromPool.apply(this,e);var t=this.modifiers;t instanceof Set||(this.modifiers=new Set(t))},numberOfTapsRequired:1,modifiers:Object(r.b)(e.Set),shouldPreventDefault:!1,targetElement:null,stateGenerator:o.a,maxDelayBetweenTaps:300,maxDurationOfTaps:500,dragThreshold:100,_tapCount:0,_handlingPointerId:NaN,_lockedCursor:!1,shouldReceive:function(e){var t=arguments;return this.isModifierValid(e)&&isNaN(this._handlingPointerId)&&this.__s._$yc$shouldReceive.apply(this,t)},shouldRequireFailureOf:function(e){var t=arguments;return e.instanceOf(h)&&this.modifiers.size<e.modifiers.size||this.__s._$15G$shouldRequireFailureOf.apply(this,t)},isModifierValid:function(e){var t=this.modifiers;if(t.has(l.Shift)&&!e.shiftKey)return!1;if(t.has(l.Ctrl)&&!e.ctrlKey)return!1;if(t.has(l.Option)&&!e.altKey)return!1;if(t.has(l.Meta)&&!e.metaKey)return!1;var n=s.a.sharedInstance.isWindows;return!(t.has(l.Cmd)&&!e.metaKey&&!n||t.has(l.Win)&&!e.metaKey&&n)},_failTimerId:NaN,_startFailTimer:function(e){var t=this;this._failTimerId=Object(a.a)(function(){t.state=d},e)},_cancelTimer:function(){var e=this._failTimerId;isNaN(e)||(clearTimeout(e),this._failTimerId=NaN)},pointerDown:function(e){0===this._tapCount&&(this.location={x:e.clientX,y:e.clientY},this.targetElement=e.target),this._handlingPointerId=e.pointerId,this._cancelTimer(),0===this._tapCount&&(this.view.sendEvent("lockCursor",this.getPath("view.style.cursor")),this._lockedCursor=!0),this.numberOfTapsRequired>1&&this._startFailTimer(this.maxDurationOfTaps)},isEventTooFar:function(e){var t=this.location,n=t.x,i=t.y,r=e.clientX,a=e.clientY;return Math.pow(r-n,2)+Math.pow(a-i,2)>this.dragThreshold},shouldFailGesture:function(e){return this.isEventTooFar(e)},pointerMove:function(e){this.shouldFailGesture(e)&&(this.state=d)},pointerUp:function(e){this._cancelTimer(),this.shouldFailGesture(e)?this.state=d:(this._tapCount++,this._tapCount>=this.numberOfTapsRequired?this.state=u:this._startFailTimer(this.maxDelayBetweenTaps)),this._handlingPointerId=NaN},pointerCancel:function(e){this.state=d},dispose:function(){this._cancelTimer(),this._lockedCursor&&this.view.sendEvent("releaseCursor"),this.__s._$29K$dispose.call(this)},didEnterPool:function(){var e=arguments,t=this.constructor.prototype;this.modifiers.clear(),this.numberOfTapsRequired=t.numberOfTapsRequired,this.__s._$2HF$didEnterPool.apply(this,e)},reset:function(){this.__s._$2Hr$reset.call(this),this._cancelTimer(),this.location=null,this._tapCount=0,this._handlingPointerId=NaN,this.targetElement=null,this._lockedCursor&&this.view.sendEvent("releaseCursor"),this._lockedCursor=!1},__superMap:{_$MI$initFromPool:"initFromPool",_$yc$shouldReceive:"shouldReceive",_$15G$shouldRequireFailureOf:"shouldRequireFailureOf",_$29K$dispose:"dispose",_$2HF$didEnterPool:"didEnterPool",_$2Hr$reset:"reset"},staticMembers:{__QUALIFIED_CLASS_NAME__:"TapGestureRecognizer"}})}).call(this,n(6))},function(e,t,n){},,function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n(1137),r=n(125),a=i.a.extend({itemViewDidMove:function(e,t){var n=e.element.style,i=t.width,a=t.height,s=t.x,o=t.y;Object(r.b)(n,s,o),n.width=i+"px",n.height=a+"px"},itemViewDidExit:function(e){var t=e.element.style;Object(r.b)(t,-1e4,-1e4)},staticMembers:{__QUALIFIED_CLASS_NAME__:"AbsolutelyPositionedPresenter"}})},function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n(847);var i=n(409),r=n(34),a=i.a.extend({additionalClassNames:["cw-list-item-view"],content:Object(r.b)(),layout:Object(r.b)(),layoutMetrics:Object(r.b)(),staticMembers:{className:"cw-ui-collections-list-item-view",__QUALIFIED_CLASS_NAME__:"ListItemView"}})},function(e,t,n){},,function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n(41),r=(n(775),n(34),{init:function(){var e=arguments,t=this._revertiblePropertyValues={},n=this._revertiblePropertyKeys=[],r=this.getMetadataByType(i.a);for(var a in r){var s=r[a];s&&s.isRevertible&&(t[a]=this[a],n.push(a))}this.__s._$KG$init.apply(this,e)},revertRevertibleProperties:function(e){for(var t=this._revertiblePropertyValues,n=this._revertiblePropertyKeys,i=0,r=n.length;i<r;i++){var a=n[i];e&&Object.prototype.hasOwnProperty.call(e,a)||(this[a]=t[a])}},__superMap:{_$KG$init:"init"}})},function(e,t,n){"use strict";(function(e){n.d(t,"f",function(){return c}),n.d(t,"b",function(){return l}),n.d(t,"a",function(){return u}),n.d(t,"e",function(){return d}),n.d(t,"d",function(){return h}),n.d(t,"c",function(){return f});var i=n(1215),r=n(137),a=function(){},s=void 0,o=void 0;function c(e){if(!function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return n.every(function(t){return"function"==typeof e[t]})}(e,"warn","error"))throw new Error("Supplied logger function must support `warn` and `error` methods.");s=e.warn,o=e.error}var l={get warn(){return s||a},get error(){return o||a}};function u(t){return"string"==typeof t?t.slice(0,r.b.length)===r.b||t.slice(0,r.a.length)===r.a:t===i.b?t.charactersInRange(0,6)===r.a:t instanceof e.DataView?(i.b.reset(t),i.b.charactersInRange(0,6)===r.a):t instanceof e.ArrayBuffer&&(i.b.reset(new e.DataView(t)),i.b.charactersInRange(0,6)===r.a)}function d(e){var t=e.length;return t<26?null:(e.jumpTo(t-26),{offsetSize:e.uint8,objectRefSize:e.uint8,numObjects:e.uint64,topObject:e.uint64,tableOffset:e.uint64})}function h(e,t){e.jumpTo(t.tableOffset);for(var n=[],i=0,r=t.numObjects;i<r;i++)switch(t.offsetSize){case 1:n.push(e.uint8);break;case 2:n.push(e.uint16);break;case 4:n.push(e.uint32);break;default:return l.warn("BPlist: unknown offset size: "+t.offsetSize),null}return n}var p={0:function(e,t){return 9===t||8!==t&&(0===t||15===t?null:(l.warn("BPlist: unhandled simple type: 0x"+t),null))},1:function(e,t){var n=e.stream,i=Math.pow(2,t);if(i>=r.c)return l.warn("BPlist: Integer length exceeds "+r.c+" bytes"),null;if(n.fastForward(1),i>4){for(var a="",s=0;s<i;s++)a+=n.uint8.toString(16);return parseInt(a,16)}return n.uint(i)},2:function(e,t){var n=e.stream,i=Math.pow(2,t);return i>=r.c?(l.warn("BPlist: real number length exceeds "+r.c+" bytes"),null):(n.fastForward(1),4===i?n.float32:8===i?n.float64:null)},3:function(e,t){3!==t&&l.warn("BPlist: unknown date type: "+t+" bytes");var n=e.stream.fastForward(1).float64;return new Date(9783072e5+1e3*n)},4:function(e,t){var n=e.stream,i=n.cursor,a=t,s=1;if(15===t){var o=m(n.fastForward(1));s=o[0],a=o[1]}return a>r.c?(l.error("BPlist: array size is beyond MAX."),null):n.jumpTo(i+s).sliceAsDataView(a)},5:g(),6:g(!0),8:function(e,t){var n=t+1;return n>=r.c?(l.warn("BPlist: UID length exceeds "+r.c+" bytes"),null):e.stream.uint(n)},10:function(e,t){var n=e.stream,i=n.cursor,a=e.trailer.objectRefSize,s=t,o=1;if(15===t){var c=m(n.fastForward(1));o=c[0],s=c[1]}if(s*a>r.c)return l.error("BPlist: array size is beyond MAX."),null;for(var u=[],d=0;d<s;d++){var h=n.jumpTo(i+o+d*a).uint(a);u[d]=f(e,h)}return u},13:function(e,t){var n=e.stream,i=n.cursor,a=e.trailer.objectRefSize,s=t,o=1;if(15===t){var c=m(n.fastForward(1));o=c[0],s=c[1]}if(2*s*a>r.c)return l.error("BPlist: dictionary size is beyond MAX."),null;for(var u={},d=0;d<s;d++){var h=n.jumpTo(i+o+d*a).uint(a),p=n.jumpTo(i+o+s*a+d*a).uint(a),g=f(e,h),v=f(e,p);u[g]=v}return u}};function f(e,t){var n=e.offsets[t],i=e.stream;i.cursor=n;var r=i.first4BitsAt(n),a=i.last4BitsAt(n),s=p[r];return s?s(e,a):(l.warn("BPlist: unknown type 0x"+r.toString(16)),null)}function g(e){var t=Boolean(e);return function(e,n){var i=e.stream,a=i.cursor,s=t?2*n:n;if(s>=r.c)return l.warn("BPlist: String length exceeds "+r.c+" bytes"),null;var o=1;if(15===n){var c=m(i.fastForward(1));o=c[0],s=c[1]}i.jumpTo(a+o);for(var u=[],d=0;d<s;d++){var h=t?i.uint16:i.uint8;u.push(h)}return u.length?u.reduce(function(e,t,n){var i=e;return 1===n&&(i=String.fromCodePoint(e)),i+String.fromCodePoint(t)}):null}}function m(e){var t=e.uint8,n=(240&t)/16;1!==n&&l.warn("BPlist: unexpected length-int type! 0x"+n.toString(16));var i=15&t,r=Math.pow(2,i);return[2+r,e.uint(r)]}}).call(this,n(6))},function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"default",function(){return s}),n(852);var i={type:void 0},r=[],a=function(e){return e.charCodeAt(0)};function s(){HTMLCanvasElement.prototype.toBlob instanceof Function||(HTMLCanvasElement.prototype.toBlob=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"image/png",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.92,o=this.toDataURL(n,s);e.setImmediate(function(){var e=o.slice(o.indexOf(",")+1),s=atob(e),c=Uint8Array.from(s,a);r[0]=c,i.type=n;var l=new Blob(r,i);t(l),r[0]=void 0})})}s()}.call(this,n(6))},function(e,t,n){"use strict";function i(){if(!(window.setImmediate instanceof Function&&window.clearImmediate instanceof Function)){var e=!1,t=1,n=1,i=[],r=[],a=window.location.origin,s=[],o=function(e){e.length=0,s.push(e)};window.setImmediate=function(o){var c=t++,l=c-n;i[l]=o;var u=arguments.length;if(u>1){for(var d=s.pop()||[],h=1;h<u;h++)d[h-1]=arguments[h];r[l]=d}return e||(e=!0,window.postMessage(void 0,a)),c},window.clearImmediate=function(e){var t=e-n;i[t]=void 0;var a=r[t];a&&(r[t]=void 0,o(a))},window.addEventListener("message",function(){var t=void 0;e=!1;var a=i.length;if(a){for(t=0;t<a;t++){var s=i[t];if(s){var c=r[t];c?(s.apply(this,c),o(c)):s()}}var l=a;for(a=i.length,t=l;t<a;t++){var u=t-l;i[u]=i[t],r[u]=r[t],i[t]=void 0,r[t]=void 0}i.length=r.length=a-l,n+=l}},!0)}}n.r(t),n.d(t,"default",function(){return i}),i()},function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"a",function(){return u});var i,r,a=n(1185),s=(i=a.a,(r=function(e){var t=i.create();try{e(t.resolve.bind(t),t.reject.bind(t))}catch(e){t.reject(e)}return t}).all=i.all.bind(i),r.race=i.race.bind(i),r.resolve=i.resolve.bind(i),r.reject=i.reject.bind(i),r);function o(e,t,n,i,r,a,s,o){var c=n,l=i,u=void 0,p=void 0,f=void 0,g=void 0,m=void 0;for(r||(r=0),a||(a=0),s||(s=0),o||(o=d);;){if(u=(l+c)/2,(p=s?h(o,u,s,n,i):u)<=c||p>=l){var v=s?h(o,c,s,n,i):c,_=s?h(o,l,s,n,i):l;void 0===m&&(m=e.call(this,v)-t),void 0===g&&(g=e.call(this,_)-t);var b=Math.max(0,0===g?0:g/a),y=Math.max(0,0===m?0:-m/r);b===y&&(b=g-a,y=-m-r),p=v>_?NaN:b>y?v:_;break}if((f=e.call(this,p)-t)>a)l=u,g=f;else{if(!(f<-r))break;c=u,m=f}}return p}var c,l,u=(c=regeneratorRuntime.mark(function e(t,n,i,r,a,s,o,c){var l,u,p,f,g,m,v,_,b,y,I,w;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:l=i,u=r,p=void 0,f=void 0,g=void 0,m=void 0,v=void 0,_=void 0,a||(a=0),s||(s=0),o||(o=0),c||(c=d);case 7:if(p=(u+l)/2,!((f=o?h(c,p,o,i,r):p)<=l||f>=u)){e.next=30;break}if(b=o?h(c,l,o,i,r):l,y=o?h(c,u,o,i,r):u,void 0!==_){e.next=19;break}return e.next=16,t.call(this,b);case 16:e.t0=e.sent,e.t1=n,_=e.t0-e.t1;case 19:if(void 0!==v){e.next=25;break}return e.next=22,t.call(this,y);case 22:e.t2=e.sent,e.t3=n,v=e.t2-e.t3;case 25:return I=Math.max(0,0===v?0:v/s),w=Math.max(0,0===_?0:-_/a),I===w&&(I=v-s,w=-_-a),f=b>y?NaN:I>w?b:y,e.abrupt("break",47);case 30:return e.next=32,t.call(this,f);case 32:if(g=e.sent,!((m=g-n)>s)){e.next=39;break}u=p,v=m,e.next=45;break;case 39:if(!(m<-a)){e.next=44;break}l=p,_=m,e.next=45;break;case 44:return e.abrupt("break",47);case 45:e.next=7;break;case 47:return e.abrupt("return",f);case 48:case"end":return e.stop()}},e,this)}),l=function(){var e=c.apply(this,arguments);return new s(function(t,n){return function i(r,a){try{var o=e[r](a),c=o.value}catch(e){return void n(e)}if(!o.done)return s.resolve(c).then(function(e){i("next",e)},function(e){i("throw",e)});t(c)}("next")})},function(e,t,n,i,r,a,s,o){return l.apply(this,arguments)}),d=function(){var e=Math.round,t=1.1;try{t=e(t)}catch(e){}return 1===t?e:function(e){return Math.round(e)}}(),h=function(e,t,n,i,r){var a=e(t/n)*n;return a<i?Math.ceil(i/n)*n:a>r?Math.floor(r/n)*n:a}},function(e,t,n){"use strict";n.d(t,"a",function(){return v}),n.d(t,"c",function(){return _}),n.d(t,"b",function(){return b});var i=n(1182),r=n(176),a=n(84),s=n(39),o=n(410),c=n(1173),l=n(775),u=n(65),d=n(1169),h=n(123),p=n(326),f=n(87),g=n(327),m=n(69),v={toOne:function(e){return _.create(e)},toMany:function(e){return b.create(e)}},_=f.b.extend({embedded:!1,_encodeValue:function(e,t,n){if(this.encode)return this.encode(n);var i=void 0;return Object(c.a)(n,f.a)?(i=n.constructor,this.embedded?((e.__cwMaterializedValues||(e.__cwMaterializedValues={}))[t]=n,n.retain(),n=n.toJSON()):n=n.getPrimaryKey()):i=Object(l.a)(n)&&n.type&&n.id?(n=n.id).type:this.type,i?(e.__relationshipTypes||(e.__relationshipTypes={}))[t]=i:Object(u.b)("CW.Data.ToOneRelationshipProperty#_encodeValue: Unable to determine type for: `"+n+"`."),n},getType:function(e,t){var n=e.__relationshipTypes;return n&&n[t]||this.type},hasMaterializedInstance:function(e,t){if(this.embedded)return!!this._getCachedValueForObject(e,t);var n=e._cwStore,i=y(this.getType(e,t),e.constructor),r=e.getDataHash();if(!r)return!1;var a=r[this.dataKey||t];return i.hasMaterializedInstance(a,n)},_materializeValue:function(e,t,n){var i=e.__cwMaterializedValues,r=i&&i[t];if(r)return r;if(!n)return null;if(this.decode)return this.decode(n);var a=y(this.getType(e,t),e.constructor);return a||Object(u.b)("CW.Data.ToOneRelationshipProperty#_materializeValue: Unable to determine model class for: `"+n+"`."),this.embedded?(i||(i=e.__cwMaterializedValues={}),i[t]=a.createEmbedded(e,this.dataKey||t)):a.findOrCreatePlaceholder(n,e._cwStore)},staticMembers:{__QUALIFIED_CLASS_NAME__:"ToOneRelationshipProperty"}}),b=f.b.extend({embedded:!1,upstreamNodeManagerClass:Object(i.a)({nodeWillFree:function(e){var t=e.__cwMaterializedValues,n=t&&t[this.key];n&&(Object(r.e)(n,e,"ToManyRelationshipProperty: releasing materialized RelationshipArray"),t[this.key]=null)}}),downstreamNodeManagerClass:a.a.extend({calculateValueForNode:function(e,t,n,i){n&&s.a._sanitizeNodeID(i)>0&&s.a.getValueForNode(i);var r=this.key,a=this.property.getRawValueForObject(e,r);return this.property._materializeValue(e,r,a)}}),_encodeValue:function(e,t,n){return n},_materializeValue:function(e,t,n){var i=e.__cwMaterializedValues||(e.__cwMaterializedValues={}),r=i[t];if(r)return r.hasBackingData?r:void 0;var a={type:y(this.type,e.constructor),relatedObject:e,relationshipKey:this.dataKey||t},s=void 0;if(this.embedded)s=p.a.create(n,a);else{if(n&&n.length>0)for(var o=0,u=n.length;o<u;o++){var d=n[o];Object(c.a)(d,f.a)?n[o]=d.getPrimaryKey():Object(l.a)(d)&&d.id&&(n[o]=d.id)}s=g.a.create(n,a,e._cwStore)}return i[t]=s,s.hasBackingData?s:void 0},clearCachedValueForObject:d.a,strong:!0,staticMembers:{__QUALIFIED_CLASS_NAME__:"ToManyRelationshipProperty"}});function y(e,t){var n=void 0;return e&&e.isClass?n=e:"(self)"===e||"self"===e?n=t:Object(h.a)(e)&&(n=Object(m.c)(e)),n||Object(u.b)("CW.Data.Relationship: Unable to compute class for relationship type: `"+e+"`."),n}f.a._registerDataActionHandler(b,function(e,t,n){var i=e[t];i.contentsDidChangeUntracked();var r=n.originalData[t]||[],a=n.updatedData[t]||[],s=o.a.fromArrays(r,a,i);i.contentsDidChange(s)})},function(e,t,n){"use strict";var i=t;function r(){i.Reader._configure(i.BufferReader),i.util._configure()}i.build="minimal",i.Writer=n(475),i.BufferWriter=n(864),i.Reader=n(476),i.BufferReader=n(865),i.util=n(240),i.rpc=n(866),i.roots=n(868),i.configure=r,i.Writer._configure(i.BufferWriter),r()},function(e,t,n){"use strict";e.exports=function(e,t){for(var n=new Array(arguments.length-1),i=0,r=2,a=!0;r<arguments.length;)n[i++]=arguments[r++];return new Promise(function(r,s){n[i]=function(e){if(a)if(a=!1,e)s(e);else{for(var t=new Array(arguments.length-1),n=0;n<t.length;)t[n++]=arguments[n];r.apply(null,t)}};try{e.apply(t||null,n)}catch(e){a&&(a=!1,s(e))}})}},function(e,t,n){"use strict";var i=t;i.length=function(e){var t=e.length;if(!t)return 0;for(var n=0;--t%4>1&&"="===e.charAt(t);)++n;return Math.ceil(3*e.length)/4-n};for(var r=new Array(64),a=new Array(123),s=0;s<64;)a[r[s]=s<26?s+65:s<52?s+71:s<62?s-4:s-59|43]=s++;i.encode=function(e,t,n){for(var i,a=null,s=[],o=0,c=0;t<n;){var l=e[t++];switch(c){case 0:s[o++]=r[l>>2],i=(3&l)<<4,c=1;break;case 1:s[o++]=r[i|l>>4],i=(15&l)<<2,c=2;break;case 2:s[o++]=r[i|l>>6],s[o++]=r[63&l],c=0}o>8191&&((a||(a=[])).push(String.fromCharCode.apply(String,s)),o=0)}return c&&(s[o++]=r[i],s[o++]=61,1===c&&(s[o++]=61)),a?(o&&a.push(String.fromCharCode.apply(String,s.slice(0,o))),a.join("")):String.fromCharCode.apply(String,s.slice(0,o))},i.decode=function(e,t,n){for(var i,r=n,s=0,o=0;o<e.length;){var c=e.charCodeAt(o++);if(61===c&&s>1)break;if(void 0===(c=a[c]))throw Error("invalid encoding");switch(s){case 0:i=c,s=1;break;case 1:t[n++]=i<<2|(48&c)>>4,i=c,s=2;break;case 2:t[n++]=(15&i)<<4|(60&c)>>2,i=c,s=3;break;case 3:t[n++]=(3&i)<<6|c,s=0}}if(1===s)throw Error("invalid encoding");return n-r},i.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},function(e,t,n){"use strict";function i(){this._listeners={}}e.exports=i,i.prototype.on=function(e,t,n){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:n||this}),this},i.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var n=this._listeners[e],i=0;i<n.length;)n[i].fn===t?n.splice(i,1):++i;return this},i.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var n=[],i=1;i<arguments.length;)n.push(arguments[i++]);for(i=0;i<t.length;)t[i].fn.apply(t[i++].ctx,n)}return this}},function(e,t,n){"use strict";function i(e){return"undefined"!=typeof Float32Array?function(){var t=new Float32Array([-0]),n=new Uint8Array(t.buffer),i=128===n[3];function r(e,i,r){t[0]=e,i[r]=n[0],i[r+1]=n[1],i[r+2]=n[2],i[r+3]=n[3]}function a(e,i,r){t[0]=e,i[r]=n[3],i[r+1]=n[2],i[r+2]=n[1],i[r+3]=n[0]}function s(e,i){return n[0]=e[i],n[1]=e[i+1],n[2]=e[i+2],n[3]=e[i+3],t[0]}function o(e,i){return n[3]=e[i],n[2]=e[i+1],n[1]=e[i+2],n[0]=e[i+3],t[0]}e.writeFloatLE=i?r:a,e.writeFloatBE=i?a:r,e.readFloatLE=i?s:o,e.readFloatBE=i?o:s}():function(){function t(e,t,n,i){var r=t<0?1:0;if(r&&(t=-t),0===t)e(1/t>0?0:2147483648,n,i);else if(isNaN(t))e(2143289344,n,i);else if(t>3.4028234663852886e38)e((r<<31|2139095040)>>>0,n,i);else if(t<1.1754943508222875e-38)e((r<<31|Math.round(t/1.401298464324817e-45))>>>0,n,i);else{var a=Math.floor(Math.log(t)/Math.LN2);e((r<<31|a+127<<23|8388607&Math.round(t*Math.pow(2,-a)*8388608))>>>0,n,i)}}function n(e,t,n){var i=e(t,n),r=2*(i>>31)+1,a=i>>>23&255,s=8388607&i;return 255===a?s?NaN:r*(1/0):0===a?1.401298464324817e-45*r*s:r*Math.pow(2,a-150)*(s+8388608)}e.writeFloatLE=t.bind(null,r),e.writeFloatBE=t.bind(null,a),e.readFloatLE=n.bind(null,s),e.readFloatBE=n.bind(null,o)}(),"undefined"!=typeof Float64Array?function(){var t=new Float64Array([-0]),n=new Uint8Array(t.buffer),i=128===n[7];function r(e,i,r){t[0]=e,i[r]=n[0],i[r+1]=n[1],i[r+2]=n[2],i[r+3]=n[3],i[r+4]=n[4],i[r+5]=n[5],i[r+6]=n[6],i[r+7]=n[7]}function a(e,i,r){t[0]=e,i[r]=n[7],i[r+1]=n[6],i[r+2]=n[5],i[r+3]=n[4],i[r+4]=n[3],i[r+5]=n[2],i[r+6]=n[1],i[r+7]=n[0]}function s(e,i){return n[0]=e[i],n[1]=e[i+1],n[2]=e[i+2],n[3]=e[i+3],n[4]=e[i+4],n[5]=e[i+5],n[6]=e[i+6],n[7]=e[i+7],t[0]}function o(e,i){return n[7]=e[i],n[6]=e[i+1],n[5]=e[i+2],n[4]=e[i+3],n[3]=e[i+4],n[2]=e[i+5],n[1]=e[i+6],n[0]=e[i+7],t[0]}e.writeDoubleLE=i?r:a,e.writeDoubleBE=i?a:r,e.readDoubleLE=i?s:o,e.readDoubleBE=i?o:s}():function(){function t(e,t,n,i,r,a){var s=i<0?1:0;if(s&&(i=-i),0===i)e(0,r,a+t),e(1/i>0?0:2147483648,r,a+n);else if(isNaN(i))e(0,r,a+t),e(2146959360,r,a+n);else if(i>1.7976931348623157e308)e(0,r,a+t),e((s<<31|2146435072)>>>0,r,a+n);else{var o;if(i<2.2250738585072014e-308)e((o=i/5e-324)>>>0,r,a+t),e((s<<31|o/4294967296)>>>0,r,a+n);else{var c=Math.floor(Math.log(i)/Math.LN2);1024===c&&(c=1023),e(4503599627370496*(o=i*Math.pow(2,-c))>>>0,r,a+t),e((s<<31|c+1023<<20|1048576*o&1048575)>>>0,r,a+n)}}}function n(e,t,n,i,r){var a=e(i,r+t),s=e(i,r+n),o=2*(s>>31)+1,c=s>>>20&2047,l=4294967296*(1048575&s)+a;return 2047===c?l?NaN:o*(1/0):0===c?5e-324*o*l:o*Math.pow(2,c-1075)*(l+4503599627370496)}e.writeDoubleLE=t.bind(null,r,0,4),e.writeDoubleBE=t.bind(null,a,4,0),e.readDoubleLE=n.bind(null,s,0,4),e.readDoubleBE=n.bind(null,o,4,0)}(),e}function r(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}function a(e,t,n){t[n]=e>>>24,t[n+1]=e>>>16&255,t[n+2]=e>>>8&255,t[n+3]=255&e}function s(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function o(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}e.exports=i(i)},function(module,exports,__webpack_require__){"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},function(e,t,n){"use strict";var i=t;i.length=function(e){for(var t=0,n=0,i=0;i<e.length;++i)(n=e.charCodeAt(i))<128?t+=1:n<2048?t+=2:55296==(64512&n)&&56320==(64512&e.charCodeAt(i+1))?(++i,t+=4):t+=3;return t},i.read=function(e,t,n){if(n-t<1)return"";for(var i,r=null,a=[],s=0;t<n;)(i=e[t++])<128?a[s++]=i:i>191&&i<224?a[s++]=(31&i)<<6|63&e[t++]:i>239&&i<365?(i=((7&i)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,a[s++]=55296+(i>>10),a[s++]=56320+(1023&i)):a[s++]=(15&i)<<12|(63&e[t++])<<6|63&e[t++],s>8191&&((r||(r=[])).push(String.fromCharCode.apply(String,a)),s=0);return r?(s&&r.push(String.fromCharCode.apply(String,a.slice(0,s))),r.join("")):String.fromCharCode.apply(String,a.slice(0,s))},i.write=function(e,t,n){for(var i,r,a=n,s=0;s<e.length;++s)(i=e.charCodeAt(s))<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&56320==(64512&(r=e.charCodeAt(s+1)))?(i=65536+((1023&i)<<10)+(1023&r),++s,t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128);return n-a}},function(e,t,n){"use strict";e.exports=function(e,t,n){var i=n||8192,r=i>>>1,a=null,s=i;return function(n){if(n<1||n>r)return e(n);s+n>i&&(a=e(i),s=0);var o=t.call(a,s,s+=n);return 7&s&&(s=1+(7|s)),o}}},function(e,t,n){"use strict";e.exports=r;var i=n(240);function r(e,t){this.lo=e>>>0,this.hi=t>>>0}var a=r.zero=new r(0,0);a.toNumber=function(){return 0},a.zzEncode=a.zzDecode=function(){return this},a.length=function(){return 1};var s=r.zeroHash="\0\0\0\0\0\0\0\0";r.fromNumber=function(e){if(0===e)return a;var t=e<0;t&&(e=-e);var n=e>>>0,i=(e-n)/4294967296>>>0;return t&&(i=~i>>>0,n=~n>>>0,++n>4294967295&&(n=0,++i>4294967295&&(i=0))),new r(n,i)},r.from=function(e){if("number"==typeof e)return r.fromNumber(e);if(i.isString(e)){if(!i.Long)return r.fromNumber(parseInt(e,10));e=i.Long.fromString(e)}return e.low||e.high?new r(e.low>>>0,e.high>>>0):a},r.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,n=~this.hi>>>0;return t||(n=n+1>>>0),-(t+4294967296*n)}return this.lo+4294967296*this.hi},r.prototype.toLong=function(e){return i.Long?new i.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var o=String.prototype.charCodeAt;r.fromHash=function(e){return e===s?a:new r((o.call(e,0)|o.call(e,1)<<8|o.call(e,2)<<16|o.call(e,3)<<24)>>>0,(o.call(e,4)|o.call(e,5)<<8|o.call(e,6)<<16|o.call(e,7)<<24)>>>0)},r.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},r.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},r.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},r.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return 0===n?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:n<128?9:10}},function(e,t,n){"use strict";e.exports=s;var i=n(475);(s.prototype=Object.create(i.prototype)).constructor=s;var r=n(240),a=r.Buffer;function s(){i.call(this)}s.alloc=function(e){return(s.alloc=r._Buffer_allocUnsafe)(e)};var o=a&&a.prototype instanceof Uint8Array&&"set"===a.prototype.set.name?function(e,t,n){t.set(e,n)}:function(e,t,n){if(e.copy)e.copy(t,n,0,e.length);else for(var i=0;i<e.length;)t[n++]=e[i++]};function c(e,t,n){e.length<40?r.utf8.write(e,t,n):t.utf8Write(e,n)}s.prototype.bytes=function(e){r.isString(e)&&(e=r._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(o,t,e),this},s.prototype.string=function(e){var t=a.byteLength(e);return this.uint32(t),t&&this._push(c,t,e),this}},function(e,t,n){"use strict";e.exports=a;var i=n(476);(a.prototype=Object.create(i.prototype)).constructor=a;var r=n(240);function a(e){i.call(this,e)}r.Buffer&&(a.prototype._slice=r.Buffer.prototype.slice),a.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len))}},function(e,t,n){"use strict";t.Service=n(867)},function(e,t,n){"use strict";e.exports=r;var i=n(240);function r(e,t,n){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");i.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(n)}(r.prototype=Object.create(i.EventEmitter.prototype)).constructor=r,r.prototype.rpcCall=function e(t,n,r,a,s){if(!a)throw TypeError("request must be specified");var o=this;if(!s)return i.asPromise(e,o,t,n,r,a);if(o.rpcImpl)try{return o.rpcImpl(t,n[o.requestDelimited?"encodeDelimited":"encode"](a).finish(),function(e,n){if(e)return o.emit("error",e,t),s(e);if(null!==n){if(!(n instanceof r))try{n=r[o.responseDelimited?"decodeDelimited":"decode"](n)}catch(e){return o.emit("error",e,t),s(e)}return o.emit("data",n,t),s(null,n)}o.end(!0)})}catch(e){return o.emit("error",e,t),void setTimeout(function(){s(e)},0)}else setTimeout(function(){s(Error("already ended"))},0)},r.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},function(e,t,n){"use strict";e.exports={}},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=n(177).b("MasterImportSource",{UNKNOWN:0,BACK_CAMERA:1,FRONT_CAMERA:2,PHOTO_KIT:3,CAMERA_CONNECTION_KIT:4,PHOTOS_APP:5,INGEST_SERVICE_CLIENT:6,MOMENT_SHARE:7})},function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){"use strict";n.d(t,"a",function(){return u});var i=n(36),r=n(34),a=n(180),s=n(1206),o=n(88),c=(n(501),n(154)),l=n(83),u={mixinDependencies:[i.a,{}],staticMembers:{init:function(){var e=arguments;this.__s._$D6$init.apply(this,e);var t=this.prototype,n=t._adornmentKeys=[],i=t._lazyAdornmentKeys=[],r=t._immediateAdornmentKeys=[],a=t._adornmentClasses={},s=t._adornmentProperties=t.getMetadataByType(m());for(var o in s)if(!Object.prototype.hasOwnProperty(o)){var c=s[o];a[o]=c.adornmentClass,n.push(o),(c.appliesImmediately?r:i).push(o)}},__superMap:{_$D6$init:"init"}},canAcceptNewLazyAdornments:r.b(!0),canAcceptAllLazyAdornments:r.b(!1),init:function(){var e=arguments;this.__s._$Zx$init.apply(this,e),this.ensureImmediateAdornmentExistences(),this.ensureLazyAdornmentNonexistences()},cleanup:function(){var e=arguments;this.ensureLazyAdornmentNonexistences(),d.remove(this),this.__s._$lM$cleanup.apply(this,e)},forEachAdornment:function(e,t){for(var n,i=this._adornmentKeys,r=this._adornments,a=0;n=r[i[a]];a++)n&&e.call(t,n)},ensureAdornmentExistence:function(e){var t=this._adornments;return!t[e]&&(this[e]=t[e]=this._adornmentClasses[e].create(this),!0)},ensureAdornmentNonexistence:function(e,t){var n=this._adornments;return this._adornmentProperties[e].appliesImmediately||t||(this._adornmentExistenceNeeds[e]=void 0,this._needsAdditionalLazyAdornments=!0),!!n[e]&&(this[e]=n[e]=null,!0)},ensureImmediateAdornmentExistences:function(){for(var e,t=this._immediateAdornmentKeys,n=0;e=t[n];n++)this.ensureAdornmentExistence(e)},ensureImmediateAdornmentNonexistences:function(){for(var e,t=this._immediateAdornmentKeys,n=0;e=t[n];n++)this.ensureAdornmentNonexistence(e)},ensureLazyAdornmentExistences:function(){for(var e,t=this._lazyAdornmentKeys,n=this._adornmentClasses,i=0;e=t[i];i++)n[e].shouldExistInHost(this)&&this.ensureAdornmentExistence(e)},ensureLazyAdornmentNonexistences:function(){for(var e,t=this._lazyAdornmentKeys,n=0;e=t[n];n++)this.ensureAdornmentNonexistence(e)},ensureAdornmentExistences:function(){this.ensureImmediateAdornmentExistences(),this.ensureLazyAdornmentExistences()},ensureAdornmentNonexistences:function(){this.ensureImmediateAdornmentNonexistences(),this.ensureLazyAdornmentNonexistences()},ensureNextLazyAdornmentExistence:function(){for(var e=this._lazyAdornmentKeys,t=this._adornmentExistenceNeeds,n=this._adornmentClasses,i=!1,r=void 0,a=0;(r=e[a])&&!i;a++){var s=t[r];if(void 0===s){var o=n[r];s=t[r]=Boolean(o.shouldExistInHost(this))}!1!==s&&!0===s&&this.ensureAdornmentExistence(r)&&(i=!0)}return r||(this._needsAdditionalLazyAdornments=!1),i},_reevaluateAdornmentExistenceNeed:function(e){var t=this._adornmentExistenceNeeds,n=t[e];void 0!==n&&(!1===n&&(n=t[e]=void 0,this._needsAdditionalLazyAdornments=!0),!0===n&&((n=t[e]=Boolean(this._adornmentClasses[e].shouldExistInHost(this)))||this.ensureAdornmentNonexistence(e,!0)))},_adornments:a.b(Object),_adornmentExistenceNeeds:a.b(Object),_needsAdditionalLazyAdornments:r.b(!1),_shouldBeQueuedForAdditionalLazyAdornments:r.b({readOnly:!0,dependencies:["canAcceptAllLazyAdornments","canAcceptNewLazyAdornments","_needsAdditionalLazyAdornments"],get:Object.assign(function(){return!this.canAcceptAllLazyAdornments&&this.canAcceptNewLazyAdornments&&this._needsAdditionalLazyAdornments},{__CW__getter:function(e,t,n,i){return!i.internalGet(this,t[0+n])&&i.internalGet(this,t[1+n])&&i.internalGet(this,t[2+n])}}),didChange:function(e){e?(d.add(this),p()):d.remove(this)}}),_shouldNowInstantlyAddAllLazyAdornments:r.b({readOnly:!0,dependencies:["canAcceptAllLazyAdornments","canAcceptNewLazyAdornments","_needsAdditionalLazyAdornments"],get:Object.assign(function(){return this.canAcceptAllLazyAdornments&&this.canAcceptNewLazyAdornments&&this._needsAdditionalLazyAdornments},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])&&i.internalGet(this,t[1+n])&&i.internalGet(this,t[2+n])}}),didChange:function(e){e&&(this._lazyAdornmentNeedResponseTimeout||(this._lazyAdornmentNeedResponseTimeout=Object(c.b)(this._instantlyAddAdditionalLazyAdornments)))}}),_instantlyAddAdditionalLazyAdornments:Object(l.a)(function(){this._lazyAdornmentNeedResponseTimeout=null,this.isPooled||this.isDisposed||this._shouldNowInstantlyAddAllLazyAdornments&&this.ensureLazyAdornmentExistences()}),__superMap:{_$Zx$init:"init",_$lM$cleanup:"cleanup"}},d=new o.a,h=null;function p(){h||(h=s.a(f))}function f(){h=null;for(var e,t=performance.now(),n=d.items,i=0;(e=n[i])&&i<10&&(i<1||performance.now()<t+.5);i++)e.ensureNextLazyAdornmentExistence();i<n.length&&p()}var g,m=(g=void 0,function(){return g||(g=n(877).AdornmentProperty)})},function(e,t,n){"use strict";n.r(t),n.d(t,"AdornmentProperty",function(){return o}),n.d(t,"adornmentProperty",function(){return c});var i=n(34),r=n(65),a=n(36),s=n(876),o=i.a.extend({appliesImmediately:!1,strong:!0,requiresSupport:s.a,adornmentClass:void 0,init:function(e){var t=e.isClass?{adornmentClass:e}:e;this.__s._$Kd$init.call(this,t),this.readOnly&&r.b("PhotoItemViewAdornmentProperty cannot be read-only.")},wasRegistered:function(e,t){var n=arguments;this.__s._$NB$wasRegistered.apply(this,n);var i=this.adornmentClass.existenceDependenciesOnHost;i&&i.length&&e.registerMetadata("_existenceDependencyObserver_for_"+t,a.f({inputs:i,callback:function(){this._reevaluateAdornmentExistenceNeed(t)}}))},__superMap:{_$Kd$init:"init",_$NB$wasRegistered:"wasRegistered"},staticMembers:{__QUALIFIED_CLASS_NAME__:"AdornmentProperty"}}),c=o.define.bind(o)},function(e,t,n){"use strict";n.d(t,"c",function(){return i}),n.d(t,"d",function(){return r}),n.d(t,"a",function(){return a}),n.d(t,"b",function(){return s});var i=function(e,t){return e-t},r=function(e,t){return t-e};function a(e,t,n,i,r){var a=e.length;if(0===a)return 0;for(var s=0,o=r?r.call(e,t,e):t,c=0;c<a;c++){var l=i?i.call(e,c,e):e[c];if(void 0!==l){var u=n(o,r?r.call(e,l,e):l);if(u<=0&&s>=0)return c;s=u}}return a}function s(e,t,n){var i=e.length;if(!(i<=1)){for(var r=new Map,a=new Array(i),s=0;s<i;s++){var o=e[s],c=n(o);a[s]=c,r.set(c,o)}a.sort(t);for(var l=0;l<i;l++)e[l]=r.get(a[l])}}},function(e,t,n){},,function(e,t,n){"use strict";n.d(t,"a",function(){return u}),n.d(t,"b",function(){return d});var i=n(34),r=n(36),a=n(799),s=n(41),o=n(1226),c=n(262),l={staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isEnlarged",truevalue:"cw-scroll-indicator-enlarged",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isInstantlyEnlarged",truevalue:"cw-scroll-indicator-instantly-enlarged",attributes:{}}],styles:{opacity:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"_opacity",attributes:{},unit:null,property:"opacity"},visibility:{type:"STYLEOUTLET",bindingtype:"IFBINDING",name:"_isVisible",truevalue:"",falsevalue:"hidden",attributes:{},unit:null,property:"visibility"}}}}},scrollIndicatorShouldFade:Object(i.b)(!0),scrollIndicatorShouldEnlarge:Object(i.b)(!0),shouldShowScrollIndicatorIfSizeChanged:Object(i.b)(!1),fadeDelay:500,fadeTime:200,FPS:60,_opacity:0,isEnlarged:Object(i.b)(!1),_isVisible:Object(i.b)({readOnly:!0,dependencies:["_opacity"],get:Object.assign(function(){return 0!==this._opacity},{__CW__getter:function(e,t,n,i){return 0!==i.internalGet(this,t[0+n])}})}),_maintainEnlargedState:Object(r.f)("scrollIndicatorShouldEnlarge","_isVisible","isBeingHovered",function(e,t,n){if(e){var i=!1;t&&(i=n||this.get("isEnlarged")),Object(o.a)(this,"isEnlarged",i),i||(this.isInstantlyEnlarged=!1)}else Object(o.a)(this,"isEnlarged",!1)}),_handleThumbProportionChange:Object(r.f)("thumbProportion",function(){this.shouldShowScrollIndicatorIfSizeChanged&&this.renewVisibility()}),didScroll:function(e){!this.get("_isVisible")&&e&&this._boundingClientRectHitTest(e)&&(Object(o.a)(this,"isBeingHovered",!0),this.scrollIndicatorShouldEnlarge&&(this.isInstantlyEnlarged=!0)),this.renewVisibility()},_boundingClientRectHitTest:function(e){var t=this.get("element").getBoundingClientRect(),n=e.clientX-t.left,i=e.clientY-t.top;return n>=0&&n<=t.width&&i>=0&&i<=t.height},_handleHoverStateChange:Object(r.f)("isBeingHovered",function(e){this.renewVisibility()}),_handleAttachOrDetach:Object(r.f)("isAttached",function(e){e?this.get("_isVisible")&&this.renewVisibility():this.renewVisibility()}),renewVisibility:function(){this._fadeOutAnimationTimer.stop(),this._fadeOutTimer.stop();var e=this.get("scrollIndicatorShouldFade");this.get("isAttached")?(this.set("_opacity",1),e&&!this.get("isBeingHovered")&&this._fadeOutTimer.start()):this.set("_opacity",e?0:1)},_showOrFadeOnShouldFadeChange:Object(r.f)("scrollIndicatorShouldFade",function(){this.renewVisibility()}),_fadeOutTimer:Object(s.c)(function(){return a.a.create({delay:this.fadeDelay,action:"beginFadeOut",target:this})}),_fadeOutAnimationTimer:Object(s.c)(function(){return a.a.create({delay:1e3/this.FPS,action:"fadeStep",target:this,timesToFire:this.fadeTime/1e3*this.FPS})}),beginFadeOut:function(){return this._fadeOutAnimationTimer.start(),!0},fadeStep:function(e){return this.set("_opacity",1-e.fireCount/e.timesToFire),!0}},u=c.a.extend(l,{staticMembers:{className:"cw-ui-fading-horizontal-scroll-indicator-view",__QUALIFIED_CLASS_NAME__:"FadingHorizontalScrollIndicatorView"}}),d=c.b.extend(l,{staticMembers:{className:"cw-ui-fading-vertical-scroll-indicator-view",__QUALIFIED_CLASS_NAME__:"FadingVerticalScrollIndicatorView"}})},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var i=n(80),r=n(36),a=n(122),s=n(41),o=n(34),c=n(1206),l=n(849),u=n(83),d=i.a.extend(r.a,a.a,l.a).extend({zeroSpeedCutoff:1e-5,emaHalfLife:1,lastDelta:s.c({defaultValue:0,isRevertible:!0}),_lastDeltaDate:s.c({defaultValue:0,isRevertible:-1/0}),speed:o.b({defaultValue:0,isRevertible:!0}),velocity:o.b({defaultValue:0,isRevertible:!0}),emaSpeed:o.b({defaultValue:0,isRevertible:!0}),emaVelocity:o.b({defaultValue:0,isRevertible:!0}),isStationary:o.b(!0),_isStationary:o.b({readOnly:!0,dependencies:["emaSpeed"],get:Object.assign(function(){return!this.emaSpeed},{__CW__getter:function(e,t,n,i){return!i.internalGet(this,t[0+n])}}),didChange:function(e){this.isStationary=e}}),handleDelta:function(e){var t=this._lastDeltaDate,n=Date.now(),i=n-t||1/0;this._lastDeltaDate=n;var r=e/i*1e3;this.velocity=r,this.speed=Math.abs(r),this._runAveragingFrame(NaN,!0)},_runAveragingFrame:Object(u.a)(function(e,t){window.cancelAnimationFrame(this._averagingFrameId);var n=!1,i=60*this.emaHalfLife,r=Math.pow(10,Math.log(.5)/i),a=this.emaVelocity,s=a*r+(t?this.velocity:0)*(1-r);Math.abs(s)>this.zeroSpeedCutoff?(a!==s&&(this.emaVelocity=s),n=!0):0!==a&&(this.emaVelocity=0);var o=this.emaSpeed,l=o*r+(t?this.speed:0)*(1-r);Math.abs(l)>this.zeroSpeedCutoff?(o!==l&&(this.emaSpeed=l),n=!0):0!==o&&(this.emaSpeed=0),n&&(this._averagingFrameId=c.a(this._runAveragingFrame))}),cleanup:function(){var e=arguments;window.cancelAnimationFrame(this._averagingFrameId),this.revertRevertibleProperties(),this.__s._$1rk$cleanup.apply(this,e)},__superMap:{_$1rk$cleanup:"cleanup"},staticMembers:{__QUALIFIED_CLASS_NAME__:"MotionTracker"}})},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var i=n(80),r=n(36),a=n(34),s=n(1184),o=n(1206),c=n(46),l=i.a.extend(r.a,{owner:a.b(),priority:1/0,value:a.b(),targetValue:a.b(),allowsDowngrades:!0,defersDowngrades:!1,incrementsDowngrades:void 0,allowsCrossgrades:!0,defersCrossgrades:!1,allowsUpgrades:!0,defersUpgrades:!1,incrementsUpgrades:void 0,comparator:function(e,t){return e===t?0:e<t?-1:1},reset:function(){this._isResetting=!0,this._maintainValue(),this._isResetting=!1},init:function(){var e=arguments,t=arguments[0]||c.h.getAutodisposingInstance();this._prefs=[("allowsDowngrades"in t?t:this).allowsDowngrades,("defersDowngrades"in t?t:this).defersDowngrades,("allowsCrossgrades"in t?t:this).allowsCrossgrades,("defersCrossgrades"in t?t:this).defersCrossgrades,("allowsUpgrades"in t?t:this).allowsUpgrades,("defersUpgrades"in t?t:this).defersUpgrades],this._initialValue=this.value,this.__s._$22z$init.apply(this,e)},_scheduleUpdate:function(){this._isScheduled=!0,d.push(this),f()},_maintainValue:r.f("targetValue",function(e){var t=this.value,n=this._isResetting?this._initialValue:t;if(e===n)return this._isResetting&&t!==n&&(this.value=n),this._wantsScheduledUpdate=!1,void(this._wantsTargetValue=void 0);if(void 0===n)return this._wantsScheduledUpdate=!1,this._wantsTargetValue=void 0,void(t!==e&&(this.value=e));var i=this.comparator(e,n),r=this._prefs,a=2*(i+1),s=r[a+0],o=r[a+1];s&&(o?(this._wantsScheduledUpdate=!0===o||Date.now()+o,this._wantsTargetValue=e,this._isScheduled||this._scheduleUpdate(),t!==n&&(this.value=n)):(this._wantsScheduledUpdate=!1,this._wantsTargetValue=void 0,t!==e&&(this.value=e)))}),__superMap:{_$22z$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"ValueRatchet"}}),u=function(){var e=void 0;if(h=null,p&&(clearTimeout(p),p=null),d.length){var t=c.c.getAutodisposingInstanceFromFilter(d,m);d.length=0,d.push.apply(d,t),d.sort(g);var n=Date.now(),i=n+2,r=c.c.getAutodisposingInstance();do{if((e=d.pop())._wantsScheduledUpdate>n)r.push(e);else if(e._isScheduled=!1,e._wantsScheduledUpdate){var a=e._wantsTargetValue;e._wantsScheduledUpdate=!1,e._wantsTargetValue=void 0,e.value=a}}while(d.length&&i>Date.now());if(d.push.apply(d,r),d.length&&!r.length)f();else if(r.length){for(var o=1/0,l=0;e=d[l];l++){var u=e._wantsScheduledUpdate;u>=!0&&o>u&&(o=u)}p=s.a(f,o-Date.now())}}},d=[],h=null,p=null,f=function(){h||(h=o.a(u))},g=function(e,t){return-(e.priority-t.priority)},m=function(e){return e&&!e.isDisposed}},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n(186),r=n(1228),a=n(1138),s=n(34),o={mixinDependencies:[i.a,r.b],staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isSelected",truevalue:"cw-selected",falsevalue:"cw-not-selected",attributes:{}}],attributes:{"aria-selected":{type:"ATTRIBUTEOUTLET",bindingtype:"IFBINDING",name:"isSelected",truevalue:"true",attributes:{},attribute:"aria-selected"}}}}},scrollView:Object(s.b)({get:function(){for(var e=this;null!==e&&!e.instanceOf(a.a);)e=e.parent;return e}}),gestureRecognizerShouldReceive:function(e){var t=arguments,n=this.scrollView;return(!n||!n.hasMomentum)&&this.__s._$Mr$gestureRecognizerShouldReceive.apply(this,t)},__superMap:{_$Mr$gestureRecognizerShouldReceive:"gestureRecognizerShouldReceive"}}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n(1169),r={mixinDependencies:[n(332).a],selectionControllerShouldSelectRange:function(e,t){return t},selectionControllerDidSelectRange:i.a,selectionControllerDidDeselectRange:i.a}},function(e,t,n){},,function(e,t){e.exports='<svg version="1.0" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 48 48"><circle fill="#146FDF" stroke="#FFFFFF" stroke-width="2" cx="24" cy="24" r="23"/><polyline fill="none" stroke="#FFFFFF" stroke-width="2.5" points="12,25 19,32 35,16 "/></svg>\n'},function(e,t,n){},,function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n(177),r=Object(i.b)("AlertStyle",{ALERT:"alert",ACTION_SHEET:"action-sheet"})},function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){"use strict";n.d(t,"a",function(){return g});var i=n(80),r=n(36),a=n(34),s=n(192),o=n(396),c=n(180),l=n(93),u=n(39),d=n(1208),h=n(1217),p=n(83),f=n(228),g=i.a.extend(r.a,{owner:a.b(),width:a.b(NaN),height:a.b(NaN),shouldCorrectForDevicePixelRatio:a.b(!1),shouldCover:a.b(!1),media:a.b({strong:!0}),derivativeSubset:a.b("renderableImage"),priority:a.b(0),minPriorityReduction:a.b(2e3),priorityReductionRange:a.b(1),wantsDownsampledDerivatives:a.b(!1),allowsShrinking:a.b(!0),areRequestsAllowed:a.b(!0),areMediaRequestsAllowed:a.b(!0),isDisabled:a.b(),firstByteSizeLimit:1/0,byteSizeLimitMultiplier:a.b(10),_perfectSize_compoundInt:a.b({readOnly:!0,dependencies:["width","height","media.width","media.height","shouldCover","shouldCorrectForDevicePixelRatio",s.a.sharedInstance.bindingFor("devicePixelRatio")],get:Object.assign(function(){var e=this.shouldCorrectForDevicePixelRatio,t=this.shouldCover,n=this.getPath("media.height"),i=this.getPath("media.width"),r=this.height,a=this.width;if(!(a&&r&&i&&n))return NaN;if(e){var o=s.a.sharedInstance.devicePixelRatio;a*=o,r*=o}var c=h.b(t?"cover":"fit",i,n,a,r,m),l=c.width,u=c.height;return 1e9*Math.ceil(l)+Math.ceil(u)},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[5+n]),a=i.internalGet(this,t[4+n]),s=i.internalGetPath(this,t[3+n]),o=i.internalGetPath(this,t[2+n]),c=i.internalGet(this,t[1+n]),l=i.internalGet(this,t[0+n]);if(!(l&&c&&o&&s))return NaN;if(r){var u=i.internalGetPath(this,t[6+n]);l*=u,c*=u}var d=h.b(a?"cover":"fit",o,s,l,c,m),p=d.width,f=d.height;return 1e9*Math.ceil(p)+Math.ceil(f)}})}),perfectWidth:a.b({readOnly:!0,dependencies:["_perfectSize_compoundInt"],get:Object.assign(function(){return this._perfectSize_compoundInt/1e9|0},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])/1e9|0}})}),perfectHeight:a.b({readOnly:!0,dependencies:["_perfectSize_compoundInt"],get:Object.assign(function(){var e=this._perfectSize_compoundInt;return e-1e9*(e/1e9|0)},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return r-1e9*(r/1e9|0)}})}),perfectGeometricLength:a.b({readOnly:!0,dependencies:["perfectWidth","perfectHeight"],get:Object.assign(function(){return Math.max(this.perfectWidth,this.perfectHeight)},{__CW__getter:function(e,t,n,i){return Math.max(i.internalGet(this,t[0+n]),i.internalGet(this,t[1+n]))}})}),nonOutdatedDerivative:a.b({strong:!0,readOnly:!0,dependencies:["perfectGeometricLength","derivativeSubset","media","allowsShrinking","media.derivativeDidLoad","_derivativeInfos"],get:Object.assign(function(){var e=this.perfectGeometricLength,t=this.derivativeSubset,n=this.media;this.allowsShrinking||(e=Math.max(this._longestReturnedDerivativeDimension,e));var i=e&&n?n.getBestLoadedDerivative(e,t):null;return i&&(this._longestReturnedDerivativeDimension=Math.max(this._longestReturnedDerivativeDimension,i.geometricLength)),i},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]),s=i.internalGet(this,t[2+n]);i.internalGet(this,t[3+n])||(r=Math.max(this._longestReturnedDerivativeDimension,r));var o=r&&s?s.getBestLoadedDerivative(r,a):null;return o&&(this._longestReturnedDerivativeDimension=Math.max(this._longestReturnedDerivativeDimension,o.geometricLength)),o}})}),derivative:a.b({strong:!0,readOnly:!0,dependencies:["nonOutdatedDerivative"],get:Object.assign(function(){var e=this.nonOutdatedDerivative,t=this.media,n=this._derivative_lastMediaPK!==(this._derivative_lastMediaPK=t?t.pk:NaN),i=!(Math.abs(this._derivative_lastAspectRatio-(this._derivative_lastAspectRatio=t?t.aspectRatio:NaN))<.05),r=n||i?null:this._derivative_lastExistentDerivative;return this._derivative_lastExistentDerivative=e||r,this._derivative_lastExistentDerivative},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=this.media,s=this._derivative_lastMediaPK!==(this._derivative_lastMediaPK=a?a.pk:NaN),o=!(Math.abs(this._derivative_lastAspectRatio-(this._derivative_lastAspectRatio=a?a.aspectRatio:NaN))<.05),c=s||o?null:this._derivative_lastExistentDerivative;return this._derivative_lastExistentDerivative=r||c,this._derivative_lastExistentDerivative}})}),shouldShowError:a.b({readOnly:!0,dependencies:["isComplete","_error","_derivativeInfos","_media.loadStatus"],get:Object.assign(function(){var e=this.getPath("_media.loadStatus"),t=this._derivativeInfos,n=this._error;return!this.isComplete&&(e===o.a.LOADED?Boolean(n||!t||!t.length):e===o.a.ERRORED)},{__CW__getter:function(e,t,n,i){var r=i.internalGetPath(this,t[3+n]),a=i.internalGet(this,t[2+n]),s=i.internalGet(this,t[1+n]);return!i.internalGet(this,t[0+n])&&(r===o.a.LOADED?Boolean(s||!a||!a.length):r===o.a.ERRORED)}})}),isLoading:a.b({readOnly:!0,dependencies:["_loadRef"],get:Object.assign(function(){return Boolean(this._loadRef)},{__CW__getter:function(e,t,n,i){return Boolean(i.internalGet(this,t[0+n]))}})}),loadProgress:a.b({readOnly:!0,dependencies:["isComplete","isLoading","_loadRef.progress"],get:Object.assign(function(){var e=this.getPath("_loadRef.progress"),t=this.isLoading;return this.isComplete?1:t?Number(e)||0:NaN},{__CW__getter:function(e,t,n,i){var r=i.internalGetPath(this,t[2+n]),a=i.internalGet(this,t[1+n]);return i.internalGet(this,t[0+n])?1:a?Number(r)||0:NaN}})}),totalProgress:a.b({readOnly:!0,dependencies:["isComplete","loadProgress","_loadRef","_media","_derivativeInfos","perfectGeometricLength","byteSizeLimitMultiplier","_byteSizeLimit"],get:Object.assign(function(){var e=this._byteSizeLimit,t=this.byteSizeLimitMultiplier,n=this.perfectGeometricLength,i=this._derivativeInfos,r=this._media,a=this._loadRef,s=this.loadProgress;if(this.isComplete)return 1;if(!(i&&n&&a&&r))return NaN;var o=r.derivativeInfoForDerivativeId(this._loadingDerivativeDerivativeId);if(!o)return NaN;var c=0|this._totalProgressTrackingObject.loadedBytes,l=c,u=c;if(o&&(l+=o.byteSize,u+=s*o.byteSize),o.geometricLength<n){e=Math.max(e,o.byteSize*t);for(var d=i.indexOf(o);++d<i.length;){var h=i[d],p=i[d+1],f=!p||h.geometricLength>=n;if((f||p.byteSize>=e)&&(e=Math.max(e,h.byteSize*t),l+=h.byteSize),f)break}}return u/l},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[7+n]),a=i.internalGet(this,t[6+n]),s=i.internalGet(this,t[5+n]),o=i.internalGet(this,t[4+n]),c=i.internalGet(this,t[3+n]),l=i.internalGet(this,t[2+n]),u=i.internalGet(this,t[1+n]);if(i.internalGet(this,t[0+n]))return 1;if(!(o&&s&&l&&c))return NaN;var d=c.derivativeInfoForDerivativeId(this._loadingDerivativeDerivativeId);if(!d)return NaN;var h=0|this._totalProgressTrackingObject.loadedBytes,p=h,f=h;if(d&&(p+=d.byteSize,f+=u*d.byteSize),d.geometricLength<s){r=Math.max(r,d.byteSize*a);for(var g=o.indexOf(d);++g<o.length;){var m=o[g],v=o[g+1],_=!v||m.geometricLength>=s;if((_||v.byteSize>=r)&&(r=Math.max(r,m.byteSize*a),p+=m.byteSize),_)break}}return f/p}})}),_totalProgressTrackingObject:c.b(Object),imperfection:a.b({readOnly:!0,dependencies:["perfectGeometricLength","nonOutdatedDerivative"],get:Object.assign(function(){var e=this.nonOutdatedDerivative,t=e?e.geometricLength:0;return Math.max(0,this.perfectGeometricLength/t-1)},{__CW__getter:function(e,t,n,i){var r=this.nonOutdatedDerivative,a=r?r.geometricLength:0;return Math.max(0,i.internalGet(this,t[0+n])/a-1)}})}),isPerfect:a.b({readOnly:!0,dependencies:["imperfection"],get:Object.assign(function(){return 0===this.imperfection},{__CW__getter:function(e,t,n,i){return 0===i.internalGet(this,t[0+n])}})}),isComplete:a.b({readOnly:!0,dependencies:["isPerfect","_derivativeInfos","nonOutdatedDerivative"],get:Object.assign(function(){if(this.isPerfect)return!0;var e=this.nonOutdatedDerivative,t=this._derivativeInfos,n=t&&t[t.length-1];return(e?e.geometricLength:0)>=(n?n.geometricLength:0)},{__CW__getter:function(e,t,n,i){if(i.internalGet(this,t[0+n]))return!0;var r=i.internalGet(this,t[2+n]),a=i.internalGet(this,t[1+n]),s=a&&a[a.length-1];return(r?r.geometricLength:0)>=(s?s.geometricLength:0)}})}),_media:a.b({readOnly:!0,dependencies:["media","media.cannotHaveImageDerivative","isDisabled"],get:Object.assign(function(){return this.isDisabled||this.getPath("media.cannotHaveImageDerivative")?void 0:this.media},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[2+n])||i.internalGetPath(this,t[1+n])?void 0:i.internalGet(this,t[0+n])}})}),_loadRef:a.b({strong:!0,didChange:function(e){e||(this._loadingDerivativeDerivativeId=null,this._loadingDerivativeGeometricLength=NaN)}}),_loadingDerivativeGeometricLength:NaN,_loadingDerivativeDerivativeId:null,_error:a.b(null),error:a.b({readOnly:!0,dependencies:["shouldShowError","_error"],get:Object.assign(function(){return this.shouldShowError?this._error||new Error("Metadata load failure"):null},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?i.internalGet(this,t[1+n])||new Error("Metadata load failure"):null}})}),_byteSizeLimit:a.b({defaultValue:function(){return this.firstByteSizeLimit}}),_adjustedPriority:a.b({readOnly:!0,dependencies:["priority","nonOutdatedDerivative","imperfection","minPriorityReduction","priorityReductionRange"],get:Object.assign(function(){var e=this.priorityReductionRange,t=this.minPriorityReduction,n=this.imperfection,i=this.nonOutdatedDerivative,r=this.priority;return i?r+(t+(1-Math.min(n/4,1))*e):r},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[4+n]),a=i.internalGet(this,t[3+n]),s=i.internalGet(this,t[2+n]),o=i.internalGet(this,t[1+n]),c=i.internalGet(this,t[0+n]);return o?c+(a+(1-Math.min(s/4,1))*r):c}})}),_longestReturnedDerivativeDimension:0,_derivativeInfos:a.b(),_maintainDerivativeInfosBinding:function(){var e={};return r.f("derivativeSubset",function(t){this.bind("_derivativeInfos",function(t){var n=e[t];return n||(n=e[t]=l.c("_media."+t+"DerivativeInfos")),n}(t))})}(),_maintainRefPriority:r.f("_loadRef","_adjustedPriority",function(e,t){e&&e.priority!==t&&(e.priority=t)}),_updateStateForNewOrBetterDerivatives:r.f({inputs:["nonOutdatedDerivative","_derivativeInfos"],callback:function(e,t){u.a.pause();var n=t&&t[0],i=n?n.mediaPK+"_"+n.outdateCount+"outdates":null,r=i!==this._updateStateForNewOrBetterDerivatives_lastDISToken;if(this._updateStateForNewOrBetterDerivatives_lastDISToken=i,!n||r)this._cleanUpCurrentLoad(),this._longestReturnedDerivativeDimension=0,null!==this._error&&(this._error=null),this._byteSizeLimit!==this.firstByteSizeLimit&&(this._byteSizeLimit=this.firstByteSizeLimit),d.a(this._totalProgressTrackingObject);else if(e){var a=e.derivativeId,s=e.byteSize,o=this._totalProgressTrackingObject;o[a]||(o[a]=!0,o.loadedBytes=(0|o.loadedBytes)+s);var c=Math.max(s*this.byteSizeLimitMultiplier,this._byteSizeLimit);this._byteSizeLimit!==c&&(this._byteSizeLimit=c)}u.a.resume()}}),_manageWhetherLoading:r.f({inputs:["_media","_derivativeInfos","isComplete","areRequestsAllowed","perfectGeometricLength","_updateStateForNewOrBetterDerivatives"],callback:function(e,t,n,i,r){var a=Boolean(i&&t&&r&&(!n||!this.nonOutdatedDerivative)&&!this._error);if(t&&t.length){var s=this._loadRef,o=s;if(!a&&s&&(s.cancel(),s=null),t&&t.length){if(a){for(var c=null,l=this._byteSizeLimit,u=0|this.getPath("nonOutdatedDerivative.geometricLength"),d=0;d<t.length&&!c;d++){var h=t[d];if(h.url&&!(h.geometricLength<=u)){var p=t[d+1];(h.geometricLength>=r||!p||p.byteSize>l)&&(c=h)}}c?(s&&this._loadingDerivativeGeometricLength<c.geometricLength&&(s.cancel(),s=null),s||(this._loadingDerivativeGeometricLength=c.geometricLength,this._loadingDerivativeDerivativeId=c.derivativeId,f.b.reportIfBetterServerDerivativeAvailable(e,c,r),(s=e.requestDerivative(c)).then(this._derivativeDidLoad),s.catch(this._derivativeDidFail))):this._derivativeDidFail()}o!==(s=s||null)&&(this._loadRef=s)}}}}),_informMediaOfDownsampleDesire:r.f({inputs:["wantsDownsampledDerivatives","perfectGeometricLength","nonOutdatedDerivative","_media"],callback:function(e,t,n,i){e&&t&&n&&i&&i.requestDownsample(t,n)}}),_derivativeDidLoad:p.a(function(e,t){t===this._loadRef&&(u.a.pause(),this._cleanUpCurrentLoad(),this._error=null,u.a.resume())}),_derivativeDidFail:p.a(function(e,t){t===this._loadRef&&(u.a.pause(),this._cleanUpCurrentLoad(),this._error=e||new Error("Derivative load failure"),u.a.resume())}),_cleanUpCurrentLoad:function(){var e=this._loadRef;e&&(e.cancel(),this._loadRef=null)},dispose:function(){var e=arguments;this._cleanUpCurrentLoad(),this.__s._$BbY$dispose.apply(this,e)},__superMap:{_$BbY$dispose:"dispose"},staticMembers:{__QUALIFIED_CLASS_NAME__:"ImageDerivativeLoader"}}),m={}},function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t){e.exports='<svg version="1.0" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="218px" height="200px" viewBox="0 0 218 200" enable-background="new 0 0 218 200" xml:space="preserve"><path fill="chartreuse" d="M215.079,189.379C211.256,195.959,204.253,200,196.68,200H21.32c-7.573,0-14.577-4.041-18.401-10.621 c-3.824-6.578-3.895-14.705-0.187-21.35L90.414,10.948C94.188,4.185,101.295,0,109.001,0s14.812,4.185,18.586,10.948l87.681,157.082 C218.976,174.674,218.905,182.801,215.079,189.379z M121.928,69.675c0-7.138-5.787-12.924-12.928-12.924 c-7.139,0-12.928,5.786-12.928,12.924c0,0.731,0.178,2.14,0.178,2.14l8.944,66.201h0.008c0.424,1.71,1.957,2.98,3.797,2.98 s3.374-1.271,3.797-2.98l8.952-66.201C121.75,71.815,121.928,70.407,121.928,69.675z M109,153.094c-5.488,0-9.938,4.449-9.938,9.938 s4.449,9.938,9.938,9.938s9.938-4.449,9.938-9.938S114.488,153.094,109,153.094z"/></svg>\n'},function(e,t,n){},,function(e,t,n){},,function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return o});var i=n(1278),r=n(34),a=e.CloudKit,s=a&&a.PRODUCTION_ENVIRONMENT||"production",o=(a&&a.DEVELOPMENT_ENVIRONMENT,i.a.extend({staticMembers:{storageKey:"ckjs"},apnsEnvironment:r.b({readOnly:!0,get:function(){return s}}),ckEnvironment:i.a.stringProperty(s),ckContainerId:i.a.stringProperty("com.apple.photos.cloud"),maxOperationsInSingleRequest:200}).create())}).call(this,n(6))},function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return s});var i=n(172),r=n(916);function a(){return s(i.c())?r.a.LAST_FIRST:r.a.FIRST_LAST}function s(e){return"ja-jp"===e||"ko-kr"===e||"zh-cn"===e||"zh-tw"===e||"hu-hu"===e}},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=n(177).b("NameDisplayOrder",{FIRST_LAST:"first,last",LAST_FIRST:"last,first"})},function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return I});var i=n(435),r=n(428),a=n(186),s=n(1228),o=n(34),c=n(790),l=n(180),u=n(281),d=n(845),h=n(429),p=n(80),f=n(885),g=n(65),m=n(223),v=n(339),_=n(286),b=n(1142),y=n(405),I=i.a.extend(v.a,r.a,{mixinDependencies:[a.a,s.b],_minimumWidth:o.b(20),viewItemMappedClass:o.b({defaultValue:y.a}),desiredSize:o.b({strong:!0,dependencies:["isAttached","collection","collection.length","shouldMeasure","viewItemMappedClass","collection.contentsDidChangeUntracked","desiredWidth","maximumWidth","_minimumWidth","layoutMetrics.rowSpacing","layoutMetrics.rowHeight","layoutMetrics.topPadding","layoutMetrics.bottomPadding","layoutDelegate","layoutController"],readOnly:!0,get:Object.assign(function(){var t=this.desiredWidth,n=0,i=this.maximumWidth,r=this._minimumWidth,a=this.layoutMetrics;a&&(n+=a.topPadding+a.bottomPadding);var s=this.collection;if(s){var o=s.length;if(a&&(n+=a.rowSpacing*o-1),this.shouldMeasure&&this.isAttached){var l=this.view.style,u=l.getInline("position"),d=l.getInline("width"),h=l.getInline("height");l.set({position:"absolute",width:e.innerWidth+"px",height:e.innerHeight+"px"});for(var p=s.startHandle;p.isValid;p=p.next){var f=this.layoutDelegate.cellForHandle(p,"item");t=Math.max(t,Math.ceil(this._naturalWidthForMenuItem(f))),n+=this.layoutDelegate.sizeForItem(this.layoutController,f).height}l.set({position:u,width:d,height:h})}else a&&(n+=a.rowHeight*o)}return t=Math.min(Math.max(t,r),i),c.a.create(t,n)},{__CW__getter:function(t,n,i,r){var a=r.internalGet(this,n[6+i]),s=0,o=r.internalGet(this,n[7+i]),l=r.internalGet(this,n[8+i]),u=this.layoutMetrics;u&&(s+=u.topPadding+u.bottomPadding);var d=r.internalGet(this,n[1+i]);if(d){var h=d.length;if(u&&(s+=u.rowSpacing*h-1),r.internalGet(this,n[3+i])&&r.internalGet(this,n[0+i])){var p=this.view.style,f=p.getInline("position"),g=p.getInline("width"),m=p.getInline("height");p.set({position:"absolute",width:e.innerWidth+"px",height:e.innerHeight+"px"});for(var v=d.startHandle;v.isValid;v=v.next){var _=r.internalGet(this,n[13+i]).cellForHandle(v,"item");a=Math.max(a,Math.ceil(this._naturalWidthForMenuItem(_))),s+=r.internalGet(this,n[13+i]).sizeForItem(r.internalGet(this,n[14+i]),_).height}p.set({position:f,width:g,height:m})}else u&&(s+=u.rowHeight*h)}return a=Math.min(Math.max(a,l),o),c.a.create(a,s)}})}),desiredWidth:o.b(0),shouldMeasure:o.b(!0),menuDelegate:o.b(),layoutDelegate:o.b({defaultValue:l.b(u.a.extend({menuDelegate:o.b(),sizeForItem:function(e,t){return c.a.create(t.customWidth||e.viewportWidth,t.customHeight||e.layoutMetrics.rowHeight)},createCellFor:function(e,t){var n=arguments;if("item"!==t)return this.__s._$1mE$createCellFor.apply(this,n);var i=this.menuDelegate;return(i.itemIsDivider(e)?_.a:i.itemIsSubmenu(e)?_.c:this.cellClass).create(this)},__superMap:{_$1mE$createCellFor:"createCellFor"}})),downstreamBindings:{cellClass:"(owner).viewItemMappedClass",menuDelegate:"(owner).menuDelegate"}}),presenter:o.b({defaultValue:l.b(d.a.extend({itemViewClassForItem:function(e){var t=arguments;return"item"!==e.cellType?this.__s._$1_0$itemViewClassForItem.apply(this,t):e.viewClass},cellDidExit:function(e){var t=arguments;e._willExit(this.owner),this.__s._$21V$cellDidExit.apply(this,t),e.view=null},itemViewDidEnter:function(e,t){var n=arguments;t.view=e,this.__s._$23w$itemViewDidEnter.apply(this,n),t._didEnter(this.owner)},cellDidMove:function(e){var t=arguments;this.__s._$25n$cellDidMove.apply(this,t),e._didUpdate(this.owner)},viewForViewClass:function(){var e=arguments,t=this.__s._$27t$viewForViewClass.apply(this,e),n=s.a.create({event:"menuWasTapped",delegate:this.owner});return t.addGestureRecognizer(n),t},__superMap:{_$1_0$itemViewClassForItem:"itemViewClassForItem",_$21V$cellDidExit:"cellDidExit",_$23w$itemViewDidEnter:"itemViewDidEnter",_$25n$cellDidMove:"cellDidMove",_$27t$viewForViewClass:"viewForViewClass"}}))}),maximumWidth:o.b(1/0),selectionController:l.b(h.a),selectionDelegate:l.b(p.a.extend(f.a)),isMultipleSelectionEnabled:!1,isEmptySelectionEnabled:!0,viewClass:b.a,_naturalWidthForMenuItem:function(e){var t=e.view,n=!1;t||(t=e.viewClass.measurementInstance)&&(t.isAttached||(this.presenter.views.push(t),t.element.style.visibility="hidden"),e.view=t,e._didEnter(this),n=!0);var i=void 0;return i=t&&t.isAttached?t.naturalSize.width:0,n&&(e._willExit(this),e.view=null),i},collectionViewDidScroll:function(e,t,n){this.scrollBy(t,n)},collectionViewDidScrollInDirection:function(e,t){switch(t){case m.a.NORTH:this.moveAnItemBack();break;case m.a.SOUTH:this.moveAnItemForward();break;default:g.b("CW.UI.MenuListViewController does not support scrolling in the direction, `%{direction}`.",{direction:t})}},moveAnItemBack:function(){var e=this.layoutController.visibleCells.objectAt(0),t=this.layoutDelegate.positionNextCell(this.layoutController,e,-1);t?this.scrollBy(0,t.height):this.scrollBy(0,e.height),this.update()},moveAnItemForward:function(){var e=this.layoutController.visibleCells.lastItem,t=this.layoutDelegate.positionNextCell(this.layoutController,e,1);t?this.scrollBy(0,-t.height):this.scrollBy(0,-e.height),this.update()},selectItem:function(e){this.selectedItem=e},staticMembers:{__QUALIFIED_CLASS_NAME__:"MenuListViewController"}})}).call(this,n(6))},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i={_didEnter:function(){var e=arguments;this.__s._$66$_didEnter.apply(this,e),this.view.style.set("width",this.width).set("height",this.height).translateDevicePixels(this.x,this.y)},_didUpdate:function(){var e=arguments;this.__s._$DO$_didUpdate.apply(this,e),this.view.style.set("width",this.width).set("height",this.height).translateDevicePixels(this.x,this.y)},_willExit:function(){var e=arguments;this.view.style.translate(-1e3,-1e3),this.__s._$Ku$_willExit.apply(this,e)},__superMap:{_$66$_didEnter:"_didEnter",_$DO$_didUpdate:"_didUpdate",_$Ku$_willExit:"_willExit"}}},function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return r});var i={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","Ā":"A","Ă":"A","Ą":"A","Ǎ":"A","Ǟ":"A","Ǡ":"A","Ǻ":"A","Ȁ":"A","Ȃ":"A","Ȧ":"A","Ḁ":"A","Ạ":"A","Ả":"A","Ấ":"A","Ầ":"A","Ẩ":"A","Ẫ":"A","Ậ":"A","Ắ":"A","Ằ":"A","Ẳ":"A","Ẵ":"A","Ặ":"A","Å":"A","Ḃ":"B","Ḅ":"B","Ḇ":"B","Ç":"C","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","Ḉ":"C","Ď":"D","Ḋ":"D","Ḍ":"D","Ḏ":"D","Ḑ":"D","Ḓ":"D","È":"E","É":"E","Ê":"E","Ë":"E","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","Ȅ":"E","Ȇ":"E","Ȩ":"E","Ḕ":"E","Ḗ":"E","Ḙ":"E","Ḛ":"E","Ḝ":"E","Ẹ":"E","Ẻ":"E","Ẽ":"E","Ế":"E","Ề":"E","Ể":"E","Ễ":"E","Ệ":"E","Ḟ":"F","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","Ǧ":"G","Ǵ":"G","Ḡ":"G","Ĥ":"H","Ȟ":"H","Ḣ":"H","Ḥ":"H","Ḧ":"H","Ḩ":"H","Ḫ":"H","Ì":"I","Í":"I","Î":"I","Ï":"I","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","Ǐ":"I","Ȉ":"I","Ȋ":"I","Ḭ":"I","Ḯ":"I","Ỉ":"I","Ị":"I","Ĵ":"J","Ķ":"K","Ǩ":"K","Ḱ":"K","Ḳ":"K","Ḵ":"K","Ĺ":"L","Ļ":"L","Ľ":"L","Ḷ":"L","Ḹ":"L","Ḻ":"L","Ḽ":"L","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ñ":"N","Ń":"N","Ņ":"N","Ň":"N","Ǹ":"N","Ṅ":"N","Ṇ":"N","Ṉ":"N","Ṋ":"N","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ō":"O","Ŏ":"O","Ő":"O","Ơ":"O","Ǒ":"O","Ǫ":"O","Ǭ":"O","Ȍ":"O","Ȏ":"O","Ȫ":"O","Ȭ":"O","Ȯ":"O","Ȱ":"O","Ṍ":"O","Ṏ":"O","Ṑ":"O","Ṓ":"O","Ọ":"O","Ỏ":"O","Ố":"O","Ồ":"O","Ổ":"O","Ỗ":"O","Ộ":"O","Ớ":"O","Ờ":"O","Ở":"O","Ỡ":"O","Ợ":"O","Ṕ":"P","Ṗ":"P","Ŕ":"R","Ŗ":"R","Ř":"R","Ȑ":"R","Ȓ":"R","Ṙ":"R","Ṛ":"R","Ṝ":"R","Ṟ":"R","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","Ș":"S","Ṡ":"S","Ṣ":"S","Ṥ":"S","Ṧ":"S","Ṩ":"S","Ţ":"T","Ť":"T","Ț":"T","Ṫ":"T","Ṭ":"T","Ṯ":"T","Ṱ":"T","Ù":"U","Ú":"U","Û":"U","Ü":"U","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","Ư":"U","Ǔ":"U","Ǖ":"U","Ǘ":"U","Ǚ":"U","Ǜ":"U","Ȕ":"U","Ȗ":"U","Ṳ":"U","Ṵ":"U","Ṷ":"U","Ṹ":"U","Ṻ":"U","Ụ":"U","Ủ":"U","Ứ":"U","Ừ":"U","Ử":"U","Ữ":"U","Ự":"U","Ṽ":"V","Ṿ":"V","Ŵ":"W","Ẁ":"W","Ẃ":"W","Ẅ":"W","Ẇ":"W","Ẉ":"W","Ẋ":"X","Ẍ":"X","Ý":"Y","Ŷ":"Y","Ÿ":"Y","Ȳ":"Y","Ẏ":"Y","Ỳ":"Y","Ỵ":"Y","Ỷ":"Y","Ỹ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","Ẑ":"Z","Ẓ":"Z","Ẕ":"Z","`":"`","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","ā":"a","ă":"a","ą":"a","ǎ":"a","ǟ":"a","ǡ":"a","ǻ":"a","ȁ":"a","ȃ":"a","ȧ":"a","ḁ":"a","ạ":"a","ả":"a","ấ":"a","ầ":"a","ẩ":"a","ẫ":"a","ậ":"a","ắ":"a","ằ":"a","ẳ":"a","ẵ":"a","ặ":"a","ḃ":"b","ḅ":"b","ḇ":"b","ç":"c","ć":"c","ĉ":"c","ċ":"c","č":"c","ḉ":"c","ď":"d","ḋ":"d","ḍ":"d","ḏ":"d","ḑ":"d","ḓ":"d","è":"e","é":"e","ê":"e","ë":"e","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","ȅ":"e","ȇ":"e","ȩ":"e","ḕ":"e","ḗ":"e","ḙ":"e","ḛ":"e","ḝ":"e","ẹ":"e","ẻ":"e","ẽ":"e","ế":"e","ề":"e","ể":"e","ễ":"e","ệ":"e","ḟ":"f","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","ǧ":"g","ǵ":"g","ḡ":"g","ĥ":"h","ȟ":"h","ḣ":"h","ḥ":"h","ḧ":"h","ḩ":"h","ḫ":"h","ẖ":"h","ì":"i","í":"i","î":"i","ï":"i","ĩ":"i","ī":"i","ĭ":"i","į":"i","ǐ":"i","ȉ":"i","ȋ":"i","ḭ":"i","ḯ":"i","ỉ":"i","ị":"i","ĵ":"j","ǰ":"j","ķ":"k","ǩ":"k","ḱ":"k","ḳ":"k","ḵ":"k","ĺ":"l","ļ":"l","ľ":"l","ḷ":"l","ḹ":"l","ḻ":"l","ḽ":"l","ḿ":"m","ṁ":"m","ṃ":"m","ñ":"n","ń":"n","ņ":"n","ň":"n","ǹ":"n","ṅ":"n","ṇ":"n","ṉ":"n","ṋ":"n","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ō":"o","ŏ":"o","ő":"o","ơ":"o","ǒ":"o","ǫ":"o","ǭ":"o","ȍ":"o","ȏ":"o","ȫ":"o","ȭ":"o","ȯ":"o","ȱ":"o","ṍ":"o","ṏ":"o","ṑ":"o","ṓ":"o","ọ":"o","ỏ":"o","ố":"o","ồ":"o","ổ":"o","ỗ":"o","ộ":"o","ớ":"o","ờ":"o","ở":"o","ỡ":"o","ợ":"o","ṕ":"p","ṗ":"p","ŕ":"r","ŗ":"r","ř":"r","ȑ":"r","ȓ":"r","ṙ":"r","ṛ":"r","ṝ":"r","ṟ":"r","ś":"s","ŝ":"s","ş":"s","š":"s","ș":"s","ṡ":"s","ṣ":"s","ṥ":"s","ṧ":"s","ṩ":"s","ţ":"t","ť":"t","ț":"t","ṫ":"t","ṭ":"t","ṯ":"t","ṱ":"t","ẗ":"t","ù":"u","ú":"u","û":"u","ü":"u","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","ư":"u","ǔ":"u","ǖ":"u","ǘ":"u","ǚ":"u","ǜ":"u","ȕ":"u","ȗ":"u","ṳ":"u","ṵ":"u","ṷ":"u","ṹ":"u","ṻ":"u","ụ":"u","ủ":"u","ứ":"u","ừ":"u","ử":"u","ữ":"u","ự":"u","ṽ":"v","ṿ":"v","ŵ":"w","ẁ":"w","ẃ":"w","ẅ":"w","ẇ":"w","ẉ":"w","ẘ":"w","ẋ":"x","ẍ":"x","ý":"y","ÿ":"y","ŷ":"y","ȳ":"y","ẏ":"y","ẙ":"y","ỳ":"y","ỵ":"y","ỷ":"y","ỹ":"y","ź":"z","ż":"z","ž":"z","ẑ":"z","ẓ":"z","ẕ":"z"};function r(e){for(var t="",n=0,r=e.length;n<r;n++){var a=e.charAt(n);t+=i[a]||a}return t}},function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){"use strict";n.r(t),n.d(t,"HostedApplicationPopupViewController",function(){return h});var i=n(415),r=n(34),a=n(788),s=n(180),o=n(93),c=n(342),l=n(343),u=n(344),d=n(432),h=i.a.extend(c.a,l.a,{contentController:r.b({type:a.a,defaultValue:s.b(a.a.extend({viewClass:u.a,isActive:r.b(),view:r.b({downstreamBindings:{isActive:"(owner).isActive"}})})),downstreamBindings:{isActive:"(owner).isActive"}}),iframeView:r.b(o.c("contentController.view")),host:r.b({type:d.a}),didEnd:function(){var e=arguments;this.__s._$NX$didEnd.apply(this,e),this.isAttached&&this.hide(this)},__superMap:{_$NX$didEnd:"didEnd"},staticMembers:{__QUALIFIED_CLASS_NAME__:"HostedApplicationPopupViewController"}})},function(e,t,n){},,function(e,t,n){},,,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){(function(t){e.exports=t.__CW_BLOB_URLS[75]}).call(this,n(6))},function(e,t,n){(function(t){e.exports=t.__CW_BLOB_URLS[50]}).call(this,n(6))},function(e,t,n){(function(t){e.exports=t.__CW_BLOB_URLS[59]}).call(this,n(6))},function(e,t,n){(function(t){e.exports=t.__CW_BLOB_URLS[49]}).call(this,n(6))},function(e,t,n){(function(t){e.exports=t.__CW_BLOB_URLS[58]}).call(this,n(6))},function(e,t,n){(function(t){e.exports=t.__CW_BLOB_URLS[54]}).call(this,n(6))},function(e,t,n){(function(t){e.exports=t.__CW_BLOB_URLS[33]}).call(this,n(6))},function(e,t,n){},,function(e,t,n){},,,,,function(e,t){e.exports='<svg version="1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 118 34"><path stroke="none" d="M1 3.9c0-1.4 1.2-2.6 2.6-2.6 1.4 0 2.6 1.1 2.6 2.5S5.1 6.4 3.7 6.4h-.1C2.2 6.5 1 5.3 1 3.9zm.4 5.8h4.5v22H1.4v-22zm8.8 6.9C10.2 7 15.7 1 24.1 1 31 1 36.2 5.2 37 11.5h-4.7c-.8-3.9-4.1-6.4-8.2-6.4-5.5 0-9.1 4.5-9.1 11.5s3.5 11.5 9.1 11.5c4.2 0 7.2-2.2 8.2-5.8H37c-1.2 6.2-5.9 9.9-12.9 9.9-8.5 0-13.9-6-13.9-15.6zM40.9 1.5h4.5v30.2h-4.5V1.5zm18.7 7.9c-6.4 0-10.5 4.4-10.5 11.3S53.2 32 59.6 32s10.5-4.3 10.5-11.3c0-6.9-4-11.3-10.5-11.3zm0 18.8c-3.7 0-5.9-2.8-5.9-7.6 0-4.7 2.2-7.6 5.9-7.6s5.9 2.8 5.9 7.6-2.2 7.6-5.9 7.6zm33 3.5h-4.4v-3.8h-.1c-1.3 2.6-3.5 4-6.9 4-4.8 0-7.8-3.1-7.8-8.1V9.7h4.5v13.2c0 3.3 1.6 5.1 4.7 5.1 3.3 0 5.3-2.3 5.3-5.7V9.7h4.5l.2 22zm19.8-30.2v11.8h-.1c-1.3-2.4-3.8-3.9-6.9-3.9-5.5 0-9.3 4.4-9.3 11.2s3.8 11.2 9.3 11.2c3.2 0 5.7-1.5 7-4h.1v3.7h4.4v-30h-4.5zm-5.8 26.6c-3.5 0-5.9-2.9-5.9-7.4s2.3-7.4 5.9-7.4c3.5 0 5.8 2.9 5.8 7.4.1 4.5-2.3 7.4-5.8 7.4z"/></svg>\n'},function(e,t){e.exports='<svg version="1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 118 50"><g><g><path stroke="none" d="M11.5,39.5v10.3h-1v-0.9H2.3v0.9h-1V39.5h4.6v-2.2h1v2.2H11.5z M2.3,43.6h3.6v-3.1H2.3V43.6z M2.3,47.9h3.6v-3.4H2.3V47.9z M7,40.4v3.1h3.6v-3.1H7z M7,47.9h3.6v-3.4H7V47.9z"/><path stroke="none" d="M26.8,41.9v1h-6.6c-1.3,2.6-2.4,4.3-3.3,5.4c2.5-0.1,5-0.3,7.4-0.7c-0.2-0.5-0.5-1-0.8-1.4c-0.3-0.5-0.6-0.9-0.9-1.4l0.8-0.5c0.6,0.9,1.2,1.9,1.7,2.7c0.5,0.8,0.9,1.6,1.3,2.4L25.6,50c-0.1-0.3-0.2-0.5-0.3-0.7c-0.1-0.3-0.3-0.5-0.4-0.7c-1.4,0.2-2.8,0.3-4.3,0.5l-4.7,0.4l-0.3-1c0.1,0,0.1,0,0.1-0.1c0-0.1,0.1-0.1,0.1-0.1c0.9-0.7,2.1-2.5,3.4-5.4h-4.6v-1L26.8,41.9L26.8,41.9z M25.6,38.1V39h-9.7v-0.9H25.6z"/><path stroke="none" d="M33.1,37.2h1.1v4.2h5.1v1h-5.1v5.8h6.2v1H28.2v-1h5L33.1,37.2L33.1,37.2z"/><path stroke="none" d="M47.9,41.9V41h-4v-2.8h4v-0.9h1v0.9h4V41h-4v0.9h5.6v0.9H42.4v-0.9C42.4,41.9,47.9,41.9,47.9,41.9z M49.1,45.2c-0.2,1.7-0.6,2.8-1.3,3.3c-0.7,0.6-2.4,1.1-5,1.3l-0.4-0.9c2.4-0.1,3.7-0.5,4.5-1.1c0.8-0.7,1.2-1.8,1.2-2.8L49.1,45.2zM52.8,47.5h-0.9v-3h-6.8v3.1h-0.9v-4.1h8.6L52.8,47.5z M47.9,39h-3v1.1h3V39z M49.4,47.4c0.9,0.3,1.8,0.5,2.7,0.8c0.8,0.3,1.6,0.6,2.4,0.9l-0.5,0.9c-1.6-0.8-3.3-1.4-5-1.9L49.4,47.4z M52,39h-3.1v1.1H52V39z"/><path stroke="none" d="M58.5,40.8c-0.1,0.7-0.2,1.4-0.4,2.1l-0.6,2l-0.9-0.3c0.3-0.6,0.5-1.3,0.6-2c0.2-0.7,0.3-1.4,0.4-2.1L58.5,40.8zM60.3,37.4v4.1c-0.1,3.7-0.9,6.5-2.6,8.3L57,49.2c1.6-1.6,2.4-4.1,2.4-7.6v-4.1L60.3,37.4z M61.3,40.9c0.3,0.5,0.5,1.1,0.8,1.7c0.3,0.6,0.5,1.1,0.7,1.8L62,44.7c-0.2-0.6-0.5-1.3-0.7-1.9c-0.2-0.6-0.5-1.1-0.8-1.6L61.3,40.9z M64.3,37.7v11.7h-0.9V37.7H64.3zM65.1,40.8l0.8,1.6c0.3,0.6,0.5,1.1,0.7,1.8l-0.8,0.4c-0.2-0.6-0.5-1.2-0.7-1.8c-0.2-0.6-0.5-1.1-0.8-1.6L65.1,40.8z M68,37.3v12.5h-0.9V37.3H68z"/><path stroke="none" d="M78.9,49.6h-2.4c-0.4,0-0.8-0.1-1.2-0.1c-0.3,0-0.6-0.1-0.9-0.2c-0.6-0.2-1.1-0.5-1.5-1c-0.2-0.2-0.3-0.3-0.5-0.3c-0.3,0-0.9,0.7-1.7,2l-0.7-0.7c0.5-0.9,1.2-1.6,2-2.2V43h-2v-1H73v5.1l0.1,0.1c0.1,0.1,0.1,0.1,0.1,0.1c0.3,0.4,0.7,0.7,1.1,0.9c0.6,0.2,1.2,0.4,1.8,0.3h4.5c0.7,0,1.2-0.1,1.6-0.1l-0.3,1h-3L78.9,49.6z M70.8,37.4c0.5,0.4,0.9,0.7,1.3,1.1c0.4,0.3,0.7,0.7,1.1,1.1l-0.7,0.7c-0.7-0.8-1.5-1.5-2.4-2.2L70.8,37.4z M82.1,41.2v0.9h-4.3c-0.4,1-0.7,1.9-1.1,2.6c-0.3,0.6-0.6,1.2-1,1.7c0.8-0.1,1.7-0.2,2.5-0.3c0.7-0.1,1.4-0.3,2-0.4c-0.2-0.4-0.3-0.8-0.5-1.1c-0.2-0.4-0.4-0.7-0.6-1.1l0.8-0.3c0.8,1.4,1.5,2.8,2,4.3L81,47.8c-0.1-0.2-0.1-0.4-0.2-0.7c-0.1-0.2-0.2-0.4-0.3-0.6c-0.9,0.2-1.8,0.4-2.7,0.5c-1,0.1-2.1,0.3-3.3,0.4l-0.3-0.9c0.6-0.2,1.4-1.7,2.5-4.3h-2.8v-0.9L82.1,41.2L82.1,41.2z M81.1,38v0.9h-6.3V38H81.1z"/><path stroke="none" d="M84.3,38.2h3.1v-0.9h0.9v0.9h3.7v-0.9h1v0.9h3.1v0.9H93v0.8h-1v-0.8h-3.7v0.8h-0.9v-0.8h-3.1V38.2z M95.7,40.5V43h-1v-1.8h-9.1V43h-0.9v-2.7L95.7,40.5L95.7,40.5z M94.9,46v3.8h-1v-0.5h-7.4v0.5h-0.9V46H94.9z M86.5,48.4h7.4v-1.7h-7.4V48.4z M86.8,42.3h6.8V45h-6.8V42.3z M92.7,44.3V43h-5v1.3H92.7z"/></g><g><path stroke="none" d="M1.4,9.7h4.5v22.2H1.4V9.7z"/><path stroke="none" d="M10,16.7C10,7.1,15.4,1,23.9,1C30.8,1,36,5.2,36.8,11.6H32c-0.8-3.8-4.2-6.6-8.3-6.4c-5.5,0-9.1,4.5-9.1,11.6s3.5,11.6,9.1,11.6c4.2,0,7.3-2.2,8.3-5.8h4.7c-1.2,6.3-6,10-12.9,10C15.4,32.4,10,26.4,10,16.7z"/><path stroke="none" d="M40.8,1.5h4.6v30.4h-4.5L40.8,1.5z"/><path stroke="none" d="M49,20.8c0-7,4.1-11.4,10.5-11.4S70,13.8,70,20.8s-4,11.4-10.5,11.4C53.1,32.2,49,27.8,49,20.8z M65.4,20.8c0-4.7-2.2-7.6-5.9-7.6s-5.9,2.8-5.9,7.6s2.2,7.6,5.9,7.6S65.4,25.7,65.4,20.8z"/><path stroke="none" d="M92.5,31.9h-4.3v-3.7h-0.1c-1.3,2.7-3.5,4-6.9,4c-4.8,0-7.8-3.1-7.8-8.3V9.7H78v13.4c0,3.3,1.6,5.2,4.7,5.2c3.3,0,5.3-2.3,5.3-5.8V9.7h4.5V31.9L92.5,31.9z"/><path stroke="none" d="M96.1,20.8c0-6.9,3.7-11.3,9.2-11.3c3.1,0,5.7,1.5,7,3.9h0.1v-12h4.5v30.4h-4.4v-3.8h-0.1c-1.3,2.6-3.8,4-7.1,4C99.8,32.1,96.1,27.6,96.1,20.8z M100.8,20.8c0,4.5,2.4,7.5,5.9,7.5c3.5,0,5.8-2.9,5.8-7.5s-2.4-7.4-5.8-7.4S100.8,16.3,100.8,20.8L100.8,20.8z"/><circle stroke="none" cx="3.7" cy="3.9" r="2.7"/></g></g></svg>\n'},function(e,t){e.exports='<svg version="1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 44 44"><circle fill="none" stroke-width="2" cx="22" cy="22" r="21"/><path fill="none" stroke-width="3" d="M22 28v-3c0-3.8 3.6-5.4 5-7 .7-.8 1-2 1-4 0-2.6-2.4-5.5-6-5.5-4.5 0-6 3.5-6 5.5"/><circle cx="22" cy="33.5" r="2"/></svg>'},function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t){e.exports='<svg viewBox="0 0 21 18" xmlns="http://www.w3.org/2000/svg">\n    <path d="M15.1797874,0 L15.1754397,0 C13.1440932,0.00144923647 11.3620155,1.02557634 10.3837808,2.55113926 C9.404097,1.02799173 7.6225023,0.00724618234 5.59260509,0.00724618234 L5.58825738,0.00724618234 C3.19508489,0.00917849762 1.07388578,1.45261802 0.331876713,3.54096777 C0.111109691,4.02308043 -0.000481517116,4.60132578 1.56170624e-06,5.26072838 C0.00531542875,11.491479 9.5432237,17.6135369 9.94900991,17.871501 C10.0847551,17.957006 10.2403064,18 10.3963409,18 L10.3973071,18 C10.5538246,18 10.7098591,17.9565229 10.844638,17.871018 C11.2504243,17.6120877 20.7777048,11.4755374 20.7723909,5.24478677 C20.7719078,4.58345187 20.6593505,4.00520652 20.4617712,3.58396178 C19.694159,1.44005797 17.5715106,0 15.1797874,0 M15.1797874,0.916883605 C17.1575121,0.916883605 18.9125375,2.10718982 19.54682,3.87912294 L19.5608292,3.91921849 L19.5787032,3.95738171 C19.7231437,4.26413676 19.8057502,4.73368938 19.8062333,5.24575293 C19.8086487,8.16741365 17.3430144,11.1591208 15.2739878,13.1542363 C13.1097946,15.2416199 10.8741059,16.7391643 10.3963409,17.0512332 C9.91664363,16.7391643 7.67564097,15.2416199 5.51193092,13.1619656 C3.43952278,11.1697485 0.968574601,8.18142294 0.966159206,5.25976222 C0.965676128,4.72740936 1.050698,4.27186603 1.21832635,3.90617536 L1.23426795,3.8709106 L1.24731108,3.83371353 C1.86516889,2.09462977 3.6100496,0.925579024 5.59260509,0.924129787 C7.20415604,0.924129787 8.72440509,1.73087142 9.5591653,3.0293873 L10.3852301,4.3134108 L11.2093626,3.02793806 C12.0431566,1.72700679 13.5629226,0.918332841 15.1754397,0.916883605 L15.1797874,0.916883605" stroke="none" stroke-width="1" fill-rule="evenodd"></path>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 21 18" xmlns="http://www.w3.org/2000/svg">\n    <path d="M10.3837797,2.55114093 C9.40361291,1.02654433 7.62008609,0.00531580807 5.5877737,0.00724812315 C3.19508455,0.00869735946 1.07388567,1.4526198 0.331393605,3.54048625 C0.110626607,4.02259886 -0.000481510313,4.60132723 1.56845716e-06,5.26024667 C0.00531543493,11.4909966 9.54322267,17.613537 9.94900884,17.871018 C10.084754,17.957006 10.2407884,18 10.3968229,18 C10.5538235,18 10.7098579,17.9565229 10.8446369,17.8705349 C11.250423,17.6120877 20.7777026,11.4755381 20.7723887,5.24478815 C20.7719056,4.58345331 20.6593483,4.00520803 20.461286,3.58396334 C19.6931907,1.43861052 17.5690934,-0.00193037348 15.1754381,1.94159654e-06 C13.1440918,0.00145117791 11.3615312,1.02509509 10.3837797,2.55114093" stroke="none" stroke-width="1" fill-rule="evenodd"></path>\n</svg>\n'},function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){"use strict";n.d(t,"a",function(){return f});var i=n(34),r=n(65),a=n(1170),s=n(36),o=n(1173),c=n(410),l=n(1176),u=n(121),d=n(181),h=n(46),p=i.a.extend({readOnly:!0,desiredOutputType:null,source:null,sourceWillNeverBeObservable:!1,retainsInputs:!0,retainsOutputs:!0,outputForInput:function(e){return e},inputDidEnter:function(e,t){},inputDidExit:function(e){},outputDidEnter:function(e){},outputDidExit:function(e){},inputDidMutate:function(e,t,n,i){if(this[i._key_lastReturnedValueWasObservableArray]){var r=this[i._key_lastReturnedValue];r.beginBatchedChanges();for(var a,s=0;!isNaN(a=n[s]);s++)r.splice(a,1,t);r.endBatchedChanges()}else this.propertyChanged(i.key)},init:function(e){var t=arguments,n=e.source,i=e.dependencies;(!n||i&&1!==i.length)&&r.b("Must include exactly one dependency binding at `source` on MappedArrayProperty."),e.dependencies=[n],this.__s._$33m$init.apply(this,t)},wasRegistered:function(e,t){var n=arguments,i=a.a(e);this._inputRetainReasonName="input to MappedArrayProperty `"+t+"` on "+i,this._outputRetainReasonName="output from MappedArrayProperty `"+t+"` on "+i;var r="_mappedArrayProperty_at_"+t+"_";if(this._key_inputsByInputGuid=r+"inputsByInputGuid",this._key_outputsByOutputGuid=r+"outputsByOutputGuid",this._key_outputsByInputGuid=r+"outputsByInputGuid",this._key_knownInputGuids=r+"knownInputGuids",this._key_knownInputGuids_hash=r+"knownInputGuids_hash",this._key_knownOutputGuids=r+"knownOutputGuids",this._key_knownOutputGuids_hash=r+"knownOutputGuids_hash",this._key_lastReturnedValue=r+"lastReturnedValue",this._key_lastReturnedValueWasObservableArray=r+"lastReturnedValueWasObservableArray",this._key_outputCountsByOutputGuid=r+"outputCountsByOutputGuid",this._key_knownInputFirstIndices=r+"knownInputFirstIndices",this._key_knownInputDupeMap=r+"knownInputDupeMap",this._key_isDisposed=r+"isDisposed",this._key_notifyChangeFunc=r+"notifyChangeFunc",!this.sourceWillNeverBeObservable){var u=r+"inputsContentsDidChangeObserver";e.registerMetadata(r+"inputsContentsDidChangeObserverMaintenanceObserver",s.f(this.source,function(e){var n=this[u];n&&(n.disconnect(),n.release(this,"mappedArrayProperty invalidation from contentsDidChange"),this[u]=null),o.a(e,c.b)&&(this[u]=e.listen("contentsDidChange",l.a(this.propertyChanged,this,t)).retain(this,"mappedArrayProperty invalidation from contentsDidChange"))}))}this.__s._$49s$wasRegistered.apply(this,n)},get:function(e,t,n,i){var r=void 0,a=void 0,s=void 0,l=void 0,d=void 0,p=void 0,f=i,m=this[f._key_isDisposed]?null:f.internalGet(this,t[0+n]),v=Array.isArray(m)?Array:m?m.constructor:null,_=null;if(m&&m.objectAt){for(var b=(_=h.c.getInstance()).length=m.length;b--;)_[b]=m.objectAt(b);m=_}var y=!1;m||(y=!0,m=h.c.getInstance());var I=this[f._key_knownInputGuids];I&&(this[f._key_knownInputGuids]=null);var w=this[f._key_knownInputGuids_hash];w&&(this[f._key_knownInputGuids_hash]=null);var S=this[f._key_knownOutputGuids];S&&(this[f._key_knownOutputGuids]=null);var C=this[f._key_knownOutputGuids_hash];C&&(this[f._key_knownOutputGuids_hash]=null);var O=this[f._key_lastReturnedValue];O&&(g.autodisposeInstance(O),this[f._key_lastReturnedValue]=O=null);var A=this[f._key_outputCountsByOutputGuid];A&&(h.h.disposeInstance(A),this[f._key_outputCountsByOutputGuid]=A=null);var E=this[f._key_knownInputFirstIndices];E&&(h.h.disposeInstance(E),this[f._key_knownInputFirstIndices]=E=null);var T=this[f._key_knownInputDupeMap];T&&(h.c.disposeInstance(T),this[f._key_knownInputDupeMap]=null),this[f._key_lastReturnedValueWasObservableArray]=void 0;var M=this[f._key_inputsByInputGuid]||(this[f._key_inputsByInputGuid]={}),D=this[f._key_outputsByInputGuid]||(this[f._key_outputsByInputGuid]={}),L=this[f._key_outputsByOutputGuid]||(this[f._key_outputsByOutputGuid]={}),N=f.desiredOutputType||v,P=g.getInstanceOf(N),R=o.a(P,c.b),x=N===Array;R&&P.beginBatchedChanges();var F=h.c.getInstance(),k=h.c.getInstance(),V=h.h.getInstance(),j=h.h.getInstance();for(A=h.h.getInstance(),a=m.length,r=0;r<a;r++)s=m[r],l=u.a(s),d=D.hasOwnProperty(l)?D[l]:f.outputForInput.call(this,m[r]),p=u.a(d),x?P[r]=d:P.setIndex(r,d),V[l]||(V[l]=!0,F.push(l)),j[p]||(j[p]=!0,k.push(p)),A[p]=1+(A[p]||0),M[l]=s,D[l]=d,L[p]=d;for(a=F.length,r=0;r<a;r++)l=F[r],w&&w[l]||f._inputDidEnter.call(this,f,M[l]);for(a=I?I.length:0,r=0;r<a;r++)l=I[r],V&&V[l]||(f._inputDidExit.call(this,f,M[l]),delete M[l],delete D[l]);for(a=k.length,r=0;r<a;r++)p=k[r],C&&C[p]||f._outputDidEnter.call(this,f,L[p]);for(a=S?S.length:0,r=0;r<a;r++)p=S[r],j&&j[p]||(f._outputDidExit.call(this,f,L[p]),delete L[p]);if(I&&h.c.disposeInstance(I),w&&h.h.disposeInstance(w),S&&h.c.disposeInstance(S),C&&h.h.disposeInstance(C),y&&(h.c.disposeInstance(m),h.c.disposeInstance(F),h.h.disposeInstance(V),g.disposeInstance(P),h.c.disposeInstance(k),h.h.disposeInstance(j),h.h.disposeInstance(A),m=F=V=P=k=j=A=null),this[f._key_knownInputGuids]=F,this[f._key_knownInputGuids_hash]=V,this[f._key_lastReturnedValue]=P,this[f._key_knownOutputGuids]=k,this[f._key_knownOutputGuids_hash]=j,this[f._key_outputCountsByOutputGuid]=A,P){this[f._key_lastReturnedValueWasObservableArray]=R;var B=function(e,t,n){var i=e.length;n.length!==i&&(n.length=i);for(var r=0;r<i;r++)n[r]=t(e[r],r);return n}(m,u.a,h.c.getAutodisposingInstance()),U=this[f._key_knownInputFirstIndices]=h.h.getInstance(),W=this[f._key_knownInputDupeMap]=h.c.getInstance();for(W.length=B.length,r=B.length-1;r>=0;r--){var G=U[l=B[r]]||0;W[r]=G,U[l]=r}}return _&&(h.c.disposeInstance(_),_=m=null),P&&R&&P.endBatchedChanges(),P},_inputDidMutate:function(e,t){var n=this[e._key_outputsByInputGuid],i=u.a(t),r=n[i],a=e.outputForInput.call(this,t);if(a!==r){n[i]=a;var s=this[e._key_outputsByOutputGuid],o=this[e._key_outputCountsByOutputGuid],c=this[e._key_knownOutputGuids],l=this[e._key_knownOutputGuids_hash],d=h.c.getAutodisposingInstance(),p=this[e._key_knownInputDupeMap],f=this[e._key_knownInputFirstIndices][i];do{d.push(f),f=p[f]}while(f>0);var g=u.a(r),m=o[g],v=u.a(a),_=o[v]||0,b=d.length;_||(s[v]=a,l[v]=!0,c.push(v),e._outputDidEnter.call(this,e,a)),o[g]=m-=b,o[v]=_+=b,m||(delete s[g],delete l[g],function(e,t){for(var n=0,i=e.length,r=0;r<i-n;r++)if(e[r]===t&&(n++,r--),n){var a=r+1;e[a]=e[a+n]}e.length-=n}(c,g),e._outputDidExit.call(this,e,r)),e.inputDidMutate.call(this,t,a,d,e)}},_inputDidEnter:function(e,t){var n=this[e._key_notifyChangeFunc]||(this[e._key_notifyChangeFunc]=e._inputDidMutate.bind(this,e));e.retainsInputs&&t&&t.retain&&t.retain(this,e._inputRetainReasonName),e.inputDidEnter.call(this,t,n)},_inputDidExit:function(e,t){e.inputDidExit.call(this,t),e.retainsInputs&&t&&t.release&&t.release(this,e._inputRetainReasonName)},_outputDidEnter:function(e,t){e.retainsOutputs&&t&&t.retain&&t.retain(this,e._outputRetainReasonName),e.outputDidEnter.call(this,t)},_outputDidExit:function(e,t){e.outputDidExit.call(this,t),e.retainsOutputs&&t&&t.release&&t.release(this,e._outputRetainReasonName)},_disposeMappedArrayProperty:function(e){this[e._key_isDisposed]=!0,e.get.call(this,void 0,null,NaN,e),this[e._key_isDisposed]=void 0},disposeForObject:function(e,t){var n=arguments;this._disposeMappedArrayProperty.call(e,this),this.__s._$AE7$disposeForObject.apply(this,n)},__superMap:{_$33m$init:"init",_$49s$wasRegistered:"wasRegistered",_$AE7$disposeForObject:"disposeForObject"},staticMembers:{__QUALIFIED_CLASS_NAME__:"MappedArrayProperty"}});function f(){return p.define.apply(p,arguments)}var g={getInstanceOf:function(e){return this._getPoolForArrayClass(e).getInstance()},disposeInstance:function(e){var t=this._getPoolForArrayClass(e.constructor);o.a(e,c.b)?t.autodisposeInstance(e):t.disposeInstance(e)},autodisposeInstance:function(e){this._getPoolForArrayClass(e.constructor).autodisposeInstance(e)},_getPoolForArrayClass:function(e){if(!d.a(e))return h.c;var t=u.a(e);return this._arrayPools[t]||(this._arrayPools[t]=h.b.extend({createInstance:function(){return e.create()},disposeInstance:function(e){var t=arguments;e.clear(),this.__s._$B5I$disposeInstance.apply(this,t)},__superMap:{_$B5I$disposeInstance:"disposeInstance"}}).create())},_arrayPools:{}}},function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t){e.exports="/applications/photos3/1906Hotfix1/en-us/r$__65.svg"},function(e,t){e.exports="/applications/photos3/1906Hotfix1/en-us/r$__64.svg"},function(e,t){e.exports="/applications/photos3/1906Hotfix1/en-us/r$__56.svg"},function(e,t,n){},,function(e,t,n){},,function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n(59);var i=n(172),r=n(1283);function a(){var e={iconNames:["photos-icon"],message:i.d("Download.Error.Alert.Message"),description:i.d("Download.Error.Alert.Description"),primaryButton:{title:i.d("Download.Error.Alert.Button"),action:"hide"}};r.a.show(e)}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n(1019),r=function(){function e(){!function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this)}return e.prototype.createDownloadDetailsForSingleFile=function(e){return Object(i.a)(e)},e.prototype.createDownloadDetailsForArchive=function(){return Object(i.c)()},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return f}),n.d(t,"b",function(){return g}),n.d(t,"c",function(){return m}),n(59);var i=n(1172),r=n(1197),a=n(172),s=n(173),o=n(1284),c=n(119),l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=".zip",d=255-u.length,h=/[<>:"@|?*+\\/\b\f\n\r\t\v]/g,p={createDownloadDetailsFromShareTitle:function(e){return v(void 0,"title",p.sanitizeStringForFilename(e))},createDownloadDetailsFromDate:function(e){return v("Download.ArchiveName.From.Date","date",s.a("%{date:MMM} %{date:YYYY}",{date:new Date(e),dateFormatter:o.a}))},createDownloadDetailsFromUserName:function(e){var t=c.a(e);return v("Download.ArchiveName.From.Name","name",p.sanitizeStringForFilename(t))},sanitizeStringForFilename:function(e){return e.replace(h,"")},createDownloadDetailsFromCMMShare:g,createGenericArchiveDownloadDetails:m,createDownloadDetailsForSingleFile:f,createDownloadDetailsFromFileNameForSingleFile:function(e,t){return function(e,t,n,i){var r=p.verifyAndCreateTitle(void 0,"title",n);return{filename:""+r+i,filenameWithoutExtension:""+r+i}}(0,0,p.sanitizeStringForFilename(e),t)},verifyAndCreateTitle:function(e,t,n){var i,r="string"==typeof e?a.d(e,((i={})[t]=n,i)):n;if(r.length>d){var s,o=r.length-d,c=n.substring(0,n.length-o);r="string"==typeof e?a.d(e,((s={})[t]=c,s)):c}return r}};function f(e){var t=e.master.filenameEnc,n=t.lastIndexOf("."),i=t.substring(0,n),r=t.substring(n,t.length);return p.createDownloadDetailsFromFileNameForSingleFile(i,r)}function g(e){var t=e.share.title,n=void 0;if("string"==typeof t&&t.length>0)n=p.createDownloadDetailsFromShareTitle(t);else{var a=i.a(e,"share.owner.userIdentity.nameComponents");if("object"!==(void 0===a?"undefined":l(a))||r.a(a)){var s=e.startDate,o=e.endDate,c=s||o;n="number"==typeof c?p.createDownloadDetailsFromDate(c):p.createGenericArchiveDownloadDetails()}else n=p.createDownloadDetailsFromUserName(a)}return n}function m(){var e=a.d("Download.ArchiveName.Default");return{filename:""+e+u,filenameWithoutExtension:e}}function v(e,t,n){var i=p.verifyAndCreateTitle(e,t,n);return{filename:""+i+u,filenameWithoutExtension:i}}},function(e,t,n){},,function(e,t,n){},,function(e,t){e.exports='<svg version="1.0" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 52 50"><path fill="none" stroke-width="2"  d="M34,33h8c5.5,0,8.7-4.7,8.8-9c0-5-3.8-8.9-7.8-9c-0.1,0,0-0.2,0-0.2c0-8.5-7.8-13.5-12.7-13.5c-5.6,0-9.9,3.1-12.2,7.2v0c-4.9-3.2-10.7,1.6-10.5,5.8v0c-4,0.6-6.3,5.7-6.2,9.2c0,3.4,1.9,9.5,9.8,9.5l9,0"/><line fill="none" stroke-width="2"  x1="27" y1="16" x2="27" y2="48"/><polyline fill="none" stroke-width="2"  points="19,40.5 27,48.5 35,40.5 "/></svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 38 50" version="1.1" xmlns="http://www.w3.org/2000/svg">\n    <polyline fill="none" stroke-width="2" transform="translate(18.000000, 30.500000) scale(1, -1) translate(-18.000000, -30.500000) " points="11 34 18 27 25 34"></polyline>\n    <path fill="none" stroke-width="2" d="M18,0 L18,33"></path>\n    <polyline fill="none" stroke-width="2" points="23 15 36 15 36 49 0 49 0 15 13 15"></polyline>\n</svg>\n'},function(e,t,n){},,function(e,t){e.exports='<svg version="1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 44 36"><rect x="6" y="6" stroke-width="0" fill-opacity="0.2" width="32" height="16"/><rect x="1" y="1" fill="none" stroke-width="2" width="42" height="34"/><line fill="none" stroke-width="2" x1="1" y1="27" x2="43" y2="27"/><rect x="4" y="28" stroke-width="0" fill-opacity="0.2" width="4" height="6"/><rect x="10" y="28" stroke-width="0" fill-opacity="0.2" width="4" height="6"/><rect x="30" y="28" stroke-width="0" fill-opacity="0.2" width="4" height="6"/><rect x="36" y="28" stroke-width="0" fill-opacity="0.2" width="4" height="6"/><rect x="16" y="28" stroke-width="0" fill-opacity="0.2" width="12" height="6"/></svg>\n'},function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t){e.exports='<svg viewBox="0 0 28 28" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><rect fill="#0072E3" stroke="none" width="28" height="28" rx="14"/><g transform="translate(6.533 12.133)" fill="#f8f9fa" stroke="none"><rect width="3.733" height="3.733" rx="1.867"/><rect x="5.6" width="3.733" height="3.733" rx="1.867"/><rect x="11.2" width="3.733" height="3.733" rx="1.867"/></g></g></svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30">\n    <g>\n        <rect stroke-width="1.5" x=".75" y=".75" width="28.5" height="28.5" rx="14.25" fill="none" stroke="#000"/>\n        <g transform="translate(7 13)" stroke="none">\n            <rect width="4" height="4" rx="2"/>\n            <rect x="6" width="4" height="4" rx="2"/>\n            <rect x="12" width="4" height="4" rx="2"/>\n        </g>\n    </g>\n</svg>\n'},function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t){e.exports='<svg version="1.0" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 21 21"><polygon stroke="none" points="10,0 11,0 11,10 21,10 21,11 11,11 11,21 10,21 10,11 0,11 0,10 10,10 "/></svg>\n'},function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){"use strict";function i(){"outerHTML"in SVGElement.prototype||Object.defineProperty(SVGElement.prototype,"outerHTML",{get:function(){var e=document.createElement("div"),t=this.cloneNode(!0);e.appendChild(t);var n=e.innerHTML;return e.removeChild(t),n}})}n.r(t),n.d(t,"default",function(){return i}),i()},function(e,t,n){},,function(e,t){e.exports='<svg width="11px" height="7px" viewBox="0 0 11 7" xmlns="http://www.w3.org/2000/svg"><path d="M5.5,6.34852814 L0.651471863,1.5 L1.5,0.651471863 L5.5,4.65147186 L9.5,0.651471863 L10.3485281,1.5 L5.5,6.34852814 Z"></path></svg>\n'},function(e,t,n){},,function(e,t){e.exports='<svg version="1.0" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19 32"><polyline fill="none" stroke-width="3" points="17.5,31 2.5,16 17.5,1 "/></svg>\n'},function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t){e.exports='<svg version="1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 44 44"><circle fill="none" stroke-width="2" cx="22" cy="22" r="21"></circle><path fill="none" stroke-width="3" d="M22 28v-3c0-3.8 3.6-5.4 5-7 .7-.8 1-2 1-4 0-2.6-2.4-5.5-6-5.5-4.5 0-6 3.5-6 5.5"></path><circle cx="22" cy="33.5" r="2"></circle></svg>\n'},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var i=n(87),r=n(854),a=n(66),s=n(112),o=n(13),c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},l=i.a.extend({mixinDependencies:[s.a],staticMembers:{fetchChanges:function(e){return this.performOperation("fetchChanges",e)},__QUALIFIED_CLASS_NAME__:"Database"},scope:i.c({isPrimaryKey:!0,readOnly:!0}),syncToken:Object(o.c)({readOnly:!0}),zones:r.a.toMany({readOnly:!0,strong:!0,type:a.a}),fetchChanges:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.constructor.fetchChanges(c({},e,{scope:this.scope,syncToken:this.syncToken}))}})},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=n(177).b("CPLChangesetModes",{NONE:"NONE",POLL:"POLL",PUSH:"PUSH",CLOUDKIT_PUSH:"CLOUDKIT_PUSH"})},,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t),n(394),n(782);var i=n(1181),r=n(65),a=n(1202),s=n(1184),o=function(e,t){var n,i,r=t.delay||50,o=t.timeout||1e4,c=t.testString||"MMMMMMMIIIa%@!",l=t.testFontFamily||'"Comic Sans MS"',u=t.testFontSize||"300px",d=t.fail,h=t.success,p=t.complete,f=document.createElement("canvas").getContext("2d");f.font=u+" "+l;var g=f.measureText(c).width;i=Object(a.a)(function(){f.font=u+' "'+e+'", '+l,f.measureText(c).width!==g&&0!==g&&(clearInterval(i),clearTimeout(n),h&&h(),p&&p(!0))},r),n=Object(s.a)(function(){clearInterval(i),d&&d(),p&&p(!1)},o)},c=n(784),l=function(){function e(){!function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this)}return e.prototype.loadFonts=function(e){var t=e&&e.length;0===t&&r.b("No fonts to load provided to FontLoader.");for(var n=0,i=t;n<i;n++){var a=e[n];o(a,{complete:this._fontDetectorCompleteFunction(a)})}},e.prototype._fontDetectorCompleteFunction=function(e){return function(t){t||c.b.warn("FontLoader: Unable to load "+e)}},e}(),u=n(183),d=n(69),h=n(785),p=0,f={suspend:function(){g++},resume:function(){g--},CANVAS_DRAW_IMAGE_ERROR_TYPE:"CanvasDrawImageFailure",wrapDrawImage:function(){if(!m){m=!0;var e=CanvasRenderingContext2D.prototype.drawImage;CanvasRenderingContext2D.prototype.drawImage=function(t){if(g)return e.apply(this,arguments);try{return e.apply(this,arguments)}catch(e){if(c.b.error(f.CANVAS_DRAW_IMAGE_ERROR_TYPE+": "+e),++p>=5)return;var n=t.src?u.a.create(t.src).retain().autorelease():null,i=d.b();if(!i.feedbackService)return;i.feedbackService.reportError({errorType:f.CANVAS_DRAW_IMAGE_ERROR_TYPE,numericalArguments:Array.prototype.slice.call(arguments,1),sourceImageWidth:t.naturalWidth||t.width,sourceImageHeight:t.naturalHeight||t.height,sourceImageTagName:t.tagName,sourceImageComplete:t.complete,sourceImageURLOrigin:n?n.origin:"n/a",sourceImageURL:n?n.isInDomain("icloud.com")?t.src:"omitted":"n/a",failureCountSinceAppLoad:p,stack:h.a()})}}}}},g=0,m=!1,v=n(1185),_=n(1182),b=n(34),y=n(172),I=n(120),w=n(248),S={LANDSCAPE:"LANDSCAPE",PORTRAIT:"PORTRAIT"};Object.freeze(S);var C=n(813),O={sizeClass:b.b({readOnly:!0,dependencies:[I.a.sharedInstance.window.bindingFor("width"),I.a.sharedInstance.window.bindingFor("height"),"orientationType"],get:function(){var e=I.a.sharedInstance.window,t=e.width,n=e.height,i=this.orientationType;return i===S.LANDSCAPE&&n>w.a.uiSizeClassCompactHeightThreshold||i===S.PORTRAIT&&t>w.a.uiSizeClassCompactWidthThreshold?C.a.REGULAR:C.a.COMPACT}}),orientationType:b.b({readOnly:!0,dependencies:[I.a.sharedInstance.window.bindingFor("width"),I.a.sharedInstance.window.bindingFor("height")],get:function(){var e=I.a.sharedInstance.window,t=e.width;return e.height>t?S.PORTRAIT:S.LANDSCAPE}})},A=n(1201),E=n(1199),T=n(41),M=n(80),D=n(259),L=n(54),N=n(804),P={mixinDependencies:[N.a],name:"URLRequestServiceProtocol",version:.1,didReceiveSpecialResponse:L.a.define(),requestSent:L.a.define(),requestReceived:L.a.define()},R=n(118),x=n(49),F={mixinDependencies:[x.a],notifySpecialResponseReceived:L.a.define(),notifyRequestSent:L.a.define(),notifyResponseReceived:L.a.define()},k=M.a.extend({mixinDependencies:[D.a,F],staticMembers:{sharedInstance:T.c({type:k,get:function(){var e=k._urlConnectionInstance;if(!e){var t=R.a.sharedInstance;if(t){var n=t.applicationInfo,i=t.clientId;e=k._urlConnectionInstance=k.create(n,i)}}return e}}),initialize:function(e){k._urlConnectionInstance&&r.b("ServiceInitializer: initialize: An initializer was already set"),k._urlConnectionInstance=e},_urlConnectionInstance:T.c({type:k}),__QUALIFIED_CLASS_NAME__:"URLRequestConnection"},applicationInfo:T.c({type:Object}),clientId:T.c({type:String}),init:function(e,t){this.__s._$fi$init.call(this),e||r.b("URLRequestConnection: no application info specified"),t||r.b("URLRequestConnection: no client id specified"),this.applicationInfo=e,this.clientId=t,this.configureConnectionOnlyMessagingChannel(P)},notifySpecialResponseReceived:function(e,t,n){return this.remoteProxy.didReceiveSpecialResponse(this.applicationInfo,e,t,n)},notifyRequestSent:function(){return this.remoteProxy.requestSent(this.applicationInfo)},notifyResponseReceived:function(e,t,n,i){return this.remoteProxy.requestReceived(this.applicationInfo,e,t,n,i)},__superMap:{_$fi$init:"init"}}),V=n(271),j=void 0,B=n(527).a.extend({urlRequestConnection:T.c({type:F}),init:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k.sharedInstance;e||r.b("CloudOSClientURLConnection: No CloudOS url request service specified");var t=e.clientId,n=e.applicationInfo,i=n.masteringNumber,a=n.buildNumber;this.__s._$mC$init.call(this,t,i,a),this.urlRequestConnection=e},dsid:T.c({type:String,readOnly:!0,get:function(){var e=void 0,t=V.a.defaultInstance;if(t){var n=t.user;n&&(e=n.dsid)}return e}}),willSendReportingRequest:function(e){this.urlRequestConnection.notifyRequestSent()},recordStat:function(e,t,n,i){this.urlRequestConnection.notifyResponseReceived(e,t,n,i)},specialResponseWasReceived:function(e,t,n){this.urlRequestConnection.notifySpecialResponseReceived(e,t,n)},__superMap:{_$mC$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"CloudOSClientURLConnection"}}),U=n(78),W=n(36),G=n(410),H=n(39),$=n(180),z=n(181),K=n(793),Q=n(123),q=n(775),Y=n(121),Z=n(1169),J=n(1177),X=n(1173),ee=n(1170),te=n(1192),ne=n(152),ie=n(263),re=n(781),ae=M.a.extend(re.a,{action:function(e,t){var n=t.get("storeId");return e.isDataForked(n)&&e.resetData(n),v.a.resolve()},staticMembers:{__QUALIFIED_CLASS_NAME__:"HardResetMergeStrategy"}}),se=n(87),oe=M.a.extend(re.a,{action:function(e,t){var n=t.storeId;if(t.changeType===d.a.WRITE.DESTROY)return e.deleteData.bind(e,n);var i=t.newData;for(var r in i)e.writeDataProperty(n,r,i[r]);return v.a.resolve()},staticMembers:{__QUALIFIED_CLASS_NAME__:"OverwriteMergeStrategy"}}),ce=n(1140).a.extend({maximumActiveTransactions:6,prioritizeReads:!1,process:function(e,t){var n=this.maximumActiveTransactions-t.length;if(!(n<=0)){var i=void 0;if(this.prioritizeReads){i=[];for(var r=e.length,a=0;a<r&&i.length<n;a++){var s=e[a];s.isRead&&i.push(s)}for(var o=0;o<r&&i.length<n;o++){var c=e[o];c.isRead||i.push(c)}}else i=e.slice(0,n);for(var l=0,u=i.length;l<u;l++)this.sendTransaction(i[l])}},staticMembers:{__QUALIFIED_CLASS_NAME__:"ParallelTransactionProcessor"}}).extend({maximumActiveTransactions:1,prioritizeReads:!0,staticMembers:{__QUALIFIED_CLASS_NAME__:"SerializedTransactionProcessor"}}),le=n(408),ue=n(399),de=n(327),he=n(326),pe=n(396),fe=[],ge={mixinDependencies:[W.a],loadData:function(e,t,n){e||Object(r.b)("CW.Data.DataManager#loadData: No model class provided.",{dataManager:this}),t||Object(r.b)("CW.Data.DataManager#loadData: No data hash provided.",{dataManager:this,modelClass:e});var i,a,s=ne.a.create(),o=this._loadedStoreIds;if(Array.isArray(t))for(var c=0,l=t.length;c<l;c++)a=Ie(e,t[c]),i=U.a.getStoreIdForPrimaryKey(e,a),n||(o[i]=!0),s.recordChange(this.createChangeForDataItem(i,t[c],n));else a=Ie(e,t),i=U.a.getStoreIdForPrimaryKey(e,a),n||(o[i]=!0),s.recordChange(this.createChangeForDataItem(i,t,n));return this.merge(s).then(this.didLoadData.bind(this,s))},removeData:function(e,t){e||Object(r.b)("CW.Data.DataManager#removeData: No model class provided.",{dataManager:this}),t||Object(r.b)("CW.Data.DataManager#removeData: No primary key(s) provided.",{dataManager:this,modelClass:e});var n,i=ne.a.create();if(Array.isArray(t))for(var a=0,s=t.length;a<s;a++)n=U.a.getStoreIdForPrimaryKey(e,t[a]),i.recordChange(this.createChangeForDataItem(n,null));else n=U.a.getStoreIdForPrimaryKey(e,t),i.recordChange(this.createChangeForDataItem(n,null));return this.merge(i).then(this.didRemoveData.bind(this,i))},didLoadData:function(e){return this.didChangeDataForStoreIds(e.storeIds),e},didRemoveData:function(e){return this.didChangeDataForStoreIds(e.storeIds),e},MergeStrategy:ae,willMergeData:function(e){return e},didMergeData:function(e){return e},merge:function(e){var t,n,i=this,r=this.getPath("MergeStrategy.sharedInstance"),a=e.length;this.willMergeData(e);var s=[];for(n=0;n<a;n++)t=e.objectAt(n),s.push(r.action(this,t));for(n=0;n<a;n++)t=e.objectAt(n),this.notifyModel(t.storeId,be,t);return v.a.all(s).then(function(){return i.didMergeData(e)})},notifyModel:function(e,t){var n=this._materializedModels,i=n&&n[e];if(i){var r=arguments.length;fe.length=r+1-2;for(var a=2,s=1;a<r;a++,s++)fe[s]=arguments[a];var o=fe;o[0]=i,t.apply(this,o)}},getNetworkStatus:function(e,t){e||Object(r.b)("CW.Data.DataManager#getNetworkStatus: No model class provided.",{dataManager:this}),t||Object(r.b)("CW.Data.DataManager#getNetworkStatus: No primary key provided.",{dataManager:this,modelClass:e});var n=this.transactionProcessor;return n||Object(r.b)("CW.Data.DataManager#getNetworkStatus: No transaction processor defined.",{dataManager:this,modelClass:e,primaryKey:t}),n.getNetworkStatus(e,t)},getLoadStatus:function(e,t){e||Object(r.b)("CW.Data.DataManager#getLoadStatus: No model class provided.",{dataManager:this}),t||Object(r.b)("CW.Data.DataManager#getLoadStatus: No primary key provided.",{dataManager:this,modelClass:e});var n=U.a.getStoreIdForPrimaryKey(e,t);return this._loadedStoreIds[n]?pe.a.LOADED:pe.a.NOT_LOADED},transactionProcessor:Object($.b)(ce),operationHandlers:Object($.b)(Array),getActiveTransactions:function(e,t){e||Object(r.b)("CW.Data.DataManager#getActiveTransactions: No model class provided.",{dataManager:this}),t||Object(r.b)("CW.Data.DataManager#getActiveTransactions: No primary key provided.",{dataManager:this,modelClass:e});var n=this.transactionProcessor;return n||Object(r.b)("CW.Data.DataManager#getActiveTransactions: No transaction processor defined.",{dataManager:this,modelClass:e,primaryKey:t}),n.getActiveTransactions(e,t)},performOperation:function(e,t){e||Object(r.b)("CW.Data.DataManager#performOperation: No operation provided.",{dataManager:this}),Object(Q.a)(e)&&(e={type:e}),t?e.context?Object(r.b)("CW.Data.DataManager#performOperation: Conflict with `context` parameter; `operation` already contains a `context`. You must only provide one context per operation.",{dataManager:this,operation:e}):e.context=t:t=e.context||{},Object(q.a)(t)||Object(r.b)("CW.Data.DataManager#performOperation: context must be of type: object.",{dataManager:this}),t.operation=e;var n=this.transactionProcessor;n||Object(r.b)("CW.Data.DataManager#performOperation: No transaction processor defined.");var i=le.a.create(t),a=this._outstandingTransactions,s=Object(Y.a)(i);return a[s]=i,i.finally(function(){delete a[s]}).catch(Z.a),n.addTransaction(i),i},commit:function(){var e,t=this._changes;if(this._changes=null,t){e=this.performOperation(t.operation);for(var n=0,i=t.length;n<i;n++){var r=t.objectAt(n);this._commitChange(r)}}else(e=le.a.create()).complete();return e},commitStoreIds:function(e){var t=this,n=this._changes;if(!n){var i=le.a.create();return i.complete(),i}Array.isArray(e)||(e=[e]);var r=e.map(function(e){return n.removeChangeForStoreId(e)}).filter(J.a);if(0===r.length){var a=le.a.create();return a.complete(),a}var s=r.reduce(function(e,t){return e.recordChange(t),e},ne.a.create()),o=this.performOperation(s.operation,{changes:s});return r.forEach(function(e){return t._commitChange(e)}),o},commitPrimaryKeys:function(e,t){var n;return n=Array.isArray(t)?t.map(function(t){return U.a.getStoreIdForPrimaryKey(e,t)}):U.a.getStoreIdForPrimaryKey(e,t),this.commitStoreIds(n)},findHandlerForOperation:function(e){return Object(ue.a)(e.type,this.operationHandlers)},sendTransaction:function(e){e||Object(r.b)("CW.Data.DataManager#sendTransaction: No transaction provided.",{dataManager:this}),e.status===le.a.ACTIVE&&Object(r.b)("CW.Data.DataManager#sendTransaction: Transaction is already active.",{dataManager:this,transaction:e});var t=e.operation,n=this.findHandlerForOperation(t);if(n){e.activate();var i=e.changes;if(i)for(var a=0,s=i.length;a<s;a++){var o=i.objectAt(a);this.notifyModel(o.storeId,ye)}n.action(t).then(function(t){if(Object(X.a)(t,ie.a))this.notifyModel(t.storeId,ye),t=t.model;else if(Object(X.a)(t,ne.a))if(1===t.length)t=t.objectAt(0).model,this.notifyModel(t.storeId,ye);else{for(var n=0,i=t.length;n<i;n++){var r=t.objectAt(n);this.notifyModel(r.storeId,ye)}t=t.models}e.complete(t)}.bind(this),function(t){e.fail(t)})}else{for(var c,l=z.a,u=ee.a,d=[],h=t;h;)c=l(h.type)?u(h.type):String(h.type),d.push(c),h=h.operation;e.fail("No handler for operation: "+d.join(" > "))}},cancelAllTransactions:function(){this.cancelAllActiveTransactions(),this.cancelAllPendingTransactions()},cancelAllActiveTransactions:function(){_e(this._outstandingTransactions,"cancel",le.a.ACTIVE)},cancelAllPendingTransactions:function(){_e(this._outstandingTransactions,"cancel",le.a.PENDING)},failAllTransactions:function(){this.failAllActiveTransactions(),this.failAllPendingTransactions()},failAllActiveTransactions:function(){_e(this._outstandingTransactions,"fail",le.a.ACTIVE)},failAllPendingTransactions:function(){_e(this._outstandingTransactions,"fail",le.a.PENDING)},_outstandingTransactions:Object($.b)(Object),createChangeForDataItem:function(e,t){var n=Object(te.a)(this._persistenceStore.readData(e));if(t)for(var i in t)this._persistenceStore.writeDataProperty(e,i,t[i]);else this._persistenceStore.deleteData(e);return ie.a.create(e,n,t)},_loadedStoreIds:Object($.b)(Object),init:function(e){var t=arguments,n=Object(d.b)();n&&Object(r.b)("CW.Data.DataManager#init: Data manager already exists. Only one data manager can be instantiated.",{existingDataManager:n,erroringDataManager:this}),Object(d.e)(this),this.__s._$7qM$init.apply(this,t),this._dataHashes=Object.create(this._persistenceStore._dataHashes)},_persistenceStore:Object(T.c)({readOnly:!0,defaultValue:function(){return U.a.create({MergeStrategy:oe})}}),_commitChange:function(e){var t=e.storeId,n=e.newData,i=e.modelClass;this.notifyModel(t,ye);var r=n&&Ie(i,n);null!==r&&void 0!==r&&r!==U.a.getPrimaryKeyForStoreId(t)&&U.a.setPrimaryKeyForStoreId(t,r)},__superMap:{_$7qM$init:"init"}},me=["updated","added","removed"],ve=[];function _e(e,t,n){for(var i in e){var r=e[i];r.status===n&&r[t]()}}function be(e,t){var n=t.newData;if(n){var i=t.diff;if(i){var r=ve;r.length=0;for(var a=t.modelClass,s=0,o=me.length;s<o;s++)for(var c=i[me[s]],l=0,u=c.length;l<u;l++){var d=c[l];if(n.hasOwnProperty(d)){var h=a.getKeyForDataKey(d),p=e.get(h),f=void 0;if(Object(X.a)(p,K.a)){var g=Object(X.a)(p,de.a)||Object(X.a)(p,he.a),m=n[d];if(m)if(g){var v=t.originalData,_=G.a.fromArrays(v&&v[d],m,e);p.contentsDidChange(_)}else{var b=Object(te.a)(m);b.unshift(p.length),b.unshift(0),p.splice.apply(p,b)}else f=e.getMetadata(h),Object(X.a)(f,se.b)&&f.clearCachedValueForObject(e,h)}f=f||e.getMetadata(h),Object(X.a)(f,se.b)&&r.push(h)}}H.a.pause();for(var y=0,I=r.length;y<I;y++)e.propertyChanged(r[y]);e.propertyChanged("loadStatus"),e.propertyChanged("networkStatus"),e.dataDidLoad(),H.a.resume(),r.length=0}}}function ye(e){e.propertyChanged("networkStatus")}function Ie(e,t){var n=e.primaryKey;return n||Object(r.b)("CW.Data.DataManager#getPrimaryKeyFromData: Attempted to locate primary key on a model class that does not specify one.",{data:t,modelClass:e}),t[e.getDataKeyForKey(n)]}var we,Se,Ce=n(1252),Oe=n(1251),Ae=n(1106),Ee=n(166),Te=(we=v.a,(Se=function(e){var t=we.create();try{e(t.resolve.bind(t),t.reject.bind(t))}catch(e){t.reject(e)}return t}).all=we.all.bind(we),Se.race=we.race.bind(we),Se.resolve=we.resolve.bind(we),Se.reject=we.reject.bind(we),Se),Me=U.a.extend(ge,{mixinDependencies:[Oe.a],timingService:b.b(Ce.a),serviceUrl:"https://ckdatabasews.icloud.com",_fetchMechanism:function(e,t){return function(e,t){return j||(j=B.create()),j.fetch(e,t)}(e,t)},changesetMode:b.b({readOnly:!0,dependencies:["cplZone"],get:function(){return void 0!==this.cplZone?Ae.a.POLL:Ae.a.NONE}}),ckFetch:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.useCredentialsIfCrossOrigin=!0,this.__s._$SV$ckFetch.call(this,e,t)},startup:function(){var e,t=this,n=arguments;return(e=regeneratorRuntime.mark(function e(){var i,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=t,r=n,e.prev=1,e.next=4,i.__s._$VI$startup.apply(i,r);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),t.handleError(e.t0);case 9:case"end":return e.stop()}},e,t,[[1,6]])}),function(){var t=e.apply(this,arguments);return new Te(function(e,n){return function i(r,a){try{var s=t[r](a),o=s.value}catch(e){return void n(e)}if(!s.done)return Te.resolve(o).then(function(e){i("next",e)},function(e){i("throw",e)});e(o)}("next")})})()},handleError:function(e){if(e.type!==Ee.a.NO_ZONES&&e.type!==Ee.a.INDEXING_STATE_ERROR)throw e;this.startupDidComplete=!0,this.reportStartupIssue(e)},reportStartupIssue:function(e){var t=this.feedbackService;if(t&&t.report){var n=e.type&&e.type.value?"StartupIssue: "+e.type.value:"StartupIssue with NoZones or IndexingState";e.state&&(n+=": "+e.state),t.report("startupIssue",{issueType:n})}},__superMap:{_$SV$ckFetch:"ckFetch",_$VI$startup:"startup"},staticMembers:{__QUALIFIED_CLASS_NAME__:"PhotosDataManager"}}),De=n(199),Le={mixinDependencies:[N.a],name:"TelemetryServiceProtocol",version:"0.0.1",recordStat:L.a.define()},Ne=M.a.extend({mixinDependencies:[D.a],staticMembers:{sharedInstance:T.c({type:Ne,readOnly:!0,get:function(){var e=this._telemetryServiceInstance;return e||(e=this._telemetryServiceInstance=Ne.create()),e}}),_telemetryServiceInstance:T.c({type:Ne}),__QUALIFIED_CLASS_NAME__:"TelemetryConnection"},init:function(){this.__s._$Me$init.call(this),this.configureConnectionOnlyMessagingChannel(Le)},sendStat:function(e,t){var n=this.frameworkInitializer||{},i=n.applicationName,r=n.masteringBuildNumber,a=n.buildNumber;return this.remoteProxy.recordStat(i,r,a,e,t)},__superMap:{_$Me$init:"init"}}),Pe=M.a.extend({init:function(){this.__s._$Ei$init.call(this),this._telemetryService=Ne.sharedInstance},recordStat:function(e,t){return this._telemetryService.sendStat(e,t)},_telemetryService:T.c({type:Ne}),__superMap:{_$Ei$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"Telemetry"}}),Re=n(814),xe=n(1281),Fe={mixinDependencies:[Re.a,De.b],eventsToReport:T.c(_.a({appDidStart:xe.a.REPORT_ONCE,startupIssue:xe.a.REPORT_ALL,assetCopierFailed:xe.a.REPORT_ALL,assetCopierRequestFailed:xe.a.REPORT_ALL,assetCopierSuccess:xe.a.REPORT_ALL,assetCopierTimeToProgress:xe.a.REPORT_ALL,invalidStoreID:xe.a.REPORT_ALL}))},ke=xe.b.extend(Fe,{coskService:b.b($.b(Pe)),staticMembers:{__QUALIFIED_CLASS_NAME__:"Photos3FeedbackService"}}),Ve=n(788),je=(n(815),Ve.a.extend({viewClass:_.a({additionalClassNames:_.a(["photos-empty-page"])}),staticMembers:{__QUALIFIED_CLASS_NAME__:"EmptyPageViewController"}})),Be={targetViewControllerForAction:function(e,t){if(this.canPerformActionWithSender(t,e))return this;var n=this.parent;return n?n.targetViewControllerForAction?n.targetViewControllerForAction(e,t):n[t]?n:null:null},canPerformActionWithSender:function(e,t){var n=this[e];switch(e){case"showViewController":case"showDetailViewController":case"presentViewController":case"dismissViewController":return n&&n!==Be[e];default:return Boolean(n)}},showViewController:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];Ue.apply(void 0,["showViewController",this,e].concat(n))},showDetailViewController:function(e){Ue("showDetailViewController",this,e)},presentViewController:function(e,t){e.presentingViewController=this,Ue("presentViewController",this,e,t)},dismissViewController:function(e,t){e.presentingViewController=null,Ue("dismissViewController",this,e,t)},dismiss:function(e){if(this.presentingViewController)return this.presentingViewController.dismissViewController(this,e);throw new r.a("ViewControllerExtension#dismiss The view controller has no presentingViewController.",{viewController:this})},transitionWillStart:function(e){},transitionDidFinish:function(e){}};function Ue(e,t){var n=t.targetViewControllerForAction(t,e);if(n){for(var i=arguments.length,a=Array(i>2?i-2:0),s=2;s<i;s++)a[s-2]=arguments[s];return n[e].apply(n,a)}throw new r.a("ViewControllerExtension#"+e+" No view controller in target hierarchy implements "+e+".",{viewController:t})}var We=n(1203),Ge=n(409),He=M.a.extend(W.a,{hidesBackButton:b.b({defaultValue:!1,type:Boolean}),hidesNavigationBar:b.b({defaultValue:!1,type:Boolean}),title:b.b({type:String}),subtitle:b.b({type:String}),leftBarButtonItem:b.b({type:Ge.a}),leftBarButtonItems:b.b({defaultValue:$.b(G.b),type:G.b}),rightBarButtonItems:b.b({defaultValue:$.b(G.b),type:G.b}),rightBarButtonItem:b.b({type:Ge.a}),staticMembers:{__QUALIFIED_CLASS_NAME__:"NavigationItem"}}),$e={init:function(e,t){if(!e||!X.a(e,Ve.a))throw new r.a("NavigationViewControllerSupport#create requires that a `rootViewController` be provided.");this.__s._$Fd$init.call(this,t),this.pushViewController(e,!1)},viewControllers:b.b({readOnly:!0,type:We.a,get:function(){return We.a.create()}}),topViewController:b.b({readOnly:!0,dependencies:["viewControllers","viewControllers.contentsDidChange"],type:Ve.a,get:Object.assign(function(){return this.viewControllers.lastItem},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n]).lastItem}})}),navItems:b.b({readOnly:!0,type:We.a,get:function(){return We.a.create()}}),navItemClass:He,topNavItem:b.b({dependencies:["navItems","navItems.contentsDidChange"],readOnly:!0,type:He,get:Object.assign(function(){return this.navItems.lastItem},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n]).lastItem}})}),pushViewController:function(e){if(!(arguments.length>1&&void 0!==arguments[1])||arguments[1],!e||!X.a(e,Ve.a))throw new r.a("NavigationViewControllerSupport#pushViewController requires that a `viewController` be provided.");var t=e.navItem||this.navItemClass.create();H.a.pause(),this.viewControllers.push(e),this.navItems.push(t),H.a.resume()},popViewController:function(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0];var e=this.navItems,t=this.viewControllers,n=null;return H.a.pause(),t.length>1&&(n=t.pop()),e.length>1&&e.pop(),H.a.resume(),n},popToRootViewController:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.viewControllers.objectAt(0);return this.popToViewController(t,e)},popToViewController:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!e||!X.a(e,Ve.a))throw new r.a("NavigationViewControllerSupport#popToViewController requires that a `viewController` be provided.");for(var n=[],i=this.viewControllers,a=i.length-1;a>=1;a--){if(i.objectAt(a)===e)return n;var s=this.popViewController(t);n.push(s)}return n},setViewControllers:function(e){var t=this;if(!(arguments.length>1&&void 0!==arguments[1])||arguments[1],!e||0===e.length)throw new r.a("NavigationViewControllerSupport#setViewControllers requires that an array of `viewControllers` be provided.");H.a.pause(),this.viewControllers.clear(),this.navItems.clear(),e.forEach(function(e){t.pushViewController(e,!1)}),H.a.resume()},showViewController:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];this.pushViewController.apply(this,[e,!0].concat(n))},__superMap:{_$Fd$init:"init"}},ze=n(1183),Ke=M.a.extend({transition:null,staticMembers:{__QUALIFIED_CLASS_NAME__:"TransitionCancelled"}}),Qe=M.a.extend({promise:$.b(v.a),wasCancelled:!1,parentViewController:T.c(null),fromViewController:T.c(null),toViewController:T.c(null),fromView:T.c(null),toView:T.c(null),isRunning:T.c(!1),delegate:T.c(null),delegateContext:T.c(null),init:function(){var e=arguments;this.__s._$cB$init.apply(this,e);var t=this.parentViewController,n=this.fromViewController,i=this.toViewController;n&&n.retain(this,"holding during a transition away from this VC"),i&&i.retain(this,"holding during a transition to this VC"),t.retain(this,"holding during a transition within this VC")},run:function(){var e,t=this.delegate;t&&(e=this.delegateContext||t,t.transitionWillStart.call(e,this)),this.isRunning=!0;var n=this.parentViewController,i=this.fromViewController,r=this.toViewController,a=this.fromView,s=this.toView;return c.b.info("Beginning transition from "+i+" to "+r),i!==r?(i&&i.willMoveToParentViewController(null,this),r&&r.willMoveToParentViewController(n,this),a!==s?(this.stopConflictingTransitions(),this.markViews(),this.start(),r&&r.parent!==n&&n.addChildViewController(r)):this.didFinish()):a!==s&&(this.stopConflictingTransitions(),this.markViews(),this.start()),this.promise},start:function(){this.notifyDidMoveToViewController()},notifyDidMoveToViewController:function(){var e,t,n;e=this.parentViewController,t=this.fromViewController,n=this.toViewController,this.toView&&n&&t!==n&&n.didMoveToParentViewController(e,this)},markViews:function(){this.fromView&&(this.fromView.__anim_transition=this),this.toView&&(this.toView.__anim_transition=this)},unmarkViews:function(){this.fromView&&this.fromView.__anim_transition===this&&(this.fromView.__anim_transition=null),this.toView&&this.toView.__anim_transition===this&&(this.toView.__anim_transition=null)},stopConflictingTransitions:function(){var e=this.fromViewController,t=this.fromView,n=this.toViewController,i=this.toView;t&&(t.__anim_transition&&t.__anim_transition.stopTransitioningViewController(e),t.__anim_transition=null),i&&(i.__anim_transition&&i.__anim_transition.stopTransitioningViewController(n),i.__anim_transition=null)},stopTransitioningViewController:function(e){this.toViewController===e&&(this.promise.catch(function(){}),this.promise.reject(Ke.create({transition:this})),this.wasCancelled=!0,this.toViewController=null,this.toView=null),this.fromViewController===e&&(this.fromViewController=null,this.fromView=null)},didFinish:function(){var e=this.parentViewController,t=this.fromViewController,n=this.toViewController;t!==n&&t&&(e.removeChildViewController(t),t.didMoveToParentViewController(null,this)),this.isRunning=!1;var i=this.delegate;if(i){var r=this.delegateContext||i;i.transitionDidFinish.call(r,this)}this.unmarkViews(),t&&t.release(this,"holding during a transition away from this VC"),n&&n.release(this,"holding during a transition to this VC"),e.release(this,"holding during a transition within this VC"),this.wasCancelled||this.promise.resolve(this)},__superMap:{_$cB$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"ViewControllerTransition"}}),qe=Qe.extend({viewOutlet:null,start:function(){var e=this,t=arguments,n=this.parentViewController.view,i=this.toView,a=this.viewOutlet;a?n[a]=i:r.b("ViewOutletViewControllerTransition expects a `viewOutlet` property"),this.__s._$EM$start.apply(this,t),s.a(function(){e.didFinish()})},__superMap:{_$EM$start:"start"},staticMembers:{__QUALIFIED_CLASS_NAME__:"ViewOutletViewControllerTransition"}}),Ye=b.a.extend({type:Ve.a,defaultTransitionClass:qe,init:function(e){var t=arguments;return"string"==typeof e?this.__s._$mb$init.call(this,{viewOutlet:e}):this.__s._$mb$init.apply(this,t)},initializeMember:function(e,t){var n=arguments,i=this.__s._$rL$initializeMember.apply(this,n),r=this,a="_"+t+"DidChange",s="_"+t,o="_"+t+"_view";return this._internalValueKey=s,this._internalViewKey=o,e.registerMetadata(a,W.f(t,t+".view",function(e,t){r._transitionToChildViewControllerAndView(this,e,t)})),i},transitionToChildViewController:function(e,t,n,i){return this._transitionToChildViewControllerAndView(e,t,t&&t.view,n,i)},_transitionToChildViewControllerAndView:function(e,t,n,i,r){var a=e[this._internalValueKey],s=e[this._internalViewKey];if(e[this._internalValueKey]=t,e[this._internalViewKey]=n,a===t&&s===n)return v.a.resolve();i||(i=this.transitionClassForTransition.call(e,a,s,t,n,this));var o=ze.a(this.options,r||{},{parentViewController:e,fromViewController:a,toViewController:t,fromView:s,toView:n}),c=this.createTransition.call(e,i,o,this);c.delegate=this,c.delegateContext=e;var l=this.performTransition.call(e,c,this);return e[this.key]!==t&&(e[this.key]=t),l},inheritFrom:function(e){var t=arguments;this.__s._$1SP$inheritFrom.apply(this,t),this.viewOutlet||(this.viewOutlet=e.viewOutlet)},performTransition:function(e){return e.run()},transitionClassForTransition:function(e,t,n,i,r){return r.defaultTransitionClass},createTransition:function(e,t,n){return e.create(t)},transitionWillStart:function(e){},transitionDidFinish:function(e){},__superMap:{_$mb$init:"init",_$rL$initializeMember:"initializeMember",_$1SP$inheritFrom:"inheritFrom"},staticMembers:{__QUALIFIED_CLASS_NAME__:"ChildViewControllerProperty"}}),Ze=Qe.extend({viewsOutlet:null,_viewsArray:null,start:function(){var e=this.viewsOutlet,t=this.parentViewController.view.get(e);t||r.b("ViewsArrayViewControllerTransition expects a `viewsOutlet` property"),this._viewsArray=t,this.fromView;var n=this.toView;n&&(t.add(n),this.notifyDidMoveToViewController()),this.startAnimation()},startAnimation:function(){var e=this;s.a(function(){e.animationDidFinish()})},animationDidFinish:function(){if(!this.animationIsFinished){this.animationIsFinished=!0;var e=this.fromView;e&&this._viewsArray.remove(e),this.didFinish()}},staticMembers:{__QUALIFIED_CLASS_NAME__:"ViewsArrayViewControllerTransition"}}),Je=n(177),Xe=Je.b("ToCW.AnimatedChildViewControllerTransitionDirections",{NOT_TRANSITIONING:0,TRANSITIONING_AWAY:1,TRANSITIONING_TO:-1}),et={transitionDirection:b.b(),isTransitioningAway:b.b({dependencies:["transitionDirection"],readOnly:!0,type:Boolean,get:Object.assign(function(){return this.transitionDirection===Xe.TRANSITIONING_AWAY},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])===Xe.TRANSITIONING_AWAY}})}),isTransitioningTo:b.b({dependencies:["transitionDirection"],readOnly:!0,type:Boolean,get:Object.assign(function(){return this.transitionDirection===Xe.TRANSITIONING_TO},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])===Xe.TRANSITIONING_TO}})})},tt=Ye.extend({defaultTransitionClass:Ze,transitionClassForTransition:function(e,t,n,i,r){var a=void 0;return n&&n.incomingTransitionClass&&(a=n.incomingTransitionClass),e&&e.outgoingTransitionClass&&(a=a?void 0:e.outgoingTransitionClass),a||r.defaultTransitionClass},transitionWillStart:function(e){var t=e.fromViewController,n=e.toViewController,i=Xe.TRANSITIONING_AWAY,r=Xe.TRANSITIONING_TO;n&&n.instanceOf(Be)&&(n.transitionDirection=r,n.transitionWillStart(e)),t&&t.instanceOf(Be)&&(t.transitionDirection=i,t.transitionWillStart(e)),e.retain()},transitionDidFinish:function(e){var t=e.fromViewController,n=e.toViewController,i=Xe.NOT_TRANSITIONING;n&&n.instanceOf(Be)&&(n.transitionDirection=i,n.transitionDidFinish(e)),t&&t.instanceOf(Be)&&(t.transitionDirection=i,t.transitionDidFinish(e)),e.delegate.defaultTransitionClass=Ze,e.autorelease()},staticMembers:{__QUALIFIED_CLASS_NAME__:"AnimatedChildViewControllerProperty"}});function nt(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return tt.define.apply(tt,[e].concat(n))}var it=n(125),rt=n(1206),at=n(1127),st=Ze.extend(at.a,{duration:T.c(250),startValue:T.c(0),endValue:T.c(1),toViewAnimationProperty:at.b(NaN),fromViewAnimationProperty:at.b(NaN),_toViewAnimationObserver:W.e({inputs:["toViewAnimationProperty"],callback:function(e){var t=this.toView;t&&!t.isDisposed&&this.applyStyle(t,e)}}),_fromViewAnimationObserver:W.e({inputs:["fromViewAnimationProperty"],callback:function(e){var t=this.fromView;t&&!t.isDisposed&&this.applyStyle(t,e)}}),performAnimation:function(e,t,n,i,r){var a=this;e.retain(),n!==this[t]?this[t]=n:this.propertyChanged(t);var s=v.a.create(),o=function(){e.release(),s.resolve()};return rt.a(function(){return a.animate(t,i,r,o)}),s},applyStyle:function(e,t){},staticMembers:{__QUALIFIED_CLASS_NAME__:"BaseTransition"}}),ot=function(){var e=v.a,t=function(t){var n=e.create();try{t(n.resolve.bind(n),n.reject.bind(n))}catch(e){n.reject(e)}return n};return t.all=e.all.bind(e),t.race=e.race.bind(e),t.resolve=e.resolve.bind(e),t.reject=e.reject.bind(e),t}();function ct(e){return function(){var t=e.apply(this,arguments);return new ot(function(e,n){return function i(r,a){try{var s=t[r](a),o=s.value}catch(e){return void n(e)}if(!s.done)return ot.resolve(o).then(function(e){i("next",e)},function(e){i("throw",e)});e(o)}("next")})}}var lt=st.extend({applyStyle:function(e,t){e&&!e.isDisposed&&(void 0!==t?e.style.translateX(t).layerBack():e.style.clear("transform"))},staticMembers:{__QUALIFIED_CLASS_NAME__:"BaseHorizontalSlideTransition"}}),ut=st.extend({applyStyle:function(e,t){e&&!e.isDisposed&&(void 0!==t?e.style.translateY(t).layerBack():e.style.clear("transform"))},staticMembers:{__QUALIFIED_CLASS_NAME__:"BaseVerticalSlideTransition"}}),dt=lt.extend({startAnimation:function(){var e=this;return ct(regeneratorRuntime.mark(function t(){var n,i,r,a,s,o,c,l,u,d,h,p,f,g,m,_,b,y,I,w,S,C;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.fromView,i=e.toView,r=e.startValue,a=e.endValue,s=e.duration,o=e.direction,c=void 0,l=void 0,u=void 0,d=void 0,h=.5*a,"left"===o?(c=a,l=r,u=r,d=-a+h):(c=-a+h,l=r,u=r,d=a),p=i.element.parentElement,f="left"===o?i.element:n.element,g=p.style,m=g.maxWidth,_=g.maxHeight,b=g.overflow,y=f.style,I=y["box-shadow"],w=y["z-index"],it.a(p,{"max-width":"100%","max-height":"100%",overflow:"hidden"}),it.a(f,{"box-shadow":"0 0 "+.05*a+"px gray","z-index":"1000"}),S=e.performAnimation(i,"toViewAnimationProperty",c,l,s),C=e.performAnimation(n,"fromViewAnimationProperty",u,d,s),t.next=17,v.a.all([S,C]);case 17:it.a(p,{"max-width":m,"max-height":_,overflow:b}),it.a(f,{"box-shadow":I,"z-index":w}),e.animationDidFinish();case 20:case"end":return t.stop()}},t,e)}))()},animationDidFinish:function(){var e=arguments;return this.applyStyle(this.fromView,void 0),this.applyStyle(this.toView,void 0),this.__s._$13A$animationDidFinish.apply(this,e)},__superMap:{_$13A$animationDidFinish:"animationDidFinish"},staticMembers:{__QUALIFIED_CLASS_NAME__:"HorizontalSlideToFromTransition"}}),ht=ut.extend({startAnimation:function(){var e=this;return ct(regeneratorRuntime.mark(function t(){var n,i,r,a,s,o,c,l,u,d,h,p,f,g;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.fromView,i=e.toView,r=e.startValue,a=e.endValue,s=e.duration,o=e.direction,c=void 0,l=void 0,"up"===o?(c=i,l="toViewAnimationProperty"):(c=n,l="fromViewAnimationProperty"),u=c.element.parentElement,d=u.style,h=d.maxWidth,p=d.maxHeight,f=d.overflow,g=c.element.style.height,it.a(u,{"max-width":"100%","max-height":"100%",overflow:"hidden"}),"up"===o&&(it.a(i.element,"height",r-a),it.a(i.element,"margin-bottom",a)),t.next=11,e.performAnimation(c,l,r,a,s);case 11:it.a(i.element,"height",g),it.a(u,{"max-width":h,"max-height":p,overflow:f}),e.animationDidFinish();case 14:case"end":return t.stop()}},t,e)}))()},staticMembers:{__QUALIFIED_CLASS_NAME__:"VerticalSlideToTransition"}}),pt=ht.extend({animationDidFinish:function(){this.animationIsFinished||(this.animationIsFinished=!0,this.didFinish())},didFinish:function(){var e=this.parentViewController,t=this.fromViewController,n=this.toViewController,i=this.delegate;if(this.isRunning=!1,i){var r=this.delegateContext||i;i.transitionDidFinish.call(r,this)}this.unmarkViews(),t&&t.release(this,"holding during a transition away from this VC"),n&&n.release(this,"holding during a transition to this VC"),e.release(this,"holding during a transition within this VC"),this.wasCancelled||this.promise.resolve(this)},staticMembers:{__QUALIFIED_CLASS_NAME__:"ModalSlideUpTransition"}}),ft=ht.extend({start:function(){var e=this.viewsOutlet,t=this.parentViewController.view[e];t||r.b("ViewsArrayViewControllerTransition expects a `viewsOutlet` property"),this._viewsArray=t,this.startAnimation()},staticMembers:{__QUALIFIED_CLASS_NAME__:"ModalSlideDownTransition"}}),gt=pt.extend({duration:300,direction:"up",startValue:T.c({readOnly:!0,get:function(){return this.toView.parent.element.clientHeight}}),endValue:0,staticMembers:{__QUALIFIED_CLASS_NAME__:"SlideUpTransition"}}),mt=ft.extend({duration:300,direction:"down",startValue:0,endValue:T.c({readOnly:!0,get:function(){return this.fromView.element.clientHeight}}),staticMembers:{__QUALIFIED_CLASS_NAME__:"SlideDownTransition"}}),vt=dt.extend({duration:400,direction:"left",startValue:0,endValue:T.c({readOnly:!0,get:function(){return this.fromView.element.clientWidth}}),staticMembers:{__QUALIFIED_CLASS_NAME__:"SlideLeftTransition"}}),_t=dt.extend({duration:400,direction:"right",startValue:0,endValue:T.c({readOnly:!0,get:function(){return this.fromView.element.clientWidth}}),staticMembers:{__QUALIFIED_CLASS_NAME__:"SlideRightTransition"}}),bt=function(){var e=v.a,t=function(t){var n=e.create();try{t(n.resolve.bind(n),n.reject.bind(n))}catch(e){n.reject(e)}return n};return t.all=e.all.bind(e),t.race=e.race.bind(e),t.resolve=e.resolve.bind(e),t.reject=e.reject.bind(e),t}(),yt=st.extend({startAnimation:function(){var e,t=this;return(e=regeneratorRuntime.mark(function e(){var n,i,r,a,s,o,c,l,u,d,h,p,f,g,m;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.fromView,i=t.toView,r=t.startValue,a=t.endValue,s=t.duration,o=r||0,c=a||1,l=a||1,u=r||0,d=n.element,h=d.style["z-index"],p=i.element,f=p.style["z-index"],it.a(d,{"z-index":1}),it.a(p,{"z-index":0}),g=t.performAnimation(i,"toViewAnimationProperty",o,c,s),m=t.performAnimation(n,"fromViewAnimationProperty",l,u,s),e.next=15,v.a.all([g,m]);case 15:it.a(d,{"z-index":h}),it.a(p,{"z-index":f}),t.animationDidFinish();case 18:case"end":return e.stop()}},e,t)}),function(){var t=e.apply(this,arguments);return new bt(function(e,n){return function i(r,a){try{var s=t[r](a),o=s.value}catch(e){return void n(e)}if(!s.done)return bt.resolve(o).then(function(e){i("next",e)},function(e){i("throw",e)});e(o)}("next")})})()},applyStyle:function(e,t){e&&!e.isDisposed&&e.style.set("opacity",t)},animationDidFinish:function(){var e=arguments;return this.applyStyle(this.fromView,void 0),this.applyStyle(this.toView,void 0),this.__s._$Yd$animationDidFinish.apply(this,e)},__superMap:{_$Yd$animationDidFinish:"animationDidFinish"},staticMembers:{__QUALIFIED_CLASS_NAME__:"BaseOpacityTransition"}}),It=yt.extend({duration:500,startValue:0,endValue:1,staticMembers:{__QUALIFIED_CLASS_NAME__:"MediumOpacityTransition"}}),wt=n(197),St=n(1125),Ct=n(1172),Ot=n(163),At=n(109),Et=n(33),Tt=n(159),Mt=n(434),Dt=n(821),Lt=n(825),Nt=(n(1096),n(1095)),Pt=Lt.a.extend({additionalClassNames:_.a(["back-button-for-mouse"]),icon:Nt,title:b.b({readOnly:!0,type:String,get:function(){return""}}),staticMembers:{__QUALIFIED_CLASS_NAME__:"BackButtonForMouse"}}),Rt=(n(1093),Dt.a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",classes:["navbar-for-mouse",{type:"CLASSNAMEOUTLET",bindingtype:"DIRECTBINDING",name:"theme",attributes:{}}]}},__QUALIFIED_CLASS_NAME__:"NavbarViewForMouse"},backBarButtonItem:Pt,theme:b.b()})),xt=n(200),Ft=xt.a.extend({init:function(){var e=arguments;this.__s._$1j$init.apply(this,e),this.element.innerHTML=n(1104)},additionalClassNames:_.a(["help-button"]),tooltip:y.d("Application.HeaderForMouse.HelpButton.Title"),action:"navigateToSharedPhotosHelp",__superMap:{_$1j$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"HelpButton"}}),kt=xt.a.extend({additionalClassNames:_.a(["sign-in-button"]),action:"signInToiCloud",title:b.b(y.d("Application.HeaderForMouse.SignInButton.Title")),tooltip:y.d("Application.HeaderForMouse.SignInButton.Tooltip"),staticMembers:{__QUALIFIED_CLASS_NAME__:"SignInButton"}}),Vt=n(76),jt=n(1238),Bt=n(119),Ut=n(1276),Wt=n(1134),Gt=n(93),Ht=n(414),$t=n(519),zt=Ge.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"popoverView"}],classes:["cosk-account-menu-modal"]},className:"cosk-ui-title-bar-view-controllers-modal-view",__QUALIFIED_CLASS_NAME__:"UserPopoverModalView"},popoverView:b.b({downstreamBindings:{layout:"(owner).layout",anchorLayout:"(owner).anchorLayout",arrowLength:"(owner).arrowLength",arrowWidth:"(owner).arrowWidth",arrowAlignment:"(owner).arrowAlignment",horizontalAlignment:"(owner).horizontalAlignment",verticalAlignment:"(owner).verticalAlignment"}}),contentView:b.b(Gt.c("popoverView.contentView")),pointerDown:function(){return this.sendEvent("modalTap"),!0},anchorLayout:b.b(),arrowAlignment:b.b(),arrowLength:b.b(),arrowWidth:b.b(),horizontalAlignment:b.b(),layout:b.b(),verticalAlignment:b.b()}),Kt=Ut.b.extend({allowedLayouts:[Wt.a],arrowLength:26,contentController:b.b({defaultValue:$.b(Ve.a.extend({viewClass:$t.a})),readOnly:!0,strong:!0,type:Ve.a}),desiredSize:Gt.c("contentController.view.desiredSize"),minimumSize:Gt.c("contentController.view.minimumSize"),viewClass:Ht.b.extend({additionalClassNames:_.a(["cosk-account-menu-popover"])}),accountMenuItemWasSelected:function(){return this.hide(),!0},createView:function(){var e=arguments,t=this.__s._$Hl$createView.apply(this,e);return zt.create({popoverView:t})},modalTap:function(){this.toggle()},updateLayout:function(){this.propertyChanged("anchor")},__superMap:{_$Hl$createView:"createView"},staticMembers:{__QUALIFIED_CLASS_NAME__:"UserPopoverViewController"}}),Qt=(n(1100),xt.a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"ELEMENT",tagname:"svg",children:[{type:"ELEMENT",tagname:"path",namespace:"http://www.w3.org/2000/svg",attributes:{d:"M5.5,6.34852814 L0.651471863,1.5 L1.5,0.651471863 L5.5,4.65147186 L9.5,0.651471863 L10.3485281,1.5 L5.5,6.34852814 Z"}}],classes:["chevron-icon"],namespace:"http://www.w3.org/2000/svg",attributes:{width:"11px",height:"7px",viewBox:"0 0 11 7",version:"1.1",xlink:"http://www.w3.org/1999/xlink"}}],classes:["user-name-view"]}},__QUALIFIED_CLASS_NAME__:"UserNameView"},action:"toggleAccountMenu",popoverViewController:b.b({defaultValue:$.b(Kt),readOnly:!0,strong:!0,type:Kt}),title:b.b({dependencies:["currentUser"],readOnly:!0,type:String,get:Object.assign(function(){var e=this.currentUser||{},t=e.firstName,n=void 0===t?"":t,i=e.lastName,r=void 0===i?"":i,a=Bt.a({givenName:n}),s=Bt.a({givenName:n,familyName:r});return jt.a(s)?s:a},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n])||{},a=r.firstName,s=void 0===a?"":a,o=r.lastName,c=void 0===o?"":o,l=Bt.a({givenName:s}),u=Bt.a({givenName:s,familyName:c});return jt.a(u)?u:l}})}),tooltip:y.d("Application.HeaderForMouse.UserAction.Title"),toggleAccountMenu:function(){this.popoverViewController.toggle(this)},currentUser:b.b()})),qt=(n(1098),Ge.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"helpButton"},{type:"ELEMENT",tagname:"div",classes:["divider"]},{type:"VIEWOUTLET",tagname:"view",name:"signInButton"},{type:"VIEWOUTLET",tagname:"view",name:"userNameView"}],classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"shouldShowHelpButton",truevalue:"",falsevalue:"hide-help-btn",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"DIRECTBINDING",name:"theme",attributes:{}}]},className:"user-view",__QUALIFIED_CLASS_NAME__:"UserView"},shouldShowHelpButton:b.b(!0),theme:b.b("light-theme"),signInButton:b.b({defaultValue:$.b(kt),dependencies:["isAuthenticated","isAuthenticating"],readOnly:!0,strong:!0,type:kt,get:Object.assign(function(e){if(!1===this.isAuthenticated)return e},{__CW__getter:function(e,t,n,i){if(!1===i.internalGet(this,t[0+n]))return e}})}),userNameView:b.b({defaultValue:$.b(Qt),dependencies:["isAuthenticated"],downstreamBindings:{currentUser:"(owner).currentUser"},readOnly:!0,strong:!0,type:Qt,get:Object.assign(function(e){if(!0===this.isAuthenticated)return e},{__CW__getter:function(e,t,n,i){if(!0===i.internalGet(this,t[0+n]))return e}})}),helpButton:$.b(Ft),currentUser:b.b(Vt.a.sharedInstance.bindingFor("user")),isAuthenticated:b.b(Vt.a.sharedInstance.bindingFor("isAuthenticated")),isAuthenticating:b.b(Vt.a.sharedInstance.bindingFor("isAuthenticating"))})),Yt=(n(1085),Ge.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"appNameView"}],classes:["app-name-view-container"]},{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"navBarView"}],classes:["nav-bar-view-container"]},{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"userView"}],classes:["user-view-container"]}]},className:"header-for-mouse",__QUALIFIED_CLASS_NAME__:"HeaderViewForMouse"},appNameView:b.b({readOnly:!0,strong:!0,type:Mt.a,get:function(){return Mt.a.create({appName:y.d("Application.Title"),shouldShowDisclosureArrow:!1,theme:this.bindingFor("theme")})}}),navBarView:b.b({strong:!0,readOnly:!0,type:Rt,get:function(){return Rt.create({navItems:this.bindingFor("navItems"),topNavItem:this.bindingFor("topNavItem"),theme:this.bindingFor("theme")})}}),userView:b.b({readOnly:!0,strong:!0,type:qt,get:function(){return qt.create({theme:this.bindingFor("theme")})}}),navItems:b.b(),nextResponder:b.b(),topNavItem:b.b(),theme:b.b("light-theme")})),Zt=(n(1083),Ge.a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"VIEWOUTLET",tagname:"view",name:"headerViewForMouse"},{type:"VIEWOUTLET",tagname:"view",name:"currentNavigationView"}],classes:["main-page-view",{type:"CLASSNAMEOUTLET",bindingtype:"DIRECTBINDING",name:"sizeClassName",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"DIRECTBINDING",name:"interactionModeClassName",attributes:{}}]}},__QUALIFIED_CLASS_NAME__:"MainPageView"},headerViewForMouse:b.b({dependencies:["primaryInteractionMode"],readOnly:!0,strong:!0,type:Yt,get:Object.assign(function(){if(this.primaryInteractionMode===wt.a.MOUSE)return Yt.create({navItems:this.bindingFor("currentNavigationViewController.navItems"),nextResponder:this.bindingFor("currentNavigationViewController"),topNavItem:this.bindingFor("currentNavigationViewController.topNavItem")})},{__CW__getter:function(e,t,n,i){if(i.internalGet(this,t[0+n])===wt.a.MOUSE)return Yt.create({navItems:this.bindingFor("currentNavigationViewController.navItems"),nextResponder:this.bindingFor("currentNavigationViewController"),topNavItem:this.bindingFor("currentNavigationViewController.topNavItem")})}}),didChange:function(){this.sendEvent("navigationBarSizeMayHaveChanged")}}),interactionModeClassName:b.b({readOnly:!0,dependencies:["primaryInteractionMode"],get:Object.assign(function(){var e=this.primaryInteractionMode;return e===wt.a.TOUCH?"touch-style":e===wt.a.MOUSE?"mouse-style":void 0},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return r===wt.a.TOUCH?"touch-style":r===wt.a.MOUSE?"mouse-style":void 0}})}),sizeClassName:b.b({readOnly:!0,dependencies:["sizeClass"],get:Object.assign(function(){var e=this.sizeClass;return e===C.a.REGULAR?"regular-size":e===C.a.COMPACT?"compact-size":void 0},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return r===C.a.REGULAR?"regular-size":r===C.a.COMPACT?"compact-size":void 0}})}),currentNavigationViewController:b.b(),primaryInteractionMode:b.b(),sizeClass:b.b()})),Jt=n(1204),Xt=He.extend({shouldHideTabBar:b.b(!1),shouldHideSideBar:b.b(!1),staticMembers:{__QUALIFIED_CLASS_NAME__:"NavigationItem"}}),en=(n(819),Ge.a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"VIEWOUTLET",tagname:"view",name:"navigationBar"},{type:"MULTIVIEWOUTLET",tagname:"views",name:"contentViews",classes:["content-views"]}],classes:["navigation-view"]}},__QUALIFIED_CLASS_NAME__:"NavigationView"},navigationBar:b.b({readOnly:!0,strong:!0,type:Dt.a,get:function(){return Dt.a.create({navItems:this.bindingFor("navItems"),topNavItem:this.bindingFor("topNavItem")})}}),navItems:b.b(),topNavItem:b.b()})),tn=(n(835),Dt.a.extend({additionalClassNames:_.a(["photos-navigation-bar"]),_markTopViewController:W.f({inputs:["isHidden","topViewController"],callback:function(e,t){if(void 0!==t){var n=t.view.element.classList;!1===e?n.add("has-nav-bar"):n.remove("has-nav-bar")}}}),topViewController:b.b(),staticMembers:{__QUALIFIED_CLASS_NAME__:"NavigationBarView"}})),nn=en.extend({navigationBar:b.b({dependencies:["primaryInteractionMode"],readOnly:!0,strong:!0,type:tn,get:Object.assign(function(){if(this.primaryInteractionMode===wt.a.TOUCH)return tn.create({navItems:this.bindingFor("navItems"),topNavItem:this.bindingFor("topNavItem"),topViewController:this.bindingFor("topViewController")})},{__CW__getter:function(e,t,n,i){if(i.internalGet(this,t[0+n])===wt.a.TOUCH)return tn.create({navItems:this.bindingFor("navItems"),topNavItem:this.bindingFor("topNavItem"),topViewController:this.bindingFor("topViewController")})}}),didChange:function(){this.sendEvent("navigationBarSizeMayHaveChanged")}}),primaryInteractionMode:b.b(),topViewController:b.b(),staticMembers:{__QUALIFIED_CLASS_NAME__:"NavigationView"}}),rn=Ve.a.extend({mixinDependencies:[Be,$e],viewClass:nn,view:b.b({downstreamBindings:{navItems:"(owner).navItems",primaryInteractionMode:"(owner).primaryInteractionMode",topNavItem:"(owner).topNavItem",topViewController:"(owner).topViewController"}}),navItemClass:Xt,topViewController:nt({options:{viewsOutlet:"contentViews"}}),pushViewController:function(e){var t=arguments;return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&(this.getMetadata("topViewController").defaultTransitionClass=vt),this.__s._$Re$pushViewController.apply(this,t)},popViewController:function(){var e=arguments;return(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&(this.getMetadata("topViewController").defaultTransitionClass=_t),this.__s._$WV$popViewController.apply(this,e)},popToViewController:function(e){var t=arguments;return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&(this.getMetadata("topViewController").defaultTransitionClass=_t),this.__s._$be$popToViewController.apply(this,t)},setViewControllers:function(e){var t=arguments;return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&(this.getMetadata("topViewController").defaultTransitionClass=It),this.__s._$gq$setViewControllers.apply(this,t)},shiftViewController:function(){var e=this.viewControllers,t=G.b.create(e),n=t.shift();return this.setViewControllers(t,!1),n},unshiftViewController:function(e){var t=this.viewControllers,n=G.b.create(t);n.unshift(e),this.setViewControllers(n,!1)},primaryInteractionMode:b.b(),__superMap:{_$Re$pushViewController:"pushViewController",_$WV$popViewController:"popViewController",_$be$popToViewController:"popToViewController",_$gq$setViewControllers:"setViewControllers"},staticMembers:{__QUALIFIED_CLASS_NAME__:"NavigationViewController"}}),an=n(203),sn=n(161),on=function(){var e=v.a,t=function(t){var n=e.create();try{t(n.resolve.bind(n),n.reject.bind(n))}catch(e){n.reject(e)}return n};return t.all=e.all.bind(e),t.race=e.race.bind(e),t.resolve=e.resolve.bind(e),t.reject=e.reject.bind(e),t}(),cn={shareSelectedPhotosAction:function(){var e,t=this;return(e=regeneratorRuntime.mark(function e(){var n,i,r,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==(n=t.gridViewController.selection.encodedToArray()).length){e.next=3;break}return e.abrupt("return");case 3:return(i=St.a.application.feedbackService)&&i.report&&i.report("cmmShareInitiated"),r={beginStat:Z.a,endStat:Z.a,recordStat:i.report},a=t.primaryInteractionMode,e.next=9,sn.a.initiateCMMShare(void 0,a,d.b(),n,r);case 9:case"end":return e.stop()}},e,t)}),function(){var t=e.apply(this,arguments);return new on(function(e,n){return function i(r,a){try{var s=t[r](a),o=s.value}catch(e){return void n(e)}if(!s.done)return on.resolve(o).then(function(e){i("next",e)},function(e){i("throw",e)});e(o)}("next")})})()}},ln={mixinDependencies:[Be],oneUpPageViewControllerClass:void 0,userDidIndicateDesireToNavigateToMedia:function(e){var t=this.container,n=St.a.application.feedbackService;n&&n.report&&n.report("mediaInGridWasActuatedForOneUp");var i=this.getOrCreateOneUpPageViewController();i.media=e,i.container=t,i.selectionDelegate=this.gridViewController,this.showViewController(i)},oneUpPageViewController:b.b({strong:!0,readOnly:!0,dependencies:["_cachedOneUpPageViewController"],get:Object.assign(function(){return this._cachedOneUpPageViewController},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])}})}),getOrCreateOneUpPageViewController:function(){return this._cachedOneUpPageViewController||(this._cachedOneUpPageViewController=this.oneUpPageViewControllerClass.create({primaryInteractionMode:this.primaryInteractionMode})),this._cachedOneUpPageViewController},_cachedOneUpPageViewController:b.b()},un=n(842),dn=n(81),hn=n(1239),pn=n(403),fn={primaryInteractionMode:b.b(),isSelectionEnabled:b.b(),shouldAllowSingleTapToNavigateToOneUp:b.b({readOnly:!0,dependencies:["primaryInteractionMode","isSelectionEnabled"],get:Object.assign(function(){return this.primaryInteractionMode===wt.a.MOUSE||!this.isSelectionEnabled},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])===wt.a.MOUSE||!i.internalGet(this,t[1+n])}})}),init:function(){var e=arguments;this.__s._$A0$init.apply(this,e),this.oneUpNavigationTapGR=this.oneUpNavigationTapGRClass.create({delegate:this}),this.addGestureRecognizer(this.oneUpNavigationTapGR),this.oneUpNavigationLongTapGR=this.oneUpNavigationLongTapGRClass.create({delegate:this}),this.addGestureRecognizer(this.oneUpNavigationLongTapGR)},oneUpNavigationLongTapGRClass:hn.a.extend({event:"oneUpNavigationLongTap"}),oneUpNavigationTapGRClass:un.b.extend(pn.a,{event:"oneUpNavigationTap"}),gestureRecognizerShouldReceive:function(e){var t=arguments;return!(e===this.oneUpNavigationTapGR&&!this.shouldAllowSingleTapToNavigateToOneUp)&&this.__s._$Rv$gestureRecognizerShouldReceive.apply(this,t)},gestureRecognizerShouldRequireFailureOf:function(e,t){var n=arguments,i=this.oneUpNavigationTapGR,r=this.oneUpNavigationLongTapGR;return e!==r&&t!==r&&(!(!this.isOneUpGR(e)||!this.isGRFromChild(t))||(!this.isGRFromChild(e)||!this.isOneUpGR(t))&&(!this.isOneUpGR(e)&&t===i||!(e===i&&!this.isOneUpGR(t))&&this.__s._$101$gestureRecognizerShouldRequireFailureOf.apply(this,n)))},isOneUpGR:function(e){return e===this.oneUpNavigationLongTapGR||e===this.oneUpNavigationTapGR},isGRFromChild:function(e){var t=this.element,n=e.view.element;return t!==n&&t.contains(n)},gestureRecognizerShouldRecognizeSimultaneouslyWith:function(e,t){var n=arguments,i=this.oneUpNavigationLongTapGR;return e===i||t===i||this.__s._$18k$gestureRecognizerShouldRecognizeSimultaneouslyWith.apply(this,n)},_shouldAllowNavigation:function(e){return!(!this.isAttached||e.state!==dn.b.Ended)},oneUpNavigationTap:function(){this._shouldAllowNavigation(this.oneUpNavigationTapGR)&&this.sendEvent("userDidIndicateDesireToNavigateToMedia",this.media)},oneUpNavigationLongTap:function(){this._shouldAllowNavigation(this.oneUpNavigationLongTapGR)&&this.sendEvent("userDidIndicateDesireToNavigateToMedia",this.media)},__superMap:{_$A0$init:"init",_$Rv$gestureRecognizerShouldReceive:"gestureRecognizerShouldReceive",_$101$gestureRecognizerShouldRequireFailureOf:"gestureRecognizerShouldRequireFailureOf",_$18k$gestureRecognizerShouldRecognizeSimultaneouslyWith:"gestureRecognizerShouldRecognizeSimultaneouslyWith"}},gn=n(407),mn=(n(59),n(1283)),vn=n(877),_n={dataManager:b.b({readOnly:!0,dependencies:[],get:function(){return d.b()}}),iCloudPhotoLibraryWasExited:b.b({type:Boolean,readOnly:!0,cacheable:!0,dependencies:["exitedDate"],get:Object.assign(function(){return Boolean(this.exitedDate)},{__CW__getter:function(e,t,n,i){return Boolean(i.internalGet(this,t[0+n]))}})}),exitedDate:b.b({type:Number,readOnly:!0,dependencies:["dataManager.cplZoneState"],get:function(){var e=this.dataManager;if(void 0!==e){var t=e.cplZoneState;return t?t.disabledTime:void 0}}}),iCPLEnabled:b.b({type:Boolean,readOnly:!0,dependencies:["dataManager.noZoneError","dataManager.cplZoneState"],get:function(){if(!this.dataManager)return!1;var e=this.dataManager,t=e.cplZoneState;return!e.noZoneError&&(!t||t&&t.enabled)}})},bn=n(40),yn=n(67),In=n(158),wn=n(401),Sn={staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isDeleted",truevalue:"is-disabled",attributes:{}}]}}},gestureRecognizerShouldReceive:function(e){var t=arguments;return!this.isDeleted&&this.__s._$8G$gestureRecognizerShouldReceive.apply(this,t)},isDeleted:b.b({readOnly:!0,dependencies:["media","media.primaryAsset","media.primaryAsset.isDeleted"],get:Object.assign(function(){return Boolean(this.getPath("media.primaryAsset.isDeleted"))},{__CW__getter:function(e,t,n,i){return Boolean(i.internalGetPath(this,t[2+n]))}})}),_deselectSelfOnDelete:W.f({inputs:["isDeleted"],callback:function(e){e&&this.isSelected&&this.sendEvent("userSelectionRequest",{view:this,operation:wn.a.REMOVE})}}),__superMap:{_$8G$gestureRecognizerShouldReceive:"gestureRecognizerShouldReceive"}},Cn=n(122),On={mixinDependencies:[{mixinDependencies:[W.a,Cn.a],staticMembers:{shouldExistInHost:function(){return!0}},host:b.b(),initFromPool:function(e){this.__s._$5b$initFromPool.call(this),this.host=e},cleanup:function(){var e=arguments;this.host=null,this.__s._$75$cleanup.apply(this,e)},__superMap:{_$5b$initFromPool:"initFromPool",_$75$cleanup:"cleanup"}}],element:b.b(),wantsPresenceInHost:b.b(!0),hostOutletName:b.b("element"),didAppendElement:function(){},willRemoveElement:function(){},_hostElement:b.b({readOnly:!0,dependencies:["host","hostOutletName"],get:function(){var e=this.host,t=this.hostOutletName;return e&&t?e[t]:null}}),_maintainElementPresence:W.f("wantsPresenceInHost","element","_hostElement",function(e,t,n){var i=this._mep_lastElement;this._mep_lastElement=t;var r=e&&t||null;i&&i!==r&&i.parentNode&&(this.willRemoveElement(i),i.parentNode.removeChild(i)),r&&r.parentNode!==n&&(r.parentNode&&r.parentNode.removeChild(r),n&&(n.appendChild(r),this.didAppendElement(r)))})},An=M.a.extend(On,{tagName:"div",classNames:[],element:b.b(function(){var e=document.createElement(this.tagName);return e.className=this.classNames.join(" "),e}),staticMembers:{__QUALIFIED_CLASS_NAME__:"ElementAdornment"}}),En=n(1143),Tn=n(88),Mn=n(46),Dn=new Tn.a,Ln=new WeakMap,Nn=void 0,Pn=function(e){return.5-.5*Math.cos(e*Math.PI)},Rn=function(e,t){return e.style.opacity=1===t||isNaN(t)?"":t};function xn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:200,r=arguments[4];Fn(e);var a=Mn.h.getInstance();a.from=t,a.to=n,a.startTime=performance.now(),a.duration=i,a.tween=Pn,a.render=Rn,a.callback=r,Dn.add(e),Ln.set(e,a),a.render(e,t),Nn||(Nn=requestAnimationFrame(kn))}function Fn(e){Dn.remove(e);var t=Ln.get(e);t&&(Ln.delete(e),t.callback&&En.b(t.callback),Mn.h.disposeInstance(t))}function kn(){Nn=null;for(var e,t=Dn.items,n=performance.now(),i=0;e=t[i];i++){var r=Ln.get(e),a=Math.max(0,Math.min(1,r.tween(Math.max(0,Math.min(1,(n-r.startTime)/r.duration)))));r.render(e,r.from+a*(r.to-r.from)),1===a&&(Fn(e),i--)}t.length&&(Nn=requestAnimationFrame(kn))}var Vn=n(334),jn=n(155),Bn=function(e){return e.parentNode&&e.parentNode.removeChild(e)},Un={mixinDependencies:[{fadeInDuration:200,fadeOutDuration:0,visibleOpacity:1,canFadeElementIn:function(){return!0},canFadeElementOut:function(){return!0},didAppendElement:function(e){var t=arguments;this.__s._$8v$didAppendElement.apply(this,t),this.fadeInDuration&&this.canFadeElementIn()?xn(e,0,this.visibleOpacity,this.fadeInDuration):1!==this.visibleOpacity?e.style.opacity=this.visibleOpacity:e.style.opacity=""},willRemoveElement:function(e){var t,n=arguments;if(this.__s._$FM$willRemoveElement.apply(this,n),Fn(e),this.fadeOutDuration&&this.canFadeElementOut()){var i=Object(Vn.a)(e);i.style.pointerEvents="none",e.parentNode.insertBefore(i,e);var r=parseFloat(e.style.opacity||"1"),a=(t=r,Math.acos(1-2*t)/Math.PI);xn(i,r,0,this.fadeOutDuration*a,Object(jn.a)(Bn,void 0,i))}},__superMap:{_$8v$didAppendElement:"didAppendElement",_$FM$willRemoveElement:"willRemoveElement"}}],canFadeElementIn:function(){var e=this.host;return e&&!e.isClearedForReuse&&!e.isInSameEventLoopAsFirstLayout},canFadeElementOut:function(){var e=this.host;return e&&!e.isClearedForReuse&&!e.isInSameEventLoopAsFirstLayout}},Wn=(n(905),An.extend(Un,{staticMembers:{existenceDependenciesOnHost:["media.genericType"],shouldExistInHost:function(e){var t=e.media;return!!t&&t.genericType===t.constructor.Type.VIDEO},__QUALIFIED_CLASS_NAME__:"VideoDurationAdornment"},classNames:["video-duration-adornment"],_maintainText:W.f("host.media.durationString",function(e){this.element.textContent=e})})),Gn=n(1234),Hn=(n(907),An.extend(Un,{classNames:["error-adornment"],wantsPresenceInHost:b.b({readOnly:!0,dependencies:["host","host.derivative.physicalGeometricLength","host.derivativeLoader.perfectDerivativeGeometricLength","host.derivativeLoader.derivativeError","host.media.renderableImageDerivativeInfos","host.media.loadStatus","host.media.cannotHaveImageDerivative"],get:Object.assign(function(){if(!this.host||this.getPath("host.media.cannotHaveImageDerivative")||this.getPath("host.derivative.physicalGeometricLength")>=this.getPath("host.derivativeLoader.perfectDerivativeGeometricLength"))return!1;var e=this.getPath("host.media.loadStatus");if(e===pe.a.LOADED){var t=this.getPath("host.media.renderableImageDerivativeInfos"),n=this.getPath("host.derivativeLoader.derivativeError");return Boolean(n||!t||!t.length)}return e===pe.a.ERRORED},{__CW__getter:function(e,t,n,i){if(!i.internalGet(this,t[0+n])||i.internalGetPath(this,t[6+n])||i.internalGetPath(this,t[1+n])>=i.internalGetPath(this,t[2+n]))return!1;var r=i.internalGetPath(this,t[5+n]);if(r===pe.a.LOADED){var a=i.internalGetPath(this,t[4+n]),s=i.internalGetPath(this,t[3+n]);return Boolean(s||!a||!a.length)}return r===pe.a.ERRORED}})}),_maintainBackground:W.f("host.derivative",function(e){this.element.classList.toggle("on-derivative",Boolean(e))}),staticMembers:{__QUALIFIED_CLASS_NAME__:"ErrorAdornment"}})),$n=n(909);Gn.a(".pgk-photo-item-view .error-adornment",$n.replace("chartreuse","rgba(0,0,0,0.2)")),Gn.a(".pgk-photo-item-view .error-adornment.on-derivative",$n.replace("chartreuse","rgba(255,255,255,0.85)")),n(910);var zn=An.extend(Un,{staticMembers:{existenceDependenciesOnHost:["media.specificType"],shouldExistInHost:function(e){var t=e.media;return!!t&&t.specificType===t.constructor.Type.AUDIO},__QUALIFIED_CLASS_NAME__:"AudioAdornment"},classNames:["audio-adornment"]}),Kn=(n(912),An.extend(Un,{staticMembers:{existenceDependenciesOnHost:["media.specificType"],shouldExistInHost:function(e){var t=e.media;return!!t&&t.specificType===t.constructor.Type.PANORAMA},__QUALIFIED_CLASS_NAME__:"PanoramaAdornment"},classNames:["panorama-adornment"],_maintainVerticalClass:W.f("host.media.aspectRatio",function(e){this.element.classList.toggle("vertical-panorama",e<1)})})),Qn=n(914),qn={zoomTransitionValue:b.b(),shouldHideMostProminentDisplayOfMediaWithPK:b.b(),getPrimaryZoomRectableMedia:function(){},getRectInWindowForPrimaryZoomRectableMedia:function(){},zoomTransitionWillStartWithMedia:function(e){this.shouldHideMostProminentDisplayOfMediaWithPK=e?e.pk:void 0},zoomTransitionDidFinish:function(){this.shouldHideMostProminentDisplayOfMediaWithPK=void 0}},Yn=n(794),Zn=n(1129),Jn=n(176),Xn=G.b.extend({source:Object(b.b)(),serializer:Object(Gt.c)("source.serializer"),transformChangeset:null,staticMembers:{init:function(){var e=arguments;this.__s._$Px$init.apply(this,e);var t=this.prototype.getMetadata("source").reference;t===Jn.c?Object(r.b)("ObservableArrayProxy may not have a weak reference to its source.",this):this.prototype._sourceIsStrongRef=t===Jn.a},__superMap:{_$Px$init:"init"},__QUALIFIED_CLASS_NAME__:"ObservableArrayProxy"},_sourceIsStrongRef:!1,shouldDoPostInitProcessing:!1,_sourceDidChange:Object(W.f)("source",function(e){e&&!Object(X.a)(e,G.b)&&Object(r.b)("Only a CW.ObservableArray can be used as the source for an observable array proxy.",{source:e});var t=this._sourceIsStrongRef;t&&e&&e.retain("ObservableArrayProxy cache reference");var n=this._lastSetSource,i=!!n&&!!n.get("length"),a=!!e&&!!e.get("length");if(this._lastSetSource=e,i||a){var s,o,c,l=this.get("_sourceChanges");if(n)for(o=(s=n.get("length"))-1;o>=0;o--)c=n.encodedObjectAt(o),l.recordRemoval(o,c);if(e)for(s=e.get("length"),o=0;o<s;o++)c=e.encodedObjectAt(o),l.recordInsertion(o,c);ei(this,l),l.clear(),t&&n&&n.release("ObservableArrayProxy cache reference")}}),_sourceChanges:Object(T.c)(function(){return new G.a(this)}),_lastSetSource:null,_sourceContentsDidChange:Object(W.f)("source.contentsDidChange",function(e){e&&ei(this,e.context)}),dispose:function(){var e=arguments;if(this._sourceIsStrongRef){var t=this._lastSetSource;t&&t.release("ObservableArrayProxy cache reference")}this._lastSetSource=null,this.__s._$1la$dispose.apply(this,e)},__superMap:{_$1la$dispose:"dispose"}});function ei(e,t){var n,i=!1;e.transformChangeset&&(n=e.transformChangeset(t))&&n!==t&&(i=!0,t=n),t.applyChanges(e),i&&t.clear()}var ti=n(1139),ni=n(126),ii={mixinDependencies:[x.a],sections:ni.a.define()},ri=n(797),ai=n(82),si={mixinDependencies:[x.a,ri.a],firstItem:ai.a.define(),lastItem:ai.a.define()},oi={mixinDependencies:[x.a,ri.a],sectionHandle:ai.a.define()},ci=Yn.a.extend(oi,{_cachedSectionHandle:Object(T.c)({strong:!0}),sectionHandle:Object(T.c)({readOnly:!0,get:function(){var e=this._cachedSectionHandle;if(e)return e;var t=this.position,n=this.source._sectionsProxy.handleProvider;if(!this.isValid)return n.at(-1);var i=this.source,r=i.sections.binarySearch(vi,i,t),a=n.at(r);return a._registerCache(this),this._cachedSectionHandle=a,a}}),_clearSectionCache:function(){var e=this._cachedSectionHandle;e&&(e._unregisterCache(this),this._cachedSectionHandle=null)},_sectionDidChange:function(){this._cachedSectionHandle=null},_applyRemove:function(){var e=arguments;this.__s._$XP$_applyRemove.apply(this,e),this.wasRemoved?this._cachedSectionHandle=this.sectionHandle:this._clearSectionCache()},_applyInsert:function(){var e=arguments;this.__s._$ci$_applyInsert.apply(this,e),this.wasRemoved?this._cachedSectionHandle=this.sectionHandle:this._clearSectionCache()},cleanup:function(){this._clearSectionCache(),this.__s._$iV$cleanup.call(this)},__superMap:{_$XP$_applyRemove:"_applyRemove",_$ci$_applyInsert:"_applyInsert",_$iV$cleanup:"cleanup"},staticMembers:{__QUALIFIED_CLASS_NAME__:"SectionedCollectionHandle"}}),li=Zn.a.extend({HandleClass:ci,staticMembers:{__QUALIFIED_CLASS_NAME__:"SectionedCollectionHandleProvider"}});function ui(e){e._sectionDidChange()}var di=Yn.a.extend(si,{_handleCache:Object($.b)(Set),_registerCache:function(e){this._handleCache.add(e)},_unregisterCache:function(e){this._handleCache.delete(e)},_flushCaches:function(){var e=this._handleCache;e.forEach(ui),e.clear()},_handleRemove:function(){this._flushCaches()},cleanup:function(){this._flushCaches(),this.__s._$vj$cleanup.call(this)},_invalidItem:function(){var e=this.source.adapter.handleProvider.at(-1);return e._cachedSectionHandle=this,e},firstItem:Object(T.c)({readOnly:!0,get:function(){var e=this.source.adapter;if(!this.isValid)return this._invalidItem();var t=e._indicesForSection(this.value,this.position);return t.endIndex<t.startIndex?this._invalidItem():e.handleProvider.at(t.startIndex)}}),lastItem:Object(T.c)({readOnly:!0,get:function(){var e=this.source.adapter;if(!this.isValid)return this._invalidItem();var t=e._indicesForSection(this.value,this.position);return t.endIndex<t.startIndex?this._invalidItem():e.handleProvider.at(t.endIndex)}}),__superMap:{_$vj$cleanup:"cleanup"},staticMembers:{__QUALIFIED_CLASS_NAME__:"SectionHandle"}}),hi=Zn.a.extend({HandleClass:di,staticMembers:{__QUALIFIED_CLASS_NAME__:"SectionHandleProvider"}}),pi=[];function fi(e){pi.push(e)}var gi=Xn.extend({HandleProviderClass:hi,adapter:Object(b.b)(),staticMembers:{__QUALIFIED_CLASS_NAME__:"UnsafeSectionsProxy"}}),mi=gi.extend({source:Object(b.b)({strong:!0}),staticMembers:{__QUALIFIED_CLASS_NAME__:"StrongSectionsProxy"}});function vi(e,t,n,i){var r=n._indicesForSection(e,t),a=r.startIndex,s=r.endIndex;return i<a?-1:i>s?1:0}var _i=G.b.extend(ii,{staticMembers:{init:function(){var e=arguments;this.__s._$1YG$init.apply(this,e);var t=this.prototype,n=t.getMetadata("source").reference;n===Jn.c?Object(r.b)("SectionedOrderedListAdapter may not have a weak reference to its source.",this):t._sourceIsStrongRef=n===Jn.a;var i=t.getMetadata("sections").reference;i===Jn.c?Object(r.b)("SectionedOrderedListAdapter may not have a weak reference to its sections.",this):t._sectionsProxy=i===Jn.a?mi:gi},__superMap:{_$1YG$init:"init"},__QUALIFIED_CLASS_NAME__:"SectionedOrderedListAdapter"},source:Object(b.b)(),objectAt:function(){var e=this.source;if(e)return e.objectAt.apply(e,arguments)},encodedObjectAt:function(){var e=this.source;if(e&&e.length)return e.encodedObjectAt.apply(e,arguments)},rawSplice:function(){var e=this.source;return e.rawSplice.apply(e,arguments)},_internalLength:Object(b.b)({get:function(){return this.source._internalLength}}),length:Object(b.b)({dependencies:[],writeDependencies:["source.length"],get:function(){var e=this.source;return e?e.length:0},set:Object.assign(function(e){return this.source.length=e,e},{__CW__setter:function(e,t,n,i,r){return n[0+i]=e,e}}),writeDependencySetPathMap:["true"]}),shallowCopy:function(){var e=this.source;return e?e.shallowCopy.apply(e,arguments):null},toJSON:function(){var e=this.source;return e?e.toJSON.apply(e,arguments):[]},push:function(){var e=this.source;return e.push.apply(e,arguments)},indexOf:function(){var e=this.source;return e?e.indexOf.apply(e,arguments):-1},serializer:Object(Gt.c)("source.serializer"),_proxyContentsDidChange:Object(W.e)("source.contentsDidChange",function(e){this.itemsWillChange();for(var t=this.changes,n=e.context,i=n.length,r=0;r<i;r++){var a=n[r],s=a.operation,o=a.index,c=a.encodedItem;s===G.b.REMOVE?t.recordRemoval(o,c):t.recordInsertion(o,c)}this.itemsDidChange()}),_lastSetSource:null,_sourceIsStrongRef:!1,_sourceDidChange:Object(W.f)("source",function(e){e&&!Object(X.a)(e,G.b)&&Object(r.b)("Only a CW.ObservableArray can be used as the source for an observable array proxy.",{source:e}),e=e||null;var t=this._sourceIsStrongRef;t&&e&&e.retain(this,"SectionedOrderedListAdapter cache reference");var n=this._lastSetSource;if(e!==n){var i=!!n&&!!n.length,a=!!e&&!!e.length;if(this._lastSetSource=e,i||a){this.itemsWillChange();var s,o,c,l=this.changes;if(n)for(o=(s=n.length)-1;o>=0;o--)c=n.encodedObjectAt(o),l.recordRemoval(o,c);if(e)for(s=e.length,o=0;o<s;o++)c=e.encodedObjectAt(o),l.recordInsertion(o,c);this.itemsDidChange(),t&&n&&n.release(this,"SectionedOrderedListAdapter cache reference")}}}),HandleProviderClass:li,sections:Object(b.b)(),_sectionsProxy:Object(b.b)({downstreamBindings:{source:"(owner).sections",adapter:"(owner)"},strong:!0,defaultValue:Object($.b)(gi)}),_invalidateCacheOnSectionsChange:Object(W.f)("sections",function(e){for(var t=this._sectionIndexCache,n=0,i=t.length;n<i;n++){var r=t[n];r&&fi(r)}t.length=0}),beginBatchedChanges:function(){var e=arguments;this._sectionsProxy.beginBatchedChanges(),this.__s._$3bu$beginBatchedChanges.apply(this,e)},endBatchedChanges:function(){var e=arguments;H.a.pause(),this._sectionsProxy.endBatchedChanges(),this.__s._$3e_$endBatchedChanges.apply(this,e),this.notifySectionLengthChangedIfNecessary(),H.a.resume()},invalidateSectionLengthsOnContentsChange:Object(W.e)({inputs:["contentsDidChange","_sectionsProxy.handleProvider.handlesDidUpdate","_sectionsProxy.contentsDidChange"],callback:function(e){e&&this.invalidateSectionLengths()}}),invalidateSectionLengths:function(){if(!this.invalidateSectionLengthsFiring){this.invalidateSectionLengthsFiring=!0;for(var e=this._sectionIndexCache,t=this._sectionsProxy,n=t.length,i=t.handleProvider,r=0;r<n;r++)this._invalidateSection(r,i,e),this._sectionLengthChanges.add(i.at(r).retain());this.invalidateSectionLengthsFiring=!1}},_invalidateCacheOnSectionsContentsChange:Object(W.e)("_sectionsProxy.contentsDidChange","_sectionsProxy.handleProvider.handlesDidUpdate",function(e){if(e&&!this._invalidateCacheOnSectionsContentsChangeFiring){this._invalidateCacheOnSectionsContentsChangeFiring=!0;for(var t=this._sectionIndexCache,n=this._sectionsProxy,i=n.length,r=n.handleProvider,a=0;a<i;a++)this._invalidateSection(a,r,t),this._sectionLengthChanges.add(r.at(a).retain());this.notifySectionLengthChangedIfNecessary(),this._invalidateCacheOnSectionsContentsChangeFiring=!1}}),_invalidateSection:function(e,t,n){var i=t.cachedHandleAt(e);i&&(i.retain(),i._flushCaches(),i.release());var r=n[e];r&&(fi(r),n[e]=void 0)},sectionLength:L.a.define(),sectionLengthChanged:function(e,t){var n=this.sections;void 0===t&&(t=n.indexOf(e));for(var i=this._sectionIndexCache,r=n.length,a=this._sectionsProxy.handleProvider,s=t;s<r;s++)this._invalidateSection(s,a,i);this._sectionLengthChanges.add(a.at(t).retain()),this.notifySectionLengthChangedIfNecessary()},notifySectionLengthChangedIfNecessary:function(){if(0===this._batchCount){var e=this._sectionLengthChanges;e.length&&!H.a.nodeIsDirty(this.downstreamNodes.sectionLengthsDidChange)&&this.sectionLengthsDidChange(e)}},_sectionLengthChanges:Object(T.c)({strong:!0,defaultValue:Object($.b)(ti.a)}),_sectionIndexCache:Object($.b)(Array),_indicesForSection:function(e,t,n){n||(n=this._sectionIndexCache);var i,r=n[t];if(void 0!==r)return r;if(r=pi.pop()||{},0===t)i=0;else{var a=t-1;i=this._indicesForSection(this.sections.objectAt(a),a,n).endIndex+1}return r.startIndex=i,r.endIndex=i+this.sectionLength(e)-1,n[t]=r,r},sectionLengthsDidChange:Object(W.g)({didPropagate:function(){this._sectionLengthChanges.forEach(function(e){e.release()}),this._sectionLengthChanges.clear()}}),dispose:function(){var e=arguments;if(this._sourceIsStrongRef){var t=this._lastSetSource;t&&t.release(this,"SectionedOrderedListAdapter cache reference")}this._lastSetSource=null,this.__s._$5CB$dispose.apply(this,e)},__superMap:{_$3bu$beginBatchedChanges:"beginBatchedChanges",_$3e_$endBatchedChanges:"endBatchedChanges",_$5CB$dispose:"dispose"}}).extend({_sourceDidChange:W.f("source",function(){this.beginIgnoringChanges(),this.endIgnoringChanges()}),staticMembers:{__QUALIFIED_CLASS_NAME__:"StrongSectionedAdapter"}}),bi=_i.extend({container:b.b({strong:!0,type:M.a}),sections:b.b({strong:!0,readOnly:!0,dependencies:["container"],get:function(){var e=this._sections_lastRet,t=this.container;return e&&1===e.length&&e.objectAt(0)===t||e&&!e.length&&!t?e:this._sections_lastRet=G.b.create(t?[t]:[])}}),_sections_lastRet:T.c({strong:!0}),source:Gt.c("container.medias"),sectionLength:function(e){return Ct.a(e,"medias.length")||0},objectAt:function(){var e=this.source;if(e)return e.objectAt.apply(e,arguments)},canEnsureRange:b.b({readOnly:!0,dependencies:["container"],get:Object.assign(function(){return void 0!==this.container&&this.container.isLoaded},{__CW__getter:function(e,t,n,i){return void 0!==i.internalGet(this,t[0+n])&&i.internalGet(this,t[0+n]).isLoaded}})}),ensureRange:function(e,t){return this.container.loadMediasForRange(e,t)},staticMembers:{__QUALIFIED_CLASS_NAME__:"ContainerSectionedAdapter"}}),yi=(n(837),Ge.a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"VIEWOUTLET",tagname:"view",name:"photosGridView"}]}},__QUALIFIED_CLASS_NAME__:"BasePhotosGridPageView"},additionalClassNames:_.a(["base-photos-grid-page"])})),Ii=n(192),wi=n(189),Si=n(1209),Ci=n(790),Oi=n(795),Ai=n(796),Ei=n(323),Ti=n(221),Mi={headerHeight:Object(b.b)(30),footerHeight:Object(b.b)(30),hasFloatingHeaders:Object(b.b)(!0),hasHeaders:Object(b.b)(!0),hasFooters:Object(b.b)(!1),sectionSpacing:Object(b.b)(0),sectionTopPadding:Object(b.b)(0),sectionBottomPadding:Object(b.b)(0),sectionHeaderPadding:Object(b.b)(0),sectionFooterPadding:Object(b.b)(0)},Di={staticMembers:{LayoutMetricsClass:Object(_.a)(Mi)},mixinDependencies:[Ei.a,W.a],cellClassKeysByCellType:Object(_.a)({header:"headerCellClass",footer:"footerCellClass"}),footerCellClass:Ti.a,layOutCellInDirection:function(e,t,n,i,r,a){var s=arguments;return"header"===t.cellType&&(t.isFloatingToTop=!1),this.__s._$ra$layOutCellInDirection.apply(this,s)},headerCellClass:Ti.a.extend({isFloatingToTop:!1,clipTop:0,invalidate:function(){this.isFloatingToTop=!1,this.clipTop=0,this.__s._$xY$invalidate.call(this)},isReusable:Object(T.c)({get:function(){return!this.isFloatingToTop}}),moveBy:function(e,t,n){if(!this.isFloatingToTop){var i=e.layoutMetrics,r=i.topInset,a=this.y;a+=n,i.hasFloatingHeaders&&a<r?(this.y=r,this.isFloatingToTop=!0):(this.y=a,this.isFloatingToTop=!1)}},__superMap:{_$xY$invalidate:"invalidate"}}),getSectionHandle:function(e){return"header"===e.cellType||"footer"===e.cellType?e.handle:e.handle.sectionHandle},sizeKeyByCellType:Object(_.a)({header:"sizeForHeader",footer:"sizeForFooter"}),sizeForHeader:function(e,t){return Ci.a.create(e.viewportWidth,e.layoutMetrics.headerHeight)},sizeForFooter:function(e,t){return Ci.a.create(e.viewportWidth,e.layoutMetrics.footerHeight)},reusePreviousVisibleCells:function(e,t,n,i,r){var a=arguments;r.sectionsChanges&&this.handleEverythingChanged(e,t,n,i,r);var s=r.invalidSections;return s&&this.handleInvalidSections(s,e,t,n,i,r),this.__s._$1lU$reusePreviousVisibleCells.apply(this,a)},handleInvalidSections:function(e,t,n,i,r,a){this._cellMapForCellType("item").forEach(function(t){var n=t.handle;e.contains(n.sectionHandle)&&t.invalidate()}),this._cellMapForCellType("header").forEach(function(t){var n=t.handle;e.contains(n)&&t.invalidate()}),this._cellMapForCellType("footer").forEach(function(t){var n=t.handle;e.contains(n)&&t.invalidate()}),this.recoverLayout(t,i,r)},recoverLayout:function(e,t,n){var i=this.topMostLaidOutItem(e,n);i||(i=this.topMostItem(e,n),this.recoverLayoutFromCell(e,i),i.isLaidOut)},completeVisibleCells:function(e,t,n,i){var r=arguments;this.__s._$2GO$completeVisibleCells.apply(this,r);var a=e.layoutMetrics;if(a.hasHeaders&&a.hasFloatingHeaders){var s=n.objectAt(0).retain(this,"SectionLayoutSupport#completeVisibleCells: firstCell"),o=s.handle,c=a.topInset,l=a.sectionSpacing;"header"===s.cellType?(s.y>c+l&&this._sectionsAbove(o)>0&&(o=o.previous),n.shift()):"item"===s.cellType&&(o=o.sectionHandle);for(var u=this.cellForHandle(o,"header").retain(this,"sectionLayoutSupport#completeVisibleCells: header"),d=c,h=this.sizeForCell(e,u).height+l,p=d+h,f=0,g=n.length;f<g;f++){var m=n.objectAt(f);if(m.y>p)break;if("header"===m.cellType){if(d=m.y-h,m.moveBy(e,0,0),m.isFloatingToTop)return void u.release(this,"sectionLayoutSupport#completeVisibleCells: header");break}}if(this.layOutCellInDirection(e,u,1,d),d<c){var v=c-d;u.clipTop=Ii.a.sharedInstance.floorToDevicePixelRatio(v)}u.isFloatingToTop=!0,n.unshift(u),u.release(this,"sectionLayoutSupport#completeVisibleCells: header"),s.release(this,"SectionLayoutSupport#completeVisibleCells: firstCell")}},positionNextCell:function(e,t,n){var i="header",r="footer";n<0&&(i="footer",r="header");var a,s=t.handle,o=t.cellType,c="item"===o?s.sectionHandle:s,l=0,u=n>0;do{if("item"===o)(s=s.atDistance(n)).isValid?s.sectionHandle!==c?(s=c,a=r):a="item":(s=c,a=r);else if(o===r){if(c=s=s.atDistance(n),!s.isValid)return null;a=i}else o===i&&(s=n<0?s.lastItem:s.firstItem,a="item");l+=u?this.verticalSpacingForCellTypes(e,o,a):this.verticalSpacingForCellTypes(e,a,o),o=a}while(!s.isValid||!("item"===o||"header"===o&&this.shouldSectionHaveHeader(e,s)||"footer"===o&&this.shouldSectionHaveFooter(e,s)));var d=this.cellForHandle(s,o).retain();return this.positionAdjacentCell(e,t,d,n,l).autorelease()},verticalSpacingForCellTypes:function(e,t,n){var i=e.layoutMetrics;return"item"===t&&"item"===n?i.rowSpacing:"header"===t&&"item"===n?(i.hasHeaders?i.sectionHeaderPadding:0)+i.sectionTopPadding:"item"===t&&"footer"===n?(i.hasFooters?i.sectionFooterPadding:0)+i.sectionBottomPadding:"footer"===t&&"header"===n?i.sectionSpacing:0},headersAboveSection:function(e,t){return e.layoutMetrics.hasHeaders?this._sectionsAbove(t):0},headersBelowSection:function(e,t){return e.layoutMetrics.hasHeaders?this._sectionsBelow(t):0},footersAboveSection:function(e,t){return e.layoutMetrics.hasFooters?this._sectionsAbove(t):0},footersBelowSection:function(e,t){return e.layoutMetrics.hasFooters?this._sectionsBelow(t):0},shouldSectionHaveHeader:function(e,t){return e.layoutMetrics.hasHeaders},shouldSectionHaveFooter:function(e,t){return e.layoutMetrics.hasFooters},_sectionsAbove:function(e){return this._setUpHandleAccessors(e),this._sectionsAbove(e)},_sectionsAboveArray:function(e){return e.position},_sectionsAboveList:function(e){for(var t=-1;e.isValid;)e=e.previous,t++;return Math.max(t,0)},_sectionsBelow:function(e){return this._setUpHandleAccessors(e),this._sectionsBelow(e)},_sectionsBelowArray:function(e){return e.maximumPosition-e.position},_sectionsBelowList:function(e){for(var t=-1;e.isValid;)e=e.next,t++;return Math.max(t,0)},_setUpHandleAccessors:function(e){return e.instanceOf(Oi.a)?(this._sectionsAbove=this._sectionsAboveArray,void(this._sectionsBelow=this._sectionsBelowArray)):e.instanceOf(Ai.a)?(this._sectionsAbove=this._sectionsAboveList,void(this._sectionsBelow=this._sectionsBelowList)):void Object(r.b)("SectionLayoutSupport: unable to use handle type. handle: "+e)},sectionSpaceAboveCell:function(e,t){var n=e.layoutMetrics,i=t.cellType,r=this.getSectionHandle(t),a=this._sectionsAbove(r)*(n.sectionSpacing+n.sectionTopPadding+n.sectionBottomPadding),s=this.headersAboveSection(e,r);return"header"!==i&&(a+=n.sectionTopPadding,this.shouldSectionHaveHeader(e,r)&&(s+=1)),(a+=s*(n.headerHeight+n.sectionHeaderPadding))+this.footersAboveSection(e,r)*(n.footerHeight+n.sectionFooterPadding)},topForCell:function(e,t){var n=arguments;return this.__s._$5Q_$topForCell.apply(this,n)+this.sectionSpaceAboveCell(e,t)},sectionSpaceBelowCell:function(e,t){var n=e.layoutMetrics,i=t.cellType,r=this.getSectionHandle(t),a=this._sectionsBelow(r)*(n.sectionSpacing+n.sectionTopPadding+n.sectionBottomPadding);a+=this.headersBelowSection(e,r)*(n.headerHeight+n.sectionHeaderPadding);var s=this.footersBelowSection(e,r);return"footer"!==i&&(a+=n.sectionBottomPadding,this.shouldSectionHaveFooter(e,r)&&(s+=1)),a+s*(n.footerHeight+n.sectionFooterPadding)},spaceBelowCell:function(e,t){var n=arguments;return this.__s._$5lH$spaceBelowCell.apply(this,n)+this.sectionSpaceBelowCell(e,t)},minimumTopOffsetForCell:function(e,t){var n=this.__s._$5pC$minimumTopOffsetForCell.call(this,e,t),i=e.layoutMetrics;if(!i.hasHeaders)return n;var r=t.handle,a=r.sectionHandle;return r.hasPrevious&&(r===a.firstItem||i.hasFloatingHeaders)?n+i.headerHeight+this.verticalSpacingForCellTypes(e,"header","item"):n},minimumBottomOffsetForCell:function(e,t){var n=this.__s._$60O$minimumBottomOffsetForCell.call(this,e,t),i=e.layoutMetrics;if(!i.hasFooters)return n;var r=t.handle,a=r.sectionHandle;return r.hasNext&&r===a.lastItem?n+i.footerHeight+this.verticalSpacingForCellTypes(e,"item","footer"):n},__superMap:{_$ra$layOutCellInDirection:"layOutCellInDirection",_$1lU$reusePreviousVisibleCells:"reusePreviousVisibleCells",_$2GO$completeVisibleCells:"completeVisibleCells",_$5Q_$topForCell:"topForCell",_$5lH$spaceBelowCell:"spaceBelowCell",_$5pC$minimumTopOffsetForCell:"minimumTopOffsetForCell",_$60O$minimumBottomOffsetForCell:"minimumBottomOffsetForCell"}},Li=n(143),Ni=(n(872),Ge.a.extend({staticMembers:{className:"cw-ui-collections-list-footer-view",__QUALIFIED_CLASS_NAME__:"ListFooterView"}})),Pi=(n(870),Ge.a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"div",classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isFloatingToTop",truevalue:"is-floating",attributes:{}}]}},className:"cw-ui-collections-list-header-view",__QUALIFIED_CLASS_NAME__:"ListHeaderView"}})),Ri={headerViewClass:Object(b.b)(),footerViewClass:Object(b.b)(),itemViewDidMove:function(e,t){var n=arguments;"header"===t.cellType&&(e.isFloatingToTop=t.isFloatingToTop,e.element.style.clip="rect("+t.clipTop+"px auto auto auto)"),this.__s._$E3$itemViewDidMove.apply(this,n)},viewClassKeysByCellType:Object(_.a)({header:"headerViewClass",footer:"footerViewClass"}),__superMap:{_$E3$itemViewDidMove:"itemViewDidMove"}},xi={layoutDelegate:Object(_.a)(Di),presenter:Object(b.b)({defaultValue:Object(_.a)(Ri),downstreamBindings:{headerViewClass:"(owner).headerViewClass",footerViewClass:"(owner).footerViewClass"}}),_updateWhenContentsChange:Object(W.e)({inputs:["collection.contentsDidChange","collection._sectionsProxy.contentsDidChange","collection.sectionLengthsDidChange","collection._invalidateCacheOnSectionsContentsChange","collection.invalidateSectionLengthsOnContentsChange","collection._invalidateCacheOnSectionsChange","collection.handleProvider.handlesDidUpdate","collection._sectionsProxy.handleProvider.handlesDidUpdate","collection._sourceDidChange","collection._sectionsProxy._sourceDidChange"],callback:function(e,t,n,i,r,a,s,o,c){if(e||t||n||c){var l=e&&e.context,u=t&&t.context,d=n&&n.context,h=!!c;this.update(Li.a.create({itemsChanges:l,sectionsChanges:u,invalidSections:d,collectionChanged:h,everythingChanged:!(l||u||d||h)}))}}}),headerViewClass:Object(b.b)(Pi),footerViewClass:Object(b.b)(Ni)},Fi=n(846),ki=n(1221),Vi=n(876),ji=n(154),Bi=n(1217),Ui=n(83),Wi=(n(874),Fi.a.extend(Vi.a,{__hasCheapRectangleAwarenessSupport__:!0,cheapRect:void 0}).extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",name:"derivativeImageContainer",classes:["derivative-image-container"]}],classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"_shouldTemporarilyHideSelf",truevalue:"temporarily-hidden",attributes:{}}]},className:"pgk-photo-item-view",__QUALIFIED_CLASS_NAME__:"PhotoItemView"},shouldLayerBack:!I.a.sharedInstance.isSafari,currentTop:NaN,currentLeft:NaN,currentWidth:b.b(NaN),currentHeight:b.b(NaN),currentScale:NaN,cheapRect:T.c({get:function(){var e=Mn.h.getAutodisposingInstance();return e.x=this.currentLeft,e.y=this.currentTop,e.width=this.currentWidth,e.height=this.currentHeight,e}}),isClearedForReuse:b.b(!0),shouldHideMostProminentDisplayOfMediaWithPK:b.b(),priority:b.b(0),motionSpeed:b.b(0),isStationary:b.b({readOnly:!0,dependencies:["motionSpeed"],get:Object.assign(function(){return!this.motionSpeed},{__CW__getter:function(e,t,n,i){return!i.internalGet(this,t[0+n])}})}),isNotMovingFasterThanExtremelyQuickly:b.b({readOnly:!0,dependencies:["motionSpeed"],get:Object.assign(function(){return!(this.motionSpeed>200*this.currentHeight)},{__CW__getter:function(e,t,n,i){return!(i.internalGet(this,t[0+n])>200*this.currentHeight)}})}),isNotMovingFasterThanQuickly:b.b({readOnly:!0,dependencies:["motionSpeed"],get:Object.assign(function(){return!(this.motionSpeed>50*this.currentHeight)},{__CW__getter:function(e,t,n,i){return!(i.internalGet(this,t[0+n])>50*this.currentHeight)}})}),isNotMovingFasterThanSlowly:b.b({readOnly:!0,dependencies:["motionSpeed"],get:Object.assign(function(){return!(this.motionSpeed>2*this.currentHeight)},{__CW__getter:function(e,t,n,i){return!(i.internalGet(this,t[0+n])>2*this.currentHeight)}})}),canAcceptAllLazyAdornments:Gt.c("isNotMovingFasterThanQuickly"),canAcceptNewLazyAdornments:b.b({readOnly:!0,dependencies:["isClearedForReuse","isNotMovingFasterThanExtremelyQuickly"],get:Object.assign(function(){return!this.isClearedForReuse&&this.isNotMovingFasterThanExtremelyQuickly},{__CW__getter:function(e,t,n,i){return!i.internalGet(this,t[0+n])&&i.internalGet(this,t[1+n])}})}),content:b.b({strong:!0}),media:b.b({strong:!0,binding:Gt.c("content")}),derivativeLoader:b.b({strong:!0,defaultValue:$.b(ki.a.extend({shouldDerivativeCoverContainer:!0,shouldCorrectDerivativeForDevicePixelRatio:!0,media:Gt.c("owner.media"),derivativePriority:Gt.c("owner.priority"),derivativeContainerWidth:Gt.c("owner.currentWidth"),derivativeContainerHeight:Gt.c("owner.currentHeight")}))}),derivative:b.b({binding:Gt.c("derivativeLoader.derivative"),didChange:function(e){var t=this._derivativeImage;t&&(t.parentNode===this.derivativeImageContainer&&(t.parentNode.removeChild(t),t.style.cssText="",Fn(t)),t.release(this));var n=this._derivativeImage=e&&e.checkOutAppendableImagelike(this).retain(this);n&&(this.derivativeImageContainer.appendChild(n),t||this.isInSameEventLoopAsFirstLayout?(Fn(n),n.style.opacity=""):xn(n),this._styleDerivativeImageToCoverContainer())}}),cleanup:function(){var e=arguments;return this.clearForReuse(),this.__s._$2BT$cleanup.apply(this,e)},clearForReuse:function(){this.cancelPointerInteraction&&this.cancelPointerInteraction();var e=this._layoutArgs;e&&(Mn.c.disposeInstance(e),this._layoutArgs=null),H.a.pause(),this.media=null,this.currentLeft=this.currentTop=this.currentWidth=this.currentHeight=this.currentScale=NaN,this.isClearedForReuse=!0,H.a.resume(),this.ensureLazyAdornmentNonexistences();var t=this.element.style;it.b(t,-1e4,-1e4),this.shouldLayerBack&&(t.transform+=" translateZ(0)")},doLayout:function(e,t,n,i,r,a,s,o){var c;if(!this.isDoingLayout){this.isDoingLayout=!0;var l=this._layoutArgs,u=arguments.length,d=u&&!l;d&&(this.isInSameEventLoopAsFirstLayout=!0,ji.b(this._unsetIsInSameEventLoopAsFirstLayoutSoon),this.isClearedForReuse=!1);var h=this._previouslyLaidOutCSSLeft,p=this._previouslyLaidOutCSSTop;if(!d&&u&&!o&&h&&p&&n===l[Gi]&&i===l[Hi]&&r===l[$i]&&a===l[zi]){var f,g=this._previouslyLaidOutCSSLeft=h+e-l[0],m=this._previouslyLaidOutCSSTop=p+t-l[1];g=Math.round(g),m=Math.round(m);var v=this.element.style;return it.b(v,g,m),this.shouldLayerBack&&(v.transform+=" translateZ(0)"),s&&(v.zIndex=s),this.priority=m+g/1e4,this.currentTop=m,this.currentLeft=g,l&&Mn.c.disposeInstance(l),(f=l=this._layoutArgs=Mn.c.getInstance()).push.apply(f,arguments),l[Ki]=!0,void(this.isDoingLayout=!1)}if(!u)return this.isDoingLayout=!1,void(l&&this.doLayout.apply(this,l));l&&Mn.c.disposeInstance(l),(c=l=this._layoutArgs=Mn.c.getInstance()).push.apply(c,arguments),l[Ki]=!0;var _=e,b=t,y=n,I=i,w=Boolean(r),S=a||Math.max(y,I);if(y>0&&I>0&&S>0){this._debug_doLayoutCount++;var C=Ii.a.sharedInstance.devicePixelRatio;this._devicePixelRatio=C;var O=this.media,A=w?Mn.h.getAutodisposingInstanceWithProperties("width",y,"height",I):Bi.d(O?O.aspectRatio:1,1,y,I,Mn.h.getAutodisposingInstance()),E=A.width,T=A.height,M=_+(y-E)/2,D=b+(I-T)/2;this._previouslyLaidOutCSSLeft=M,this._previouslyLaidOutCSSTop=D;var L=M+E,N=D+T;M=Math.round(M),D=Math.round(D),E=Math.round(L)-M,T=Math.round(N)-D,H.a.pause(),this.currentLeft=M,this.currentTop=D,this.currentWidth=E,this.currentHeight=T,this.currentScale=S,this.priority=D+M/1e4,H.a.resume();var P=this.element,R=P.classList,x=P.style;x.width=E+"px",x.height=T+"px",x.zIndex=isNaN(s)?"":s,x.transform="translateX("+M+"px) translateY("+D+"px)"+(this.shouldLayerBack?" translateZ(0)":""),R.toggle("covering-cell",w),R.toggle("fitting-cell",!w),this._styleDerivativeImageToCoverContainer(),this._doAdornmentLayouts(),this.isDoingLayout=!1}else this.isDoingLayout=!1}},_styleDerivativeImageToCoverContainer:function(){var e=this._derivativeImage;if(e){var t=this.currentWidth,n=this.currentHeight,i=Bi.c(e.naturalWidth||e.width,e.naturalHeight||e.height,t,n,Mn.h.getAutodisposingInstance()),r=Math.round(i.width),a=Math.round(i.height),s=e.style;s.left=Math.round(t/2-r/2)+"px",s.top=Math.round(n/2-a/2)+"px",s.width=r+"px",s.height=a+"px"}},_unsetIsInSameEventLoopAsFirstLayoutSoon:Ui.a(function(){this.isDisposed||ji.b(this._unsetIsInSameEventLoopAsFirstLayout)}),_unsetIsInSameEventLoopAsFirstLayout:Ui.a(function(){this.isDisposed||(this.isInSameEventLoopAsFirstLayout=!1)}),_doAdornmentLayouts:function(){this.forEachAdornment(this._doAdornmentLayout,this)},_doAdornmentLayout:function(e){e.doLayout&&e.doLayout(this.currentWidth,this.currentHeight,this.currentScale)},_shouldTemporarilyHideSelf:b.b({readOnly:!0,dependencies:["media.pk","shouldHideMostProminentDisplayOfMediaWithPK"],get:Object.assign(function(){var e=this.getPath("media.pk");return e&&this.shouldHideMostProminentDisplayOfMediaWithPK===e},{__CW__getter:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return r&&i.internalGet(this,t[1+n])===r}})}),_layoutPropertiesChanged:W.f("media.aspectRatio",Ii.a.sharedInstance.bindingFor("devicePixelRatio"),function(){this.doLayout()}),debugPropertyPathAdornment:void 0,__superMap:{_$2BT$cleanup:"cleanup"}})),Gi=2,Hi=3,$i=4,zi=5,Ki=7,Qi=n(1222),qi=n(1190),Yi=n(204),Zi=n(281),Ji=Object(Je.b)("Justification",function(e){e("Left"),e("Right"),e("Center"),e("Full")}),Xi={columnWidth:Object(b.b)(100),columnSpacing:Object(b.b)(0),justification:Object(b.b)(Ji.Left),verticalAlignment:Object(b.b)(Qi.b.Middle),sectionLeftPadding:Object(b.b)(0),sectionRightPadding:Object(b.b)(0)},er=Zi.a.extend(Di,{staticMembers:{LayoutMetricsClass:Object(_.a)(Xi),__QUALIFIED_CLASS_NAME__:"FlowLayoutDelegate"},cellClass:Object(_.a)({cleanup:function(){this.__s._$yA$cleanup.call(this),this.sectionX=NaN,this.sectionY=NaN,this.isLaidOutInSection=!1,this.row=null},sectionX:NaN,sectionY:NaN,isLaidOutInSection:!1,row:Object(T.c)({strong:!0}),rowBottom:Object(T.c)({get:function(){var e=this.row,t=this.sectionY-e.y;return this.bottom-t+(e.height-this.height)}}),rowTop:Object(T.c)({get:function(){var e=this.row,t=this.sectionY-e.y;return this.y-t}}),invalidate:function(){this.isLaidOutInSection=!1;var e=this.row;if(e){var t=e.cells;if(t.splice(t.indexOf(this),1),t.length>0){var n=t[0];n.isLaidOutInSection=!1,n.isLaidOut=!1}var i=e.sectionCell;i&&i.childrenWereInvalidated(),this.row=null}this.__s._$1UE$invalidate.call(this)},__superMap:{_$yA$cleanup:"cleanup",_$1UE$invalidate:"invalidate"}}),handleSizeChangedBy:function(e,t,n,i,r,a){if(0!==e){var s=this.topMostItem(n,a).retain(this,"handleSizeChangedBy: firstCell");this._cellMapForCellType("section").forEach(function(e){e.invalidateAllCells(),e.invalidate()},this),this._cellMapForCellType("item").forEach(function(e){e.invalidate()},this),this.recoverLayoutFromCell(n,s),s.release(this,"handleSizeChangedBy: firstCell")}},handleLayoutMetricsChanged:function(e,t,n,i,r,a){var s=t.layoutMetrics;if(e.contains("columnWidth")||e.contains("rowHeight")){var o=this.topMostItem(t,r).retain(this,"handleLayoutMetricsChanged: firstCell");this._cellMapForCellType("section").forEach(function(e){e.invalidateAllCells()},this),this._cellMapForCellType("header").forEach(function(e){e.invalidate()}),this._cellMapForCellType("footer").forEach(function(e){e.invalidate()}),this.recoverLayoutFromCell(t,o),o.release(this,"handleLayoutMetricsChanged: firstCell")}else e.contains("verticalAlignment")||e.contains("justification")||e.contains("rowSpacing")||e.contains("columnSpacing")?this.handleSizeChangedBy(1,0,t,n,i,r):e.contains("hideableTopHeight")?s.shouldStartHidden&&this.isAtEnd===an.b.Top&&s.initialPosition===an.b.Top&&(this.invalidateOtherCells(r),this.setUpFirstCell(t,n,!0)):e.contains("hideableBottomHeight")&&s.shouldStartHidden&&this.isAtEnd===an.b.Bottom&&s.initialPosition===an.b.Bottom&&(this.invalidateOtherCells(r),this.setUpLastCell(t,n,!0))},handleItemsChanges:function(e,t,n,i,r,a){var s=e.length;if(s>100)this.handleEverythingChanged(t,n,i,r,a);else{for(var o=0;o<s;o++){var c=e[o];if(c.operation===G.b.INSERT){var l=n.startHandle.at(c.index),u=l.sectionHandle,d=l.previous;if(d.isValid&&!d.sectionHandle!==u||(d=l.next),d.isValid&&d.sectionHandle===u){var h=this.cellForHandleIfPresent(d);if(h){var p=h.row;if(p){var f=p.cells;if(f.length>0){var g=f[0];g.isLaidOutInSection=!1,g.isLaidOut=!1}}}}}}if(this._cellMapForCellType("section").forEach(function(e){e.checkForRemovedCells(this,t)},this),!this.topMostLaidOutItem(t,r)){var m=r.find(function(e){return"item"===e.cellType&&!e.handle.wasRemoved});m&&this.recoverLayoutFromCell(t,m)}}},handleInvalidItems:function(e,t,n,i,r,a){var s=e,o=Array.isArray(s),c=0;for(s=o?s:s[Symbol.iterator]();;){var l;if(o){if(c>=s.length)break;l=s[c++]}else{if((c=s.next()).done)break;l=c.value}var u=l,d=this.cellForHandle(u),h=this.cellForHandle(u.sectionHandle,"section").retain(this,"reusePreviousVisibleCells: invalidating cells");h.invalidateCell(d),h.release(this,"reusePreviousVisibleCells: invalidating cells")}this._cellMapForCellType("section").forEach(function(e){e.checkForInvalidCells(this,t)},this);var p=this.topMostLaidOutItem(t,r);p||(p=this.topMostItem(t,r),this.recoverLayoutFromCell(t,p))},handleInvalidSections:function(e,t,n,i,r,a){e.forEach(function(e){this.cellForHandle(e,"section").invalidate()},this),this.recoverLayout(t,i,r)},sectionCellClass:Ti.a.extend({_cachedCells:Object($.b)(Set),cacheCell:function(e){var t=this._cachedCells;t.has(e)||(t.add(e),e.retain(this,"section layout cache"))},invalidateCell:function(e){var t=this._cachedCells;t.has(e)||Object(r.b)("CW.UI.Collections.FlowLayoutDelegate#sectionCellClass#invalidateCell: Cannot invalidate non-cached cell",{cell:e}),e.invalidate(),t.delete(e),e.release(this,"section layout cache")},invalidateAllCells:function(){var e=this._cachedCells;e.forEach(function(e){e.invalidate(),e.release(this,"section layout cache")},this),e.clear(),this.invalidate()},lastLaidOutCell:Object(T.c)({strong:!0}),invalidate:function(){var e=arguments,t=this._cachedCells;t.forEach(function(e){e.isLaidOutInSection=!1,e.isLaidOut=!1,t.delete(e),e.autorelease(this,"section layout cache")},this),this.fakeRows.clear(),this.childrenWereInvalidated(),this.__s._$45W$invalidate.apply(this,e)},childrenWereInvalidated:function(){this.isLaidOut=!1,this.lastLaidOutCell=null,this.height=-1,this.width=-1},checkForRemovedCells:function(e,t){var n,i=this._cachedCells,r=this.handle;i.forEach(function(t){var i=t.handle;if("item"===t.cellType)if(i.wasRemoved){var a=i.next;if(a.isValid&&a.sectionHandle===r){var s=e.cellForHandle(a).retain(this,"checking for removed cells");s.isLaidOutInSection=!1,s.isLaidOut=!1,s.release(this,"checking for removed cells")}var o=t.row;if(o)for(var c=o.cells,l=0,u=c.length;l<u;l++)c[l].isLaidOutInSection=!1;this.invalidateCell(t)}else(!n||t.handle.position>n.handle.position)&&(n=t)},this),this.lastLaidOutCell=n,this.checkForInvalidCells(e,t)},checkForInvalidCells:function(e,t){var n=this.handle;if(!e.shouldEstimateSectionLayout(t,n.value)){var i=this.lastLaidOutCell;if(i){for(var r=n.firstItem,a=i.handle,s=!1;;){var o=e.cellForHandle(r).retain(this,"checking for invalid cells");if(s?(o.isLaidOutInSection=!1,o.isLaidOut=!1):o.isLaidOutInSection?i=o:s=!0,o.release(this,"checking for invalid cells"),r===a)break;r=r.next}this.lastLaidOutCell=i,this.isLaidOut=!1}}},fakeRows:Object($.b)(Map),fakeSize:Object(T.c)({strong:!0,get:function(e){return e||Ci.a.create()}}),layOutItem:function(e,t,n,i){if(n&&n.isLaidOutInSection)return n;var a=this.handle,s=t.layoutMetrics,o=a.firstItem;-1===o.position&&Object(r.b)("FlowLayout: attempting to lay out invalid section");var c=n&&n.handle.retain(this,"layOutItem: current handle"),l=this.fakeRows,u=t.viewportBounds,d=e.maxWidthForSection(t,s,u,a);if(!((d+=1/(2*Ii.a.sharedInstance.devicePixelRatio)-Number.EPSILON)<0)){this.width=d;var h=s.rowSpacing;if(e.shouldEstimateSectionLayout(t,a.value)){var p=s.columnWidth,f=s.columnSpacing,g=s.rowHeight,m=e.estimateRowHeight(t,s,a),v=m+h,_=Math.floor((d+f)/(p+f)),b=void 0,y=void 0;n?(b=c.position-o.position,y=Math.floor(b/_)):(b=(y=Math.floor(i/v))*_+o.position,c=t.collection.startHandle.at(b).retain(this,"layOutItem: current handle"),n=e.cellForHandle(c));var I=y*v;n.sectionY=I;var w=b%_;n.sectionX=w*p+w*f,n.isLaidOutInSection=!0;var S=l.get(y);S||((S=this.createRowCell(e,t,I)).index=y,l.set(y,S)),n.row=S,-1===S.cells.indexOf(n)&&(S.cells.push(n),S.width=this.width,S.height=m);var C=this.fakeSize;return C.width=p,C.height=g,n.size=C,this.cacheCell(n),this.isLaidOut||(this.height=e.estimateSectionHeight(t,s,a,d),this.isLaidOut=!0),c.release(this,"layOutItem: current handle"),n}l.size>0&&(this.invalidateAllCells(),this.width=d);var O=0,A=void 0,E=0-s.columnSpacing;if(n)for(;;){var T=e.cellForHandle(c).retain(this,"layOutItem: finding start of layout pass");if(T.isLaidOut){O=(A=T.row).y;for(var M=A.cells,D=0,L=M.length;D<L;D++){var N=M[D];if(E+=e.sizeForCell(t,N).width+s.columnSpacing,N.handle.next===c){M.length=D+1;break}}A.width=E,T.release(this,"layOutItem: finding start of layout pass");break}if(c===o){A=this.createRowCell(e,t,O),T.release(this,"layOutItem: finding start of layout pass");break}var P=c.previous.retain(this,"layOutItem: current handle");c.release(this,"layOutItem: current handle"),c=P,T.release(this,"layOutItem: finding start of layout pass")}else{var R=this.lastLaidOutCell;if(R){if(R.sectionY>=i){var x=t.collection.handleProvider,F=Object(qi.a)(o.position,R.handle.position,function(t){return e.cellForHandle(x.at(t))},function(e){return i<e.row.y?-1:i>e.row.bottom+h?1:0});if(-1===F)return;return e.cellForHandle(x.at(F))}c=R.handle.retain(this,"layOutItem: current handle"),O=(A=R.row).y}else c=a.firstItem.retain(this,"layOutItem: current handle"),A=this.createRowCell(e,t,O)}for(var k=!1,V=void 0,j=a.lastItem;!k;){for(;;){var B=e.cellForHandle(c);if(this.cacheCell(B),!e.addCellToRow(t,this,A,B))break;if(B.row=A,B.isLaidOutInSection=!0,V=B,c===j)return O+=e.layOutRow(t,this,A).height,this.height=O,this.isLaidOut=!0,this.lastLaidOutCell=V,c.release(this,"layOutItem: current handle"),B;var U=c.next.retain(this,"layOutItem: current handle");if(c.release(this,"layOutItem: current handle"),(c=U).sectionHandle!==a)return O+=e.layOutRow(t,this,A).height,this.height=O,this.isLaidOut=!0,this.lastLaidOutCell=V,c.release(this,"layOutItem: current handle"),B;B===n&&(k=!0)}O+=e.layOutRow(t,this,A).height+s.rowSpacing,i&&A.bottom+h>=i&&(n=A.cells[0],k=!0),A=this.createRowCell(e,t,O)}return c.release(this,"layOutItem: current handle"),this.lastLaidOutCell=V,n}Object(Jn.e)(c,this,"layOutItem: current handle")},createRowCell:function(e,t,n){var i=e.rowCellClass.create();return i.cellType="row",i.y=n,i.sectionCell=this,i.width=0-t.layoutMetrics.columnSpacing,this.cacheCell(i),i},__superMap:{_$45W$invalidate:"invalidate"}}),rowCellClass:Yi.a.extend({cells:Object($.b)(Array),sectionCell:Object(T.c)({weak:!0}),invalidate:function(){var e=this.sectionCell,t=this.index;void 0!==t&&e&&e.fakeRows.delete(t),this.index=void 0,this.cells.length=0,this.sectionCell=null,this.__s._$8ny$invalidate.call(this)},__superMap:{_$8ny$invalidate:"invalidate"}}),layOutItemInSection:function(e,t,n){n.isLaidOutInSection||this.cellForHandle(t,"section").layOutItem(this,e,n)},addCellToRow:function(e,t,n,i){var r=this.sizeForCell(e,i),a=n.width+r.width+e.layoutMetrics.columnSpacing;return!(a>t.width||(n.width=a,n.cells.push(i),0))},shouldEstimateSectionLayout:function(e,t){return!1},estimateSectionHeight:function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:n.firstItem,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:n.lastItem,s=t.columnWidth,o=t.columnSpacing,c=t.rowSpacing,l=Math.floor((i+o)/(s+o)),u=a.position-r.position+1,d=Math.ceil(u/l);return d*this.estimateRowHeight(e,t,n)+(d-1)*c},maxWidthForSection:function(e,t,n,i){return Math.max(0,n.width-t.sectionLeftPadding-t.sectionRightPadding)},estimateRowHeight:function(e,t,n){return t.rowHeight},cellClassKeysByCellType:Object(_.a)({section:"sectionCellClass"}),_cachedSectionCells:Object($.b)(Array),_previousCachedSectionCells:Object($.b)(Array),completeVisibleCells:function(e,t,n,i){var a=arguments,s=this._previousCachedSectionCells,o=this._cachedSectionCells;this.__s._$9z2$completeVisibleCells.apply(this,a);var c=this.topMostItem(e,n);if(c){var l=this.getSectionHandle(c),u=l.previous;u.isValid&&(l=u);var d=this.getSectionHandle(this.bottomMostItem(e,n)),h=d.next;h.isValid&&(d=h);for(var p=0,f=t&&t.sections.length||1e3,g=l;;){++p>f&&Object(r.b)("Infinite loop detected in `FlowLayoutDelegate#completeVisibleCells`.",{firstSectionHandle:g,lastSectionHandle:d});var m=this.cellForHandle(l,"section");if(o.push(m),m.retain(this,"flow layout section cache"),l===d)break;l=l.next}s.forEach(tr,this),s.length=0,this._cachedSectionCells=s,this._previousCachedSectionCells=o}},layOutRow:function(e,t,n){var i=e.layoutMetrics,a=i.verticalAlignment,s=i.justification,o=t.width,c=i.columnSpacing;return s===Ji.Left?this.leftJustify(e,n,c,o):s===Ji.Right?this.rightJustify(e,n,c,o):s===Ji.Center?this.centerJustify(e,n,c,o):s===Ji.Full?this.fullJustify(e,n,c,o):Object(r.b)("ListLayoutDelegate: Invalid justification %{justification}",{justification:s}),a===Qi.b.Top?this.topAlign(e,n):a===Qi.b.Middle?this.centerAlign(e,n):a===Qi.b.Bottom?this.bottomAlign(e,n):Object(r.b)("ListLayoutDelegate: Invalid verticalAlignment %{verticalAlignment}",{verticalAlignment:a}),n.isLaidOut=!0,n},cellIsVisible:function(e,t,n){if("item"!==n.cellType)return this.__s._$B3D$cellIsVisible.call(this,e,t,n);var i=n.rowTop;return i<t.bottom&&i+n.row.height+e.layoutMetrics.rowSpacing>t.y},topAlign:function(e,t){for(var n=t.y,i=0,r=t.cells,a=0,s=r.length;a<s;a++){var o=r[a];o.sectionY=n;var c=this.sizeForCell(e,o).height;c>i&&(i=c)}t.height=i},centerAlign:function(e,t){for(var n=t.y,i=0,r=t.cells,a=r.length,s=0;s<a;s++){var o=r[s],c=this.sizeForCell(e,o).height;c>i&&(i=c)}for(var l=0;l<a;l++){var u=r[l],d=this.sizeForCell(e,u).height;u.sectionY=n+(i-d)/2}t.height=i},leftJustify:function(e,t,n,i){for(var r=0,a=t.cells,s=0,o=a.length;s<o;s++){var c=a[s];c.sectionX=r,r+=this.sizeForCell(e,c).width+n}t.x=0,t.width=r-n},centerJustify:function(e,t,n,i){for(var r=t.cells,a=r.length,s=0,o=0;o<a;o++){var c=r[o];s+=this.sizeForCell(e,c).width}var l=(i-s-n*(a-1))/2;t.x=l;for(var u=0;u<a;u++){var d=r[u];d.sectionX=l,l+=this.sizeForCell(e,d).width+n}t.width=l-n},fullJustify:function(e,t,n,i){for(var r=t.cells,a=r.length,s=0,o=0;o<a;o++){var c=r[o];s+=this.sizeForCell(e,c).width}n=(i-s)/(a-1);for(var l=0,u=0;u<a;u++){var d=r[u];d.sectionX=l,l+=this.sizeForCell(e,d).width+n}t.x=0,t.width=i},rightJustify:function(e,t,n,i){for(var r=t.cells,a=i,s=r.length-1;s>=0;s--){var o=r[s],c=this.sizeForCell(e,o).width;o.sectionX=a-c,a-=c+n}t.x=a+n,t.width=i-t.x},setUpCellAtDistance:function(e,t,n,i,a){var s=this.getSectionHandle(n).retain(this,"setUpCellAtDistance: section iteration");n.wasLaidOut||this.layOutItemInSection(e,s,n);var o=a+n.sectionY,c=this.lazyEstimateSectionHeight(e,s),l=Math.sign(o),u=e.layoutMetrics,d=u.sectionSpacing+u.sectionTopPadding+u.sectionBottomPadding;for(u.hasHeaders&&(d+=u.headerHeight+u.sectionHeaderPadding),u.hasFooters&&(d+=u.footerHeight+u.sectionFooterPadding);;){if(o>=0&&o<c){var h=this.cellForHandle(s,"section").retain(this,"setUpCellAtDistance: current searched section"),p=h.layOutItem(this,e,null,o);return p||Object(r.b)("unable to find cell at offset %{offset}",{offset:o}),this.layOutCellInDirection(e,p,1,p.sectionY-o,1,p.sectionX+e.layoutMetrics.sectionLeftPadding),Math.abs(p.y)<.05*a&&(p.y=p.y%u.rowHeight),h.autorelease(this,"setUpCellAtDistance: current searched section"),p}l>0&&(o-=c);var f=s.atDistance(l).retain(this,"setUpCellAtDistance: section iteration");if(s.release(this,"setUpCellAtDistance: section iteration"),!(s=f).isValid){s.release(this,"setUpCellAtDistance: section iteration");break}c=this.lazyEstimateSectionHeight(e,s),c+=d,l<0&&(o+=c)}return l>0?this.setUpLastCell(e,t):this.setUpFirstCell(e,t)},handleNoPreviouslyValidCells:function(e,t,n,i,r){var a=this.isAtEnd;if(a===an.b.Top)return this.setUpFirstCell(e,t);if(a===an.b.Bottom)return this.setUpLastCell(e,t);if(this.bottomMostItem(e,i).handle.position>=t.length)return this.isAtEnd=an.b.Bottom,this.setUpLastCell(e,t);var s=this.topMostItem(e,i),o=s.handle.position,c=t.startHandle.at(o),l=this.cellForHandle(c);return this.recoverLayoutFromCell(e,l,s),l},recoverLayoutFromCell:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,i=t.handle;i.wasRemoved||i.isValid&&(this.layOutItemInSection(e,i.sectionHandle,t),t.isLaidOutInSection&&this.layOutCellInDirection(e,t,1,n.y,1,t.sectionX+e.layoutMetrics.sectionLeftPadding))},handleEverythingChanged:function(e,t,n,i,r){var a=arguments;this._cellMapForCellType("section").forEach(function(e){e.invalidateAllCells()},this),this.__s._$DgT$handleEverythingChanged.apply(this,a)},positionAdjacentCell:function(e,t,n,i,a){var s,o=t.cellType,c=n.cellType,l=e.layoutMetrics;if("item"===o&&"item"===c&&t.handle.sectionHandle===n.handle.sectionHandle)return this.layOutItemInSection(e,n.handle.sectionHandle,n),this.layOutCellInDirection(e,n,1,t.y+(n.sectionY-t.sectionY),1,n.sectionX+l.sectionLeftPadding);var u,d=i>0;if("header"===o||"footer"===o?s=d?t.bottom:t.y:"item"===o?s=d?t.rowBottom:t.rowTop:Object(r.b)("FlowLayout#positionAdjacentCell: unable to position based on cell of type %{cellType}",{cell:t,cellType:o}),s+=i*a,"header"===c||"footer"===c)u=0;else if("item"===c){this.layOutItemInSection(e,n.handle.sectionHandle,n),u=n.sectionX+l.sectionLeftPadding;var h=n.row,p=n.sectionY-h.y;s+=d?p:-(h.height-this.sizeForCell(e,n).height-p)}else Object(r.b)("FlowLayout#positionAdjacentCell: unable to position cell of type %{cellType}",{cell:n,cellType:c});return this.layOutCellInDirection(e,n,i,s,1,u)},topForCell:function(e,t){var n=this.getSectionHandle(t);this.layOutItemInSection(e,n,t);var i=t.sectionY;i+=this.estimatedHeightForCells(e,n.firstItem.position);var r=e.layoutMetrics;return i+this.sectionSpaceAboveCell(e,t)+r.topPadding+r.topInset-r.hideableTopHeight},lazyEstimateSectionHeight:function(e,t){var n=e.layoutMetrics;t.retain(this,"lazyEstimateSectionHeight: sectionHandle");var i=this.cellForHandle(t,"section").retain(this,"lazyEstimateSectionHeight: sectionCell");if(i.isLaidOut){var r=i.height;return i.release(this,"lazyEstimateSectionHeight: sectionCell"),t.release(this,"lazyEstimateSectionHeight: sectionHandle"),r}var a=i.lastLaidOutCell,s=0,o=void 0;a?(s=a.row.bottom,s+=n.rowSpacing,o=a.handle.next):o=i.firstItem,i.release(this,"lazyEstimateSectionHeight: sectionCell");var c=this.maxWidthForSection(e,n,e.viewportBounds,t),l=this.estimateSectionHeight(e,n,t,c,o);return t.release(this,"lazyEstimateSectionHeight: sectionHandle"),s+l},spaceBelowCell:function(e,t){var n=this.getSectionHandle(t);this.layOutItemInSection(e,n,t);var i=this.cellForHandle(n,"section").retain(this,"spaceBelowCell"),r=t.size?t.size.height:t.height,a=this.lazyEstimateSectionHeight(e,n)-(t.sectionY+r);i.release(this,"spaceBelowCell");var s=n.lastItem;a+=this.estimatedHeightForCells(e,s.maximumPosition-s.position);var o=e.layoutMetrics;return a+this.sectionSpaceBelowCell(e,t)+o.bottomPadding-o.hideableBottomHeight},estimatedHeightForCells:function(e,t){if(0===t)return 0;var n=e.layoutMetrics,i=n.columnWidth,r=n.columnSpacing,a=n.rowSpacing,s=n.rowHeight,o=(e.viewportWidth+r)/(i+r),c=Math.ceil(t/o);return c*s+(c-1)*a},leftForCell:function(e,t){var n=arguments;return"item"===t.cellType?(this.layOutItemInSection(e,t.handle.sectionHandle,t),t.sectionX+e.layoutMetrics.sectionLeftPadding):this.__s._$FYt$leftForCell.apply(this,n)},sizeForItem:function(e,t){var n=e.layoutMetrics;return Ci.a.create({height:n.rowHeight,width:n.columnWidth})},minimumTopOffsetForCell:function(e,t){var n=e.layoutMetrics,i=t.handle,r=t.row,a=i.sectionHandle,s=0;return i.hasPrevious||(s+=n.topPadding+n.topInset-n.hideableTopHeight),this.layOutItemInSection(e,a,t),s+=t.sectionY-r.y,this.shouldSectionHaveHeader(e,a)?((n.hasFloatingHeaders||0===r.index)&&(s+=n.headerHeight+this.verticalSpacingForCellTypes(e,"header","item")),s):s},minimumBottomOffsetForCell:function(e,t){var n=e.layoutMetrics,i=t.handle,r=t.row,a=i.sectionHandle,s=0;if(i.hasNext||(s+=n.bottomPadding-n.hideableBottomHeight),this.layOutItemInSection(e,a,t),s+=r.bottom-(t.sectionY+this.sizeForCell(e,t).height),!this.shouldSectionHaveFooter(e,a))return s;var o=r.cells;return o[o.length-1].handle===a.lastItem&&(s+=n.footerHeight+this.verticalSpacingForCellTypes(e,"item","footer")),s},__superMap:{_$9z2$completeVisibleCells:"completeVisibleCells",_$B3D$cellIsVisible:"cellIsVisible",_$DgT$handleEverythingChanged:"handleEverythingChanged",_$FYt$leftForCell:"leftForCell"}});function tr(e){e.release(this,"flow layout section cache")}var nr=n(780),ir=n(47),rr=n(90),ar=n(502),sr=_i.extend({container:b.b(Gt.c("_provider.container")),source:b.b(Gt.c("_provider.items")),sections:b.b(Gt.c("_provider.sections")),sectionLength:function(e){return e&&e.itemCount||0},ensureRange:function(e,t){return this._provider.ensureRange(e,t)},canEnsureRange:b.b({readOnly:!0,dependencies:["container"],get:Object.assign(function(){return Boolean(this.container)},{__CW__getter:function(e,t,n,i){return Boolean(i.internalGet(this,t[0+n]))}})}),_provider:b.b({defaultValue:function(){return ar.a.sharedInstance}}),_providerWillBeginBatchedChanges:W.e("_provider.batchedChangesWillBegin",function(){this.beginBatchedChanges()}),_providerDidEndBatchedChanges:W.e("_provider.batchedChangesDidEnd",function(){this.endBatchedChanges()}),_ensureEntireRangeImmediately:W.f({inputs:["source","source.length",rr.a.bindingFor("moments_ensureEntireRangeImmediately")],callback:function(e,t,n){!this._didEnsureRange&&e&&t&&n&&(this._didEnsureRange=!0,this._provider.ensureRange(0,t-1))}}),everythingChangedListener:W.e("source.everythingChanged",function(){this._notifyEverythingChanged=!0,H.a.pause(),this.notifyEverythingChangedIfNecessary(),this.invalidateSectionLengths(),this.notifySectionLengthChangedIfNecessary(),H.a.resume()}),everythingChanged:W.g(),staticMembers:{__QUALIFIED_CLASS_NAME__:"MomentsSectionedAdapter"}}),or=er.extend({firstItemIndex:b.b(-1),lastItemIndex:b.b(-1),cellsShouldBeSquareAspectRatio:b.b({dependencies:["primaryInteractionMode"],readOnly:!0,type:Boolean,get:Object.assign(function(){var e=this.primaryInteractionMode;return rr.a.alwaysForceSquareCells||e===wt.a.TOUCH},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return rr.a.alwaysForceSquareCells||r===wt.a.TOUCH}})}),maxPagesDistant:T.c(1),aspectRatioForItemHandle:function(e){if(this.cellsShouldBeSquareAspectRatio)return 1;var t=e&&e.sectionHandle;if((t&&t.value).isPlaceholder)return 1;var n=e.source;if(!n.instanceOf(sr)&&n.length>0)return 1;var i=e.encodedValue;if(void 0===i)return 1;var r=e.source.serializer.store,a=r.readData(i);if(!a)return 1;var s=a.asset,o=U.a.getStoreIdForPrimaryKey(ir.a,s),c=r.readData(o),l=bn.b(c,!0);if(!l.length){var u=a.master,d=U.a.getStoreIdForPrimaryKey(yn.a,u),h=r.readData(d);l=bn.b(h,!1)}var p=l,f=p[0],g=p[1];return f&&g?f/g:1},sizeForItem:function(e,t){var n=this.aspectRatioForItemHandle(t.handle),i=e.layoutMetrics,r=i.columnWidth,a=i.rowHeight,s=r/a,o=i.columnSpacing,c=NaN,l=NaN;return n<s?(l=a,c=r):n>=3*s?(c=3*r+2*o,l=3*r/n):n>=2*s?(c=2*r+o,l=2*r/n):(c=r,l=r/n),Ci.a.create(c,l)},isCellPreferredAnchor:function(e){var t=arguments;if(this.__s._$1W7$isCellPreferredAnchor.apply(this,t)){var n=e.handle;return n&&n.value}return!1},completeVisibleCells:function(e,t,n,i){var r=arguments;this.__s._$1ao$completeVisibleCells.apply(this,r),this._ensureVisibleCellRange(t,n)},shouldEstimateSectionLayout:function(e,t){if(this.alwaysForceSquareCells)return!0;var n=e.collection;return!n.instanceOf(sr)&&n.length>0||!t||t.isPlaceholder},estimateRowHeight:function(e,t){return t.rowHeight+(t.hasCaptions?t.captionHeight:0)},shouldCellHaveCaption:function(e,t){return e.layoutMetrics.hasCaptions},captionHeightForCell:function(e,t){return this.shouldCellHaveCaption(e,t)?e.layoutMetrics.captionHeight:0},centerAlign:function(e,t){for(var n=t.y,i=0,r=0,a=t.cells,s=a.length,o=0;o<s;o++){var c=a[o],l=this.sizeForCell(e,c).height;l>i&&(i=l);var u=l+this.captionHeightForCell(e,c);u>r&&(r=u)}for(var d=0;d<s;d++){var h=a[d],p=this.sizeForCell(e,h).height;h.sectionY=n+(i-p)/2}t.height=r},_ensureVisibleCellRange:function(e,t){var n=t&&t.length;if(n){for(var i=Mn.c,r=e.length,a=r-1,s=r,o=-1,c=i.getInstance(),l=0;l<n;l++){var u=t.objectAt(l);if("item"===u.cellType){var d=u.handle.position;d<0||d>a?c[c.length]=d:(s=Math.min(s,d),o=Math.max(o,d))}}c.length?i.disposeInstance(c):(i.disposeInstance(c),nr.a.begin().setIfChanged(this,"firstItemIndex",s).setIfChanged(this,"lastItemIndex",o).end())}},primaryInteractionMode:b.b(),__superMap:{_$1W7$isCellPreferredAnchor:"isCellPreferredAnchor",_$1ao$completeVisibleCells:"completeVisibleCells"},staticMembers:{__QUALIFIED_CLASS_NAME__:"PhotosGridLayoutDelegate"}}),cr=er.LayoutMetricsClass.extend({calculatedItemCount:b.b({dependencies:["columnCount","calculatedRowCount"],get:function(){return this.columnCount*this.calculatedRowCount},readOnly:!0}),calculatedRowCount:b.b({dependencies:["viewportHeight","rowHeight","rowSpacing"],get:function(){var e=this.viewportHeight,t=this.rowHeight,n=this.rowSpacing;return Math.ceil(e/(t+n))},readOnly:!0}),columnCount:b.b(4),columnSpacing:b.b({dependencies:["isSquareCrop"],get:function(){return this.isSquareCrop?2:16},readOnly:!0}),columnWidth:b.b({dependencies:["columnCount","columnSpacing","sectionLeftPadding","sectionRightPadding","viewportWidth"],get:function(){var e=this.columnCount,t=this.columnSpacing,n=this.viewportWidth,i=this.sectionLeftPadding,r=this.sectionRightPadding;return 0===e?0:(n-i-r-(e-1)*t)/e},readOnly:!0}),isSquareCrop:b.b(!0),justification:Ji.Left,orientationType:b.b(St.a.bindingFor("application.orientationType")),rowHeight:b.b({readOnly:!0,dependencies:["columnWidth"],get:Object.assign(function(){return Math.round(this.columnWidth)},{__CW__getter:function(e,t,n,i){return Math.round(i.internalGet(this,t[0+n]))}})}),rowSpacing:b.b({dependencies:["isSquareCrop"],get:function(){return this.isSquareCrop?2:32},readOnly:!0}),sizeClass:b.b(St.a.bindingFor("application.sizeClass")),captionHeight:b.b(0),bottomPadding:b.b(23),hasCaption:b.b(!1),hasHeaders:b.b(!1),headerHeight:b.b(0),initialPosition:b.b(an.b.Top),sectionBottomPadding:b.b(13),sectionLeftPadding:b.b(16),sectionRightPadding:b.b(16),sectionTopPadding:b.b(0),shouldStickAtBottom:b.b(!0),shouldStickAtTop:b.b(!0),topPadding:b.b(0),viewportHeight:b.b(1024),viewportWidth:b.b(1024),primaryInteractionMode:b.b(),staticMembers:{__QUALIFIED_CLASS_NAME__:"PhotosGridLayoutMetrics"}}),lr=function(){var e=v.a,t=function(t){var n=e.create();try{t(n.resolve.bind(n),n.reject.bind(n))}catch(e){n.reject(e)}return n};return t.all=e.all.bind(e),t.race=e.race.bind(e),t.resolve=e.resolve.bind(e),t.reject=e.reject.bind(e),t}(),ur={_ensureRangeDebounce:500,_lastEnsureRangeTimerId:void 0,_hasEnsuredRangeOnce:b.b(!1),pageSize:b.b(1),ensureRangeWithLimiter:function(e){var t,n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0;clearTimeout(this._lastEnsureRangeTimerId),this._lastEnsureRangeTimerId=s.a((t=regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.ensureRange(i,r);case 2:n._hasEnsuredRangeOnce=!0;case 3:case"end":return t.stop()}},t,n)}),function(){var e=t.apply(this,arguments);return new lr(function(t,n){return function i(r,a){try{var s=e[r](a),o=s.value}catch(e){return void n(e)}if(!s.done)return lr.resolve(o).then(function(e){i("next",e)},function(e){i("throw",e)});t(o)}("next")})}),this._ensureRangeDebounce)},pagedFirstItemIndex:b.b(0),pagedLastItemIndex:b.b(0),_pagedItemsDidChange:W.f({inputs:["collection","collection.source","calculatedItemCount","firstItemIndex","lastItemIndex","pageSize","_hasEnsuredRangeOnce"],callback:function(e,t,n,i,r,a,s){if(void 0!==e&&void 0!==t){var o=n*(s?a:Math.min(1,a));if(Number.isSafeInteger(o)&&o>0){var c=(Math.min(i,r)+Math.max(i,r))/2,l=Math.max(0,Math.floor(c/o)*o-o),u=Math.max(0,Math.min(e.length-1,Math.ceil(c/o)*o+o));nr.a.begin().setIfChanged(this,"pagedFirstItemIndex",l).setIfChanged(this,"pagedLastItemIndex",u).end()}}}}),_pagedRangeDidChange:W.f({inputs:["collection","collection.source","collection.canEnsureRange","pagedFirstItemIndex","pagedLastItemIndex"],callback:function(e,t,n,i,r){void 0!==e&&n&&e.length>0&&Number.isSafeInteger(i)&&i>=0&&Number.isSafeInteger(r)&&r>=0&&i<=r&&this.ensureRangeWithLimiter(e,i,r)}})},dr={mixinDependencies:[],DERIVATIVE_PRELOAD_BUCKET_SIZE:16,DERIVATIVE_PRELOAD_EXPANSION_CONSTANT:40,DERIVATIVE_PRELOAD_EXPANSION_FRACTION:2,DERIVATIVE_PRELOAD_ABSOLUTE_MAX_EXPANSION:150,DERIVATIVE_PRELOAD_MAINTENANCE_THROTTLE_TIME:250,_ensureDerivativePreloadRange:function(e){if(this._isEffectivelyAttached&&!(this._preloaders_lastReshuffleTime+this.DERIVATIVE_PRELOAD_MAINTENANCE_THROTTLE_TIME>Date.now())){var t=this.collection,n=t&&t.length;if(t&&n){for(var i=e&&e.length,r=void 0,a=void 0,s=0;s<i&&!r;s++){var o=e.objectAt(s),c=o&&o.value;X.a(c,bn.a)&&(r=c)}for(var l=i-1;l>=0&&!a;l--){var u=e.objectAt(l),d=u&&u.value;X.a(d,bn.a)&&(a=d)}if(r&&a){var h=t.indexOf(r),p=t.indexOf(a);if(h>=0&&p>=0){var f=this.DERIVATIVE_PRELOAD_BUCKET_SIZE,g=this.getPath("layoutMetrics.columnCount"),m=g*g*this.viewportHeight/this.viewportWidth,v=m+2*Math.min(this.DERIVATIVE_PRELOAD_ABSOLUTE_MAX_EXPANSION,this.DERIVATIVE_PRELOAD_EXPANSION_CONSTANT+m*this.DERIVATIVE_PRELOAD_EXPANSION_FRACTION|0),_=Math.ceil(v/f)*f,b=h/2+p/2-_/2,y=Math.max(0,Math.floor(b/f)*f),I=y+_-1;I>n-1&&(y=Math.max(0,n-_),I=n-1),this._schedulePassivePreloaderRangeMaintenance();var w=this._preloaders,S=this._preloaders_lastFirstIndex,C=this._preloaders_lastLastIndex;if(!Object.is(y,S)||!Object.is(I,C)){var O=Mn.c.getInstance();if(this._preloaders=O,this._preloaders_lastFirstIndex=y,this._preloaders_lastLastIndex=I,O.length=I-y+1,!w||isNaN(S)||isNaN(C)||isNaN(y)||isNaN(I))for(var A=0,E=w&&w.length;A<E;A++){var T=w[A];T&&T.release(this,"in preloaders")}else{for(var M=S,D=Math.min(y-1,C);M<=D;M++){var L=w[M-S];L&&L.release(this,"in preloaders")}for(var N=Math.max(y,S),P=Math.min(I,C);N<=P;N++){var R=w[N-S];R&&(O[N-y]=R)}for(var x=Math.max(I+1,S);x<=C;x++){var F=w[x-S];F&&F.release(this,"in preloaders")}}w&&Mn.c.disposeInstance(w);var k=h/2+p/2|0;this._preloaders_lastCenterVisibleIndex=k,this._reprioritizePreloaders(),this._preloaders_lastReshuffleTime=Date.now()}}}}}},_clearAllPreloaders:function(){var e=this._preloaders,t=this._preloaders_lastFirstIndex,n=this._preloaders_lastLastIndex;if(e){for(var i=t;i<=n;i++){var r=e[i-t];r&&r.release(this,"in preloaders")}Mn.c.disposeInstance(e)}this._preloaders=this._preloaders_lastFirstIndex=this._preloaders_lastLastIndex=this._preloaders_lastReshuffleTime=void 0},_schedulePassivePreloaderRangeMaintenance:function(){this._passivePreloaderRangeMaintenanceTimeout||(this._passivePreloaderRangeMaintenanceTimeout=rt.a(this._passivelyAddSomePreloaders))},_passivelyAddSomePreloaders:Ui.a(function(){if(!this.isDisposed){this._passivePreloaderRangeMaintenanceTimeout=null;var e=this._preloaderClass,t=this._preloaders,n=this._preloaders_lastFirstIndex,i=this._preloaders_lastLastIndex,r=this._preloaders_lastCenterVisibleIndex,a=performance.now();if(t&&i-n>0){var s=0,o=void 0,c=void 0;do{if(c=r+s,(o=r-s)>=n&&!t[o-n]){var l=this._getMediaAtIndex(o);if(l){var u=e.create(l).retain(this,"in preloaders");u.derivativePriority=1e5+Math.abs(o-r),t[o-n]=u}}if(c<=i&&!t[c-n]){var d=this._getMediaAtIndex(c);if(d){var h=e.create(d).retain(this,"in preloaders");h.derivativePriority=1e5+Math.abs(c-r),t[c-n]=h}}if(s++,o<n&&c>i)break}while(performance.now()-a<.5);(o>n||c<i)&&this._schedulePassivePreloaderRangeMaintenance()}}}),_reprioritizePreloaders:function(){for(var e=this._preloaders,t=this._preloaders_lastFirstIndex,n=this._preloaders_lastLastIndex,i=this._preloaders_lastCenterVisibleIndex,r=t;r<=n;r++){var a=e[r-t];a&&(a.derivativePriority=1e5+Math.abs(r-i))}},_preloaderClass:ki.a.extend(Cn.a,{derivativeContainerWidth:1,derivativeContainerHeight:1,initFromPool:function(e){this.__s._$4DL$initFromPool.call(this),this.media=e},cleanup:function(){var e=arguments;this.__s._$4EB$cleanup.apply(this,e),this.media=null},derivative:b.b({didChange:Z.a}),__superMap:{_$4DL$initFromPool:"initFromPool",_$4EB$cleanup:"cleanup"}}),_getMediaAtIndex:function(e){var t=this.collection;if(!t)return null;var n=t.objectAt(e);return n?X.a(n,bn.a)?n:(n=n.keyMedia,X.a(n,bn.a)?n:null):null},_scheduleMaintenanceForContentChange:W.f("collection","collection.contentsDidChange",function(){this._schedulePassivePreloaderRangeMaintenance()}),_clearOrRestartPreloadersForAttachment:function(e){if(e){var t=this.getPath("layoutController.visibleCells");t&&this._ensureDerivativePreloadRange(t)}else this._clearAllPreloaders()},_isEffectivelyAttached:b.b({readOnly:!0,dependencies:["isAttached","view.isAttached"],get:Object.assign(function(){return Boolean(this.isAttached&&this.getPath("view.isAttached"))},{__CW__getter:function(e,t,n,i){return Boolean(i.internalGet(this,t[0+n])&&i.internalGetPath(this,t[1+n]))}}),didChange:function(e){this._clearOrRestartPreloadersForAttachment(e)}})},hr=n(1137),pr=n(1174),fr=hr.a.extend({mixinDependencies:[Ri],singleColumnCellWidth:b.b(0),itemViewDidMove:function(e,t){var n=this.singleColumnCellWidth,i=this.layoutMetrics.isSquareCrop;pr.a(e.doLayout)?(e.__isBaseFlowGridItemView__&&e.style.set("z-index",t.handle.position),e.doLayout(t.x,t.y,t.width,t.height,i,n)):e.style.set("width",t.width).set("height",t.height).translateDevicePixels(t.x,t.y);var r=e.owningGrid;if("header"===t.cellType)e.isFloatingToTop=t.isFloatingToTop,e.element.style.clip="rect("+t.clipTop+"px auto auto auto)";else if("item"===t.cellType&&r.__hasPhotosGridSelectionSupport){var a=r.isItemAtHandleSelected(t.handle);e.isSelected!==a&&(e.isSelected=a)}},itemViewDidExit:function(e){e&&(e.style.translate(-1e4,-1e4),pr.a(e.clearForReuse)?e.clearForReuse():e.set(this.dataProperty,null),e.isSelected&&(e.isSelected=!1))},cellsDidMove:function(){var e=arguments;this.__s._$lg$cellsDidMove.apply(this,e),this._momentarilySuspendDerivativeCreations()},_momentarilySuspendDerivativeCreations:function(){this._resumeDerivativeCreationsTimeout?clearTimeout(this._resumeDerivativeCreationsTimeout):bn.a.suspendDerivativeCreations(),this._resumeDerivativeCreationsTimeout=s.a(this._resumeDerivativeCreations,250)},_resumeDerivativeCreations:Ui.a(function(){this._resumeDerivativeCreationsTimeout=null,bn.a.resumeDerivativeCreations()}),__superMap:{_$lg$cellsDidMove:"cellsDidMove"},staticMembers:{__QUALIFIED_CLASS_NAME__:"PhotosGridPresenter"}}),gr=n(839),mr=n(1225),vr=n(881),_r=n(1138),br=n(882),yr={mixinDependencies:[_r.a],_scrollBy:function(e,t){var n=arguments;this.__s._$3V$_scrollBy.apply(this,n),this.scrollMotionX.handleDelta(e),this.scrollMotionY.handleDelta(t)},scrollMotionX:b.b({strong:!0,defaultValue:$.b(br.a,{zeroSpeedCutoff:3,emaHalfLife:.05})}),scrollMotionY:b.b({strong:!0,defaultValue:$.b(br.a,{zeroSpeedCutoff:3,emaHalfLife:.05})}),__superMap:{_$3V$_scrollBy:"_scrollBy"}},Ir=n(824),wr=n(883),Sr=(n(879),gr.a.extend(mr.a,yr,Ir.a).extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"shouldPixelateImagesRatchet.value",truevalue:"should-pixelate-images",attributes:{}}]}},__QUALIFIED_CLASS_NAME__:"PhotosGridView"},additionalClassNames:_.a(["pgk-photos-grid-view"]),horizontalScrollIndicatorClass:vr.a.extend({useCSSThickness:!0}),verticalScrollIndicatorClass:vr.b.extend({useCSSThickness:!0}),pointerMove:function(){var e=this.horizontalScrollIndicator,t=this.verticalScrollIndicator;e&&(e.isEnlarged=e.isInstantlyEnlarged=!0),t&&(t.isEnlarged=t.isInstantlyEnlarged=!0),this.showScrollIndicators()},shouldPixelateImages:b.b({readOnly:!0,dependencies:["scrollMotionY.emaSpeed",Ii.a.sharedInstance.bindingFor("devicePixelRatio")],get:Object.assign(function(){return Ii.a.sharedInstance.devicePixelRatio>=2&&this.getPath("scrollMotionY.emaSpeed")>0},{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[1+n])>=2&&i.internalGetPath(this,t[0+n])>0}})}),shouldPixelateImagesRatchet:b.b({strong:!0,defaultValue:$.b(wr.a,{defersDowngrades:250}),downstreamBindings:{targetValue:"(owner).shouldPixelateImages"}})})),Cr=Pi.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext"}},__QUALIFIED_CLASS_NAME__:"PhotosGridHeaderView"}}),Or=Si.a.extend({mixinDependencies:[ur,dr,xi],calculatedItemCount:b.b(Gt.c("layoutMetrics.calculatedItemCount")),firstItemIndex:b.b(Gt.c("layoutDelegate.firstItemIndex")),lastItemIndex:b.b(Gt.c("layoutDelegate.lastItemIndex")),pageSize:b.b(2),itemViewClass:Wi.extend({motionSpeed:Gt.c("parent.scrollMotionY.emaSpeed")}),isSelectionEnabled:b.b(!0),layoutDelegate:b.b({defaultValue:or,downstreamBindings:{primaryInteractionMode:"(owner).primaryInteractionMode"},readOnly:!0}),layoutMetrics:b.b({defaultValue:$.b(cr),downstreamBindings:{primaryInteractionMode:"(owner).primaryInteractionMode",viewportHeight:"(owner).viewportHeight",viewportWidth:"(owner).viewportWidth"}}),presenter:fr.extend({owner:b.b(),singleColumnCellWidth:Gt.c("owner.layoutMetrics.columnWidth"),cellsDidMove:function(e){var t=arguments,n=this.owner;return n&&n._ensureDerivativePreloadRange(e),this.__s._$l4$cellsDidMove.apply(this,t)},viewForViewClass:function(){var e=arguments,t=this.__s._$mD$viewForViewClass.apply(this,e);return X.a(t,Wi)&&t.bind("shouldHideMostProminentDisplayOfMediaWithPK",this.owner.bindingFor("shouldHideMostProminentDisplayOfMediaWithPK")),t.owningGrid=this.owner,t},__superMap:{_$l4$cellsDidMove:"cellsDidMove",_$mD$viewForViewClass:"viewForViewClass"}}),viewClass:Sr,headerViewClass:Cr,primaryInteractionMode:b.b(),shouldHideMostProminentDisplayOfMediaWithPK:b.b(),staticMembers:{__QUALIFIED_CLASS_NAME__:"PhotosGridViewController"}}),Ar=n(190),Er=n(1227),Tr=n(884),Mr=n(1228),Dr={mixinDependencies:[On],_maintainElementPresence:W.f({inputs:["wantsPresenceInHost","host"],callback:function(e,t){var n=this.parent,i=null!==n;if(!(e&&i&&t===n||!e&&!i)){var r=i&&(!e||n!==t),a=e&&t&&t.instanceOf(Ge.a);r&&this._disconnect(),a&&this._connectTo(t)}}}),_connectTo:function(e){var t=e.element,n=this.element;t.appendChild(n),this.parent=e,this.nextResponder=e,this.didAppendElement(n)},_disconnect:function(){var e=this.parent,t=this.element;null!==e&&void 0!==e.element&&e.element.contains(t)&&(this.willRemoveElement(t),e.element.removeChild(t)),this.parent=null,this.nextResponder=null}},Lr=Ge.a.extend(Dr,{staticMembers:{__QUALIFIED_CLASS_NAME__:"ViewAdornment"}}),Nr=n(832),Pr=n(888),Rr=2,xr=3.5,Fr=24-Rr/2,kr=24-xr/2,Vr=new WeakMap,jr=function(){cancelAnimationFrame(this.timeoutHandle),Vr.delete(this.circleSvgElement),Mn.h.disposeInstance(this)},Br=function e(){var t=Math.max(0,Math.min(1,(performance.now()-this.startTime)/this.duration));this.circleSvgElement.setAttribute("stroke-width",this.targetStrokeWidth*t+this.initialStrokeWidth*(1-t)),this.circleSvgElement.setAttribute("r",this.targetRadius*t+this.initialRadius*(1-t)),t<1?this.timeoutHandle=rt.a(jn.a(e,this)):this.stopAnimating()};function Ur(e,t){if(e){var n=e.firstElementChild;if(n){var i=n.lastElementChild,r=n.firstElementChild;t?(i.removeAttribute("display"),r.setAttribute("fill","#146FDF")):(i.setAttribute("display","none"),r.setAttribute("fill","none"));for(var a=!1,s=e;s=s.parentNode;){var o=s.view;if(o&&o.isAttached||s===document.body){a=!0;break}}if(!a){var c=Vr.get(r);return c&&c.stopAnimating(),r.setAttribute("stroke-width",t?Rr:xr),void r.setAttribute("r",t?Fr:kr)}var l=Vr.get(r);if(!l||l.isTowardOn!==t){l&&l.stopAnimating();var u=Mn.h.getInstanceWithProperties("isTowardOn",t,"initialStrokeWidth",parseFloat(r.getAttribute("stroke-width")),"initialRadius",parseFloat(r.getAttribute("r")),"targetStrokeWidth",t?Rr:xr,"targetRadius",t?Fr:kr,"duration",150,"startTime",performance.now(),"circleSvgElement",r,"timeoutHandle",void 0,"handleFrame",Br,"stopAnimating",jr);u.handleFrame(),Vr.set(r,u)}}}}n(886);var Wr={mixinDependencies:[Un],fadeInDuration:150,fadeOutDuration:250,wantsPresenceInHost:Gt.c("host.isSelected")},Gr={classNames:_.a(["dimmed-grid-item"])},Hr=An.extend(Wr,{classNames:_.a(["selection-outline-or-checkmark-adornment"]),staticMembers:{__QUALIFIED_CLASS_NAME__:"SelectionOutlineOrCheckmarkAdornment"}}).extend(Gr,{staticMembers:{__QUALIFIED_CLASS_NAME__:"DimmedSelectionOutlineOrCheckmarkAdornment"}}),$r=Lr.extend(Un,Nr.a,Tr.a,{init:function(){var e=arguments;this.__s._$Uu$init.apply(this,e);var t=this.singleTapGestureRecognizer=Mr.a.create({event:"selectAdornment",delegate:this});this.addGestureRecognizer(t);var n=this.singleTapWithShiftGestureRecognizer=Mr.a.create({event:"selectAdornment",delegate:this,modifiers:new Set([un.a.Shift])});this.addGestureRecognizer(n)},primaryInteractionMode:b.b(),isInteractionDisabled:b.b(),isSelected:b.b(),isSelectionEnabled:b.b(),additionalClassNames:_.a(["cw-has-right-icon","selection-checkmark-toggle-adornment"]),icon:Pr,fadeInDuration:b.b({readOnly:!0,dependencies:["primaryInteractionMode"],get:Object.assign(function(){return this.primaryInteractionMode===wt.a.MOUSE?0:250},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])===wt.a.MOUSE?0:250}})}),fadeOutDuration:b.b({readOnly:!0,dependencies:["primaryInteractionMode"],get:Object.assign(function(){return this.primaryInteractionMode===wt.a.MOUSE?0:250},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])===wt.a.MOUSE?0:250}})}),isSelectedObserver:W.f({inputs:["isSelected"],callback:function(){var e=this.element;Ur((void 0===e?{firstElementChild:null}:e).firstElementChild,this.isSelected)}}),wantsPresenceInHost:b.b({readOnly:!0,dependencies:["primaryInteractionMode","isSelected","isInteractionDisabled","isSelectionEnabled"],get:function(){var e=this.primaryInteractionMode,t=this.isSelected,n=this.isInteractionDisabled,i=this.isSelectionEnabled;return!n&&(t||e===wt.a.MOUSE&&(rr.a.implicitDesktopSelectionMode||i))}}),singleTapGestureRecognizer:void 0,selectAdornment:function(e){var t=e.state;this.sendEvent("selectView",{state:t,view:this.host})},gestureRecognizerShouldReceive:function(){var e=arguments;return this.primaryInteractionMode!==wt.a.TOUCH&&this.__s._$1mV$gestureRecognizerShouldReceive.apply(this,e)},__superMap:{_$Uu$init:"init",_$1mV$gestureRecognizerShouldReceive:"gestureRecognizerShouldReceive"},staticMembers:{__QUALIFIED_CLASS_NAME__:"SelectionCheckmarkToggleAdornment"}}),zr=wi.a,Kr=zr.CTRL,Qr=zr.CMD,qr=wn.a,Yr=Ar.a.get("sharedInstance"),Zr={mixinDependencies:[Er.a],itemViewClass:_.a({selectionAdornment:vn.adornmentProperty({appliesImmediately:!0,adornmentClass:Hr})}),__hasPhotosGridSelectionSupport:!0,isMultipleSelectionEnabled:b.b(!0),isSelectAllEnabled:b.b(!0),isMouseSelectionAdditive:b.b(!1),isRangeSelectionEnabled:b.b(!0),isEmptySelectionEnabled:b.b(!0),isWhitespaceDeselectionEnabled:b.b({dependencies:["primaryInteractionMode"],readOnly:!0,type:Boolean,get:Object.assign(function(e){return void 0!==e?e:this.primaryInteractionMode===wt.a.MOUSE},{__CW__getter:function(e,t,n,i){return void 0!==e?e:i.internalGet(this,t[0+n])===wt.a.MOUSE}})}),isFocusable:b.b(!0),_focus:W.f({inputs:["isAttached"],callback:function(e){e&&this.focus()}}),get metaKeyForDevice(){return Ii.a.sharedInstance.isWindows?Kr:Qr},isMetaKeyPressedForEvent:function(e){var t=e.ctrlKey,n=e.metaKey;return Ii.a.sharedInstance.isWindows?t:n},deselectAll:function(){this.isEmptySelectionEnabled&&this.selectionController.userPerformedSelectionOperation(null,qr.SET)},deselectItem:function(e){var t=e.handle;this.selectionController.userPerformedSelectionOperation(t,qr.REMOVE)},selectAll:function(){this._focus(),this.isSelectAllEnabled&&this.isMultipleSelectionEnabled&&this.isSelectionEnabled&&this.selectionController.selectAll()},selectItem:function(e){var t=e.handle;this.isSelectionEnabled&&this.selectionController.userPerformedSelectionOperation(t,qr.ADD)},keyDown:function(e){var t=e.key;return!0===this.isMetaKeyPressedForEvent(e)&&"a"===t&&(e.preventDefault(),this.handleKeyboardSelectAll(),!0)},handleKeyboardSelectAll:function(){return this.selectAll()},selectRange:function(e,t){var n=e.handle,i=t.handle;this.isRangeSelectionEnabled&&this.isMultipleSelectionEnabled&&this.isSelectionEnabled&&(this.selectionController.selectRange(n,i),this.selectionController.userPerformedSelectionOperation(i,qr.ADD))},clearSelection:function(){var e=arguments;if(this._focus(),this.isWhitespaceDeselectionEnabled&&!Yr.activeKeys.has(this.metaKeyForDevice)&&!Yr.activeKeys.has(wi.a.SHIFT))return this.__s._$207$clearSelection.apply(this,e)},userSelectionRequest:function(e){var t=arguments;if(this._focus(),e&&this.isSelectionEnabled){var n=e.view,i=n&&this.presenter.cellForView(n),r=this.isMouseSelectionAdditive||this.primaryInteractionMode===wt.a.TOUCH,a=this.selectionController;if(r)if(n.isSelected)this.deselectItem(i);else{var s=a.pivot;Yr.activeKeys.has(wi.a.SHIFT)&&s?this.selectRange(i,{handle:s}):this.selectItem(i),a.pivot=i.handle}else{if(n.isSelected&&e.operation.equals(qr.SET))return;this.__s._$2Yc$userSelectionRequest.apply(this,t)}}},primaryInteractionMode:b.b(),__superMap:{_$207$clearSelection:"clearSelection",_$2Yc$userSelectionRequest:"userSelectionRequest"}},Jr=n(1210),Xr=n(1188),ea={isSelectionRectangleDraggingEnabled:b.b(),doesPointLieInAnItemView:b.b(),allowsScrollingWhileDraggingSelectionRectangle:!1,dragSelectShouldAlwaysInvertSelections:b.b(),selectionDragGR:b.b({strong:!0}),selectionDragGRClass:Jr.a.extend(pn.a,W.a,{event:"selectionDrag",assumesViewIsStationary:!0,_ourRect:void 0,invertsSelections:b.b(),x1:b.b(),y1:b.b(),x2:b.b(),y2:b.b(),rectLeft:b.b({readOnly:!0,dependencies:["x1","x2"],get:function(){var e=this.x1,t=this.x2,n=Math.min(e,t),i=Math.max(e,t),r=Math.abs(e-t);return r<3?i-r:n}}),rectWidth:b.b({readOnly:!0,dependencies:["x1","x2"],get:function(){var e=this.x1,t=this.x2;return Math.max(3,Math.abs(e-t))}}),rectTop:b.b({readOnly:!0,dependencies:["y1","y2"],get:function(){var e=this.y1,t=this.y2,n=Math.min(e,t),i=Math.max(e,t),r=Math.abs(e-t);return r<3?i-r:n}}),rectHeight:b.b({readOnly:!0,dependencies:["y1","y2"],get:function(){var e=this.y1,t=this.y2;return Math.max(3,Math.abs(e-t))}}),rect:b.b({strong:!0,defaultValue:$.b(Xr.a.extend({owner:b.b(),x:Gt.c("owner.rectLeft"),y:Gt.c("owner.rectTop"),width:Gt.c("owner.rectWidth"),height:Gt.c("owner.rectHeight"),invertsSelections:b.b(Gt.c("owner.invertsSelections")),isPresentable:b.b({readOnly:!0,dependencies:["x","y","width","height"],get:Object.assign(function(){return this.x+this.y+this.width+this.height<1/0},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])+i.internalGet(this,t[1+n])+i.internalGet(this,t[2+n])+i.internalGet(this,t[3+n])<1/0}})})}))}),pointerDown:function(e){var t=arguments;this.pauseStateChanges();var n=this.__s._$1kT$pointerDown.apply(this,t),i=this.view.element.getBoundingClientRect();return this.assumesViewIsStationary&&(this._ourRect=i),H.a.pause(),this.invertsSelections=this.view.dragSelectShouldAlwaysInvertSelections||e.metaKey||e.altKey||e.shiftKey,this.x1=this.x2=Math.round(e.clientX)-i.left,this.y1=this.y2=Math.round(e.clientY)-i.top,H.a.resume(),this.resumeStateChanges(),n},pointerMove:function(e){var t=arguments;this.pauseStateChanges();var n=this.__s._$294$pointerMove.apply(this,t),i=this._ourRect||this.view.element.getBoundingClientRect();return H.a.pause(),this.x2=Math.round(e.clientX)-i.left,this.y2=Math.round(e.clientY)-i.top,H.a.resume(),this.resumeStateChanges(),n},reset:function(){var e=arguments;H.a.pause(),this.x1=this.x2=this.y1=this.y2=void 0,H.a.resume(),this._ourRect=void 0,this.__s._$2Ow$reset.apply(this,e)},__superMap:{_$1kT$pointerDown:"pointerDown",_$294$pointerMove:"pointerMove",_$2Ow$reset:"reset"}}),init:function(){var e=arguments;this.__s._$2Sv$init.apply(this,e),this.selectionDragGR=this.selectionDragGRClass.create({delegate:this}),this.addGestureRecognizer(this.selectionDragGR)},gestureRecognizerShouldReceive:function(e,t){var n=arguments;if(e!==this.selectionDragGR)return this.__s._$2ZG$gestureRecognizerShouldReceive.apply(this,n);if(!this.isSelectionRectangleDraggingEnabled)return!1;var i=this.doesPointLieInAnItemView,r=void 0;return!(i&&!this.isSelectionDragGestureInProgress&&(r=this.element.getBoundingClientRect())&&i(t.clientX-r.left,t.clientY-r.top))&&this.__s._$2ZG$gestureRecognizerShouldReceive.apply(this,n)},gestureRecognizerShouldBeRequiredToFailBy:function(e,t){var n=arguments;return e!==this.selectionDragGR&&(t===this.selectionDragGR||this.__s._$2ob$gestureRecognizerShouldBeRequiredToFailBy.apply(this,n))},gestureRecognizerShouldRequireFailureOf:function(e,t){var n=arguments;return e===this.selectionDragGR||t!==this.selectionDragGR&&this.__s._$2v6$gestureRecognizerShouldRequireFailureOf.apply(this,n)},selectionDrag:function(){this.propertyChanged("isSelectionDragGestureInProgress")},isSelectionDragGestureInProgress:b.b({readOnly:!0,get:function(){var e=this.getPath("selectionDragGR.state");return e===dn.b.Began||e===dn.b.Changed}}),selectionDragRect:b.b({readOnly:!0,dependencies:["selectionDragGR.rect","selectionDragGR.rect.isPresentable","isSelectionDragGestureInProgress"],get:Object.assign(function(){return this.isSelectionDragGestureInProgress&&this.getPath("selectionDragGR.rect.isPresentable")?this.getPath("selectionDragGR.rect"):void 0},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[2+n])&&i.internalGetPath(this,t[1+n])?i.internalGetPath(this,t[0+n]):void 0}})}),_maintainSelectionRectangleElement:W.f({inputs:["selectionDragRect","selectionDragRect.x","selectionDragRect.y","selectionDragRect.width","selectionDragRect.height"],callback:function(e,t,n,i,r){if(Boolean(this._msre_selectionDragRect)!==Boolean(this._msre_selectionDragRect=e))if(e){var a=this._msre_selectionRectangleElement=Mn.e.getInstance();a.style.cssText="position: absolute; background-color: rgba(215,215,215,0.3215686275); border: 1px solid rgba(233,233,233,0.8666666667); box-sizing: border-box; z-index: 1000000; pointer-events: none;",this.element.appendChild(a)}else{var o=this._msre_selectionRectangleElement;o&&(this._msre_selectionRectangleElement=void 0,o.style.transition="opacity 250ms",o.style.opacity=0,s.a(function(){return Mn.e.disposeInstance(o)},270))}var c=this._msre_selectionRectangleElement;c&&(c.style.left=t+"px",c.style.top=n+"px",c.style.width=i+"px",c.style.height=r+"px")}}),_scrollBy:function(e,t){var n=arguments;if(!this.isSelectionDragGestureInProgress||this.allowsScrollingWhileDraggingSelectionRectangle){this.__s._$4GB$_scrollBy.apply(this,n);var i=this.selectionDragGR;i.y1<1/0&&(i.y1-=t)}},__superMap:{_$2Sv$init:"init",_$2ZG$gestureRecognizerShouldReceive:"gestureRecognizerShouldReceive",_$2ob$gestureRecognizerShouldBeRequiredToFailBy:"gestureRecognizerShouldBeRequiredToFailBy",_$2v6$gestureRecognizerShouldRequireFailureOf:"gestureRecognizerShouldRequireFailureOf",_$4GB$_scrollBy:"_scrollBy"}},ta={mixinDependencies:[Zr],viewClass:_.a(ea),selectionDragRect:b.b(Gt.c("view.selectionDragRect")),isSelectionRectangleDraggingEnabled:b.b({readOnly:!0,dependencies:["isSelectionEnabled","isMultipleSelectionEnabled","isRangeSelectionEnabled",St.a.bindingFor("application.primaryInteractionMode")],get:Object.assign(function(){return this.isSelectionEnabled&&this.isMultipleSelectionEnabled&&this.isRangeSelectionEnabled&&St.a.getPath("application.primaryInteractionMode")===wt.a.MOUSE},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])&&i.internalGet(this,t[1+n])&&i.internalGet(this,t[2+n])&&i.internalGetPath(this,t[3+n])===wt.a.MOUSE}})}),dragSelectShouldAlwaysInvertSelections:b.b({readOnly:!0,dependencies:["isWhitespaceDeselectionEnabled"],get:Object.assign(function(){return!this.isWhitespaceDeselectionEnabled},{__CW__getter:function(e,t,n,i){return!i.internalGet(this,t[0+n])}})}),view:b.b({downstreamBindings:{isSelectionRectangleDraggingEnabled:"(owner).isSelectionRectangleDraggingEnabled",doesPointLieInAnItemView:"(owner).doesPointLieInAnItemView",dragSelectShouldAlwaysInvertSelections:"(owner).dragSelectShouldAlwaysInvertSelections"}}),_actOnChangingSelectionDragRect:W.f({inputs:["selectionDragRect","selectionDragRect.x","selectionDragRect.y","selectionDragRect.width","selectionDragRect.height","selectionDragRect.invertsSelections"],callback:function(e){var t=Boolean(this._aocsdr_selectionDragRect)!==Boolean(this._aocsdr_selectionDragRect=e);t&&e&&!e.invertsSelections&&this.deselectAll();var n=this._aocsdr_mediaPKs||Mn.c.getInstance(),i=e?this._findMediaPKsWithVisibleCellsIntersectingRect(e):Mn.c.getInstance();this._aocsdr_mediaPKs=i;var r=Mn.c.getAutodisposingInstanceFromFilter(i,jn.b(ia,void 0,Mn.i.getAutodisposingInstanceFromArray(n)).retain().autorelease()),a=Mn.c.getAutodisposingInstanceFromFilter(n,jn.b(ia,void 0,Mn.i.getAutodisposingInstanceFromArray(i)).retain().autorelease()),s=Mn.c.getAutodisposingInstance();s.push.apply(s,r),s.push.apply(s,a);for(var o,c=this.layoutController.visibleCells,l=Mn.i.getAutodisposingInstanceFromArray(s),u=Mn.c.getAutodisposingInstance(),d=0;o=c.objectAt(d);d++)if("item"===o.cellType){var h=o.value;if(h){var p=h.pk;l.has(p)&&u.push(o.handle)}}if(!t||e)for(var f=0,g=u.length;f<g;f++)this.selectionController.userPerformedSelectionOperation(u[f],wn.a.TOGGLE);Mn.c.disposeInstance(n)}}),doesPointLieInAnItemView:b.b({get:function(){var e=this;return function(t,n){var i=e._findMediaPKsWithVisibleCellsIntersectingRect(Mn.h.getAutodisposingInstanceWithProperties("x",t,"y",n,"width",0,"height",0)),r=Boolean(i.length);return Mn.c.disposeInstance(i),r}}}),_findMediaPKsWithVisibleCellsIntersectingRect:function(e){return Mn.c.getInstanceFromMap(Mn.c.getAutodisposingInstanceFromFilter(this.layoutController.visibleCells._array,jn.b(ra,void 0,this.presenter.cellsToViews,e).retain().autorelease()),na)}},na=function(e){return e.value.pk},ia=function(e,t){return!e.has(t)},ra=function(e,t,n){if("item"!==n.cellType||!n.value)return!1;var i,r,a=e.get(n);return r=t,(i=a&&a.__hasCheapRectangleAwarenessSupport__?a.cheapRect:n).x<r.x+r.width&&i.x+i.width>r.x&&i.y<r.y+r.height&&i.y+i.height>r.y},aa={mixinDependencies:[Zr]},sa=n(1136),oa=n(185),ca=n(1229),la=function(){var e=v.a,t=function(t){var n=e.create();try{t(n.resolve.bind(n),n.reject.bind(n))}catch(e){n.reject(e)}return n};return t.all=e.all.bind(e),t.race=e.race.bind(e),t.resolve=e.resolve.bind(e),t.reject=e.reject.bind(e),t}();function ua(e){return function(){var t=e.apply(this,arguments);return new la(function(e,n){return function i(r,a){try{var s=t[r](a),o=s.value}catch(e){return void n(e)}if(!s.done)return la.resolve(o).then(function(e){i("next",e)},function(e){i("throw",e)});e(o)}("next")})}}var da=M.a.extend(W.a,{staticMembers:{fromFullyLoadedSelection:function(e){return function(e){return da.extend({size:b.b({readOnly:!0,dependencies:["selectionDidChange"],get:function(){return this.selection.length}}),isFullyLoaded:b.b({readOnly:!0,dependencies:[],get:function(){return!0}})}).create({selection:e})}(e)},fromMedias:function(e){var t=ti.a.create(e);return da.fromFullyLoadedSelection(t)},__QUALIFIED_CLASS_NAME__:"SparseSelection"},selection:b.b(),size:b.b({readOnly:!0,dependencies:["selectionDidChange"],get:function(){var e=this.selectedIndices;return e?e.length:0}}),length:b.b(Gt.c("size")),isFullyLoaded:b.b({readOnly:!0,dependencies:["selectionDidChange","collection","collection.contentsDidChangeUntracked","collection.everythingChanged"],get:function(){return!this.selection.encodedContains(void 0)}}),getFullyLoadedSelection:function(e){var t=this;return ua(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.ensureSelectionIsFullyLoaded(e);case 2:return n.abrupt("return",t.selection);case 3:case"end":return n.stop()}},n,t)}))()},ensureSelectionIsFullyLoaded:function(e,t){var n=this;return ua(regeneratorRuntime.mark(function i(){var a,s,o,c;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(!n.isFullyLoaded){i.next=2;break}return i.abrupt("return");case 2:i.next=5;break;case 5:if(a=n.selectionRecordsLoader,s=n.selectedIndices,o=n.length,a){i.next=9;break}return r.b("Unable to ensure sparse selection is fully loaded"),i.abrupt("return");case 9:return c=t||o,n.loadsInProgress=c,e&&oa.a(e,"increaseLoadsInProgress",c),i.next=14,a.getIncludeExcludeRecords(s.toArray());case 14:n.loadsInProgress=0,e&&oa.a(e,"decreaseLoadsInProgress",c);case 16:case"end":return i.stop()}},i,n)}))()},selectionRecordsLoader:b.b({readOnly:!0,dependencies:["collection","container"],get:function(){var e=this.container,t=this.collection;if(e&&t)return new ca.a(t,e)}}),isLoadingInProgress:b.b({readOnly:!0,dependencies:["loadsInProgress"],get:Object.assign(function(){return this.loadsInProgress>0},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])>0}})}),loadsInProgress:b.b(0),selectionDidChange:W.g(),collection:b.b(),container:b.b(),selectedIndices:b.b()}),ha=function(){var e=v.a,t=function(t){var n=e.create();try{t(n.resolve.bind(n),n.reject.bind(n))}catch(e){n.reject(e)}return n};return t.all=e.all.bind(e),t.race=e.race.bind(e),t.resolve=e.resolve.bind(e),t.reject=e.reject.bind(e),t}();function pa(e){return function(){var t=e.apply(this,arguments);return new ha(function(e,n){return function i(r,a){try{var s=t[r](a),o=s.value}catch(e){return void n(e)}if(!s.done)return ha.resolve(o).then(function(e){i("next",e)},function(e){i("throw",e)});e(o)}("next")})}}var fa=ti.a.create(),ga=ti.a.create(),ma=sa.a.create(),va={mixinDependencies:[Zr,ta,aa,{selectionController:b.b({defaultValue:_.a({selection:b.b(),selectedIndices:b.b(),collection:b.b(),container:b.b(),sparseSelection:b.b({readOnly:!0,get:function(){return da.create({collection:this.bindingFor("collection"),container:this.bindingFor("container"),selectedIndices:this.bindingFor("selectedIndices"),selection:this.bindingFor("selection")})}}),selectionLength:b.b(Gt.c("sparseSelection.length")),isSelectionFullyLoaded:b.b(Gt.c("sparseSelection.isFullyLoaded")),getFullyLoadedSelection:function(){var e=this;return pa(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.sparseSelection.getFullyLoadedSelection(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,e)}))()},ensureSelectionIsFullyLoaded:function(){var e=this;return pa(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.sparseSelection.ensureSelectionIsFullyLoaded(e);case 2:case"end":return t.stop()}},t,e)}))()},_updateSparseSelectionOnSelectionDidChange:W.f({inputs:["selectionDidChange"],callback:function(){this.sparseSelection.selectionDidChange()}}),_maintainUnknownSelectedIndices:W.e({inputs:["selectionDidChange"],callback:function(){var e=this;ma.clear(),this.selectedIndices.forEach(function(t){void 0===e.collection.encodedObjectAt(t)&&ma.add(t)})}}),_containerWasAnnihilated:W.f({inputs:["collection","collection.contentsDidChange"],callback:function(e){var t=this.selectedIndices;if(!(void 0===e||t.length<=0)){for(var n=!0,i=e.length-1;i>=0;i--)if(void 0!==e.encodedObjectAt(i)){n=!1;break}n&&this.updateSelectionForCollectionChange({collectionChanged:!0})}}}),updateSelectionForCollectionChange:function(e){var t=arguments,n=this._selectedIndices,i=e.itemsChanges;if(i){if(n.length>0){fa.serializer=this.collection.serializer;for(var r=i.length,a=0;a<r;a++){var s=i[a],o=s.index;if(s.operation===G.b.REMOVE){if(n.contains(o)){var c=s.encodedItem;void 0!==c?fa.encodedAdd(c):ga.add(o)}n.itemsRemovedAtIndex(o,1),ma.itemsRemovedAtIndex(o,1)}else{n.itemsInsertedAtIndex(o,1);var l=!1,u=s.encodedItem;fa.encodedContains(u)?(n.add(o),fa.encodedRemove(u)):(ga.contains(o)||ma.contains(o))&&(n.add(o),l=!0),ma.itemsInsertedAtIndex(o,1),!0===l&&ma.add(o)}}fa.clear(),ga.clear(),ma.clear()}this.selectedIndices=n}else this.__s._$2Yi$updateSelectionForCollectionChange.apply(this,t)},__superMap:{_$2Yi$updateSelectionForCollectionChange:"updateSelectionForCollectionChange"}}),downstreamBindings:{container:"(owner).container"}}),sparseSelection:b.b(Gt.c("selectionController.sparseSelection")),container:b.b()}]},_a=C.a,ba=_a.COMPACT,ya=_a.REGULAR,Ia=S.LANDSCAPE,wa=wt.a.MOUSE,Sa=rr.a,Ca=Sa.uiSizeClassCompactInset,Oa=Sa.uiSizeClassRegularInset,Aa=Sa.uiSizeIPad129LandscapeWidth,Ea=Sa.uiSizeIPhoneSELandscapeWidth,Ta=Sa.uiSizeIPhone4LandscapeWidth,Ma=Sa.uiPhotosColumnCountCompact,Da=Sa.uiPhotosColumnCountDesktop,La=Sa.uiPhotosColumnCountIPad129Like,Na=Sa.uiPhotosColumnCountIPhone4Like,Pa=Sa.uiPhotosColumnCountIPhone3GSLike,Ra=Sa.uiPhotosDefaultItemSideSize,xa=Sa.uiPhotosGridGutterDesktop,Fa=Sa.uiPhotosItemMinSpacing,ka={apparentLayoutWidth:b.b({dependencies:["viewportWidth","sectionLeftPadding","sectionRightPadding"],readOnly:!0,type:Number,get:Object.assign(function(){return this.viewportWidth-this.sectionLeftPadding-this.sectionRightPadding},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])-i.internalGet(this,t[1+n])-i.internalGet(this,t[2+n])}})}),columnCount:b.b({dependencies:["apparentLayoutWidth","preferredMouseColumnCount","primaryInteractionMode","sizeClass","viewportWidth"],readOnly:!0,type:Number,get:function(){var e=this.apparentLayoutWidth,t=this.preferredMouseColumnCount,n=this.primaryInteractionMode,i=this.sizeClass,r=this.viewportWidth;return n===wa?void 0!==t?t:Da:i===ba?r<Ta?Pa:r<Ea?Na:Ma:r>Aa?La:Math.floor((e+Fa)/(Ra+Fa))}}),isSquareCrop:b.b({dependencies:["primaryInteractionMode","sizeClass"],readOnly:!0,type:Boolean,get:function(){var e=this.primaryInteractionMode,t=this.sizeClass;return e!==wa&&t!==ya}}),photosGridGutter:b.b({dependencies:["orientationType","primaryInteractionMode","sizeClass"],readOnly:!0,type:Number,get:function(){var e=this.orientationType,t=this.primaryInteractionMode,n=this.sizeClass,i=0;return t===wa?i=xa:n===ba&&e===Ia?i=Ca:n===ya&&(i=Oa),Math.max(i,0)}}),photosGridMaxWidth:b.b(1/0),sectionPaddingObserver:W.f({inputs:["photosGridGutter","photosGridMaxWidth","viewportWidth"],callback:function(e,t,n){var i=(n-Math.min(n,t))/2,r=Math.max(i,e);H.a.pause(),this.sectionLeftPadding=this.sectionRightPadding=r,H.a.resume()}}),preferredMouseColumnCount:b.b()},Va=Or.extend({mixinDependencies:[va],layoutMetrics:_.a(ka),scrollIndicatorShouldEnlarge:b.b({readOnly:!0,dependencies:["primaryInteractionMode"],get:Object.assign(function(){return this.primaryInteractionMode!==wt.a.TOUCH},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])!==wt.a.TOUCH}})}),view:b.b({strong:!0,downstreamBindings:{"verticalScrollIndicator.scrollIndicatorShouldEnlarge":"(owner).scrollIndicatorShouldEnlarge","horizontalScrollIndicator.scrollIndicatorShouldEnlarge":"(owner).scrollIndicatorShouldEnlarge"}}),ARROW_KEY_SCROLL_DISTANCE:40,keyDown:function(e){var t=this.view,n=!Ii.a.sharedInstance.isWindows&&e.metaKey,i=this.ARROW_KEY_SCROLL_DISTANCE;switch(e.keyCode){case wi.a.DOWN:e.altKey?t.pageDown():n?t.scrollTo(0,100):t.attemptScrollBy(0,i);break;case wi.a.UP:e.altKey?t.pageUp():n?t.scrollTo(0,0):t.attemptScrollBy(0,-i);break;case wi.a.SPACE:e.shiftKey?t.pageUp():t.pageDown();break;case wi.a.PAGEDOWN:t.pageDown();break;case wi.a.PAGEUP:t.pageUp();break;case wi.a.HOME:t.scrollTo(0,0);break;case wi.a.END:t.scrollTo(0,100)}return this.__s._$uj$keyDown.call(this,e)},isSelectionEnabled:b.b(),primaryInteractionMode:b.b(),__superMap:{_$uj$keyDown:"keyDown"},staticMembers:{__QUALIFIED_CLASS_NAME__:"PhotosGridViewController"}}),ja=function(){var e=v.a,t=function(t){var n=e.create();try{t(n.resolve.bind(n),n.reject.bind(n))}catch(e){n.reject(e)}return n};return t.all=e.all.bind(e),t.race=e.race.bind(e),t.resolve=e.resolve.bind(e),t.reject=e.reject.bind(e),t}();function Ba(e){return function(){var t=e.apply(this,arguments);return new ja(function(e,n){return function i(r,a){try{var s=t[r](a),o=s.value}catch(e){return void n(e)}if(!s.done)return ja.resolve(o).then(function(e){i("next",e)},function(e){i("throw",e)});e(o)}("next")})}}var Ua=Ve.a.extend(qn,{viewClass:yi,container:b.b({strong:!0}),containerAdapterClass:bi,collection:b.b({strong:!0,readOnly:!0,get:function(){return this.containerAdapterClass.create()},downstreamBindings:{container:"(owner).container"}}),primaryInteractionMode:b.b(),hostedByCloudOSOne:b.b(!1),gridViewController:Jt.b({defaultValue:$.b(Va),downstreamBindings:{collection:"(owner).collection",primaryInteractionMode:"(owner).primaryInteractionMode",shouldHideMostProminentDisplayOfMediaWithPK:"(owner).shouldHideMostProminentDisplayOfMediaWithPK"},strong:!0,readOnly:!0,viewOutlet:"photosGridView"}),_containerDidChange:W.f({inputs:["container"],callback:function(e){var t=this;return Ba(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(void 0!==e){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,t.updateContainer(e);case 4:return n.next=6,t.containerDidUpdate(e);case 6:case"end":return n.stop()}},n,t)}))()}}),updateContainer:function(e){var t=this;return Ba(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.load({isDelayable:!1});case 2:t.gridViewController.update();case 3:case"end":return n.stop()}},n,t)}))()},containerDidUpdate:function(){var e=this;return Ba(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},t,e)}))()},measureViewport:function(){this.gridViewController.measureViewport()},shouldHideMostProminentDisplayOfMediaWithPK:b.b(),getRectInWindowForPrimaryZoomRectableMedia:function(e){var t=this.gridViewController,n=t.layoutDelegate.getCellForItem(t.layoutController,t.collection,t.layoutController.visibleCells,e),i=t.presenter.viewForCell(n);return i?i.rect:void 0},staticMembers:{__QUALIFIED_CLASS_NAME__:"BasePhotosGridPageViewController"}}),Wa={gridViewController:ai.a.define(),transitionWillStart:function(e){var t=this.getPath("gridViewController.view.verticalScrollIndicator.element");t&&it.a(t,"display","none")},transitionDidFinish:function(e){var t=this.getPath("gridViewController.view.verticalScrollIndicator.element");t&&it.a(t,"display","block"),this.measureViewport()}},Ga={topPadding:b.b({dependencies:["primaryInteractionMode"],readOnly:!0,type:Number,get:Object.assign(function(){return this.primaryInteractionMode===wt.a.MOUSE?8:0},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])===wt.a.MOUSE?8:0}})})},Ha=Xt.extend({rightBarButtonItem:b.b({readOnly:!0,strong:!0,type:xt.a,get:function(){return xt.a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",classes:[{type:"CLASSNAMEOUTLET",bindingtype:"DIRECTBINDING",name:"selectionButtonClassName",attributes:{}}]}}},selectionButtonClassName:b.b(),titleRendered:W.f({inputs:["titleDidRender"],callback:function(){this.sendEvent("layoutDidChange")}})}).create({action:"toggleSelectionMode",selectionButtonClassName:this.bindingFor("selectionButtonClassName"),target:this.viewController,title:this.bindingFor("selectionButtonTitle")})}}),shouldHideTabBar:b.b(Gt.c("selectionModeIsActive")),selectionButtonClassName:b.b(),selectionButtonTitle:b.b(),selectionModeIsActive:b.b(),staticMembers:{__QUALIFIED_CLASS_NAME__:"PhotosGridPageNavItem"}}),$a=(n(892),Ge.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"MULTIVIEWOUTLET",tagname:"views",name:"items",classes:["toolbar-items"]}],classes:["touch-toolbar-view"]},TOOLBAR_HEIGHT:50,__QUALIFIED_CLASS_NAME__:"TouchToolbarView"},items:b.b({type:G.b})})),za=(n(903),xt.a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"ELEMENT",tagname:"span",name:"iconElement",classes:["icon"]}],classes:["touch-toolbar-button"]}},__QUALIFIED_CLASS_NAME__:"TouchToolbarButton"},init:function(){var e=arguments;this.__s._$9o$init.apply(this,e);var t=this.icon;this._updateIcon(t)},_iconObserver:W.f({inputs:["icon"],callback:function(e){this._updateIcon(e)}}),_updateIcon:function(e){this.iconElement.innerHTML=e||""},icon:b.b(),__superMap:{_$9o$init:"init"}})),Ka=n(1233),Qa=n(186),qa=n(1180),Ya=n(792),Za=n(504),Ja=Ge.a.extend(Qa.a,{staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"escapedTitle",attributes:{escape:"false"}}],classes:["grid-title"]},__QUALIFIED_CLASS_NAME__:"GridHeaderTitle"},init:function(){var e=arguments;this.__s._$5e$init.apply(this,e),this.addGestureRecognizer(un.b.create({delegate:this,event:"editTitle"}))},title:b.b(),container:b.b(),escapedTitle:b.b({readOnly:!0,dependencies:["title","container"],get:function(){var e=this.title,t=this.container;if(e&&t){var n=t.isMomentsAlbum,i=t.isAllPhotosAlbum;return n||i?e:qa.b(e)}}}),editTitle:function(){var e=this.container,t=e.isFolder,n=e.isNormalAlbum;if(!e.isVirtualFolder&&(t||n)){var i=Ya.a(this.element.parentElement).width,r=Ya.a(this.element).width,a=Math.max(Math.min(i,r),250),s=Za.a;s.action="editAlbumName",s.model=this.container,s.value=this.title,s.insert(this.element,this),it.a(s.element).set("width",a).set("text-align","left"),this._toggleParentOverflow(!0)}},editAlbumName:function(){return this._toggleParentOverflow(!1),!1},_toggleParentOverflow:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];it.a(this.element.parentElement,{overflow:e?"visible":"hidden"})},__superMap:{_$5e$init:"init"}}),Xa=n(1232),es=n(902),ts=n(412),ns=(n(900),Ge.a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"ELEMENT",tagname:"canvas",name:"primaryCanvas",classes:["primary-img"],styles:{height:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"primaryImageHeight",attributes:{},unit:"px",property:"height"},width:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"width",attributes:{},unit:"px",property:"width"}}},{type:"ELEMENT",tagname:"canvas",name:"secondaryCanvas",classes:["secondary-img"],styles:{height:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"stripHeight",attributes:{},unit:"px",property:"height"},width:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"secondaryWidth",attributes:{},unit:"px",property:"width"},top:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"secondaryTop",attributes:{},unit:"px",property:"top"},left:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"secondaryLeft",attributes:{},unit:"px",property:"left"}}},{type:"ELEMENT",tagname:"canvas",name:"tertiaryCanvas",classes:["tertiary-img"],styles:{height:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"stripHeight",attributes:{},unit:"px",property:"height"},width:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"tertiaryWidth",attributes:{},unit:"px",property:"width"},left:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"tertiaryLeft",attributes:{},unit:"px",property:"left"}}}],styles:{width:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"width",attributes:{},unit:"px",property:"width"},height:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"height",attributes:{},unit:"px",property:"height"}},classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isHidden",truevalue:"is-hidden",attributes:{}}]}},DEFAULT_THUMB_ASPECT_RATIO:35/26,PREFERRED_SECONDARY_WIDTH_RATIO:.9,PREFERRED_TERTIARY_WIDTH_RATIO:.76,STRIP_SPACING:1,__QUALIFIED_CLASS_NAME__:"PhotoStack"},width:b.b(36),height:b.b({readOnly:!0,dependencies:["primaryImageHeight","stripHeight"],get:function(){return this.primaryImageHeight+2*this.stripHeight+2}}),isHidden:b.b({readOnly:!0,dependencies:["primaryMedia"],get:Object.assign(function(){return!this.primaryMedia},{__CW__getter:function(e,t,n,i){return!i.internalGet(this,t[0+n])}})}),stripHeight:b.b(1),dpr:b.b({readOnly:!0,dependencies:Ii.a.sharedInstance.bindingFor("devicePixelRatio"),get:function(){return Math.ceil(Ii.a.sharedInstance.devicePixelRatio)}}),backingWidth:b.b({readOnly:!0,dependencies:["width","dpr"],get:Object.assign(function(){return this.width*this.dpr},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])*i.internalGet(this,t[1+n])}})}),primaryImageHeight:b.b({readOnly:!0,dependencies:["width"],get:Object.assign(function(){return Math.round(this.width/(35/26))},{__CW__getter:function(e,t,n,i){return Math.round(i.internalGet(this,t[0+n])/(35/26))}})}),backingPrimaryImageHeight:b.b({readOnly:!0,dependencies:["primaryImageHeight","dpr"],get:Object.assign(function(){return this.primaryImageHeight*this.dpr},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])*i.internalGet(this,t[1+n])}})}),backingStripHeight:b.b({readOnly:!0,dependencies:["dpr","stripHeight"],get:Object.assign(function(){return this.dpr*this.stripHeight},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])*i.internalGet(this,t[1+n])}})}),secondaryWidth:b.b({readOnly:!0,dependencies:["width"],get:Object.assign(function(){return ss(this.width,.9)},{__CW__getter:function(e,t,n,i){return ss(i.internalGet(this,t[0+n]),.9)}})}),secondaryTop:b.b({readOnly:!0,dependencies:["stripHeight"],get:Object.assign(function(){return this.stripHeight+1},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])+1}})}),secondaryLeft:b.b({readOnly:!0,dependencies:["secondaryWidth"],get:Object.assign(function(){return Math.round((this.width-this.secondaryWidth)/2)},{__CW__getter:function(e,t,n,i){return Math.round((this.width-i.internalGet(this,t[0+n]))/2)}})}),tertiaryWidth:b.b({readOnly:!0,dependencies:["width"],get:Object.assign(function(){return ss(this.width,.76)},{__CW__getter:function(e,t,n,i){return ss(i.internalGet(this,t[0+n]),.76)}})}),tertiaryLeft:b.b({readOnly:!0,dependencies:["tertiaryWidth"],get:Object.assign(function(){return Math.round((this.width-this.tertiaryWidth)/2)},{__CW__getter:function(e,t,n,i){return Math.round((this.width-i.internalGet(this,t[0+n]))/2)}})}),primaryMedia:b.b({strong:!0}),primaryIDL:as("width","primaryImageHeight","primaryMedia"),_drawPrimaryDerivative:W.f("backingWidth","backingPrimaryImageHeight","primaryIDL.derivative","primaryCanvas",is),secondaryMedia:b.b({strong:!0}),secondaryIDL:as("width","stripHeight","secondaryMedia"),_drawSecondaryDerivative:W.f("backingWidth","backingStripHeight","secondaryIDL.derivative","secondaryCanvas",rs),tertiaryMedia:b.b({strong:!0}),tertiaryIDL:as("width","stripHeight","tertiaryMedia"),_drawTertiaryDerivative:W.f("backingWidth","backingStripHeight","tertiaryIDL.derivative","tertiaryCanvas",rs),mediaProvider:b.b(),_calculateLayoutOnMediaProviderChange:W.f({inputs:["mediaProvider"],callback:function(){var e=this.mediaProvider;if(e){var t=this._updateStack(e);if(t.length){var n=t.toArray(),i=n[0],r=n[1],a=n[2];this.primaryMedia=i,this.secondaryMedia=r,this.tertiaryMedia=a}}}}),_updateStack:function(e){for(var t=["primaryMedia","secondaryMedia","tertiaryMedia"],n=Xa.a.create(),i=0;i<t.length;i++){var r=this[t[i]];if(r){var a=e.encode(r);e.encodedContains(a)?n.push(r):this[t[i]]=void 0}}var s=e,o=Array.isArray(s),c=0;for(s=o?s:s[Symbol.iterator]();;){var l;if(o){if(c>=s.length)break;l=s[c++]}else{if((c=s.next()).done)break;l=c.value}var u=l;if(n.length>=3)break;u&&u.renderableImageDerivativeInfos&&u.renderableImageDerivativeInfos.length&&n.push(u)}return n}}));function is(e,t,n,i){var r=i.getContext("2d");if(i.width!==e||i.height!==t?(i.width=e,i.height=t):r.clearRect(0,0,e,t),n){var a=Bi.c(n.physicalWidth,n.physicalHeight,e,t);n.drawIntoContextUsingCustomDrawImage(r,ts.a,e/2-a.width/2,t/2-a.height/2,a.width,a.height)}}function rs(e,t,n,i){if(is(e,t,n,i),n){var r=i.getContext("2d");r.fillStyle="rgba(0, 0, 0, 0.15)",r.fillRect(0,0,e,t)}}function as(e,t,n){return b.b({strong:!0,defaultValue:$.b(es.a,{shouldCorrectForDevicePixelRatio:!0}),downstreamBindings:{width:"(owner)."+e,height:"(owner)."+t,media:"(owner)."+n}})}function ss(e,t){if(t<=0||t>=1)return e;for(var n=Math.floor(e*t);(e-n)%2>0;)--n;return n}var os=n(73),cs=xt.a.extend({action:"recoverMedia",title:y.d("RecentlyDeleted.Action.Recover"),isDisabled:b.b({readOnly:!0,type:"boolean",dependencies:["sparseSelection.length"],get:function(){var e=this.sparseSelection;return!(e&&e.length>0)}}),sparseSelection:b.b(),staticMembers:{__QUALIFIED_CLASS_NAME__:"RecoverButton"}}),ls=xt.a.extend({action:"permanentlyDeleteMedia",isDisabled:b.b({readOnly:!0,type:"boolean",dependencies:["medias.length"],get:function(){var e=this.medias;return!(e&&e.length>0)}}),title:b.b({readOnly:!0,type:"string",dependencies:["sparseSelection.length"],get:function(){var e=0,t=this.sparseSelection;return t&&t.length&&(e=t.length),Object(os.c)(["RecentlyDeleted.Action.Delete.0","RecentlyDeleted.Action.Delete.1","RecentlyDeleted.Action.Delete.2","RecentlyDeleted.Action.Delete.More"],e)}}),sparseSelection:b.b(),medias:b.b(),staticMembers:{__QUALIFIED_CLASS_NAME__:"DeleteAllButton"}}),us=Ge.a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"VIEWOUTLET",tagname:"view",name:"recoverButton"},{type:"VIEWOUTLET",tagname:"view",name:"deleteButton"}]}},__QUALIFIED_CLASS_NAME__:"RecentlyDeletedActionButtonsView"},recoverButton:b.b({readOnly:!0,defaultValue:$.b(cs),downstreamBindings:{sparseSelection:"(owner).sparseSelection"}}),deleteButton:b.b({readOnly:!0,defaultValue:$.b(ls),downstreamBindings:{sparseSelection:"(owner).sparseSelection",medias:"(owner).medias"}}),sparseSelection:b.b(),medias:b.b()}),ds=n(1278),hs=ds.a.extend({staticMembers:{storageKey:"photos-ui"},selectionLimit:ds.a.numberProperty(1e3),uiPhotosGridFolderGutterDesktop:ds.a.numberProperty(46),uiPhotosGridFolderGutterCompact:ds.a.numberProperty(30),uiPhotosGridFolderGutterRegular:ds.a.numberProperty(50)}).create(),ps=n(1284),fs=function(){var e=v.a,t=function(t){var n=e.create();try{t(n.resolve.bind(n),n.reject.bind(n))}catch(e){n.reject(e)}return n};return t.all=e.all.bind(e),t.race=e.race.bind(e),t.resolve=e.resolve.bind(e),t.reject=e.reject.bind(e),t}();function gs(e){for(var t=e.length,n=t-1,i=null,r=null,a=0;a<t;a++){var s=e.objectAt(a),o=e.objectAt(n-a);if(null===i&&"item"===s.cellType&&(i=s),null===r&&"item"===o.cellType&&(r=o),null!==i&&null!==r)break}return{firstVisibleCell:i,lastVisibleCell:r}}function ms(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"date",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=e.getPath("value."+n);return r?new Date(r):new Date(t.bucketStart+i)}function vs(e,t,n,i){var r=n.buckets,a=n.bucketWidth;if(!(e&&t&&e.handle&&t.handle))return c.b.warn("Invalid cells provided to dateRangeForVisibleItems."),{};for(var s=e.handle.position,o=t.handle.position,l=void 0,u=void 0,d=0,h=r.length;d<h;d++){var p=r[d],f=d===h-1,g=p.startIndex+p.count;if(l||(f||s>=p.startIndex&&s<g)&&(l=ms(e,p,i)),f||o>p.startIndex&&o<=g){u=ms(t,p,i,a);break}}return{startDate:l,endDate:u}}function _s(e,t){if(!e||!t)return c.b.warn("Invalid dates for date range string."),"";var n=e<t?e:t,i=e<t?t:e,r=n.getMonth(),a=n.getFullYear(),s=i.getMonth(),o="Month.Year.Range.";return o+=a===i.getFullYear()?r===s?"Same.Month.Same.Year":"Diff.Month.Same.Year":"Diff.Year",y.d(o,{startDate:n,endDate:i,startDateFormatter:ps.a,endDateFormatter:ps.a})}var bs,ys,Is=(bs=regeneratorRuntime.mark(function e(t,n,i){var r,a,s,o,l,u,d,h,p,f,g,m,v=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"date";return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.container,a=t.layoutController,r&&a){e.next=4;break}return c.b.warn("Visible date range can only run on grid controllers."),e.abrupt("return");case 4:return e.next=6,r.loadHistogram();case 6:return s=r.histogram,o=void 0,l=void 0,n&&i&&n.handle&&i.handle?(o=n,l=i):(u=gs(a.visibleCells),d=u.firstVisibleCell,h=u.lastVisibleCell,o=d,l=h),p=vs(o,l,s,v),f=p.startDate,g=p.endDate,m=_s(f,g),e.abrupt("return",m);case 12:case"end":return e.stop()}},e,this)}),ys=function(){var e=bs.apply(this,arguments);return new fs(function(t,n){return function i(r,a){try{var s=e[r](a),o=s.value}catch(e){return void n(e)}if(!s.done)return fs.resolve(o).then(function(e){i("next",e)},function(e){i("throw",e)});t(o)}("next")})},function(e,t,n){return ys.apply(this,arguments)}),ws=(n(896),function(){var e=v.a,t=function(t){var n=e.create();try{t(n.resolve.bind(n),n.reject.bind(n))}catch(e){n.reject(e)}return n};return t.all=e.all.bind(e),t.race=e.race.bind(e),t.resolve=e.resolve.bind(e),t.reject=e.reject.bind(e),t}()),Ss=["","Grid.View.Header.Item.Count.1","Grid.View.Header.Item.Count.2","Grid.View.Header.Item.Count.More"],Cs=["","Grid.View.Header.NumberOfSelectedItems.1","Grid.View.Header.NumberOfSelectedItems.2","Grid.View.Header.NumberOfSelectedItems.More"],Os=["","Grid.View.Header.Album.Count.1","Grid.View.Header.Album.Count.2","Grid.View.Header.Album.Count.More"],As=["","Grid.View.Header.Folder.Count.1","Grid.View.Header.Folder.Count.2","Grid.View.Header.Folder.Count.More"],Es=2,Ts=Ge.a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"gridTitleView"}],classes:["grid-title-wrapper"]},{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"spinnerView"}],classes:["spinner-view-in-header"]},{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"selectionCount",attributes:{}}],classes:["selection-count"]},{type:"VIEWOUTLET",tagname:"view",name:"photoStack"}],classes:["selection-info",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isSelectionCountVisible",truevalue:"",falsevalue:"cw-hidden",attributes:{}}]},{type:"VIEWOUTLET",tagname:"view",name:"recentlyDeletedActions"}],classes:["top-row"]},{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"gridDescription",attributes:{escape:"false"}}],classes:["grid-description"]},{type:"VIEWOUTLET",tagname:"view",name:"deselectAll"}],classes:["bottom-row"]}]}},ITEM_COUNT_KEYS:Ss,SELECTION_COUNT_KEYS:Cs,MIN_SELECTED_ITEMS:Es,MIN_CONTAINER_LENGTH_TO_GENERATE_STATS:60,__QUALIFIED_CLASS_NAME__:"GridHeaderView"},additionalClassNames:_.a(["grid-header-view"]),gridTitleView:b.b({readOnly:!0,defaultValue:$.b(Ja),downstreamBindings:{title:"(owner).gridTitle",container:"(owner).container"}}),gridTitle:b.b({readOnly:!0,dependencies:["container","visibleDateRange","container.name","container.type"],get:function(){var e=this.container,t=this.visibleDateRange;if(e){var n=e.isMomentsAlbum,i=e.isAllPhotosAlbum,r=e.isPredefinedSmartAlbum,a=e.recordName,s=e.name;return n||i?t:r?y.d("Container.Title."+a):s}}}),gridDescription:b.b({readOnly:!0,dependencies:["container","container.medias.length","container.firstMediaByDate","container.lastMediaByDate","container.containers","container.containers.length"],get:function(){var e=this.container;if(e){if(e.isRecentlyDeletedAlbum){var t=this._itemCountString(),n=y.d("Grid.View.Header.Recently.Deleted.Note");return t?y.d("Grid.View.Header.Recently.Deleted.Description",{itemCount:t,note:n}):n}return e.isMomentsAlbum||e.isAllPhotosAlbum?this._gridDescriptionForMomentsOrAllPhotos():e.isFolder?this._gridDescriptionForFolders():this._gridDescriptionForAlbums()}}}),_itemCountString:function(){var e=this.container.medias;if(0!==e.length)return Object(os.c)(Ss,e.length)},_gridDescriptionForMomentsOrAllPhotos:function(){return this._itemCountString()},_gridDescriptionForAlbums:function(){var e=this.container,t=e.medias,n=e.firstMediaByDate,i=e.lastMediaByDate;if(0!==t.length){if(n&&i){var r=this._itemCountString(),a=_s(Ms(n.date),Ms(i.date));return y.d("Grid.View.Header.Album.Description",{monthYearRange:a,itemCount:r})}e.loadFirstAndLastMediasByDate()}},_gridDescriptionForFolders:function(){var e=this.container.containers,t=void 0===e?[]:e,n=t.length;if(n){if(n<=60){var i=0,r=0;if(t.forEach(function(e){e&&(i+=e.isFolder?0:1,r+=e.isFolder?1:0)}),i&&!r)return Object(os.c)(Os,i);if(!i&&r)return Object(os.c)(As,r);if(i&&r)return y.d("Grid.View.Header.Album.Folders.Count",{albumCount:Object(os.c)(Os,i),folderCount:Object(os.c)(As,r)})}return Object(os.c)(Ss,n)}},_visibleDateRangeObserver:W.f({inputs:["isAttached","scrollMinY","container","gridViewController.collection.contentsDidChange"],callback:function(e){var t,n=this;return(t=regeneratorRuntime.mark(function t(){var i,r,a,s,o,c,l,u;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return");case 2:if(i=n.container,r=n.gridViewController,a=n.shouldCalculateVisibleDateRange,i){t.next=5;break}return t.abrupt("return");case 5:if(a){t.next=7;break}return t.abrupt("return");case 7:if(s=r.layoutController.visibleCells,o=gs(s),c=o.firstVisibleCell,l=o.lastVisibleCell,u=i.isAllPhotosAlbum?"primaryAsset.addedDate":"date",c===n._previousFirstVisibleCell||l===n._previousLastVisibleCell){t.next=16;break}return t.next=13,Is(r,c,l,u);case 13:n.visibleDateRange=t.sent,n._previousFirstVisibleCell=c,n._previousLastVisibleCell=l;case 16:case"end":return t.stop()}},t,n)}),function(){var e=t.apply(this,arguments);return new ws(function(t,n){return function i(r,a){try{var s=e[r](a),o=s.value}catch(e){return void n(e)}if(!s.done)return ws.resolve(o).then(function(e){i("next",e)},function(e){i("throw",e)});t(o)}("next")})})()}}),_previousFirstVisibleCell:null,_previousLastVisibleCell:null,visibleDateRange:b.b(),shouldCalculateVisibleDateRange:b.b({readOnly:!0,dependencies:["container"],get:function(){var e=this.container;if(!e)return!1;if(e.isVirtualFolder)return!1;var t=e.recordName,n=e.constructor.PredefinedName;return[n.MOMENTS,n.PHOTOS].includes(t)}}),selectionCount:b.b({readOnly:!0,dependencies:["sparseSelection.length","isSelectionCountVisible"],get:Object.assign(function(){if(this.isSelectionCountVisible)return Object(os.c)(Cs,this.sparseSelection.length)},{__CW__getter:function(e,t,n,i){if(i.internalGet(this,t[1+n]))return Object(os.c)(Cs,i.internalGetPath(this,t[0+n]))}})}),isSelectionCountVisible:b.b({readOnly:!0,dependencies:["sparseSelection.length","container"],get:function(){var e=this.sparseSelection,t=this.container;return!(!e||t&&t.isRecentlyDeletedAlbum)&&Ds(e.length)}}),selectionLimit:b.b(hs.selectionLimit),photoStack:b.b({readOnly:!0,dependencies:["isSelectionCountVisible"],get:Object.assign(function(){if(this.isSelectionCountVisible)return this._photoStack},{__CW__getter:function(e,t,n,i){if(i.internalGet(this,t[0+n]))return this._photoStack}})}),_photoStack:b.b({readOnly:!0,get:function(){return ns.create({mediaProvider:this.bindingFor("sparseSelection.selection")})}}),deselectAll:b.b({readOnly:!0,dependencies:["sparseSelection.length"],get:Object.assign(function(){if(this.sparseSelection&&Ds(this.sparseSelection.length))return this._deselectAll},{__CW__getter:function(e,t,n,i){if(this.sparseSelection&&Ds(i.internalGetPath(this,t[0+n])))return this._deselectAll}})}),_deselectAll:b.b({readOnly:!0,get:function(){return xt.a.extend({additionalClassNames:_.a(["deselect-all"]),action:"gridHeaderDeselectAll",title:y.d("Grid.View.Header.Deselect.All.Title"),tooltip:y.d("Grid.View.Header.Deselect.All.Tooltip")}).create()}}),recentlyDeletedActions:b.b({readOnly:!0,dependencies:["container"],get:function(){var e=this.container;if(e&&e.isRecentlyDeletedAlbum)return this._recentlyDeletedActions}}),_recentlyDeletedActions:b.b({readOnly:!0,defaultValue:$.b(us),get:function(){return us.create({sparseSelection:this.bindingFor("sparseSelection"),medias:this.bindingFor("container.medias")})}}),container:b.b(),gridViewController:b.b(),scrollMinY:b.b(),sparseSelection:b.b(),shouldShowSpinnerInHeader:b.b(),spinnerView:b.b({readOnly:!0,dependencies:["shouldShowSpinnerInHeader"],get:Object.assign(function(){if(this.shouldShowSpinnerInHeader)return this._spinnerView},{__CW__getter:function(e,t,n,i){if(i.internalGet(this,t[0+n]))return this._spinnerView}})}),_spinnerView:$.b(Ka.a,{size:25,color:"rgba(120, 120, 120, 1)"})});function Ms(e){return e instanceof Date?e:new Date(e)}function Ds(e){return e>=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:Es)}n(894);var Ls=n(477),Ns=n(478),Ps=$a.TOOLBAR_HEIGHT,Rs=yi.extend(at.a).extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"VIEWOUTLET",tagname:"view",name:"headerView"},{type:"VIEWOUTLET",tagname:"view",name:"toolbarView"}],classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"headerView",truevalue:"has-grid-header",attributes:{}}]}},__QUALIFIED_CLASS_NAME__:"PhotosGridPageView"},additionalClassNames:_.a(["photos-grid-page"]),headerView:b.b({dependencies:["primaryInteractionMode"],readOnly:!0,strong:!0,type:Ts,get:Object.assign(function(){if(this.primaryInteractionMode===wt.a.MOUSE)return Ts.create({container:this.bindingFor("container"),gridViewController:this.bindingFor("gridViewController"),scrollMinY:this.bindingFor("scrollMinY"),sparseSelection:this.bindingFor("sparseSelection"),batchActionProgress:this.bindingFor("batchActionProgress"),shouldShowSpinnerInHeader:this.bindingFor("shouldShowSpinnerInHeader")})},{__CW__getter:function(e,t,n,i){if(i.internalGet(this,t[0+n])===wt.a.MOUSE)return Ts.create({container:this.bindingFor("container"),gridViewController:this.bindingFor("gridViewController"),scrollMinY:this.bindingFor("scrollMinY"),sparseSelection:this.bindingFor("sparseSelection"),batchActionProgress:this.bindingFor("batchActionProgress"),shouldShowSpinnerInHeader:this.bindingFor("shouldShowSpinnerInHeader")})}})}),toolbarView:b.b({dependencies:["isToolbarVisible"],readOnly:!0,strong:!0,type:$a,get:Object.assign(function(){if(this.isToolbarVisible||this._toolbarViewWasShown)return this._toolbarViewWasShown=!0,$a.create({additionalClassNames:["fixed-bottom","slides-up"],items:$.b(G.b,[za.create({icon:Ls,action:"shareSelectedPhotosAction",isDisabled:this.bindingFor("sharrowIconIsDisabled")}),za.create({icon:Ns,isDisabled:this.bindingFor("trashIconIsDisabled"),action:"deleteSelectedPhotosAction"})])})},{__CW__getter:function(e,t,n,i){if(i.internalGet(this,t[0+n])||this._toolbarViewWasShown)return this._toolbarViewWasShown=!0,$a.create({additionalClassNames:["fixed-bottom","slides-up"],items:$.b(G.b,[za.create({icon:Ls,action:"shareSelectedPhotosAction",isDisabled:this.bindingFor("sharrowIconIsDisabled")}),za.create({icon:Ns,isDisabled:this.bindingFor("trashIconIsDisabled"),action:"deleteSelectedPhotosAction"})])})}})}),_toolbarViewBottomPosition:at.b(-Ps),_toolbarViewWasShown:!1,_isToolbarVisibleObserver:W.f({inputs:["isToolbarVisible"],callback:function(e){this.animate("_toolbarViewBottomPosition",e?0:-Ps,150)}}),_toolbarViewBottomPositionObserver:W.f({inputs:["_toolbarViewBottomPosition"],callback:function(e){this.toolbarView&&(it.a(this.toolbarView.element,"bottom",e),it.a(this.element,"bottom",Ps+e),this.viewController.gridViewController.measureViewport())}}),container:b.b(),isToolbarVisible:b.b(),gridViewController:b.b(),primaryInteractionMode:b.b(),scrollMinY:b.b(),sparseSelection:b.b(),sharrowIconIsDisabled:b.b(),trashIconIsDisabled:b.b(),batchActionProgress:b.b(),shouldShowSpinnerInHeader:b.b()}),xs=n(400),Fs={areActionsAllowed:function(e){return Boolean(e&&e.length&&!Fs.isSelectionOverLimit(e))},isSelectionOverLimit:function(e){return Boolean(e&&e.length>hs.selectionLimit)},showSelectionLimitAlert:function(e){var t=hs.selectionLimit,n="Selection.Limit.Alert.Description."+e.value;y.a.sharedInstance.hasValue(n)||(n="Selection.Limit.Alert.Description.Generic"),mn.a.show({iconNames:["photos-icon","error"],message:y.d("Selection.Limit.Alert.Message"),description:y.d(n,{limit:Object(os.b)(t)}),primaryButton:{title:y.d("Alert.OK.Button.Title")}})}},ks=function(){var e=v.a,t=function(t){var n=e.create();try{t(n.resolve.bind(n),n.reject.bind(n))}catch(e){n.reject(e)}return n};return t.all=e.all.bind(e),t.race=e.race.bind(e),t.resolve=e.resolve.bind(e),t.reject=e.reject.bind(e),t}(),Vs=Je.b("UserActionType",{REMOVE:"Remove",DELETE:"Delete",EXPUNGE:"Expunge",FAVORITE:"Favorite",SHARE:"Share",DOWNLOAD:"Download",ADD_TO_ALBUM:"AddToAlbum",RECOVER:"Recover"}),js={mixinDependencies:[W.a],removeOrDeleteSelection:function(e,t,n){var i=Ar.a.sharedInstance.activeKeys;if(e&&e.length&&t){var r=function(e,t){if(e.isRecentlyDeletedAlbum)return Vs.EXPUNGE;if(e.isFolder)return Vs.EXPUNGE;var n=Ii.a.sharedInstance.isWindows?wi.a.CTRL:wi.a.OPTION;return t.contains(n)?Vs.DELETE:e.isNormalAlbum?Vs.REMOVE:Vs.DELETE}(t,i);if(Fs.isSelectionOverLimit(e))Fs.showSelectionLimitAlert(r);else if(!e.selection.some(function(e){return e&&X.a(e,Et.a)&&e.isPredefinedSmartAlbum})){var a={iconNames:["photos-icon"],primaryButton:{target:this,action:"_removeOrDeleteItemsForSelectionContext",context:{container:t,sparseSelection:e,removeType:r,alertViewController:n}},alternateButton:{title:y.d("Alert.Cancel.Button.Title")}};r!==Vs.DELETE&&r!==Vs.EXPUNGE||(a.iconNames.push("error"),a.primaryButton.additionalClassNames=_.a(["destructive"])),function(e){var t=e.primaryButton.context,n=t.sparseSelection,i=t.container,r=t.removeType,a=n.length,s=void 0,o=void 0,c=n.selection.filter(function(e){return X.a(e,bn.a)&&e.isPromotedFromBurst}).length,l=i.albumType.value===xs.a.NORMAL.value;c>0&&c===a&&!l?(s=["","Alert.Delete.Promoted.From.Burst.Message.1","Alert.Delete.Promoted.From.Burst.Message.More"],o=["","Alert.Delete.Photo.Description.1","Alert.Delete.Photo.Description.More"]):c>0&&!l?(s=["","","Alert.Delete.Some.Promoted.From.Burst.Message.More"],o=["","Alert.Delete.Photo.Description.1","Alert.Delete.Photo.Description.More"]):(s=["","Alert."+r.value+".Item.Message.1","Alert."+r.value+".Item.Message.More"],o=["","Alert."+r.value+".Item.Description.1","Alert."+r.value+".Item.Description.More"]);var u=y.d("Alert."+r.value+".Button.Title");e.message=Object(os.c)(s,a),e.description=Object(os.c)(o,a),e.primaryButton.title=u}(a),mn.a.show(a)}}},_removeOrDeleteItemsForSelectionContext:function(e){var t=this,n=e.context,i=n.sparseSelection,r=n.removeType,a=e.context.container,s=function(e){var t,n,i=e.sparseSelection,r=e.removeType,a=e.alertViewController,s=i.length;t=["","Alert."+r.value+".Item.Failed.Message.1","Alert."+r.value+".Item.Failed.Message.More"],n=["","Alert."+r.value+".Item.Failed.Description.1","Alert."+r.value+".Item.Failed.Description.More"],a.show({message:Object(os.c)(t,s),description:Object(os.c)(n,s),primaryButton:{title:y.d("Alert.OK.Button.Title")}})}.bind(null,e.context);return"VIRTUAL_FOLDER"===a.type&&(a=d.b().cplRootContainer),i.getFullyLoadedSelection(this).then(function(e){return r===Vs.DELETE?a.deleteItems(e):a.removeItems(e)}).then(function(){return t.sendEvent("updateSidebar")}).catch(s)},toggleFavoriteMediaAndSelection:function(e,t){var n,i=this;return(n=regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(e){n.next=2;break}return n.abrupt("return");case 2:if(!Fs.isSelectionOverLimit(t)){n.next=5;break}return Fs.showSelectionLimitAlert(Vs.FAVORITE),n.abrupt("return");case 5:if(r=!e.isFavorite,e.isFavorite=r,!(t&&t.length&&t.selection.contains(e))){n.next=12;break}return n.next=10,t.getFullyLoadedSelection(i);case 10:n.sent.forEach(function(e){e.isFavorite=r});case 12:d.b().commit();case 13:case"end":return n.stop()}},n,i)}),function(){var e=n.apply(this,arguments);return new ks(function(t,n){return function i(r,a){try{var s=e[r](a),o=s.value}catch(e){return void n(e)}if(!s.done)return ks.resolve(o).then(function(e){i("next",e)},function(e){i("throw",e)});t(o)}("next")})})()}},Bs=n(201),Us=function(){var e=v.a,t=function(t){var n=e.create();try{t(n.resolve.bind(n),n.reject.bind(n))}catch(e){n.reject(e)}return n};return t.all=e.all.bind(e),t.race=e.race.bind(e),t.resolve=e.resolve.bind(e),t.reject=e.reject.bind(e),t}(),Ws=Object(Bs.f)("Selection.Title."),Gs=Ua.extend({mixinDependencies:[_n,Be,Wa,js],viewClass:Rs,view:b.b({downstreamBindings:{container:"(owner).container",isToolbarVisible:"(owner).isToolbarVisible",primaryInteractionMode:"(owner).primaryInteractionMode",gridViewController:"(owner).gridViewController",scrollMinY:"(owner).scrollMinY",sparseSelection:"(owner).sparseSelection",sharrowIconIsDisabled:"(owner).sharrowIconIsDisabled",trashIconIsDisabled:"(owner).isEmptySelection",shouldShowSpinnerInHeader:"(owner).shouldShowSpinnerInHeader"}}),gridViewController:Jt.b({defaultValue:$.b(Va.extend({itemViewClass:_.a({mixinDependencies:[Sn],videoDurationAdornment:vn.adornmentProperty(Wn),errorAdornment:vn.adornmentProperty(Hn),audioAdornment:vn.adornmentProperty(zn),panoramaAdornment:vn.adornmentProperty(Kn),gestureRecognizerShouldReceive:function(e){var t=arguments;return!!this.media&&this.__s._$rO$gestureRecognizerShouldReceive.apply(this,t)},layoutMetrics:_.a({hasHeaders:!1,headerHeight:0,sectionBottomPadding:0}),__superMap:{_$rO$gestureRecognizerShouldReceive:"gestureRecognizerShouldReceive"}}),layoutMetrics:_.a(Ga),container:b.b(),owner:b.b()})),downstreamBindings:{container:"(owner).container",isSelectionEnabled:"(owner).selectionModeIsActive",primaryInteractionMode:"(owner).primaryInteractionMode"},strong:!0,readOnly:!0,viewOutlet:"photosGridView"}),navItem:b.b({readOnly:!0,strong:!0,type:Ha,get:function(){return Ha.create({title:this.bindingFor("computedNavTitle"),selectionButtonClassName:this.bindingFor("selectionButtonClassName"),selectionButtonTitle:this.bindingFor("selectionButtonTitle"),selectionModeIsActive:this.bindingFor("selectionModeIsActive"),viewController:this})}}),isToolbarVisible:b.b({dependencies:["primaryInteractionMode","selectionModeIsActive"],readOnly:!0,type:Boolean,get:function(){var e=this.primaryInteractionMode,t=this.selectionModeIsActive;return e===wt.a.TOUCH&&!0===t}}),_selectionModeIsActive:b.b(),selectionModeIsActive:b.b({defaultValue:!1,dependencies:["_selectionModeIsActive","primaryInteractionMode"],writeDependencies:["_selectionModeIsActive"],type:Boolean,get:Object.assign(function(){return this.primaryInteractionMode===wt.a.MOUSE||this._selectionModeIsActive},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[1+n])===wt.a.MOUSE||i.internalGet(this,t[0+n])}}),set:Object.assign(function(e){this._selectionModeIsActive=e},{__CW__setter:function(e,t,n,i,r){n[0+i]=e}}),writeDependencySetPathMap:["false"]}),scrollMinY:b.b(Gt.c("gridViewController.view.scrollMinY")),selection:b.b(Gt.c("gridViewController.selectionController.selection")),sparseSelection:b.b(Gt.c("gridViewController.selectionController.sparseSelection")),selectedIndices:b.b(Gt.c("gridViewController.selectionController.selectedIndices")),sharrowIconIsDisabled:b.b({readOnly:!0,dependencies:["isEmptySelection","iCloudPhotoLibraryWasExited"],get:Object.assign(function(){return!this.iCPLEnabled||this.iCloudPhotoLibraryWasExited||this.isEmptySelection},{__CW__getter:function(e,t,n,i){return!this.iCPLEnabled||i.internalGet(this,t[1+n])||i.internalGet(this,t[0+n])}})}),isEmptySelection:b.b({readOnly:!0,dependencies:["selectedItemCount"],get:Object.assign(function(){return 0===this.selectedItemCount},{__CW__getter:function(e,t,n,i){return 0===i.internalGet(this,t[0+n])}})}),selectedItemCount:b.b({readOnly:!0,dependencies:["sparseSelection.length"],get:Object.assign(function(){return this.sparseSelection.length},{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])}})}),selectionButtonTitle:b.b({readOnly:!0,dependencies:["selectionModeIsActive"],get:Object.assign(function(){return this.selectionModeIsActive?y.d("Button.Cancel"):y.d("Button.Select")},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?y.d("Button.Cancel"):y.d("Button.Select")}})}),selectionButtonClassName:b.b({readOnly:!0,strong:!0,dependencies:["selectionModeIsActive"],get:Object.assign(function(){return this.selectionModeIsActive?"primary":void 0},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?"primary":void 0}})}),navTitle:b.b({defaultValue:"",type:String}),computedNavTitle:b.b({readOnly:!0,dependencies:["navTitle","selectionModeIsActive","selectedItemCount"],get:Object.assign(function(){if(!this.selectionModeIsActive)return this.navTitle;if(0===this.selectedItemCount)return y.d("Selection.Title.Empty");var e=this._getPhotoAndVideoCountFromSelection(),t=e.photosCount,n=e.videosCount;return Object(Bs.e)(this.selectedItemCount,t,n,Ws)},{__CW__getter:function(e,t,n,i){if(!i.internalGet(this,t[1+n]))return i.internalGet(this,t[0+n]);if(0===i.internalGet(this,t[2+n]))return y.d("Selection.Title.Empty");var r=this._getPhotoAndVideoCountFromSelection(),a=r.photosCount,s=r.videosCount;return Object(Bs.e)(i.internalGet(this,t[2+n]),a,s,Ws)}})}),_getPhotoAndVideoCountFromSelection:function(){for(var e=this.gridViewController.selection.encodedToArray(),t=0,n=0,i=0;i<e.length;i++){var r=bn.a.getDataHashForPrimaryKey(e[i]),a=yn.a.getDataHashForPrimaryKey(r.master);a.dataClassType===In.a.IMAGE.value?t++:a.dataClassType===In.a.MOVIE.value&&n++}return{photosCount:t,videosCount:n}},gridHeaderDeselectAll:function(){this.gridViewController.deselectAll()},toggleSelectionMode:function(){this.selectionModeIsActive=!this.selectionModeIsActive},deleteSelectedPhotosAction:function(){var e,t=this;return(e=regeneratorRuntime.mark(function e(){var n,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isEmptySelection){e.next=2;break}return e.abrupt("return");case 2:n=t.sparseSelection,i=t.container,t.removeOrDeleteSelection(n,i,mn.a);case 4:case"end":return e.stop()}},e,t)}),function(){var t=e.apply(this,arguments);return new Us(function(e,n){return function i(r,a){try{var s=t[r](a),o=s.value}catch(e){return void n(e)}if(!s.done)return Us.resolve(o).then(function(e){i("next",e)},function(e){i("throw",e)});e(o)}("next")})})()},dataManager:b.b(function(){return d.b()}),transactionProcessor:b.b(Gt.c("dataManager.transactionProcessor")),shouldShowSpinnerInHeader:b.b({readOnly:!0,dependencies:["sparseSelection.loadsInProgress","transactionProcessor.progressTrackedPendingTransactions.length","transactionProcessor.progressTrackedCompletedTransactions.length"],get:function(){var e=this.sparseSelection,t=this.transactionProcessor,n=t.progressTrackedPendingTransactions.length,i=t.progressTrackedCompletedTransactions.length;return e.loadsInProgress>0&&e.loadsInProgress<=Qn.a.maxOperationsInSingleRequest||1===n&&0===i}}),container:b.b(),primaryInteractionMode:b.b(),shareSelectedPhotosAction:Z.a,staticMembers:{__QUALIFIED_CLASS_NAME__:"PhotosGridPageViewController"}}),Hs=(n(991),n(151)),$s=Ge.a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"assetCountString",attributes:{}}],classes:["total"]},{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"lastUpdatedString",attributes:{}}],classes:["last-updated"]}]}},className:"asset-count-view",__QUALIFIED_CLASS_NAME__:"AssetCountView"},libraryInfo:b.b(),dataManager:b.b({readOnly:!0,strong:!0,get:function(){return d.b()}}),assetCountShouldIncludeHiddenItems:b.b(!1),assetCountString:b.b({dependencies:["assetCountShouldIncludeHiddenItems","libraryInfo","libraryInfo.photosCount","libraryInfo.audiosCount","libraryInfo.videosCount","libraryInfo.othersCount"],readOnly:!0,get:function(){var e=this.assetCountShouldIncludeHiddenItems,t=this.libraryInfo;return void 0===t?"":Object(Bs.d)(t,0,e)}}),lastUpdatedString:b.b({readOnly:!0,dependencies:["assetCountString","dataManager.cplZone.syncTokenLastUpdated"],get:Object.assign(function(){return this.assetCountString?y.d("Status.LastUpdated",{lastUpdated:Object(os.a)(this.dataManager.cplZone.syncTokenLastUpdated,Hs.a.SHORT_TIME)}):""},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?y.d("Status.LastUpdated",{lastUpdated:Object(os.a)(i.internalGetPath(this,t[1+n]),Hs.a.SHORT_TIME)}):""}})})}),zs={presenter:_.a({viewClassKeysByCellType:_.a({assetCountItem:"assetCountItemViewClass"}),assetCountItemViewClass:$s,viewForViewClass:function(e){var t=arguments;return e===this.assetCountItemViewClass?$s.create({libraryInfo:this.bindingFor("owner.libraryInfo"),assetCountShouldIncludeHiddenItems:this.bindingFor("owner.assetCountShouldIncludeHiddenItems")}):this.__s._$Ca$viewForViewClass.apply(this,t)},__superMap:{_$Ca$viewForViewClass:"viewForViewClass"}}),assetCountShouldIncludeHiddenItems:b.b(!1),layoutMetrics:_.a({assetCountFooterHeight:100,bottomPadding:0,sectionBottomPadding:0}),libraryInfo:b.b(),layoutDelegate:_.a({sizeKeyByCellType:_.a({assetCountItem:"getAssetCountItemItemSize"}),getAssetCountItemItemSize:function(e,t){return Ci.a.create(e.viewportWidth,e.layoutMetrics.assetCountFooterHeight)},cellClassKeysByCellType:_.a({assetCountItem:"assetCountCellClass"}),assetCountCellClass:Yi.a.extend({handle:"assetCountItem",isReusable:!1}),completeVisibleCells:function(e,t,n,i){var r=arguments;this.__s._$bS$completeVisibleCells.apply(this,r);var a=this.bottomMostItem(e,n);if(a&&a.handle.position===a.handle.maximumPosition){var s=a.bottom+this.spaceBelowCell(e,a)-e.layoutMetrics.assetCountFooterHeight;if(s>e.viewportHeight)return;var o=this.cellForHandle(null,"assetCountItem");o.retain(),o.value=t,this.layOutCellInDirection(e,o,1,s),n.push(o),o.release()}},spaceBelowCell:function(e){var t=arguments;return this.__s._$xk$spaceBelowCell.apply(this,t)+e.layoutMetrics.assetCountFooterHeight},__superMap:{_$bS$completeVisibleCells:"completeVisibleCells",_$xk$spaceBelowCell:"spaceBelowCell"}})},Ks=n(1240),Qs=(n(997),Ge.a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"VIEWOUTLET",tagname:"view",name:"photosOneUpView"}]}},className:"base-photos-oneup-container-view",__QUALIFIED_CLASS_NAME__:"BasePhotosOneUpContainerView"}})),qs=n(1141),Ys=(n(999),Ge.a.extend(qs.a,{staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"checkmarkView"}],classes:["scou-badge-view",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isHidden",truevalue:"cw-hidden",attributes:{}}]},__QUALIFIED_CLASS_NAME__:"SelectionCheckmarkOneUpBadgeView"},isSelected:b.b(),isHidden:b.b(),checkmarkView:b.b({readOnly:!0,strong:!0,dependencies:["isHidden"],get:Object.assign(function(){if(!this.isHidden)return this._checkmarkButton},{__CW__getter:function(e,t,n,i){if(!i.internalGet(this,t[0+n]))return this._checkmarkButton}})}),media:b.b(),descriptor:b.b({readOnly:!0,dependencies:["media"],get:function(){var e=this.media;if(e)return e.genericType===bn.a.Type.VIDEO?"Video":e.genericType===bn.a.Type.IMAGE?"Photo":"Other"}}),_checkmarkButton:b.b({readOnly:!0,strong:!0,get:function(){return xt.a.extend(Nr.a,{isSelected:b.b(),descriptor:b.b(),tooltip:b.b({readOnly:!0,dependencies:["isSelected","descriptor"],get:function(){var e=this.isSelected,t=this.descriptor;return e?y.d("SelectionCheckmark.Deselect."+t):y.d("SelectionCheckmark.Select."+t)}})}).create({additionalClassNames:["expanded-touch-target"],icon:Pr,action:"toggleIsSelected"})},downstreamBindings:{isSelected:"(owner).isSelected",descriptor:"(owner).descriptor"}}),_isSelectedObserver:W.f({inputs:["isSelected"],callback:function(e){Ur(this._checkmarkButton.svgContainer,e)}})})),Zs=function(){var e=v.a,t=function(t){var n=e.create();try{t(n.resolve.bind(n),n.reject.bind(n))}catch(e){n.reject(e)}return n};return t.all=e.all.bind(e),t.race=e.race.bind(e),t.resolve=e.resolve.bind(e),t.reject=e.reject.bind(e),t}(),Js=Ve.a.extend(qn,{viewClass:Qs,media:b.b({strong:!0}),container:b.b({strong:!0,didChange:function(e){var t,n=this;return(t=regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.load();case 4:n.containerDidUpdate(e);case 5:case"end":return t.stop()}},t,n)}),function(){var e=t.apply(this,arguments);return new Zs(function(t,n){return function i(r,a){try{var s=e[r](a),o=s.value}catch(e){return void n(e)}if(!s.done)return Zs.resolve(o).then(function(e){i("next",e)},function(e){i("throw",e)});t(o)}("next")})})()}}),collection:b.b({strong:!0,readOnly:!0,get:function(){return bi.create()},downstreamBindings:{container:"(owner).container"}}),primaryInteractionMode:b.b(),hostedByCloudOSOne:b.b(!1),customPresenterViewModifications:b.b({readOnly:!0,get:function(){return{containerViewController:b.b(this),bottomRightBadgeViewClasses:_.a([Ys.extend({isSelected:Gt.c("presenterView.isSelected"),isHidden:Gt.c("presenterView.isSelectionBadgeHidden"),media:Gt.c("presenterView.media")})]),isSelectionBadgeHidden:b.b({readOnly:!0,dependencies:["containerViewController.oneUpSelectionIsAllowed"],get:Object.assign(function(){return!this.getPath("containerViewController.oneUpSelectionIsAllowed")},{__CW__getter:function(e,t,n,i){return!i.internalGetPath(this,t[0+n])}})}),isSelected:b.b({readOnly:!0,dependencies:["media","containerViewController","containerViewController.isAttached"],get:Object.assign(function(){return this.containerViewController.getSelectedStateForMedia(this.media)},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[1+n]).getSelectedStateForMedia(i.internalGet(this,t[0+n]))}})}),toggleIsSelected:function(){this.nextResponder.sendEvent("toggleIsSelected",this)}}}}),oneUpViewController:Jt.b({strong:!0,viewOutlet:"photosOneUpView",defaultValue:$.b(Ks.a),downstreamBindings:{collection:"(owner).collection",media:"(owner).media",primaryInteractionMode:"(owner).primaryInteractionMode",shouldHideMostProminentDisplayOfMediaWithPK:"(owner).shouldHideMostProminentDisplayOfMediaWithPK",customPresenterViewModifications:"(owner).customPresenterViewModifications"}}),containerDidUpdate:function(){},getPrimaryZoomRectableMedia:function(){return this.media},getRectInWindowForPrimaryZoomRectableMedia:function(e){var t=this.oneUpViewController,n=t.getPath("view.desiredMediaView");if(n&&n.media===e){var i=t.view.rect;return{left:i.left+n.imageLeft,top:i.top+n.imageTop,width:n.imageWidth,height:n.imageHeight}}},_remaskThumbstrip:W.e("zoomTransitionValue",function(e){var t=this.getPath("oneUpViewController.view.thumbnailsStripView");if(t){var n=1-e;n=Math.min(1,2*n-.5),t.style.set("clip-path","inset("+100*n+"% 0px 0px 0px)"),I.a.sharedInstance.isSafari&&t.style.set("-webkit-clip-path","inset("+100*n+"% 0px 0px 0px)")}}),zoomTransitionDidFinish:function(){var e=arguments,t=this.getPath("oneUpViewController.view.thumbnailsStripView");if(!t)return this.__s._$246$zoomTransitionDidFinish.apply(this,e);t.style.clear("clip-path"),I.a.sharedInstance.isSafari&&t.style.clear("-webkit-clip-path"),this.__s._$246$zoomTransitionDidFinish.apply(this,e)},selectionDelegate:b.b(),oneUpSelectionIsAllowed:b.b(),getSelectedStateForMedia:function(e){var t=this.selectionDelegate;return!(!t||!e)&&t.selection.contains(e)},setSelectedStateForMedia:function(e,t){var n=this.selectionDelegate,i=this.collection;if(!n||!e)return!1;var r=i.handleFor(e);return!!r&&(t?n.selectItem({handle:r}):n.deselectItem({handle:r}),t)},toggleIsSelected:function(e){e&&e.media&&(this.setSelectedStateForMedia(e.media,!e.isSelected),e.propertyChanged("isSelected"))},measureViewport:function(){this.oneUpViewController.view.measureViewport()},__superMap:{_$246$zoomTransitionDidFinish:"zoomTransitionDidFinish"},staticMembers:{__QUALIFIED_CLASS_NAME__:"BasePhotosOneUpContainerViewController"}}),Xs=(n(308),M.a.extend(W.a,{staticMembers:{bindingFiringEverySecond:function(){return this.bindingFiringEvery(1e3)},bindingFiringEvery:function(e){return e<1e3&&r.b("Permanent interval of "+e+"ms is prohibitively rapid."),(eo[e]=eo[e]||Xs.create(e)).bindingFor("signal")},__QUALIFIED_CLASS_NAME__:"Heartbeat"},signal:W.g(),init:function(e){this.__s._$Mi$init.call(this),a.a(this.signal.bind(this),e)},__superMap:{_$Mi$init:"init"}})),eo={};function to(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()}var no=M.a.extend(W.a,re.a,{_previousDate:null,_previousTimezoneOffset:null,init:function(){var e=arguments;this._previousDate=this._getDate(),this._previousTimezoneOffset=this._previousDate.getTimezoneOffset(),this._previousDate.setHours(0,0,0,0),this.__s._$8f$init.apply(this,e)},_secondDidChange:W.f(Xs.bindingFiringEverySecond(),function(){var e=this._getDate();e.setHours(0,0,0,0);var t=e.getTimezoneOffset(),n=!1;Number(e)!==Number(this._previousDate)?(this.propertyChanged("today"),n=!0):this._previousTimezoneOffset!==t&&(n=!0),n&&this.dateOrTimezoneDidChange(),this._previousDate=e,this._previousTimezoneOffset=t}),dateOrTimezoneDidChange:W.g(),_getDate:function(){return new Date},today:b.b({readOnly:!0,get:function(){return this._getDate()}}),yesterday:b.b({readOnly:!0,dependencies:["today"],get:Object.assign(function(){var e=this.today,t=new Date(e);return t.setDate(t.getDate()-1),t.setHours(0,0,0,0),t},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=new Date(r);return a.setDate(a.getDate()-1),a.setHours(0,0,0,0),a}})}),tomorrow:b.b({readOnly:!0,dependencies:["today"],get:Object.assign(function(){var e=this.today,t=new Date(e);return t.setDate(t.getDate()+1),t.setHours(0,0,0,0),t},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=new Date(r);return a.setDate(a.getDate()+1),a.setHours(0,0,0,0),a}})}),endOfTomorrow:b.b({readOnly:!0,dependencies:["tomorrow"],get:Object.assign(function(){var e=this.tomorrow,t=new Date(e);return t.setHours(23,56,56,999),t},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=new Date(r);return a.setHours(23,56,56,999),a}})}),lastWeek:b.b({readOnly:!0,dependencies:["today"],get:Object.assign(function(){var e=this.today,t=new Date(e),n=parseInt(y.d("Date.Range.Days.Prior.For.Days.Of.The.Week"),10);return t.setDate(t.getDate()-n),t.setHours(0,0,0,0),t},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=new Date(r),s=parseInt(y.d("Date.Range.Days.Prior.For.Days.Of.The.Week"),10);return a.setDate(a.getDate()-s),a.setHours(0,0,0,0),a}})}),isToday:function(e){return to(e,this.get("today"))},isTomorrow:function(e){return to(e,this.get("tomorrow"))},isYesterday:function(e){return to(e,this.get("yesterday"))},isColloquial:function(e){return function(e,t,n){return e>=t&&e<=n}(e,Math.min(this.get("lastWeek"),this.get("yesterday")),this.get("endOfTomorrow"))},colloquialLocKey:function(e){return this.isToday(e)?"Today":this.isTomorrow(e)?"Tomorrow":this.isYesterday(e)?"Yesterday":"Day.Of.Week"},__superMap:{_$8f$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"RelativeDates"}}),io={dateString:"",timeString:""},ro={date:null,dateFormatter:ps.a},ao=M.a.extend(W.a,{locKeys:null,date:b.b({type:Date}),_relativeDates:b.b(no.sharedInstance),dateIsColloquial:b.b({readOnly:!0,type:Boolean,dependencies:["date","_relativeDates.dateOrTimezoneDidChange"],get:Object.assign(function(){return this._relativeDates.isColloquial(this.date)},{__CW__getter:function(e,t,n,i){return this._relativeDates.isColloquial(i.internalGet(this,t[0+n]))}})}),_dateLocKey:b.b({readOnly:!0,type:"string",dependencies:["date","dateIsColloquial","_relativeDates.today","_relativeDates.dateOrTimezoneDidChange"],get:Object.assign(function(){var e=this._relativeDates,t=this.date;return t?this.dateIsColloquial?e.colloquialLocKey(t):t.getFullYear()===e.today.getFullYear()?"Date":"DateWithYear":""},{__CW__getter:function(e,t,n,i){var r=this._relativeDates,a=i.internalGet(this,t[0+n]);return a?i.internalGet(this,t[1+n])?r.colloquialLocKey(a):a.getFullYear()===r.today.getFullYear()?"Date":"DateWithYear":""}})}),dateString:b.b({readOnly:!0,type:"string",dependencies:["date","_dateLocKey","_relativeDates.dateOrTimezoneDidChange"],get:Object.assign(function(){var e=this._dateLocKey,t=this.date;if(!t)return"";if(this.dateIsColloquial)return ro.date=t,y.d(this.locKeys[e],ro);var n;return n="Date"===e?{month:"long",day:"numeric",timeZone:"UTC"}:ze.a(Hs.a.LONG_DATE,{timeZone:"UTC"}),Object(os.a)(t,n)},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[1+n]),a=i.internalGet(this,t[0+n]);if(!a)return"";if(this.dateIsColloquial)return ro.date=a,y.d(this.locKeys[r],ro);var s;return s="Date"===r?{month:"long",day:"numeric",timeZone:"UTC"}:ze.a(Hs.a.LONG_DATE,{timeZone:"UTC"}),Object(os.a)(a,s)}})}),shortDateString:b.b({readOnly:!0,type:"string",dependencies:["date","_dateLocKey","dateIsColloquial","_relativeDates.dateOrTimezoneDidChange"],get:Object.assign(function(){var e=this._dateLocKey,t=this.date;if(!t)return"";if(this.dateIsColloquial)return ro.date=t,y.d(this.locKeys[e],ro);var n;return n="Date"===e?{month:"short",day:"numeric",timeZone:"UTC"}:ze.a(Hs.a.MEDIUM_DATE,{timeZone:"UTC"}),Object(os.a)(t,n)},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[1+n]),a=i.internalGet(this,t[0+n]);if(!a)return"";if(i.internalGet(this,t[2+n]))return ro.date=a,y.d(this.locKeys[r],ro);var s;return s="Date"===r?{month:"short",day:"numeric",timeZone:"UTC"}:ze.a(Hs.a.MEDIUM_DATE,{timeZone:"UTC"}),Object(os.a)(a,s)}})}),timeString:b.b({readOnly:!0,dependencies:["date","_relativeDates.dateOrTimezoneDidChange"],get:Object.assign(function(){var e=this.date;if(!e)return"";var t=ze.a(Hs.a.SHORT_TIME,{timeZone:"UTC"});return Object(os.a)(e,t)},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);if(!r)return"";var a=ze.a(Hs.a.SHORT_TIME,{timeZone:"UTC"});return Object(os.a)(r,a)}})}),dateTimeString:b.b({readOnly:!0,dependencies:["dateString","timeString","_relativeDates.dateOrTimezoneDidChange"],get:Object.assign(function(){var e=this.timeString,t=this.dateString;return t&&e?(io.dateString=t,io.timeString=e,y.d(this.locKeys.DateAndTime,io)):""},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[1+n]),a=i.internalGet(this,t[0+n]);return a&&r?(io.dateString=a,io.timeString=r,y.d(this.locKeys.DateAndTime,io)):""}})}),shortDateTimeString:b.b({readOnly:!0,dependencies:["shortDateString","timeString","_relativeDates.dateOrTimezoneDidChange"],get:Object.assign(function(){var e=this.timeString,t=this.shortDateString;return t&&e?(io.dateString=t,io.timeString=e,y.d(this.locKeys.DateAndTime,io)):""},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[1+n]),a=i.internalGet(this,t[0+n]);return a&&r?(io.dateString=a,io.timeString=r,y.d(this.locKeys.DateAndTime,io)):""}})}),staticMembers:{__QUALIFIED_CLASS_NAME__:"FormattedDate"}}),so=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},oo={DateWithYear:"Navbar.OneUp.Title.DateWithYear",Date:"Navbar.OneUp.Title.Date",Today:"Date.Range.Same.Day.Today",Tomorrow:"Date.Range.Same.Day.Tomorrow",Yesterday:"Date.Range.Same.Day.Yesterday","Day.Of.Week":"Navbar.OneUp.Title.Date.Day.Of.Week",DateShort:"Navbar.OneUp.Title.DateShort",DateWithYearShort:"Navbar.OneUp.Title.DateWithYearShort",Time:"Navbar.OneUp.Title.Time",TimeShort:"Navbar.OneUp.Title.TimeShort",DateAndTime:"Navbar.OneUp.Title.DateAndTime"},co=so({},Hs.a.MEDIUM_DATE,{timeZone:"UTC"}),lo=so({},Hs.a.SHORT_DATE,{timeZone:"UTC"}),uo=so({},Hs.a.MEDIUM_TIME,{timeZone:"UTC"}),ho=so({},Hs.a.LONG_DATE,{timeZone:"UTC"}),po={media:b.b(),collection:b.b(),primaryInteractionMode:b.b(),p2ToolbarSizeMode:b.b(4),formattedDate:b.b({readOnly:!0,strong:!0,get:function(){return ao.create({locKeys:oo,date:this.bindingFor("mediaDate")})}}),mediaDate:b.b({readOnly:!0,dependencies:["media.date","media.timeZoneOffset"],get:function(){var e=this.media;if(e){var t=e.date;if("number"==typeof t){var n=e.timeZoneOffset;return n&&(t+=1e3*n),new Date(t)}}}}),navbarTitle:b.b({readOnly:!0,dependencies:["primaryInteractionMode","titleForMouse","titleForTouch"],get:Object.assign(function(){return this.primaryInteractionMode===wt.a.TOUCH?this.titleForTouch:this.titleForMouse},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])===wt.a.TOUCH?i.internalGet(this,t[2+n]):i.internalGet(this,t[1+n])}})}),titleForMouse:b.b({readOnly:!0,dependencies:["media.caption","mediaDate","p2ToolbarSizeMode"],get:Object.assign(function(){var e=this.media,t=this.mediaDate;if(e){var n=e.caption;if(n)return n;if(t){var i=ze.a(Hs.a.LONG_DATE,{timeZone:"UTC"}),r=ze.a(Hs.a.MEDIUM_TIME,{timeZone:"UTC"}),a=Object(os.a)(t,i),s=Object(os.a)(t,r);return this.p2ToolbarSizeMode<=2?""+a:a+", "+s}}return""},{__CW__getter:function(e,t,n,i){var r=this.media,a=this.mediaDate;if(r){var s=r.caption;if(s)return s;if(a){var o=ze.a(Hs.a.LONG_DATE,{timeZone:"UTC"}),c=ze.a(Hs.a.MEDIUM_TIME,{timeZone:"UTC"}),l=Object(os.a)(a,o),u=Object(os.a)(a,c);return i.internalGet(this,t[2+n])<=2?""+l:l+", "+u}}return""}})}),titleForTouch:b.b({readOnly:!0,dependencies:["formattedDate.dateString"],get:Object.assign(function(){return this.formattedDate.dateString},{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])}})}),navbarSubtitle:b.b({readOnly:!0,dependencies:["primaryInteractionMode","subtitleForTouch","subtitleForMouse"],get:Object.assign(function(){return this.primaryInteractionMode===wt.a.TOUCH?this.subtitleForTouch:this.subtitleForMouse},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])===wt.a.TOUCH?i.internalGet(this,t[1+n]):i.internalGet(this,t[2+n])}})}),subtitleForMouse:b.b({readOnly:!0,dependencies:["media.caption","mediaDate","mediaIndexInCollection","collection.length","p2ToolbarSizeMode"],get:Object.assign(function(){var e=this.media,t=this.p2ToolbarSizeMode,n=this.mediaDate,i=this.collection;if(!e||!i)return"";var r=this.mediaIndexInCollection+1,a=i.length,s=a<1||r<1;if(e.caption&&n){var o,c=Object(os.a)(n,ho),l=Object(os.a)(n,co),u=Object(os.a)(n,lo),d=Object(os.a)(n,uo);return o=t>2?c+", "+d:2===t?c:1===t?l:u,s?o:y.d("Navbar.OneUp.Title.Subtitle.DateAndPosition",{date:o,position:Object(os.b)(r),total:Object(os.b)(a)})}return s?"":y.d("Navbar.OneUp.Title.Subtitle.PositionOnly",{position:Object(os.b)(r),total:Object(os.b)(a)})},{__CW__getter:function(e,t,n,i){var r=this.media,a=this.p2ToolbarSizeMode,s=this.mediaDate,o=this.collection;if(!r||!o)return"";var c=i.internalGet(this,t[2+n])+1,l=o.length,u=l<1||c<1;if(r.caption&&s){var d,h=Object(os.a)(s,ho),p=Object(os.a)(s,co),f=Object(os.a)(s,lo),g=Object(os.a)(s,uo);return d=a>2?h+", "+g:2===a?h:1===a?p:f,u?d:y.d("Navbar.OneUp.Title.Subtitle.DateAndPosition",{date:d,position:Object(os.b)(c),total:Object(os.b)(l)})}return u?"":y.d("Navbar.OneUp.Title.Subtitle.PositionOnly",{position:Object(os.b)(c),total:Object(os.b)(l)})}})}),subtitleForTouch:b.b({readOnly:!0,dependencies:["formattedDate.timeString"],get:Object.assign(function(){return this.formattedDate.timeString},{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])}})}),mediaIndexInCollection:b.b({readOnly:!0,dependencies:["media","collection","collection.length","collection.contentsDidChange"],get:function(){var e=this.media,t=this.collection;return e&&t?t.indexOf(e):-1}}),valueDidChange:W.g(),_signalValueDidChange:W.f({inputs:["media.caption","formattedDate.dateTimeString","mediaIndexInCollection","collection.length"],callback:function(){this.valueDidChange()}})},fo=(n(1015),Qs.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"VIEWOUTLET",tagname:"view",name:"toolbarView"}],classes:["photos-oneup-with-toolbar"]}},__QUALIFIED_CLASS_NAME__:"PhotosOneUpWithToolbarView"},toolbarView:b.b({readOnly:!0,strong:!0,dependencies:["hasBottomToolbar"],get:Object.assign(function(){if(this.hasBottomToolbar)return this._bottomToolbarView},{__CW__getter:function(e,t,n,i){if(i.internalGet(this,t[0+n]))return this._bottomToolbarView}})}),_bottomToolbarView:b.b({readOnly:!0,strong:!0,get:function(){return $a.create({additionalClassNames:this.bindingFor("toolbarAdditionalClassNames"),items:this.bindingFor("toolbarButtons")})}}),hasBottomToolbar:b.b(),toolbarButtons:b.b(),toolbarAdditionalClassNames:b.b(["fixed-bottom"]),_remeasureWhenAppropriate:W.f("hasBottomToolbar","photosOneUpView",function(e,t){this.element.classList.toggle("has-bottom-toolbar",e),t&&t.measureViewport()})})),go=n(1178),mo=ds.a.extend({staticMembers:{storageKey:"photos-oneup-kit"},maxDerivativeZoomSizeTouch:ds.a.numberProperty(600),maxDerivativeZoomSizeMouse:ds.a.numberProperty(2048)}).create(),vo=(n(1013),Ge.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",name:"southeastClipper",styles:{width:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"contentNaturalWidth",attributes:{},unit:"px",property:"width"},height:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"contentNaturalHeight",attributes:{},unit:"px",property:"height"}}}],name:"northwestClipper",styles:{width:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"contentNaturalWidth",attributes:{},unit:"px",property:"width"},height:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"contentNaturalHeight",attributes:{},unit:"px",property:"height"}}}],classes:["fast-floating-crop-container-view"]},__QUALIFIED_CLASS_NAME__:"FastFloatingCropContainerView"},contentElement:b.b({didChange:function(e){var t=this._lastContentElement;this._lastContentElement=e;var n=this.southeastClipper;t&&t.parentNode===n&&(n.removeChild(t),Mn.b.releaseInstance(t)),e&&(n.appendChild(e),Mn.b.retainInstance(e))}}),x:b.b(),y:b.b(),width:b.b(),height:b.b(),contentNaturalWidth:b.b({readOnly:!0,dependencies:["contentElement"],get:function(){var e=this.contentElement;if(e)return e.naturalWidth||e.width||e.offsetWidth}}),contentNaturalHeight:b.b({readOnly:!0,dependencies:["contentElement"],get:function(){var e=this.contentElement;if(e)return e.naturalHeight||e.height||e.offsetHeight}}),takeLayout:function(e,t,n,i){H.a.pause(),this.x=e,this.y=t,this.width=n,this.height=i,H.a.resume()},_updateLayout:W.f({inputs:["contentElement","contentNaturalWidth","contentNaturalHeight","x","y","width","height"],callback:function(e,t,n,i,r,a,s){if(!isNaN(t+n+i+r+a+s)){var o=Bi.d(a,s,t,n,Mn.h.getAutodisposingInstance()),c=Bi.d(o.width,o.height,t,n,Mn.h.getAutodisposingInstance()),l=(t-c.width)/2,u=(n-c.height)/2;it.a(e).translate(l,u).layerBack(),it.a(this.southeastClipper).translate(-2*l,-2*u).layerBack(),this.style.translate(i,r).scale(a/c.width,s/c.height).layerBack()}}}),cleanup:function(){var e=arguments;this.contentElement=void 0,this.__s._$121$cleanup.apply(this,e)},__superMap:{_$121$cleanup:"cleanup"}})),_o=yt.extend({duration:375,floatingZoomedImage:T.c({strong:!0}),zoomRectedMedia:T.c({strong:!0}),maxZoomySize:b.b({readOnly:!0,dependencies:[St.a.bindingFor("application.primaryInteractionMode")],get:Object.assign(function(){return St.a.application.primaryInteractionMode===wt.a.MOUSE?mo.maxDerivativeZoomSizeMouse:mo.maxDerivativeZoomSizeTouch},{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])===wt.a.MOUSE?mo.maxDerivativeZoomSizeMouse:mo.maxDerivativeZoomSizeTouch}})}),hasBothVCs:function(){var e=this.fromView,t=this.fromViewController,n=this.toView,i=this.toViewController;return e&&!e.isDisposed&&t&&!t.isDisposed&&n&&!n.isDisposed&&i&&!i.isDisposed},canDoZoom:function(){return Boolean(this.zoomRectedMedia&&this.zoomRectedDerivative&&this.hasBothVCs())},discoverZoomRectedMedia:function(){var e=this.fromViewController,t=this.toViewController,n=e.getPrimaryZoomRectableMedia(),i=t.getPrimaryZoomRectableMedia();if(!n||!i||n===i)return n||i||void 0},startAnimation:function(){var e=arguments;if(!this.hasBothVCs())return this.__s._$Xp$startAnimation.apply(this,e);var t=this.zoomRectedMedia=this.discoverZoomRectedMedia();if(!t)return this.__s._$Xp$startAnimation.apply(this,e);var n=this.fromViewController,i=this.toViewController,r=n.getRectInWindowForPrimaryZoomRectableMedia(t),a=i.getRectInWindowForPrimaryZoomRectableMedia(t);if(!r||!a)return this.__s._$Xp$startAnimation.apply(this,e);var s=Math.max(r.width,r.height,a.width,a.height),o=this.zoomRectedDerivative=t.getBestLoadedDerivative(Math.min(s,this.maxZoomySize));if(!o)return this.__s._$Xp$startAnimation.apply(this,e);n.retain(this,"retaining as fromView"),i.retain(this,"retaining as toView"),n.zoomTransitionWillStartWithMedia(t),i.zoomTransitionWillStartWithMedia(t);var c=Bi.d(o.physicalWidth,o.physicalHeight,this.maxZoomySize,this.maxZoomySize),l=Math.min(o.physicalWidth,c.width),u=Math.min(o.physicalHeight,c.height),d=Mn.d.getInstanceAtSize(l,u);o.drawIntoContext(d.getContext("2d"),0,0,l,u);var h=this.floatingZoomedImage=vo.create({contentElement:d});return this._placeZoomedImageOffScreen(),document.body.appendChild(h.element),this.__s._$Xp$startAnimation.apply(this,e)},animationDidFinish:function(){var e=arguments,t=this.__s._$1F3$animationDidFinish.apply(this,e);if(!this.canDoZoom())return t;var n=this.fromViewController,i=this.toViewController;return n.zoomTransitionDidFinish(),i.zoomTransitionDidFinish(),n.release(this,"retaining as fromView"),i.release(this,"retaining as toView"),document.body.removeChild(this.floatingZoomedImage.element),t},_propagateToViewAnimationPropertyValue:W.e({inputs:["toViewAnimationProperty"],callback:function(e){this.canDoZoom()&&(this.toViewController.zoomTransitionValue=e)}}),_propagateFromViewAnimationPropertyValue:W.e({inputs:["fromViewAnimationProperty"],callback:function(e){this.canDoZoom()&&(this.fromViewController.zoomTransitionValue=e)}}),_updateZoomRectedImage:W.e({inputs:["toViewAnimationProperty","fromViewAnimationProperty"],callback:function(e,t){if(this.canDoZoom()){var n=this.zoomRectedMedia,i=this.floatingZoomedImage,r=this.fromViewController.getRectInWindowForPrimaryZoomRectableMedia(n),a=this.toViewController.getRectInWindowForPrimaryZoomRectableMedia(n);if(r&&a&&i){var s=this.zoomRectMotionTween(e/2+(1-t)/2),o=1-s;this.floatingZoomedImage.takeLayout(s*a.left+o*r.left,s*a.top+o*r.top,s*a.width+o*r.width,s*a.height+o*r.height)}else this._placeZoomedImageOffScreen()}}}),_placeZoomedImageOffScreen:function(){var e=this.floatingZoomedImage;e&&e.takeLayout(-1e4,-1e4,0,0)},zoomRectMotionTween:go.a,__superMap:{_$Xp$startAnimation:"startAnimation",_$1F3$animationDidFinish:"animationDidFinish"},staticMembers:{__QUALIFIED_CLASS_NAME__:"PhotoZoomTransition"}}),bo=_o.extend({_zoomRectMotionTween:function(e){return 1-Math.pow(1.15*e-1,2)},zoomRectMotionTween:function(e){return this._zoomRectMotionTween(e)/this._zoomRectMotionTween(1)},staticMembers:{__QUALIFIED_CLASS_NAME__:"PhotoSpringyZoomTransition"}}),yo=(n(993),n(477)),Io=n(478),wo=n(995),So=n(996),Co=Js.extend({incomingTransitionClass:bo,outgoingTransitionClass:_o,mixinDependencies:[js,Be,po],viewClass:fo,view:b.b({downstreamBindings:{hasBottomToolbar:"(owner).isCompactPortrait",toolbarButtons:"(owner).toolbarButtons"}}),sizeClass:b.b(),navItem:b.b({readOnly:!0,strong:!0,type:He,get:function(){return He.create({title:this.bindingFor("navbarTitle"),subtitle:this.bindingFor("navbarSubtitle"),rightBarButtonItems:this.bindingFor("rightBarButtonItems")})}}),rightBarButtonItems:b.b({readOnly:!0,strong:!0,dependencies:["isCompactPortrait"],get:Object.assign(function(){if(!this.isCompactPortrait)return this._rightBarButtonItemsForRegularSize},{__CW__getter:function(e,t,n,i){if(!i.internalGet(this,t[0+n]))return this._rightBarButtonItemsForRegularSize}})}),_rightBarButtonItemsForRegularSize:b.b({readOnly:!0,strong:!0,get:function(){return this._createToolbarButtons(!0)}}),toolbarButtons:b.b({readOnly:!0,strong:!0,get:function(){return this._createToolbarButtons(!1)}}),_createToolbarButtons:function(e){var t,n=za.create({additionalClassNames:["sharrow-button"],icon:yo,action:"shareMedia",target:this}),i=za.create({additionalClassNames:["favorite-button"],icon:this.bindingFor("favoriteIcon"),action:"toggleFavoriteMedia",target:this}),r=za.create({additionalClassNames:["trash-button"],icon:Io,action:"deleteMedia",target:this});return t=e?[i,n,r]:[n,i,r],G.b.create(t)},favoriteIcon:b.b({readOnly:!0,strong:!0,dependencies:["media.isFavorite"],get:Object.assign(function(){return this.media&&this.media.isFavorite?So:wo},{__CW__getter:function(e,t,n,i){return this.media&&i.internalGetPath(this,t[0+n])?So:wo}})}),isCompactPortrait:b.b({readOnly:!0,dependencies:["sizeClass",I.a.sharedInstance.window.bindingFor("width"),I.a.sharedInstance.window.bindingFor("height")],get:Object.assign(function(){if(this.sizeClass===C.a.REGULAR)return!1;var e=I.a.sharedInstance.window;return e.width<e.height},{__CW__getter:function(e,t,n,i){if(i.internalGet(this,t[0+n])===C.a.REGULAR)return!1;var r=I.a.sharedInstance.window;return r.width<r.height}})}),deleteMedia:function(){var e=da.fromMedias([this.media]);this.removeOrDeleteSelection(e,this.container,mn.a)},shareMedia:function(){var e=[this.media.pk],t=St.a.application.feedbackService;t&&t.report&&t.report("cmmShareInitiatedOneUp");var n={beginStat:Z.a,endStat:Z.a,recordStat:t.report};sn.a.initiateCMMShare(void 0,this.primaryInteractionMode,d.b(),e,n)},toggleFavoriteMedia:function(){this.toggleFavoriteMediaAndSelection(this.media)},staticMembers:{__QUALIFIED_CLASS_NAME__:"OneUpPageViewController"}}),Oo=function(){var e=v.a,t=function(t){var n=e.create();try{t(n.resolve.bind(n),n.reject.bind(n))}catch(e){n.reject(e)}return n};return t.all=e.all.bind(e),t.race=e.race.bind(e),t.resolve=e.resolve.bind(e),t.reject=e.reject.bind(e),t}(),Ao=Gs.extend({mixinDependencies:[cn,ln],container:b.b({readOnly:!0,strong:!0,type:Et.a,get:function(){return d.b().cplSystemContainersMap.get(Et.a.PredefinedName.PHOTOS)}}),gridViewController:Jt.b({defaultValue:_.a(zs,{itemViewClass:_.a(fn),layoutMetrics:_.a({initialPosition:an.b.Bottom}),presenter:_.a({viewForViewClass:function(e){var t=arguments,n=this.__s._$SW$viewForViewClass.apply(this,t);return e===this.itemViewClass&&n.bind("isSelectionEnabled",this.owner.bindingFor("isSelectionEnabled")),n},__superMap:{_$SW$viewForViewClass:"viewForViewClass"}})}),downstreamBindings:{libraryInfo:"(owner).libraryInfo"}}),libraryInfo:b.b(),navTitle:b.b(y.d("Container.Title.PHOTOS")),oneUpPageViewControllerClass:Co,oneUpPageViewController:b.b({downstreamBindings:{sizeClass:"(owner).sizeClass",oneUpSelectionIsAllowed:"(owner).selectionModeIsActive"}}),sizeClass:b.b(),containerDidUpdate:function(e){var t,n=this;return(t=regeneratorRuntime.mark(function t(){var i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,gn.a.load({zonePK:e.zone.pk});case 2:(i=t.sent)&&i.length&&(n.libraryInfo=i.objectAt(0));case 4:case"end":return t.stop()}},t,n)}),function(){var e=t.apply(this,arguments);return new Oo(function(t,n){return function i(r,a){try{var s=e[r](a),o=s.value}catch(e){return void n(e)}if(!s.done)return Oo.resolve(o).then(function(e){i("next",e)},function(e){i("throw",e)});t(o)}("next")})})()},staticMembers:{__QUALIFIED_CLASS_NAME__:"P3AllPhotosPageViewController"}}),Eo=(n(29),n(1243)),To={date1Formatter:ps.a,date2Formatter:ps.a},Mo=M.a.extend(W.a,{locKeys:{"No.Similarities":"Date.Range.No.Similarities","Same.Year":"Date.Range.Same.Year","Same.Month":"Date.Range.Same.Month","Same.Day":"Date.Range.Same.Day","Same.Day.No.Year":"Date.Range.Same.Day.No.Year","No.Similarities.Medium":"Date.Range.No.Similarities.Medium","Same.Year.Medium":"Date.Range.Same.Year.Medium","Same.Month.Medium":"Date.Range.Same.Month.Medium","Same.Day.Medium":"Date.Range.Same.Day.Medium","Same.Day.No.Year.Medium":"Date.Range.Same.Day.No.Year.Medium","Same.Day.Day.Of.Week":"Date.Range.Same.Day.Day.Of.Week","Same.Day.Tomorrow":"Date.Range.Same.Day.Tomorrow","Same.Day.Yesterday":"Date.Range.Same.Day.Yesterday","Same.Day.Today.Same.Time":"Date.Range.Same.Day.Today.Same.Time","Same.Day.Today.Time.Range":"Date.Range.Same.Day.Today.Time.Range","Same.Day.Today.Time.Range.Same.Period":"Date.Range.Same.Day.Today.Time.Range.Same.Period","Today.To.Tomorrow":"Date.Range.Today.To.Tomorrow","Yesterday.To.Tomorrow":"Date.Range.Yesterday.To.Tomorrow","Yesterday.To.Today":"Date.Range.Yesterday.To.Today","Day.Of.Week.To.Day.Of.Week":"Date.Range.Days.Of.Week","Day.Of.Week.To.Tomorrow":"Date.Range.Day.Of.Week.To.Tomorrow","Day.Of.Week.To.Today":"Date.Range.Day.Of.Week.To.Today","Day.Of.Week.To.Yesterday":"Date.Range.Day.Of.Week.To.Yesterday"},formatStyle:{MEDIUM:"MEDIUM"},_dateOrTimezoneDidChangeRelay:W.f({inputs:[no.sharedInstance.bindingFor("dateOrTimezoneDidChange")],callback:function(){this.dateOrTimezoneDidChange()}}),dateOrTimezoneDidChange:W.g(),locRange:function(e,t,n){return t?n?(To.date1=t,To.date2=n,y.d(this.locKeys[e],To)):y.d(this.locKeys[e],{date:t,dateFormatter:ps.a}):y.d(this.locKeys[e],{date:n,dateFormatter:ps.a})},fmt:function(e,t,n){var i=this.coerceNumberToDate(e),r=this.coerceNumberToDate(t);if(!i&&!r)return"";if(i?r||(r=i):i=r,isNaN(i.getTime())||isNaN(r.getTime()))return"";if(r<i){var a=r;r=i,i=a}var s=no.sharedInstance,o=void 0;if(s.isColloquial(i)&&s.isColloquial(r))o=this.findLocKeyForColloquialDate(i,r);else if(o=this.findLocKeyForNonColloquialDate(i,r),void 0!==n&&n===this.formatStyle.MEDIUM){var c=o+".Medium";this.locKeys[c]&&(o=c)}return this.locRange(o,i,r)},findLocKeyForNonColloquialDate:function(e,t){return e.getFullYear()!==t.getFullYear()?"No.Similarities":e.getMonth()!==t.getMonth()?"Same.Year":e.getDate()!==t.getDate()?"Same.Month":e.getFullYear()===(new Date).getFullYear()?"Same.Day.No.Year":"Same.Day"},findLocKeyForColloquialDate:function(e,t){var n=no.sharedInstance;if(!to(e,t))return n.colloquialLocKey(e)+".To."+n.colloquialLocKey(t);if(n.isToday(e)){var i=new Date(t);return i.setSeconds(0,0),i-e<=9e5?"Same.Day.Today.Same.Time":(e.getHours()/12|0)==(t.getHours()/12|0)?"Same.Day.Today.Time.Range.Same.Period":"Same.Day.Today.Time.Range"}return"Same.Day."+n.colloquialLocKey(e)},coerceNumberToDate:function(e){return"number"==typeof e?new Date(e):e},staticMembers:{__QUALIFIED_CLASS_NAME__:"DateRangeFormatter"}}).create(),Do=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Lo=null,No="…",Po=-1,Ro=0,xo=1,Fo=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF]))(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/;function ko(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return jo(e,t,n,Do({},i,{squashDirection:Ro}))}function Vo(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return jo(e,t,n,Do({},i,{squashDirection:xo}))}function jo(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(null==t)return e;for(var r=i.insertionStr,a=void 0===r?No:r,s=i.numberOfLines,o=void 0===s?1:s,c=i.squashDirection,l=void 0===c?Ro:c,u=1,d="",h=[];d.length<e.length;){var p=e.substr(d.length),f=p.match(/^\s*\S+|\s+$/),g=d+f[0];if(Wo(g,n).width<=t)d=g;else{if(u===o){d=Bo(e,t,a,n,l);break}""===d&&(d=Bo(f[0],t,a,n,l),p=e.substr(f[0].length)),h.push(d),e=p.trim(),d="",u++}}return h.push(d),h.join("\n")}function Bo(e,t,n,i,r){var a=t-Wo(n,i).width,s="",o="";switch(r){case xo:s=Uo(e,a,1).replace(/\s+$/,"");break;case Po:o=Uo(e,a,-1).replace(/^\s+/,"");break;default:var c=a/2;s=Uo(e,c,1).replace(/\s+$/,""),o=Uo(e,c,-1).replace(/^\s+/,"")}return""+s+n+o}function Uo(e,t,n){for(var i=0,r=0,a=0,s="",o="",c=e.length;i<c;)if(i++,s=n>0?e.substr(0,i):e.substr(c-i),!e.substr(i-1,i).match(Fo)){if((r=Wo(s).width)>t)return o;r!==a&&(o=s),a=r}return o}function Wo(e,t){Lo||((Lo=document.createElement("canvas")).width=10,Lo.height=10,Lo.style.hidden=!0,document.body.appendChild(Lo));var n=Lo.getContext("2d");return n.font=t,n.measureText(e)}var Go=n(1187),Ho=n(776),$o=b.a.extend({shouldExposeRejectionErrors:!1,getIdentifierForDependencies:function(){return Ho.a(Mn.c.getAutodisposingInstanceFromParams.apply(Mn.c,arguments))},cleanUpWorkspace:function(){},init:function(){var e=arguments;this.__s._$qV$init.apply(this,e),this.readOnly||r.b("AyncObservableProperty must be readOnly."),this.get||r.b("AsyncObservableProperty must be configured with a getter method.")},wasRegistered:function(e,t){var n=arguments;this.asyncGetter=this.get,this.get=this._syncShieldedGetter;var i="_asyncObservableProperty_at_"+t+"_";this._key_workingState=i+"workingState",this.__s._$13p$wasRegistered.apply(this,n)},_syncShieldedGetter:function(e,t,n,i){for(var r=this,a=Mn.c.getAutodisposingInstance(),s=0,o=i.dependencies.length;s<o;s++)a[s]=i.internalGet(this,t[s+n]);var c=i.getIdentifierForDependencies.apply(this,a),l=this[i._key_workingState];if(l&&l.inputIdentifier!==c&&(i.cleanUpWorkspace(l.userWorkspace),Mn.h.disposeInstance(l.userWorkspace),Mn.h.disposeInstance(l),l=this[i._key_workingState]=void 0),!l){(l=this[i._key_workingState]=Mn.h.getInstance()).inputIdentifier=c,l.userWorkspace=Mn.h.getInstance(),l.hasFinalResult=!1,l.finalResult=void 0,l.hasError=!1,l.error=void 0;var u=l.workingStateID=++Ko,d=i.asyncGetter.call(this,l.userWorkspace,t,n,i);d&&pr.a(d.then)?d.then(function(e){if(!r.isDisposed){var t=r[i._key_workingState];t&&t.workingStateID===u&&(l.finalResult=e,l.hasFinalResult=!0,r.propertyChanged(i.key))}},function(e){if(!r.isDisposed){var t=r[i._key_workingState];t&&t.workingStateID===u&&(l.error=e,l.hasError=!0,r.propertyChanged(i.key))}}):(l.finalResult=d,l.hasFinalResult=!0)}return l.hasFinalResult?l.finalResult:l.hasError&&i.shouldExposeRejectionErrors?l.error:void 0},__superMap:{_$qV$init:"init",_$13p$wasRegistered:"wasRegistered"},staticMembers:{__QUALIFIED_CLASS_NAME__:"AsyncObservableProperty"}});function zo(){return $o.define.apply($o,arguments)}var Ko=0,Qo=n(1247);function qo(e){var t=void 0,n=void 0,i=void 0,r=void 0,a=function(e){if("string"==typeof e)return e.replace(/ /g,"").replace(/\{/g,"").replace(/\}/g,"").split(",").map(parseFloat)}(e);return a&&4===a.length&&a.every(function(e){return"number"==typeof e&&!isNaN(e)})?(t=a[0],n=a[1],i=a[2],r=a[3]):(t=0,n=0,i=1,r=1),{x:t,y:n=1-(r+n),width:i,height:r}}var Yo=n(156),Zo=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;!function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this.x=t,this.y=n}return e.from=function(e){return new this(e.x,e.y)},e}(),Jo=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;!function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this.width=t,this.height=n}return e.from=function(e){return new this(e.width,e.height)},e}(),Xo=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),ec=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Zo,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Jo;!function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this.origin=Zo.from(t),this.size=Jo.from(n)}return e.from=function(e){return new this(e.origin,e.size)},Xo(e,[{key:"height",get:function(){return this.size.height},set:function(e){this.size.height=e}},{key:"width",get:function(){return this.size.width},set:function(e){this.size.width=e}},{key:"minX",get:function(){return this.origin.x},set:function(e){this.origin.x=e}},{key:"midX",get:function(){return this.origin.x+this.size.width/2}},{key:"maxX",get:function(){return this.origin.x+this.size.width}},{key:"minY",get:function(){return this.origin.y},set:function(e){this.origin.y=e}},{key:"midY",get:function(){return this.origin.y+this.size.height/2}},{key:"maxY",get:function(){return this.origin.y+this.size.height}},{key:"isEmpty",get:function(){return 0===this.width||0===this.height}}]),e}();ec.ZERO=new ec(new Zo(0,0),new Jo(0,0));var tc=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),nc=function(e){function t(){return function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.denormalize=function(e,n){var i=this.from(t.ZERO);return i.minX=e.minX*n.width+n.minX,i.minY=e.minY*n.height+n.minY,i.width=e.width*n.width,i.height=e.height*n.height,i},t.normalize=function(e,n){var i=this.from(t.ZERO);return i.minX=(e.minX-n.minX)/n.width,i.minY=(e.minY-n.minY)/n.height,i.width=e.width/n.width,i.height=e.height/n.height,i},t.from=function(e){return new this(e.origin,e.size)},t.withAspectRatioFittingSize=function(e,t){var n=Jo.from(t);return e<this.fromSize(n).aspectRatio?n.width=n.height*e:n.height=n.width/e,new this(new Zo(0,0),n)},t.withAspectRatioFittingRect=function(e,t){var n=this.withAspectRatioFittingSize(e,t.size);return this.fromCenterAndSize(t.center,n.size)},t.fromCenterAndSize=function(e,t){var n=t.width,i=t.height,r=new Jo(n,i);return new this(new Zo(e.x-r.width/2,e.y-r.height/2),r)},t.fromHash=function(e){var t=e.x,n=void 0===t?0:t,i=e.y,r=void 0===i?0:i,a=e.width,s=void 0===a?0:a,o=e.height,c=void 0===o?0:o;return new this(new Zo(n,r),new Jo(s,c))},t.fromLargestSalientAspectFilledCropRect=function(e,t,n,i){var r=this.withAspectRatioFittingRect(t,e),a=this.denormalize(i,e),s=this.denormalize(n,e);r=this.fromCenterAndSize(a.center,r.size);var o=s.minX,c=s.midX,l=s.maxX,u=s.width,d=r.minX,h=r.maxX,p=r.width,f=e.width-p;d<o?r.minX=u<p?c-.5*r.width:o:h>l&&(r.minX=u<p?c-.5*p:l-p);var g=s.minY,m=s.midY,v=s.maxY,_=s.height,b=r.minY,y=r.maxY,I=r.height,w=e.height-I;return b<g?r.minY=_<I?m-.5*I:g:y>v&&(r.minY=_<I?m-.5*I:v-I),r.minX=Math.max(Math.min(r.minX,f),0),r.minY=Math.max(Math.min(r.minY,w),0),r},t.rectFlipped=function(e,t){return new this(new Zo(e.minX,t.maxY-e.maxY),Jo.from(e.size))},t.fromSize=function(e){var t=e.width,n=e.height;return new this(new Zo(0,0),new Jo(t,n))},t.prototype.bestCropRectForAspectRatio=function(e,t){var n=this.aspectRatio;if(function(e,t,n){return Math.abs(e-t)<=1e-5}(n,e))return this.constructor.UNIT;var i=new this.constructor(new Zo(0,0),new Jo(this.width,this.height)),r=t,a=this.constructor.from(ec.ZERO);return t.isEmpty||(a=this.constructor.fromLargestSalientAspectFilledCropRect(i,e,t,r)),a.isEmpty||i.isEmpty?this.constructor.UNIT:this.constructor.normalize(a,i)},tc(t,[{key:"aspectRatio",get:function(){return this.height>0?this.width/this.height:1}},{key:"center",get:function(){return new Zo(this.midX,this.midY)}}]),t}(ec);nc.UNIT=new nc(new Zo(0,0),new Jo(1,1));var ic,rc=Ge.a.extend(Ir.a,{additionalClassNames:_.a(["placard-image-view"]),rootRecord:b.b(),thumbnailImage:zo({readOnly:!0,dependencies:["rootRecord.share.thumbnailImageData"],get:Object.assign(function(){var e=this.getPath("rootRecord.share.thumbnailImageData");if(e){var t=v.a.create(),n=new Image;return n.src="data:image/jpeg;base64,"+e,Go.a(n,"load",function(){t.resolve(n)}),Go.a(n,"error",function(){t.reject()}),t}},{__CW__getter:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);if(r){var a=v.a.create(),s=new Image;return s.src="data:image/jpeg;base64,"+r,Go.a(s,"load",function(){a.resolve(s)}),Go.a(s,"error",function(){a.reject()}),a}}})}),blurredThumbnailImage:b.b({readOnly:!0,dependencies:["thumbnailImage"],get:function(){var e=this.thumbnailImage;if(e){var t=document.createElement("canvas");return t.width=e.width,t.height=e.height,t.getContext("2d").drawImage(e,0,0),Qo.a(t,3,2,void 0,!0),t}}}),previewData:zo({readOnly:!0,shouldExposeRejectionErrors:!0,dependencies:["rootRecord"],get:function(){var e=this.rootRecord;return e&&e.previewData&&e.loadPreviewData()}}),previewDataCropRectString:b.b({readOnly:!0,dependencies:["previewData"],get:function(){var e=this.previewData;return e&&e.cropRectString}}),previewDataCropRect:b.b({readOnly:!0,dependencies:["previewDataCropRectString"],get:Object.assign(function(){return qo(this.previewDataCropRectString)},{__CW__getter:function(e,t,n,i){return qo(i.internalGet(this,t[0+n]))}})}),previewDataImage:zo({readOnly:!0,dependencies:["previewData"],get:function(){var e=this.previewData;if(e&&!(e instanceof Error)){var t=v.a.create(),n=new Image;return n.src=URL.createObjectURL(new Blob(e.previewImageData,{type:"image/jpeg"})),Go.a(n,"load",function(){URL.revokeObjectURL(n.src),t.resolve(n)}),Go.a(n,"error",function(){URL.revokeObjectURL(n.src),t.reject()}),t}}}),loadedKeyMedia:zo({strong:!0,readOnly:!0,dependencies:["previewData","rootRecord.zone.pk"],get:Object.assign(function(){var e=this.previewData;if(e&&e.keyAssetIdentifier){var t=this.getPath("rootRecord.zone.pk");if(t)return bn.a.load({primaryKeys:[Yo.a.getPrimaryKeyWithZonePK(t,e.keyAssetIdentifier)]}).then(function(e){return e.objectAt(0)})}},{__CW__getter:function(e,t,n,i){var r=this.previewData;if(r&&r.keyAssetIdentifier){var a=i.internalGetPath(this,t[1+n]);if(a)return bn.a.load({primaryKeys:[Yo.a.getPrimaryKeyWithZonePK(a,r.keyAssetIdentifier)]}).then(function(e){return e.objectAt(0)})}}})}),derivativeLoader:b.b({strong:!0,defaultValue:$.b(es.a,{shouldCover:!0,shouldCorrectForDevicePixelRatio:!0}),downstreamBindings:{media:"(owner).loadedKeyMedia",width:"(owner).viewportWidth",height:"(owner).viewportHeight"}}),derivativeImage:b.b(),_maintainDerivativeImage:W.f("derivativeLoader.derivative",function(e){this.derivativeImage=e?e.toAppendableImagelike():void 0}),finalImage:b.b({readOnly:!0,dependencies:["derivativeImage","previewDataImage","blurredThumbnailImage"],get:function(){var e=this.derivativeImage,t=this.previewDataImage,n=this.blurredThumbnailImage;return e||t||n}}),INITIAL_FADE_DURATION:400,DEFAULT_FADE_DURATION:900,RECENT_CHANGE_TIME:100,_maintainFinalImage:W.f({inputs:["finalImage","viewportWidth","viewportHeight","previewDataCropRect"],callback:function(e,t,n,i){var r=this,a=this._mfi_lastFinalImage,s=!1;a&&a!==e&&(s=!0),this._mfi_lastFinalImage=e;var o=Date.now();this._mfi_lastSize!==(this._mfi_lastSize=1e4*t+n)&&(this._mfi_lastSizeChangeDate=o);var c=o-this._mfi_lastSizeChangeDate<this.RECENT_CHANGE_TIME?0:a?this.DEFAULT_FADE_DURATION:this.INITIAL_FADE_DURATION;if(e){var l=Ii.a.sharedInstance.devicePixelRatio,u=Math.max(0,t*l/250/1.15-1),d=nc.fromHash({x:0-u,y:0-u,width:t+2*u,height:n+2*u}),h=d.aspectRatio,p=nc.fromHash({width:e.width,height:e.height}),f=nc.fromHash(i);0===f.height&&(f.height=1e-5),0===f.width&&(f.width=1e-5);var g=p.bestCropRectForAspectRatio(h,f);g===nc.UNIT&&(g=nc.withAspectRatioFittingRect(h,g));var m=this.derivativeLoader.isPerfect?0:Math.min(u,Math.max(0,g.width*l/e.width/1.15-1)),v=d.width/g.width,_=d.height/g.height;if(it.a(e).set({top:-g.minY*_,left:-g.minX*v,width:v,height:_}).set("filter",m?"blur("+m+"px)":void 0).layerBackIf(m),!e.parentNode&&(this.element.appendChild(e),c)){var b=s;xn(e,0,1,c,function(){b&&!r.isDisposed&&r.element.removeChild(a)}),s=!1}}s&&this.element.removeChild(a)}}),staticMembers:{__QUALIFIED_CLASS_NAME__:"ShareImageView"}}),ac=(n(1055),(ic={})[Bs.b]=["ImportSuccess.Placard.Photos.0","ImportSuccess.Placard.Photos.1","ImportSuccess.Placard.Photos.2","ImportSuccess.Placard.Photos.More"],ic[Bs.c]=["ImportSuccess.Placard.Videos.0","ImportSuccess.Placard.Videos.1","ImportSuccess.Placard.Videos.2","ImportSuccess.Placard.Videos.More"],ic[Bs.a]=["ImportSuccess.Placard.Items.0","ImportSuccess.Placard.Items.1","ImportSuccess.Placard.Items.2","ImportSuccess.Placard.Items.More"],ic),sc=n(488),oc=Ge.a.extend(Nr.a,{staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"span",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"text",attributes:{}}]}]},className:"share-import-status",__QUALIFIED_CLASS_NAME__:"ShareImportStatusView"},icon:sc,importedAssetDescriptor:b.b(""),importedAssetCount:b.b(0),text:b.b({readOnly:!0,dependencies:["importedAssetCount","importedAssetDescriptor"],get:function(){var e=this.importedAssetCount,t=this.importedAssetDescriptor,n=ac[t];if(e>0&&""!==t&&void 0!==t)return Object(os.c)(n,{count:e})}})}),cc=(n(1053),Ge.a.extend(Eo.a,{staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"shareImageView"},{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"mainTitleText",attributes:{}}],classes:["title"]},{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"dateRangeText",attributes:{}}],classes:["date-range"]}],name:"titleAndDateContainer",classes:["title-and-date-container"]},{type:"VIEWOUTLET",tagname:"view",name:"shareImportStatusView"}],classes:["share-placard-view"]},__QUALIFIED_CLASS_NAME__:"SharePlacardView"},rootRecord:b.b(),primaryInteractionMode:b.b(),availableHeightToDesire:b.b(),minimumHeight:b.b(0),equilibriumAspectRatio:b.b({readOnly:!0,dependencies:["viewportWidth"],get:function(){var e=this.viewportWidth;return e<400?16/9:e<920?(e-400)/520*(2.3-16/9)+16/9:e<1250?(e-920)/330*(3.2-2.3)+2.3:3.2}}),equilibriumHeight:b.b({readOnly:!0,dependencies:["viewportWidth","equilibriumAspectRatio","minimumHeight","availableHeightToDesire"],get:function(){var e=this.availableHeightToDesire,t=void 0===e?1/0:e,n=this.viewportWidth,i=this.equilibriumAspectRatio,r=this.minimumHeight,a=n/i,s=Math.min(t,a),o=Math.max(r,s);return Math.round(o)}}),shareTitle:b.b(Gt.c("rootRecord.share.title")),shareDateRange:b.b({readOnly:!0,dependencies:["rootRecord.startDate","rootRecord.endDate"],get:Object.assign(function(){var e=this.getPath("rootRecord.startDate"),t=this.getPath("rootRecord.endDate");if(e||(e=t),t||(t=e),!e)return"";var n=Mo.formatStyle.MEDIUM;return Mo.fmt(e,t,n)},{__CW__getter:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]),a=i.internalGetPath(this,t[1+n]);if(r||(r=a),a||(a=r),!r)return"";var s=Mo.formatStyle.MEDIUM;return Mo.fmt(r,a,s)}})}),mainTitleText:b.b({readOnly:!0,dependencies:["shareTitle","shareDateRange"],get:Object.assign(function(){return this.shareTitle||this.shareDateRange},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])||i.internalGet(this,t[1+n])}})}),dateRangeText:b.b({readOnly:!0,dependencies:["shareTitle","shareDateRange"],get:Object.assign(function(){return this.shareTitle?this.shareDateRange:""},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?i.internalGet(this,t[1+n]):""}})}),importedAssetDescriptor:b.b(),importedAssetCount:b.b(),shareImportStatusView:b.b({readOnly:!0,dependencies:["importedAssetCount"],get:Object.assign(function(){if(this.importedAssetCount>0)return this._shareImportStatusView},{__CW__getter:function(e,t,n,i){if(i.internalGet(this,t[0+n])>0)return this._shareImportStatusView}}),downstreamBindings:{importedAssetDescriptor:"(owner).importedAssetDescriptor",importedAssetCount:"(owner).importedAssetCount"}}),shareImageView:b.b({strong:!0,defaultValue:$.b(rc,{isViewportSizeDOMReadingEnabled:!1}),downstreamBindings:{rootRecord:"(owner).rootRecord",viewportWidth:"(owner).viewportWidth",viewportHeight:"(owner).viewportHeight"}}),_shareImportStatusView:$.b(oc),_maintainLayoutSoon:W.f({inputs:["isAttached","viewportWidth","dateRangeText","mainTitleText","primaryInteractionMode"],callback:function(){this._layoutTimeout||(this._layoutTimeout=ji.b(this._maintainLayout))}}),_maintainLayout:Ui.a(function(){if(!this.isDisposed){this._layoutTimeout=void 0;var e=this.isAttached,t=this.viewportWidth,n=this.dateRangeText,i=this.mainTitleText,r=this.primaryInteractionMode;if(e&&t&&(n||i)&&r){var a=this.titleAndDateContainer,s=a.style,o=y.a.sharedInstance.isRTL?"right":"left",c=this._measuredTADContainerInset||(this._measuredTADContainerInset=parseFloat(it.a(a).get(o))),l=this._measuredMinimumTADContainerHeight;if(!l){var u=s.width;s.width="100000px",l=this._measuredMinimumTADContainerHeight=a.offsetHeight,s.oldWidth=u}var d=t-2*c;s.width=d+"px";var h=Vo(this.mainTitleText,d,it.a(this.titleAndDateContainer).get("font"),{numberOfLines:2});a.firstChild.textContent=h;var p=this._finalTADContainerHeight=a.offsetHeight,f=this._measuredTADContainerTop||(this._measuredTADContainerTop=a.offsetTop);this.minimumHeight=f+p}}}),_applyTADOffset:W.f("equilibriumHeight","viewportHeight","minimumHeight",function(e,t,n){if(e&&t&&n){it.a(this.titleAndDateContainer).translateDevicePixels(0,NaN)}})})),lc=(n(1074),y.d("LegalFooterView.Text.Fragment.PrivacyUrl.Href")),uc=y.d("LegalFooterView.Text.Fragment.PrivacyUrl.Title"),dc=y.d("LegalFooterView.Text.Fragment.TermsUrl.Href"),hc=y.d("LegalFooterView.Text.Fragment.TermsUrl.Title"),pc=Ge.a.extend(Qa.a,Mr.b,{staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"a",classes:["apple-icon"],attributes:{title:{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"appleDotComTitle",attributes:{},attribute:"title"},href:{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"appleDotComUrl",attributes:{},attribute:"href"},target:"_blank"}},{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"appleLegalHtml",attributes:{escape:"false"}}],classes:["cmm-legal-footer-content"]}]}},className:"cmm-legal-footer",__QUALIFIED_CLASS_NAME__:"LegalFooterView"},primaryInteractionMode:b.b(),appleDotComUrl:b.b(y.d("LegalFooterView.AppleDotComUrl.Href")),appleDotComTitle:b.b(y.d("LegalFooterView.AppleDotComUrl.Title")),appleLegalHtml:b.b({dependencies:["primaryInteractionMode"],readOnly:!0,get:function(){var e=void 0,t=this.primaryInteractionMode;if(t){switch(t){case wt.a.TOUCH:e=".Mobile";break;case wt.a.MOUSE:e=".Desktop";break;default:c.b.warn("Unexpected primaryInteractionMode="+t+"; Using MOUSE"),e=".Desktop"}var n=(new Date).getFullYear(),i=y.d("LegalFooterView.Text.Fragment.Copyright",{year:n});return y.d("LegalFooterView.Text"+e,{privacyAnchorTag:'<a class="privacy expanded-touch-target" target="_blank" href="'+lc+'">'+uc+"</a>",termsAnchorTag:'<a class="terms expanded-touch-target" target="_blank" href="'+dc+'">'+hc+"</a>",copyrightText:'<span class="copyright">'+i+"</span>"})}}}),init:function(){var e=arguments;this.__s._$s9$init.apply(this,e);var t=un.b.create({gestureWasRecognized:Z.a,delegate:this,shouldPreventDefault:!1});this.addGestureRecognizer(t)},__superMap:{_$s9$init:"init"}}),fc=(n(1081),rr.a.uiPhotosMaxWidthDesktop),gc=wt.a,mc=(gc.MOUSE,gc.TOUCH,Object(Bs.f)("IncompleteStatePageView.Sharing.Incomplete.")),vc=Ge.a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"sharePlacardView"},{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"sharingPhotosSubtitle",attributes:{}}],classes:["subtitle"]},{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"sharingPhotosText",attributes:{}}],classes:["title"]}],classes:["incomplete-share-info"],name:"incompleteShareInfo"},{type:"VIEWOUTLET",tagname:"view",name:"legalFooterView"}]}},className:"cmm-incomplete-state-page",__QUALIFIED_CLASS_NAME__:"IncompleteStatePageView"},originatorName:b.b(),viewportWidth:b.b(),shareInfoMaxWidth:b.b({readOnly:!0,dependencies:["isAttached","primaryInteractionMode","viewportWidth"],get:function(){var e=this.primaryInteractionMode,t=this.viewportWidth,n=void 0;return n=e===wt.a.TOUCH?t-46:t-60,Math.min(fc,n)}}),_shareInfoMaxWidthObserver:W.f({inputs:["shareInfoMaxWidth"],callback:function(e){it.a(this.incompleteShareInfo,{"max-width":e+"px"}),it.a(this.legalFooterView.element,{"max-width":e+"px"})}}),sharePlacardView:b.b({strong:!0,defaultValue:$.b(cc),downstreamBindings:{rootRecord:"(owner).rootRecord",primaryInteractionMode:"(owner).primaryInteractionMode",viewportWidth:"(owner).shareInfoMaxWidth",viewportHeight:"(owner).sharePlacardView.equilibriumHeight"}}),sharingPhotosSubtitle:b.b(y.d("IncompleteStatePageView.Check")),sharingPhotosText:b.b({readOnly:!0,dependencies:["rootRecord","originatorName"],get:function(){var e=this.rootRecord,t=this.originatorName;if(e&&t){var n=e.photosCount,i=void 0===n?0:n,r=e.videosCount,a=void 0===r?0:r,s=e.assetCount,o=void 0===s?0:s,c=Object(Bs.g)(o,i,a,mc);return Object(os.c)(mc[c],{count:o,originatorName:t})}return""}}),legalFooterView:b.b({type:pc,defaultValue:$.b(pc),downstreamBindings:{primaryInteractionMode:"(owner).primaryInteractionMode"}}),rootRecord:b.b(),primaryInteractionMode:b.b()}),_c=n(131),bc=function(){var e=v.a,t=function(t){var n=e.create();try{t(n.resolve.bind(n),n.reject.bind(n))}catch(e){n.reject(e)}return n};return t.all=e.all.bind(e),t.race=e.race.bind(e),t.resolve=e.resolve.bind(e),t.reject=e.reject.bind(e),t}(),yc={mixinDependencies:[W.a],rootRecord:b.b(),rootRecordPK:b.b({didChange:function(e){void 0!==e&&this.resolveRootRecordPK(e)}}),dataManager:b.b(d.b),feedbackService:b.b(Gt.c("dataManager.feedbackService")),resolveRootRecordPK:function(e){var t,n=this;return(t=regeneratorRuntime.mark(function t(){var i,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:i=Ot.a.find(e),r=i.container,H.a.pause(),n.container=r,n.rootRecord=i,H.a.resume();case 6:case"end":return t.stop()}},t,n)}),function(){var e=t.apply(this,arguments);return new bc(function(t,n){return function i(r,a){try{var s=e[r](a),o=s.value}catch(e){return void n(e)}if(!s.done)return bc.resolve(o).then(function(e){i("next",e)},function(e){i("throw",e)});t(o)}("next")})})()},primaryInteractionMode:b.b(),currentPlatformType:b.b({type:String,readOnly:!0,defaultValue:function(){return _c.a.sharedInstance.current}}),shareRecordOwnerDisplayName:b.b({dependencies:["rootRecord"],type:String,readOnly:!0,get:function(){var e=Ct.a(this,"rootRecord.share.owner.userIdentity.nameComponents");if(void 0!==e)return Bt.a(e)}})},Ic=Ve.a.extend(Be,yc,{viewClass:vc,view:b.b({downstreamBindings:{rootRecord:"(owner).rootRecord",primaryInteractionMode:"(owner).primaryInteractionMode",viewportWidth:"(owner).viewportWidth",originatorName:"(owner).shareRecordOwnerDisplayName"}}),viewportWidth:b.b(I.a.sharedInstance.window.bindingFor("width")),container:b.b({type:Et.a,set:function(e,t){return void 0!==t&&t.endPolling(),void 0!==e&&e.beginPolling(),e}}),_containerMediasObserver:W.f({inputs:["container.medias.length"],callback:function(e){void 0!==e&&e>0&&!0===Ot.a.isShareCompleteEnough(this.rootRecord,this.container)&&this.shareIsCompleteEnough(this.rootRecordPK)}}),viewDidLoad:function(){var e=this.feedbackService;e&&e.report("shareIncomplete")},shareIsCompleteEnough:Z.a,staticMembers:{__QUALIFIED_CLASS_NAME__:"IncompleteStatePageViewController"}}).extend({shareIsCompleteEnough:function(e){this.sendEvent("incompleteShareNowReady",e)},staticMembers:{__QUALIFIED_CLASS_NAME__:"P3IncompleteStatePageViewController"}}),wc=n(891),Sc=n(1207),Cc=n(1017);function Oc(){Cc.a()}function Ac(e,t,n,i,r,a){var o=v.a.create(),c={title:y.d("CMMReceiver.UnauthenticatedSigninDialog.Button.SignInAndImport"),wasActivated:function(){return n(t).then(function(e){return o.resolve(e),e},function(e){o.reject(e)})}},l={title:y.d("CMMReceiver.UnauthenticatedSigninDialog.Button.Download"),wasActivated:function(){var e=this.parent&&this.parent.parent&&this.parent.parent.animationDuration||0;s.a(function(){i(t).then(function(e){return o.resolve(e),e},function(e){o.reject(e)})},e)}},u={title:y.d("CMMReceiver.UnauthenticatedSigninDialog.Button.Cancel"),wasActivated:function(){o.resolve(!1)}},d=r?t.length:e.length,h=Sc.a(d),p={iconNames:["photos-icon"],message:y.d("CMMReceiver.UnauthenticatedSigninDialog.Message"),description:y.d("CMMReceiver.UnauthenticatedSigninDialog.Description.Items"+h),alertStyle:wc.a.ACTION_SHEET};return a===wt.a.TOUCH?(p.otherButton=c,p.alternateButton=l,p.primaryButton=u):(p.primaryButton=c,p.otherButton=l,p.alternateButton=u),mn.a.show(p),o}var Ec=n(413),Tc=n(1249),Mc=n(1019),Dc=function(e){function t(n){!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this));return i.rootRecord=n,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.createDownloadDetailsForArchive=function(){return Mc.b(this.rootRecord)},t}(n(1018).a),Lc=n(346),Nc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};function Pc(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}var Rc=Tc.a.extend({prepareDownloadURL:function(e){var t=e.rootRecord,n=Pc(e,["rootRecord"]),i=n.collection,r=n.container,a=new Dc(t),s=new Lc.a(i,r,t);return this.__s._$DF$prepareDownloadURL.call(this,Nc({},n,{includeExcludeRecordsLoader:s,downloadDetailsGenerator:a}))},downloadFromURL:function(e){var t=e.assetCount,n=e.libraryInfo,i=Pc(e,["assetCount","libraryInfo"]);return this.__s._$Wv$downloadFromURL.call(this,Nc({feedbackStatGenerator:function(e,i){if(e&&t&&t>0&&n){var r=(n.audiosCount||0)+(n.othersCount||0);return{eventName:"shareDownload",stats:{didDownloadWholeZone:e===t,mediasCount:i.roundToNearestTen(e),otherItemsCount:i.roundToNearestTen(r)}}}}},i))},getZipURLGenerationParameters:function(e){var t=arguments,n=this.__s._$b4$getZipURLGenerationParameters.apply(this,t);return n.shareName=Ec.a.RECORD_NAME,n},__superMap:{_$DF$prepareDownloadURL:"prepareDownloadURL",_$Wv$downloadFromURL:"downloadFromURL",_$b4$getZipURLGenerationParameters:"getZipURLGenerationParameters"},staticMembers:{__QUALIFIED_CLASS_NAME__:"CMMDownloadMediasManager"}}),xc=n(220),Fc=n(168),kc=(n(1047),An.extend(Un,{staticMembers:{existenceDependenciesOnHost:["media.genericType","media.specificType"],shouldExistInHost:function(e){var t=e.media;if(!t)return!1;var n=t.constructor.Type;return t.genericType===n.VIDEO&&t.specificType!==n.AUDIO},__QUALIFIED_CLASS_NAME__:"VideoBadgeAdornment"},classNames:["video-badge-adornment"]})),Vc=(n(1049),An.extend(Un,{fadeInDuration:b.b(250),fadeOutDuration:b.b(250),visibleOpacity:b.b(.25),wantsPresenceInHost:b.b({readOnly:!0,dependencies:["host.isSelected","host.isSelectionEnabled","host.primaryInteractionMode"],get:Object.assign(function(){return Boolean(this.host.primaryInteractionMode===wt.a.TOUCH&&!0===this.host.isSelectionEnabled&&!0===this.host.isSelected)},{__CW__getter:function(e,t,n,i){return Boolean(i.internalGetPath(this,t[2+n])===wt.a.TOUCH&&!0===i.internalGetPath(this,t[1+n])&&!0===i.internalGetPath(this,t[0+n]))}})}),classNames:["dim-adornment"],staticMembers:{__QUALIFIED_CLASS_NAME__:"DimAdornment"}})),jc=Vc.extend({visibleOpacity:b.b(.65),wantsPresenceInHost:b.b({readOnly:!0,dependencies:["host.isImported"],get:Object.assign(function(){return this.host.isImported},{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])}})}),staticMembers:{__QUALIFIED_CLASS_NAME__:"ImportedAdornment"}}),Bc={mixinDependencies:[fn],audioAdornment:vn.adornmentProperty(zn),panoramaAdornment:vn.adornmentProperty(Kn.extend({staticMembers:{existenceDependenciesOnHost:_.a(["media.aspectRatio","currentWidth","currentHeight"]),shouldExistInHost:function(e){var t=arguments;if(!this.__s._$F1$shouldExistInHost.apply(this,t))return!1;var n=e.currentWidth/e.currentHeight,i=e.getPath("media.aspectRatio");return Math.max(n/i,i/n)>1.5},__superMap:{_$F1$shouldExistInHost:"shouldExistInHost"}},classNames:_.a(["position-top-left"])})),videoBadgeAdornment:vn.adornmentProperty(kc),dimAdornment:vn.adornmentProperty({appliesImmediately:!0,adornmentClass:Vc}),importedAdornment:vn.adornmentProperty({appliesImmediately:!0,adornmentClass:jc}),selectionAdornment:vn.adornmentProperty({appliesImmediately:!0,adornmentClass:$r.extend({media:b.b(),descriptor:b.b({readOnly:!0,dependencies:["media"],get:function(){var e=this.media;if(e)return e.genericType===bn.a.Type.VIDEO?"Video":e.genericType===bn.a.Type.IMAGE?"Photo":"Other"}}),tooltip:b.b({readOnly:!0,dependencies:["isSelected","descriptor"],get:function(){var e=this.isSelected,t=this.descriptor;return e?y.d("SelectionCheckmark.Deselect."+t):y.d("SelectionCheckmark.Select."+t)}}),selectAdornment:function(e){e.state===dn.b.Ended&&this.sendEvent("userSelectionRequest",{view:this,operation:wn.a.SET})}}),downstreamBindings:{primaryInteractionMode:"(owner).primaryInteractionMode",isInteractionDisabled:"(owner).isSelectionAdornmentInteractionDisabled",isSelectionEnabled:"(owner).isSelectionEnabled",isSelected:"(owner).isSelected",media:"(owner).media"}}),errorAdornment:vn.adornmentProperty(Hn),errorAdornmentWantsPresence:b.b(Gt.c("errorAdornment.wantsPresenceInHost")),primaryInteractionMode:b.b(),isSelectionEnabled:b.b(),isImported:b.b({readOnly:!0,dependencies:["media",Fc.a.bindingFor("allModels"),Fc.a.bindingFor("allModels.contentsDidChange")],type:Boolean,get:function(){var e=this.media;return xc.a.sharedInstance.isMediaImported(e)}}),itemIsNotReady:b.b({readOnly:!0,dependencies:["derivative","media.cannotHaveImageDerivative"],get:Object.assign(function(){return!(this.derivative||this.getPath("media.cannotHaveImageDerivative"))},{__CW__getter:function(e,t,n,i){return!(i.internalGet(this,t[0+n])||i.internalGetPath(this,t[1+n]))}})}),isSelectionAdornmentInteractionDisabled:b.b({readOnly:!0,dependencies:["currentUserIsShareOwner","itemIsNotReady","isImported"],get:Object.assign(function(){return this.itemIsNotReady||this.isImported||this.currentUserIsShareOwner},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[1+n])||i.internalGet(this,t[2+n])||i.internalGet(this,t[0+n])}})}),isInteractionDisabled:b.b({readOnly:!0,dependencies:["currentUserIsShareOwner","itemIsNotReady","primaryInteractionMode","isImported"],get:function(){var e=this.currentUserIsShareOwner,t=this.itemIsNotReady,n=this.primaryInteractionMode,i=this.isImported;return t||e||n!==wt.a.TOUCH||i}}),currentUserIsShareOwner:b.b()},Uc={photosGridMaxWidth:b.b({dependencies:["primaryInteractionMode"],readOnly:!0,type:Number,get:Object.assign(function(){var e=this.primaryInteractionMode,t=rr.a,n=t.uiPhotosMaxWidthDesktop,i=t.uiSizeIPad129LandscapeWidth;return e===wt.a.MOUSE?n:i},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=rr.a,s=a.uiPhotosMaxWidthDesktop,o=a.uiSizeIPad129LandscapeWidth;return r===wt.a.MOUSE?s:o}})}),initialPosition:b.b(an.b.Top),bottomPadding:b.b(0),sectionBottomPadding:b.b(32),sectionLeftPadding:b.b(16),sectionRightPadding:b.b(16)},Wc=Va.extend({primaryInteractionMode:b.b(),isAuthenticated:b.b(),shortGUID:b.b(),libraryInfo:b.b(),currentUserIsShareOwner:b.b(),itemsRemaining:b.b(),isAllAddedToLibrary:b.b(),shareBackSuggestionsService:b.b(),userIsUnableToImport:b.b(),userHasManipulatedSelection:b.b(!1),isMouseSelectionAdditive:!0,userSelectionRequest:function(e){if(void 0!==e){var t=e.view;if(!0!==t.isInteractionDisabled)return t.instanceOf($r)&&(e.view=t.host),this.userHasManipulatedSelection=!0,this.__s._$WU$userSelectionRequest.call(this,e)}},selectItem:function(e){this.userHasManipulatedSelection=!0,this.__s._$Y9$selectItem.call(this,e)},deselectItem:function(e){this.userHasManipulatedSelection=!0,this.__s._$Zo$deselectItem.call(this,e)},keyDown:function(e){var t=this.__s._$fp$keyDown.call(this,e);return t&&(this.userHasManipulatedSelection=!0),t},clearSelection:function(){this.__s._$la$clearSelection.call(this),this.isWhitespaceDeselectionEnabled&&(this.userHasManipulatedSelection=!0)},handleKeyboardSelectAll:function(){var e=arguments;this.isAllAddedToLibrary||this.__s._$rz$handleKeyboardSelectAll.apply(this,e)},itemViewClass:_.a(Bc),layoutMetrics:_.a(Uc),presenter:_.a({dispose:function(){for(var e=arguments,t=this.views,n=0,i=t.length;n<i;n++){var r=t.objectAt(n);this._unbindPropertiesForView(r)}return this.__s._$19o$dispose.apply(this,e)},viewForViewClass:function(e){var t=arguments,n=this.__s._$1I2$viewForViewClass.apply(this,t);return this._bindPropertiesForView(n),n},itemViewBindingsByClassKey:{itemViewClass:{primaryInteractionMode:"owner.primaryInteractionMode",currentUserIsShareOwner:"owner.currentUserIsShareOwner",isSelectionEnabled:"owner.isSelectionEnabled"}},_getBindingPathsForView:function(e){for(var t=this.itemViewBindingsByClassKey,n=Object.keys(t),i=0,r=n.length;i<r;i++){var a=n[i],s=this[a];if(s instanceof Object&&e instanceof s.Constructor)return t[a]}},_bindPropertiesForView:function(e){var t=this._getBindingPathsForView(e);t instanceof Object&&function(e,t,n){for(var i in H.a.pause(),n){var r=n[i];t.bind(i,e.bindingFor(r))}H.a.resume()}(this,e,t)},_unbindPropertiesForView:function(e){var t=this._getBindingPathsForView(e);t instanceof Object&&function(e,t){H.a.pause();for(var n=0,i=t.length;n<i;n++)e.unbind(t[n]);H.a.resume()}(e,Object.keys(t))},__superMap:{_$19o$dispose:"dispose",_$1I2$viewForViewClass:"viewForViewClass"}}),__superMap:{_$WU$userSelectionRequest:"userSelectionRequest",_$Y9$selectItem:"selectItem",_$Zo$deselectItem:"deselectItem",_$fp$keyDown:"keyDown",_$la$clearSelection:"clearSelection",_$rz$handleKeyboardSelectAll:"handleKeyboardSelectAll"},staticMembers:{__QUALIFIED_CLASS_NAME__:"CMMPhotosGridViewController"}}),Gc=n(105),Hc=(n(1057),Ge.a.extend(Ir.a,{staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"shareDetailView"},{type:"VIEWOUTLET",tagname:"view",name:"actionButton"}]},className:"cmm-share-detail-action-bar",__QUALIFIED_CLASS_NAME__:"ShareDetailActionBarView"},actionButton:b.b({type:Ge.a}),shareDetailView:b.b({type:Ge.a})})),$c=n(179),zc=[{key:320,value:16},{key:375,value:20},{key:414,value:20},{key:768,value:34},{key:834,value:46},{key:1024,value:52}],Kc=[{key:568,value:52},{key:667,value:62},{key:736,value:66},{key:812,value:68},{key:1024,value:52},{key:1112,value:31},{key:1366,value:52}],Qc=ds.a.extend({staticMembers:{storageKey:"cmm-ui"},implicitDesktopSelectionMode:rr.a.implicitDesktopSelectionMode,isWhitespaceDeselectionEnabled:ds.a.booleanProperty(!1),disableSharedSidebarSection:ds.a.booleanProperty(!0),insetForViewportSize:function(e,t){return function(e,t,n){if($c.a(t)){for(var i=0,r=e.length-1,a=void 0;r-i>1;)e[a=Math.round((i+r)/2)].key<t?i=a:r=a;var s=e[i],o=e[r],c=(t-s.key)/(o.key-s.key);return c=Math.min(Math.max(c,0),1),s.value*(1-c)+o.value*c}}(t>e?zc:Kc,e)},maximumShareBackSize:ds.a.numberProperty(5e3),maxDistanceBetweenLocationsInMeters:ds.a.numberProperty(5e3),paddingForShareBackTimeInMillis:ds.a.numberProperty(18e6),maxShareAssetsToUseForLocationFilter:30,maxShareTimeRangeForShareBackInMillis:ds.a.numberProperty(5184e6),disableShareBack:ds.a.booleanProperty(!1),earlyExitContiguousChunkGapInMillis:ds.a.numberProperty(864e6),earlyExitMaxNonContiguousChunksAllowed:1}).create(),qc=(n(489),xt.a.extend({staticMembers:{className:"cmm-mode-selection-toolbar-button",__QUALIFIED_CLASS_NAME__:"ModeSelectionButton"},additionalClassNames:["expanded-touch-target"],title:b.b({dependencies:["selectionModeIsActive"],readOnly:!0,get:Object.assign(function(){var e=this.selectionModeIsActive?"ModeSelectionButton.Cancel":"ModeSelectionButton.Select";return y.d(e)},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n])?"ModeSelectionButton.Cancel":"ModeSelectionButton.Select";return y.d(r)}})}),action:"toggleSelectionMode",selectionModeIsActive:b.b({readOnly:!0,defaultValue:!1})})),Yc=xt.a.extend({staticMembers:{className:"cmm-mode-selection-toolbar-button",__QUALIFIED_CLASS_NAME__:"SelectAllButton"},additionalClassNames:["expanded-touch-target"],title:b.b({type:String,dependencies:["_areAllItemsSelected"],readOnly:!0,get:Object.assign(function(){var e=this._areAllItemsSelected?"SelectAllButton.DeselectAll":"SelectAllButton.SelectAll";return y.d(e)},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n])?"SelectAllButton.DeselectAll":"SelectAllButton.SelectAll";return y.d(r)}})}),action:b.b({type:String,dependencies:["_areAllItemsSelected"],readOnly:!0,get:Object.assign(function(){return this._areAllItemsSelected?"deselectAll":"selectAll"},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?"deselectAll":"selectAll"}})}),_areAllItemsSelected:b.b({type:Boolean,dependencies:["numSelectableItems","selectedItemCount"],readOnly:!0,get:Object.assign(function(){return this.selectedItemCount===this.numSelectableItems},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[1+n])===i.internalGet(this,t[0+n])}})}),selectedItemCount:b.b({type:Number}),numSelectableItems:b.b({type:Number})}),Zc=(n(1059),Ge.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"left"},{type:"VIEWOUTLET",tagname:"view",name:"right"}]},className:"cmm-mode-selection-toolbar",__QUALIFIED_CLASS_NAME__:"ModeSelectionToolbarView"},left:b.b({strong:!0,readOnly:!0,dependencies:["currentUserIsShareOwner","selectionModeIsActive"],get:Object.assign(function(){return this.selectionModeIsActive&&!1===this.currentUserIsShareOwner?this._selectAllButton:void 0},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[1+n])&&!1===i.internalGet(this,t[0+n])?this._selectAllButton:void 0}})}),right:b.b({defaultValue:$.b(qc),dependencies:["currentUserIsShareOwner","primaryInteractionMode"],downstreamBindings:{selectionModeIsActive:"(owner).selectionModeIsActive",isDisabled:"(owner).isAllAddedToLibrary"},readOnly:!0,strong:!0,get:Object.assign(function(e){if(!1===this.currentUserIsShareOwner&&(this.primaryInteractionMode===wt.a.TOUCH||!1===Qc.implicitDesktopSelectionMode))return e},{__CW__getter:function(e,t,n,i){if(!1===i.internalGet(this,t[0+n])&&(i.internalGet(this,t[1+n])===wt.a.TOUCH||!1===Qc.implicitDesktopSelectionMode))return e}})}),_selectAllButton:b.b({strong:!0,defaultValue:$.b(Yc),downstreamBindings:{numSelectableItems:"(owner).numSelectableItems",selectedItemCount:"(owner).selectedItemCount",isDisabled:"(owner).isAllAddedToLibrary"}}),collectionLength:b.b(),numSelectableItems:b.b(),currentUserIsShareOwner:b.b(),importIsInProgress:b.b(),isAllAddedToLibrary:b.b(),primaryInteractionMode:b.b(),selectedItemCount:b.b(),selectionModeIsActive:b.b()})),Jc=(n(1051),Ge.a.extend(Gc.a,{staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"sharePlacardView"},{type:"VIEWOUTLET",tagname:"view",name:"modeSelectionToolbarView"},{type:"VIEWOUTLET",tagname:"view",name:"shareDetailActionBarView"}],classes:["share-header-view"]},__QUALIFIED_CLASS_NAME__:"ShareHeaderView"},equilibriumHeight:b.b({readOnly:!0,dependencies:["sharePlacardView.equilibriumHeight","detailActionBarHeight","measuredModeSelectionToolbarHeight","extraBottomSpacing"],get:Object.assign(function(){return this.getPath("sharePlacardView.equilibriumHeight")+this.detailActionBarHeight+this.measuredModeSelectionToolbarHeight+this.extraBottomSpacing},{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])+i.internalGet(this,t[1+n])+i.internalGet(this,t[2+n])+i.internalGet(this,t[3+n])}})}),extraBottomSpacing:b.b({type:Number,readOnly:!0,dependencies:["rowSpacing","modeSelectionToolbarView"],get:Object.assign(function(){return this.modeSelectionToolbarView?0:this.rowSpacing},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[1+n])?0:i.internalGet(this,t[0+n])}})}),availableViewportHeight:b.b(),viewportHeight:b.b({readOnly:!0,dependencies:["availableViewportHeight","detailActionBarHeight"],get:Object.assign(function(){return Math.max(this.availableViewportHeight,this.detailActionBarHeight)},{__CW__getter:function(e,t,n,i){return Math.max(i.internalGet(this,t[0+n]),i.internalGet(this,t[1+n]))}})}),sharePlacardView:b.b({strong:!0,defaultValue:$.b(cc),downstreamBindings:{rootRecord:"(owner).rootRecord",primaryInteractionMode:"(owner).primaryInteractionMode",viewportWidth:"(owner).viewportWidth",availableHeightToDesire:"(owner).availableHeightForPlacardToDesire",importedAssetDescriptor:"(owner).importedAssetDescriptor",importedAssetCount:"(owner).importedAssetCount"}}),actionButton:b.b({type:Ge.a}),shareDetailView:b.b({type:Ge.a}),shareDetailActionBarView:b.b({strong:!0,readOnly:!0,get:function(){var e=this.actionButton,t=this.shareDetailView;return Hc.create({actionButton:e,shareDetailView:t})}}),expiryDate:b.b({dependencies:["rootRecord.expiryDate"],readOnly:!0,get:Object.assign(function(){return this.getPath("rootRecord.expiryDate")||0},{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])||0}})}),modeSelectionToolbarView:b.b({strong:!0,readOnly:!0,downstreamBindings:{collectionLength:"(owner).collectionLength",numSelectableItems:"(owner).numSelectableItems",currentUserIsShareOwner:"(owner).currentUserIsShareOwner",primaryInteractionMode:"(owner).primaryInteractionMode",importIsInProgress:"(owner).importIsInProgress",isAllAddedToLibrary:"(owner).isAllAddedToLibrary",selectedItemCount:"(owner).selectedItemCount",selectionModeIsActive:"(owner).selectionModeIsActive"},defaultValue:$.b(Zc)}),measuredModeSelectionToolbarHeight:b.b({readOnly:!0,dependencies:["modeSelectionToolbarView.isAttached"],get:Object.assign(function(){if(!this.getPath("modeSelectionToolbarView.isAttached"))return 0;var e=this._mmstHeight;if(e)return e;var t=this.modeSelectionToolbarView.element,n=t.style,i=n.width;return n.width="10000px",e=t.offsetHeight,n.width=i,this._mmstHeight=e},{__CW__getter:function(e,t,n,i){if(!i.internalGetPath(this,t[0+n]))return 0;var r=this._mmstHeight;if(r)return r;var a=this.modeSelectionToolbarView.element,s=a.style,o=s.width;return s.width="10000px",r=a.offsetHeight,s.width=o,this._mmstHeight=r}})}),detailActionBarHeight:b.b(Gt.c("shareDetailActionBarView.viewportHeight")),modeSelectionToolbarHeight:b.b({readOnly:!0,dependencies:["viewportHeight","sharePlacardHeight","detailActionBarHeight","extraBottomSpacing"],get:Object.assign(function(){return Math.max(0,this.viewportHeight-this.sharePlacardHeight-this.detailActionBarHeight-this.extraBottomSpacing)},{__CW__getter:function(e,t,n,i){return Math.max(0,i.internalGet(this,t[0+n])-i.internalGet(this,t[1+n])-i.internalGet(this,t[2+n])-i.internalGet(this,t[3+n]))}})}),sharePlacardHeight:b.b({readOnly:!0,dependencies:["viewportHeight","measuredModeSelectionToolbarHeight","detailActionBarHeight","extraBottomSpacing"],get:Object.assign(function(){return Math.max(0,this.viewportHeight-this.measuredModeSelectionToolbarHeight-this.detailActionBarHeight-this.extraBottomSpacing)},{__CW__getter:function(e,t,n,i){return Math.max(0,i.internalGet(this,t[0+n])-i.internalGet(this,t[1+n])-i.internalGet(this,t[2+n])-i.internalGet(this,t[3+n]))}})}),availableHeightForPlacardToDesire:b.b({readOnly:!0,dependencies:["availableHeightToDesire","measuredModeSelectionToolbarHeight","detailActionBarHeight"],get:Object.assign(function(){return this.availableHeightToDesire-this.measuredModeSelectionToolbarHeight-this.detailActionBarHeight},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])-i.internalGet(this,t[1+n])-i.internalGet(this,t[2+n])}})}),_maintainWidth:W.f({inputs:["viewportWidth","actionButton.titleDidRender"],callback:function(){this.style.set("width",this.viewportWidth),this.shareDetailView.didResizeHorizontally()}}),_maintainLayout:W.f({inputs:["viewportHeight","sharePlacardView","shareDetailActionBarView","modeSelectionToolbarView","sharePlacardHeight","detailActionBarHeight","modeSelectionToolbarHeight","measuredModeSelectionToolbarHeight"],callback:function(e,t,n,i,r,a,s,o){if(e&&t&&n&&!isNaN(r)&&a){var c=t.equilibriumHeight;t.viewportHeight=c,t.style.translateDevicePixels(0,r-c),n.style.translateDevicePixels(0,r),i&&i.style.translateDevicePixels(0,r+a+s-o)}}}),rootRecord:b.b(),collectionLength:b.b(),numSelectableItems:b.b(),currentUserIsShareOwner:b.b(),name:b.b(),isAuthenticated:b.b(),selectedItemCount:b.b(),assetCount:b.b(),photosCount:b.b(),videosCount:b.b(),selectionModeIsActive:b.b(),uploadIsComplete:b.b(),availableHeightToDesire:b.b(),primaryInteractionMode:b.b(),selectionHasBeenManipulated:b.b(),rowSpacing:b.b(),downloadIsInProgress:b.b(),importIsInProgress:b.b(),importedAssetDescriptor:b.b(),importedAssetCount:b.b(),isAllAddedToLibrary:b.b(),userIsUnableToImport:b.b()})),Xc=(n(1062),xt.a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"shouldHaveLargeTapTarget",truevalue:"expanded-touch-target",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isHidden",truevalue:"cw-hidden",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isPrimaryAction",truevalue:"primary-action",attributes:{}}]}},className:"cmm-button",__QUALIFIED_CLASS_NAME__:"ThemedButton"},shouldHaveLargeTapTarget:b.b({type:Boolean,readOnly:!0,dependencies:["primaryInteractionMode"],get:Object.assign(function(){return this.primaryInteractionMode===wt.a.TOUCH},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])===wt.a.TOUCH}})}),isHidden:b.b(!1),isPrimaryAction:b.b(!1),isDisabled:b.b({readOnly:!0,dependencies:["downloadIsInProgress","selectedItemCount","selectionModeIsActive","isAllAddedToLibrary"],get:Object.assign(function(){return this.downloadIsInProgress||this.selectionModeIsActive&&this.selectedItemCount<=0||this.isAllAddedToLibrary},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])||i.internalGet(this,t[2+n])&&i.internalGet(this,t[1+n])<=0||i.internalGet(this,t[3+n])}})}),keyEquivalent:b.b({readOnly:!0,dependencies:["isPrimaryAction"],get:Object.assign(function(){if(this.isPrimaryAction)return wi.a.ENTER},{__CW__getter:function(e,t,n,i){if(i.internalGet(this,t[0+n]))return wi.a.ENTER}})}),downloadIsInProgress:b.b(!1),importIsInProgress:b.b(!1),selectedItemCount:b.b(0),selectionModeIsActive:b.b(),isAllAddedToLibrary:b.b(!1),primaryInteractionMode:b.b()})),el=Xc.extend({title:b.b({readOnly:!0,dependencies:["isAuthenticated","primaryInteractionMode","selectionModeIsActive","assetCount","selectedItemCount","userIsUnableToImport"],get:Object.assign(function(){if(!this.isAuthenticated||this.userIsUnableToImport)return y.d("DownloadButton.Title");var e=this.primaryInteractionMode===wt.a.TOUCH?"Mobile":"Desktop",t=this.selectionModeIsActive&&this.assetCount!==this.selectedItemCount?"Active":"Inactive";return y.d("AddToLibraryButton."+e+".Selection.Mode."+t+".Title")},{__CW__getter:function(e,t,n,i){if(!i.internalGet(this,t[0+n])||i.internalGet(this,t[5+n]))return y.d("DownloadButton.Title");var r=i.internalGet(this,t[1+n])===wt.a.TOUCH?"Mobile":"Desktop",a=i.internalGet(this,t[2+n])&&i.internalGet(this,t[3+n])!==i.internalGet(this,t[4+n])?"Active":"Inactive";return y.d("AddToLibraryButton."+r+".Selection.Mode."+a+".Title")}})}),action:"doAddToLibraryButtonAction",isPrimaryAction:b.b(!0),isHidden:b.b({type:Boolean,readOnly:!0,dependencies:["currentUserIsShareOwner"],get:Object.assign(function(){return!0===this.currentUserIsShareOwner},{__CW__getter:function(e,t,n,i){return!0===i.internalGet(this,t[0+n])}})}),isAuthenticated:b.b(),assetCount:b.b(),userIsUnableToImport:b.b(!1),currentUserIsShareOwner:b.b(!1),staticMembers:{__QUALIFIED_CLASS_NAME__:"AddToLibraryButton"}}),tl=36e5,nl=24*tl,il="Expired",rl="ShowHour",al="Tomorrow",sl="WithinYear",ol="Others",cl={EXPIRED:il,SHOW_HOUR:rl,TOMORROW:al,WITHIN_YEAR:sl,OTHERS:ol};function ll(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Time.Remaining.Expires.";return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Time.Remaining.Expires.";if(void 0===e)throw new Error("timeRemaining must be one of "+Object.keys(cl).join(", ")+".");return y.d(n+e,{date:t,dateFormatter:ps.a})}(function(e,t){if(!ul(e))throw new Error("now must be a Date object.");if(!ul(t))throw new Error("target must be a Date object.");var n=t-e;switch(!0){case n<=0:return il;case to(e,t)||n<=11*tl:return rl;case n<=nl:return al;case n<=300*nl:return sl;default:return ol}}(e,t),t,n)}function ul(e){return e instanceof Date}n(1064);var dl,hl=["ReviewTitleView.NumberOfAvailableItems.0","ReviewTitleView.NumberOfAvailableItems.1","ReviewTitleView.NumberOfAvailableItems.2","ReviewTitleView.NumberOfAvailableItems.More"],pl=["ReviewTitleView.NumberOfSelectedItems.0","ReviewTitleView.NumberOfSelectedItems.1","ReviewTitleView.NumberOfSelectedItems.2","ReviewTitleView.NumberOfSelectedItems.More"],fl=((dl={})[Bs.b]=["ReviewTitleView.NumberOfPhotos.0","ReviewTitleView.NumberOfPhotos.1","ReviewTitleView.NumberOfPhotos.2","ReviewTitleView.NumberOfPhotos.More"],dl[Bs.c]=["ReviewTitleView.NumberOfVideos.0","ReviewTitleView.NumberOfVideos.1","ReviewTitleView.NumberOfVideos.2","ReviewTitleView.NumberOfVideos.More"],dl[Bs.a]=["ReviewTitleView.NumberOfItems.0","ReviewTitleView.NumberOfItems.1","ReviewTitleView.NumberOfItems.2","ReviewTitleView.NumberOfItems.More"],dl),gl=Ge.a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"titleString",attributes:{}}],name:"titleStringContainer",classes:["title-first-line"]},{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"displaySubtitleString",attributes:{}}],name:"displaySubtitleStringContainer",classes:["title-second-line"]},{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"expiryDateString",attributes:{}}],name:"expiryDateStringContainer",classes:["title-sub"]}],classes:["title-main",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"subtitleString",truevalue:"has-subtitle",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isLoading",truevalue:"is-loading",attributes:{}}]}]}},className:"cmm-review-title",__QUALIFIED_CLASS_NAME__:"ReviewTitleView"},currentUserIsShareOwner:b.b(),name:b.b(),assetCount:b.b(),photosCount:b.b(),videosCount:b.b(),uploadIsComplete:b.b(),selectedItemCount:b.b(),collectionLength:b.b(),expiryDate:b.b(),selectionHasBeenManipulated:b.b(),isLoading:b.b({type:Boolean,readOnly:!0,dependencies:["uploadIsComplete"],get:Object.assign(function(){return"boolean"!=typeof this.uploadIsComplete},{__CW__getter:function(e,t,n,i){return"boolean"!=typeof i.internalGet(this,t[0+n])}})}),didResizeHorizontally:W.g(),titleString:b.b({type:String,readOnly:!0,dependencies:["isAttached","didResizeHorizontally","name","currentUserIsShareOwner"],get:Object.assign(function(){if(this.isAttached){var e=this.name,t=this.currentUserIsShareOwner?y.d("ReviewTitleView.OriginatorTitle.You"):y.d("ReviewTitleView.OriginatorTitle.Name",{name:e});return this._fitStringToContainer(t,this.titleStringContainer)}},{__CW__getter:function(e,t,n,i){if(i.internalGet(this,t[0+n])){var r=this.name,a=i.internalGet(this,t[3+n])?y.d("ReviewTitleView.OriginatorTitle.You"):y.d("ReviewTitleView.OriginatorTitle.Name",{name:r});return this._fitStringToContainer(a,this.titleStringContainer)}}})}),subtitleString:b.b({type:String,readOnly:!0,dependencies:["isLoading","selectionHasBeenManipulated","_areItemsSelected","_availableSubtitleString","_selectedSubtitleString","uploadIsComplete","titleString","_itemsSubtitleString"],get:function(){if(!this.isLoading){var e=this.selectionHasBeenManipulated,t=this._areItemsSelected,n=this._availableSubtitleString,i=this._selectedSubtitleString,r=this.uploadIsComplete,a=this.titleString,s=this._itemsSubtitleString;if(a)return t&&e?i:r?s:n}}}),displaySubtitleString:b.b({type:String,readOnly:!0,dependencies:["isAttached","didResizeHorizontally","subtitleString"],get:Object.assign(function(){if(this.isAttached){var e=this.subtitleString,t=e?this._lastSubtitleString=e:this._lastSubtitleString;return this._fitStringToContainer(t,this.displaySubtitleStringContainer)}},{__CW__getter:function(e,t,n,i){if(i.internalGet(this,t[0+n])){var r=this.subtitleString,a=r?this._lastSubtitleString=r:this._lastSubtitleString;return this._fitStringToContainer(a,this.displaySubtitleStringContainer)}}})}),expiryDateString:b.b({type:String,readOnly:!0,dependencies:["isAttached","didResizeHorizontally","expiryDate"],get:Object.assign(function(){if(this.expiryDate&&this.isAttached){var e=ll(new Date,new Date(this.expiryDate));return this._fitStringToContainer(e,this.expiryDateStringContainer)}},{__CW__getter:function(e,t,n,i){if(i.internalGet(this,t[2+n])&&i.internalGet(this,t[0+n])){var r=ll(new Date,new Date(i.internalGet(this,t[2+n])));return this._fitStringToContainer(r,this.expiryDateStringContainer)}}})}),_areItemsSelected:b.b({type:Boolean,readOnly:!0,dependencies:["selectedItemCount"],get:function(){var e=this.selectedItemCount;return(void 0===e?0:e)>=1}}),_availableSubtitleString:b.b({type:String,readOnly:!0,dependencies:["collectionLength","assetCount"],get:function(){var e=this.collectionLength,t=void 0===e?0:e,n=this.assetCount,i=void 0===n?0:n;if(t)return Object(os.c)(hl,{count:t,assetCount:Object(os.b)(i)})}}),_itemsSubtitleString:b.b({type:String,readOnly:!0,dependencies:["collectionLength","photosCount","videosCount"],get:function(){var e=this.collectionLength,t=void 0===e?0:e,n=this.photosCount,i=void 0===n?0:n,r=this.videosCount,a=void 0===r?0:r;return Object(Bs.e)(t,i,a,fl)}}),_selectedSubtitleString:b.b({type:String,readOnly:!0,dependencies:["selectedItemCount"],get:function(){var e=this.selectedItemCount,t=void 0===e?0:e;return Object(os.c)(pl,{count:t})}}),_fitStringToContainer:function(e,t){if(!e)return"";var n=t.firstChild;t.removeChild(n);var i=this.element.offsetWidth;return t.insertBefore(n,t.firstChild),Vo(e,i,it.a(t).get("font"))}}),ml={viewClass:_.a({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"VIEWOUTLET",tagname:"view",name:"shareHeaderView"}]}}},shareHeaderView:b.b({strong:!0,defaultValue:$.b(Jc.extend({actionButton:b.b({defaultValue:$.b(el),downstreamBindings:{isAuthenticated:"(owner).isAuthenticated",assetCount:"(owner).assetCount",userIsUnableToImport:"(owner).userIsUnableToImport",currentUserIsShareOwner:"(owner).currentUserIsShareOwner",downloadIsInProgress:"(owner).downloadIsInProgress",importIsInProgress:"(owner).importIsInProgress",selectedItemCount:"(owner).selectedItemCount",selectionModeIsActive:"(owner).selectionModeIsActive",isAllAddedToLibrary:"(owner).isAllAddedToLibrary",primaryInteractionMode:"(owner).primaryInteractionMode"}}),shareDetailView:b.b({defaultValue:$.b(gl),downstreamBindings:{name:"(owner).name",currentUserIsShareOwner:"(owner).currentUserIsShareOwner",assetCount:"(owner).assetCount",photosCount:"(owner).photosCount",videosCount:"(owner).videosCount",selectedItemCount:"(owner).selectedItemCount",uploadIsComplete:"(owner).uploadIsComplete",collectionLength:"(owner).collectionLength",expiryDate:"(owner).expiryDate",selectionHasBeenManipulated:"(owner).selectionHasBeenManipulated"}})})),downstreamBindings:{rootRecord:"(owner).rootRecord",availableViewportHeight:"(owner).availableShareHeaderHeight",collectionLength:"(owner).collectionLength",numSelectableItems:"(owner).numSelectableItems",currentUserIsShareOwner:"(owner).currentUserIsShareOwner",name:"(owner).name",isAuthenticated:"(owner).isAuthenticated",selectedItemCount:"(owner).selectedItemCount",assetCount:"(owner).assetCount",photosCount:"(owner).photosCount",videosCount:"(owner).videosCount",selectionModeIsActive:"(owner).selectionModeIsActive",uploadIsComplete:"(owner).uploadIsComplete",availableHeightToDesire:"(owner).availableHeightForHeaderToDesire",primaryInteractionMode:"(owner).primaryInteractionMode",selectionHasBeenManipulated:"(owner).selectionHasBeenManipulated",rowSpacing:"(owner).rowSpacing",downloadIsInProgress:"(owner).downloadIsInProgress",importIsInProgress:"(owner).importIsInProgress",importedAssetDescriptor:"(owner).importedAssetDescriptor",importedAssetCount:"(owner).importedAssetCount",isAllAddedToLibrary:"(owner).isAllAddedToLibrary",userIsUnableToImport:"(owner).userIsUnableToImport"}}),rootRecord:b.b(),availableShareHeaderHeight:b.b(),collectionLength:b.b(),numSelectableItems:b.b(),currentUserIsShareOwner:b.b(),name:b.b(),isAuthenticated:b.b(),selectedItemCount:b.b(),assetCount:b.b(),photosCount:b.b(),videosCount:b.b(),selectionModeIsActive:b.b(),uploadIsComplete:b.b(),availableHeightForHeaderToDesire:b.b(),primaryInteractionMode:b.b(),selectionHasBeenManipulated:b.b(),rowSpacing:b.b(),downloadIsInProgress:b.b(),importIsInProgress:b.b(),importedAssetDescriptor:b.b(),importedAssetCount:b.b(),isAllAddedToLibrary:b.b(),userIsUnableToImport:b.b()}),view:b.b({strong:!0,downstreamBindings:{rootRecord:"(owner).rootRecord",availableShareHeaderHeight:"(owner).availableShareHeaderHeight",collectionLength:"(owner).collection.length",numSelectableItems:"(owner).numSelectableItems",currentUserIsShareOwner:"(owner).currentUserIsShareOwner",name:"(owner).name",isAuthenticated:"(owner).isAuthenticated",selectedItemCount:"(owner).selectedItemCount",assetCount:"(owner).assetCount",photosCount:"(owner).photosCount",videosCount:"(owner).videosCount",selectionModeIsActive:"(owner).selectionModeIsActive",uploadIsComplete:"(owner).uploadIsComplete",availableHeightForHeaderToDesire:"(owner).availableHeightForHeaderToDesire",primaryInteractionMode:"(owner).primaryInteractionMode",selectionHasBeenManipulated:"(owner).selectionHasBeenManipulated",rowSpacing:"(owner).layoutMetrics.rowSpacing",downloadIsInProgress:"(owner).downloadIsInProgress",importIsInProgress:"(owner).importIsInProgress",importedAssetDescriptor:"(owner).importedAssetDescriptor",importedAssetCount:"(owner).importedAssetCount",isAllAddedToLibrary:"(owner).isAllAddedToLibrary",userIsUnableToImport:"(owner).userIsUnableToImport"}}),numSelectableItems:b.b({readOnly:!0,dependencies:["collection","collection.length","importedAssetCount"],get:function(){var e=this.collection,t=this.importedAssetCount;if(!e)return 0;var n=t||0;return e.length-n}}),availableShareHeaderHeight:b.b({readOnly:!0,dependencies:["emptyAvailableSpaceAtTop","view.shareHeaderView.equilibriumHeight"],get:Object.assign(function(){var e=this.emptyAvailableSpaceAtTop,t=isNaN(e)?this.getPath("view.shareHeaderView.equilibriumHeight"):e;return Math.max(0,t)},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=isNaN(r)?i.internalGetPath(this,t[1+n]):r;return Math.max(0,a)}})}),availableHeightForHeaderToDesire:b.b({readOnly:!0,dependencies:["layoutMetrics.rowHeight","layoutMetrics.rowSpacing","viewportHeight"],get:Object.assign(function(){return 0+this.viewportHeight-this.getPath("layoutMetrics.rowHeight")/2-this.getPath("layoutMetrics.rowSpacing")},{__CW__getter:function(e,t,n,i){return 0+i.internalGet(this,t[2+n])-i.internalGetPath(this,t[0+n])/2-i.internalGetPath(this,t[1+n])}})}),layoutMetricsTopPadding:b.b({readOnly:!0,dependencies:["view.shareHeaderView.equilibriumHeight"],get:Object.assign(function(){return Math.max(0,this.getPath("view.shareHeaderView.equilibriumHeight"))},{__CW__getter:function(e,t,n,i){return Math.max(0,i.internalGetPath(this,t[0+n]))}})}),layoutMetrics:b.b({defaultValue:_.a({headerHeight:0}),downstreamBindings:{topPadding:"(owner).layoutMetricsTopPadding"}}),emptyAvailableSpaceAtTop:b.b(),presenter:_.a({cellsDidMove:function(e){var t=arguments;this.__s._$3nV$cellsDidMove.apply(this,t),this.owner._updateEmptyAvailableSpaceAtTop(e)},__superMap:{_$3nV$cellsDidMove:"cellsDidMove"}}),_updateEmptyAvailableSpaceAtTop:function(e){var t=this.collection.objectAt(0),n=1/0,i=!1;t||0===e.length||(i=!0);var a=e,s=Array.isArray(a),o=0;for(a=s?a:a[Symbol.iterator]();;){var c;if(s){if(o>=a.length)break;c=a[o++]}else{if((o=a.next()).done)break;c=o.value}var l=c;if("item"===l.cellType){l.y<n&&(n=l.y);try{l.value===t&&(i=!0)}catch(e){var u=l?l.handle:"{nonexistent cell}",d=u&&"{nonexistent cell}"!==u?"string"==typeof u.encodedValue?u.encodedValue.replace(/[\w\d]/g,"X"):u.encodedValue:"{nonexistent cell.handle}",h=u&&"{nonexistent cell}"!==u?u.isValid:"{nonexistent cell.handle}",p=u&&"{nonexistent cell}"!==u?u.wasRemoved:"{nonexistent cell.handle}",f=u&&"{nonexistent cell}"!==u?u.isDisposed:"{nonexistent cell.handle}",g=u&&"{nonexistent cell}"!==u?u.isPooled:"{nonexistent cell.handle}",m=u&&"{nonexistent cell}"!==u?u._retainCount:"{nonexistent cell.handle}",v=l?l._owner:"{nonexistent cell}",_=v&&"{nonexistent cell}"!==v?v.owner:"{nonexistent cell._owner}",b=_&&"{nonexistent cell._owner}"!==_?_===this:"{nonexistent cell._owner.owner}",y=l?l._retainCount:"{nonexistent cell}",I=l?l.isDisposed:"{nonexistent cell}",w=l?l.isPooled:"{nonexistent cell}",S=this.view,C=S?S.isDisposed:"{nonexistent this.view}",O=S?!1===C?S.isAttached:"{disposed this.view}":"{nonexistent this.view}",A=this.isAttached,E=this.isDisposed;this.reportFeedback("invalidStoreID",{cellHandleEncodedValuePeek:d,cellHandleStringified:String(u),cellHandleIsValid:h,cellHandleWasRemoved:p,cellHandleIsDisposed:f,cellHandleIsPooled:g,cellHandleRetainCount:m,cellOwnerStringified:String(v),cellOwnerOwnerStringified:String(_),cellOwnerOwnerIsThisGridVC:b,cellRetainCount:y,cellIsDisposed:I,cellIsPooled:w,ourViewIsDisposed:C,ourViewIsAttached:O,thisVCIsAttached:A,thisVCIsDisposed:E}),r.b("Could not look up `cell.value`. Likely an invalid store ID was provided. Error: "+e)}}}this.emptyAvailableSpaceAtTop=i?Math.round(Math.max(0,n)):e.length?0:void 0},reportFeedback:function(e,t){var n=d.b().feedbackService;n&&n.report&&n.report(e,t)},viewportWidth:ai.a.define(),_maintainHeaderLayout:W.f({inputs:["viewportWidth","layoutMetrics.sectionLeftPadding","layoutMetrics.sectionRightPadding"],callback:function(e,t,n){this.view&&this.view.shareHeaderView&&(this.view.shareHeaderView.style.set("left",Math.round(t)),this.view.shareHeaderView.viewportWidth=Math.max(0,Math.ceil(0+e-t-n)))}}),rootRecord:b.b(),currentUserIsShareOwner:b.b(),name:b.b(),isAuthenticated:b.b(),selectedItemCount:b.b(),assetCount:b.b(),photosCount:b.b(),videosCount:b.b(),selectionModeIsActive:b.b(),uploadIsComplete:b.b(),primaryInteractionMode:b.b(),selectionHasBeenManipulated:b.b(),downloadIsInProgress:b.b(),importIsInProgress:b.b(),importedAssetDescriptor:b.b(),importedAssetCount:b.b()},vl=n(184),_l=(n(1041),n(1039)),bl=n(1040),yl=xt.a.extend(Nr.a,{staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",classes:["dot-dot-dot-button"]}},__QUALIFIED_CLASS_NAME__:"DotDotDotButton"},icon:b.b({dependencies:["primaryInteractionMode"],readOnly:!0,type:String,get:Object.assign(function(){return this.primaryInteractionMode===wt.a.MOUSE?bl:_l},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])===wt.a.MOUSE?bl:_l}})}),primaryInteractionMode:b.b()}),Il=n(1250),wl=Ge.a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"MULTIVIEWOUTLET",tagname:"views",name:"buttons",classes:["buttons-container"]}]}},__QUALIFIED_CLASS_NAME__:"PopoverWithButtonListContentView"},_measure:W.f({inputs:["isAttached","buttons"],callback:function(e){if(e){this.get("style").set("width","auto").set("height","auto");var t=this.element,n=this.desiredSize;n.set("width",t.offsetWidth),n.set("height",t.offsetHeight),this.get("style").set("width","").set("height","")}}}),desiredSize:b.b({strong:!0,defaultValue:$.b(Ci.a,{width:"100%",height:"100%"})}),buttons:b.b()}),Sl=Ve.a.extend({viewClass:wl,view:b.b({downstreamBindings:{buttons:"(owner).buttons"}}),buttons:b.b(),staticMembers:{__QUALIFIED_CLASS_NAME__:"PopoverWithButtonListContentController"}}),Cl=(n(1043),Il.a.extend(vl.a,{viewClass:_.a({additionalClassNames:_.a(["popover-with-button-list"])}),desiredSize:b.b({strong:!0,binding:Gt.c("contentController.view.desiredSize")}),contentController:b.b({defaultValue:$.b(Sl),downstreamBindings:{buttons:"(owner).buttons"}}),buttons:b.b(),nextResponder:b.b(),staticMembers:{__QUALIFIED_CLASS_NAME__:"PopoverWithButtonList"}})),Ol=function(){var e=v.a,t=function(t){var n=e.create();try{t(n.resolve.bind(n),n.reject.bind(n))}catch(e){n.reject(e)}return n};return t.all=e.all.bind(e),t.race=e.race.bind(e),t.resolve=e.resolve.bind(e),t.reject=e.reject.bind(e),t}(),Al=xt.a.extend({additionalClassNames:_.a(["destructive"]),title:y.d("StopSharingButton.Title"),action:"_showConfirmationAlert",zone:b.b(),primaryInteractionMode:b.b(),_showConfirmationAlert:function(){var e={title:y.d("StopSharingButton.Alert.Button.Cancel")},t={title:y.d("StopSharingButton.Alert.Button.Confirm"),target:this,action:"_deleteShare",additionalClassNames:_.a(["destructive"])},n={iconNames:["photos-icon"],description:y.d("StopSharingButton.Alert.Description"),alertStyle:wc.a.ACTION_SHEET};this.primaryInteractionMode===wt.a.TOUCH?(n.primaryButton=e,n.alternateButton=t):(n.primaryButton=t,n.alternateButton=e,n.message=y.d("StopSharingButton.Alert.Message")),mn.a.show(n)},_deleteShare:function(){var e,t=this;return(e=regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.zone,e.prev=1,n){e.next=4;break}throw new TypeError("Expected zone to not be undefined");case 4:return e.next=6,n.delete();case 6:t._reloadPage(),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),c.b.error("Failed to remove share",e.t0),mn.a.show({iconNames:["photos-icon","error"],message:y.d("StopSharingButton.Error.Alert.Message"),primaryButton:{title:y.d("StopSharingButton.Error.Alert.Button"),action:"hide"}});case 13:case"end":return e.stop()}},e,t,[[1,9]])}),function(){var t=e.apply(this,arguments);return new Ol(function(e,n){return function i(r,a){try{var s=t[r](a),o=s.value}catch(e){return void n(e)}if(!s.done)return Ol.resolve(o).then(function(e){i("next",e)},function(e){i("throw",e)});e(o)}("next")})})()},_reloadPage:function(){window.top.location.reload()},staticMembers:{__QUALIFIED_CLASS_NAME__:"StopSharingButton"}}),El=Xt.extend(vl.a,{rightBarButtonItem:b.b({dependencies:["dotDotDotMenuIsEmpty"],readOnly:!0,get:Object.assign(function(){if(!1===this.dotDotDotMenuIsEmpty)return this.dotDotDotButton},{__CW__getter:function(e,t,n,i){if(!1===i.internalGet(this,t[0+n]))return this.dotDotDotButton}})}),dotDotDotButton:b.b({defaultValue:$.b(yl.extend({action:"showDotDotDotMenu"})),downstreamBindings:{target:"(owner)",primaryInteractionMode:"(owner).primaryInteractionMode"},readOnly:!0,strong:!0,type:yl}),showDotDotDotMenu:function(){this.primaryInteractionMode===wt.a.MOUSE?this.showDotDotDotMenuForMouse():this.showDotDotDotMenuForTouch()},showDotDotDotMenuForTouch:function(){var e={alertStyle:wc.a.ACTION_SHEET,buttons:G.b.create([{action:"hide",isPrimary:!0,title:y.d("CMMReceiver.DotDotDotMenu.Cancel")}]),nextResponder:this};void 0!==this.stopSharingMenuButton&&e.buttons.push(this.stopSharingMenuButton),void 0!==this.shareBackMenuButton&&e.buttons.push(this.shareBackMenuButton),void 0!==this.copyLinkMenuButton&&e.buttons.push(this.copyLinkMenuButton),mn.a.show(e).view.contentView.enableAllButtons()},showDotDotDotMenuForMouse:function(){var e=G.b.create([]);void 0!==this.copyLinkMenuButton&&e.push(this.copyLinkMenuButton),void 0!==this.shareBackMenuButton&&e.push(this.shareBackMenuButton),void 0!==this.stopSharingMenuButton&&e.push(this.stopSharingMenuButton),(this.dotDotDotPopoverForMouse=Cl.extend({nextResponder:this}).create({buttons:e})).toggle(this.dotDotDotButton)},hideDotDotDotMenuForMouse:function(){var e=this.dotDotDotPopoverForMouse;void 0!==e&&e.hidePopover()},dotDotDotMenuIsEmpty:b.b({dependencies:["copyLinkMenuButton","shareBackMenuButton","stopSharingMenuButton"],readOnly:!0,type:Boolean,get:function(){var e=this.copyLinkMenuButton,t=this.shareBackMenuButton,n=this.stopSharingMenuButton;return void 0===e&&void 0===t&&void 0===n}}),stopSharingMenuButton:b.b({dependencies:["currentUserIsShareOwner","primaryInteractionMode"],readOnly:!0,type:xt.a,get:function(){var e=this.currentUserIsShareOwner,t=this.primaryInteractionMode===wt.a.TOUCH;if(!0===e){var n=Al;return t||(n=n.extend({_showConfirmationAlert:function(){var e=arguments;this.sendEvent("hideDotDotDotMenuForMouse"),this.__s._$1YI$_showConfirmationAlert.apply(this,e)},__superMap:{_$1YI$_showConfirmationAlert:"_showConfirmationAlert"}})),n.create({primaryInteractionMode:this.bindingFor("primaryInteractionMode"),zone:this.bindingFor("zone")})}}}),shareBackMenuButton:b.b({dependencies:["primaryInteractionMode","shareBackReadyForDisplay"],readOnly:!0,type:xt.a,get:function(){var e=this.primaryInteractionMode,t=this.shareBackReadyForDisplay,n=e===wt.a.TOUCH;if(!0===t){var i=xt.a;return(i=n?i.extend({action:"viewShareBack"}):i.extend({wasActivated:function(){this.sendEvent("viewShareBack"),this.sendEvent("hideDotDotDotMenuForMouse")}})).create({title:y.d("CMMReceiver.DotDotDotMenu.ShareBack")})}}}),copyLinkMenuButton:b.b({dependencies:["primaryInteractionMode","isAuthenticated"],readOnly:!0,type:xt.a,get:function(){var e=this.primaryInteractionMode,t=this.isAuthenticated,n=e===wt.a.TOUCH;if(!0===t){var i=xt.a;return(i=n?i.extend({action:"copyICloudLink"}):i.extend({wasActivated:function(){this.sendEvent("copyICloudLink"),this.sendEvent("hideDotDotDotMenuForMouse")}})).create({title:y.d("CMMReceiver.DotDotDotMenu.CopyLink")})}}}),zone:b.b({dependencies:["container"],readOnly:!0,get:function(){return this.getPath("container.zone")}}),container:b.b(),currentUserIsShareOwner:b.b(),isAuthenticated:b.b(),nextResponder:b.b(),primaryInteractionMode:b.b(),shareBackReadyForDisplay:b.b(),staticMembers:{__QUALIFIED_CLASS_NAME__:"ReceiverPageNavItem"}}),Tl=n(285),Ml=(n(1037),yi.extend({mixinDependencies:[Tl.c],staticMembers:{className:"cmm-receiver-page",__QUALIFIED_CLASS_NAME__:"ReceiverPageView"},primaryInteractionMode:b.b()})),Dl=n(516),Ll=n(162),Nl=n(107),Pl=(n(1029),n(1031),n(1033),Ii.a.sharedInstance),Rl=Ge.a.extend(qs.a,{staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",classes:["cw-slider-track"],name:"track"},{type:"ELEMENT",tagname:"div",classes:["cw-slider-track-before"],name:"trackBefore"},{type:"ELEMENT",tagname:"div",classes:["cw-slider-handle"],name:"handle"}],classes:["cw-slider",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"hasLeftIcon",truevalue:"cw-has-left-icon",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"hasRightIcon",truevalue:"cw-has-right-icon",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isVertical",truevalue:"cw-vertical",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isHorizontal",truevalue:"cw-horizontal",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isBeingDragged",truevalue:"cw-being-dragged",attributes:{}}],attributes:{title:{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"tooltip",attributes:{},attribute:"title"}}}},className:"cw-ui-slider-view",__QUALIFIED_CLASS_NAME__:"SliderView"},tooltip:Object(b.b)(""),hasLeftIcon:Object(b.b)(!1),hasRightIcon:Object(b.b)(!1),pointerPadding:Object(b.b)(),isBeingDragged:Object(b.b)({readOnly:!0,dependencies:["_currentDragOffset"],get:Object.assign(function(){return!isNaN(this._currentDragOffset)},{__CW__getter:function(e,t,n,i){return!isNaN(i.internalGet(this,t[0+n]))}})}),step:Object(b.b)(0),minValue:Object(b.b)(0),maxValue:Object(b.b)(1),value:Object(b.b)(.5),handleLength:Object(b.b)(0),trackLength:Object(b.b)(0),handlePositionTween:Object(b.b)(),isVertical:Object(b.b)(!1),isHorizontal:Object(b.b)({dependencies:["isVertical"],get:Object.assign(function(){return!this.isVertical},{__CW__getter:function(e,t,n,i){return!i.internalGet(this,t[0+n])}}),set:Object.assign(function(e){this.isVertical=!e},{__CW__setter:function(e,t,n,i,r){n[0+i]=!e}}),writeDependencySetPathMap:["false"]}),isScrollingEnabled:Object(b.b)(!0),layoutMayHaveChanged:function(){this._measureSelf()},intervals:Object(b.b)(),notchValues:Object(b.b)(),notchSnapDistance:2,_isReversed:Object(b.b)({readOnly:!0,dependencies:["minValue","maxValue"],get:Object.assign(function(){return this.minValue>this.maxValue},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])>i.internalGet(this,t[1+n])}})}),_minValue:Object(b.b)({readOnly:!0,dependencies:["_isReversed","minValue","maxValue"],get:Object.assign(function(){return this._isReversed?this.maxValue:this.minValue},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?i.internalGet(this,t[2+n]):i.internalGet(this,t[1+n])}})}),_maxValue:Object(b.b)({readOnly:!0,dependencies:["_isReversed","minValue","maxValue"],get:Object.assign(function(){return this._isReversed?this.minValue:this.maxValue},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?i.internalGet(this,t[1+n]):i.internalGet(this,t[2+n])}})}),_notchPositions:Object(b.b)({cacheable:!0,readOnly:!0,dependencies:["notchValues","_minValue","_maxValue","_handleTravel","_inverseHandlePositionTween"],get:Object.assign(function(){var e=this.notchValues,t=this._minValue,n=this._maxValue;if(!e)return[];var i,r,a=[],s=e.length;for(i=0;i<s;i++)+(r=e[i])!==r||r<=t||r>=n||a.push(this._rawIdealHandlePositionForValue(r,t,n,this._handleTravel,this._inverseHandlePositionTween));return a.sort(Fl),a},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]),s=i.internalGet(this,t[2+n]);if(!r)return[];var o,c=[],l=r.length;for(o=0;o<l;o++)+(e=r[o])!==e||e<=a||e>=s||c.push(this._rawIdealHandlePositionForValue(e,a,s,i.internalGet(this,t[3+n]),i.internalGet(this,t[4+n])));return c.sort(Fl),c}})}),_scaledHandlePositionTween:Object(b.b)({readOnly:!0,dependencies:["handlePositionTween"],get:Object.assign(function(){var e=this.handlePositionTween;if(e||(e=kl),e._slider_scaledTween)return e._slider_scaledTween;var t=e(0),n=e(1);return t===+t&&n===+n&&t!==n||Object(r.b)("Function ƒ used for handlePositionTween must return numbers, and ƒ(0) cannot equal ƒ(1).",{fOf0:t,fOf1:n,tweenFunction:e}),e._slider_scaledTween=function(i){return(e(i)-t)/(n-t)}},{__CW__getter:function(e,t,n,i){var a=i.internalGet(this,t[0+n]);if(a||(a=kl),a._slider_scaledTween)return a._slider_scaledTween;var s=a(0),o=a(1);return s===+s&&o===+o&&s!==o||Object(r.b)("Function ƒ used for handlePositionTween must return numbers, and ƒ(0) cannot equal ƒ(1).",{fOf0:s,fOf1:o,tweenFunction:a}),a._slider_scaledTween=function(e){return(a(e)-s)/(o-s)}}})}),_handlePositionTween:xl("_scaledHandlePositionTween"),_inverseScaledHandlePositionTween:Object(b.b)({readOnly:!0,dependencies:["_scaledHandlePositionTween"],get:Object.assign(function(){var e=this._scaledHandlePositionTween;return e._slider_inverseTween?e._slider_inverseTween:e._slider_inverseTween=function(t){var n,i,r=0,a=1;do{(n=e(i=(a+r)/2)-t)<0?r=i:a=i}while(n>1e-7||n<-1e-7);return i}},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return r._slider_inverseTween?r._slider_inverseTween:r._slider_inverseTween=function(e){var t,n,i=0,a=1;do{(t=r(n=(a+i)/2)-e)<0?i=n:a=n}while(t>1e-7||t<-1e-7);return n}}})}),_inverseHandlePositionTween:xl("_inverseScaledHandlePositionTween"),_handleTravel:Object(b.b)({readOnly:!0,dependencies:["handleLength","trackLength"],get:Object.assign(function(){return this.trackLength-this.handleLength},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[1+n])-i.internalGet(this,t[0+n])}})}),_rawIdealHandlePositionForValue:function(e,t,n,i,r){return r((e-t)/(n-t))*i},_idealHandlePositionForValue:function(e){return this._rawIdealHandlePositionForValue(e,this._minValue,this._maxValue,this._handleTravel,this._inverseHandlePositionTween)},_rawIdealValueForHandlePosition:function(e,t,n,i,r){return r(e/i)*(n-t)+t},_idealValueForHandlePosition:function(e){return this._rawIdealValueForHandlePosition(e,this._minValue,this._maxValue,this._handleTravel,this._handlePositionTween)},_handlePosition:Object(b.b)({dependencies:["value","_minValue","_maxValue","_handleTravel","_inverseHandlePositionTween",Pl.bindingFor("devicePixelRatio")],writeDependencies:["value"],get:Object.assign(function(){var e=this._minValue,t=this._maxValue,n=Math.max(e,Math.min(t,this.value)),i=this._handleTravel,r=this._inverseHandlePositionTween,a=Pl.devicePixelRatio,s=this._rawIdealHandlePositionForValue(n,e,t,i,r);return s=Math.round(s*a)/a,Math.max(0,Math.min(i,s))},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[1+n]),a=i.internalGet(this,t[2+n]),s=(e=Math.max(r,Math.min(a,i.internalGet(this,t[0+n]))),i.internalGet(this,t[3+n])),o=i.internalGet(this,t[4+n]),c=i.internalGetPath(this,t[5+n]),l=this._rawIdealHandlePositionForValue(e,r,a,s,o);return l=Math.round(l*c)/c,Math.max(0,Math.min(s,l))}}),set:Object.assign(function(e){var t=this._minValue,n=this._maxValue,i=this._handleTravel,r=this._handlePositionTween,a=this.step;e=Math.max(0,Math.min(i,e));var s=this._rawIdealValueForHandlePosition(e,t,n,i,r);a&&(s=Math.round((s-t)/a)*a+t),s=Math.max(Math.min(s,n),t);var o=this.intervals;if(o)for(var c=o.length;c;){var l=o[1+(c-=2)],u=o[c],d=c?o[c-1]:-1/0;if(s<=l&&s>=u)break;if(s>d){s=s>l?l:Math.abs(s-u)<Math.abs(s-d)?u:d;break}if(!c&&s<u){s=u;break}}this.value=s},{__CW__setter:function(e,t,n,i,r){var a=this._minValue,s=this._maxValue,o=this._handleTravel,c=this._handlePositionTween,l=this.step;e=Math.max(0,Math.min(o,e));var u=this._rawIdealValueForHandlePosition(e,a,s,o,c);l&&(u=Math.round((u-a)/l)*l+a),u=Math.max(Math.min(u,s),a);var d=this.intervals;if(d)for(var h=d.length;h;){var p=d[1+(h-=2)],f=d[h],g=h?d[h-1]:-1/0;if(u<=p&&u>=f)break;if(u>g){u=u>p?p:Math.abs(u-f)<Math.abs(u-g)?f:g;break}if(!h&&u<f){u=f;break}}n[0+i]=u}}),writeDependencySetPathMap:["false"]}),_transformPositionKey:Object(b.b)({readOnly:!0,dependencies:["isHorizontal"],get:Object.assign(function(){return this.isHorizontal?"translateX":"translateY"},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?"translateX":"translateY"}})}),_measurementLengthKey:Object(b.b)({readOnly:!0,dependencies:["isHorizontal"],get:Object.assign(function(){return this.isHorizontal?"offsetWidth":"offsetHeight"},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?"offsetWidth":"offsetHeight"}})}),_getPositionFromEvent:function(e){var t=this.element.getBoundingClientRect();return this.isHorizontal?e.clientX-t.left:this.trackLength-(e.clientY-t.top)},pointerDown:function(e){var t=arguments;if(this.__s._$6Zo$pointerDown.apply(this,t),!this.isDisabled){var n=this._getPositionFromEvent(e);this._prepareForDrag(n);var i=-this._currentDragOffset;return e.target!==this.handle&&(i<0||i>this.handleLength)&&this._jumpToCursor(n),!0}},pointerMove:function(e){var t=arguments;if(this.__s._$6uF$pointerMove.apply(this,t),!this.isDisabled)return this._moveDrag(this._getPositionFromEvent(e)),!0},pointerUp:function(e){var t=arguments;if(this.__s._$6y0$pointerUp.apply(this,t),!this.isDisabled)return this._endDrag(this._getPositionFromEvent(e)),!0},wheel:function(e){if(!this.isDisabled&&this.isScrollingEnabled&&(e.preventDefault(),!this.isBeingDragged)){var t=I.a.getPath("sharedInstance.isMac")?-1:1,n=this._minValue,i=this._maxValue,r=this.value,a=Math.max(0,Math.min(1,(r-n)/(i-n))),s=this._inverseHandlePositionTween(a)+(-e.deltaX+e.deltaY)/1e3*t,o=n+this._handlePositionTween(Math.max(0,Math.min(1,s)))*(i-n);return r!==o&&(this.value=o),!0}},_currentDragOffset:Object(b.b)(NaN),_prepareForDrag:function(e){this._currentDragOffset=this._handlePosition-e},_moveDrag:function(e){if(this.isBeingDragged){for(var t,n=e+this._currentDragOffset,i=this._notchPositions,r=this.notchSnapDistance,a=i.length;a--;)t=i[a],Math.abs(t-n)<r&&(n=t);this._handlePosition=n}},_endDrag:function(e){this._currentDragOffset=NaN},_endDragWhenBecomesDisabled:Object(W.f)("isDisabled",function(e){e&&this.isBeingDragged&&this._endDrag()}),_jumpToCursor:function(e){this._currentDragOffset=-this.handleLength/2|0,this._moveDrag(e)},_positionHandle:Object(W.f)("_handlePosition","isVertical","_handleTravel","_transformPositionKey",function(e,t,n,i){var r,a=+e===e?t?n-e:e:n/2,s="translateX"===i?"width":"top";Object(it.a)(this.trackBefore,((r={})[s]=a,r)),Object(it.a)(this.handle)[i](a)}),_measureSelf:Object(W.f)("isAttached","_measurementLengthKey",function(e,t){e&&this.beginBatchSet().setIfChanged("handleLength",this.handle[t]).setIfChanged("trackLength",this.element[t]).end()}),_maintainPointerPaddingElement:Object(W.f)("pointerPadding",function(e){var t=0|(e&&e.left),n=0|(e&&e.top),i=0|(e&&e.right),r=0|(e&&e.bottom),a=this._pointerPaddingElement;t||n||i||r?(a||(a=this._pointerPaddingElement=document.createElement("div")),Object(it.a)(a).set("position","absolute").set("left",-t).set("top",-n).set("right",-i).set("bottom",-r),a.parentNode||this.element.appendChild(a)):a&&a.parentNode&&this.element.removeChild(a)}),__superMap:{_$6Zo$pointerDown:"pointerDown",_$6uF$pointerMove:"pointerMove",_$6y0$pointerUp:"pointerUp"}});function xl(e){return Object(b.b)({dependencies:[e,"_isReversed"],readOnly:!0,get:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return i.internalGet(this,t[1+n])?r._slider_reversedTween?r._slider_reversedTween:r._slider_reversedTween=function(e){return 1-r(e)}:r}})}function Fl(e,t){return e-t}function kl(e){return e}kl._slider_scaledTween=kl,kl._slider_inverseTween=kl;var Vl=Rl.extend({staticMembers:{className:"toolbar-slider",__QUALIFIED_CLASS_NAME__:"ToolbarSliderView"},isDisabled:b.b(!1),tooltip:b.b(""),value:b.b(NaN),minValue:b.b(NaN),maxValue:b.b(NaN),notchValues:b.b(),handlePositionTween:b.b(),step:b.b(NaN),isScrollingEnabled:b.b(!0)}).extend({staticMembers:{className:"toolbar-zoom-slider",__QUALIFIED_CLASS_NAME__:"ToolbarZoomSliderView"},unzoomedZoomLevel:b.b(),_maintainHandleReadout:W.f({inputs:["value","unzoomedZoomLevel","minValue","maxValue"],callback:function(e,t,n){if(e&&t){e!==n&&this._bringUpHandleReadout();var i=this._readoutElement;if(i){var r=Math.round(100*e),a=r?e===t?y.d("Slider.ToolbarSlider.Tooltip.FitsInWindow"):r+"%":"";i.textContent=a,i.classList.toggle("percentage","%"===a.slice(-1))}}}}),_bringUpHandleReadout:function(){var e=this._readoutElement;e||(this._readoutElement=e=document.createElement("div"),e.classList.add("handle-readout"),this.handle.appendChild(e)),it.a(e).set("opacity",1),this._readoutDeathTimeout&&clearTimeout(this._readoutDeathTimeout),this._readoutDeathTimeout=s.a(this._killHandleReadout.bind(this),1e3)},_killHandleReadout:function(){var e=this._readoutElement;e&&it.a(e).set("opacity",0)}}),jl={zoomSlider:b.b({readOnly:!0,strong:!0,get:function(){var e="oneUpViewController.surrogateOneUpNavigee";return Vl.create({value:this.bindingFor(e+".zoomLevel"),isDisabled:this.bindingFor(e+".cannotZoom"),unzoomedZoomLevel:this.bindingFor(e+".unzoomedZoomLevel"),minValue:this.bindingFor(e+".minZoomLevel"),maxValue:this.bindingFor(e+".maxZoomLevel"),zoomSteps:this.bindingFor(e+".zoomSteps"),notchValues:this.bindingFor("zoomSliderNotchValues"),handlePositionTween:this.zoomSliderHandlePositionTween})}}),zoomSliderHandlePositionTween:function(e){return Math.pow(2,Math.pow(e+.3,2))},zoomSliderNotchValues:b.b({readOnly:!0,dependencies:["oneUpViewController.surrogateOneUpNavigee.zoomSteps","oneUpViewController.surrogateOneUpNavigee.unzoomedZoomLevel"],get:function(){var e=this._notchValuesLastRet;e&&(this._notchValuesLastRet=null,Mn.c.disposeInstance(e));var t=this.oneUpViewController.surrogateOneUpNavigee,n=t.zoomSteps,i=t.unzoomedZoomLevel;if(!n||!i)return null;for(var r=Mn.c.getInstance(),a=Math.log(2),s=1,o=n.length-1;s<o;s++){var c=n[s],l=Math.log(c)/a;l!==(0|l)&&c!==i||r.push(c)}return this._notchValuesLastRet=r}})},Bl=n(1028),Ul=Js.extend({incomingTransitionClass:bo,outgoingTransitionClass:_o,mixinDependencies:[js,Be,po,jl,et],navItem:b.b({readOnly:!0,strong:!0,type:He,get:function(){return He.create({title:this.bindingFor("navbarTitle"),subtitle:this.bindingFor("navbarSubtitle"),leftBarButtonItems:this.bindingFor("leftBarButtonItems")})}}),leftBarButtonItems:b.b({readOnly:!0,strong:!0,dependencies:["primaryInteractionMode","oneUpViewController.surrogateOneUpNavigee.gated_canZoom"],get:Object.assign(function(){if(this.primaryInteractionMode!==wt.a.TOUCH){var e=[];return this.oneUpViewController.surrogateOneUpNavigee.gated_canZoom&&e.push(this.zoomSlider),e.push(this.thumbstripButton),G.b.create(e)}},{__CW__getter:function(e,t,n,i){if(i.internalGet(this,t[0+n])!==wt.a.TOUCH){var r=[];return i.internalGetPath(this,t[1+n])&&r.push(this.zoomSlider),r.push(this.thumbstripButton),G.b.create(r)}}})}),thumbstripButton:b.b({readOnly:!0,strong:!0,get:function(){return xt.a.extend(Nr.a).create({additionalClassNames:["thumbstrip-button"],icon:Bl,tooltip:y.d("OneUp.Navbar.Button.Thumbstrip.Tooltip"),action:"toggleThumbstrip",target:this})}}),toggleThumbstrip:function(){var e=this.oneUpViewController.view.thumbnailsStripView;e&&(e.isFullyRetracted?e.unretract():e.retract())},userDidDoubleTapInOneUp:function(){this.primaryInteractionMode!==wt.a.MOUSE||this.isTransitioningAway||this.sendEvent("popViewController")},staticMembers:{__QUALIFIED_CLASS_NAME__:"OneUpPageViewController"}}),Wl=(n(1035),Ge.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"spinnerOrCheckView"},{type:"ELEMENT",tagname:"span",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"importText",attributes:{}}],classes:["roup-import-view-text"]}],classes:["roup-import-badge-view",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isHidden",truevalue:"cw-hidden",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"importIsInProgress",truevalue:"dim-image-during-import",attributes:{}}]},__QUALIFIED_CLASS_NAME__:"ReceiverOneUpPageImportBadgeView"},importIsInProgress:b.b(),isImported:b.b(),isHidden:b.b({readOnly:!0,dependencies:["importIsInProgress","isImported"],get:Object.assign(function(){return!this.importIsInProgress&&!this.isImported},{__CW__getter:function(e,t,n,i){return!i.internalGet(this,t[0+n])&&!i.internalGet(this,t[1+n])}})}),importText:b.b({readOnly:!0,dependencies:["importIsInProgress","isImported"],get:function(){var e=this.importIsInProgress;return this.isImported?y.d("CMMReceiver.OneUp.Added"):e?y.d("CMMReceiver.OneUp.Adding"):void 0}}),spinnerOrCheckView:b.b({readOnly:!0,strong:!0,dependencies:["importIsInProgress","isImported"],get:function(){var e=this.importIsInProgress;return this.isImported?this._checkView:e?this._spinnerView:void 0}}),_spinnerView:b.b({strong:!0,readOnly:!0,type:Ka.a,get:function(){return Ka.a.create({size:15,color:"#000000",isVisible:this.bindingFor("importIsInProgress")})}}),_checkView:b.b({strong:!0,readOnly:!0,type:Ge.a,get:function(){return Ge.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"svg",children:[{type:"ELEMENT",tagname:"polyline",namespace:"http://www.w3.org/2000/svg",attributes:{fill:"none",stroke:"#000000","stroke-width":"4",points:"12,25 19,32 35,16 "}}],namespace:"http://www.w3.org/2000/svg",attributes:{version:"1.0",xlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 48 48"}}]},className:"roup-import-checkmark-view"}}).create()}})})),Gl=(n(1026),function(){var e=v.a,t=function(t){var n=e.create();try{t(n.resolve.bind(n),n.reject.bind(n))}catch(e){n.reject(e)}return n};return t.all=e.all.bind(e),t.race=e.race.bind(e),t.resolve=e.resolve.bind(e),t.reject=e.reject.bind(e),t}());function Hl(e){return function(){var t=e.apply(this,arguments);return new Gl(function(e,n){return function i(r,a){try{var s=t[r](a),o=s.value}catch(e){return void n(e)}if(!s.done)return Gl.resolve(o).then(function(e){i("next",e)},function(e){i("throw",e)});e(o)}("next")})}}var $l=n(1024),zl=n(1025),Kl=Ul.extend({viewClass:fo.extend({toolbarAdditionalClassNames:_.a(["centered-buttons"])}),view:b.b({downstreamBindings:{hasBottomToolbar:"(owner).hasBottomToolbar",toolbarButtons:"(owner).touchToolbarButtons"}}),isAuthenticated:b.b(),currentUserIsShareOwner:b.b(),userIsUnableToImport:b.b(),rootRecord:b.b(),libraryInfo:b.b(),navItem:b.b({downstreamBindings:{rightBarButtonItems:"(owner).rightBarButtonItems"}}),addToLibraryDelegate:b.b(),customPresenterViewModifications:b.b({readOnly:!0,get:function(){var e=arguments;return{mixinDependencies:[this.__s._$r4$get.apply(this,e)],staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"importIsInProgress",truevalue:"dim-image-during-import",attributes:{}}]}}},bottomRightBadgeViewClasses:_.a([Wl.extend({importIsInProgress:Gt.c("presenterView.importIsInProgress"),isImported:Gt.c("presenterView.isImported")})]),isSelectionBadgeHidden:b.b({readOnly:!0,dependencies:["containerViewController.oneUpSelectionIsAllowed","importIsInProgress","isImported"],get:Object.assign(function(){return!this.getPath("containerViewController.oneUpSelectionIsAllowed")||this.importIsInProgress||this.isImported},{__CW__getter:function(e,t,n,i){return!i.internalGetPath(this,t[0+n])||i.internalGet(this,t[1+n])||i.internalGet(this,t[2+n])}})}),importIsInProgress:b.b({readOnly:!0,dependencies:["media",Fc.a.bindingFor("allModels.contentsDidChangeUntracked")],get:Object.assign(function(){return this.containerViewController.getImportIsInProgressStatusForMedia(this.media)},{__CW__getter:function(e,t,n,i){return this.containerViewController.getImportIsInProgressStatusForMedia(i.internalGet(this,t[0+n]))}})}),isImported:b.b({readOnly:!0,dependencies:["media",Fc.a.bindingFor("allModels.contentsDidChangeUntracked")],get:Object.assign(function(){return this.containerViewController.getIsImportedStatusForMedia(this.media)},{__CW__getter:function(e,t,n,i){return this.containerViewController.getIsImportedStatusForMedia(i.internalGet(this,t[0+n]))}})})}},__superMap:{_$r4$get:"get"}}),canImport:b.b({readOnly:!0,dependencies:["isAuthenticated","userIsUnableToImport"],get:Object.assign(function(){return this.isAuthenticated&&!this.userIsUnableToImport},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])&&!i.internalGet(this,t[1+n])}})}),isTouchPortrait:b.b({readOnly:!0,dependencies:["primaryInteractionMode",I.a.sharedInstance.window.bindingFor("width"),I.a.sharedInstance.window.bindingFor("height")],get:Object.assign(function(){if(this.primaryInteractionMode!==wt.a.TOUCH)return!1;var e=I.a.sharedInstance.window;return e.width<e.height},{__CW__getter:function(e,t,n,i){if(i.internalGet(this,t[0+n])!==wt.a.TOUCH)return!1;var r=I.a.sharedInstance.window;return r.width<r.height}})}),hasBottomToolbar:b.b({readOnly:!0,dependencies:["isTouchPortrait","currentUserIsShareOwner"],get:Object.assign(function(){return!this.currentUserIsShareOwner&&this.isTouchPortrait},{__CW__getter:function(e,t,n,i){return!i.internalGet(this,t[1+n])&&i.internalGet(this,t[0+n])}})}),rightBarButtonItems:b.b({readOnly:!0,strong:!0,type:G.b,dependencies:["primaryInteractionMode","canImport","currentUserIsShareOwner","hasBottomToolbar"],get:Object.assign(function(){var e=this.primaryInteractionMode,t=this.canImport,n=this.currentUserIsShareOwner;if(e===wt.a.TOUCH){if(this.hasBottomToolbar)return;return this._createTouchButtons(t,n,!0)}return this._createMouseButtons(t,n)},{__CW__getter:function(e,t,n,i){var r=this.primaryInteractionMode,a=this.canImport,s=this.currentUserIsShareOwner;if(r===wt.a.TOUCH){if(i.internalGet(this,t[3+n]))return;return this._createTouchButtons(a,s,!0)}return this._createMouseButtons(a,s)}})}),touchToolbarButtons:b.b({readOnly:!0,strong:!0,dependencies:["canImport","currentUserIsShareOwner"],get:Object.assign(function(){return this._createTouchButtons(this.canImport,this.currentUserIsShareOwner,!1)},{__CW__getter:function(e,t,n,i){return this._createTouchButtons(i.internalGet(this,t[0+n]),i.internalGet(this,t[1+n]),!1)}})}),_createTouchButtons:function(e,t,n){if(!t){var i,r=n?xt.a:za;return i=e?r.create({title:y.d("OneUp.Navbar.Button.Import.Text"),action:"addToLibrary",target:this,isDisabled:this.bindingFor("importIsInProgressOrCompleted")}):r.create({title:y.d("OneUp.Navbar.Button.Download.Text"),action:"download",target:this}),G.b.create([i])}},_createMouseButtons:function(e,t){var n=[];return e&&!t&&n.push(xt.a.extend(Nr.a).create({additionalClassNames:["import-button"],action:"addToLibrary",target:this,icon:zl,tooltip:y.d("OneUp.Navbar.Button.Import.Tooltip"),isDisabled:this.bindingFor("importIsInProgressOrCompleted")})),n.push(xt.a.extend(Nr.a).create({additionalClassNames:["download-button"],action:"download",target:this,icon:$l,tooltip:y.d("OneUp.Navbar.Button.Download.Tooltip")})),G.b.create(n)},download:function(){var e=this.collection,t=this.media,n=e.indexOf(t);if(n<0)Oc();else{var i=sa.a.create([n]);this.isAuthenticated||this._didShowSignInDialog?this._initiateDownload(i):(this._didShowSignInDialog=!0,Ac(e,i,this._signInAndImport.bind(this),this._initiateDownload.bind(this),!0,this.primaryInteractionMode).catch(function(e){throw e}))}},_initiateDownload:function(e){var t=this;return Hl(regeneratorRuntime.mark(function n(){var i,r,a,s,o,c,l,u;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i=t.collection,r=t.container,a=t.rootRecord,s=t.primaryInteractionMode,o=t.libraryInfo,c=Rc.sharedInstance,l=e.toArray(),n.next=5,c.prepareDownloadURL({collection:i,container:r,selectedIndicesArray:l,primaryInteractionMode:s,useNewWindowForRedirects:!0,rootRecord:a});case 5:if(!(u=n.sent).hasError){n.next=9;break}return Oc(),n.abrupt("return");case 9:return n.next=11,c.downloadFromURL({downloadURL:u.downloadURL,downloadCount:l.length,primaryInteractionMode:s,downloadWindow:u.downloadWindow,assetCount:a.assetCount,libraryInfo:o});case 11:case"end":return n.stop()}},n,t)}))()},addToLibrary:function(){var e=this.addToLibraryDelegate;if(!this.importIsInProgressOrCompleted&&e.verifyUserCanImport()){var t=this.media.specificType,n=bn.a.genericTypeForSpecificType(t),i={assetCount:1,photosCount:n===bn.a.Type.IMAGE?1:0,videosCount:n===bn.a.Type.VIDEO&&t!==bn.a.Type.AUDIO?1:0},r=this.collection,a=this.media,s=[r.indexOf(a)];e.setUpImportProgressView(i.assetCount);var o=xc.a.sharedInstance.importSingleMedia(this.container.zone.zoneID,this.media);e.importDidBegin({recordCopierJob:o,itemCounts:i,selectedIndices:s})}},importIsInProgressOrCompleted:b.b({readOnly:!0,dependencies:["isImported","importIsInProgress"],get:function(){var e=this.isImported,t=this.importIsInProgress;return e||t}}),importIsInProgress:b.b({readOnly:!0,dependencies:["media",Fc.a.bindingFor("allModels.contentsDidChangeUntracked")],type:Boolean,get:Object.assign(function(){return this.getImportIsInProgressStatusForMedia(this.media)},{__CW__getter:function(e,t,n,i){return this.getImportIsInProgressStatusForMedia(i.internalGet(this,t[0+n]))}})}),getImportIsInProgressStatusForMedia:function(e){if(!X.a(e,bn.a))return!1;var t=this._findJobForMediaInCPLZone(e);return this._decideIfJobIsSubmittedOrInProgress(t)},isImported:b.b({readOnly:!0,dependencies:["media",Fc.a.bindingFor("allModels"),Fc.a.bindingFor("allModels.contentsDidChange")],type:Boolean,get:function(){var e=this.media;return this.getIsImportedStatusForMedia(e)}}),getIsImportedStatusForMedia:function(e){if(!X.a(e,bn.a))return!1;var t=this._findJobForMediaInCPLZone(e);return!(!t||t.status!==Ll.a.COMPLETED)},_findJobForMediaInCPLZone:function(e){var t=e.asset,n=t.recordName,i=t.zoneID,r=d.b().cplZoneID,a=Fc.a.allModels,s=Array.isArray(a),o=0;for(a=s?a:a[Symbol.iterator]();;){var c;if(s){if(o>=a.length)break;c=a[o++]}else{if((o=a.next()).done)break;c=o.value}var l=c;if(Nl.a.isSameZoneID(l.sourceZoneID,i)&&Nl.a.isSameZoneID(l.targetZoneID,r)&&l.includesRecordName(n))return l}},_signInAndImport:function(){var e=this;return Hl(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.signIn();case 2:t.sent&&e.addToLibrary();case 4:case"end":return t.stop()}},t,e)}))()},signIn:function(){return!1},_decideIfJobIsSubmittedOrInProgress:function(e){return e&&(e.status===Ll.a.SUBMITTED||e.status===Ll.a.INPROGRESS||e.status===Ll.a.UNKNOWN)},staticMembers:{__QUALIFIED_CLASS_NAME__:"ReceiverOneUpPageViewController"}}),Ql=function(e){return new Promise(function(t){return s.a(t,e)})},ql=n(1248),Yl=n(1236),Zl=(n(1076),n(1078)),Jl=Ge.a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"VIEWOUTLET",tagname:"view",name:"addButton"}]}},className:"add-assets-tile-view",__QUALIFIED_CLASS_NAME__:"AddAssetsTileView"},addButton:$.b(Ge.a.extend(Nr.a,qs.a,{icon:Zl,additionalClassNames:["add-button"],action:"showAddAssetSelectionViewController"}))}),Xl={presenter:_.a({viewClassKeysByCellType:_.a({addAssetsTile:"addAssetsTileItemViewClass"}),addAssetsTileItemViewClass:Jl}),viewClass:_.a({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"VIEWOUTLET",tagname:"view",name:"collectionIsEmptyView"}]}}},layoutMetrics:b.b(),collectionIsEmpty:b.b(),collectionIsEmptyView:b.b({readOnly:!0,dependencies:["collectionIsEmpty"],get:Object.assign(function(){if(!0===this.collectionIsEmpty)return this._addAssetTile},{__CW__getter:function(e,t,n,i){if(!0===i.internalGet(this,t[0+n]))return this._addAssetTile}})}),_addAssetTile:b.b({defaultValue:$.b(Jl),readOnly:!0,strong:!0})}),view:b.b({downstreamBindings:{collectionIsEmpty:"(owner).collectionIsEmpty",layoutMetrics:"(owner).layoutMetrics"}}),collection:ai.a.define(),collectionIsEmpty:b.b({readOnly:!0,type:Boolean,dependencies:["collection","collection.length"],get:Object.assign(function(){return Boolean(this.collection&&0===this.collection.length)},{__CW__getter:function(e,t,n,i){return Boolean(i.internalGet(this,t[0+n])&&0===i.internalGetPath(this,t[1+n]))}})}),layoutDelegate:_.a({sizeKeyByCellType:_.a({addAssetsTile:"getAddAssetsTileItemSize"}),fractionalTileSize:T.c(.75),getAddAssetsTileItemSize:function(e,t){var n=e.layoutMetrics,i=n.columnWidth,r=n.isSquareCrop,a=n.rowHeight,s=i;if(!r){var o=this.fractionalTileSize;a*=o,s*=o}return Ci.a.create(s,a)},cellClassKeysByCellType:_.a({addAssetsTile:"addAssetsTileCellClass"}),addAssetsTileCellClass:Yi.a.extend({handle:"addAssetsTile",isReusable:!1}),completeVisibleCells:function(e,t,n,i){var r=arguments;this.__s._$mr$completeVisibleCells.apply(this,r);var a=this.bottomMostItem(e,n);if(a&&a.handle.position===a.handle.maximumPosition){var s=e.viewportWidth,o=e.layoutMetrics,c=o.columnSpacing,l=o.columnWidth,u=o.isSquareCrop,d=o.rowHeight,h=o.rowSpacing,p=o.sectionLeftPadding,f=o.sectionRightPadding,g=a.right+c,m=a.top,v=this.cellForHandle(null,"addAssetsTile");if(g>=s-f&&(g=p,m=a.bottom+h),!u){var _=this.fractionalTileSize;g+=l/2-l*_/2,m+=d/2-d*_/2}v.retain(),this.layOutCellInDirection(e,v,1,m,1,g),n.push(v),v.release()}},spaceBelowCell:function(e){var t=arguments,n=this.__s._$1JO$spaceBelowCell.apply(this,t),i=this.cellForHandle(null,"addAssetsTile"),r=e.layoutMetrics,a=r.columnWidth,s=void 0===a?0:a,o=r.rowHeight,c=void 0===o?0:o,l=r.rowSpacing,u=void 0===l?0:l,d=r.sectionLeftPadding,h=void 0===d?0:d,p=s/2-i.width/2;return i.left===h||i.left===h+p?n+c+u:n},__superMap:{_$mr$completeVisibleCells:"completeVisibleCells",_$1JO$spaceBelowCell:"spaceBelowCell"}})},eu=Ve.a.extend(Be,$e,{viewClass:en,view:b.b({downstreamBindings:{navItems:"(owner).navItems",topNavItem:"(owner).topNavItem"}}),topViewController:nt({options:{viewsOutlet:"contentViews"}}),staticMembers:{__QUALIFIED_CLASS_NAME__:"NavigationViewController"}}),tu=n(333),nu=n(402),iu=tu.a.extend({_actualSelection:Object(b.b)({defaultValue:Object($.b)(ti.a),downstreamBindings:{serializer:"(owner).collection.serializer"}}),_removedItems:Object(b.b)({defaultValue:Object($.b)(ti.a),downstreamBindings:{serializer:"(owner).collection.serializer"}}),selection:Object(b.b)({dependencies:[],writeDependencies:["selectionDidChange","pivot"],get:function(){return this._actualSelection.clone()},set:Object.assign(function(e){var t=this._actualSelection,n=this.collection;e?e.serializer===t.serializer?e=e.clone():(t.clear(),e&&t.addEach(e),e=t):e=ti.a.create(),this._actualSelection=ti.a.create();var i=this.getPath("collection.length");if(!this.isEmptySelectionEnabled&&n&&i&&0===e.length)for(var r=n.startHandle;r.isValid&&!this.selectItemAtHandle(r);r=r.next);else for(var a=this.shouldStoreRemovedSelection,s=this.isMultipleSelectionEnabled,o=e.createIterator();o.isValid;o.moveToNext()){var c=o.encodedValue,l=n?n.encodedHandleFor(c).retain(this,"IndexedSelectionController#selectedIndices: enforcing isMultipleSelectionEnabled"):null,u=!1;if(l&&l.isValid?u=this.selectItemAtHandle(l):a&&this._actualSelection.encodedAdd(c),l&&l.release(this,"IndexedSelectionController#selectedIndices: enforcing isMultipleSelectionEnabled"),!s&&u)break}var d=this._pivot,h=d;if((!d||!e.encodedContains(d.encodedValue))&&e.length>0)if(n){for(var p=e.createIterator(),f=void 0;p.isValid;)f=p.encodedValue,p.moveToNext();h=n.encodedHandleFor(f)}else h=null;return this.pivot=h,this.selectionDidChange=!0,e},{__CW__setter:function(e,t,n,i,r){var a=this._actualSelection,s=this.collection;e?e.serializer===a.serializer?e=e.clone():(a.clear(),e&&a.addEach(e),e=a):e=ti.a.create(),this._actualSelection=ti.a.create();var o=this.getPath("collection.length");if(!this.isEmptySelectionEnabled&&s&&o&&0===e.length)for(var c=s.startHandle;c.isValid&&!this.selectItemAtHandle(c);c=c.next);else for(var l=this.shouldStoreRemovedSelection,u=this.isMultipleSelectionEnabled,d=e.createIterator();d.isValid;d.moveToNext()){var h=d.encodedValue,p=s?s.encodedHandleFor(h).retain(this,"IndexedSelectionController#selectedIndices: enforcing isMultipleSelectionEnabled"):null,f=!1;if(p&&p.isValid?f=this.selectItemAtHandle(p):l&&this._actualSelection.encodedAdd(h),p&&p.release(this,"IndexedSelectionController#selectedIndices: enforcing isMultipleSelectionEnabled"),!u&&f)break}var g=this._pivot,m=g;if((!g||!e.encodedContains(g.encodedValue))&&e.length>0)if(s){for(var v=e.createIterator(),_=void 0;v.isValid;)_=v.encodedValue,v.moveToNext();m=s.encodedHandleFor(_)}else m=null;return n[1+i]=m,n[0+i]=!0,e}}),writeDependencySetPathMap:["false","false"]}),_maintainFlags:Object(W.f)({inputs:["delegate","isEmptySelectionEnabled","isMultipleSelectionEnabled"],callback:function(e){e&&(this.selection=this._actualSelection)}}),shouldStoreRemovedSelection:Object(b.b)({readOnly:!0,defaultValue:!1}),updateSelectionForCollectionChange:function(e){if(!this.shouldStoreRemovedSelection){var t=this._actualSelection,n=!1,i=e.itemsChanges;if(i){for(var r=this._removedItems,a=i.length,s=0;s<a;s++){var o=i[s],c=o.encodedItem;o.operation===G.b.REMOVE?(t.encodedContains(c)&&r.encodedAdd(c),t.encodedRemove(c)):r.encodedContains(c)&&(t.encodedAdd(c),r.encodedRemove(c))}r.length&&(n=!0,r.clear())}else if(e.collectionChanged)t.length&&(n=!0,t.clear());else if(e.everythingChanged&&t.length){var l=this.collection;t.clone().forEach(function(e){l.contains(e)||(t.remove(e),n=!0)})}0!==t.length||this.isEmptySelectionEnabled||(n=!0),n&&(this.selection=t)}},clearSelection:function(){this._actualSelection.clear(),this.pivot=null},isItemAtHandleSelected:function(e){return this._actualSelection.encodedContains(e.encodedValue)},selectItemAtHandle:function(e){var t=this.delegate;return!!t.selectionControllerShouldSelectItem(this,e)&&(this._actualSelection.encodedAdd(e.encodedValue),t.selectionControllerDidSelectItem(this,e),!0)},deselectItemAtHandle:function(e){var t=this._actualSelection,n=null;if(t.encodedRemove(e.encodedValue),0!==t.length){var i=this.pivot;n=e===i?function(e,t){for(var n=e,i=e;n.isValid&&i.isValid;){if(n.isValid&&t(n=n.previous))return n;if(i.isValid&&t(i=i.next))return i}return n}(e,function(e){return t.encodedContains(e.encodedValue)}):i}return this.pivot=n,this.delegate.selectionControllerDidDeselectItem(this,e),!0},getSelectableHandleInDirection:function(e,t){var n=e.clone().retain();if(t===nu.a.UP?n.moveToPrevious():t===nu.a.DOWN&&n.moveToNext(),n.isValid)return n.autorelease();n.release()},staticMembers:{__QUALIFIED_CLASS_NAME__:"IdentitySelectionController"}}),ru={sectionRightPadding:b.b(),sectionLeftPadding:b.b()},au=Ua.extend(Be,ru).extend({sectionRightPadding:b.b(Gt.c("gridViewController.layoutMetrics.sectionRightPadding")),sectionLeftPadding:b.b(Gt.c("gridViewController.layoutMetrics.sectionLeftPadding")),gridViewController:_.a({layoutMetrics:_.a(Uc,{initialPosition:b.b(an.b.Bottom)}),selectionController:$.b(iu.extend({container:b.b(),sparseSelection:b.b()}),{shouldStoreRemovedSelection:!0}),isSelectAllEnabled:!1,isMouseSelectionAdditive:!0,isRangeSelectionEnabled:!1,isWhitespaceDeselectionEnabled:!1,itemViewClass:_.a(Bc),userSelectionRequest:function(e){if(void 0!==e){var t=e.view;if(!0!==t.isSelectionAdornmentInteractionDisabled)return t.instanceOf($r)&&(e.view=t.host),this.sendEvent("selectionWasManipulated"),this.__s._$pa$userSelectionRequest.call(this,e)}},presenter:_.a({viewForViewClass:function(e){var t=arguments,n=this.__s._$rl$viewForViewClass.apply(this,t);if(e===this.itemViewClass){var i=this.owner;n.bind("isSelectionEnabled",i.bindingFor("isSelectionEnabled")),n.bind("primaryInteractionMode",i.bindingFor("primaryInteractionMode"))}return n},__superMap:{_$rl$viewForViewClass:"viewForViewClass"}}),__superMap:{_$pa$userSelectionRequest:"userSelectionRequest"}}),staticMembers:{__QUALIFIED_CLASS_NAME__:"AssetSelectionViewController"}}),su=eu.extend({dismiss:function(){var e=arguments,t=this.presentingViewController,n=this.topViewController;if(!X.a(n,au))return this.__s._$DA$dismiss.apply(this,e);var i=n.gridViewController.selectionController.selection.encodedToArray();i&&t.addMedias(i);var r=t.gridViewController;return r.selection=n.gridViewController.selection,t.navItem.hidesBackButton=!1,this.topNavItem.rightBarButtonItem.isDisabled=!0,r.scrollBy(0,-r.viewportHeight),r.update(),this.__s._$DA$dismiss.apply(this,e)},selectionWasManipulated:function(){var e=this.presentingViewController,t=e&&e.gridViewController;t&&(t.selectionModeIsActive=!0)},transitionDidFinish:function(e){var t=this.topViewController;X.a(t,au)&&t.gridViewController.measureViewport()},_adjustPositionOfToolbarItemsBasedOnChild:W.f({inputs:["topViewController.sectionRightPadding","topViewController.sectionLeftPadding"],callback:function(){var e=this.topViewController;if(e&&e.primaryInteractionMode!==wt.a.TOUCH){var t=this.view.navigationBar.element,n=this.getPath("topViewController.sectionRightPadding"),i=this.getPath("topViewController.sectionLeftPadding");void 0!==n&&void 0!==i&&it.a(t,{padding:"0px "+n+"px 0px "+i+"px"})}}}),__superMap:{_$DA$dismiss:"dismiss"},staticMembers:{__QUALIFIED_CLASS_NAME__:"AssetSelectionNavigationContextViewController"}}),ou=Xc.extend({title:b.b({readOnly:!0,dependencies:["selectionModeIsActive","selectedItemCount","collectionLength"],get:function(){var e=this.selectionModeIsActive,t=this.selectedItemCount,n=this.collectionLength,i=!e||e&&t===n?"All":"Partial";return y.d("CreateShareButton.Title."+i)}}),action:"doCreateShareButtonAction",isPrimaryAction:b.b(!0),collectionLength:b.b(0),staticMembers:{__QUALIFIED_CLASS_NAME__:"CreateShareButton"}}),cu=gl.extend({titleString:b.b({type:String,readOnly:!0,dependencies:["isAttached","didResizeHorizontally","shareOwner"],get:function(){var e=this.shareOwner;if(!this.isAttached||!e)return"";var t=e.userIdentity.nameComponents.givenName,n=y.d("ReciprocateTitleView.ShareWithOriginator",{originatorName:t});return this._fitStringToContainer(n,this.titleStringContainer)}}),subtitleString:b.b(""),displaySubtitleString:b.b({readOnly:!0,get:function(){return""}}),selectionModeIsActive:b.b(!1),shareOwner:b.b(),expiryDateString:b.b({dependencies:["isAttached","selectedItemCount","collectionLength","selectionModeIsActive"],get:Object.assign(function(){if(this.isAttached){var e=this.selectionModeIsActive?this.selectedItemCount:this.collectionLength,t=e>2?"More":Number(e).toString();return y.d("ReviewTitleView.NumberOfPhotos."+t,{count:e})}},{__CW__getter:function(e,t,n,i){if(i.internalGet(this,t[0+n])){var r=i.internalGet(this,t[3+n])?i.internalGet(this,t[1+n]):i.internalGet(this,t[2+n]),a=r>2?"More":Number(r).toString();return y.d("ReviewTitleView.NumberOfPhotos."+a,{count:r})}}})}),staticMembers:{__QUALIFIED_CLASS_NAME__:"ReciprocateTitleView"}}),lu=function(){var e=v.a,t=function(t){var n=e.create();try{t(n.resolve.bind(n),n.reject.bind(n))}catch(e){n.reject(e)}return n};return t.all=e.all.bind(e),t.race=e.race.bind(e),t.resolve=e.resolve.bind(e),t.reject=e.reject.bind(e),t}();function uu(e){return function(){var t=e.apply(this,arguments);return new lu(function(e,n){return function i(r,a){try{var s=t[r](a),o=s.value}catch(e){return void n(e)}if(!s.done)return lu.resolve(o).then(function(e){i("next",e)},function(e){i("throw",e)});e(o)}("next")})}}var du=Ua.extend(Be,ln,Wa).extend({oneUpPageViewControllerClass:Ul,oneUpPageViewController:b.b({downstreamBindings:{oneUpSelectionIsAllowed:"(owner).gridViewController.selectionModeIsActive"}}),init:function(){var e=arguments;Object.defineProperties(this,{_dataManager:{value:d.b()}}),this.__s._$fG$init.apply(this,e)},navItem:b.b({readOnly:!0,strong:!0,type:Xt,get:function(){return Xt.create()}}),gridViewController:Jt.b({readOnly:!0,strong:!0,viewOutlet:"photosGridView",defaultValue:$.b(Wc.extend(ml,Xl,{isWhitespaceDeselectionEnabled:b.b(Qc.isWhitespaceDeselectionEnabled),rootRecord:b.b(),uploadIsComplete:b.b(!0),_shareBackPlacardMediaPK:zo({readOnly:!0,dependencies:["collection","collection.contentsDidChange","selectionController.selectionDidChange","selectionModeIsActive"],get:function(){var e=this;return uu(regeneratorRuntime.mark(function t(){var n,i,r,a,s,o,c,l;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ql(e.shareBackPlacardMediaPK?1e3:0);case 2:if(n=e.collection,i=e.selectedIndices,r=e.selectionModeIsActive,n&&(!r||i)){t.next=5;break}return t.abrupt("return",void 0);case 5:for(a=r?i.toArray():Array.from(new Array(n.length).keys()),s=[],o=0,c=a.length;o<c;o++)l=a[o],s.push(n.encodedObjectAt(l));return t.abrupt("return",sn.a.chooseBestPlacardMedia(s));case 9:case"end":return t.stop()}},t,e)}))()}}),shareBackPlacardMediaPK:ql.a({source:"_shareBackPlacardMediaPK",gate:"_shareBackPlacardMediaPK"}),hasModeSelectionToolbar:b.b({readOnly:!0,dependencies:["primaryInteractionMode"],get:Object.assign(function(){return this.primaryInteractionMode===wt.a.TOUCH||!Qc.implicitDesktopSelectionMode},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])===wt.a.TOUCH||!Qc.implicitDesktopSelectionMode}})}),view:b.b({downstreamBindings:{shareBackPlacardMediaPK:"(owner).shareBackPlacardMediaPK"}}),viewClass:_.a({shareBackPlacardMediaPK:b.b(),shareHeaderView:b.b({strong:!0,defaultValue:$.b(Jc.extend({shareBackPlacardMediaPK:b.b(),sharePlacardView:b.b({defaultValue:_.a({shareBackPlacardMediaPK:b.b(),shareImageView:b.b({defaultValue:_.a({rootRecord:b.b({get:function(){}}),shareBackPlacardMediaPK:b.b(),loadedKeyMedia:zo({dependencies:["shareBackPlacardMediaPK"],readOnly:!0,get:function(){var e=this.shareBackPlacardMediaPK;if(e)return bn.a.find(e)||bn.a.load({primaryKeys:[e]}).then(function(e){return e.objectAt(0)})}})}),downstreamBindings:{shareBackPlacardMediaPK:"(owner).shareBackPlacardMediaPK"}})}),downstreamBindings:{shareBackPlacardMediaPK:"(owner).shareBackPlacardMediaPK"}}),actionButton:b.b({defaultValue:$.b(ou),downstreamBindings:{downloadIsInProgress:"(owner).downloadIsInProgress",importIsInProgress:"(owner).importIsInProgress",selectedItemCount:"(owner).selectedItemCount",selectionModeIsActive:"(owner).selectionModeIsActive",isAllAddedToLibrary:"(owner).isAllAddedToLibrary",primaryInteractionMode:"(owner).primaryInteractionMode"}}),shareDetailView:b.b({defaultValue:$.b(cu),downstreamBindings:{shareOwner:"(owner).rootRecord.share.owner",name:"(owner).name",currentUserIsShareOwner:"(owner).currentUserIsShareOwner",assetCount:"(owner).assetCount",photosCount:"(owner).photosCount",videosCount:"(owner).videosCount",selectedItemCount:"(owner).selectedItemCount",uploadIsComplete:"(owner).uploadIsComplete",collectionLength:"(owner).collectionLength",expiryDate:"(owner).expiryDate",selectionHasBeenManipulated:"(owner).selectionHasBeenManipulated"}})})),downstreamBindings:{shareBackPlacardMediaPK:"(owner).shareBackPlacardMediaPK",rootRecord:"(owner).rootRecord",availableViewportHeight:"(owner).availableShareHeaderHeight",collectionLength:"(owner).collectionLength",currentUserIsShareOwner:"(owner).currentUserIsShareOwner",name:"(owner).name",isAuthenticated:"(owner).isAuthenticated",selectedItemCount:"(owner).selectedItemCount",assetCount:"(owner).assetCount",photosCount:"(owner).photosCount",videosCount:"(owner).videosCount",selectionModeIsActive:"(owner).selectionModeIsActive",uploadIsComplete:"(owner).uploadIsComplete",availableHeightToDesire:"(owner).availableHeightForHeaderToDesire",primaryInteractionMode:"(owner).primaryInteractionMode",selectionHasBeenManipulated:"(owner).selectionHasBeenManipulated",rowSpacing:"(owner).rowSpacing",downloadIsInProgress:"(owner).downloadIsInProgress",importIsInProgress:"(owner).importIsInProgress",importedAssetDescriptor:"(owner).importedAssetDescriptor",importedAssetCount:"(owner).importedAssetCount",isAllAddedToLibrary:"(owner).isAllAddedToLibrary",userIsUnableToImport:"(owner).userIsUnableToImport"}})}),assetCount:b.b(Gt.c("rootRecord.assetCount")),selectionModeIsActive:b.b({writeDependencies:[],dependencies:["primaryInteractionMode"],get:Object.assign(function(e){return e||this.primaryInteractionMode===wt.a.MOUSE&&Qc.implicitDesktopSelectionMode},{__CW__getter:function(e,t,n,i){return e||i.internalGet(this,t[0+n])===wt.a.MOUSE&&Qc.implicitDesktopSelectionMode}})}),isSelectionEnabled:b.b(Gt.c("selectionModeIsActive")),toggleSelectionMode:function(){(this.selectionModeIsActive=!this.selectionModeIsActive)&&this.selectAll()},isSelectAllEnabled:!0,selectedItemCount:b.b({readOnly:!0,dependencies:["selectedIndices","selectedIndices.length"],get:Object.assign(function(){return this.selectedIndices.length},{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[1+n])}})}),selectedIndices:b.b(Gt.c("selectionController.selectedIndices"))})),downstreamBindings:{rootRecord:"(owner).rootRecord",currentUserIsShareOwner:"(owner).currentUserIsShareOwner",primaryInteractionMode:"(owner).primaryInteractionMode"}}),assetSelectionViewContainer:b.b({readOnly:!0,strong:!0,type:Et.a,get:function(){return this._dataManager.cplSystemContainersMap.get(Et.a.PredefinedName.PHOTOS)}}),updateContainer:function(e){var t=this;return uu(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,t)}))()},containerDidUpdate:function(){var e=this;return uu(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:!0===e.gridViewController.selectionModeIsActive&&e.gridViewController.selectAll();case 1:case"end":return t.stop()}},t,e)}))()},doCreateShareButtonAction:function(){var e=this;return uu(regeneratorRuntime.mark(function t(){var n,i,r,a,s,o,c,l,u,d,h,p;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.gridViewController,i=n.selection,r=n.selectionModeIsActive,a=e.container.medias,s=e._dataManager,o=(r?i:a).encodedToArray(),(c=St.a.application.feedbackService)&&c.report&&c.report("cmmShareBackInitiated"),l={beginStat:Z.a,endStat:Z.a,recordStat:function(e,t){c.report(e,t,!0)}},u=Ct.a(e,"rootRecord.share.title"),d=e.primaryInteractionMode,h=e.hostedByCloudOSOne,t.next=10,sn.a.initiateCMMShare(u,d,s,o,l,h);case 10:return(p=t.sent).status===Yl.b.OK&&e.sendEvent("popViewController",!0),t.abrupt("return",p);case 13:case"end":return t.stop()}},t,e)}))()},rootRecord:b.b(),addMedias:function(e){var t=this.container,n=t.pk,i=t.medias.encodedToArray(),r={pk:n,medias:Array.from(new Set([].concat(i,e)))};this._dataManager.loadData(Et.a,r,!0)},showAddAssetSelectionViewController:function(){var e=this.gridViewController,t=this.container,n=this.assetSelectionViewContainer,i=this.primaryInteractionMode,r=!0===e.selectionModeIsActive?e.selection:ti.a.create(t.medias.toArray()),a=au.create({container:n,primaryInteractionMode:i});a.gridViewController.selection=r,i===wt.a.MOUSE&&(this.navItem.hidesBackButton=!0);var s=this._createNavigationContextForAssetSelection(a);this.presentViewController(s,!0)},_createNavigationContextForAssetSelection:function(e){var t=xt.a.create({title:y.d("Review.AddAssets.Done"),action:"dismiss"});return e.navItem=Xt.create({rightBarButtonItem:t}),su.create(e)},currentUserIsShareOwner:b.b(!1),__superMap:{_$fG$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"ReviewPageViewController"}}),hu=n(1275),pu=n(160),fu=n(157),gu=n(869),mu=n(66),vu=Math.PI/180,_u=6378137,bu=.00669437999014132;function yu(e,t,n,i,r){var a=(e+n)*vu/2,s=(n-e)*vu,o=t,c=i;o<0&&(o+=360),c<0&&(c+=360);var l=c-o;l>180?l-=360:l<-180&&(l+=360);var u=Math.abs(parseInt(l,10)),d=Math.abs(parseInt(n,10)-parseInt(e,10)),h=l*vu;if(d<=2&&u<=2){var p=Math.sin(a),f=Math.sqrt(1-bu*p*p),g=s*(_u*(1-bu)/(p=f*f*f)),m=h*(_u/f*Math.cos(a));return Math.sqrt(g*g+m*m)}var v=6367e3;r&&(v=6378160-21e3*Math.sin(a));var _=Math.pow(Math.sin(s/2),2)+Math.cos(vu*e)*Math.cos(vu*n)*Math.pow(Math.sin(h/2),2),b=1-_;return _<0&&(_=0),b<0&&(b=0),v*(2*Math.atan2(Math.sqrt(_),Math.sqrt(b)))}function Iu(e){if(Number.isFinite(e))return parseFloat(e.toFixed(6))}var wu=function(){var e=v.a,t=function(t){var n=e.create();try{t(n.resolve.bind(n),n.reject.bind(n))}catch(e){n.reject(e)}return n};return t.all=e.all.bind(e),t.race=e.race.bind(e),t.resolve=e.resolve.bind(e),t.reject=e.reject.bind(e),t}();function Su(e){return function(){var t=e.apply(this,arguments);return new wu(function(e,n){return function i(r,a){try{var s=t[r](a),o=s.value}catch(e){return void n(e)}if(!s.done)return wu.resolve(o).then(function(e){i("next",e)},function(e){i("throw",e)});e(o)}("next")})}}var Cu,Ou,Au,Eu=Qc.maxShareAssetsToUseForLocationFilter,Tu=Qc.maximumShareBackSize,Mu=Qc.maxDistanceBetweenLocationsInMeters,Du=Qc.paddingForShareBackTimeInMillis,Lu=Qc.maxShareTimeRangeForShareBackInMillis,Nu=Qc.disableShareBack,Pu=Qc.earlyExitContiguousChunkGapInMillis,Ru=Qc.earlyExitMaxNonContiguousChunksAllowed,xu=M.a.extend(W.a,_n,{container:b.b(),rootRecord:b.b(),currentUserIsShareOwner:b.b(),shareBackResults:b.b($.b(G.b)),dataManager:b.b({readOnly:!0,defaultValue:function(){return d.b()}}),shareBackReadyForDisplay:b.b({readOnly:!0,dependencies:["shareBackResults.length","iCPLEnabled","iCloudPhotoLibraryWasExited"],get:Object.assign(function(){var e=this.iCloudPhotoLibraryWasExited,t=this.iCPLEnabled,n=this.getPath("shareBackResults.length");return!e&&t&&n>0},{__CW__getter:function(e,t,n,i){var r=this.iCloudPhotoLibraryWasExited,a=this.iCPLEnabled,s=i.internalGetPath(this,t[0+n]);return!r&&a&&s>0}})}),shareBackZone:b.b({dependencies:["shareBackReadyForDisplay"],readOnly:!0,strong:!0,type:mu.a,get:Object.assign(function(){if(this.shareBackReadyForDisplay){var e="CMM-"+hu.a().toUpperCase(),t=this.dataManager.cplZone.zoneID.ownerRecordName,n=Nl.a.create({ownerRecordName:t,zoneName:e}),i=mu.a.getPrimaryKey(n);return mu.a.createFromDataHash({pk:i,scope:CloudKit.DatabaseScope.PRIVATE,zoneID:n})}},{__CW__getter:function(e,t,n,i){if(i.internalGet(this,t[0+n])){var r="CMM-"+hu.a().toUpperCase(),a=this.dataManager.cplZone.zoneID.ownerRecordName,s=Nl.a.create({ownerRecordName:a,zoneName:r}),o=mu.a.getPrimaryKey(s);return mu.a.createFromDataHash({pk:o,scope:CloudKit.DatabaseScope.PRIVATE,zoneID:s})}}})}),shareBackContainer:b.b({dependencies:["shareBackZone"],readOnly:!0,strong:!0,type:Et.a,get:function(){var e=this.dataManager,t=this.shareBackZone;if(t){var n=Et.a.PredefinedName.MOMENTS,i=Et.a.getPrimaryKeyWithZonePK(t.pk,n),r=this.shareBackResults,a={pk:i,albumType:xs.a.PREDEFINED_SMART,isDeleted:!1,isExpunged:!1,recordType:Et.a.CK_RECORD_TYPE,_sortType:pu.a.CREATION_DATE.value,medias:r.toArray(),zone:t.pk};return e.loadData(Et.a,a),Et.a.find(i)}}}),shareBackPlacardMediaPK:b.b({readOnly:!0,dependencies:["shareBackReadyForDisplay"],get:Object.assign(function(){if(this.shareBackReadyForDisplay)return sn.a.chooseBestPlacardMedia(this.shareBackResults.toArray())},{__CW__getter:function(e,t,n,i){if(i.internalGet(this,t[0+n]))return sn.a.chooseBestPlacardMedia(this.shareBackResults.toArray())}})}),shareBackShareTitle:b.b(Gt.c("rootRecord.share.title")),attemptedToCalculateShareBack:!1,isReadyToCalculate:b.b({readOnly:!0,dependencies:["rootRecord","container","container.medias","container.medias.contentsDidChange","dataManager","dataManager.cplSystemContainersMap"],get:function(){var e=this.rootRecord,t=this.container,n=this.dataManager;if(void 0===e||void 0===t||void 0===n||void 0===n.cplSystemContainersMap)return!1;for(var i=t.getDataHash().medias,r=!0,a=0;a<Math.min(i.length,Eu);a++)if(void 0===i[a]){r=!1;break}return r}}),calculateShareBack:function(){var e=this;return Su(regeneratorRuntime.mark(function t(){var n,i,r,a,s,o,c,l,u;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===(n=e.rootRecord)){t.next=18;break}if(i=n.endDate,r=n.startDate,!e._shouldSuppressShareBackMutableReasons()){t.next=5;break}return t.abrupt("return");case 5:return e.attemptedToCalculateShareBack=!0,t.next=8,e._shouldSuppressShareBackImmutableReasons();case 8:if(!t.sent){t.next=10;break}return t.abrupt("return");case 10:return t.next=12,e._fetchMediasFromUserLibraryForShareBack(r,i);case 12:a=t.sent,s=e._getValidShareBackCandidatesFromResults(a),(o=e._filterCandidatesByLocation(s,Mu,Eu,Du)).length>0&&e.shareBackResults.addEach(o),(c=St.a.application.feedbackService)&&c.report&&c.getSignificantNum&&(l=c.getSignificantNum(o.length),u=l>0?"cmmShareBackPresent":"cmmShareBackEmpty",c.report(u,{count:l}));case 18:case"end":return t.stop()}},t,e)}))()},_fetchMediasFromUserLibraryForShareBack:function(e,t){var n=this;return Su(regeneratorRuntime.mark(function i(){var r,a,s;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return r=t+Du,a=e-Du,s=n.dataManager.cplSystemContainersMap.get(Et.a.PredefinedName.MOMENTS),i.next=5,s.loadMediasForDateRangeEfficiently(r,a,Tu);case 5:return i.abrupt("return",i.sent);case 6:case"end":return i.stop()}},i,n)}))()},_shouldSuppressShareBackMutableReasons:function(){return Nu||this.attemptedToCalculateShareBack||this._isShareIncomplete()},_shouldSuppressShareBackImmutableReasons:function(){var e=this;return Su(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e._isShareOwnedByUser()||e._isShareTimeRangeTooLarge()||e._isShareNonContiguous(Eu,Pu,Ru))){t.next=2;break}return t.abrupt("return",!0);case 2:return n=e.rootRecord.originatingZoneName,t.next=5,e._isOriginatingShareOwnedByUser(n);case 5:if(!t.sent){t.next=7;break}return t.abrupt("return",!0);case 7:return t.abrupt("return",!1);case 8:case"end":return t.stop()}},t,e)}))()},_isShareOwnedByUser:function(){var e=this.currentUserIsShareOwner;return e&&c.b.debug("Share is owned by user, suppressing share back"),e},_isShareIncomplete:function(){var e=this.container,t=this.rootRecord,n=!(e.medias.length>0&&Ot.a.isShareCompleteEnough(t,e));return n&&c.b.debug("Share is incomplete, suppressing share back"),n},_isShareTimeRangeTooLarge:function(){var e=this.rootRecord,t=e.startDate,n=e.endDate-t>Lu;return n&&c.b.debug("Share time range is too large, suppressing share back"),n},_isShareNonContiguous:function(e,t,n){for(var i=this.container.medias,r=void 0===e?i.length:Math.min(i.length,e),a=-1/0,s=0,o=0;o<r;o++){var l=i.storeDataForObjectAt(o);if(l){var u=ir.a.getDataHashForPrimaryKey(l.asset).assetDate;if(u>a+t&&++s>n)return c.b.debug("Share is non-contiguous, suppressing share back"),!0;a=u}}return!1},_isOriginatingShareOwnedByUser:function(e){var t=this;return Su(regeneratorRuntime.mark(function n(){var i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(e){n.next=2;break}return n.abrupt("return",!1);case 2:return t._originatingZonePromise||(i=mu.a.getPrimaryKeyFromParts({zoneName:e,ownerRecordName:t.dataManager.cplZoneID.ownerRecordName}),t._originatingZonePromise=mu.a.load({primaryKeys:[i]})),n.prev=3,n.next=6,t._originatingZonePromise;case 6:n.next=13;break;case 8:if(n.prev=8,n.t0=n.catch(3),n.t0.context.ckErrorCode!==CloudKit.CKError.ZONE_NOT_FOUND){n.next=12;break}return n.abrupt("return",!1);case 12:throw n.t0;case 13:return c.b.debug("Originating share owned by user, suppressing share back"),n.abrupt("return",!0);case 15:case"end":return n.stop()}},n,t,[[3,8]])}))()},_originatingZonePromise:void 0,_getValidShareBackCandidatesFromResults:function(e){for(var t=[],n=0;n<e.length;n++){var i=e.primaryKeyForObjectAt(n);this._isMediaValidForShareBack(i)&&t.push(i)}return t},_isMediaValidForShareBack:function(e){var t=bn.a.getDataHashForPrimaryKey(e),n=ir.a.getDataHashForPrimaryKey(t.asset),i=n._assetSubtypeV2;if((void 0===i?n._assetSubtype:i)===fu.a.PHOTO_SCREENSHOT.value)return!1;var r=yn.a.getDataHashForPrimaryKey(t.master);if(r.importedBy===gu.a.MOMENT_SHARE.value)return!1;var a=r.dataClassType;return a===In.a.IMAGE.value||a===In.a.MOVIE.value},_filterCandidatesByLocation:function(e,t,n,i){var r=this._getLocationsInShareSubset(n),a=r.locations,s=r.lastDate;if(!a.length)return e;for(var o=[],c=s+i,l=0;l<e.length;l++){var u=e[l],d=bn.a.getDataHashForPrimaryKey(u),h=ir.a.getDataHashForPrimaryKey(d.asset);if(!this._hasLocation(h)||h.assetDate>c)o.push(u);else for(var p=Iu(h.locationLatitude),f=Iu(h.locationLongitude),g=0;g<a.length;g++){var m=a[g];if(yu(p,f,m.latitude,m.longitude,!0)<t){o.push(u);break}}}return o},_getLocationsInShareSubset:function(e){for(var t=this.container.medias,n=[],i=void 0===e?t.length:Math.min(t.length,e),r=void 0,a=0;a<i;a++){var s=t.storeDataForObjectAt(a);if(s){var o=ir.a.getDataHashForPrimaryKey(s.asset);this._hasLocation(o)&&(r=o.assetDate,n.push({latitude:Iu(o.locationLatitude),longitude:Iu(o.locationLongitude)}))}}return{locations:n,lastDate:r}},_hasLocation:function(e){return Number.isFinite(e.locationLatitude)&&Number.isFinite(e.locationLongitude)},staticMembers:{__QUALIFIED_CLASS_NAME__:"ShareBackSuggestionsService"}}),Fu=n(1235),ku=n(1197),Vu=(n(1068),(Cu={})[wt.a.MOUSE]=100,Cu[wt.a.TOUCH]=50,Cu),ju=Ge.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",name:"derivativeContainer",styles:{width:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"imageSize",attributes:{},unit:null,property:"width"},height:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"imageSize",attributes:{},unit:null,property:"height"}}},className:"cmm-share-back-image",__QUALIFIED_CLASS_NAME__:"ShareBackImageView"},shareBackSuggestionsService:b.b(),primaryInteractionMode:b.b(),imageSize:b.b({readOnly:!0,dependencies:["primaryInteractionMode"],get:Object.assign(function(){var e=this.primaryInteractionMode;return e?Vu[e]:NaN},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return r?Vu[r]:NaN}})}),media:b.b({strong:!0,readOnly:!0,dependencies:["shareBackSuggestionsService","shareBackSuggestionsService.shareBackPlacardMediaPK"],get:Object.assign(function(){var e=this.shareBackSuggestionsService;if(e){var t=e.shareBackPlacardMediaPK;if(t)return bn.a.find(t)}},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);if(r){var a=r.shareBackPlacardMediaPK;if(a)return bn.a.find(a)}}})}),imageDerivativeLoader:b.b({defaultValue:$.b(es.a.extend({shouldCorrectForDevicePixelRatio:!0})),downstreamBindings:{width:"(owner).imageSize",height:"(owner).imageSize",media:"(owner).media"}}),appendDerivativeImageWhenReady:W.f({inputs:["imageDerivativeLoader","imageDerivativeLoader.derivative"],callback:function(){var e=this.imageSize,t=this.imageDerivativeLoader;if(t){var n=t.derivative;if(n){var i=n.checkOutAppendableImagelike(this),r=i.width,a=i.height,s=void 0,o=void 0;if(i.width/i.height>1){var c=Bi.c(a,r,e,e);i.width=c.height,i.height=c.width,s=e/2-c.height/2,o=e/2-c.width/2}else{var l=Bi.c(r,a,e,e);i.width=l.width,i.height=l.height,s=e/2-l.width/2,o=e/2-l.height/2}i.style.left=s+"px",i.style.top=o+"px",this.derivativeContainer.appendChild(i)}}}})}),Bu=Ge.a.extend(at.a,{staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"title",attributes:{}}],classes:["cmm-touch-share-back-title"]},{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"shareBackImageView"},{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"title",attributes:{}}],classes:["cmm-share-back-title"],name:"titleContainer"},{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"question",attributes:{}}],classes:["cmm-share-back-question"],name:"questionContainer"}],classes:["cmm-share-back-wrapper"]},{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"actionButton"},{type:"VIEWOUTLET",tagname:"view",name:"closeButton"}],classes:["cmm-share-back-wrapper","btn-wrapper"]}],classes:["cmm-share-back-row"]}],classes:[{type:"CLASSNAMEOUTLET",bindingtype:"DIRECTBINDING",name:"cssClass",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isHovering",truevalue:"share-back-hover",falsevalue:"share-back-inline",attributes:{}}]},className:"cmm-share-back-toast-footer-content",__QUALIFIED_CLASS_NAME__:"ShareBackToastFooterContentView"},shareBackSuggestionsService:b.b(),primaryInteractionMode:b.b(),isHovering:b.b(),finalWidthForSBToast:b.b(),cssClass:b.b({readOnly:!0,dependencies:["primaryInteractionMode"],get:function(){var e=this.primaryInteractionMode;return e?"share-back-"+e.toLocaleLowerCase():""}}),shareBackImageView:b.b({strong:!0,defaultValue:$.b(ju),downstreamBindings:{primaryInteractionMode:"(owner).primaryInteractionMode",shareBackSuggestionsService:"(owner).shareBackSuggestionsService"}}),title:y.d("ShareBackFooter.Content.Title"),question:b.b({readOnly:!0,dependencies:["shareTitle","primaryInteractionMode","isHovering","finalWidthForSBToast"],get:Object.assign(function(){var e=this.shareTitle,t=this.isHovering,n=ku.a(e)||void 0===this.primaryInteractionMode||void 0===this.finalWidthForSBToast||void 0===t?y.d("ShareBackFooter.Content.Default.Question"):y.d("ShareBackFooter.Content.Question",{shareTitle:e});return this._fitStringToContainer(n,this.questionContainer,t)},{__CW__getter:function(e,t,n,i){var r=this.shareTitle,a=this.isHovering,s=ku.a(r)||void 0===i.internalGet(this,t[1+n])||void 0===i.internalGet(this,t[3+n])||void 0===a?y.d("ShareBackFooter.Content.Default.Question"):y.d("ShareBackFooter.Content.Question",{shareTitle:r});return this._fitStringToContainer(s,this.questionContainer,a)}})}),actionButton:b.b({readOnly:!0,strong:!0,defaultValue:$.b(xt.a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",classes:["cmm-button",{type:"CLASSNAMEOUTLET",bindingtype:"DIRECTBINDING",name:"buttonClass",attributes:{}}]}}},title:y.d("ShareBackFooter.Action.Button.Title"),action:"viewShareBack",isHovering:b.b(),primaryInteractionMode:b.b(),buttonClass:b.b({readOnly:!0,dependencies:["isHovering","primaryInteractionMode"],get:Object.assign(function(){return this.isHovering&&this.primaryInteractionMode===wt.a.MOUSE?"cmm-view-share-back":"secondary-action"},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])&&i.internalGet(this,t[1+n])===wt.a.MOUSE?"cmm-view-share-back":"secondary-action"}})})})),downstreamBindings:{isHovering:"(owner).isHovering",primaryInteractionMode:"(owner).primaryInteractionMode"}}),closeButton:b.b({strong:!0,type:xt.a,defaultValue:$.b(xt.a,{title:y.d("ShareBackFooter.Action.Button.Close"),additionalClassNames:["share-back-close","cmm-button"],action:"closeShareBackToast"})}),shareTitle:b.b(Gt.c("shareBackSuggestionsService.shareBackShareTitle")),_fitStringToContainer:function(e,t,n){var i=this._guessNumOfLinesUsedByTitle(),r=n?1===i?2:1:3;return Vo(e,t.getBoundingClientRect().width,it.a(t).get("font"),{numberOfLines:r})},_guessNumOfLinesUsedByTitle:function(){var e=this.titleContainer,t=this.title.toUpperCase(),n=it.a(e).get("font");return t===Vo(t,this.titleContainer.offsetWidth,n,{numberOfLines:1})?1:2}}),Uu=(n(1066),(Ou={})[wt.a.MOUSE]=140,Ou[wt.a.TOUCH]=110,Ou),Wu=((Au={})[wt.a.MOUSE]=140,Au[wt.a.TOUCH]=70,Au),Gu=Ge.a.extend(at.a,{staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"contentView"}],name:"insetter"}]},className:"cmm-share-back-toast-footer",__QUALIFIED_CLASS_NAME__:"ShareBackToastFooterView"},init:function(){var e=arguments;this.__s._$Ex$init.apply(this,e);var t=this.panGestureRecognizer=Jr.a.create({event:"cmmPanGesture",delegate:this});this.addGestureRecognizer(t)},contentView:b.b({strong:!0,defaultValue:$.b(Bu),downstreamBindings:{shareBackSuggestionsService:"(owner).shareBackSuggestionsService",primaryInteractionMode:"(owner).primaryInteractionMode",isHovering:"(owner).isHovering",finalWidthForSBToast:"(owner).finalWidthForSBToast"}}),shareBackSuggestionsService:b.b(),preferredHoverInset:b.b({readOnly:!0,dependencies:["primaryInteractionMode"],get:Object.assign(function(){return this.primaryInteractionMode===wt.a.MOUSE?22:15},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])===wt.a.MOUSE?22:15}})}),preferredHoverWidth:b.b({readOnly:!0,dependencies:["primaryInteractionMode","parentLayoutWidth","preferredHoverInset"],get:Object.assign(function(){return Math.min(this.primaryInteractionMode===wt.a.MOUSE?650:1/0,this.parentLayoutWidth-2*this.preferredHoverInset)},{__CW__getter:function(e,t,n,i){return Math.min(i.internalGet(this,t[0+n])===wt.a.MOUSE?650:1/0,i.internalGet(this,t[1+n])-2*i.internalGet(this,t[2+n]))}})}),preferredHeight:b.b({readOnly:!0,dependencies:["primaryInteractionMode","isHovering"],defaultValue:Uu[wt.a.TOUCH],get:function(){var e=this.primaryInteractionMode,t=this.isHovering;return e&&void 0!==t?t?Wu[e]:Uu[e]:NaN}}),shouldLayerBack:Wi.prototype.shouldLayerBack,primaryInteractionMode:b.b(),parentLayoutWidth:b.b(),parentSectionLeftPadding:b.b(),parentViewportHeight:b.b(),inlineX:b.b(Gt.c("parentSectionLeftPadding")),inlineY:b.b(),inlineWidth:b.b(Gt.c("parentLayoutWidth")),inlineHeight:b.b(),hoverIngressEgressVisibilityFactor:Fu.a({duration:350,readOnly:!0,dependencies:["isAttached","isForeverInlineMode","isTempInlineMode","shouldShowShareBackToastIfAvailable"],get:Object.assign(function(){return this.isAttached&&this.shouldShowShareBackToastIfAvailable?1:!this.isAttached||this.isTempInlineMode||this.isForeverInlineMode?0:1},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])&&i.internalGet(this,t[3+n])?1:!i.internalGet(this,t[0+n])||i.internalGet(this,t[2+n])||i.internalGet(this,t[1+n])?0:1}})}),hasBeenInForcedInlineModeForAtLeastAWhile:b.b(Gt.c("isForeverInlineModeRatchet.value")),isForeverInlineModeRatchet:b.b($.b(wr.a.extend({defersUpgrades:400,targetValue:Gt.c("owner.isForeverInlineMode")}))),hasBeenInInlineModeForAtLeastAWhile:b.b(Gt.c("isTempInlineModeRatchet.value")),isTempInlineModeRatchet:b.b($.b(wr.a.extend({defersUpgrades:400,targetValue:Gt.c("owner.isTempInlineMode")}))),hoverX:b.b({readOnly:!0,dependencies:["parentLayoutWidth","parentSectionLeftPadding","hoverWidth"],get:Object.assign(function(){return Math.round(this.parentSectionLeftPadding+this.parentLayoutWidth/2-this.hoverWidth/2)},{__CW__getter:function(e,t,n,i){return Math.round(i.internalGet(this,t[1+n])+i.internalGet(this,t[0+n])/2-i.internalGet(this,t[2+n])/2)}})}),hoverY:b.b({readOnly:!0,dependencies:["parentViewportHeight","hoverHeight","preferredHoverInset","hoverIngressEgressVisibilityFactor"],get:Object.assign(function(){return Math.round(this.parentViewportHeight-this.hoverIngressEgressVisibilityFactor*(this.hoverHeight+this.preferredHoverInset))},{__CW__getter:function(e,t,n,i){return Math.round(i.internalGet(this,t[0+n])-i.internalGet(this,t[3+n])*(i.internalGet(this,t[1+n])+i.internalGet(this,t[2+n])))}})}),hoverWidth:b.b(Gt.c("preferredHoverWidth")),hoverHeight:b.b(Gt.c("preferredHeight")),isHovering:b.b({readOnly:!0,dependencies:["inlineY","inlineHeight","parentViewportHeight","hasBeenInForcedInlineModeForAtLeastAWhile","hasBeenInInlineModeForAtLeastAWhile"],get:Object.assign(function(){var e=this.inlineY,t=this.inlineHeight,n=this.parentViewportHeight;if(!isNaN(e+t+n))return!0!==this.hasBeenInForcedInlineModeForAtLeastAWhile&&!0!==this.hasBeenInInlineModeForAtLeastAWhile&&e+.5*t>n},{__CW__getter:function(e,t,n,i){var r=this.inlineY,a=this.inlineHeight,s=this.parentViewportHeight;if(!isNaN(r+a+s))return!0!==i.internalGet(this,t[3+n])&&!0!==i.internalGet(this,t[4+n])&&r+.5*a>s}})}),isForeverInlineMode:b.b(),isTempInlineMode:b.b(),shouldShowShareBackToastIfAvailable:b.b(!1),sendIsHoveringSignal:W.e({inputs:["isHovering"],callback:function(e){this.sendEvent("shareBackToastChangedHoverState",{isHovering:e})}}),hoveringness:Fu.a({duration:350,readOnly:!0,dependencies:["isHovering"],get:Object.assign(function(){return Number(this.isHovering)},{__CW__getter:function(e,t,n,i){return Number(i.internalGet(this,t[0+n]))}})}),finalX:b.b({readOnly:!0,dependencies:["inlineX","hoverX","hoveringness"],get:Object.assign(function(){var e=this.hoveringness;return e*this.hoverX+(1-e)*this.inlineX},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[2+n]);return r*i.internalGet(this,t[1+n])+(1-r)*i.internalGet(this,t[0+n])}})}),finalY:b.b({readOnly:!0,dependencies:["inlineY","hoverY","hoveringness"],get:Object.assign(function(){var e=this.hoveringness;return e*this.hoverY+(1-e)*this.inlineY},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[2+n]);return r*i.internalGet(this,t[1+n])+(1-r)*i.internalGet(this,t[0+n])}})}),finalWidth:b.b({readOnly:!0,dependencies:["inlineWidth","hoverWidth","hoveringness"],get:Object.assign(function(){var e=this.hoveringness;return e*this.hoverWidth+(1-e)*this.inlineWidth},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[2+n]);return r*i.internalGet(this,t[1+n])+(1-r)*i.internalGet(this,t[0+n])}})}),finalWidthForSBToast:b.b(Gt.c("finalWidth")),finalHeight:b.b({readOnly:!0,dependencies:["inlineHeight","hoverHeight","hoveringness"],get:Object.assign(function(){var e=this.hoveringness;return e*this.hoverHeight+(1-e)*this.inlineHeight},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[2+n]);return r*i.internalGet(this,t[1+n])+(1-r)*i.internalGet(this,t[0+n])}})}),doLayout:function(e,t,n,i){H.a.pause(),this.inlineY=t,this.inlineHeight=i,H.a.resume()},actuallyDoLayout:W.f({inputs:["hoveringness","finalX","finalY","finalWidth","finalHeight","primaryInteractionMode"],callback:function(e,t,n,i,r,a){if(!isNaN(e+t+n+i+r)&&a){var s=5;a===wt.a.TOUCH&&(s*=3*e);var o="0px 2px 10px rgba(0, 0, 0, "+.2*e+")";this.style.set("border-radius",s).set("box-shadow",e?o:void 0).set("width",i).set("height",r).translateDevicePixels(t,n).layerBackIf(this.shouldLayerBack),it.a(this.insetter).set("position","absolute").set("top",0).set("left",0).set("right",0).set("bottom",0)}}}),cmmPanGesture:function(e){e&&e.velocity&&e.velocity.y>.1&&this.sendEvent("closeShareBackToast")},_isInteractable:function(){return Boolean(this.isHovering)&&this.primaryInteractionMode===wt.a.TOUCH},gestureRecognizerShouldReceive:function(){return!!this._isInteractable()},gestureRecognizerShouldBeRequiredToFailBy:function(e,t){return!(!e.instanceOf(Jr.a)||!t.instanceOf(Jr.a))},gestureRecognizerShouldRequireFailureOf:function(e,t){return!!t.instanceOf(un.b)},gestureRecognizerShouldBegin:function(){return!0},gestureRecognizerShouldRecognizeSimultaneouslyWith:function(){return!1},__superMap:{_$Ex$init:"init"}}),Hu={isShareBackToastFooterDesired:b.b({readOnly:!0,dependencies:["shareBackSuggestionsService","shareBackSuggestionsService.shareBackReadyForDisplay","isHoveringState"],didChange:function(){this.update()},get:Object.assign(function(){var e=this.shareBackSuggestionsService;return e&&e.shareBackReadyForDisplay},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return r&&r.shareBackReadyForDisplay}})}),isHoveringState:b.b(!1),isForeverInlineMode:b.b(!1),isTempInlineMode:b.b(!1),shouldShowShareBackToastIfAvailable:b.b(!1),presenter:_.a({viewClassKeysByCellType:_.a({shareBackToastFooter:"shareBackToastFooterItemViewClass"}),shareBackToastFooterItemViewClass:Gu,itemViewBindingsByClassKey:_.a({shareBackToastFooterItemViewClass:{primaryInteractionMode:"owner.primaryInteractionMode",parentSectionLeftPadding:"owner.layoutMetrics.sectionLeftPadding",parentLayoutWidth:"owner.layoutMetrics.apparentLayoutWidth",parentViewportHeight:"owner.viewportHeight",shareBackSuggestionsService:"owner.shareBackSuggestionsService",isForeverInlineMode:"owner.isForeverInlineMode",isTempInlineMode:"owner.isTempInlineMode",shouldShowShareBackToastIfAvailable:"owner.shouldShowShareBackToastIfAvailable"}})}),layoutDelegate:_.a({sizeKeyByCellType:_.a({shareBackToastFooter:"getShareBackToastFooterItemSize"}),getShareBackToastFooterItemSize:function(e,t){var n=e.layoutMetrics,i=e.viewportWidth,r=(e.presenter&&e.presenter.owner).primaryInteractionMode;return r||(r=Uu[wt.a.MOUSE]),Ci.a.create(i,n.shareBackToastItemHeight.inline[r])},cellClassKeysByCellType:_.a({shareBackToastFooter:"shareBackToastFooterCellClass"}),shareBackToastFooterCellClass:Yi.a.extend({handle:"shareBackToastFooter",isReusable:!1}),completeVisibleCells:function(e,t,n,i){var r=arguments,a=this.__s._$14I$completeVisibleCells.apply(this,r);if(!this.owner.isShareBackToastFooterDesired)return a;var s=this.bottomMostItem(e,n);if(s){var o=s.handle&&s.handle.position===s.handle.maximumPosition?s.bottom+e.layoutMetrics.rowSpacing+e.layoutMetrics.shareCountsInfoItemHeight:this.owner.viewportHeight,c=this.cellForHandle(null,"shareBackToastFooter");return c.retain(),c.value=t,this.layOutCellInDirection(e,c,1,o),n.push(c),c.release(),a}},spaceBelowCell:function(e){var t=arguments;if(!this.owner.isShareBackToastFooterDesired)return this.__s._$1Q9$spaceBelowCell.apply(this,t);var n=e.layoutMetrics,i=e.presenter,r=i&&i.owner.primaryInteractionMode,a=i&&i.owner.isHoveringState;r||(r=Uu[wt.a.MOUSE]);var s=a?n.shareBackToastItemHeight.hover[r]:n.shareBackToastItemHeight.inline[r];return this.__s._$1Q9$spaceBelowCell.apply(this,t)+s+n.rowSpacing},__superMap:{_$14I$completeVisibleCells:"completeVisibleCells",_$1Q9$spaceBelowCell:"spaceBelowCell"}}),layoutMetrics:_.a({shareBackToastItemHeight:{inline:Uu,hover:Wu}}),isScrollSpeedBelowThresholdRatchet:b.b({readOnly:!0,strong:!0,type:wr.a,get:function(){return wr.a.create({allowsDowngrades:!0,defersUpgrades:500,targetValue:this.bindingFor("isScrollSpeedBelowThreshold")})}}),isScrollSpeedBelowThreshold:b.b({dependencies:["view.scrollMotionY.emaSpeed"],readOnly:!0,get:Object.assign(function(){return Math.max(this.getPath("view.scrollMotionY.speed"),this.getPath("view.scrollMotionY.emaSpeed"))<500},{__CW__getter:function(e,t,n,i){return Math.max(this.getPath("view.scrollMotionY.speed"),i.internalGetPath(this,t[0+n]))<500}})}),wasScrolledObserver:W.f({inputs:["isScrollSpeedBelowThresholdRatchet.value","isHoveringState","layoutMetrics","view.scrollHeight","view.scrollMaxY","shouldShowShareBackToastIfAvailable"],callback:function(e,t,n,i,r,a){i&&r&&n&&(a?this.isTempInlineMode=!1:(e||!0===t)&&this.updateIsTempInlineMode())}}),updateIsTempInlineMode:function(){if(!0!==this.isDisposed){var e=this.view,t=this.layoutMetrics;if(e&&t){var n=2.3*(t.rowHeight+t.rowSpacing);this.isTempInlineMode=Boolean(e.scrollHeight-e.scrollMaxY<n)}}},shareBackToastChangedHoverState:function(e){this.isHoveringState=e.isHovering},closeShareBackToast:function(){this.shouldShowShareBackToastIfAvailable=!1,this.isForeverInlineMode=!0}},$u=mn.a.extend({iconNames:["photos-icon"],message:y.d("ReportSpamAlertView.Title"),_description:y.d("ReportSpamAlertView.Description"),description:b.b({readOnly:!0,dependencies:["primaryInteractionMode"],get:Object.assign(function(){return this.primaryInteractionMode===wt.a.MOUSE?this._description:void 0},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])===wt.a.MOUSE?this._description:void 0}})}),alertStyle:wc.a.ACTION_SHEET,primaryInteractionMode:b.b(),shortGUID:b.b(),buttons:b.b({readOnly:!0,dependencies:["primaryInteractionMode","cancelButtonInfo","confirmButtonInfo"],defaultValue:function(){return G.b.create()},get:Object.assign(function(e){var t=[this.confirmButtonInfo,this.cancelButtonInfo];return this.primaryInteractionMode!==wt.a.MOUSE&&t.reverse(),e.splice.apply(e,[0,e.length].concat(t)),e},{__CW__getter:function(e,t,n,i){var r=[i.internalGet(this,t[2+n]),i.internalGet(this,t[1+n])];return i.internalGet(this,t[0+n])!==wt.a.MOUSE&&r.reverse(),e.splice.apply(e,[0,e.length].concat(r)),e}})}),cancelButtonInfo:b.b(function(){var e=this;return{title:y.d("ReportSpamAlertView.Cancel"),wasActivated:function(){return e.onCancel()},isAlternate:!0}}),onCancel:Z.a,confirmButtonInfo:b.b(function(){var e=this;return{title:y.d("ReportSpamAlertView.Confirm"),wasActivated:function(){return e._onConfirm()},isPrimary:!0}}),onConfirm:go.a,_onConfirm:function(){var e=this._report();return this.onConfirm(e)},_report:function(){return d.b().reportShareAsSpam(this.shortGUID)},staticMembers:{__QUALIFIED_CLASS_NAME__:"ReportSpamAlertViewController"}}),zu=(n(1072),n(488)),Ku=xt.a.extend({mixinDependencies:[Nr.a],title:b.b({readOnly:!0,dependencies:["isDisabled"],get:Object.assign(function(){return this.isDisabled?y.d("ReportSpamButton.Title.Confirmed"):y.d("ReportSpamButton.Title")},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?y.d("ReportSpamButton.Title.Confirmed"):y.d("ReportSpamButton.Title")}})}),icon:b.b({readOnly:!0,dependencies:["isDisabled"],get:Object.assign(function(){return this.isDisabled?zu:void 0},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?zu:void 0}})}),additionalClassNames:["report-spam-button"],primaryInteractionMode:b.b(),shortGUID:b.b(),wasActivated:function(){var e=this;return $u.show({primaryInteractionMode:this.bindingFor("primaryInteractionMode"),shortGUID:this.bindingFor("shortGUID"),onCancel:function(){return e.onCancel()},onConfirm:function(t){return e._onConfirm(t)}})},onCancel:Z.a,onConfirm:go.a,_onConfirm:function(e){return this.isDisabled=!0,this.onConfirm(e)},staticMembers:{__QUALIFIED_CLASS_NAME__:"ReportSpamButton"}}),Qu=(n(1070),Ge.a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"mediaCountString",attributes:{}}],classes:["total"]},{type:"VIEWOUTLET",tagname:"view",name:"reportSpamButton"}],classes:["collection-info"]}]}},className:"cmm-share-counts",__QUALIFIED_CLASS_NAME__:"ShareCountsInfoView"},reportSpamButton:b.b({dependencies:["isAuthenticated","currentUserIsShareOwner"],readOnly:!0,strong:!0,get:Object.assign(function(){if(!0===this.isAuthenticated&&!0!==this.currentUserIsShareOwner)return Ku.create({primaryInteractionMode:this.bindingFor("primaryInteractionMode"),shortGUID:this.bindingFor("shortGUID"),onConfirm:function(e){return e.catch(function(){c.b.error("Error reporting this share as spam.")})}})},{__CW__getter:function(e,t,n,i){if(!0===i.internalGet(this,t[0+n])&&!0!==i.internalGet(this,t[1+n]))return Ku.create({primaryInteractionMode:this.bindingFor("primaryInteractionMode"),shortGUID:this.bindingFor("shortGUID"),onConfirm:function(e){return e.catch(function(){c.b.error("Error reporting this share as spam.")})}})}})}),primaryInteractionMode:b.b(),isAuthenticated:b.b(),shortGUID:b.b(),currentUserIsShareOwner:b.b(),libraryInfo:b.b(),itemsRemaining:b.b(),mediaCountString:b.b({dependencies:["itemsRemaining","libraryInfo"],readOnly:!0,get:function(){var e=this.libraryInfo,t=this.itemsRemaining,n=void 0===t?0:t;return void 0===e?"":Object(Bs.d)(e,n)}}),isAttachedListener:W.e({inputs:["isAttached"],callback:function(){this.sendEvent("renderedCMMFooter")}})})),qu={presenter:_.a({viewClassKeysByCellType:_.a({shareCountsInfo:"shareCountsInfoItemViewClass"}),shareCountsInfoItemViewClass:Qu,itemViewBindingsByClassKey:_.a({shareCountsInfoItemViewClass:{primaryInteractionMode:"owner.primaryInteractionMode",isAuthenticated:"owner.isAuthenticated",shortGUID:"owner.shortGUID",libraryInfo:"owner.libraryInfo",currentUserIsShareOwner:"owner.currentUserIsShareOwner"}})}),layoutDelegate:_.a({sizeKeyByCellType:_.a({shareCountsInfo:"getShareCountsViewItemSize"}),getShareCountsViewItemSize:function(e,t){return Ci.a.create(e.viewportWidth,e.layoutMetrics.shareCountsInfoItemHeight)},cellClassKeysByCellType:_.a({shareCountsInfo:"shareCountsInfoCellClass"}),shareCountsInfoCellClass:Yi.a.extend({handle:"shareCountsInfo",isReusable:!1}),completeVisibleCells:function(e,t,n,i){var r=arguments;this.__s._$TM$completeVisibleCells.apply(this,r);var a=this.bottomMostItem(e,n);if(a&&a.handle.position===a.handle.maximumPosition){var s=a.bottom+this.spaceBelowCell(e,a)-e.layoutMetrics.shareCountsInfoItemHeight-e.layoutMetrics.shareLegalFooterItemHeight-e.layoutMetrics.bottomPadding;if(e&&e.presenter&&e.presenter.owner&&e.presenter.owner.isShareBackToastFooterDesired){var o=e.presenter.owner,c=o.primaryInteractionMode,l=o.layoutMetrics;s-=(o.isHoveringState?l.shareBackToastItemHeight.hover[c]:l.shareBackToastItemHeight.inline[c])+l.rowSpacing}if(s>e.viewportHeight)return;var u=this.cellForHandle(null,"shareCountsInfo");u.retain(),u.value=t,this.layOutCellInDirection(e,u,1,s),n.push(u),u.release()}},spaceBelowCell:function(e){var t=arguments;return this.__s._$14W$spaceBelowCell.apply(this,t)+e.layoutMetrics.shareCountsInfoItemHeight},__superMap:{_$TM$completeVisibleCells:"completeVisibleCells",_$14W$spaceBelowCell:"spaceBelowCell"}}),layoutMetrics:_.a({shareCountsInfoItemHeight:75})},Yu={presenter:_.a({viewClassKeysByCellType:_.a({shareLegalFooter:"shareLegalFooterItemViewClass"}),shareLegalFooterItemViewClass:pc,itemViewBindingsByClassKey:_.a({shareLegalFooterItemViewClass:{primaryInteractionMode:"owner.primaryInteractionMode"}})}),layoutDelegate:_.a({sizeKeyByCellType:_.a({shareLegalFooter:"getShareFooterItemSize"}),getShareFooterItemSize:function(e,t){return Ci.a.create(e.viewportWidth,e.layoutMetrics.shareLegalFooterItemHeight)},cellClassKeysByCellType:_.a({shareLegalFooter:"shareLegalFooterCellClass"}),shareLegalFooterCellClass:Yi.a.extend({handle:"shareLegalFooter",isReusable:!1}),completeVisibleCells:function(e,t,n,i){var r=arguments;this.__s._$Pb$completeVisibleCells.apply(this,r);var a=this.bottomMostItem(e,n);if(a&&a.handle.position===a.handle.maximumPosition){var s=a.bottom+this.spaceBelowCell(e,a)-e.layoutMetrics.shareLegalFooterItemHeight-e.layoutMetrics.bottomPadding;if(s>e.viewportHeight)return;var o=this.cellForHandle(null,"shareLegalFooter");o.retain(),o.value=t,this.layOutCellInDirection(e,o,1,s),n.push(o),o.release()}},spaceBelowCell:function(e){var t=arguments;return this.__s._$nE$spaceBelowCell.apply(this,t)+e.layoutMetrics.shareLegalFooterItemHeight},__superMap:{_$Pb$completeVisibleCells:"completeVisibleCells",_$nE$spaceBelowCell:"spaceBelowCell"}}),layoutMetrics:_.a({shareLegalFooterItemHeight:65})},Zu=n(885),Ju=M.a.extend(Zu.a,{selectionControllerShouldSelectItem:function(e,t){return this.shouldItemBeSelected(t.position,e.collection)},selectionControllerShouldSelectRange:function(e,t){var n=this,i=e.collection,r=sa.a.create();return t.forEach(function(e){n.shouldItemBeSelected(e,i)&&r.add(e)}),r},shouldItemBeSelected:function(e,t){var n=t.objectAt(e),i=n?n.getPath("primaryAsset.recordName"):void 0,r=!0;if(i){var a=Fc.a.allModels,s=Array.isArray(a),o=0;for(a=s?a:a[Symbol.iterator]();;){var c;if(s){if(o>=a.length)break;c=a[o++]}else{if((o=a.next()).done)break;c=o.value}var l=c;if(l.includesRecordName(i)&&l.status!==Ll.a.FAILED){r=!1;break}}}return r},staticMembers:{__QUALIFIED_CLASS_NAME__:"ReceiverPageIndexedSelectionDelegate"}}),Xu=function(){var e=v.a,t=function(t){var n=e.create();try{t(n.resolve.bind(n),n.reject.bind(n))}catch(e){n.reject(e)}return n};return t.all=e.all.bind(e),t.race=e.race.bind(e),t.resolve=e.resolve.bind(e),t.reject=e.reject.bind(e),t}();function ed(e){return function(){var t=e.apply(this,arguments);return new Xu(function(e,n){return function i(r,a){try{var s=t[r](a),o=s.value}catch(e){return void n(e)}if(!s.done)return Xu.resolve(o).then(function(e){i("next",e)},function(e){i("throw",e)});e(o)}("next")})}}var td=Rc.sharedInstance,nd=xc.a.sharedInstance,id=Ua.extend({mixinDependencies:[Be,yc,Dl.a,ln,Wa],oneUpPageViewControllerClass:Kl,oneUpPageViewController:b.b({downstreamBindings:{isAuthenticated:"(owner).isAuthenticated",currentUserIsShareOwner:"(owner).currentUserIsShareOwner",primaryInteractionMode:"(owner).primaryInteractionMode",addToLibraryDelegate:"(owner)",rootRecord:"(owner).rootRecord",libraryInfo:"(owner).libraryInfo",userIsUnableToImport:"(owner).userIsUnableToImport",oneUpSelectionIsAllowed:"(owner).oneUpSelectionIsAllowed"}}),oneUpSelectionIsAllowed:b.b({readOnly:!0,dependencies:["selectionModeIsActive","currentUserIsShareOwner"],get:Object.assign(function(){return this.selectionModeIsActive&&!this.currentUserIsShareOwner},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])&&!i.internalGet(this,t[1+n])}})}),viewClass:Ml,view:b.b({downstreamBindings:{possibleImportProgressLabels:"(owner).possibleImportProgressLabels",importProgressIsIndeterminate:"(owner).importProgressIsIndeterminate",importProgressLabel:"(owner).importProgressLabel",importProgressValue:"(owner).importProgressValue",primaryInteractionMode:"(owner).primaryInteractionMode",shouldShowImportProgressView:"(owner).shouldShowImportProgressView",sizeClass:"(owner).sizeClass"}}),navItem:b.b({readOnly:!0,type:El,get:function(){return El.create({container:this.bindingFor("container"),currentUserIsShareOwner:this.bindingFor("currentUserIsShareOwner"),isAuthenticated:this.bindingFor("isAuthenticated"),nextResponder:this,primaryInteractionMode:this.bindingFor("primaryInteractionMode"),shareBackReadyForDisplay:this.bindingFor("shareBackSuggestionsService.shareBackReadyForDisplay")})}}),hostedByCloudOSOne:!1,copyICloudLink:function(){var e=this;return ed(regeneratorRuntime.mark(function t(){var n,i,r,a,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n={beginStat:Z.a,endStat:Z.a,recordStat:St.a.application.feedbackService.report},i=e.currentUserIsShareOwner,r=e.hostedByCloudOSOne,a=e.primaryInteractionMode,s=e.rootRecord,t.next=4,sn.a.showCopyLink(s,a,i,n,r);case 4:case"end":return t.stop()}},t,e)}))()},sizeClass:b.b(C.a.REGULAR),gridViewController:Jt.b({readOnly:!0,strong:!0,viewOutlet:"photosGridView",defaultValue:$.b(Wc.extend(ml,Hu,qu,Yu),{selectionController:_.a({delegate:b.b({readOnly:!0,dependencies:[],get:function(){return Ju.create()}})})}),downstreamBindings:{collection:"(owner).collection",shortGUID:"(owner).rootRecord.shortGUID",libraryInfo:"(owner).libraryInfo",itemsRemaining:"(owner).itemsRemaining",isSelectionEnabled:"(owner).selectionModeIsActive",isWhitespaceDeselectionEnabled:"(owner).isWhitespaceDeselectionEnabled",primaryInteractionMode:"(owner).primaryInteractionMode",currentUserIsShareOwner:"(owner).currentUserIsShareOwner",shareBackSuggestionsService:"(owner).shareBackSuggestionsService",shouldShowShareBackToastIfAvailable:"(owner).shouldShowShareBackToastIfAvailable",rootRecord:"(owner).rootRecord",name:"(owner).shareRecordOwnerDisplayName",isAuthenticated:"(owner).isAuthenticated",selectedItemCount:"(owner).selectedItemCount",assetCount:"(owner).assetCount",photosCount:"(owner).photosCount",videosCount:"(owner).videosCount",selectionModeIsActive:"(owner).selectionModeIsActive",uploadIsComplete:"(owner).uploadIsComplete",selectionHasBeenManipulated:"(owner).selectionHasBeenManipulated",downloadIsInProgress:"(owner).downloadIsInProgress",importedAssetDescriptor:"(owner).importedAssetDescriptor",importedAssetCount:"(owner).importedAssetCount",isAllAddedToLibrary:"(owner).isAllAddedToLibrary",userIsUnableToImport:"(owner).userIsUnableToImport"}}),shareBackSuggestionsService:b.b({defaultValue:$.b(xu),downstreamBindings:{container:"(owner).container",rootRecord:"(owner).rootRecord",currentUserIsShareOwner:"(owner).currentUserIsShareOwner"}}),triggerShareBackService:W.f({inputs:["shareBackSuggestionsService","shareBackSuggestionsService.isReadyToCalculate","isAuthenticated"],callback:function(e,t,n){t&&n&&e.calculateShareBack()}}),currentUserIsShareOwner:b.b({dependencies:["dataManager.userRecordName","rootRecord"],type:Boolean,readOnly:!0,get:Object.assign(function(){var e=this.dataManager;return void 0!==e&&e.isRecordOwnedByCurrentUser(this.rootRecord)},{__CW__getter:function(e,t,n,i){var r=this.dataManager;return void 0!==r&&r.isRecordOwnedByCurrentUser(i.internalGet(this,t[1+n]))}})}),dataManager:b.b(d.b),dateRange:b.b({dependencies:["rootRecord"],get:function(){var e=Ct.a(this,"rootRecord.endDate"),t=Ct.a(this,"rootRecord.startDate");return Mo.fmt(t,e)},readOnly:!0}),expiryDate:b.b({dependencies:["rootRecord"],readOnly:!0,get:function(){return this.getPath("rootRecord.expiryDate")||0}}),isAuthenticated:b.b(),userIsUnableToImport:b.b(!1),uploadIsComplete:b.b({type:Boolean,readOnly:!0,dependencies:["rootRecord","container","container.isLoaded","container.medias.length"],get:function(){var e=this.rootRecord,t=this.container;if(void 0!==e&&void 0!==t&&t.isLoaded)return e.assetCount===t.medias.length}}),itemsRemaining:b.b({dependencies:["rootRecord","libraryInfo"],readOnly:!0,get:Object.assign(function(){var e=this.rootRecord;if(!e)return 0;var t=e.assetCount,n=void 0===t?0:t;if(0===n)return n;var i=this.libraryInfo,r=i.videosCount+i.photosCount;return n<r?0:n-r},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);if(!r)return 0;var a=r.assetCount,s=void 0===a?0:a;if(0===s)return s;var o=i.internalGet(this,t[1+n]),c=o.videosCount+o.photosCount;return s<c?0:s-c}})}),isWhitespaceDeselectionEnabled:b.b(Qc.isWhitespaceDeselectionEnabled),libraryInfo:b.b(),selectedIndices:b.b(Gt.c("gridViewController.selectionController.selectedIndices")),selectionHasBeenManipulated:b.b(Gt.c("gridViewController.userHasManipulatedSelection")),selectedItemCount:b.b({readOnly:!0,dependencies:["selectedIndices","selectedIndices.length"],get:Object.assign(function(){return this.selectedIndices.length},{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[1+n])}})}),assetCount:b.b(Gt.c("rootRecord.assetCount")),photosCount:b.b(Gt.c("rootRecord.photosCount")),videosCount:b.b(Gt.c("rootRecord.videosCount")),selectionModeIsActive:b.b({writeDependencies:[],dependencies:["primaryInteractionMode"],get:Object.assign(function(e){return e||this.primaryInteractionMode===wt.a.MOUSE&&Qc.implicitDesktopSelectionMode},{__CW__getter:function(e,t,n,i){return e||i.internalGet(this,t[0+n])===wt.a.MOUSE&&Qc.implicitDesktopSelectionMode}})}),importedAssetDescriptor:b.b(),importedAssetCount:b.b(0),isAllAddedToLibrary:b.b({readOnly:!0,dependencies:["importedAssetCount","gridViewController.collection.length"],get:Object.assign(function(){return this.importedAssetCount===this.gridViewController.collection.length},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])===i.internalGetPath(this,t[1+n])}})}),downloadIsInProgress:b.b(),viewShareBack:function(){var e=this.primaryInteractionMode,t=this.rootRecord,n=this.shareBackSuggestionsService.shareBackContainer,i=St.a.application.feedbackService;i&&i.report&&i.report("cmmViewShareBackClicked");var r=du.create({container:n,rootRecord:t,primaryInteractionMode:e});this.showViewController(r)},toggleSelectionMode:function(){(this.selectionModeIsActive=!this.selectionModeIsActive)&&this.gridViewController.selectAll();var e=this.feedbackService;e&&e.report("didEnterSelectMode")},containerDidUpdate:function(e){var t=this;return ed(regeneratorRuntime.mark(function n(){var i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return!0===t.selectionModeIsActive&&t.gridViewController.selectAll(),n.next=3,gn.a.load({zonePK:e.zone.pk});case 3:(i=n.sent)&&X.a(i,G.b)&&(t.libraryInfo=i.objectAt(0));case 5:case"end":return n.stop()}},n,t)}))()},downloadMedias:function(e){var t=this;return ed(regeneratorRuntime.mark(function n(){var i,r,a,s,o,c,l,u,d,h;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i=t.collection,r=t.container,a=t.rootRecord,s=t.selectionModeIsActive,o=t.primaryInteractionMode,c=t.assetCount,l=t.libraryInfo,t.downloadIsInProgress=!0,u=void 0,u=s?e.toArray():Array.from(Array(i.length).keys()),n.next=6,t.downloadMediasManager.prepareDownloadURL({collection:i,container:r,selectedIndicesArray:u,primaryInteractionMode:o,rootRecord:a,showSpinner:!0,spinnerHideDelay:0});case 6:d=n.sent,t.downloadIsInProgress=!1,d.hasError?Oc():(h={assetCount:c,downloadURL:d.downloadURL,libraryInfo:l,downloadCount:u.length},t.zipDownloadWillBegin(d.archiveDetails,h));case 9:case"end":return n.stop()}},n,t)}))()},pageLoadedListener:W.e({inputs:["container.medias.length","container.isLoaded","libraryInfo.loadStatus","rootRecord","feedbackService"],callback:function(e,t,n,i,r){if(r&&e&&t&&n===pe.a.LOADED&&i){var a=r.getDaysRemaining(i.expiryDate),s=r.roundToNearestTen(i.assetCount),o=i.assetCount!==e;r.report("shareLoaded",{daysLeft:a,assetCount:s,isShareIncomplete:o})}}}),renderedCMMFooter:function(){var e=this.gridViewController,t=this.feedbackService;t&&e&&e.view&&e.view.scrollHeight>0&&t.report("shareDidScrollToEnd")},downloadMediasManager:b.b(td),importMediasManager:b.b(nd),doAddToLibraryButtonAction:function(){var e=this;return ed(regeneratorRuntime.mark(function t(){var n,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.gridViewController.selectionController.selectedIndices,i=n.clone(),!e.userIsUnableToImport){t.next=6;break}return t.next=5,e.downloadMedias(i);case 5:return t.abrupt("return",t.sent);case 6:if(!e.isAuthenticated){t.next=10;break}return t.next=9,e.importSelectionToLibrary(i);case 9:return t.abrupt("return",t.sent);case 10:return t.abrupt("return",Ac(e.collection,i,e.signInAndImportMedias.bind(e),e.downloadMedias.bind(e),e.selectionModeIsActive,e.primaryInteractionMode).catch(function(e){throw e}));case 11:case"end":return t.stop()}},t,e)}))()},acceptShare:W.f({inputs:["currentUserIsShareOwner","isAuthenticated","rootRecord"],callback:function(e,t,n){var i=this;return ed(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(!(n instanceof Object&&!0===t&&!1===e)){i.next=9;break}return i.prev=1,i.next=4,n.accept();case 4:i.next=9;break;case 6:i.prev=6,i.t0=i.catch(1),c.b.warn("CMMShare could not be accepted",i.t0);case 9:case"end":return i.stop()}},r,i,[[1,6]])}))()}}),staticMembers:{__QUALIFIED_CLASS_NAME__:"ReceiverPageViewController"}}),rd=(n(1079),Ge.a.extend(Ir.a,{staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"ELEMENT",tagname:"div",classes:["flex-spacer"]},{type:"ELEMENT",tagname:"div",classes:["flex-spacer"]},{type:"ELEMENT",tagname:"div",classes:["logo"]},{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"title",attributes:{}}],classes:["title"]},{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"subtitle",attributes:{}}],classes:["subtitle"]},{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"computedFilename",attributes:{}}],classes:["filename"],name:"filenameContainer",attributes:{title:{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"filename",attributes:{},attribute:"title"}}},{type:"ELEMENT",tagname:"div",classes:["flex-spacer"]},{type:"VIEWOUTLET",tagname:"view",name:"returnToSharedPhotosButton"},{type:"ELEMENT",tagname:"div",classes:["flex-spacer"]}]}},className:"cmm-thank-you-page",__QUALIFIED_CLASS_NAME__:"ThankYouPageView"},computedFilename:b.b({type:String,readOnly:!0,dependencies:["filename","isAttached","viewportWidth"],get:Object.assign(function(){if(this.isAttached){var e=this.filename,t=this.filenameContainer;if(e){var n=t.firstChild;t.removeChild(n);var i=t.clientWidth;return t.insertBefore(n,t.firstChild),ko(e,i,it.a(t).get("font"))}}},{__CW__getter:function(e,t,n,i){if(i.internalGet(this,t[1+n])){var r=this.filename,a=this.filenameContainer;if(r){var s=a.firstChild;a.removeChild(s);var o=a.clientWidth;return a.insertBefore(s,a.firstChild),ko(r,o,it.a(a).get("font"))}}}})}),title:b.b({type:String}),subtitle:b.b({type:String}),fileName:b.b({type:String}),returnToSharedPhotosButton:$.b(xt.a,{additionalClassNames:_.a(["return-button"]),title:y.d("CMMReceiver.Return.To.Shared.Photos.Button.Text"),tooltip:y.d("CMMReceiver.Return.To.Shared.Photos.Button.Tooltip"),action:"dismiss"})})),ad=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},sd=Rc.sharedInstance,od=Ve.a.extend({mixinDependencies:[Be,et],viewClass:rd,view:b.b({downstreamBindings:{filename:"(owner).filename",title:"(owner).title",subtitle:"(owner).subtitle"}}),title:b.b({type:String}),subtitle:b.b({type:String}),filename:b.b({type:String}),hasBeenDownloaded:T.c({defaultValue:!1,type:Boolean}),_beginZipDownloadObserver:W.f({inputs:["isAttached","isTransitioningTo"],callback:function(e,t){var n=this.hasBeenDownloaded;if(!1!==e&&!0!==t&&!0!==n){var i=this.downloadDetails,r=this.primaryInteractionMode;sd.downloadFromURL(ad({},i,{primaryInteractionMode:r})).hasError?Oc():this.hasBeenDownloaded=!0}}}),downloadDetails:T.c(),primaryInteractionMode:b.b(),staticMembers:{__QUALIFIED_CLASS_NAME__:"ThankYouPageViewController"}}),cd=function(){var e=v.a,t=function(t){var n=e.create();try{t(n.resolve.bind(n),n.reject.bind(n))}catch(e){n.reject(e)}return n};return t.all=e.all.bind(e),t.race=e.race.bind(e),t.resolve=e.resolve.bind(e),t.reject=e.reject.bind(e),t}(),ld=Kl.extend({signIn:function(){var e,t=this;return(e=regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vt.a.sharedInstance.authenticate();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,t)}),function(){var t=e.apply(this,arguments);return new cd(function(e,n){return function i(r,a){try{var s=t[r](a),o=s.value}catch(e){return void n(e)}if(!s.done)return cd.resolve(o).then(function(e){i("next",e)},function(e){i("throw",e)});e(o)}("next")})})()},staticMembers:{__QUALIFIED_CLASS_NAME__:"P3ReceiverOneUpPageViewController"}}),ud=function(){var e=v.a,t=function(t){var n=e.create();try{t(n.resolve.bind(n),n.reject.bind(n))}catch(e){n.reject(e)}return n};return t.all=e.all.bind(e),t.race=e.race.bind(e),t.resolve=e.resolve.bind(e),t.reject=e.reject.bind(e),t}(),dd=id.extend({oneUpPageViewControllerClass:ld,signIn:function(){var e,t=this;return(e=regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vt.a.sharedInstance.authenticate();case 2:return n=e.sent,e.abrupt("return",{ok:n});case 4:case"end":return e.stop()}},e,t)}),function(){var t=e.apply(this,arguments);return new ud(function(e,n){return function i(r,a){try{var s=t[r](a),o=s.value}catch(e){return void n(e)}if(!s.done)return ud.resolve(o).then(function(e){i("next",e)},function(e){i("throw",e)});e(o)}("next")})})()},zipDownloadWillBegin:function(e,t){var n=this.primaryInteractionMode===wt.a.TOUCH?e.filename:e.filenameWithoutExtension;this.presentViewController(od.create({primaryInteractionMode:this.bindingFor("primaryInteractionMode"),subtitle:y.d("CMMReceiver.Download.Page.Description"),title:y.d("CMMReceiver.Download.Page.Title"),filename:n,downloadDetails:t}))},staticMembers:{__QUALIFIED_CLASS_NAME__:"P3ReceiverPageViewController"}}),hd=rn.extend({init:function(e){var t=je.create();this.__s._$AZ$init.call(this,t,e)},primaryInteractionMode:b.b(),__superMap:{_$AZ$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"PhotosNavigationViewController"}}),pd=ds.a.extend({staticMembers:{storageKey:"photos-three-app"},logLevel:ds.a.stringProperty({defaultValue:function(){return c.a.LOG_LEVEL_WARN}}),iCloudHelpFragmentIdentifier:ds.a.stringProperty("mm93a9b98683")}).create(),fd={currentNavigationViewController:Jt.b({type:rn,viewOutlet:"currentNavigationView",get:function(e){return e||this.photosNavigationViewController},set:function(e){return e}}),isAuthenticated:b.b(Vt.a.sharedInstance.bindingFor("isAuthenticated")),photosNavigationViewController:b.b({readOnly:!0,strong:!0,type:hd,get:function(){return hd.create({primaryInteractionMode:this.bindingFor("primaryInteractionMode")})}}),incompleteShareNowReady:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.navigateToReceiverPage(e,t)},navigateToAllPhotosPage:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.photosNavigationViewController;if(t.viewControllers.length>1&&X.a(t.viewControllers.objectAt(0),Ao))t.popToRootViewController(e);else if(!X.a(t.viewControllers.topViewController,Ao)){var n=Ao.create({isAuthenticated:this.bindingFor("isAuthenticated"),primaryInteractionMode:this.bindingFor("primaryInteractionMode"),sizeClass:this.bindingFor("sizeClass")});t.setViewControllers([n],e)}this.setNavigationViewController(t)},navigateToReceiverPage:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.photosNavigationViewController,i=dd.create({isAuthenticated:this.bindingFor("isAuthenticated"),primaryInteractionMode:this.bindingFor("primaryInteractionMode"),sizeClass:this.bindingFor("sizeClass"),rootRecordPK:e});n.setViewControllers([i],t),this.setNavigationViewController(n)},navigateToIncompleteStatePage:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.photosNavigationViewController,i=Ic.create({primaryInteractionMode:this.bindingFor("primaryInteractionMode"),rootRecordPK:e});n.setViewControllers([i],t),this.setNavigationViewController(n)},navigateToSharedPhotosHelp:function(){var e=y.c(),t="http://help.apple.com/icloud"+("en"===e?"":"/?lang="+e)+"#/"+pd.iCloudHelpFragmentIdentifier,n=I.a.sharedInstance.isChrome?705:675;window.open(t,"help","height="+n+",width=875,location=0,status=0,scrollbars=0")},signInToiCloud:function(){this.isAuthenticated||Vt.a.sharedInstance.authenticate()},signOutOfiCloud:function(){!0===this.isAuthenticated&&Vt.a.sharedInstance.unauthenticate()},setNavigationViewController:function(e){this.currentNavigationViewController=e},primaryInteractionMode:b.b(),sizeClass:b.b()},gd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},md=function(){var e=v.a,t=function(t){var n=e.create();try{t(n.resolve.bind(n),n.reject.bind(n))}catch(e){n.reject(e)}return n};return t.all=e.all.bind(e),t.race=e.race.bind(e),t.resolve=e.resolve.bind(e),t.reject=e.reject.bind(e),t}(),vd=Ve.a.extend({mixinDependencies:[Be,fd],viewClass:Zt,view:b.b({downstreamBindings:{currentNavigationViewController:"(owner).currentNavigationViewController",primaryInteractionMode:"(owner).primaryInteractionMode",sizeClass:"(owner).sizeClass"}}),sizeClass:b.b(St.a.bindingFor("application.sizeClass")),applicationDidFinishLaunching:function(e){var t,n=this;return(t=regeneratorRuntime.mark(function t(){var i,r,a,s,o,c,l,u,h,p,f;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(i=Ct.a(e,"itemsToOpen.0.item"),r=n.isAuthenticated,void 0===i){t.next=19;break}return a=d.b(),s=a.loadCMMRootFromRecordInfo(i),o=s.pk,c=s.zone,l=At.a.getPrimaryKeyWithZonePK(c.pk,Et.a.PredefinedName.MOMENTS),u=Et.a.find(l),h=u.getDataHash(),p=h.medias,(f=gd({},h,{medias:[].concat(void 0===p?[]:p)})).medias.length=s.assetCount,a.loadData(Et.a,f,!1),u.loadMediasForRange(0,Tt.a.maxMediasForRangeRequest-1),t.next=16,u.reload();case 16:u.medias.length>0&&Ot.a.isShareCompleteEnough(s,u)?n.navigateToReceiverPage(o,!1):n.navigateToIncompleteStatePage(o,!1),t.next=24;break;case 19:if(!0!==r){t.next=23;break}n.navigateToAllPhotosPage(!1),t.next=24;break;case 23:throw new Error("PhotosApplication was initialized with an invalid `launchOptions` and `isAuthenticated` combination.",{launchOptions:e,isAuthenticated:r});case 24:case"end":return t.stop()}},t,n)}),function(){var e=t.apply(this,arguments);return new md(function(t,n){return function i(r,a){try{var s=e[r](a),o=s.value}catch(e){return void n(e)}if(!s.done)return md.resolve(o).then(function(e){i("next",e)},function(e){i("throw",e)});t(o)}("next")})})()},navigationBarSizeMayHaveChanged:function(){this.notifyTopViewControllerOfSizeChange()},notifyTopViewControllerOfSizeChange:function(){var e=this.currentNavigationViewController.topViewController;e&&e.measureViewport&&e.measureViewport()},primaryInteractionMode:b.b(),staticMembers:{__QUALIFIED_CLASS_NAME__:"MainPageViewController"}}),_d=gt.extend({endValue:T.c({readOnly:!0,get:function(){var e=arguments,t=0,n=this.getPath("fromView.headerViewForMouse.element");return void 0!==n&&(t=n.getBoundingClientRect().height),this.__s._$Be$get.apply(this,e)+t},__superMap:{_$Be$get:"get"}}),staticMembers:{__QUALIFIED_CLASS_NAME__:"SlideUpTransitionForDesktop"}}),bd=mt.extend({startValue:T.c({readOnly:!0,get:function(){var e=arguments,t=0,n=this.getPath("fromView.headerViewForMouse.element");return void 0!==n&&(t=n.getBoundingClientRect().height),this.__s._$KE$get.apply(this,e)+t},__superMap:{_$KE$get:"get"}}),staticMembers:{__QUALIFIED_CLASS_NAME__:"SlideDownTransitionForDesktop"}}),yd=(n(817),Ge.a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"MULTIVIEWOUTLET",tagname:"views",name:"rootPageContentViews",classes:["root-page-content-views-outlet"]}],classes:["root-page-view"]}},__QUALIFIED_CLASS_NAME__:"RootPageView"}})),Id=function(){var e=v.a,t=function(t){var n=e.create();try{t(n.resolve.bind(n),n.reject.bind(n))}catch(e){n.reject(e)}return n};return t.all=e.all.bind(e),t.race=e.race.bind(e),t.resolve=e.resolve.bind(e),t.reject=e.reject.bind(e),t}(),wd=Ve.a.extend({mixinDependencies:[Be,$e],init:function(e){var t=je.create();this.__s._$ML$init.call(this,t,e)},viewClass:yd,mainPageViewController:b.b({readOnly:!0,strong:!0,type:vd,get:function(){return vd.create({primaryInteractionMode:this.bindingFor("primaryInteractionMode")})}}),topViewController:nt({options:{viewsOutlet:"rootPageContentViews"}}),applicationDidFinishLaunching:function(e){var t,n=this;return(t=regeneratorRuntime.mark(function t(){var i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=n.mainPageViewController,t.next=3,i.applicationDidFinishLaunching(e);case 3:n.pushViewController(i);case 4:case"end":return t.stop()}},t,n)}),function(){var e=t.apply(this,arguments);return new Id(function(t,n){return function i(r,a){try{var s=e[r](a),o=s.value}catch(e){return void n(e)}if(!s.done)return Id.resolve(o).then(function(e){i("next",e)},function(e){i("throw",e)});t(o)}("next")})})()},dismissViewController:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.primaryInteractionMode===wt.a.TOUCH?mt:bd;t&&(this.getMetadata("topViewController").defaultTransitionClass=n),this.popViewController(e,t,!0)},presentViewController:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.primaryInteractionMode===wt.a.TOUCH?gt:_d;t&&(this.getMetadata("topViewController").defaultTransitionClass=n),this.pushViewController(e,t,!0)},popToViewController:function(e){var t=arguments;return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&(this.getMetadata("topViewController").defaultTransitionClass=It),this.__s._$1FY$popToViewController.apply(this,t)},pushViewController:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments;return!0===t&&!1===n&&(this.getMetadata("topViewController").defaultTransitionClass=It),this.__s._$1MU$pushViewController.apply(this,i)},popViewController:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments;return!0===e&&!1===t&&(this.getMetadata("topViewController").defaultTransitionClass=It),this.__s._$1T9$popViewController.apply(this,n)},primaryInteractionMode:b.b(),__superMap:{_$ML$init:"init",_$1FY$popToViewController:"popToViewController",_$1MU$pushViewController:"pushViewController",_$1T9$popViewController:"popViewController"},staticMembers:{__QUALIFIED_CLASS_NAME__:"RootPageViewController"}}),Sd=function(){var e=v.a,t=function(t){var n=e.create();try{t(n.resolve.bind(n),n.reject.bind(n))}catch(e){n.reject(e)}return n};return t.all=e.all.bind(e),t.race=e.race.bind(e),t.resolve=e.resolve.bind(e),t.reject=e.reject.bind(e),t}();function Cd(e){return function(){var t=e.apply(this,arguments);return new Sd(function(e,n){return function i(r,a){try{var s=t[r](a),o=s.value}catch(e){return void n(e)}if(!s.done)return Sd.resolve(o).then(function(e){i("next",e)},function(e){i("throw",e)});e(o)}("next")})}}var Od=E.a.extend(O,{Initializers:_.a([A.a]),applicationRedirectName:"photos",isLPKLoaded:b.b(!1),userLocale:b.b({readOnly:!0,get:function(){var e="en-us";try{e=y.a.sharedInstance.locale}catch(e){c.b.warn("Error getting userLocale:",e)}return e}}),feedbackService:b.b({readOnly:!0,strong:!0,type:ke,get:function(){return ke.create()}}),rootViewController:b.b({readOnly:!0,strong:!0,type:wd,get:function(){return wd.create({primaryInteractionMode:this.bindingFor("primaryInteractionMode")})}}),applicationDidFinishLaunching:function(e){var t=this;return Cd(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.performFinalInitialization(e);case 2:return n.next=4,t.rootViewController.applicationDidFinishLaunching(e);case 4:t.feedbackService.report("appDidStart");case 5:case"end":return n.stop()}},n,t)}))()},performFinalInitialization:function(){var e=this;return Cd(regeneratorRuntime.mark(function t(){var n,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=Vt.a.sharedInstance,i=Me.create({isStartupFetchingCplZone:n.isAuthenticated,isStartupFetchingCplContainers:n.isAuthenticated,feedbackService:e.feedbackService}),t.next=4,i.startup();case 4:case"end":return t.stop()}},t,e)}))()},staticMembers:{__QUALIFIED_CLASS_NAME__:"PhotosApplication"}}),Ad=n(807),Ed=function(){var e=v.a,t=function(t){var n=e.create();try{t(n.resolve.bind(n),n.reject.bind(n))}catch(e){n.reject(e)}return n};return t.all=e.all.bind(e),t.race=e.race.bind(e),t.resolve=e.resolve.bind(e),t.reject=e.reject.bind(e),t}(),Td=Ad.a.extend({applicationWillFinishLaunching:function(e,t){c.b.logOutputLevel=pd.logLevel,c.b.messagePrefix="[PhotosWebclientThree]",c.b.info("applicationWillFinishLaunching"),Vt.a.sharedInstance.initialize(),e.primaryInteractionMode===wt.a.MOUSE&&(new l).loadFonts(["FOR_FONT_LOADER_USE_ONLY-SFDisplay-Light","FOR_FONT_LOADER_USE_ONLY-SFDisplay-Regular","FOR_FONT_LOADER_USE_ONLY-SFDisplay-Medium","FOR_FONT_LOADER_USE_ONLY-SFDisplay-Semibold","FOR_FONT_LOADER_USE_ONLY-SFDisplay-Bold"])},applicationDidFinishLaunching:function(e,t){var n,i=this;return(n=regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.applicationDidFinishLaunching(t);case 3:c.b.info("applicationDidFinishLaunching"),n.next=10;break;case 6:throw n.prev=6,n.t0=n.catch(0),"string"==typeof n.t0.message&&(n.t0.message="StartupError: "+n.t0.message),n.t0;case 10:case"end":return n.stop()}},n,i,[[0,6]])}),function(){var e=n.apply(this,arguments);return new Ed(function(t,n){return function i(r,a){try{var s=e[r](a),o=s.value}catch(e){return void n(e)}if(!s.done)return Ed.resolve(o).then(function(e){i("next",e)},function(e){i("throw",e)});t(o)}("next")})})()},staticMembers:{__QUALIFIED_CLASS_NAME__:"PhotosApplicationDelegate"}});f.wrapDrawImage(),i.a.main({applicationClass:Od,delegateClass:Td}),(new l).loadFonts(["FOR_FONT_LOADER_USE_ONLY-SFText-Light","FOR_FONT_LOADER_USE_ONLY-SFText-Regular","FOR_FONT_LOADER_USE_ONLY-SFText-Medium","FOR_FONT_LOADER_USE_ONLY-SFText-Semibold","FOR_FONT_LOADER_USE_ONLY-SFText-Bold"])},function(e,t,n){"use strict";var i=n(80),r=n(49),a=n(54),s={mixinDependencies:[r.a],isExceptionHandlingEnabled:!1,isExceptionHandlingFatal:!0,exceptionHandler:a.a.define(),exceptionWasHandled:!1},o={mixinDependencies:[r.a],staticMembers:Object.assign({},s)};delete o.staticMembers.mixinDependencies;var c=n(177),l=n(41),u=n(1185),d=n(180),h=n(1177),p=n(1169),f=n(96),g=n(65),m=n(1143),v=n(36),_=n(34),b=n(93),y=n(184),I=n(172),w=n(120),S=n(192),C=n(803),O=n(77),A=O.a.extend({appDocumentElement:window.document.documentElement,action:function(){var e,t=this.appDocumentElement;e=t,Object(C.a)(S.a.get("sharedInstance"),e,"data-"),Object(C.a)(w.a.get("sharedInstance"),e,"data-");var n=I.a.sharedInstance;n.observe("locale",function(e){Object(C.b)("lang",e,t)}),n.observe("isRTL",function(e){var n=e?"rtl":"ltr";Object(C.b)("dir",n,t)})},staticMembers:{__QUALIFIED_CLASS_NAME__:"DocumentElementInitializer"}}),E=(n(786),{mixinDependencies:[n(789).a],isInFocusableLayer:Object(_.b)(Object(b.c)("isFocusableLayer")),isInFocusedLayer:Object(_.b)(Object(b.c)("isFocusedLayer")),isInFocusedBranch:Object(_.b)({readOnly:!0,dependencies:["isInFocusedLayer"],get:Object.assign(function(){return this.isInFocusedLayer},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])}})}),isFocusableLayer:Object(_.b)({readOnly:!1,defaultValue:!1}),wantsFocus:Object(_.b)(Object(b.c)("parent.wantsFocus")),isFocusedLayer:Object(_.b)({readOnly:!0,dependencies:["isFocusableLayer","wantsFocus"],get:Object.assign(function(){return this.isFocusableLayer&&this.wantsFocus},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])&&i.internalGet(this,t[1+n])}})}),focusResponder:Object(_.b)({dependencies:["focusedChild","focusedChild.focusResponder","isFocusableLayer"],readOnly:!0,get:Object.assign(function(){return this.isFocusableLayer?this.focusedChild&&this.focusedChild.focusResponder||(this.isFocusable?this:null):null},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[2+n])?i.internalGet(this,t[0+n])&&i.internalGetPath(this,t[1+n])||(this.isFocusable?this:null):null}})}),_previousFocusableLayerState:!1}),T=i.a.extend(E,{staticMembers:{__QUALIFIED_CLASS_NAME__:"FocusLayer"}}),M=n(1194),D=n(799),L=n(788),N=n(409),P=L.a.extend(E,{viewClass:N.a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"div",children:[{type:"MULTIVIEWOUTLET",tagname:"views",name:"panes"}],classes:["cw-pane-container"]}}}}),application:null,nextResponder:Object(l.c)({get:function(){return this.application}}),wantsFocus:Object(_.b)({defaultValue:!0}),presentViewController:function(e){return this.addPane(e),u.a.resolve()},dismissViewController:function(e){return this.removePane(e),u.a.resolve()},addPane:function(e){e||Object(g.b)("Must pass a pane to addPane"),e.retain();var t=this._paneStack;-1!==t.indexOf(e)&&Object(g.b)("Cannot add duplicate pane onto stack",{pane:e}),e.willMoveToParentViewController(this),null===e.presentingViewController&&(e.presentingViewController=this),this.view.panes.push(e.view),this.addChildViewController(e),this._addFocusLayerToPane(e),t.push(e),this.propertyChanged("activePane"),e.shouldFocusPaneOnAttach&&e.focus(),e.didMoveToParentViewController(this),e.release()},_addFocusLayerToPane:function(e){var t=this._paneStack,n=t.length;if(e.inheritsFocusLayer&&0!==n){for(var i=void 0,r=n-1;r>=0;r--){var a=t[r];if(a.isFocusablePane){i=a.focusParent;break}}i||Object(g.b)("Cannot find a focus layer to inherit",{pane:e,paneStack:t}),e.focusParent=i}else{var s=T.create().retain(this,"A new focus layer managed by the PaneManager");s.parent=this,e.focusParent=s}e.focusParent.defaultFocusChild=e},removePane:function(e){e||Object(g.b)("Must pass a pane to removePane"),e.retain();var t=this._paneStack;0===t.length&&Object(g.b)("Cannot remove pane from empty pane stack",{pane:e});var n=t.indexOf(e);-1===n&&Object(g.b)("Cannot remove pane; not a current pane",{pane:e}),e.willMoveToParentViewController(null),e.presentingViewController=null,t.splice(n,1),this.view.panes.remove(e.view),this.removeChildViewController(e),this.propertyChanged("activePane"),this._removeFocusLayerFromPane(e),e.didMoveToParentViewController(null),e.release()},_removeFocusLayerFromPane:function(e){var t=e.focusParent,n=this.topFocusLayer;t!==n&&t?t.release(this,"A new focus layer managed by the PaneManager"):n&&n!==this&&(n.defaultFocusChild=this.topFocusablePane),e.focusParent=null},bringToFront:function(e){var t=this._paneStack,n=t.indexOf(e);-1===n&&Object(g.b)("Cannot bring to front; not a current pane",{pane:e}),t.splice(n,1),t.push(e),this.propertyChanged("activePane")},activePane:Object(_.b)({cacheable:!1,readOnly:!0,get:function(){var e=this._paneStack;return e[e.length-1]}}),focusTopFocusLayer:function(){var e=this.topFocusLayer;(!e.isFocusedLayer||!e.focus(!0))&&R()},topFocusablePane:Object(_.b)({cacheable:!1,readOnly:!0,dependencies:["activePane"],get:function(){for(var e=this._paneStack,t=e.length-1;t>=0;t--){var n=e[t];if(n.isFocusablePane)return n}return this}}),topFocusLayer:Object(_.b)({cacheable:!1,readOnly:!0,dependencies:["activePane"],get:function(){for(var e=this._paneStack,t=e.length-1;t>=0;t--){var n=e[t];if(n.isFocusablePane)return n.focusParent}return this},didChange:function(e){var t=this._previousTopFocusLayer;if(t&&(t._previousFocusableLayerState=t.isFocusableLayer,t.isFocusableLayer=!1),e){var n=e._previousFocusableLayerState;e.isFocusableLayer=n}this._previousTopFocusLayer=e,this.focusTopFocusLayer()}}),_previousTopFocusLayer:null,focusReleasedInApp:function(){var e=w.a.sharedInstance;return e.isIE||e.isFirefox?this._focusReleasedTimer.start():(this.wantsFocus=!1,R()),!0},_focusReleasedTimer:Object(l.c)(Object(d.b)(D.a,{delay:0,action:"_checkActiveElementAgainstFocusResponderAndKillBrowserFocus"})),_checkActiveElementAgainstFocusResponderAndKillBrowserFocus:function(){this._checkActiveElementAgainstFocusResponder(!0)},appLostFocus:function(){var e=w.a.sharedInstance;return e.isIE||e.isFirefox?this._appLostFocusTimer.start():this.wantsFocus=!1,!0},_appLostFocusTimer:Object(l.c)(Object(d.b)(D.a,{delay:0,action:"_checkActiveElementAgainstFocusResponder"})),_checkActiveElementAgainstFocusResponder:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=document.activeElement;Object(M.b)(t)===this.topFocusLayer.focusResponder&&document.hasFocus()||(this.topFocusLayer.isFocusableLayer=!1,e&&R())},appGainedFocusability:function(){return this.topFocusLayer.isFocusableLayer=!0,!0},appWantsFocus:function(){return this.wantsFocus=!0,!0},didReceiveFocus:function(e){return null===e.relatedTarget&&this.appGainedFocusability(),this.focusTopFocusLayer(),!0},_paneStack:Object(d.b)(Array),staticMembers:{__QUALIFIED_CLASS_NAME__:"PaneManager"}});function R(){var e,t=w.a.sharedInstance;if(t.isIE||t.isEdge)try{(e=document.activeElement)&&e.blur&&e.blur()}catch(e){}else(e=document.activeElement)&&e.blur&&e.blur()}var x=O.a.extend({action:function(e){e.rootElement||Object(g.b)("Must provide a `rootElement`")},staticMembers:{__QUALIFIED_CLASS_NAME__:"RootElementInitializer"}}),F=n(1196),k=n(781),V=i.a.extend(k.a,{generate:function(e,t,n){for(var i in n=n||this.createEventHandler,t){var r=t[i];e[r]=n(i,r)}return e},createEventHandler:function(e,t){return function(n){try{n.cwType=e}catch(n){throw new Error("error handling event of type "+e+" registered to "+t)}this.dispatchEvent(n)}},staticMembers:{__QUALIFIED_CLASS_NAME__:"HandlerGenerator"}}),j={};V.get("sharedInstance").generate(j,{dragStart:"dragstart",dragEnter:"dragenter",dragOver:"dragover",dragLeave:"dragleave",drag:"drag",drop:"drop",dragEnd:"dragend"});var B=j.dragover;j.dragover=function(e){B.apply(this,arguments),e.preventDefault()};var U=j.drop;j.drop=function(e){U.apply(this,arguments),e.preventDefault()};var W=n(1182),G=n(187).a.extend({staticMembers:{nativePropertiesToCopy:Object(W.a)(["target"]),eventPropertiesToCopy:Object(W.a)(["target"]),__QUALIFIED_CLASS_NAME__:"FocusEvent"},cwForceBubble:!0,target:null}),H={};V.get("sharedInstance").generate(H,{didReceiveFocus:"focus",didReceiveBlur:"blur"},function(e){return function(t){var n=G.create({nativeEvent:t});n.cwType=e,this.dispatchEvent(n)}});var $={};V.get("sharedInstance").generate($,{beforeInput:"beforeinput",input:"input",selectionDidChange:"select"});var z={};V.get("sharedInstance").generate(z,{keyDown:"keydown",keyPress:"keypress",keyUp:"keyup",compositionStart:"compositionstart",compositionUpdate:"compositionupdate",compositionEnd:"compositionend"});var K=n(95),Q={},q={pointerOver:"mouseover",pointerDown:"mousedown",pointerMove:"mousemove",pointerUp:"mouseup",pointerOut:"mouseout",pointerCancel:"mousecancel"},Y=function(e){return function(t){var n=K.a.create({cwType:e,nativeEvent:t,pointerType:K.b.MOUSE,width:1,height:1});this.dispatchEvent(n)}};for(var Z in q)Q[q[Z]]=Y(Z);var J={};["pointerOver","pointerDown","pointerMove","pointerUp","pointerOut","pointerCancel"].forEach(function(e){J[e.toLowerCase()]=function(t){t.cwType=e,this.dispatchEvent(t)}});var X={touchstart:function(e){ee(this,"pointerDown",e)},touchmove:function(e){ee(this,"pointerMove",e)},touchend:function(e){ee(this,"pointerUp",e),ie(e.changedTouches)},touchcancel:function(e){ee(this,"pointerCancel",e),ie(e.changedTouches)}};function ee(e,t,n){for(var i=n.changedTouches,r=i.length,a=0;a<r;a++)ne(e,n,t,i[a])}var te={};function ne(e,t,n,i,r){var a=i.identifier,s=e.getPointerCapture(a);s?r=s.element:r||function(e,t,n,i){var r=n.identifier,a=te[r];a!==i&&(a&&ne(e,t,"pointerOut",n,a),i&&(a&&ne(e,t,"pointerOver",n,i),te[r]=i))}(e,t,i,r=function(e){var t=e.clientX,n=e.clientY;return document.elementFromPoint(t,n)}(i));var o=K.a.create({cwType:n,pointerId:i.identifier,nativeEvent:t,pointerType:K.b.TOUCH,target:r});!function(e,t){for(var n=arguments.length,i=Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];var a=arguments.length,s=void 0,o=void 0;for(s=2;s<a;s++)t[o=arguments[s]]=e[o]}(i,o,"screenX","screenY","clientX","clientY"),e.dispatchEvent(o)}function ie(e){for(var t=e.length,n=0;n<t;n++){var i=e[n];delete te[i.identifier]}}var re=i.a.extend(k.a,{deltaMultiplierForScrollEvent:function(e){var t=1;e&&"mousewheel"===e.type&&(t=-.025);var n=w.a.get("sharedInstance");return n.isWebKit&&n.engineMajorVersion>=538?t=1:n.isSafari?t=-1/3:n.isFirefox&&(t=.5,e&&1===e.deltaMode&&(t=40)),t},staticMembers:{__QUALIFIED_CLASS_NAME__:"Scrolling"}}),ae=n(313).a.extend({staticMembers:{eventPropertiesToCopy:Object(W.a)(["deltaX","deltaY"]),__QUALIFIED_CLASS_NAME__:"WheelEvent"},init:function(e){if(this.__s._$An$init.call(this,e),e){var t=e.nativeEvent;if(t){var n=re.sharedInstance.deltaMultiplierForScrollEvent(t);"mousewheel"===t.type?(this.deltaX=t.wheelDeltaX,this.deltaY=t.wheelDeltaY||t.wheelDelta):(this.deltaX=t.deltaX,this.deltaY=t.deltaY),this.deltaY=this.deltaY||0,this.deltaX=this.deltaX||0,this.deltaY*=n,this.deltaX*=n}}},deltaX:0,deltaY:0,__superMap:{_$An$init:"init"}}),se={};se["onwheel"in document||"WheelEvent"in window?"wheel":"mousewheel"]=function(e){(e=ae.create({nativeEvent:e})).cwType="wheel",this.dispatchEvent(e)};var oe,ce=[{handlers:z,useCapture:!1},{handlers:H,useCapture:!0},{handlers:$,useCapture:!1},{handlers:j,useCapture:!1},{handlers:{change:function(e){e.cwType="change",this.dispatchEvent(e)}},useCapture:!1},{handlers:{contextmenu:function(e){e.cwType="contextMenu",this.dispatchEvent(e)}},useCapture:!1}];switch(F.a.isMouseWheelSupported&&ce.push({handlers:se,useCapture:!1}),F.a.pointerEventClass){case"pointer":oe=J;break;case"touch":oe=X;break;case"mouse":oe=Q}oe&&ce.push({useCapture:!1,handlers:oe});var le=O.a.extend({dependencies:[x],action:function(e){if(!e.rootElement)return Object(g.b)("Application has no rootElement defined");var t=e.rootElement;t===window.document.body&&(t=window.document);var n=t.addEventListener,i=t.removeEventListener,r=e.rootResponder=M.a.create({application:e,element:t,events:ce});return t.addEventListener=function(e,i,a){return void 0!==i._exceptionHandling_wrappedFunction?n.call(t,e,i,a):r.prependEventListenerToElement(t,e,i,a)},t.removeEventListener=function(e,n,r){return"function"==typeof n._exceptionHandling_wrappedFunction&&(n=n._exceptionHandling_wrappedFunction),i.call(t,e,n,r)},e},staticMembers:{__QUALIFIED_CLASS_NAME__:"RootResponderInitializer"}}),ue=n(1187),de=n(1195),he=O.a.extend({action:function(e){if(window.__CW_BLOBS_READY)return u.a.resolve();var t=u.a.create(),n=function(){t.resolve()},i=function(e){t.reject(e.data||Object(g.b)("Failed to preload images in SpritePreloader"))};return Object(ue.a)(window,"__CW_SPRITE_LOADED",n),Object(ue.a)(window,"__CW_SPRITE_ERROR",i),t.finally(function(){Object(de.a)(window,"__CW_SPRITE_LOADED",n),Object(de.a)(window,"__CW_SPRITE_ERROR",i)})},staticMembers:{__QUALIFIED_CLASS_NAME__:"SpritePreloader"}}),pe=O.a.extend({dependencies:[le,he],action:function(e){var t=e.get("rootViewController");t||Object(g.b)("Must provide a `rootViewController`"),t.isClass&&(t=t.create(),e.set("rootViewController",t))},staticMembers:{__QUALIFIED_CLASS_NAME__:"RootViewControllerInitializer"}}),fe=O.a.extend({staticMembers:{paneManagerClass:P,__QUALIFIED_CLASS_NAME__:"PaneManagerInitializer"},dependencies:[x,le,pe],action:function(e){var t=this.constructor.paneManagerClass.create({isRootViewController:!0,application:e});e._paneManager=t,t.willAttach(),e.rootElement.appendChild(t.view.element),t._setIsAttached(!0),t.view.isAttached=!0,t.didAttach(),t.addPane(e.rootViewController)}}),ge=O.a.extend({dependencies:[x,le,pe],action:function(e){var t=window.document.createElement("div");t.innerHTML='<div id="cw-aria-live-region" aria-live="polite"></div>';var n=t.firstChild;n.style.cssText="position:fixed; top:-1px; width:1px; height:1px; overflow:hidden;",e.rootElement.appendChild(n)},staticMembers:{__QUALIFIED_CLASS_NAME__:"AriaLiveRegionInitializer"}});n.d(t,"a",function(){return ve});var me=function(e){var t=ve&&ve.application;if(t)return t.handleException.apply(t,arguments)},ve=i.a.extend(v.a,y.a,o,{staticMembers:{application:Object(_.b)({weak:!0}),states:Object(c.b)("AppStates",function(e){e("NEW"),e("INITIALIZING"),e("READY")}),isExceptionHandlingEnabled:Object(l.c)({defaultValue:null,get:function(e){if(Object(h.a)(e))return e;if(!ve.application){var t=this.exceptionHandler;if(!t||t===me)return!1}return!0}}),exceptionHandler:me,__QUALIFIED_CLASS_NAME__:"Application"},handleException:p.a,state:null,run:Object(f.a)(function(){var e=this;this.state=ve.states.INITIALIZING;var t=this.Initializers.map(function(t){return t.create().run(e)});return u.a.all(t).then(function(t){return e.state=ve.states.READY,t}).catch(Object(f.a)(function(e){throw e}))}),Initializers:Object(d.b)([fe,ge,A]),initializerPromises:Object(d.b)(Map),rootElement:window.document.body,rootViewController:Object(_.b)({defaultValue:null,strong:!0}),_paneManager:Object(_.b)(),nextResponder:Object(l.c)({get:function(){return this.rootResponder}}),rootResponder:null,presentViewController:function(e){return this._paneManager.presentViewController(e)},dismissViewController:function(e){return this._paneManager.dismissViewController(e)},addPane:function(e){this.get("_paneManager").addPane(e)},removePane:function(e){this.get("_paneManager").removePane(e)},bringToFront:function(e){this.get("_paneManager").removePane(e)},activePane:Object(_.b)({binding:Object(b.c)("_paneManager.activePane"),readOnly:!0}),topFocusablePane:Object(_.b)({binding:Object(b.c)("_paneManager.topFocusablePane"),readOnly:!0}),topFocusLayer:Object(_.b)({binding:Object(b.c)("_paneManager.topFocusLayer"),readOnly:!0}),writeTextToAriaLiveRegion:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"polite",n=window.document.getElementById("cw-aria-live-region");n.setAttribute("aria-live",t),n.textContent=e},init:function(){var e=arguments;ve.application&&Object(g.b)("Only one application may be instantiated per JS context."),this.__s._$3XS$init.apply(this,e),this.state=ve.states.NEW,ve.application=this},__superMap:{_$3XS$init:"init"}});Object(m.c)(ve)},function(e,t,n){"use strict";var i=n(87),r=n(41),a=n(177),s=n(854),o=n(1177),c=n(65),l=n(34),u=i.a.extend({label:i.c(),field:i.c(),staticMembers:{__QUALIFIED_CLASS_NAME__:"Email"}}),d=i.a.extend({label:i.c(),field:i.c(),staticMembers:{__QUALIFIED_CLASS_NAME__:"Phone"}}),h=i.a.extend({height:i.c(),width:i.c(),x:i.c(),y:i.c(),staticMembers:{__QUALIFIED_CLASS_NAME__:"CropRect"}}),p=i.a.extend({crop:s.a.toOne({type:h,embedded:!0}),signature:i.c(),url:i.c(),staticMembers:{__QUALIFIED_CLASS_NAME__:"Photo"}});n.d(t,"a",function(){return f});var f=i.a.extend({staticMembers:{STATES:r.c({readOnly:!0,get:function(){return a.b("STATES",{NOT_LOADED:0,META_DATA_LOADING:1,META_DATA_LOADED:2,IMAGE_DATA_LOADING:3,IMAGE_DATA_LOADED:4})}}),__QUALIFIED_CLASS_NAME__:"Contact"},contactId:i.c({isPrimaryKey:!0}),firstName:i.c(),lastName:i.c(),middleName:i.c(),nickName:i.c(),emailAddresses:s.a.toMany({type:u,embedded:!0}),phones:s.a.toMany({type:d,embedded:!0}),photo:s.a.toOne({type:p,embedded:!0}),loadImageData:function(){return o.a(this.service)||c.b("Unable to load image data for contact without a service"),this.service.loadImageDataFor(this.contactId)},imageData:l.b(),imageDataUrl:l.b({dependencies:["imageData"],readOnly:!0,get:Object.assign(function(){if(this.imageData)return(window.URL||window.webkitURL).createObjectURL(this.imageData)},{__CW__getter:function(e,t,n,i){if(i.internalGet(this,t[0+n]))return(window.URL||window.webkitURL).createObjectURL(i.internalGet(this,t[0+n]))}})}),service:l.b(),state:r.c({cacheable:!1,readOnly:!0,get:function(){return this.service.getStateFor(this.contactId)}})})},function(e,t,n){"use strict";var i=n(36),r=n(34),a=n(180),s=n(174),o=n(39),c=n(1206),l=n(65),u=n(94),d=n(1169),h=n(1205),p=n(134),f=n(132),g=-1,m=++h.f.typeCount,v={memory:h.f,typeId:m,count:0,activeCount:0,arrayCount:0,dumpStats:function(){return"Variable: "+this.count+"; "+this.activeCount+" active"},alloc:function(){var e=-1;return g>0?(e=g,0===(g=this.memory.INT_32[e>>2])&&l.b("Next free item is NULL; this is not right.")):(e=h.b(64,8),this.count++),this.memory.FLOAT_64[e+0>>3]=0,this.memory.FLOAT_64[e+8>>3]=0,this.memory.FLOAT_64[e+16>>3]=0,this.memory.FLOAT_64[e+24>>3]=0,this.memory.FLOAT_64[e+32>>3]=0,this.memory.INT_32[e+40>>2]=0,this.memory.INT_32[e+44>>2]=-1,this.memory.INT_32[e+48>>2]=-1,this.memory.INT_32[e+52>>2]=-1,this.memory.INT_32[e+56>>2]=-1,this.memory.UINT_8[e+60>>0]=0,this.activeCount++,e},allocArray:function(e){var t=64*e,n=h.a(t);return this.memory.INT_32[1+(n>>2)]=e,this._initArray(n),this.arrayCount++,n},free:function(e){e<0||(this.clear(e),this.memory.INT_32[e>>2]=g,g=e,this.activeCount--)},freeShallow:function(e){e<0||(this.clearShallow(e),this.memory.INT_32[e>>2]=g,g=e,this.activeCount--)},freeArray:function(e){e<0||(this._disposeArray(e),h.c(e),this.arrayCount--)},clear:function(e){e<0||(this.memory.FLOAT_64[e+0>>3]=0,this.memory.FLOAT_64[e+8>>3]=0,this.memory.FLOAT_64[e+16>>3]=0,this.memory.FLOAT_64[e+24>>3]=0,this.memory.FLOAT_64[e+32>>3]=0,this.memory.INT_32[e+40>>2]=0,this.memory.INT_32[e+44>>2]=-1,p.Animation.free(this.memory.INT_32[e+48>>2]),this.memory.INT_32[e+48>>2]=-1,p.Animation.free(this.memory.INT_32[e+52>>2]),this.memory.INT_32[e+52>>2]=-1,this.memory.INT_32[e+56>>2]=-1,this.memory.UINT_8[e+60>>0]=0)},clearShallow:function(e){e<0||(this.memory.FLOAT_64[e+0>>3]=0,this.memory.FLOAT_64[e+8>>3]=0,this.memory.FLOAT_64[e+16>>3]=0,this.memory.FLOAT_64[e+24>>3]=0,this.memory.FLOAT_64[e+32>>3]=0,this.memory.INT_32[e+40>>2]=0,this.memory.INT_32[e+44>>2]=-1,this.memory.INT_32[e+48>>2]=-1,this.memory.INT_32[e+52>>2]=-1,this.memory.INT_32[e+56>>2]=-1,this.memory.UINT_8[e+60>>0]=0)},_disposeArray:function(e){if(!(e<0))for(var t=this.memory.INT_32[1+(e>>2)],n=0;n<t;n++){var i=e+8+64*n;this.clear(i)}},_initArray:function(e){if(!(e<0))for(var t=this.memory.INT_32[1+(e>>2)],n=0;n<t;n++){var i=e+8+64*n;this.clearShallow(i)}},clone:function(e){var t=this.alloc();return h.e(e,t,16),this._cloneFieldsFrom(t,e),t},_cloneFieldsFrom:function(e,t){var n=-1,i=-1;i=(n=this.memory.INT_32[e+48>>2])>0?p.Animation.clone(n):-1,this.memory.INT_32[e+48>>2]=i,i=(n=this.memory.INT_32[e+52>>2])>0?p.Animation.clone(n):-1,this.memory.INT_32[e+52>>2]=i},dump:function(e,t){if(t||(t=[]),t.indexOf(e)>=0)return"Circular reference";t.push(e);var n={offset:this.memory.FLOAT_64[e+0>>3],finalValue:this.memory.FLOAT_64[e+8>>3],velocity:this.memory.FLOAT_64[e+16>>3],acceleration:this.memory.FLOAT_64[e+24>>3],value:this.memory.FLOAT_64[e+32>>3],dataFlowNode:this.memory.INT_32[e+40>>2],nextScheduledVariable:function(){var n=this.memory.INT_32[e+44>>2];return n>0?v.dump(n,t):null}.bind(this)(),baseAnimation:function(){var n=this.memory.INT_32[e+48>>2];return n>0?p.Animation.dump(n,t):null}.bind(this)(),animation:function(){var n=this.memory.INT_32[e+52>>2];return n>0?p.Animation.dump(n,t):null}.bind(this)(),previousScheduledVariable:function(){var n=this.memory.INT_32[e+56>>2];return n>0?v.dump(n,t):null}.bind(this)(),flags:this.memory.UINT_8[e+60>>0]};return t.pop(),n},dumpArray:function(e,t){for(var n=this.memory.INT_32[1+(e>>2)],i=[],r=0;r<n;r++)i.push(this.dump(e+8+64*r,t));return{array:i,length:n,allocatedSpace:this.memory.INT_32[e>>2]}},arrayFromJSArray:function(e,t){for(var n=e.length,i=this.allocArray(n),r=0;r<n;r++){var a=e[r],s=i+8+64*r;h.e(a,s,16),t?this.freeShallow(a):this._cloneFieldsFrom(s,a)}return i},putArrayIntoJSArray:function(e,t,n){var i=this.memory.INT_32[1+(e>>2)];t.length=i;for(var r=0;r<i;r++)t[r]=e+8+64*r},itemAtIndex:function(e,t){return e+8+64*t},lengthForArray:function(e){return this.memory.INT_32[1+(e>>2)]},getOffset:function(e){return this.memory.FLOAT_64[e+0>>3]},setOffset:function(e,t){this.memory.FLOAT_64[e+0>>3]=t},getFinalValue:function(e){return this.memory.FLOAT_64[e+8>>3]},setFinalValue:function(e,t){this.memory.FLOAT_64[e+8>>3]=t},getVelocity:function(e){return this.memory.FLOAT_64[e+16>>3]},setVelocity:function(e,t){this.memory.FLOAT_64[e+16>>3]=t},getAcceleration:function(e){return this.memory.FLOAT_64[e+24>>3]},setAcceleration:function(e,t){this.memory.FLOAT_64[e+24>>3]=t},getValue:function(e){return this.memory.FLOAT_64[e+32>>3]},setValue:function(e,t){this.memory.FLOAT_64[e+32>>3]=t},getDataFlowNode:function(e){return this.memory.INT_32[e+40>>2]},setDataFlowNode:function(e,t){this.memory.INT_32[e+40>>2]=t},getNextScheduledVariable:function(e){return this.memory.INT_32[e+44>>2]},setNextScheduledVariable:function(e,t){this.memory.INT_32[e+44>>2],this.memory.INT_32[e+44>>2]=t},takeNextScheduledVariable:function(e){var t=this.memory.INT_32[e+44>>2];return this.memory.INT_32[e+44>>2]=-1,t},getBaseAnimation:function(e){return this.memory.INT_32[e+48>>2]},setBaseAnimation:function(e,t){var n=this.memory.INT_32[e+48>>2];this.memory.INT_32[e+48>>2]=t,n>0&&p.Animation.free(n)},takeBaseAnimation:function(e){var t=this.memory.INT_32[e+48>>2];return this.memory.INT_32[e+48>>2]=-1,t},getAnimation:function(e){return this.memory.INT_32[e+52>>2]},setAnimation:function(e,t){var n=this.memory.INT_32[e+52>>2];this.memory.INT_32[e+52>>2]=t,n>0&&p.Animation.free(n)},takeAnimation:function(e){var t=this.memory.INT_32[e+52>>2];return this.memory.INT_32[e+52>>2]=-1,t},getPreviousScheduledVariable:function(e){return this.memory.INT_32[e+56>>2]},setPreviousScheduledVariable:function(e,t){this.memory.INT_32[e+56>>2],this.memory.INT_32[e+56>>2]=t},takePreviousScheduledVariable:function(e){var t=this.memory.INT_32[e+56>>2];return this.memory.INT_32[e+56>>2]=-1,t},getFlags:function(e){return this.memory.UINT_8[e+60>>0]},setFlags:function(e,t){this.memory.UINT_8[e+60>>0]=t},getWantsFreed:function(e){return 1&this.memory.UINT_8[e+60>>0]},setWantsFreed:function(e,t){var n=this.memory.UINT_8[e+60>>0];t?n|=1:n&=-2,this.memory.UINT_8[e+60>>0]=n},getIsScheduled:function(e){return 2&this.memory.UINT_8[e+60>>0]},setIsScheduled:function(e,t){var n=this.memory.UINT_8[e+60>>0];t?n|=2:n&=-3,this.memory.UINT_8[e+60>>0]=n},getIsInFrame:function(e){return 4&this.memory.UINT_8[e+60>>0]},setIsInFrame:function(e,t){var n=this.memory.UINT_8[e+60>>0];t?n|=4:n&=-5,this.memory.UINT_8[e+60>>0]=n}};h.g(v),h.h(v.typeId,v);var _=-1,b=Date.now(),y=!1,I=-1,w=-1,S=[],C=-1,O=[],A=!1,E=!1;function T(){if(A)E=!0;else{A=!0,y=!1;var e,t=-1,n=Date.now(),i=Math.max(n-b,1);for(O.length=0,t=I;t>0;)W(e=f.Callback.getMethod(t),n),t=f.Callback.getNextCallback(e);for(var r=_,a=-1;r>0;)O.push(r),v.setIsScheduled(r,!1),v.setIsInFrame(r,!0),a=v.getNextScheduledVariable(r),v.setPreviousScheduledVariable(r,-1),v.setNextScheduledVariable(r,-1),r=a;_=-1;var s=0,c=O.length;for(s=0;s<c;s++)r=O[s],v.getWantsFreed(r)||L(r,i);for(o.a.pause(),s=0;s<c;s++)r=O[s],v.setIsInFrame(r,!1),v.getWantsFreed(r)?k(r):o.a.setNodeToDirtyFromParent(v.getDataFlowNode(r));for(o.a.resume(),t=w;t>0;)W(e=f.Callback.getMethod(t),n),t=f.Callback.getNextCallback(e);A=!1,E&&(E=!1,T())}}function M(){y||(b=Date.now(),y=!0,c.a(function(){T()}))}function D(e){if(v.getIsScheduled(e)){var t=v.getPreviousScheduledVariable(e),n=v.getNextScheduledVariable(e);t>0?v.setNextScheduledVariable(t,n):_=n,n>0&&v.setPreviousScheduledVariable(n,t),v.setIsScheduled(e,!1)}}function L(e,t){var n=v.getAnimation(e);if(!(n<1)){var i=p.Animation.getAnimator(n);i<1&&l.b("No animator in animation"),p.Animation.getAnimatorType(n).tick(i,e,t)}}var N=[],P=0;function R(e,t){var n=v.getAnimation(e);if(n!==t){var i,r=P>0?N[--P]:[],a=0;if(n>0&&n!==v.getBaseAnimation(e)){var s=p.Animation.getAnimator(n);s<1&&l.b("No animator in the old animation"),p.Animation.getAnimatorType(n).stop(s,e);for(var o=p.Animation.getFirstCallback(n);o>0;)a=f.Callback.getMethod(o),r.push(a),o=f.Callback.getNextCallback(o);p.Animation.setFirstCallback(n,-1)}if(v.setValue(e,F(e)),v.setOffset(e,0),t>0){var c=p.Animation.getAnimator(t);c<1&&l.b("No animator in the new animation"),p.Animation.getAnimatorType(t).start(c,e)}v.setAnimation(e,t);for(var u=0;u<r.length;u++)W(a=r[u],e),U(a);(i=r).length=0,N[P++]=i}}function x(e){v.setVelocity(e,0),v.setAcceleration(e,0),R(e,v.getBaseAnimation(e))}function F(e){return v.getValue(e)+v.getOffset(e)}function k(e){if(v.getIsInFrame(e))v.setWantsFreed(e,!0);else{D(e),x(e);var t=v.getDataFlowNode(e);o.a.freeNode(t),v.free(e)}}var V=u.a.extend({isCacheable:!0,calculateValueForNode:function(e,t){return v.getValue(e)}}).create();function j(e,t){var n=p.Animation.alloc();return p.Animation.setAnimator(n,e,t),n}function B(e){var t=C;t>=0?(C=S[t],S[t]=e):(t=S.length,S.push(e));var n=f.Callback.alloc();return f.Callback.setMethod(n,t),n}function U(e){S[e]=C,C=e}function W(e,t){S[e](t)}var G={frame:T,requestFrame:M,requestFrameForVariable:function(e){v.getIsScheduled(e)||(_>0&&v.setPreviousScheduledVariable(_,e),v.setNextScheduledVariable(e,_),_=e,v.setIsScheduled(e,!0),M())},cancelRequestedFrameForVariable:D,addPreFrameCallback:function(e){var t=B(e),n=I;return f.Callback.setNextCallback(t,n),n>0&&f.Callback.setPreviousCallback(n,t),I=t,t},removePreFrameCallback:function(e){var t=f.Callback.getPreviousCallback(e),n=f.Callback.takeNextCallback(e),i=f.Callback.getMethod(e);n>0&&f.Callback.setPreviousCallback(n,t),t>0?f.Callback.setNextCallback(t,n):(I=n,f.Callback.free(e)),U(i)},addPostFrameCallback:function(e){var t=B(e),n=I;return f.Callback.setNextCallback(t,n),n>0&&f.Callback.setPreviousCallback(n,t),I=t,t},removePostFrameCallback:function(e){var t=f.Callback.getPreviousCallback(e),n=f.Callback.takeNextCallback(e),i=f.Callback.getMethod(e);n>0&&f.Callback.setPreviousCallback(n,t),t>0?f.Callback.setNextCallback(t,n):(w=n,f.Callback.free(e)),U(i)},setAnimationForVariable:R,stopAnimatingVariable:x,getValueForVariable:F,setValueForVariable:function(e,t){x(e),v.setValue(e,t),v.setFinalValue(e,t),o.a.setNodeToDirtyFromParent(v.getDataFlowNode(e))},rebaseCurrentValueForVariable:function(e,t){v.setOffset(e,t-v.getValue(e))},getFinalValueForVariable:function(e){return v.getFinalValue(e)+v.getOffset(e)},rebaseFinalValueForVariable:function(e,t){v.setOffset(e,t-v.getFinalValue(e))},performFrameForVariable:L,allocVariable:function(){var e=v.alloc(),t=o.a.allocNode(V,e);return v.setDataFlowNode(e,t),e},freeVariable:k,getDataFlowNodeForVariable:function(e){return v.getDataFlowNode(e)},createAnimationWithAnimator:j,addCallbackToAnimation:function(e,t){"function"!=typeof t&&l.b("addCallbackToAnimation expected a callback");var n=B(t),i=p.Animation.takeFirstCallback(e);return f.Callback.setNextCallback(n,i),i>0&&f.Callback.setPreviousCallback(i,n),p.Animation.setFirstCallback(e,n),n},defineAnimator:function(e,t){t.createData||l.b("An implementation of createData must be passed to defineAnimator");var n=Object.create(e),i=++h.f.typeCount;return Object.assign(n,{typeId:i,freeData:d.a,tick:d.a,start:d.a,stop:d.a,free:function(t){this.freeData(t),e.free(t)},createAnimation:function(){return j(this.createData.apply(this,arguments),this)}},t),h.h(i,n),n}},H=-1,$=++h.f.typeCount,z={memory:h.f,typeId:$,count:0,activeCount:0,arrayCount:0,dumpStats:function(){return"SmoothAnimatorData: "+this.count+"; "+this.activeCount+" active"},alloc:function(){var e=-1;return H>0?(e=H,0===(H=this.memory.INT_32[e>>2])&&l.b("Next free item is NULL; this is not right.")):(e=h.b(128,8),this.count++),this.memory.FLOAT_64[e+0>>3]=0,this.memory.FLOAT_64[e+8>>3]=0,this.memory.FLOAT_64[e+16>>3]=0,this.memory.FLOAT_64[e+24>>3]=0,this.memory.FLOAT_64[e+32>>3]=0,this.memory.FLOAT_64[e+40>>3]=0,this.memory.FLOAT_64[e+48>>3]=0,this.memory.FLOAT_64[e+56>>3]=0,this.memory.FLOAT_64[e+64>>3]=0,this.activeCount++,e},allocArray:function(e){var t=128*e,n=h.a(t);return this.memory.INT_32[1+(n>>2)]=e,this._initArray(n),this.arrayCount++,n},free:function(e){e<0||(this.clear(e),this.memory.INT_32[e>>2]=H,H=e,this.activeCount--)},freeShallow:function(e){e<0||(this.clearShallow(e),this.memory.INT_32[e>>2]=H,H=e,this.activeCount--)},freeArray:function(e){e<0||(this._disposeArray(e),h.c(e),this.arrayCount--)},clear:function(e){e<0||(this.memory.FLOAT_64[e+0>>3]=0,this.memory.FLOAT_64[e+8>>3]=0,this.memory.FLOAT_64[e+16>>3]=0,this.memory.FLOAT_64[e+24>>3]=0,this.memory.FLOAT_64[e+32>>3]=0,this.memory.FLOAT_64[e+40>>3]=0,this.memory.FLOAT_64[e+48>>3]=0,this.memory.FLOAT_64[e+56>>3]=0,this.memory.FLOAT_64[e+64>>3]=0)},clearShallow:function(e){e<0||(this.memory.FLOAT_64[e+0>>3]=0,this.memory.FLOAT_64[e+8>>3]=0,this.memory.FLOAT_64[e+16>>3]=0,this.memory.FLOAT_64[e+24>>3]=0,this.memory.FLOAT_64[e+32>>3]=0,this.memory.FLOAT_64[e+40>>3]=0,this.memory.FLOAT_64[e+48>>3]=0,this.memory.FLOAT_64[e+56>>3]=0,this.memory.FLOAT_64[e+64>>3]=0)},_disposeArray:function(e){if(!(e<0))for(var t=this.memory.INT_32[1+(e>>2)],n=0;n<t;n++){var i=e+8+128*n;this.clear(i)}},_initArray:function(e){if(!(e<0))for(var t=this.memory.INT_32[1+(e>>2)],n=0;n<t;n++){var i=e+8+128*n;this.clearShallow(i)}},clone:function(e){var t=this.alloc();return h.e(e,t,32),this._cloneFieldsFrom(t,e),t},_cloneFieldsFrom:function(e,t){},dump:function(e,t){if(t||(t=[]),t.indexOf(e)>=0)return"Circular reference";t.push(e);var n={duration:this.memory.FLOAT_64[e+0>>3],elapsedTime:this.memory.FLOAT_64[e+8>>3],startValue:this.memory.FLOAT_64[e+16>>3],endValue:this.memory.FLOAT_64[e+24>>3],startVelocity:this.memory.FLOAT_64[e+32>>3],startAcceleration:this.memory.FLOAT_64[e+40>>3],startJerk:this.memory.FLOAT_64[e+48>>3],startSnap:this.memory.FLOAT_64[e+56>>3],startCrackle:this.memory.FLOAT_64[e+64>>3]};return t.pop(),n},dumpArray:function(e,t){for(var n=this.memory.INT_32[1+(e>>2)],i=[],r=0;r<n;r++)i.push(this.dump(e+8+128*r,t));return{array:i,length:n,allocatedSpace:this.memory.INT_32[e>>2]}},arrayFromJSArray:function(e,t){for(var n=e.length,i=this.allocArray(n),r=0;r<n;r++){var a=e[r],s=i+8+128*r;h.e(a,s,32),t?this.freeShallow(a):this._cloneFieldsFrom(s,a)}return i},putArrayIntoJSArray:function(e,t,n){var i=this.memory.INT_32[1+(e>>2)];t.length=i;for(var r=0;r<i;r++)t[r]=e+8+128*r},itemAtIndex:function(e,t){return e+8+128*t},lengthForArray:function(e){return this.memory.INT_32[1+(e>>2)]},getDuration:function(e){return this.memory.FLOAT_64[e+0>>3]},setDuration:function(e,t){this.memory.FLOAT_64[e+0>>3]=t},getElapsedTime:function(e){return this.memory.FLOAT_64[e+8>>3]},setElapsedTime:function(e,t){this.memory.FLOAT_64[e+8>>3]=t},getStartValue:function(e){return this.memory.FLOAT_64[e+16>>3]},setStartValue:function(e,t){this.memory.FLOAT_64[e+16>>3]=t},getEndValue:function(e){return this.memory.FLOAT_64[e+24>>3]},setEndValue:function(e,t){this.memory.FLOAT_64[e+24>>3]=t},getStartVelocity:function(e){return this.memory.FLOAT_64[e+32>>3]},setStartVelocity:function(e,t){this.memory.FLOAT_64[e+32>>3]=t},getStartAcceleration:function(e){return this.memory.FLOAT_64[e+40>>3]},setStartAcceleration:function(e,t){this.memory.FLOAT_64[e+40>>3]=t},getStartJerk:function(e){return this.memory.FLOAT_64[e+48>>3]},setStartJerk:function(e,t){this.memory.FLOAT_64[e+48>>3]=t},getStartSnap:function(e){return this.memory.FLOAT_64[e+56>>3]},setStartSnap:function(e,t){this.memory.FLOAT_64[e+56>>3]=t},getStartCrackle:function(e){return this.memory.FLOAT_64[e+64>>3]},setStartCrackle:function(e,t){this.memory.FLOAT_64[e+64>>3]=t}};h.g(z),h.h(z.typeId,z);var K=G.defineAnimator(z,{createData:function(e,t,n){var i=this.alloc();return this.setDuration(i,t),this.setEndValue(i,e),this.setStartValue(i,void 0===n?Number.MAX_VALUE:n),i},start:function(e,t){this.setElapsedTime(e,0);var n=this.getStartValue(e);n===Number.MAX_VALUE&&(n=v.getValue(t));var i=this.getEndValue(e),r=i-n,a=this.getDuration(e),s=v.getVelocity(t),o=v.getAcceleration(t),c=(10*r-3*a*(o*a+2*s))/Math.pow(a,3),l=(a*(3*o*a+8*s)-15*r)/Math.pow(a,4),u=(6*r-a*(o*a+3*s))/Math.pow(a,5);this.setStartValue(e,n),this.setStartVelocity(e,s),this.setStartAcceleration(e,o),this.setStartJerk(e,c),this.setStartSnap(e,l),this.setStartCrackle(e,u),v.setFinalValue(t,i),G.requestFrameForVariable(t)},tick:function(e,t,n){if((n+=this.getElapsedTime(e))<this.getDuration(e)){var i,r=this.getStartValue(e),a=this.getStartVelocity(e),s=this.getStartAcceleration(e),o=this.getStartJerk(e),c=this.getStartSnap(e),l=this.getStartCrackle(e);i=r+a*n+s*Math.pow(n,2)+o*Math.pow(n,3)+c*Math.pow(n,4)+l*Math.pow(n,5);var u=a+2*s*n+3*o*Math.pow(n,2)+4*c*Math.pow(n,3)+5*l*Math.pow(n,4),d=2*s+6*o*n+12*c*Math.pow(n,2)+20*l*Math.pow(n,3);v.setValue(t,i),v.setVelocity(t,u),v.setAcceleration(t,d),G.requestFrameForVariable(t)}else v.setValue(t,this.getEndValue(e)),v.setVelocity(t,0),v.setAcceleration(t,0),G.stopAnimatingVariable(t);this.setElapsedTime(e,n)},stop:function(e,t){}});n.d(t,"a",function(){return Y}),n.d(t,"b",function(){return Z});var Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},q=void 0,Y={mixinDependencies:[i.a],isAnimating:r.b({readOnly:!0,dependencies:["animationsInProgress"],get:Object.assign(function(){return this.animationsInProgress>0},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])>0}})}),animationsInProgress:r.b(0),_animatedVariables:a.b(Array),dispose:function(){for(var e=arguments,t=this._animatedVariables,n=0,i=t.length;n<i;n++)G.freeVariable(t[n]);this.__s._$D1$dispose.apply(this,e)},animate:function(e,t,n,i){return this.animateWithAnimator(e,K,t,n,i)},animateWithAnimator:function(e,t,n){var i=s.a(arguments,0,2),r=n,a=null,o=i[i.length-1],c=void 0===o?"undefined":Q(o);"function"!==c&&"undefined"!==c&&null!==o||(a=i.pop());var l=this.getAdaptedCurrentValueForTarget(e,r);i.push(l),r=this.processTargetValue(e,r),i[0]=r;var u=t.createAnimation.apply(t,i);return this.animateWithAnimation(e,u,a),u},animateWithAnimation:function(e,t,n){var i=o.a.getContextForNode(this.downstreamNodes[e]);return n&&G.addCallbackToAnimation(t,n),this.set("animationsInProgress",this.get("animationsInProgress")+1),G.addCallbackToAnimation(t,function(){this.set("animationsInProgress",this.get("animationsInProgress")-1)}.bind(this)),G.setAnimationForVariable(i,t),t},getAdaptedCurrentValueForTarget:function(e,t){var n=this._properties[e].adaptStartingLocationForTarget,i=o.a.getContextForNode(this.downstreamNodes[e]),r=G.getValueForVariable(i);return n&&(r=n(this,e,r,t)),r},processTargetValue:function(e,t){var n=t,i=this._properties[e].set;return i&&(n=i(this,e,n)),n},resetAnimation:function(e){var t=this._properties[e],n=t.get,i=t.set,r=o.a.getContextForNode(this.downstreamNodes[e]);if(n||i){var a=G.getValueForVariable(r);n&&(a=n.call(this,this,e,a)),i&&(a=i.call(this,this,e,a)),G.setValueForVariable(r,a)}else G.stopAnimatingVariable(r)},getFinalValue:function(e){var t=o.a.getContextForNode(this.downstreamNodes[e]),n=G.getFinalValueForVariable(t),i=this._properties[e].get;return i&&(n=i.call(this,this,e,n)),n},rebaseCurrentValue:function(e,t){var n=o.a.getContextForNode(this.downstreamNodes[e]);G.rebaseCurrentValueForVariable(n,t)},rebaseFinalValue:function(e,t){var n=o.a.getContextForNode(this.downstreamNodes[e]);G.rebaseFinalValueForVariable(n,t)},__superMap:{_$D1$dispose:"dispose"}};q=r.a.extend({init:function(e,t){this.defaultValue=e,this.priority=t,this.get||(this.usesBuiltinGet=!0),this.set||(this.usesBuiltinSet=!0),this.__s._$2Hi$init.call(this,e)},initForObject:function(e,t){var n=G.allocVariable(),i=G.getDataFlowNodeForVariable(n);G.setValueForVariable(n,this.defaultValue),e.downstreamNodes[t]=i,e._animatedVariables.push(n)},setInitialValueForObject:function(){},wasRegistered:function(e){this.finalGetForObject=this.usesBuiltinGet?this.getForObject:this.getForObjectWithGetter,this.finalSetForObject=this.usesBuiltinSet?this.setForObject:this.setForObjectWithSetter,this.setUpNativeAccessors(e)},getForObjectWithGetter:function(e,t){var n=o.a.getContextForNode(e.downstreamNodes[t]);return this.get(e,t,G.getValueForVariable(n))},setForObjectWithSetter:function(e,t,n){var i=o.a.getContextForNode(e.downstreamNodes[t]);G.set(i,this.set(e,t,n))},getForObject:function(e,t){var n=e.downstreamNodes;if(n){var i=o.a.getContextForNode(n[t]);return G.getValueForVariable(i)}},setForObject:function(e,t,n){var i=e.downstreamNodes;if(i){var r=o.a.getContextForNode(i[t]);G.setValueForVariable(r,n)}},setUpNativeAccessors:function(e){var t=this,n=this.key;Object.defineProperty(e,n,{get:function(){return t.getForObject(this,n)},set:function(e){return t.setForObject(this,n,e)},configurable:!0})},requiresSupport:Y,__superMap:{_$2Hi$init:"init"}});var Z=function(e){return q.create(e)}},function(e,t,n){"use strict";var i=n(41),r=n(1185),a=n(1173),s=n(65);function o(e,t,n){null===n||void 0===n?delete e[t]:e[t]=n}var c=n(784),l=n(34),u=n(36),d=n(86),h=n(811),p=n(80),f=n(121);function g(e,t){if(("number"!=typeof e||void 0!==t&&"number"!=typeof t)&&Object(s.b)("Must only provide numbers as params."),0===e)return"0 bytes";var n=void 0===t?2:t,i=Math.floor(Math.log(e)/Math.log(1024));return(e/Math.pow(1024,i)).toFixed(n)+" "+["bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][i]}var m=p.a.extend(u.a,{staticMembers:{setAsMirror:function(e,t){e.didChange=function(){t.setMultipleValues({bytesTotal:e.get("bytesTotal"),bytesTransferred:e.get("bytesTransferred"),isDeterminate:e.get("isDeterminate")})}},__QUALIFIED_CLASS_NAME__:"NetworkProgress"},init:function(){var e=arguments;this.__s._$Oy$init.apply(this,e),this._children=[],this._childListeners={},this.set("childPropertiesToObserve",["bytesTransferred","bytesTotal","isDeterminate"])},isComposite:Object(l.b)({defaultValue:!1}),addChild:function(e){e.instanceOf(m)||Object(s.b)("Must provide a Progress instance.");for(var t=this,n=Object(f.a)(e),i=t._childListeners,r=this.childPropertiesToObserve,a=function(e){t.childDidChange()},o=0,c=r.length;o<c;o++){var l=r[o],u=i[n]||[],d=e.observe(l,a);u.push(d),i[n]=u}this._children.push(e),this.set("isComposite",!0),this.childDidChange()},removeChild:function(e){var t=this._children;e.instanceOf(m)||Object(s.b)("Must provide a Progress instance.");var n=this._childListeners[Object(f.a)(e)];n&&n.forEach(function(e){e.disconnect()});var i=t.indexOf(e);-1!==i&&t.splice(i,1),0===t.length&&(this.set("isComposite",!1),this.setMultipleValues({bytesTotal:0,bytesTransferred:0,isDeterminate:!1})),this.childDidChange()},removeChildren:function(){for(var e;e=this._children.pop();)this.removeChild(e)},childDidChange:Object(u.g)(),childPropertiesToObserve:null,bytesTransferred:Object(l.b)({defaultValue:0}),bytesTotal:Object(l.b)({defaultValue:0}),isDeterminate:Object(l.b)({defaultValue:!1}),setMultipleValues:function(e){var t=this.beginBatchSet();for(var n in e)e.hasOwnProperty(n)&&t.set(n,e[n]);t.end()},bitRateString:Object(l.b)({readOnly:!0,dependencies:["bytesPerSecond"],get:Object.assign(function(){return(g(this.bytesPerSecond)+"ps").replace("bytes","B")},{__CW__getter:function(e,t,n,i){return(g(i.internalGet(this,t[0+n]))+"ps").replace("bytes","B")}})}),bytesPerSecond:Object(l.b)({readOnly:!0,dependencies:["bytesTransferred","percentComplete"],get:Object.assign(function(){var e=this.get("_startTime"),t=Date.now();void 0===e&&(this.set("_startTime",t),e=t);var n=(t-e)/1e3;return 0===n?0:this.bytesTransferred/n},{__CW__getter:function(e,t,n,i){var r=this.get("_startTime"),a=Date.now();void 0===r&&(this.set("_startTime",a),r=a);var s=(a-r)/1e3;return 0===s?0:i.internalGet(this,t[0+n])/s}})}),percentComplete:Object(l.b)({readOnly:!0,dependencies:["bytesTotal","bytesTransferred","isDeterminate"],get:Object.assign(function(){var e=this.bytesTransferred,t=this.bytesTotal;return t&&0!==t?e/t:0},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[1+n]),a=i.internalGet(this,t[0+n]);return a&&0!==a?r/a:0}})}),toString:function(){return("[Progress Instance #"+Object(f.a)(this)+"] "+100*this.get("percentComplete")+"% ("+this.get("bytesTransferred")+" of "+this.get("bytesTotal")+") "+(this.get("isDeterminate")?"":"???")).trim()},didChange:Object(u.g)(),_startTime:null,_valuesDidChange:Object(u.f)("bytesTransferred","bytesTotal","isDeterminate",function(){this.didChange(arguments)}),_children:null,_childListeners:null,_calculateCompositeChildValues:Object(u.f)("childDidChange",function(){if(this.get("isComposite")){for(var e=this.get("childPropertiesToObserve"),t=this._children,n={},i=0,r=e.length;i<r;i++){var a=e[i];n[a]||(n[a]=0);for(var s=0,o=t.length;s<o;s++){var c=t[s];n[a]+=c.get(a)}}this.setMultipleValues(n),t.length||this.set("isComposite",!1)}}),__superMap:{_$Oy$init:"init"}}),v=n(183),_=n(411),b=n(805).a.extend({encode:function(e){var t=arguments;return e instanceof Blob||ArrayBuffer.isView(e)||e instanceof ArrayBuffer?e:this.__s._$AK$encode.apply(this,t)},decode:function(e){var t=arguments;return e instanceof Blob||ArrayBuffer.isView(e)||e instanceof ArrayBuffer?e:this.__s._$FA$decode.apply(this,t)},__superMap:{_$AK$encode:"encode",_$FA$decode:"decode"},staticMembers:{__QUALIFIED_CLASS_NAME__:"XHRBodySerializer"}});n.d(t,"a",function(){return y});var y=h.a.extend({staticMembers:{nextRequestSequenceNumber:1,requestLoggingLevel:null,__QUALIFIED_CLASS_NAME__:"Request"},URLClass:v.a,url:Object(l.b)({get:function(){return this._urlObject},set:function(e){var t;if(e){var n=this.URLClass;t=Object(a.a)(e,n)?e:n.create(e)}this._urlObject=t}}),method:d.a.GET,useCredentialsIfCrossOrigin:!1,bodySerializer:Object(i.c)(b.sharedInstance),response:Object(l.b)(),responseSerializer:Object(i.c)({get:function(){return this._responseSerializer||this.get("serializer")}}),isCrossDomain:Object(i.c)({readOnly:!0,get:function(){var e=this.get("url");if(!e)return!1;var t=e.get("protocol"),n=e.get("host");if(!n)return!1;var i=window.location;return i.protocol!==t||i.host!==n}}),transport:Object(i.c)({get:function(e){return e||_.a.get("sharedInstance")}}),allowsCredentialsInURL:!1,shouldTrackUploadProgress:Object(l.b)({defaultValue:!1,didChange:function(){this.state!==d.b.UNSENT&&Object(s.b)("Cannot change `shouldTrackUploadProgress` once a request is sent.")}}),shouldTrackProgress:Object(l.b)({defaultValue:!1,didChange:function(){this.state!==d.b.UNSENT&&Object(s.b)("Cannot change `shouldTrackProgress` once a request is sent.")}}),uploadProgress:Object(l.b)({readOnly:!0,dependencies:["shouldTrackUploadProgress"],get:Object.assign(function(){return this.shouldTrackUploadProgress?m.create():null},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?m.create():null}})}),progress:Object(l.b)({readOnly:!0,dependencies:["shouldTrackProgress"],get:Object.assign(function(){return this.shouldTrackProgress?m.create():null},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?m.create():null}})}),_fireDidProgress:Object(u.e)("progress.didChange","uploadProgress.didChange",function(){this.triggerStatusEvent(d.b.PROGRESS)}),headers:Object(i.c)(),setHeader:function(e,t){var n=this.get("headers");if(!n){if(null==t)return;n={}}o(n,e,t),this.set("headers",n)},setMultipleHeaders:function(e){var t=this.get("headers")||{};for(var n in e)o(t,n,e[n]);this.set("headers",t)},removeHeader:function(e){this.setHeader(e,null)},on:function(e,t){w(this,e,t)},onStatus:function(e,t){/^[\d*]{3}$/.test(e)?w(this,e,t):Object(s.b)(e+" is an invalid status code listener for request",this)},delegate:null,sequenceNumber:Object(i.c)({readOnly:!0,defaultValue:function(){return this.constructor.nextRequestSequenceNumber++}}),sentAt:null,willSend:null,didSend:null,didProgress:null,didSucceed:null,didAbort:null,didFail:null,didComplete:null,shouldFinalizeWithResponse:null,_logRequestIfAppropriate:function(){this.sentAt=window.performance.now();var e,t=this.constructor.requestLoggingLevel;t&&(e=this.get("bodyShouldBeLogged")?this.get("encodedBody")||"(empty)":"(omitted)",c.b[t]("--\x3e Request "+this.get("sequenceNumber")+": "+this.get("method")+" to "+this.getPath("url.href")+", headers: "+(this.get("headers")||"(empty)")+", body: "+e))},bodyShouldBeLogged:!1,_logResponseIfAppropriate:function(){var e=this.constructor.requestLoggingLevel,t=this.get("sequenceNumber");if(e)if(this.get("state")!==d.b.TIMEDOUT){var n,i=this.get("response"),r=window.performance.now()-this.sentAt;n=this.get("bodyShouldBeLogged")?i.get("encodedBody")||"(empty)":"(omitted)",c.b[e]("<-- Response "+t+": "+i.get("status")+" ("+r+"ms), headers: "+(i.get("headers")||"(empty)")+", body: "+n)}else c.b[e]("<-- Response "+t+": (timed out)")},send:function(){var e=this._promise=r.a.create();return I(this),e},sendSynchronously:function(){this.get("timeout")&&Object(s.b)("Cannot send a synchronous request with a timeout",this),I(this,!0)},abort:function(){if(this.get("state")===d.b.SENDING){var e=this.get("transport");this.get("method")!==d.a.GET&&c.b.warn("A non-GET network request was aborted. Data may have already been changed on the server.",this),e.abort(this),this.set("state",d.b.ABORTED),this.triggerStatusEvent(d.b.ABORTED),this.finalize()}},triggerStatusEvent:function(e){var t,n,i,r,a=this.get("delegate")||this,s=this._statusEventListeners;if(e===d.b.SENT&&this._logRequestIfAppropriate(),e===d.b.COMPLETED&&this._logResponseIfAppropriate(),(n=a[e])&&n.call&&n.call(a,this),s&&(t=s[e]))for(i=0,r=t.length;i<r;i++)(n=t[i])&&n(this);var o=this._promise;o&&(e===d.b.SUCCEEDED?(this._promise=void 0,o.resolve(this.response)):e===d.b.FAILED&&(this._promise=void 0,o.reject(this.response)))},triggerStatusEvents:function(){for(var e=0,t=arguments.length;e<t;e++)this.triggerStatusEvent(arguments[e])},finalize:function(){this._isFinalized=!0,this.get("transport").finalize(this),this.triggerStatusEvent(d.b.FINALIZED),delete this._statusEventListeners},toJSON:function(){return this.getPropertiesAsObject("url","method","body","headers","response")},_promise:Object(i.c)()});function I(e,t){(e.get("state")!==d.b.UNSENT||e._isFinalized)&&Object(s.b)("Cannot send a request more than once",e);var n=e.get("url");n?n.get("auth")&&!e.get("allowsCredentialsInURL")&&Object(s.b)("This request is not allowed to use authentication",e):Object(s.b)("Cannot send a request without a URL",e);var i=e.get("transport");e.set("state",d.b.SENDING),e._synchronous=t,i.send(e)}function w(e,t,n){var i=e._statusEventListeners||(e._statusEventListeners={});(i[t]||(i[t]=[])).push(n)}},function(e,t,n){"use strict";var i=n(180),r=n(54),a=n(41),s=n(82),o=n(80),c=n(36),l=n(34),u=o.a.extend(c.a,{HandleClass:Object(a.c)({readOnly:!0}),source:Object(a.c)({weak:!0}),startHandle:s.a.define(),delegate:Object(l.b)(),staticMembers:{__QUALIFIED_CLASS_NAME__:"BaseHandleProvider"}}).extend({endHandle:s.a.define(),staticMembers:{__QUALIFIED_CLASS_NAME__:"BaseBidirectionalHandleProvider"}}).extend({at:r.a.define(),startHandle:Object(a.c)({readOnly:!0,get:function(){return this.at(0)}}),endHandle:Object(a.c)({readOnly:!0,get:function(){return this.at(this.source.length-1)}}),staticMembers:{__QUALIFIED_CLASS_NAME__:"BaseRandomAccessHandleProvider"}}),d=n(794),h=n(278);n.d(t,"a",function(){return p});var p=u.extend(c.a,{HandleClass:d.a,_handles:Object(i.b)(Array),_allHandles:Object(i.b)(Set),cachedHandleAt:function(e){var t=this._handles[e];if(t)return t},at:function(e){var t=this.cachedHandleAt(e);return t||(t=this._createHandle(e),this._registerHandle(t),t.retain(this,"initial retain").autorelease(this,"initial retain"))},_createHandle:function(e){return this.HandleClass.create(this.source,this,e)},handlesDidUpdate:Object(c.e)("source.contentsDidChange",function(e){var t=this,n=e.context;if(n){var i=this._handles,r=n.length,a=n.lengthDelta,s=this.source.length-a;i.length<s&&(i.length=s);for(var o=0,c=function(){for(var e=n[o],a=e.operation,s=e.index,c=0,u=void 0;u=e.index,!(++o>=r)&&a===(e=n[o]).operation;)if(l=e.index-u,0===c){if(1!==l&&-1!==l)break;c=l}else if(l!==c)break;var d=u;if(d<s){var p=d;d=s,s=p}var f=++d-s;a===h.a.REMOVE?(i.copyWithin(s,d),i.length=i.length-f,t._allHandles.forEach(function(e){return e._applyRemove(s,d,f)})):(i.length=i.length+f,i.copyWithin(d,s),i.fill(void 0,s,d),t._allHandles.forEach(function(e){return e._applyInsert(s,f)}))};o<r;){var l;c()}}}),_registerHandle:function(e){e.isValid&&(e.registerWeakReference(this,this._handleWasDisposed,e),this._allHandles.add(e),this._handles[e.position]=e)},_handleWasDisposed:function(e){e.wasRemoved||(this._handles[e.position]=void 0),this._allHandles.delete(e)},everythingChanged:Object(c.e)("source.everythingChanged",function(){var e=this._handles;this._allHandles.forEach(function(t){t._applyRemove(t.position,t.position+1,0),e[t.position]=void 0}),e.length=this.source.length}),staticMembers:{__QUALIFIED_CLASS_NAME__:"OrderedListHandleProvider"}})},function(e,t,n){"use strict";var i=n(80),r=n(129),a=n(54),s=n(32),o={done:!1,value:null},c={mixinDependencies:[n(128).a],moveToNext:Object(s.c)(a.a,{requiredKey:"moveBy",default:function(){return this.moveBy(1)}}),moveToPrevious:Object(s.c)(a.a,{requiredKey:"moveBy",default:function(){return this.moveBy(-1)}}),previous:function(){return o.value=this.get("value"),o.done=this.get("isValid"),this.moveBy(-1),o},moveBy:Object(s.c)(a.a,{requiredKey:["moveToNext","moveToPrevious"],default:function(e){if(e>0)for(;0!=e--;)this.moveToNext();else if(e<0)for(;0!=e++;)this.moveToPrevious();return this}})},l=n(82),u=n(41),d={mixinDependencies:[c],position:Object(u.c)(0),countAfter:Object(u.c)({readOnly:!0,get:function(){return this.get("length")-this.get("position")-1}}),countBefore:Object(u.c)({readOnly:!0,get:function(){return this.get("position")}}),moveTo:function(e){return this.set("position",e),this},length:Object(s.c)(l.a),moveBy:function(e){return this.moveTo(this.get("position")+e)}},h=n(122);n.d(t,"a",function(){return p});var p=i.a.extend(d,r.a,h.a,{initFromPool:function(e,t){this.__s._$Dv$initFromPool.call(this),this.set("source",e),this.set("position",t||0)},didEnterPool:function(){this.set("source",null),this.set("position",NaN),this.__s._$HF$didEnterPool.call(this)},source:Object(u.c)(),value:Object(u.c)({get:function(){return this.source.decode(this.encodedValue,this.position)},set:function(e){return this.encodedValue=this.source.encode(e,this.position),e}}),encodedValue:Object(u.c)({get:function(){return this.source.encodedObjectAt(this.position)},set:function(e){return this.source.encodedSetIndex(this.position,e),e}}),isValid:Object(u.c)({readOnly:!0,get:function(){var e=this.get("position");return e>=0&&e<this.get("length")}}),length:Object(u.c)({readOnly:!0,get:function(){return this.getPath("source.length")}}),clone:function(){return this.constructor.create(this.get("source"),this.get("position"))},remove:function(){return!!this.isValid&&(this.get("source").removeAt(this.get("position")),!0)},add:function(e){var t=this.get("source"),n=t.get("length"),i=this.get("position")+1;t.insertAt(i,e);var r=t.get("length")!==n;return r&&this.set("position",Math.min(i,n)),r},__superMap:{_$Dv$initFromPool:"initFromPool",_$HF$didEnterPool:"didEnterPool"},staticMembers:{__QUALIFIED_CLASS_NAME__:"OrderedListIterator"}})},function(e,t,n){"use strict";n.r(t),n(277);var i=n(34),r=n(93),a=n(180),s=n(200),o=n(172),c=n(410),l=n(36),u=n(1197),d=n(1208),h=n(69),p=n(65),f=n(409),g=n(1182),m=n(1233),v=n(41),_=n(1169),b=n(125),y=n(39),I=n(1127),w=n(883),S=n(1245),C=n(1243),O=n(46),A=function(e,t){if(!e)return 0;var n=T[t]||(T[t]={});return n[e]||(E.font=t,n[e]=E.measureText(e).width)},E=document.createElement("canvas").getContext("2d"),T={},M=n(1282),D=n(155),L=n(1217),N=n(115),P=n(351),R=n(350),x=n(775),F=(n(151),{count:0});function k(e,t){var n=x.a(t)?0|t.count:t,i=n===t?F:t,r=e[Math.min(n,e.length-1)];return i.count=function(e){return String(e)}(n),o.d(r,i)}new Map,n.d(t,"BurstPresenterView",function(){return j});var V,j=N.a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"VIEWOUTLET",tagname:"view",name:"enterBurstButton"},{type:"VIEWOUTLET",tagname:"view",name:"burstSelectionToolbar"},{type:"VIEWOUTLET",tagname:"view",name:"burstOneUpView"}],classes:["pok-burst-presenter-view"]}},__QUALIFIED_CLASS_NAME__:"BurstPresenterView"},burstCount:i.b(r.c("media.burstCount")),wantsFullUIControl:r.c("hasBurstMode"),wantsBurstMode:i.b(!1),canHaveBurstMode:i.b(r.c("_canHaveBurstMode_ratchet.value")),_canHaveBurstMode_ratchet:i.b({strong:!0,defaultValue:a.b(w.a.extend({allowsDowngrades:!1,targetValue:r.c("owner.isSteadilyAloneInParent")}))}),hasBurstMode:i.b({readOnly:!0,dependencies:["wantsBurstMode","canHaveBurstMode"],get:Object.assign(function(){return this.wantsBurstMode&&this.canHaveBurstMode},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])&&i.internalGet(this,t[1+n])}})}),enterBurstButton:i.b({strong:!0,defaultValue:a.b(s.a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"label",attributes:{}}],classes:["pok-enter-burst-button"],styles:{top:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"owner.pinnedImageTop",attributes:{},unit:"px",property:"top"},left:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"owner.pinnedImageLeft",attributes:{},unit:"px",property:"left"}}}}},label:o.d("OneUp.Burst.Button.MakeASelection"),action:"enterBurstMode"}))}),allSelectedItems:i.b({readOnly:!0,type:c.b,strong:!0,dependencies:["didEnterBurstMode","_burstOneUpView.promotionAlterations","media.burstMedias","media.burstMedias.contentsDidChange"],get:function(){return this._filterAllMediasByIsSelected(!0)}}),allNonSelectedItems:i.b({readOnly:!0,type:c.b,strong:!0,dependencies:["didEnterBurstMode","_burstOneUpView.promotionAlterations","media.burstMedias","media.burstMedias.contentsDidChange"],get:function(){return this._filterAllMediasByIsSelected(!1)}}),didEnterBurstMode:l.g(),_selectionIsAllOrNone:i.b({readOnly:!0,type:Boolean,dependencies:["allSelectedItems","allNonSelectedItems"],get:Object.assign(function(){return u.a(this.allNonSelectedItems)||u.a(this.allSelectedItems)},{__CW__getter:function(e,t,n,i){return u.a(i.internalGet(this,t[1+n]))||u.a(i.internalGet(this,t[0+n]))}})}),_rerenderSelfWhenExitingBurstMode:l.f("burstOneUpView","burstOneUpView.targetMedia","burstOneUpView.transition.sourceView","burstOneUpView.transition.targetView",function(){var e=this.isRenderDisabled();this._rswebm_last_isRenderDisabled!==(this._rswebm_last_isRenderDisabled=e)&&this.renderSelfSoon()}),_resetBurstModeWhenFallingOffscreen:l.f("isShowingInParent",function(e){e||this.resetBurstMode()}),enterBurstMode:function(){this._burstOneUpView.targetMedia=this.media,this.wantsBurstMode=!0,this.didEnterBurstMode(),this.zoomLevel=this.unzoomedZoomLevel},exitBurstMode:function(){this.wantsBurstMode=!1,d.a(this._burstOneUpView.promotionAlterations),this._burstOneUpView.targetMedia=null},resetBurstMode:function(){this.exitBurstMode(),this._canHaveBurstMode_ratchet.reset()},commitPromotionAlterations:function(){return this.media.commitBurstPromotionAlterations(this._burstOneUpView.promotionAlterations)},deleteNonSelectedItemsAndThenExitBurstMode:function(){var e=this.allNonSelectedItems;!e||e.some(function(e){return!e})?this.showCommitFailAlert():(e.forEach(function(e){return e.delete()}),h.b().commit()),this.exitBurstMode()},showKeepSelectionDialogue:function(){var e={iconNames:["photos-icon"],message:k(["","Alert.Burst.Message.1","Alert.Burst.Message.2","Alert.Burst.Message.More"],this.allNonSelectedItems.length),primaryButton:{title:o.d("Alert.Burst.KeepAll"),target:this,action:"exitBurstMode"},alternateButton:{title:o.d("Alert.Burst.KeepSelection"),target:this,action:"deleteNonSelectedItemsAndThenExitBurstMode"},otherButton:{title:o.d("Alert.Cancel.Button.Title")}};p.b("No BaseAlertViewController available",e)},showCommitFailAlert:function(){var e={iconNames:["photos-icon"],message:o.d("Alert.Burst.Selection.Error"),primaryButton:{title:o.d("Alert.OK.Button.Title")}};p.b("No BaseAlertViewController available",e)},commitPromotionAlterationsAndExitBurstMode:function(){var e=this;this._commitInProgress=!0,this.commitPromotionAlterations().then(function(){e._commitInProgress=!1,e._selectionIsAllOrNone?e.exitBurstMode():e.showKeepSelectionDialogue()}).catch(function(){e._commitInProgress=!1,e.showCommitFailAlert()})},isRenderDisabled:function(){var e=arguments;if(this.__s._$2I2$isRenderDisabled.apply(this,e))return!0;var t=this.burstOneUpView;if(!t)return!1;var n=t.transition;if(!n)return!!t.targetMedia;var i=n.sourceView,r=n.targetView;return!(i&&!r||r&&!i)},cleanup:function(){var e=arguments;this.resetBurstMode(),this.__s._$2eI$cleanup.apply(this,e)},_filterAllMediasByIsSelected:function(e){var t=this.getPath("_burstOneUpView.promotionAlterations");if(this.media&&this.media.burstMedias)return this.media.burstMedias.filter(function(n){var i=n.pk;return t.hasOwnProperty(i)?t[i]===e:n.isPromotedFromBurst===e})},burstSelectionToolbar:i.b({readOnly:!0,dependencies:["hasBurstMode","_burstSelectionToolbar","_burstSelectionToolbar.isNotFullyRetracted"],get:Object.assign(function(){return this.hasBurstMode||this.getPath("_burstSelectionToolbar.isNotFullyRetracted")?this._burstSelectionToolbar:null},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])||i.internalGetPath(this,t[2+n])?i.internalGet(this,t[1+n]):null}})}),_commitInProgress:i.b(!1),_burstSelectionToolbar:i.b({strong:!0,downstreamBindings:{allSelectedItems:"(owner).allSelectedItems",_commitInProgress:"(owner)._commitInProgress"},defaultValue:a.b(f.a.extend(S.a,C.a,{owner:i.b(),staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"burstCountString",attributes:{}}],name:"burstCountElement",classes:["pok-burst-count-text"]},{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"makeASelectionString",attributes:{}}],name:"makeASelectionElement",classes:["pok-make-selection-text"]},{type:"VIEWOUTLET",tagname:"view",name:"burstModificationSpinner"},{type:"VIEWOUTLET",tagname:"view",name:"cancelButton"},{type:"VIEWOUTLET",tagname:"view",name:"doneButton"}],classes:["pok-burst-selection-toolbar"],styles:{top:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"parent.baseInsetsProvider.insetTop",attributes:{},unit:"px",property:"top"},"line-height":{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"viewportHeight",attributes:{},unit:"px",property:"line-height"}}}},additionalClassNames:g.a(["pok-burst-selection-toolbar"]),retractionAttachment:"top",retractionAmount:I.b(1),fadesWhileRetracting:!0,viewportWidth:r.c("parent.viewportWidth"),viewportHeight:33,burstCountString:i.b({readOnly:!0,dependencies:["owner.burstCount"],get:Object.assign(function(){var e=this.getPath("owner.burstCount");return e?k(O.c.getAutodisposingInstanceFromParams("","Toolbar.OneUp.Title.BurstCount.1","Toolbar.OneUp.Title.BurstCount.2","Toolbar.OneUp.Title.BurstCount.More"),e):""},{__CW__getter:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return r?k(O.c.getAutodisposingInstanceFromParams("","Toolbar.OneUp.Title.BurstCount.1","Toolbar.OneUp.Title.BurstCount.2","Toolbar.OneUp.Title.BurstCount.More"),r):""}})}),allSelectedItems:i.b(),makeASelectionString:i.b({readOnly:!0,dependencies:["allSelectedItems","allSelectedItems.length"],get:function(){var e=this.allSelectedItems;if(e)return k(["OneUp.Burst.Toolbar.MakeASelection","OneUp.Burst.Toolbar.Selection.1","OneUp.Burst.Toolbar.Selection.2","OneUp.Burst.Toolbar.Selection.More"],e.length)}}),_commitInProgress:i.b(),burstModificationSpinner:i.b({strong:!0,downstreamBindings:{isVisible:"(owner)._commitInProgress"},defaultValue:a.b(m.a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isVisible",truevalue:"visible",attributes:{}}]}}},size:20,isVisible:i.b()}))}),cancelButton:i.b({strong:!0,downstreamBindings:{isDisabled:"(owner)._commitInProgress"},defaultValue:a.b(s.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"label",attributes:{}}],classes:["pok-cancel-button"]}},label:o.d("OneUp.Burst.Toolbar.Cancel"),action:"exitBurstMode"}))}),doneButton:i.b({strong:!0,downstreamBindings:{isDisabled:"(owner)._commitInProgress"},defaultValue:a.b(s.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"label",attributes:{}}],classes:["pok-done-button"]}},label:o.d("OneUp.Burst.Toolbar.Done"),action:"commitPromotionAlterationsAndExitBurstMode"}))}),_renderSelf:l.f("viewportWidth","burstCountString",function(e,t){var n=Math.ceil(A(t,"13px helvetica")),i=Math.ceil(A(this.makeASelectionString,"13px helvetica")),r=Math.ceil(A(this.cancelButton.label,"15px helvetica")),a=this.burstModificationSpinner.size,s=11,o=e-Math.ceil(A(this.doneButton.label,"15px helvetica"))-11,c=o-11-r,l=c-11-a,u=c-11-i>s+n+11?Math.round(e/2-i/2):-1e4;c>s+n+11||(s=-1e4),this.burstCountElement.style.left=s+"px",this.makeASelectionElement.style.left=u+"px",this.burstModificationSpinner.element.style.left=l+"px",this.cancelButton.element.style.left=c+"px",this.doneButton.element.style.left=o+"px"}),_animateUponGettingOrLosingBurstMode:l.f("owner.hasBurstMode",function(e){e&&this.unretract(),e||this.retract()})}))}),_adjustForToolbarInset:l.f("_burstSelectionToolbar.retractedHeight",function(e){this.registerInsetTop(this._burstSelectionToolbar,e)}),_adjustForBurstOneUpThumbstripInset:l.f("_burstOneUpView.thumbnailsStripView.retractedHeight",function(e){this.registerInsetBottom(this._burstOneUpView.thumbnailsStripView,e)}),_maintainBurstOneUpAsSurrogateOneUpNavigee:l.f("hasBurstMode",function(){this.sendEvent("useSurrogateOneUpNavigee",this.hasBurstMode?this._burstOneUpView:null)}),burstOneUpView:i.b({readOnly:!0,dependencies:["hasBurstMode","_burstOneUpView","_burstOneUpView.thumbnailsStripView.isNotFullyRetracted"],get:Object.assign(function(){return this.hasBurstMode||this.getPath("_burstOneUpView.thumbnailsStripView.isNotFullyRetracted")?this._burstOneUpView:null},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])||i.internalGetPath(this,t[2+n])?i.internalGet(this,t[1+n]):null}})}),_burstOneUpView:i.b({strong:!0,defaultValue:a.b(R.a.extend(C.a,{collection:r.c("parent.media.burstMedias"),viewportWidth:r.c("parent.viewportWidth"),viewportHeight:r.c("parent.viewportHeight"),baseInsetsProvider:r.c("parent"),promotionAlterations:i.b(a.b(Object)),isMediaAtLeastTentativelyPromoted:function(e){var t=this.promotionAlterations,n=e.pk;return t.hasOwnProperty(n)?t[n]:e.isPromotedFromBurst},tentativelyTogglePromotionForMedia:function(e){this.isMediaAtLeastTentativelyPromoted(e)?this.tentativelyDemoteMedia(e):this.tentativelyPromoteMedia(e)},tentativelyDemoteMedia:function(e){this.isMediaAtLeastTentativelyPromoted(e)&&(this.promotionAlterations[e.pk]=!1,this.propertyChanged("promotionAlterations"))},tentativelyPromoteMedia:function(e){this.isMediaAtLeastTentativelyPromoted(e)||(this.promotionAlterations[e.pk]=!0,this.propertyChanged("promotionAlterations"))},getTransitionFromViewToView:function(){var e=arguments,t=this.__s._$5ah$getTransitionFromViewToView.apply(this,e);return t&&t.distanceX&&(t.distanceX=0),t},viewClassForMedia:function(){var e=arguments,t=this.__s._$5dR$viewClassForMedia.apply(this,e);return t&&(t=this.viewClassForAllMedias),t},viewClassForAllMedias:v.c(function(){return N.a.extend({owner:i.b(this),isRenderDisabled:function(){var e=arguments;return this.__s._$5if$isRenderDisabled.apply(this,e)||!this.getPath("owner.owner.burstOneUpView")},_rerenderSelfWhenExitingBurstMode:l.f("owner.owner.burstOneUpView",function(){this.renderSelfSoon()}),staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"ELEMENT",tagname:"div",classes:["pok-promoted-from-burst-circle",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"doesMediaAppearPromotedFromBurst",truevalue:"pok-promoted",attributes:{}}],styles:{right:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"pinnedImageRight",attributes:{},unit:"px",property:"right"},bottom:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"pinnedImageBottom",attributes:{},unit:"px",property:"bottom"}}}],classes:["pok-burst-child-photo-presenter-view"]}}},doesMediaAppearPromotedFromBurst:i.b({readOnly:!0,dependencies:["media.pk","owner.promotionAlterations","media.isPromotedFromBurst"],get:Object.assign(function(){var e=this.getPath("media.pk"),t=this.getPath("owner.promotionAlterations");return!(!e||!t)&&(t.hasOwnProperty(e)?t[e]:this.getPath("media.isPromotedFromBurst"))},{__CW__getter:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]),a=i.internalGetPath(this,t[1+n]);return!(!r||!a)&&(a.hasOwnProperty(r)?a[r]:i.internalGetPath(this,t[2+n]))}})}),pointerDown:function(e){return e.target===this.element||(this.owner.tentativelyTogglePromotionForMedia(this.media),!0)},__superMap:{_$5if$isRenderDisabled:"isRenderDisabled"}})}),shouldUIBeClear:i.b({readOnly:!0,dependencies:["targetMediaView.wantsUIControl","transition.targetView","transition.sourceView"],get:Object.assign(function(){if(this.getPath("targetView.wantsUIControl"))return!0;var e=this.getPath("transition.targetView"),t=this.getPath("transition.sourceView");return!!(e&&!t||t&&!e)},{__CW__getter:function(e,t,n,i){if(this.getPath("targetView.wantsUIControl"))return!0;var r=i.internalGetPath(this,t[1+n]),a=i.internalGetPath(this,t[2+n]);return!!(r&&!a||a&&!r)}})}),_ensureEntireMediaRangeImmediately:l.f("collection","collection.length",function(e,t){if(e&&t)return this.owner.media.loadBurstMediasForRange(0,t-1)}),ensureMediaRange:_.a,_compensateForDoubleThumbnailsStripView:l.f("thumbnailsStripView.retractedHeight",function(e){this.registerInsetBottom(this.thumbnailsStripView+"compensation",-e)}),thumbnailsStripView:a.b(P.a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"ELEMENT",tagname:"div",classes:["pok-center-arrow"],styles:{left:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"insetCenterX",attributes:{},unit:"px",property:"left"},top:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"topCoordOfCenterOfInsetTop",attributes:{},unit:"px",property:"top"}}},{type:"VIEWOUTLET",tagname:"view",name:"spinnerView"}],styles:{bottom:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"parent.parent.parent.thumbnailsStripView.retractedHeight",attributes:{},unit:"px",property:"bottom"}}}}},targetMediaIndex:r.c("parent.targetMediaIndex"),collection:r.c("parent.collection"),viewportWidth:r.c("parent.viewportWidth"),viewportHeight:85,minimumHeight:55,allowsRetractionDuringResize:!1,fadesWhileRetracting:!0,retractionAmount:I.b(1),expandsTargetedThumbs:!1,thumbAspectRatio:r.c("parent.parent.media.aspectRatio"),thumbRendererClass:g.a({doesMediaAppearPromotedFromBurst:i.b({readOnly:!0,dependencies:["media.pk","ownerStripView.owner.promotionAlterations","media.isPromotedFromBurst"],get:Object.assign(function(){var e=this.getPath("media.pk"),t=this.getPath("ownerStripView.owner.promotionAlterations");return!(!e||!t)&&(t.hasOwnProperty(e)?t[e]:this.getPath("media.isPromotedFromBurst"))},{__CW__getter:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]),a=i.internalGetPath(this,t[1+n]);return!(!r||!a)&&(a.hasOwnProperty(r)?a[r]:i.internalGetPath(this,t[2+n]))}})}),_rerenderForPromotion:l.f("media","doesMediaAppearPromotedFromBurst",function(e,t){e&&this.render()}),doAdditionalRendering:function(e,t,i,r,a,s){var o=arguments;this.__s._$7cl$doAdditionalRendering.apply(this,o),this.doesMediaAppearPromotedFromBurst&&(e.context.fillStyle="rgba(237, 237, 237, 0.5)",e.context.fillRect(i,r,a,s),M.a(n(1012)).thenSync(D.a(this._drawBlueCheck,this,e,i,r,a,s)))},_drawBlueCheck:function(e,t,n,i,r,a,s,o){if(o){var c=L.c(a.naturalWidth,a.naturalHeight,i/3.5,r/3.5,O.h.getAutodisposingInstance()),l=L.d(a.naturalWidth,a.naturalHeight,.9*i,.9*r,O.h.getAutodisposingInstance()),u=Math.min(c.width,l.width),d=Math.min(c.height,l.height),h=e.context;h.save(),h.translate(t+i/2,n+r/2.1),h.scale(1.4*c.width,1.4*c.height),h.fillStyle=this._backingGradientForCheck,h.fillRect(-1,-1,2,2),h.restore(),h.drawImage(a,Math.floor(t+i/2-u/2),Math.floor(n+r/2-d/2),Math.ceil(u),Math.ceil(d))}else this.render()},_backingGradientForCheck:(V=O.d.getAutodisposingInstance().getContext("2d").createRadialGradient(0,0,0,0,0,1),V.addColorStop(0,"rgba(255, 255, 255, 0.5)"),V.addColorStop(.25,"rgba(255, 255, 255, 0.45)"),V.addColorStop(.5,"rgba(255, 255, 255, 0.32)"),V.addColorStop(.75,"rgba(255, 255, 255, 0.08)"),V.addColorStop(1,"rgba(255, 255, 255, 0)"),V),__superMap:{_$7cl$doAdditionalRendering:"doAdditionalRendering"}}),contentHeight:i.b({readOnly:!0,dependencies:["viewportHeight"],get:Object.assign(function(){var e=this.viewportHeight;return Math.round(e-4-.16*e-14)},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return Math.round(r-4-.16*r-14)}})}),topCoordOfCenterOfInsetTop:i.b({readOnly:!0,dependencies:["insetTop"],get:Object.assign(function(){return Math.round(this.insetTop/2)},{__CW__getter:function(e,t,n,i){return Math.round(i.internalGet(this,t[0+n])/2)}})}),bottomCoordOfCenterOfInsetBottom:i.b({readOnly:!0,dependencies:["insetBottom"],get:Object.assign(function(){return Math.round(this.insetBottom/2)},{__CW__getter:function(e,t,n,i){return Math.round(i.internalGet(this,t[0+n])/2)}})}),_animateUponGettingOrLosingBurstMode:l.f("owner.owner.hasBurstMode",function(e){e&&this.unretract(),e||this.retract()}),ensureMediaRange:function(e,t){return this.owner.ensureMediaRange(e,t)},_autopickDotElements:a.b(Array),_autopickDotElementsLength:v.c({get:function(){return this._autopickDotElements.length},set:function(e){for(var t=this._autopickDotElements,n=t.length,i=n;i<e;i++){var r=t[i]=O.e.getInstance();r.className="pok-promoted-from-burst-dot",this.element.appendChild(r)}for(var a=e;a<n;a++){var s=t[a];O.e.disposeInstance(s)}t.length=e}}),_clearAutopickDotElementsArrayWhenReused:l.f("firstVisibleThumbIndex","lastVisibleThumbIndex",function(e,t){e+t||(this._autopickDotElementsLength=0)}),cleanup:function(){var e=arguments;this._autopickDotElementsLength=0,this.__s._$9B1$cleanup.apply(this,e)},renderStrip:function(){var e=arguments;this.__s._$9Cf$renderStrip.apply(this,e);for(var t=this.firstVisibleThumbIndex,n=this.lastVisibleThumbIndex,i=this.collection,r=O.c.getAutodisposingInstance(),a=t;a<=n;a++){var s=i.objectAt(a);s&&s.isAutopickedInBurst&&r.push(a)}var o=this._autopickDotElementsLength;r.length>o&&(o=this._autopickDotElementsLength=r.length);var c=this._autopickDotElements,l=this.stripLeft,u=this.insetBottom,d=void 0;for(d=0;d<r.length;d++)b.a(c[d]).translateDevicePixels(l+this.centerInStripForThumbIndex(r[d]),-u/2).layerBack();for(;d<o;d++)b.a(c[d]).translate(-1e4,-1e4).layerBack()},spinnerView:i.b({readOnly:!0,dependencies:["owner.owner.media.isPreparingBurstMediasArray","_spinnerView"],get:Object.assign(function(){return this.getPath("owner.owner.media.isPreparingBurstMediasArray")?this._spinnerView:null},{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])?i.internalGet(this,t[1+n]):null}})}),_spinnerView:i.b({strong:!0,defaultValue:a.b(m.a.extend({owner:i.b(),size:i.b({readOnly:!0,dependencies:["owner.insetHeight"],get:Object.assign(function(){return this.getPath("owner.insetHeight")/2|"0px"},{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])/2|"0px"}})}),_updateLayout:l.f("size","owner.insetCenterX","owner.insetCenterY",function(e,t,n){this.style.translateDevicePixels(t-e/2,n-e/2).set("position","absolute")})}))}),_maintainHorizontalInsets:l.f("owner.owner.insetLeft","owner.owner.insetRight",function(e,t){y.a.pause(),this.registerInsetLeft("ownerOneUp",e),this.registerInsetRight("ownerOneUp",t),y.a.resume()}),__superMap:{_$9B1$cleanup:"cleanup",_$9Cf$renderStrip:"renderStrip"}})),__superMap:{_$5ah$getTransitionFromViewToView:"getTransitionFromViewToView",_$5dR$viewClassForMedia:"viewClassForMedia"}}))}),__superMap:{_$2I2$isRenderDisabled:"isRenderDisabled",_$2eI$cleanup:"cleanup"}})},function(e,t,n){"use strict";n.r(t);var i=n(1279),r=n(34),a=n(41),s=n(36),o=n(93),c=n(1187),l=n(1176),u=n(1195),d=n(849),h=n(155),p=n(83),f=n(243),g=n(1218),m=n(65),v=n(1170),_=n(88),b=n(222),y={_smdls_loadRefs:a.c(function(){return new _.a}),createLoadRef:function(e,t){var n=(t||b.a.create(this)).retain(this).autorelease(this);return e?n.resolve():(n._didBeginWantingCancel=n._smdls_willDispose=this._smdls_loadRefCancelledOrDisposed,this._smdls_loadRefs.add(n)),n},claimLoadRef:function(e,t){return g.a(e,b.a)||m.b("Object of type "+v.a(this)+" is attempting to claim a loadRef of the wrong type."),this.createLoadRef(t,e)},didLoad:function(){this._smdls_clearLoadRefsWithMethod("resolve")},didError:function(e){this._smdls_clearLoadRefsWithMethod("reject",e)},cancelLoad:function(){this._smdls_clearLoadRefsWithMethod("cancel")},_smdls_clearLoadRefsWithMethod:function(e,t){for(var n=this._smdls_loadRefs;n.length;){var i=n.oneItem;n.remove(i),i[e](t)}},_smdls_loadRefCancelledOrDisposed:p.a(function(e){this._smdls_loadRefs.remove(e),this._smdls_loadRefs.length||this.cancelLoad()}),cleanup:function(){var e=arguments;this.cancelLoad(),this.__s._$13n$cleanup.apply(this,e)},__superMap:{_$13n$cleanup:"cleanup"}},I=n(246),w=f.a.extend(y,d.a).extend({element:r.b(function(){var e=document.createElement("video");return e.setAttribute("playsinline",""),e.controls="controls",e.classList.add("video-derivative-element"),e}),rectInElement:r.b({readOnly:!0,dependencies:["element","hasMetadata"],get:Object.assign(function(){if(!this.hasMetadata)return null;var e=this.element,t=this._reusableRect||(this._reusableRect={});return t.x=t.y=0,t.width=e.videoWidth,t.height=e.videoHeight,t},{__CW__getter:function(e,t,n,i){if(!i.internalGet(this,t[1+n]))return null;var r=i.internalGet(this,t[0+n]),a=this._reusableRect||(this._reusableRect={});return a.x=a.y=0,a.width=r.videoWidth,a.height=r.videoHeight,a}})}),pause:function(){var e=this.element;e.readyState>0&&!e.paused&&e.pause(),e.autoplay=!1},play:function(){var e=this.element;e.readyState>=4&&e.paused&&(this.currentTime>=this.duration-.005&&(this.currentTime=0),e.play()),e.autoplay=!0},stop:function(){var e=this.element;e.readyState>0&&(e.currentTime=0),this.pause()},isPlaying:a.c({get:function(){var e=this.element;return e.readyState>0&&!e.paused}}),currentTime:a.c({get:function(){return this.element.currentTime},set:function(e){this.element.currentTime=e}}),duration:a.c({readOnly:!0,get:function(){return this.element.duration}}),didFinishPlaying:s.g(),hasMetadata:r.b({isRevertible:!0,defaultValue:!1}),isDisplayable:r.b({isRevertible:!0,defaultValue:!1}),isLoaded:r.b({readOnly:!0,binding:o.c("isDisplayable"),didChange:function(e){this._isLoaded_value!==(this._isLoaded_value=e)&&e&&this.didLoad()}}),error:r.b({isRevertible:!0,defaultValue:null,didChange:function(e){e&&this.didError(e)}}),cleanup:function(){var e=arguments;this._selfLoadRef=null,this.cancelLoad(),this._revertToUnloadedState(),this.revertRevertibleProperties(),this.__s._$1Ed$cleanup.apply(this,e)},resetForChangeset:function(){var e=arguments;this.cancelLoad(),this.__s._$1GD$resetForChangeset.apply(this,e)},loadSelfIfNeeded:function(){if(!this.isLoaded&&!this._selfLoadRef){var e=this._selfLoadRef=this._load().retain(this,"retaining own load ref for self-load"),t=h.a(e.release,e,this,"retaining own load ref for self-load");this._selfLoadRef.then(t,t)}},_selfLoadRef:a.c({weak:!0}),_load:function(e){var t=e?this.claimLoadRef(e,this.isLoaded):this.createLoadRef(this.isLoaded);return this.isLoaded||this._isLoading||(this._isLoading=!0,this._doLoadWork()),t},_doLoadWork:p.a(function(){var e=this;if(!this.isLoaded&&this._isLoading){var t=this.media;if(t.constructor.isURLExpiryTooSoon(this))t.fetchDerivativeInfo(function(){var n=t.derivativeInfoForDerivativeId(e.derivativeId);return n&&Object(I.b)(n,e),n}).then(this._doLoadWork,this._videoHadError);else{var n=this.element;c.a(n,"error",this._videoHadError),c.a(n,"canplay",l.a(this.set,this,"isDisplayable",!0)),c.a(n,"loadeddata",l.a(this.set,this,"hasMetadata",!0)),c.a(n,"ended",l.a(this.didFinishPlaying,this)),n.src=this.url||"",n.load()}}}),_videoHadError:p.a(function(e){!this.isLoaded&&this._isLoading&&(this.error=e instanceof Error?e:e.target.error,this._revertToUnloadedState())}),_revertToUnloadedState:function(){this._isLoading=!1;var e=this.element;u.a(e,"error",this._videoHadError),u.a(e,"canplay",l.a(this.set,this,"isDisplayable",!0)),u.a(e,"loadeddata",l.a(this.set,this,"hasMetadata",!0)),u.a(e,"ended",l.a(this.didFinishPlaying,this)),e.src="",e.autoplay=!1,this.isDisplayable=!1,this.hasMetadata=!1},cancelLoad:function(){var e=arguments;this.__s._$22o$cancelLoad.apply(this,e),this.isLoaded||this._revertToUnloadedState()},__superMap:{_$1Ed$cleanup:"cleanup",_$1GD$resetForChangeset:"resetForChangeset",_$22o$cancelLoad:"cancelLoad"},staticMembers:{__QUALIFIED_CLASS_NAME__:"VideoDerivative"}});n.d(t,"videoDerivativeStore",function(){return S});var S=i.a.extend({itemClass:w,computeStoreKey:function(e){return e.derivativeId},maxCachedItemCount:1,staticMembers:{__QUALIFIED_CLASS_NAME__:"VideoDerivativeStore"}}).create()},function(e,t,n){"use strict";var i=n(80),r=n(36),a=n(180),s=n(34),o=n(41),c=n(65),l=n(1184),u=n(784),d=n(39),h=n(775),p=i.a.extend(r.a,{staticMembers:{originForURL:function(e){e||c.b("Nonexistent `url` is being attempted to be sharded.");var t=e.indexOf("://");-1===t&&c.b("Sharding for relative URLs is unsupported.");var n=e.indexOf("/",t+3);return e.substring(0,-1===n?e.length:n)},__QUALIFIED_CLASS_NAME__:"OriginSharder"},maxTotalConcurrentRequests:s.b(0),_totalInflightRequestCount:0,_shardProviders:a.b(Object),configureOrigin:function(e,t,n,i){if(h.a(e))return this.configureOrigin(e.origin,e.applyShardToOrigin,e.shardCount,e.maxRequestsPerShard);var r=this.constructor.originForURL(e);this._shardProviders[r]&&c.b("Cannot configure sharding options for an origin that has already been configured. Note that origins will be configured automatically with default settings if a request is made against them."),this._shardProviders[r]=f.create.apply(f,arguments)},allocateShardedURL:function(e){if(this._totalInflightRequestCount>=this.maxTotalConcurrentRequests)return null;e=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:location.href;if(-1!==e.indexOf("://"))return e;var n=t.indexOf("://");if(-1===n)throw new Error("`baseUrl` has no origin.");if("/"===e[0]){var i=t.slice(0,n)+"://";return t.slice(0,(t.indexOf("/",i.length)+1||t.length+1)-1)+e}var r=t.slice(0,(t.indexOf("#")+1||t.length+1)-1),a=r.slice(0,(r.indexOf("?")+1||r.length+1)-1);return a.slice(0,a.lastIndexOf("/")+1)+e}(e);var t=this.constructor.originForURL(e),n=this._shardProviders[t]||(this._shardProviders[t]=f.create(t)),i=n.allocateShard();if(isNaN(i))return null;var r=n.shardedOriginForShardNumber(i);return this._shardProviders[r]||(this._shardProviders[r]=n),this._totalInflightRequestCount++,r+e.substring(t.length)},deallocateShardedURL:function(e){var t=this.constructor.originForURL(e),n=this._shardProviders[t];n||c.b("Attempting to deallocate a shard for a URL whose origin hasn't yet had a shard allocated in the first place."),n.deallocateShard(n.shardNumberForShardedOrigin(t)),this._totalInflightRequestCount--}}),f=i.a.extend({origin:"",shardCount:1,maxRequestsPerShard:6,init:function(e,t,n,i){this.origin=e,this._applyShardToOrigin=t||this._applyShardToOrigin,this.shardCount=n||this.shardCount,this.maxRequestsPerShard=i||this.maxRequestsPerShard,this.__s._$1nV$init.call(this);for(var r=0;r<this.shardCount;r++)this.inflightRequestCounts[r]=0},shardedOriginForShardNumber:function(e){var t=this._shardedOriginsByShardNumber[e];return t||(t=this._applyShardToOrigin(this.origin,e),this._shardNumbersByShardedOrigin[t]&&c.b("Implementation for applyShardToOrigin maps two inputs to the same output. The function must be one-to-one in both directions."),this._shardedOriginsByShardNumber[e]=t,this._shardNumbersByShardedOrigin[t]=e),t},shardNumberForShardedOrigin:function(e){var t=this._shardNumbersByShardedOrigin[e];return void 0===t&&c.b("Must provide a sharded origin to find the corresponding shard number."),t},_applyShardToOrigin:function(e,t){return t>0&&c.b("Must provide implementation for applyShardToOrigin when configuring sharding options for "+this.origin+"."),e},_shardedOriginsByShardNumber:a.b(Array),_shardNumbersByShardedOrigin:a.b(Object),inflightRequestCounts:a.b(Array),inflightRequestCount:o.c({readOnly:!0,get:function(){for(var e=0,t=this.shardCount,n=this.inflightRequestCounts,i=0;i<t;i++)e+=n[i];return e}}),unusedCapacity:o.c({readOnly:!0,get:function(){return this.shardCount*this.maxRequestsPerShard-this.inflightRequestCount}}),allocateShard:function(){var e=this.inflightRequestCounts,t=Math.min.apply(Math,e);if(t===this.maxRequestsPerShard)return NaN;var n=e.indexOf(t);return e[n]++,n},deallocateShard:function(e){0===this.inflightRequestCounts[e]&&c.b("Attempting to deallocate shard that was not allocated."),this.inflightRequestCounts[e]--},__superMap:{_$1nV$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"ShardProvider"}}),g=n(88),m=n(83),v=n(46),_=n(222),b=n(498),y=n(99);n.d(t,"a",function(){return S});var I=i.a.extend(r.a,{priorityBucketSize:1e4,priorityBucketBlockableDuration:2500,sharder:a.b(p.extend({maxTotalConcurrentRequests:s.b(y.a.bindingFor("maxConcurrentImageRequestCount"))})),_pendingRefs:o.c(function(){return new g.b("ref pending in DLM")}),_loadingRefGroups:o.c(function(){return new g.a}),_addRef:function(e){e.derivativeURL||c.b("Adding DerivativeLoadRef for derivative that lacks a URL.");var t=this._getLoadingRefGroupForRef(e);if(t)return e.request=t[0].request,t.push(e),void e.retain(this,"ref in loading group");this._pendingRefs.add(e)},_cancelRef:m.a(function(e){var t=this._getLoadingRefGroupForRef(e);if(t){var n=t.indexOf(e),i=t.pop();return-1!==n&&(e.release(this,"ref in loading group"),e!==i&&(t[n]=i)),void(t.length||(this._loadingRefGroups.remove(t),w.autodisposeInstance(t),this.scheduleLoad()))}this._pendingRefs.remove(e)}),cancelAllRefsForDerivativeId:function(e){var t=this._getPendingRefsForDerivativeId(e);if(t.length){for(var n,i=0;n=t[i];i++)this._cancelRef(n);w.disposeInstance(t)}else{w.disposeInstance(t);for(var r=this._getLoadingRefGroupForDerivativeId(e);r&&r.length;)this._cancelRef(r[r.length-1])}},_getLoadingRefGroupForRef:function(e){return this._getLoadingRefGroupForDerivativeId(e.derivativeId)},_getLoadingRefGroupForDerivativeId:function(e){for(var t,n=this._loadingRefGroups.items,i=0;t=n[i];i++)if(t[0].derivativeId===e)return t;return null},_getPendingRefsForDerivativeId:function(e){for(var t,n=w.getInstance(),i=this._pendingRefs.items,r=0;t=i[r];r++)t.derivativeId===e&&n.push(t);return n},_getMinLoadingPriority:function(e){for(var t,n=this.priorityBucketBlockableDuration,i=this._loadingRefGroups.items,r=1/0,a=0;t=i[a];a++)if(e-t._dateRequested<n)for(var s,o=0;s=t[o];o++){var c=s.priority;c<r&&(r=c)}return r},_getMinPendingPriority:function(){for(var e,t=1/0,n=this._pendingRefs.items,i=0;e=n[i];i++){var r=e.priority;r<t&&(t=r)}return t},_getBucketForPriority:function(e){var t=this.priorityBucketSize;return Math.ceil(e/t)*t},_getUpToThisManyMinPriorityRefs:function(e,t){for(var n,i=w.getInstance(),r=-Math.pow(2,53),a=r,s=-1,o=this._pendingRefs.items,c=0;n=o[c];c++){var l=n.priority;if(!(l>t))if(i.length<e)l>a&&(a=l,s=i.length),i.push(n);else if(!(l>a)){i[s]=n,a=r;for(var u,d=0;u=i[d];d++){var h=u.priority;h>a&&(a=h,s=d)}}}return i},scheduleLoad:m.a(function(){this._scheduledLoadTimeout||(this._scheduledLoadTimeout=l.a(this.requestAsManyDerivativesAsPossible,50))}),requestAsManyDerivativesAsPossible:m.a(function(){clearTimeout(this._scheduledLoadTimeout),this._scheduledLoadTimeout=null;for(var e=this.requestAsManyDerivativesAsPossible,t=this.priorityBucketBlockableDuration,n=Date.now(),i=this._getMinLoadingPriority(n),r=this._getMinPendingPriority(),a=this._getBucketForPriority(Math.min(i,r)),s=this._pendingRefs,o=s.items;;){for(var c=1/0,d=null,h=void 0,p=0;h=o[p];p++){var f=h.priority;f>a||h._dlm_hasSkipped||h._dlm_isInvalid||(f<c||!d)&&(c=f,d=h)}if(!d)break;var g=d.derivativeURL;if(g){var m=this.sharder.allocateShardedURL(g);if(m){var _=this._getPendingRefsForDerivativeId(d.derivativeId),y=_[0].derivative,I=b.a.create();if(I.open(m,y.mimeType,"image/jpeg"===y.mimeType&&y.isOriginal),I._dlm_refGroup=_,I._dlm_derivative=y,I._dlm_didFinish=this._imageRequestDidFinish,I._dlm_didFail=this._imageRequestDidFailOrWasCancelled,I._dlm_wasCanceled=this._imageRequestDidFailOrWasCancelled,I.shouldLogTimingOfRequest=!1,I.isDynamicResJPEGMedResRequest=!1,d.shouldAddTimingToRequestForLoggingPurposes){var w=d.loggingRequestId;I.loggingRequestId=w,0!==w&&(I.shouldLogTimingOfRequest=!0)}d.dynamicResJPEGMedRes&&(I._dlm_didFinish=this._imageRequestDidFailOrWasCancelled,I.isDynamicResJPEGMedResRequest=!0),I.send();for(var S=0;h=_[S];S++)h.request=I,h._dlm_hasSkipped=!1,h.retain(this,"ref in loading group"),s.remove(h);_._dateRequested=n,_._unblockTimeout=l.a(e,t+1),this._loadingRefGroups.add(_)}else d._dlm_hasSkipped=!0}else d._dlm_isInvalid=!0}for(var C,O=0;C=o[O];O++)C._dlm_hasSkipped&&(C._dlm_hasSkipped=!1);for(var A,E=v.c.getAutodisposingInstance(),T=0;A=o[T];T++)A._dlm_isInvalid&&(A._dlm_isInvalid=!1,E.push(A),u.b.warn("Found a DerivativeLoadRef whose derivative had no URL. Avoided a crash, but the derivatives layer is likely being misused in some way. Derivative ID is "+(A?A.getPath("derivative.derivativeId"):null)));for(var M,D=0;M=E[D];D++)M.cancel()}),_imageRequestDidFinish:m.a(function(e){this.sharder.deallocateShardedURL(e.url);var t=e._dlm_refGroup,n=e._dlm_derivative,i=e.image,r=e.imageBitmap;e.image=e.imageBitmap=null,d.a.pause(),n.element=i,n.imageBitmap=r,d.a.resume(),e._dlm_refGroup=null,e._dlm_derivative=null;for(var a,s=0;a=t[s];s++)a.resolve(),a.release(this,"ref in loading group");this._loadingRefGroups.remove(t)&&w.autodisposeInstance(t),this.scheduleLoad()}),_imageRequestDidFailOrWasCancelled:m.a(function(e){this.sharder.deallocateShardedURL(e.url);var t=e._dlm_refGroup;e._dlm_refGroup=null,e._dlm_derivative=null;for(var n,i=0;n=t[i];i++)n.reject(new Error("ImageRequest failed to obtain paintable image.")),n.release(this,"ref in loading group");this._loadingRefGroups.remove(t)&&w.autodisposeInstance(t),this.scheduleLoad()}),makeRequestForDerivative:function(e,t){var n=t||_.a.create();return n.derivative=e,e.isLoaded?n.resolve():(n._didBeginWantingCancel=this._cancelRef,this._addRef(n),this.scheduleLoad()),n},staticMembers:{__QUALIFIED_CLASS_NAME__:"DerivativeLoadManager"}}),w=v.a.extend({disposeInstance:function(e){var t=arguments;return e._dateRequested=void 0,e._unblockTimeout&&clearTimeout(e._unblockTimeout),e._unblockTimeout=void 0,this.__s._$5qA$disposeInstance.apply(this,t)},__superMap:{_$5qA$disposeInstance:"disposeInstance"}}).create(),S=I.create()},function(e,t,n){"use strict";var i=n(34),r=n(93),a=n(36),s=n(1188),o=n(1222),c=n(80).a.extend(a.a,{config:Object(i.b)(),anchorLayout:Object(i.b)(Object(r.c)("config.anchorLayout")),spaceLayout:Object(i.b)(Object(r.c)("config.spaceLayout")),desiredSize:Object(i.b)({strong:!0,binding:"config.desiredSize"}),minimumSize:Object(i.b)({strong:!0,binding:"config.minimumSize"}),layout:Object(i.b)(),fit:Object(i.b)({readOnly:!0,dependencies:["layout.height","layout.width"],get:Object.assign(function(){var e=this.getPath("layout.width"),t=this.getPath("layout.height");if(!t||!e)return 0;var n=this.minimumSize.width;return t<this.minimumSize.height?0:e<n?0:e*t},{__CW__getter:function(e,t,n,i){var r=i.internalGetPath(this,t[1+n]),a=i.internalGetPath(this,t[0+n]);if(!a||!r)return 0;var s=this.minimumSize.width;return a<this.minimumSize.height?0:r<s?0:r*a}})}),staticMembers:{__QUALIFIED_CLASS_NAME__:"PopoverLayout"}});n.d(t,"c",function(){return I}),n.d(t,"b",function(){return w}),n.d(t,"d",function(){return S}),n.d(t,"a",function(){return C});var l=c.extend({arrowLength:Object(i.b)(Object(r.c)("config.arrowLength")),_layoutRectangle:null,staticMembers:{__QUALIFIED_CLASS_NAME__:"OnSideLayout"}}),u={left:"x",right:"width",top:"y",bottom:"height"},d={left:"vertical",right:"vertical",top:"horizontal",bottom:"horizontal"},h={left:"width",right:"x",top:"height",bottom:"y",width:"height",height:"width"},p={left:-1,right:1,top:-1,bottom:1},f={left:"width",right:"width",top:"height",bottom:"height"},g={left:"y",right:"y",top:"x",bottom:"x"},m={left:"height",right:"height",top:"width",bottom:"width"},v={x:0,y:0,height:0,width:0},_={vertical:o.b.Top,horizontal:o.a.Left},b={vertical:o.b.Bottom,horizontal:o.a.Right};function y(e){var t=u[e],n=p[e],r=h[e],o=g[e],c=m[e],l=f[e],y=d[e],I=_[y],w=b[y];return{fit:Object(i.b)({readOnly:!0,dependencies:["layout.height","layout.width","layout."+o,"layout."+c,"anchorLayout."+o,"anchorLayout."+c,"config.isAlignmentRequired","config."+y+"Alignment"],get:Object.assign(function(){var e,t=arguments,n=this.__s._$qF$get.apply(this,t),i=$property.internalGet(this,$getArray[2+$offset]),r=$property.internalGet(this,$getArray[3+$offset]),a=$property.internalGet(this,$getArray[4+$offset]),s=$property.internalGet(this,$getArray[5+$offset]),o=$property.internalGet(this,$getArray[6+$offset]),c=$property.internalGet(this,$getArray[7+$offset]);return e=c===I?a-i:c===w?s-r:i+r/2-(a+s/2),o?0!==e&&(n=0):n-=Math.abs(e),n},{__CW__getter:function(e,t,n,i){var r,a=arguments,s=this.__s._$qF$get.apply(this,a),o=i.internalGet(this,t[2+n]),c=i.internalGet(this,t[3+n]),l=i.internalGet(this,t[4+n]),u=i.internalGet(this,t[5+n]),d=i.internalGet(this,t[6+n]),h=i.internalGet(this,t[7+n]);return r=h===I?l-o:h===w?u-c:o+c/2-(l+u/2),d?0!==r&&(s=0):s-=Math.abs(r),s}}),__superMap:{_$qF$get:"get"}}),layoutCalculator:Object(a.f)("arrowLength","desiredSize."+l,"desiredSize."+h[l],"anchorLayout."+t,"anchorLayout."+r,"anchorLayout."+o,"anchorLayout."+c,"spaceLayout."+t,"spaceLayout."+r,"spaceLayout."+o,"spaceLayout."+c,"config.spaceInset","config."+y+"Alignment",function(e,i,a,l,u,d,h,p,f,g,m,_,b){"height"===t||"width"===t?(l+=u,p+=f,p-=_):"height"!==r&&"width"!==r||(u+=l,f+=p,p+=_),m+=g,h+=d,g+=_,m-=_;var y,S,C=l+e*n,O=C+i*n;if((O>p&&n>0||O<p&&n<0)&&(O=p),b===I)y=d,S=d+a;else if(b===w)S=h,y=h-a;else{var A=(d+h)/2,E=a/2;y=A-E,S=A+E}var T=g-y;T>0&&(y+=T,S+=T);var M=m-S;M<0&&(y+=M,S+=M),y<g&&(y=g),v[t]=O,v[r]=C,v[o]=y,v[c]=S,v.width-=v.x,v.height-=v.y;var D=this._layoutRectangle;D?D.beginBatchSet().set("x",v.x).set("y",v.y).set("height",v.height).set("width",v.width).end():this._layoutRectangle=D=s.a.create(v),this.layout=D})}}var I=l.extend(y("right"),{staticMembers:{__QUALIFIED_CLASS_NAME__:"OnRightLayout"}}),w=l.extend(y("left"),{staticMembers:{__QUALIFIED_CLASS_NAME__:"OnLeftLayout"}}),S=l.extend(y("top"),{staticMembers:{__QUALIFIED_CLASS_NAME__:"OnTopLayout"}}),C=l.extend(y("bottom"),{staticMembers:{__QUALIFIED_CLASS_NAME__:"OnBottomLayout"}})},function(e,t,n){"use strict";var i=n(335),r=n(34),a={staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",classes:["cw-modal-dialog"],attributes:{role:{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"modalDialogRole",attributes:{},attribute:"role"},"aria-labelledby":{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"ariaLabelledByID",attributes:{},attribute:"aria-labelledby"},"aria-describedby":{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"ariaDescribedByID",attributes:{},attribute:"aria-describedby"},tabindex:{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"tabIndex",attributes:{},attribute:"tabindex"}}}}},isFocusable:!0,tabIndex:Object(r.b)(-1),ariaLabelledByID:Object(r.b)(),ariaDescribedByID:Object(r.b)(),modalDialogRole:Object(r.b)("dialog")},s=n(36),o=n(1182),c=n(409);n.d(t,"a",function(){return u}),n.d(t,"b",function(){return d});var l=1,u=c.a.extend(a,{staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",name:"alertIcon",classes:["alert-icon"]},{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"h1",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"message",attributes:{}}],classes:["message"],attributes:{id:{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"ariaLabelledByID",attributes:{},attribute:"id"},tabindex:"0"}},{type:"ELEMENT",tagname:"p",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"description",attributes:{}}],classes:["description"],attributes:{id:{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"ariaDescribedByID",attributes:{},attribute:"id"},tabindex:"0"}}],name:"contentWrapper",classes:["alert-text-container"]}],classes:["alert-main-content"]},{type:"VIEWOUTLET",tagname:"view",name:"accessoryView",classes:["alert-accessory-view"]}],classes:["main-container",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"_hasText",truevalue:"",falsevalue:"cw-hidden",attributes:{}}]},{type:"MULTIVIEWOUTLET",tagname:"views",name:"buttonViews",classes:["alert-button-container",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"_hasMoreThanTwoButtons",truevalue:"has-more-than-two-buttons",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"_hasOtherButton",truevalue:"has-other-button",attributes:{}}]}],classes:["cw-alert",{type:"CLASSNAMEOUTLET",bindingtype:"DIRECTBINDING",name:"_alertStyleClassName",attributes:{}}]}},__QUALIFIED_CLASS_NAME__:"AlertContentView"},ariaLabelledByID:Object(r.b)({readOnly:!0,get:function(){return"alert-m-"+ ++l}}),ariaDescribedByID:Object(r.b)({readOnly:!0,get:function(){return"alert-d-"+l++}}),message:Object(r.b)(),description:Object(r.b)(),iconNames:Object(r.b)(),alertStyle:Object(r.b)(),_alertStyleClassName:Object(r.b)({readOnly:!0,dependencies:["alertStyle"],get:Object.assign(function(){return this.alertStyle?this.alertStyle.value:""},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?i.internalGet(this,t[0+n]).value:""}})}),_hasText:Object(r.b)({readOnly:!0,dependencies:["message","description"],get:Object.assign(function(){return Boolean(this.message||this.description)},{__CW__getter:function(e,t,n,i){return Boolean(i.internalGet(this,t[0+n])||i.internalGet(this,t[1+n]))}})}),_hasMoreThanTwoButtons:Object(r.b)({dependencies:["buttonViews","buttonViews.contentsDidChange"],type:Boolean,readOnly:!0,get:Object.assign(function(){var e=this.buttonViews;return void 0!==e&&e.length>2},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return void 0!==r&&r.length>2}})}),_hasOtherButton:Object(r.b)({dependencies:["buttonViews","buttonViews.contentsDidChange"],type:Boolean,readOnly:!0,get:Object.assign(function(){var e=this.buttonViews;return void 0!==e&&e.length>1&&(e.length>2||!0!==e.objectAt(1).isAlternate)},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return void 0!==r&&r.length>1&&(r.length>2||!0!==r.objectAt(1).isAlternate)}})}),_iconNamesDidChange:Object(s.f)({inputs:["iconNames"],callback:function(e){var t=this.get("alertIcon");this._originalClassName?t.className=this._originalClassName:this._originalClassName=t.className,e&&(e instanceof Array?e.forEach(function(e){t.classList.add(e)}):t.classList.add(e))}}),disableAllButtons:function(){this.buttonViews.forEach(function(e){e.isDisabled=!0})},enableAllButtons:function(){this.buttonViews.forEach(function(e){e.isDisabled=!1})},buttonViews:Object(r.b)()}),d=i.a.extend({additionalClassNames:Object(o.a)(["cw-ui-alert-view","cw-alert-modal"]),buttonDidActivate:function(e){this.sendEvent("alertWillDismiss"),this.contentView&&this.contentView.disableAllButtons(),this.animateClosed()},dismissOnEscape:!1,staticMembers:{__QUALIFIED_CLASS_NAME__:"AlertView"}})},function(e,t,n){"use strict";var i=n(80),r=n(128),a=n(41),s=n(193),o=n(175),c=n(36),l=n(34),u=n(65),d=n(49),h=n(32),p=n(54),f={mixinDependencies:[d.a],itemsInsertedAtIndex:Object(h.c)(p.a),itemsRemovedAtIndex:Object(h.c)(p.a)};n.d(t,"a",function(){return v});var g=i.a.extend(r.a,{init:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e._firstRange,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t?t.start:NaN;this._source=e,this._range=t,this._index=n,this.__s._$9D$init.call(this)},_source:null,_range:null,_index:NaN,isValid:Object(a.c)({readOnly:!0,get:function(){return!!this._range}}),encodedValue:Object(a.c)({readOnly:!0,get:function(){return this._index}}),moveToNext:function(){var e=this._index,t=this._range;e===t.end?e=(t=this._range=t.next)?t.start:NaN:e++,this._index=e},clone:function(){return this.constructor.create(this._source,this._range,this._index)},__superMap:{_$9D$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"IndexIterator"}}),m=i.a.extend(r.a,{init:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e._firstRange;this._source=e,this._range=t,this.__s._$OV$init.call(this)},_source:null,_range:null,isValid:Object(a.c)({readOnly:!0,get:function(){return!!this._range}}),value:Object(a.c)({readOnly:!0,get:function(){return this.encodedValue}}),encodedValue:Object(a.c)({readOnly:!0,get:function(){return this._range}}),moveToNext:function(){this.isValid&&(this._range=this._range.next)},clone:function(){return this.constructor.create(this._source,this._range)},__superMap:{_$OV$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"IndexRangeIterator"}}),v=i.a.extend(c.a,s.a,f,o.a,{init:function(){var e=arguments;this._firstRange=null,this.__s._$lx$init.apply(this,e)},length:Object(l.b)({cacheable:!0,get:function(){for(var e=this._firstRange,t=0;e;)t+=e.end-e.start+1,e=e.next;return t}}),iteratorClass:Object(a.c)(g),toArray:function(e){for(var t,n,i,r=e||[],a=this._firstRange;a;){for(n=a.start,i=a.end,t=n;t<=i;t++)r.push(t);a=a.next}return r},clear:function(){for(var e=this._firstRange,t=null;e;)t=e.next,e.next=null,e.start=e.end=-1,e=t;this._firstRange=null,this.propertyChanged("length")},add:function(e,t){var n=this.encode(e),i=void 0!==t?this.encode(t):void 0;return this.encodedAdd(n,i)},encodedAdd:function(e,t){if(void 0===t)t=e;else if(t<e){var n=[t,e];e=n[0],t=n[1]}for(var i=this._firstRange,r=null,a=0;i&&!(i.end>=e);)r=i,i=i.next;if(i&&i.start<=t){var s=Math.min(i.start,e),o=Math.max(i.end,t);a+=i.start-s,a+=o-i.end,i.start=s,i.end=o}else i=new _(e,t,i||null),a=t-e+1,r?r.next=i:this._firstRange=i;r&&r.end>=i.start-1&&(a-=r.end-i.start+1,r.end=i.end,r.next=i.next,i=r);var c=i;for(i=i.next;i&&i.start<=c.end+1;)c.end=Math.max(c.end,i.end),a-=Math.min(t,i.end)-Math.max(e,i.start)+1,c.next=i.next,i=i.next;return this.propertyChanged("length"),a},remove:function(e,t){return this.encodedRemove(this.encode(e),t?this.encode(t):void 0)},encodedRemove:function(e,t){if(void 0===t)t=e;else if(t<e){var n=[t,e];e=n[0],t=n[1]}for(var i=this._firstRange,r=null,a=0;i&&!(i.start>t);){if(i.end>=e)if(i.start>=e&&i.end<=t)r?r.next=i.next:this._firstRange=i.next,a+=i.end-i.start+1;else{var s,o,c=i.start,l=Math.min(i.end,e-1),u=Math.max(i.start,t+1),d=i.end,h=i.next;a+=Math.min(t,i.end)-Math.max(e,i.start)+1,l-c>=0&&(s=new _(c,l,h),r?r.next=s:this._firstRange=s,r=i=s),d-u>=0&&(o=new _(u,d,h),r?r.next=o:this._firstRange=o,r=i=o)}r=i,i=i.next}return this.propertyChanged("length"),a},contains:function(e,t){return this.encodedContains(this.encode(e),t?this.encode(t):void 0)},encodedContains:function(e,t){void 0===t&&(t=e);for(var n=this._firstRange;n;){if(n.start<=e&&n.end>=t)return!0;n=n.next}return!1},containsSome:function(e,t){Object(u.b)("not implemented")},rangeStart:function(e){var t=this._rangeForIndex(e);return t?t.start:-1},rangeEnd:function(e){var t=this._rangeForIndex(e);return t?t.end:-1},lastIndexBefore:function(e){for(var t,n=this._firstRange,i=-1,r=e-1;n&&!(n.start>r);)t=n,n=n.next;return t&&(i=Math.min(r,t.end)),i},firstIndexAfter:function(e){for(var t=this._firstRange,n=-1,i=e+1;t&&!(t.end>=i);)t=t.next;return t&&(n=Math.max(i,t.start)),n},itemsInsertedAtIndex:function(e,t){for(var n=this._firstRange;n;)this._updateRangeForInsertion(n,e,t),n=n.next;this.remove(e,e+t-1)},itemsRemovedAtIndex:function(e,t){for(var n=this._firstRange,i=null;n;)this._updateRangeForRemoval(n,e,t),n.end>=n.start?i&&i.end>=n.start-1&&(i.end=n.end,i.next=n.next):i?i.next=n.next:this._firstRange=n.next,i=n,n=n.next;this.propertyChanged("length")},_updateRangeForInsertion:function(e,t,n){e.start>=t&&(e.start+=n),e.end>=t&&(e.end+=n)},_updateRangeForRemoval:function(e,t,n){var i=t+n-1;e.start>=t&&(e.start<=i?e.start=t:e.start-=n),e.end>=t&&(e.end<=i?e.end=t-1:e.end-=n)},_rangeForIndex:function(e){for(var t=this._firstRange;t;){if(t.start<=e&&t.end>=e)return t;t=t.next}return null},ranges:function(){return m.create(this)},union:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=t,r=Array.isArray(i),a=0;for(i=r?i:i[Symbol.iterator]();;){var s;if(r){if(a>=i.length)break;s=i[a++]}else{if((a=i.next()).done)break;s=a.value}var o=s.ranges(),c=Array.isArray(o),l=0;for(o=c?o:o[Symbol.iterator]();;){var u;if(c){if(l>=o.length)break;u=o[l++]}else{if((l=o.next()).done)break;u=l.value}var d=u,h=d.start,p=d.end;this.add(h,p)}}return this},difference:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(b,this)},clone:function(){return v.create().union(this)},__superMap:{_$lx$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"IndexSet"}});function _(e,t,n){this.start=e,this.end=t,this.next=n}function b(e,t){for(var n,i,r,a,s,o=e.ranges(),c=t.ranges(),l=(n=null,i=null,r=null,function(e){if(null===n)n=e;else{var t=n.value,a=e.value;if(n.oppositeOn&&(t+=1),e.oppositeOn&&(a-=1),t<=a){var s=new _(t,a,null);null===i?(r=s,i=s):i.end===s.start-1?i.end=s.end:(i.next=s,i=s)}n=null}return r}),u=null,d=!1,h=!1;o.isValid||c.isValid;){var p=y(o,d),f=y(c,h);null===p||null!==f&&(f<p||!(f>p)&&d)?(u=l({value:f,oppositeOn:d}),h&&c.moveToNext(),h=!h):(u=l({value:p,oppositeOn:h}),d&&o.moveToNext(),d=!d)}return a=u,(s=v.create())._firstRange=a,s}function y(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.isValid?t?e.value.end:e.value.start:null}},function(e,t,n){"use strict";var i=n(36),r=n(34),a=n(41),s=n(180),o=n(1211),c=n(793),l=n(80),u=n(409),d=n(65),h=n(1173),p=n(49),f=n(32),g=n(54),m={mixinDependencies:[p.a,i.a],layoutMetrics:Object(r.b)({strong:!0}),cellsWillEnter:function(e){},cellDidEnter:Object(f.c)(g.a),cellsDidEnter:function(e){},cellsWillMove:function(e){},cellDidMove:Object(f.c)(g.a),cellsDidMove:function(e){},cellsWillExit:function(e){},cellDidExit:Object(f.c)(g.a),cellsDidExit:function(e){}};n.d(t,"a",function(){return _});var v={mixinDependencies:[i.a],mappedViews:Object(a.c)({strong:!0,defaultValue:Object(s.b)(o.a)}),activeViews:Object(s.b)(c.a),viewsToCells:Object(s.b)(Map),cellsToViews:Object(s.b)(Map),pools:Object(s.b)(Map),viewForCell:function(e,t){var n=this.cellsToViews.get(e);if(!n){if(!t)return null;n=this._getViewOfClass(t),this.cellsToViews.set(e,n),this.viewsToCells.set(n,e)}return n},cellForView:function(e){return this.viewsToCells.get(e)},releaseViewForItem:function(e){var t=this.cellsToViews.get(e);t||Object(d.b)("No view for cell"),this._releaseView(t,e),this._poolView(t)},releaseView:function(e){var t=this.viewsToCells.get(e);e||Object(d.b)("No cell for view"),this._releaseView(e,t),this._poolView(e)},_getViewOfClass:function(e){var t=this.pools.get(e);t||(t=[],this.pools.set(e,t));var n=void 0;return t.length>0?n=t.pop():(n=this.viewForViewClass(e),this.mappedViews.push(n)),n.isPooledInDom=!1,this.activeViews.push(n),n},viewForViewClass:function(e){return e.create()},_releaseView:function(e,t){this.activeViews.remove(e),this.cellsToViews.delete(t),this.viewsToCells.delete(e)},_poolView:function(e){this.pools.get(e.constructor).push(e),e.isPooledInDom=!0}},_=l.a.extend(v,m,{itemViewClass:Object(r.b)(u.a),_oldItemViewClass:null,_clearItemViewCache:Object(i.f)("itemViewClass",function(e){var t=this._oldItemViewClass;t&&this.replaceViewsOfClass(t),this._oldItemViewClass=e}),replaceViewsOfClass:function(e){for(var t=this.activeViews,n=t.length-1;n>=0;n--){var i=t.objectAt(n);if(Object(h.a)(i,e)){var r=this.viewsToCells.get(i);this.cellDidExit(r),this.cellDidEnter(r)}}},views:Object(r.b)(),dataProperty:"content",viewClassKeysByCellType:{item:"itemViewClass"},itemViewClassForItem:function(e){var t=e.cellType,n=this.viewClassKeysByCellType[t],i=this[n];return i||Object(d.b)('ItemViewPresenter: no view class for cell type "%{cellType}" and view class key "%{viewClassKey}"',{cellType:t,viewClassKey:n}),i},viewForViewClass:function(e){return e.create({layoutMetrics:this.bindingFor("layoutMetrics")})},cellDidEnter:function(e){var t=this.viewForCell(e,this.itemViewClassForItem(e));this.itemViewDidEnter(t,e),t.isAttached||this.views.push(t),t.layout=e},cellDidMove:function(e){var t=this.viewForCell(e);t&&this.itemViewDidMove(t,e)},cellDidExit:function(e){var t=this.viewForCell(e);this.itemViewDidExit(t,e),this.releaseViewForItem(e)},itemViewDidEnter:function(e,t){e.set(this.dataProperty,t.value)},itemViewDidMove:function(e,t){},itemViewDidExit:function(e,t){},staticMembers:{__QUALIFIED_CLASS_NAME__:"ItemViewPresenter"}})},function(e,t,n){"use strict";var i=n(41),r=n(32),a=n(180),s=n(34),o=n(36),c=n(1188),l=n(1206),u=n(1176),d=n(784),h=n(1196),p=n(184),f=n(186),g=n(1210),m=n(95),v=n(842),_=n(81),b=n(187).a.extend({deltaX:Object(i.c)(0),deltaY:Object(i.c)(0),consumeX:y("deltaX"),consumeY:y("deltaY"),isEmpty:Object(i.c)({get:function(){return 0===this.get("deltaX")&&0===this.get("deltaY")}}),staticMembers:{__QUALIFIED_CLASS_NAME__:"ScrollEvent"}});function y(e){return function(t){var n,i,r=this.get(e);return void 0===t?t=r:(n=t,i=r,t=Math.abs(n)<Math.abs(i)?n:i),this.set(e,r-t),t}}n.d(t,"a",function(){return S});var I=s.a.extend({readOnly:!0,cacheable:!1,get:function(e,t,n,i){return i.internalGet(this,t[1+n])-i.internalGet(this,t[0+n])},staticMembers:{__QUALIFIED_CLASS_NAME__:"SizeProperty"}}),w=.998,S={mixinDependencies:[o.a,p.a,f.a],init:function(){var e=arguments,t=this.scrollGestureRecognizer=g.a.create({event:"updateScroll",delegate:this});this.addGestureRecognizer(t),this.__s._$Zt$init.apply(this,e)},gestureRecognizerShouldReceive:function(e,t){var n=arguments;return(!this.hasMomentum||e===this.scrollGestureRecognizer)&&(e===this.scrollGestureRecognizer?t.pointerType===m.b.TOUCH:this.__s._$gs$gestureRecognizerShouldReceive.apply(this,n))},gestureRecognizerShouldRequireFailureOf:function(e,t){var n=arguments;return e===this.scrollGestureRecognizer?!(!t.instanceOf(v.b)||t.view!==this&&!this.element.contains(t.view.element)||this.hasMomentum):this.__s._$qq$gestureRecognizerShouldRequireFailureOf.apply(this,n)},_initialPosition:null,updateScroll:function(e){var t=e.state,n=e.translation,i=this._initialPosition,r=this.normalizedX,a=this.normalizedY;i||(this._initialPosition=i={x:r+n.x,y:a+n.y});var s=0;this.canScrollHorizontally&&(s=this._calculatePositionWithStretch(-n.x,i.x,this.normalizedMaxX,this.width)-r);var o=0;if(this.canScrollVertically&&(o=this._calculatePositionWithStretch(-n.y,i.y,this.normalizedMaxY,this.height)-a),this.scrollBy(s,o),t===_.b.Ended){this._initialPosition=null;var c=e.velocity;Math.abs(c.y)<.175&&(c.y=0),Math.abs(c.x)<.175&&(c.x=0),c.y*=-1,c.x*=-1,this.beginMomentumScroll(c)}},_calculatePositionWithStretch:function(e,t,n,i){var r=t+e,a=O(r,0,n,i);return a+(r-a)/2.5},supportsTouchScroll:Object(i.c)(h.a.isTouchSupported),mayUseVerticalScrollingAsHorizontal:Object(i.c)(),processWheelEvent:function(e){this.mayUseVerticalScrollingAsHorizontal&&e.deltaY&&(e.deltaX+=e.deltaY,e.deltaY=0)},wheel:function(e){e.preventDefault();var t=this._deferredScrollEvent;t?(t.deltaX+=e.deltaX,t.deltaY+=e.deltaY,t.nativeEvent=e):((t=this._deferredScrollEvent=b.create({deltaX:e.deltaX,deltaY:e.deltaY,nativeEvent:e})).retain(this,"retain during scroll deferral"),this._scrollRAF||(this._scrollRAF=Object(l.a)(Object(u.a)(this._flushAccumulatedWheelDeltas,this))))},_flushAccumulatedWheelDeltas:function(){var e=this._deferredScrollEvent;this._cleanUpCurrentScrollAccumulation(),e&&(this.bubbleScroll(e),this.overflowX=this.overflowY=0)},_cleanUpCurrentScrollAccumulation:function(){var e=this._deferredScrollEvent;e&&(this._deferredScrollEvent=null,e.autorelease(this,"retain during scroll deferral"));var t=this._scrollRAF;t&&(this._scrollRAF=null,cancelAnimationFrame(t))},dispose:function(){var e=arguments;this._cleanUpCurrentScrollAccumulation(),this.__s._$2Lb$dispose.apply(this,e)},overflowX:Object(s.b)(0),overflowY:Object(s.b)(0),bubbleScroll:function(e){var t=this;for(e.deltaX=e.deltaX+this.overflowX,e.deltaY=e.deltaY+this.overflowY;!e.isEmpty;){for(;t&&!t.handleScroll;)t=t.nextResponder;if(!t)break;t.handleScroll(e),t=t.nextResponder}this.overflowX=e.deltaX,this.overflowY=e.deltaY},scrollX:Object(s.b)(0),normalizedX:Object(s.b)({readOnly:!0,dependencies:["scrollX","scrollMinX"],get:Object.assign(function(){return this.scrollX-this.scrollMinX},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])-i.internalGet(this,t[1+n])}})}),scrollY:Object(s.b)(0),normalizedY:Object(s.b)({readOnly:!0,dependencies:["scrollY","scrollMinY"],get:Object.assign(function(){return this.scrollY-this.scrollMinY},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])-i.internalGet(this,t[1+n])}})}),scrollMinX:Object(s.b)(0),scrollMaxX:Object(s.b)(0),normalizedMaxX:Object(s.b)({readOnly:!0,dependencies:["scrollMaxX","scrollMinX"],get:Object.assign(function(){return this.scrollMaxX-this.scrollMinX},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])-i.internalGet(this,t[1+n])}})}),scrollMinY:Object(s.b)(0),scrollMaxY:Object(s.b)(0),normalizedMaxY:Object(s.b)({readOnly:!0,dependencies:["scrollMaxY","scrollMinY"],get:Object.assign(function(){return this.scrollMaxY-this.scrollMinY},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])-i.internalGet(this,t[1+n])}})}),scrollHeight:Object(r.c)(I,{dependencies:["scrollMinY","scrollMaxY"]}),scrollWidth:Object(r.c)(I,{dependencies:["scrollMinX","scrollMaxX"]}),height:Object(s.b)(0),width:Object(s.b)(0),canScrollVertically:Object(s.b)({readOnly:!0,dependencies:["scrollHeight","height"],get:Object.assign(function(){return this.scrollHeight>this.height},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])>i.internalGet(this,t[1+n])}})}),canScrollHorizontally:Object(s.b)({readOnly:!0,dependencies:["scrollWidth","width"],get:Object.assign(function(){return this.scrollWidth>this.width},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])>i.internalGet(this,t[1+n])}})}),handleScroll:function(e){var t=this.scrollX,n=this.scrollY,i=e.deltaX,r=e.deltaY,a=(i>0?this.scrollMaxX-this.width:this.scrollMinX)-t,s=(r>0?this.scrollMaxY-this.height:this.scrollMinY)-n,o=e.consumeX(a),c=e.consumeY(s);this.attemptScrollByForEvent(o,c,e)},attemptScrollBy:function(e,t){this.stopMomentumScroll();var n=this._attemptScrollBy(e,t);return this.didScrollBy&&this.didScrollBy(e,t),n},attemptScrollByForEvent:function(e,t,n){n.isMomentumScroll||this.stopMomentumScroll();var i=this._attemptScrollBy(e,t);return this.didScrollBy&&this.didScrollBy(e,t,n),i},_attemptScrollBy:function(e,t){var n=this.scrollX,i=n+e;e=(i=O(i,this.scrollMinX,this.scrollMaxX,this.width))-n;var r=this.scrollY,a=r+t;return t=(a=O(a,this.scrollMinY,this.scrollMaxY,this.height))-r,(e||t)&&this._scrollBy(e,t),0!==e||0!==t},validateScrollPosition:function(){var e=0;if(!this._s_isValidatingScrollPosition){this._s_isValidatingScrollPosition=!0;for(var t=!1;this._attemptScrollBy(0,0);)if(t=!0,e++>10){d.b.warn("Could not validate scroll position.Minimums: "+this.scrollMinX+","+this.scrollMinY+".Maximums: "+this.scrollMaxX+","+this.scrollMaxY+".Current: "+this.scrollX+", "+this.scrollY);break}return this._s_isValidatingScrollPosition=!1,t}},scrollBy:function(e,t){this.stopMomentumScroll(),this._internalScrollBy(e,t)},_internalScrollBy:function(e,t){this.canScrollHorizontally||(e=0),this.canScrollVertically||(t=0),this._scrollBy(e,t),this.didScrollBy&&this.didScrollBy(e,t)},_scrollBy:function(e,t){e&&(this.scrollX+=e),t&&(this.scrollY+=t)},didScrollBy:null,pageUp:function(){this.attemptScrollBy(0,-this.height)},pageDown:function(){this.attemptScrollBy(0,this.height)},pageLeft:function(){this.attemptScrollBy(-this.width,0)},pageRight:function(){this.attemptScrollBy(this.width,0)},scrollTo:function(e,t){var n=0;void 0!==e&&(e/=100,n=this.scrollX,n=this.scrollWidth*e+this.scrollMinX-n);var i=0;void 0!==t&&(t/=100,i=this.scrollY,i=this.scrollHeight*t+this.scrollMinY-i),this.attemptScrollBy(n,i)},viewport:Object(s.b)(Object(a.b)(c.a)),_updateViewport:Object(o.f)("viewport","scrollX","scrollY","width","height",function(e,t,n,i,r){e.beginBatchSet().set("x",t).set("y",n).set("width",i).set("height",r).end()}),scrollToRect:function(e){var t=this.viewport,n=0;e.isLeftOf(t)?n=e.x-t.x:e.isRightOf(t)&&(n=e.right-t.right);var i=0;e.isAbove(t)?i=e.y-t.y:e.isBelow(t)&&(i=e.bottom-t.bottom),this.attemptScrollBy(n,i)},hasMomentum:Object(s.b)({readOnly:!0,get:function(){return null!==this._momentumRAF}}),_initialMomentumValuesX:null,_initialMomentumValuesY:null,_previousTimestamp:null,_momentumRAF:null,beginMomentumScroll:function(e){var t=this._initialMomentumValuesX;t||(t=this._initialMomentumValuesX={});var n=this._initialMomentumValuesY;n||(n=this._initialMomentumValuesY={});var i=Object(u.a)(this._momentumTick,this);t.initialVelocity=e.x,n.initialVelocity=e.y,t.initialPosition=this.normalizedX,n.initialPosition=this.normalizedY,t.initialTimestamp=n.initialTimestamp=this._previousTimestamp=performance.now(),this._momentumRAF=Object(l.a)(i),this.propertyChanged("hasMomentum")},stopMomentumScroll:function(){var e=this._momentumRAF;null!==e&&(cancelAnimationFrame(e),this._momentumRAF=null,this.propertyChanged("hasMomentum"))},_momentumTick:function(){var e=performance.now(),t=e-this._previousTimestamp;this._previousTimestamp=e;var n=this.width,i=this.height,r=this._initialMomentumValuesX,a=this._initialMomentumValuesY,s=this.normalizedX,o=this.normalizedY,c=this.normalizedMaxX,d=this.normalizedMaxY,h=s;this.canScrollHorizontally&&(h=this.calculatePositionComponentFromElapsedTime(e,s,r,c,n));var p=o;this.canScrollVertically&&(p=this.calculatePositionComponentFromElapsedTime(e,o,a,d,i));var f=h-s,g=p-o,m=f/t,v=g/t;Math.abs(m)>.01||Math.abs(v)>.01?this._momentumRAF=Object(l.a)(Object(u.a)(this._momentumTick,this)):(f=O(h,0,c,n)-s,g=O(p,0,d,i)-o,this._momentumRAF=null),this._internalScrollBy(f,g),null===this._momentumRAF&&this.propertyChanged("hasMomentum")},calculatePositionComponentFromElapsedTime:function(e,t,n,i,r){var a=n.initialVelocity,s=n.initialPosition,o=n.initialTimestamp,c=e-o,l=void 0,u=O(t,0,i,r);if(t===u){var d=O(l=function(e,t,n){return e+(C(t,n)-C(t,0))}(s,a,c),0,i,r);if(l!==d){var h=e-o;n.initialTimestamp=o+h,n.initialPosition=d,n.initialVelocity=function(e,t){return e*Math.pow(w,t)}(a,h)}}else l=function(e,t,n){return(e+.31*(t*=5e3)*(n/=1e3))*Math.exp(20*-n/1.6)}(s-u,a,c)+u;return l},__superMap:{_$Zt$init:"init",_$gs$gestureRecognizerShouldReceive:"gestureRecognizerShouldReceive",_$qq$gestureRecognizerShouldRequireFailureOf:"gestureRecognizerShouldRequireFailureOf",_$2Lb$dispose:"dispose"}};function C(e,t){return e*Math.pow(w,t)/Math.log(w)}function O(e,t,n,i){var r=Math.min(e,n-i);return Math.max(r,t)}},function(e,t,n){"use strict";var i=n(80),r=n(193),a=n(175),s=n(180),o=n(41),c=n(121),l=n(1179),u=n(36),d=n(129),h=n(777),p=i.a.extend(d.a,{source:null,_map:null,_keys:null,init:function(e,t){this.source=e;var n=this._map=e._map;this._keys=t||Object.keys(n),this.__s._$91$init.call(this)},moveToNext:function(){return this._keys.pop(),this},isValid:Object(o.c)({readOnly:!0,get:function(){return!!this._keys.length}}),_getCurrentItem:function(){var e=this._keys;return this._map[e[e.length-1]]},value:Object(o.c)({get:function(){return this.source.decode(this.encodedValue)},set:function(e){this.encodedValue=this.source.encode(e)}}),encodedValue:Object(o.c)({get:function(){return this._getCurrentItem()},set:function(e){var t=this._getCurrentItem();return this.source.encodedRemove(t),this.source.encodedAdd(e),this._keys.pop(),this._keys.push(Object(c.a)(e)),e}}),clone:function(){return this.constructor.create(this.source,Object(h.a)(this._keys))},remove:function(){var e=this.get("value"),t=this.source.remove(e);return this.moveToNext(),t},add:function(e){return this._keys.pop(),this._keys.push(Object(c.a)(e)),this.source.add(e)},__superMap:{_$91$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"SetIterator"}}),f=n(34);n.d(t,"a",function(){return g});var g=i.a.extend(r.a,a.a,u.a,{init:function(){var e=arguments;this.__s._$Gu$init.apply(this,e),this._previousSerializer=this.serializer},_map:Object(s.b)(Object),length:Object(o.c)({readOnly:!0,defaultValue:0}),size:Object(o.c)({readOnly:!0,get:function(){return this.length}}),encodedAdd:function(e){var t=Object(c.a)(e),n=this._map;return!n.hasOwnProperty(t)&&(n[t]=e,this._length++,!0)},encodedRemove:function(e){var t=Object(c.a)(e),n=this._map;return!!n.hasOwnProperty(t)&&(delete n[t],this._length--,!0)},clear:function(){var e=this._map;for(var t in e)e.hasOwnProperty(t)&&delete e[t];this._length=0},has:function(){return this.contains.apply(this,arguments)},encodedContains:function(e){var t=Object(c.a)(e);return this._map.hasOwnProperty(t)},iteratorClass:Object(o.c)({readOnly:!0,defaultValue:p}),encodedToArray:function(){var e=this._map;return Object.keys(e).map(function(t){return e[t]})},clone:function(){return this.constructor.create({serializer:this.serializer,_map:Object(l.a)(this._map),length:this.length})},serializer:Object(f.b)(),_previousSerializer:null,_reencodeItemsWhenSerializerChanges:Object(u.f)({inputs:["serializer"],notifyOnCreate:!1,callback:function(e){var t=this._previousSerializer;if(t!==e){var n=this.encodedToArray();t&&(n=n.map(function(e){return t.decode(e)})),this.clear();var i=n,r=Array.isArray(i),a=0;for(i=r?i:i[Symbol.iterator]();;){var s;if(r){if(a>=i.length)break;s=i[a++]}else{if((a=i.next()).done)break;s=a.value}var o=s;this.add(o)}}this._previousSerializer=e}}),__superMap:{_$Gu$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"CoreSet"}})},function(e,t,n){"use strict";var i=n(80),r=n(32),a=n(54),s=n(1185),o=n(41),c=n(180),l=n(65),u=n(1169),d=n(121),h=n(1191),p=n(152),f=n(69),g=n(78),m=n(408),v=n(1232),_=n(1139),b=v.a.extend({transactions:Object(o.c)({get:function(){return this._array}}),add:function(e){var t=arguments;if(this.__s._$An$add.apply(this,t)){var n=e.storeIds;if(n)for(var i=this._storeIdSet,r=0,a=n.length;r<a;r++){var s=n[r],o=i[s];o||(o=i[s]=_.a.create()),o.add(e)}}},remove:function(e){var t=arguments;if(this.__s._$MX$remove.apply(this,t)){var n=e.storeIds;if(n)for(var i=this._storeIdSet,r=0,a=n.length;r<a;r++){var s=n[r],o=i[s];o&&(o.remove(e),0===o.length&&delete i[s])}}},containsStoreId:function(e){var t=this._storeIdSet;if(t.hasOwnProperty(e)){var n=t[e];return n&&n.length>0}return!1},getTransactionsForStoreId:function(e){var t=this._storeIdSet;if(t.hasOwnProperty(e)){var n=t[e];return n&&n.toArray()}},_storeIdSet:Object(c.b)(Object),__superMap:{_$An$add:"add",_$MX$remove:"remove"},staticMembers:{__QUALIFIED_CLASS_NAME__:"TransactionList"}}),y=n(226);n.d(t,"a",function(){return w});var I,w=i.a.extend({process:Object(r.c)(a.a),addTransaction:function(e){return!this.supportsBulkTransactions&&this.isBulkTransaction(e)?this.addTransactions(this.splitTransaction(e)):(this._pendingTransactions.add(e),this._process(),e)},addTransactions:function(e){for(var t=0,n=e.length;t<n;t++)this._pendingTransactions.add(e[t]);return this._process(),e},sendTransaction:function(e){var t=Object(f.b)();return t||Object(l.b)("No DataManager to receive transaction."),e.finally(this._transactionDidFinish.bind(this,e)).catch(u.a),t.sendTransaction(e),this._transactionsSentDuringProcess.push(e),e},removeTransaction:function(e){return this._transactionsRemovedDuringProcess.push(e),e},cancelTransaction:function(e){return e.cancel(),this._transactionsRemovedDuringProcess.push(e),e},canSendTransaction:function(e){var t=Object(d.a)(e),n=this._transactionDependencies[t];if(n)for(var i=0,r=n.length;i<r;i++)if(n[i].status!==m.a.COMPLETED)return!1;return!0},linkTransactions:function(e,t){var n=this._transactionDependencies,i=Object(d.a)(t),r=n[i];r||(r=n[i]=I&&I.pop()||[]),r.push(e)},splitTransaction:function(e){e.status===m.a.ACTIVE&&Object(l.b)("CW.Data.TransactionProcessor#splitTransaction: Can not split a transaction that is already active.",{transaction:e});for(var t=e.changes,n=[],i=0,r=t.length;i<r;i++){var a=p.a.create();a.recordChange(t.objectAt(i));var o=m.a.create({changes:a,operation:a.operation});n[i]=o}return s.a.all(n).then(function(t){e.complete(t)},function(t){e.fail(t)}),this._transactionsRemovedDuringProcess.push(e),n},splitTransactions:function(e){var t,n=e.length;if(1===n)t=this.splitTransaction(e[0]);else{t=[];for(var i=0;i<n;i++){var r=this.splitTransaction(e[i]);Object(h.a)(t,r)}}return t||null},supportsBulkTransactions:Object(o.c)(!0),isBulkTransaction:function(e){var t=e.operation;return t&&t.type===f.a.WRITE.BULK},getNetworkStatus:function(e,t){e||Object(l.b)("CW.Data.TransactionProcessor#getNetworkStatus: No model class provided.",{dataManager:this}),t||Object(l.b)("CW.Data.TransactionProcessor#getNetworkStatus: No primary key provided.",{dataManager:this,modelClass:e});var n=g.a.getStoreIdForPrimaryKey(e,t);return this._activeTransactions.containsStoreId(n)?y.a.ACTIVE.TRANSMITTING:this._pendingTransactions.containsStoreId(n)?y.a.ACTIVE.QUEUED:y.a.IDLE},getActiveTransactions:function(e,t){e||Object(l.b)("CW.Data.TransactionProcessor#getActiveTransactions: No model class provided.",{dataManager:this}),t||Object(l.b)("CW.Data.TransactionProcessor#getActiveTransactions: No primary key provided.",{dataManager:this,modelClass:e});var n,i=g.a.getStoreIdForPrimaryKey(e,t),r=this._activeTransactions;r.containsStoreId(i)&&(n=r.getTransactionsForStoreId(i).slice(0));var a=this._pendingTransactions;return a.containsStoreId(i)&&(n=n||[]).push.apply(n,a.getTransactionsForStoreId(i)),n},_pendingTransactions:Object(c.b)(b),_activeTransactions:Object(c.b)(b),_transactionsSentDuringProcess:Object(c.b)(Array),_transactionsRemovedDuringProcess:Object(c.b)(Array),_transactionDependencies:Object(c.b)(Object),_process:function(){if(!this._isProcessing){this._isProcessing=!0;var e=this._pendingTransactions,t=this._activeTransactions;this.process(e.transactions,t.transactions),this._isProcessing=!1;var n=this._transactionsSentDuringProcess,i=n.length;if(i>0){for(var r=0;r<i;r++){var a=n[r];e.remove(a),t.add(a)}n.length=0}var s=this._transactionsRemovedDuringProcess,o=s.length;if(o>0){for(var c=0;c<o;c++){var l=s[c];e.remove(l),t.remove(l)}s.length=0}}},_transactionDidFinish:function(e){this._activeTransactions.remove(e),function(e,t){var n=Object(d.a)(t),i=e[n];Array.isArray(i)&&(i.length=0,(I||(I=[])).push(i)),delete e[n]}(this._transactionDependencies,e),0!==this._pendingTransactions.length&&this._process()},staticMembers:{__QUALIFIED_CLASS_NAME__:"TransactionProcessor"}})},function(e,t,n){"use strict";var i=n(779),r=n(180),a=n(184),s=n(789),o=n(189),c=n(800),l=n(34),u=n(36),d=n(1184),h=n(831),p={mixinDependencies:[n(217).a],staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isBeingPressed",truevalue:"cw-being-pressed",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isBeingHovered",truevalue:"cw-being-hovered",attributes:{}}]}}},isBeingPressed:Object(l.b)(!1),isBeingHovered:Object(l.b)(!1),isPointerActivationDisabled:Object(l.b)(!1),pointerActivate:function(e){},pointerHitTest:function(e){var t=document.elementFromPoint(e.clientX,e.clientY);return this.element.contains(t)},pointerDown:function(e){return!this.isPointerActivationDisabled&&0===e.button&&!!this.pointerHitTest(e)&&(this.setPointerCapture(e.pointerId),this.updateHoverPressState(e),!0)},pointerOut:function(e){return this.updateHoverPressState(e),!1},pointerOver:function(e){return this.updateHoverPressState(e),!1},pointerUp:function(e){var t=!1;if(this.getPointerCapture(e.pointerId)!==this?t=!0:this.pointerHitTest(e)?(this.isDisabled||0!==e.button)&&(t=!0):t=!0,t)return this.releasePointerCapture(e.pointerId),this.updateHoverPressState(e),!1;this.releasePointerCapture(e.pointerId);var n=this.isBeingPressed;return this.updateHoverPressState(e),n&&this.pointerActivate(e),!0},pointerMove:function(e){return this.updateHoverPressState(e),this.getPointerCapture(e.pointerId)===this},setPointerCapture:function(e){var t=arguments;return this._capturedPointerId=e,this.sendEvent("lockCursor",this.getPath("style.cursor")),this.__s._$1rr$setPointerCapture.apply(this,t)},releasePointerCapture:function(e){var t=arguments;return this._capturedPointerId=NaN,this.sendEvent("releaseCursor"),this.__s._$1yA$releasePointerCapture.apply(this,t)},cancelPointerInteraction:function(){var e=this._capturedPointerId;isNaN(e)||this.releasePointerCapture(e),this.beginBatchSet().setIfChanged("isBeingPressed",!1).setIfChanged("isBeingHovered",!1).end()},updateHoverPressState:function(e){var t=Boolean("pointerOut"!==e.cwType&&this.pointerHitTest(e)),n=this.getPointerCapture(e.pointerId)===this,i=this.isPointerActivationDisabled;this.beginBatchSet().setIfChanged("isBeingPressed",n&&t&&!i).setIfChanged("isBeingHovered",(n||t)&&!i).end()},_releasePointerCaptureWhenUnattached:Object(u.f)("isAttached","isPointerActivationDisabled",function(e,t){e&&!t||this.cancelPointerInteraction()}),dispose:function(){var e=arguments;this.cancelPointerInteraction(),this.__s._$2Qe$dispose.apply(this,e)},__superMap:{_$1rr$setPointerCapture:"setPointerCapture",_$1yA$releasePointerCapture:"releasePointerCapture",_$2Qe$dispose:"dispose"}};n.d(t,"a",function(){return f});var f={mixinDependencies:[h.a,a.a,c.a,p,s.a],staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isPointerFocused",truevalue:"cw-is-pointer-focused",falsevalue:"",attributes:{}}],attributes:{"aria-haspopup":{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"ariaHasPopup",attributes:{},attribute:"aria-haspopup"},"aria-owns":{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"ariaOwns",attributes:{},attribute:"aria-owns"}}}}},isPointerActivationDisabled:Object(l.b)({readOnly:!0,binding:"isDisabled"}),isPointerFocused:Object(l.b)({type:Boolean,readOnly:!0,dependencies:["isFocused","_mayBePointerFocused"],get:Object.assign(function(){return this._mayBePointerFocused&&this.isFocused},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[1+n])&&i.internalGet(this,t[0+n])}})}),_mayBePointerFocused:Object(l.b)({type:Boolean,defaultValue:!1}),action:Object(l.b)({type:"string",defaultValue:"wasActivated"}),context:Object(l.b)({defaultValue:i.a}),contextKeys:Object(r.b)(["context"]),keyEquivalent:Object(l.b)({didChange:function(e){e&&this.sendEvent("registerKeyEquivalent",this)}}),isAttachedDidChange:Object(u.f)("isAttached",function(e){e&&this.keyEquivalent&&this.sendEvent("registerKeyEquivalent",this)}),performKeyEquivalent:function(e){var t=this.keyEquivalent,n=e.keyCode,i=n===t;return(i=i||t.some&&t.some(function(e){return e===n}))&&this.triggerButtonAction()},pointerDown:function(e){var t=arguments,n=this.__s._$300$pointerDown.apply(this,t);return e.preventDefault(),!this.isDisabled&&this.isFocusable&&(this._mayBePointerFocused=!0),n},keyUp:function(e){e.which!==o.a.SPACE||this.isDisabled||this.triggerButtonAction()},didBlur:function(){var e=arguments;this._mayBePointerFocused=!1,this.__s._$3B9$didBlur.apply(this,e)},pointerActivate:function(e){var t=arguments;this.__s._$3Et$pointerActivate.apply(this,t),this.triggerButtonAction()},delayAction:!1,triggerButtonAction:function(){return!this.isDisabled&&(this.sendEvent("buttonWillActivate",this),this.delayAction?Object(d.a)(this._actuallyTriggerButtonAction.bind(this),0):this._actuallyTriggerButtonAction(),!0)},_actuallyTriggerButtonAction:function(){if(this.target)this.callAction();else{for(var e=[this.action],t=this.contextKeys,n=0,i=t.length;n<i;n++)e.push(this[t[n]]);this.sendEvent.apply(this,e)}this.sendEvent("buttonDidActivate",this)},ariaRole:"button",ariaHasPopup:Object(l.b)(),ariaOwns:Object(l.b)(),__superMap:{_$300$pointerDown:"pointerDown",_$3B9$didBlur:"didBlur",_$3Et$pointerActivate:"pointerActivate"}}},function(e,t,n){"use strict";var i=n(839),r=n(34),a=n(180),s=n(80),o=n(1169),c=n(223),l=n(339),u=n(409),d=n(800),h=n(831),p=n(41),f=n(799),g=u.a.extend(d.a,h.a,{staticMembers:{className:"cw-ui-repeater-button",__QUALIFIED_CLASS_NAME__:"RepeaterButton"},period:r.b({defaultValue:16.66666667,didChange:function(e){this._timer.delay=e}}),_timer:p.c({strong:!0,defaultValue:a.b(f.a,{action:"callAction",timesToFire:1/0})}),pointerEnter:function(e){this._timer.start()},pointerLeave:function(e){this._timer.stop()}}).extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"ELEMENT",tagname:"div",classes:["arrow"]}],classes:[{type:"CLASSNAMEOUTLET",bindingtype:"DIRECTBINDING",name:"directionClassname",attributes:{}}],styles:{display:{type:"STYLEOUTLET",bindingtype:"IFBINDING",name:"isDisabled",truevalue:"none",falsevalue:"flex",attributes:{},unit:null,property:"display"}}}},className:"cw-ui-scroll-repeater-button",__QUALIFIED_CLASS_NAME__:"ScrollRepeaterButton"},action:"scrollInDirection",direction:r.b({defaultValue:c.a.NORTH}),directionClassname:r.b({readOnly:!0,dependencies:["direction"],get:Object.assign(function(){return"direction-"+this.direction.value+"°"},{__CW__getter:function(e,t,n,i){return"direction-"+i.internalGet(this,t[0+n]).value+"°"}})}),period:r.b({defaultValue:60})});n.d(t,"a",function(){return m});var m=i.a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"VIEWOUTLET",tagname:"view",name:"startScrollButton"},{type:"VIEWOUTLET",tagname:"view",name:"endScrollButton"}],classes:["cw-collection-view","cw-menu-list-view"],attributes:{tabindex:"1"}},itemViews:{type:"ELEMENT",tagname:"ext",classes:["collection-content"],styles:{position:"absolute",height:"100%",width:"100%"}}},className:"cw-ui-menu-list-view",__QUALIFIED_CLASS_NAME__:"MenuListView"},delegate:r.b({defaultValue:a.b(s.a.extend(l.a,{collectionViewDidScroll:o.a,collectionViewDidScrollInDirection:o.a}))}),endScrollButton:r.b({defaultValue:a.b(g.extend({direction:c.a.SOUTH})),downstreamBindings:{isDisabled:"(owner).endScrollButtonIsDisabled"}}),endScrollButtonIsDisabled:r.b({readOnly:!0,dependencies:["canScrollVertically","height","scrollMaxY"],get:Object.assign(function(){return!this.canScrollVertically||this.scrollMaxY===this.height},{__CW__getter:function(e,t,n,i){return!i.internalGet(this,t[0+n])||i.internalGet(this,t[2+n])===i.internalGet(this,t[1+n])}})}),startScrollButton:r.b({defaultValue:a.b(g.extend({direction:c.a.NORTH})),downstreamBindings:{isDisabled:"(owner).startScrollButtonIsDisabled"}}),startScrollButtonIsDisabled:r.b({readOnly:!0,dependencies:["canScrollVertically","scrollHeight","scrollMaxY"],get:Object.assign(function(){return!this.canScrollVertically||this.scrollHeight===this.scrollMaxY},{__CW__getter:function(e,t,n,i){return!i.internalGet(this,t[0+n])||i.internalGet(this,t[1+n])===i.internalGet(this,t[2+n])}})}),init:function(){var e=arguments;this.__s._$vE$init.apply(this,e),this.startScrollButton.target=this,this.endScrollButton.target=this,this.scrollInDirection=v},__superMap:{_$vE$init:"init"}}),v=function(e){this.delegate.collectionViewDidScrollInDirection(this,e.direction)}},function(e,t,n){"use strict";var i=n(191),r=[];r.toJSON=function(){if(this.length<=1)return this[0];for(var e=[],t=0,n=this.length;t<n;t++)e.push("*** Context "+(t+1)+": ***\n"+Object(i.a)(this[t]));return e.join("\n")};var a=n(208);function s(e,t,n){if(h){if(u.isExceptionHandlingFatal)return;h=!1}if(d)return e.apply(n,t);if(!u.isExceptionHandlingEnabled)return Object(a.c)(e,n,t);d=!0;try{return Object(a.c)(e,n,t)}catch(e){var i=r;i.length>0&&(i.push(e.context),i.reverse(),e.context=i.slice(),i.length=0),u.exceptionHandler(e),u.exceptionWasHandled=!0,u.isExceptionHandlingFatal&&(h=!0)}finally{d=!1}}function o(e){u=e||l}function c(){return u}n.d(t,"b",function(){return s}),n.d(t,"c",function(){return o}),n.d(t,"a",function(){return c});var l={isExceptionHandlingEnabled:!1},u=l,d=!1,h=!1},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n(54),r={mixinDependencies:[n(804).a],name:"MessagingFromUIChildProtocol",version:.2,isReadyToBeDisplayed:i.a.define()}},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var i=n(788),r=n(34),a=n(93),s=n(342),o=n(343),c=n(344),l=i.a.extend(s.a,o.a,{viewClass:c.a,view:r.b({downstreamBindings:{isActive:"(owner).isActive"}}),iframeView:r.b(a.c("view")),staticMembers:{__QUALIFIED_CLASS_NAME__:"HostedApplicationViewController"}})},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var i=n(177),r=n(41),a=n(1185),s=n(1184),o=n(1187),c=n(1195),l=n(430),u=Object(i.b)("IFrameDownloadCompletionStatus",function(e){e("FAILED"),e("SURVIVED")}),d=l.a.extend({init:function(){var e=arguments;this._availableIFramePool=[],this._materializedIFrames=[],this.__s._$b8$init.apply(this,e),this.maxConcurrentActions=this.maximumConcurrentIFrames},maximumConcurrentIFrames:Object(r.c)({defaultValue:10,set:function(e){return this.maxConcurrentActions=e,e}}),msToWaitForDownloadToStart:5e3,downloadFromURL:function(e){return this.enqueue(e)},downloadFromURLs:function(e){var t=e.map(this.downloadFromURL,this);return a.a.all(t)},cleanup:function(){this._materializedIFrames.forEach(function(e){e.parentElement.removeChild(e)})},_availableIFramePool:Object(r.c)({type:Array,readOnly:!0}),_materializedIFrames:Object(r.c)({type:Array,readOnly:!0}),_materializeIFrameForPool:function(){var e=document.createElement("iframe");return e.style.display="none",document.body.appendChild(e),this._materializedIFrames.push(e),e},_acquireIFrame:function(){var e=this._availableIFramePool;return 0===e.length?this._materializeIFrameForPool():e.pop()},_returnToIFramePool:function(e){this._availableIFramePool.push(e)},processAction:function(e){var t=this._acquireIFrame();return function(e,t,n){var i=a.a.create();Object(s.a)(function(){return i.resolve(u.SURVIVED)},n);var r=a.a.create(),l=function(){return r.resolve(u.FAILED)};return Object(o.a)(e,"load",l),e.id=t,e.src=t,a.a.race([i,r]).finally(function(){Object(c.a)(e,"load",l)})}(t,e,this.msToWaitForDownloadToStart).finally(this._returnToIFramePool.bind(this,t))},__superMap:{_$b8$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"IFrameDownloader"}})},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n(34),r=n(93),a=n(41),s=n(36),o=n(404),c={shouldPollEvenWhenNotAttached:i.b(!1),jobToDisplay:i.b({strong:!0,type:o.c}),jobProgress:i.b(r.c("jobToDisplay.jobProgress")),_currentlyPolledJob:a.c({strong:!0,type:o.c}),shouldPollAnyJobToDisplay:i.b({readOnly:!0,dependencies:["isAttached","shouldPollEvenWhenNotAttached"],get:Object.assign(function(){return this.isAttached||this.shouldPollEvenWhenNotAttached},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])||i.internalGet(this,t[1+n])}})}),_beginAndEndJobPolling:s.f("shouldPollAnyJobToDisplay","jobToDisplay","jobToDisplay.jobStatus",function(e,t,n){var i=Boolean(!this.isDisposing&&e&&n!==o.b.COMPLETED&&n!==o.b.FAILED)?t:null,r=this._currentlyPolledJob;r!==i&&(this._currentlyPolledJob=i,r&&r.endPolling(),i&&i.beginPolling())}),dispose:function(){var e=arguments;return this._beginAndEndJobPolling(),this.__s._$gs$dispose.apply(this,e)},__superMap:{_$gs$dispose:"dispose"}}},function(e,t,n){"use strict";n.d(t,"a",function(){return m});var i=n(80),r=n(41),a=n(34),s=n(65),o=n(1169),c=n(36),l=n(46),u=n(88),d=n(404),h=n(206),p=n(1003),f=n(83),g=n(154),m=i.a.extend(d.c,{addChildJob:function(e){this._childJobSet.add(e)&&this._scheduleInvalidation("_childJobs")},removeChildJob:function(e){this._childJobSet.remove(e)&&this._scheduleInvalidation("_childJobs")},removeAllChildJobs:function(){this._childJobs.length&&(this._childJobSet.clear(),this._scheduleInvalidation("_childJobs"))},numberOfChildren:r.c({get:function(){return this._childJobs.length}}),_childJobSet:r.c(function(){return new u.a}),_childJobs:a.b({readOnly:!0,get:function(){return this._childJobSet.items}}),_mutationObserversByChildJob:r.c(function(){return new Map}),_isPollingByChildJob:r.c(function(){return new Map}),_childJobInfos:Object(p.a)({source:"_childJobs",outputForInput:function(e){return l.c.getInstanceFromParams(e.jobStatus,e.jobProgress,e.jobSize)},outputDidEnter:function(e){l.c.retainInstance(e)},outputDidExit:function(e){l.c.releaseInstance(e)},inputDidEnter:function(e,t){var n=this._mutationObserversByChildJob,i=this._isPollingByChildJob;n.set(e,e.listen("jobProgress","jobStatus","jobSize",function(){t(this)})),this.isPolling&&e.hasMixin(h.b)&&!i.get(e)&&(i.set(e,!0),e.beginPolling())},inputDidExit:function(e){var t=this._mutationObserversByChildJob,n=this._isPollingByChildJob;t.get(e).disconnect(),t.delete(e),this.isPolling&&e.hasMixin(h.b)&&n.get(e)&&(n.delete(e),e.endPolling())},inputDidMutate:function(){this._scheduleInvalidation("_childJobInfos")}}),_scheduleInvalidation:function(e){this["_"+e+"InvalidationTimeout"]||(this["_"+e+"InvalidationTimeout"]=Object(g.b)(this._doInvalidation,e))},_doInvalidation:Object(f.a)(function(e){this.isDisposed||(this["_"+e+"InvalidationTimeout"]=void 0,this.propertyChanged(e))}),jobStatus:a.b({readOnly:!0,dependencies:["_childJobInfos"],get:Object.assign(function(){var e=l.c.getAutodisposingInstanceFromMap(this._childJobInfos,E);return e.some(A)?I:e.every(w)?v:e.every(S)?_:e.every(O)?y:e.some(C)?b:void s.b("Found unknown progress situation in child jobs of CompoundLongJob.")},{__CW__getter:function(e,t,n,i){var r=l.c.getAutodisposingInstanceFromMap(i.internalGet(this,t[0+n]),E);return r.some(A)?I:r.every(w)?v:r.every(S)?_:r.every(O)?y:r.some(C)?b:void s.b("Found unknown progress situation in child jobs of CompoundLongJob.")}})}),getFailedJobs:function(){return this._childJobs.filter(function(e){return e.jobStatus===I})},jobProgress:a.b({readOnly:!0,dependencies:["jobStatus","jobSize","_childJobInfos"],get:Object.assign(function(){var e=this.jobStatus,t=this._childJobInfos;if(!t.every(T)){if(e===v)return 0;if(e===y)return 1;for(var n,i=0,r=0;n=t[r];r++)i+=(n[1]||0)*(n[2]||0);var a=Math.min(1,Math.max(0,i/this.jobSize));return isNaN(a)?void 0:a}},{__CW__getter:function(e,t,n,i){var r=this.jobStatus,a=this._childJobInfos;if(!a.every(T)){if(r===v)return 0;if(r===y)return 1;for(var s,o=0,c=0;s=a[c];c++)o+=(s[1]||0)*(s[2]||0);var l=Math.min(1,Math.max(0,o/i.internalGet(this,t[1+n])));return isNaN(l)?void 0:l}}})}),jobSize:a.b({readOnly:!0,dependencies:["_childJobInfos"],get:function(){var e=this._childJobInfos;if(!e.every(M)){for(var t,n=0,i=0;t=e[i];i++)n+=t[2]||0;return n}}}),isReceivingPeriodicJobProgressUpdates:a.b({readOnly:!0,dependencies:["isPolling","_childJobInfos"],get:Object.assign(function(){return Boolean(this.isPolling&&this._childJobInfos.length)},{__CW__getter:function(e,t,n,i){return Boolean(i.internalGet(this,t[0+n])&&i.internalGet(this,t[1+n]).length)}})}),beginPolling:function(){this._beginPollingCount++},endPolling:function(){this._beginPollingCount--},staticMembers:{pollInstances:o.a,__QUALIFIED_CLASS_NAME__:"CompoundLongJob"},_startOrStopChildJobPolling:c.f("isPolling",function(){var e=this.isPolling;if(Boolean(this._lastIsPolling)!==e){this._lastIsPolling=e;var t=this._childJobs,n=this._isPollingByChildJob;if(e)for(var i,r=0;i=t[r];r++)i.hasMixin(h.b)&&!n.get(i)&&(n.set(i,!0),i.beginPolling());else for(var a,s=0;a=t[s];s++)a.hasMixin(h.b)&&n.get(a)&&(n.delete(a),a.endPolling())}})}),v=d.b.NOT_STARTED,_=d.b.PREPARING,b=d.b.IN_PROGRESS,y=d.b.COMPLETED,I=d.b.FAILED,w=function(e){return e===v},S=function(e){return e===_||w(e)},C=function(e){return e===b||O(e)},O=function(e){return e===y},A=function(e){return e===I},E=function(e){return e[0]},T=function(e){return isNaN(e[1])},M=function(e){return isNaN(e[2])}},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n(34),r=n(1178),a=n(125),s=n(1184),o=n(334),c={hideDuration:i.b(175),showDuration:i.b(175),hiddenScale:i.b(.95),pathToFadedView:"view",pathToScaledView:"contentController.view",hiddenTransform:i.b({defaultValue:null,dependencies:["hiddenScale"],writeDependencies:[],get:function(e){if(e)return e;var t=this.hiddenScale;return"scale3d("+t+", "+t+", 1)"},set:r.a}),hide:function(){var e=arguments,t=this.getPath(this.pathToFadedView),n=this.getPath(this.pathToScaledView);if(!t||!n)return this.__s._$td$hide.apply(this,e);var i=t.element,r=n.element;if(!i||!r)return this.__s._$td$hide.apply(this,e);if(!i.parentNode)return this.__s._$td$hide.apply(this,e);var c=this.hideDuration,l=this.hiddenTransform,u="temp"+(Date.now()+String(Math.random()).slice(2));r.classList.add(u);var d=Object(o.a)(i);r.classList.remove(u),d.style.pointerEvents="none",d.setAttribute("aria-hidden","true"),i.parentNode.insertBefore(d,i.nextSibling);var h=this.__s._$td$hide.apply(this,e),p=a.a(d),f=a.a(d.getElementsByClassName(u)[0]);return p.set("transition","opacity "+c+"ms ease-in"),f.set("transition","transform "+c+"ms ease-in"),d.offsetWidth,f.set("transform",f.get("transform")+" "+l),p.set("opacity",0),s.a(function(){return d.parentNode.removeChild(d)},c),h},show:function(){var e=arguments,t=this.__s._$1ck$show.apply(this,e),n=this.showDuration,i=this.hiddenTransform,r=this.getPath(this.pathToFadedView);if(!r)return t;var a=r.style,o=r.element;if(!o||!o.parentNode)return t;var c=this.getPath(this.pathToScaledView);if(!c)return t;var l=c.style,u=l.get("transform"),d=l.getInline("transform");a.set("opacity",0),l.set("transform",u+" "+i),o.offsetWidth,a.set("transition","opacity "+n+"ms ease-out"),l.set("transition","transform "+n+"ms ease-out"),o.offsetWidth,a.set("opacity",1);var h=u+" scale3d(1, 1, 1)";return l.set("transform",h),s.a(function(){a.clear("transition").clear("opacity"),l.clear("transition");var e=l.getInline("transform");l.set("transform",h),l.getInline("transform")===e?l.set("transform",d):l.set("transform",e)},n),t},__superMap:{_$td$hide:"hide",_$1ck$show:"show"}}},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return z});var i,r,a=n(1185),s=n(1182),o=n(784),c=n(69),l=n(34),u=n(180),d=n(1184),h=n(41),p=n(1202),f=n(1151),g=n(1105),m=n(66),v=n(156),_=n(107),b=n(559),y=n(524),I=n(1106),w=n(535),S=n(523),C=n(166),O=n(148),A=n(284),E=n(528),T=n(268),M=n(159),D=n(224),L=n(33),N=n(147),P=n(12),R=n(545),x=n(531),F=n(536),k=n(529),V=n(544),j=n(542),B=n(541),U=n(543),W=n(525),G=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},H=(i=a.a,(r=function(e){var t=i.create();try{e(t.resolve.bind(t),t.reject.bind(t))}catch(e){t.reject(e)}return t}).all=i.all.bind(i),r.race=i.race.bind(i),r.resolve=i.resolve.bind(i),r.reject=i.reject.bind(i),r);function $(e){return function(){var t=e.apply(this,arguments);return new H(function(e,n){return function i(r,a){try{var s=t[r](a),o=s.value}catch(e){return void n(e)}if(!s.done)return H.resolve(o).then(function(e){i("next",e)},function(e){i("throw",e)});e(o)}("next")})}}var z={mixinDependencies:[b.a,f.a],operationHandlers:s.a([w.a,S.a,R.a,x.a,F.a,k.a,V.a,U.a,y.a,j.a,B.a].map(function(e){return e.create()})),init:function(){var e=arguments;this.__s._$e5$init.apply(this,e),o.b.info("INIT: CPL DataManager")},startup:function(e){var t=this,n=arguments;if(this.startupPromise&&!e)return this.startupPromise;this.startupDidComplete=!1;var i=this.__s._$ni$startup.apply(this,n);return this.startupPromise=i.then(function(){return t._startup()})},shutdownCpl:function(){this.changesetMode=I.a.NONE,this.indexingState=void 0,this.cplZone=void 0},isStartupFetchingCplZone:!0,isStartupFetchingCplContainers:!0,_startup:function(){var e=this;return $(regeneratorRuntime.mark(function t(){var n,i,r,s,o,l,u,d;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isStartupFetchingCplZone){t.next=19;break}return t.next=3,e.getCurrentSyncZone();case 3:if(n=t.sent){t.next=7;break}throw e.noZoneError=!0,new W.a;case 7:return e.cplZone=n,t.next=10,e._checkIndexingState();case 10:if(!e.isStartupFetchingCplContainers){t.next=19;break}return i=e.cplSystemContainers.storeIds.map(e.constructor.getPrimaryKeyForStoreId),r=c.b(),s=r.cplSystemContainersMap,o=s.get(L.a.PredefinedName.MOMENTS),l=M.a.maxMediasForRangeRequest,u=M.a.numRangeRequestsToPrefetchForMoments,d=u*l-1,o.loadMediasForRange(0,d),t.next=19,a.a.all([L.a.load({primaryKeys:i,isDelayable:!1}),L.a.list({parentPK:e.cplRootContainer.pk})]);case 19:e.startupDidComplete=!0,e._setupChangesetListening();case 21:case"end":return t.stop()}},t,e)}))()},fetchZonesForShareListingPage:function(){var e=this;return $(regeneratorRuntime.mark(function t(){var n,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=g.a.findOrCreatePlaceholder(CloudKit.DatabaseScope.PRIVATE),i=g.a.findOrCreatePlaceholder(CloudKit.DatabaseScope.SHARED),e.next=4,a.a.all([n.fetchChanges(),i.fetchChanges()]);case 4:e.sent.forEach(P.a.ingestResponse);case 6:case"end":return e.stop()}},t,e)}))()},getCurrentSyncZone:function(){var e=this;return $(regeneratorRuntime.mark(function t(){var n,i,r,s,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.a.list({scope:CloudKit.DatabaseScope.PRIVATE});case 2:if(n=t.sent,i=e.cplZoneID.zoneName,0!==(r=n.filter(function(e){return e.zoneID.zoneName.startsWith(i)}).toArray()).length){t.next=7;break}return t.abrupt("return");case 7:return t.next=9,a.a.all(r.map(function(e){return N.a.load({zonePK:e.pk})}));case 9:if(s=t.sent,-1!==(o=s.findIndex(function(e){return!e||e.enabled||e.availabilityType===T.a.PUBLISHED}))){t.next=13;break}return t.abrupt("return");case 13:return t.abrupt("return",r[o]);case 14:case"end":return t.stop()}},t,e)}))()},findModelFromRecordNameOnly:function(e,t){for(var n=v.a.getPrimaryKeyWithZonePK(e,t),i=v.a.recordModelClasses,r=0,a=i.length;r<a;r++){var s=i[r].find(n);if(s)return s}},userRecordName:l.b({dependencies:["cplZone"],readOnly:!0,type:String,get:function(){return this.getPath("cplZone.zoneID.ownerRecordName")},didChange:function(){this.updateAllZoneScopes()}}),updateAllZoneScopes:function(){var e=this,t=m.a;t.findAll().forEach(function(n){var i=n.getDataHash(),r=G({},i,{scope:i.originalScope});!0===e.isRecordOwnedByCurrentUser(n)&&(r.scope=CloudKit.DatabaseScope.PRIVATE),e.loadData(t,r,!1)})},cplZone:l.b({strong:!0,type:m.a}),cplZoneID:l.b({readOnly:!0,strong:!0,dependencies:["cplZone"],get:function(){var e=this.cplZone,t=(void 0===e?{}:e).zoneID;return void 0===t?this.getDefaultZoneID():t}}),getDefaultZoneID:function(){return _.a.create({zoneName:"PrimarySync"})},cplSystemContainers:l.b({dependencies:["cplZone"],readOnly:!0,get:function(){var e=this.cplZone;if(void 0!==e)return L.a.loadPredefinedContainers(e)}}),cplRootContainer:l.b({dependencies:["cplSystemContainers"],strong:!0,readOnly:!0,type:L.a,get:function(){var e=this.cplSystemContainers;if(void 0!==e)return e.objectAt(0)}}),cplSystemContainersMap:l.b({dependencies:["cplSystemContainers"],readOnly:!0,type:Map,get:function(){var e=this.cplSystemContainers;if(void 0!==e){var t=new Map,n=e,i=Array.isArray(n),r=0;for(n=i?n:n[Symbol.iterator]();;){var a;if(i){if(r>=n.length)break;a=n[r++]}else{if((r=n.next()).done)break;a=r.value}var s=a;t.set(s.recordName,s)}return t}}}),noZoneError:l.b(),cplZoneState:l.b({readOnly:!0,dependencies:["cplZone"],get:function(){var e=this.cplZone;if(void 0!==e){var t=N.a.getPrimaryKeyWithZonePK(e.pk,N.a.RECORD_NAME);return N.a.find(t)}}}),indexingState:l.b(),isIndexingStateRunningOnStartup:l.b(!1),isCplZoneReadable:l.b({readOnly:!0,dependencies:["cplZone","indexingState"],get:Object.assign(function(){return this.cplZone instanceof m.a.constructor&&this.indexingState===O.a.FINISHED},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])instanceof m.a.constructor&&i.internalGet(this,t[1+n])===O.a.FINISHED}})}),isCplZoneWritable:l.b({readOnly:!0,dependencies:["isCplZoneReadable","readOnly"],get:Object.assign(function(){return this.isCplZoneReadable&&!this.readOnly},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])&&!i.internalGet(this,t[1+n])}})}),readOnly:l.b({readOnly:!0,type:Boolean,dependencies:["cplZoneState"],get:function(){var e=this.cplZoneState;return"number"==typeof(void 0===e?{}:e).disabledTime}}),startupDidComplete:l.b(!1),startupPromise:null,transactionProcessor:l.b(u.b(E.a)),subscriptionState:l.b({defaultValue:A.a.NOT_SET,didChange:function(e){e===A.a.LISTENING&&this._setupCloudKitPush()}}),_checkIndexingState:function(){var e=this;return $(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,D.a.listFromZone(e.cplZone);case 3:e.indexingState=O.a.FINISHED,t.next=14;break;case 6:if(t.prev=6,t.t0=t.catch(0),t.t0.type===C.a.INDEXING_STATE_ERROR){t.next=10;break}throw t.t0;case 10:if(e._startPollingForIndexingState(t.t0),e.isIndexingStateRunningOnStartup){t.next=14;break}return e.isIndexingStateRunningOnStartup=!0,t.abrupt("return",a.a.reject(t.t0));case 14:case"end":return t.stop()}},t,e,[[0,6]])}))()},_startPollingForIndexingState:function(e){e.type===C.a.INDEXING_STATE_ERROR&&e.state===O.a.RUNNING.value?(this.indexingState=O.a.RUNNING,this._indexingStatePollingTimer=d.a(this._checkIndexingState.bind(this),M.a.indexingStatePollingInterval)):this.indexingState=O.a.FAILED},changesetMode:l.b(I.a.NONE),shouldListenForChangesets:l.b({readOnly:!0,dependencies:["changesetMode"],get:Object.assign(function(){return this.changesetMode!==I.a.NONE},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])!==I.a.NONE}})}),_setupChangesetListening:function(){var e=I.a;switch(this.changesetMode){case e.POLL:o.b.debug("CPL: polling for changesets."),this.resetUpdater();break;case e.PUSH:o.b.debug("CPL: manual push changeset listening setup."),this._hasSetupPush=!0,this.resetUpdater();break;case e.CLOUDKIT_PUSH:this._hasSetupPush||this.performOperation("createSubscription");break;case e.NONE:default:o.b.debug("CPL: NOT listening for changesets.")}},_setupCloudKitPush:function(){var t=this;if(!this._hasSetupPush){o.b.debug("CPL: setting up CloudKit push notifications...");var n=e.CloudKit.getDefaultContainer();n.registerForNotifications(),n.addNotificationListener(function(){o.b.debug("CPL: CloudKit.js push notification"),t.update()}),this._hasSetupPush=!0,this.resetUpdater(),o.b.debug("CPL: CloudKit push notifications setup.")}},_updatePromise:null,update:function(){var e=this;if(this._updatePromise)return this._updatePromise;var t=c.b();return t.cplZone?this._updatePromise=t.cplZone.fetchRecordZoneChanges().then(P.a.ingestResponse).finally(function(){e._updatePromise=null,e.shouldListenForChangesets&&e.resetUpdater()}):a.a.resolve()},_updateInterval:h.c({get:function(){return this.isUserIdle?M.a.changesetIntervalWhileIdle:this._hasSetupPush?M.a.changesetIntervalWithPush:M.a.changesetIntervalWithoutPush}}),_hasSetupPush:!1,_updaterTimer:null,isUpdaterEnabled:l.b(!1),enableUpdater:function(){return o.b.debug("CPL: changeset polling reset to every "+this._updateInterval/1e3+"secs"),this._updaterTimer||(this._updaterTimer=p.a(this.update.bind(this),this._updateInterval)),this.isUpdaterEnabled=!0},disableUpdater:function(){return this._updaterTimer=e.clearInterval(this._updaterTimer),this.isUpdaterEnabled=!1},resetUpdater:function(){this.shouldListenForChangesets&&this.startupDidComplete&&(this._updaterTimer&&this.disableUpdater(),this.enableUpdater())},__superMap:{_$e5$init:"init",_$ni$startup:"startup"}}}).call(this,n(6))},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return D});var i,r,a=n(1185),s=n(1152),o=n(34),c=n(784),l=n(65),u=n(1172),d=n(1182),h=n(96),p=n(92),f=n(399),g=n(345),m=n(560),v=n(1153),_=n(520),b=n(521),y=n(547),I=n(546),w=n(170),S=n(66),C=n(530),O=n(534),A=n(914),E=n(270),T=(i=a.a,(r=function(e){var t=i.create();try{e(t.resolve.bind(t),t.reject.bind(t))}catch(e){t.reject(e)}return t}).all=i.all.bind(i),r.race=i.race.bind(i),r.resolve=i.resolve.bind(i),r.reject=i.reject.bind(i),r);function M(e){return function(){var t=e.apply(this,arguments);return new T(function(e,n){return function i(r,a){try{var s=t[r](a),o=s.value}catch(e){return void n(e)}if(!s.done)return T.resolve(o).then(function(e){i("next",e)},function(e){i("throw",e)});e(o)}("next")})}}var D={mixinDependencies:[_.a,s.a,b.a],feedbackService:o.b({report:function(e,t){return c.b.debug("FakeFeedback: "+e,t)}}),isStartupEnsuringCloudKitJS:!0,cloudKitJsScriptInfo:void 0,startup:function(){var e=this;return M(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isStartupEnsuringCloudKitJS){t.next=13;break}return t.prev=1,t.next=4,Object(E.b)();case 4:e.cloudKitJsScriptInfo=t.sent,e.onCloudKitJsScriptLoaded(),t.next=13;break;case 8:throw t.prev=8,t.t0=t.catch(1),e.cloudKitJsScriptInfo=t.t0,e.onCloudKitJsScriptFailed(),t.t0;case 13:case"end":return t.stop()}},t,e,[[1,8]])}))()},onCloudKitJsScriptLoaded:function(){var t=this.cloudKitJsScriptInfo,n=t.status,i=t.retries,r=e.CloudKit.VERSION;switch(n){case E.a.LOADED_VIA_RETRY:this.feedbackService.report("cloudKitJSLoadedAfterRetries",{retries:i}),c.b.info("CloudKit.js (v"+r+") successfully loaded after "+i+" retries.");break;case E.a.LOADED:default:c.b.info("CloudKit.js (v"+r+") successfully loaded via external script tag.")}},onCloudKitJsScriptFailed:function(){var e=this.cloudKitJsScriptInfo,t=e.status,n=e.retries;switch(e.err,t){case E.a.LOADED_BUT_BROKEN:this.feedbackService.report("cloudKitJSLoadedButBroken",{retries:n});break;case E.a.FAILED_TO_LOAD:default:this.feedbackService.report("CouldNotLoadCloudKitJS")}this.notifyUserCloudKitJSIsUnavailable()},notifyUserCloudKitJSIsUnavailable:function(){throw new l.a("CloudKit.js is missing")},userRecordName:o.b(),isRecordOwnedByCurrentUser:function(e){var t=this.userRecordName;return void 0!==t&&u.a(e,"zoneID.ownerRecordName")===t},operationHandlers:d.a([y.a,I.a,C.a,O.a].map(function(e){return e.create()})),ckEnvironment:o.b(A.a.bindingFor("ckEnvironment")),ckContainerId:o.b(A.a.bindingFor("ckContainerId")),apnsEnvironment:o.b(A.a.bindingFor("apnsEnvironment")),serviceUrl:o.b("https://p01-ckdatabasews.icloud.com"),_databases:o.b({readOnly:!0,dependencies:["serviceUrl","apnsEnvironment","ckEnvironment","ckContainerId"],get:function(){var e=this,t=this.apnsEnvironment,n=this.ckContainerId,i=this.ckEnvironment,r=this.serviceUrl,a=m.b;return[a.Public,a.Private,a.Shared].map(function(a){return m.a.create({apnsEnvironment:t,environment:i,containerIdentifier:n,databaseType:a,partition:r,services:{Promise:v.a,fetch:e.ckFetch.bind(e)}})})}}),_fetchMechanism:h.a(g.a),isCloudKitUrlPrivate:function(e){return e.includes("/"+this.ckEnvironment+"/private/")},ckFetch:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return M(regeneratorRuntime.mark(function i(){var r,a,s,o,c,l,u,d,h,p,f,g,m;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(r=t.serviceUrl,a=t.getCustomCloudKitUrlFromUrl(e),s=void 0,o=void 0,c=void 0,l=void 0,u=void 0,"string"!=typeof(o=n.body)||void 0===(c=JSON.parse(o))||void 0===(l=c.zoneID||c.sourceZoneID)||void 0===(u=w.a.findByZonePK(S.a.getPrimaryKey(l)))||void 0===(s=u.anonymousPublicAccess)){i.next=20;break}if("string"!=typeof(d=s.token)){i.next=18;break}if(h=s.lastUpdatedTime+s.tokenTTL,!(Date.now()>=h)){i.next=16;break}return i.next=15,u.reload();case 15:return i.abrupt("return",t.ckFetch(e,n));case 16:p=a.includes("?")?"&":"?",a=""+a+p+"publicAccessAuthToken="+d;case 18:"string"==typeof(f=s.databasePartition)&&"string"==typeof r&&r.length>0&&a.startsWith(r)&&(a=f+a.slice(r.length));case 20:return i.next=22,t._fetchMechanism(a,n);case 22:return g=i.sent,void 0!==s&&"string"==typeof(m=g.headers["X-CloudKit-PublicAccess-AuthToken"])&&s.updateToken(m),i.abrupt("return",g);case 25:case"end":return i.stop()}},i,t)}))()},publicDatabase:o.b({readOnly:!0,dependencies:["_databases"],get:Object.assign(function(){return this._databases[0]},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])[0]}})}),privateDatabase:o.b({readOnly:!0,dependencies:["_databases"],get:Object.assign(function(){return this._databases[1]},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])[1]}})}),sharedDatabase:o.b({readOnly:!0,dependencies:["_databases"],get:Object.assign(function(){return this._databases[2]},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])[2]}})}),getDatabaseForScope:function(e){var t=CloudKit.DatabaseScope,n=t.PUBLIC,i=t.PRIVATE,r=t.SHARED;switch(e){case n:return this.publicDatabase;case i:return this.privateDatabase;case r:return this.sharedDatabase;default:throw new l.a("Invalid CloudKit DatabaseScope: "+e)}},publicDbZones:o.b({readOnly:!0,defaultValue:function(){return p.a.create([],S.a)}}),publicDbZonesLoadedTime:null,privateDbZones:o.b({readOnly:!0,defaultValue:function(){return p.a.create([],S.a)}}),privateDbZonesLoadedTime:null,sharedDbZones:o.b({readOnly:!0,defaultValue:function(){return p.a.create([],S.a)}}),sharedDbZonesLoadedTime:null,getCustomCloudKitUrlFromUrl:function(e){var t=e,n=this.isCloudKitUrlPrivate(e),i=e.includes("?");return t.includes("getCurrentSyncToken=")||(t+=i?"&":"?",t+="getCurrentSyncToken="+n,i=!0),this.serviceUrl&&!t.includes("remapEnums=")&&(t+=i?"&":"?",t+="remapEnums=true"),t},getZonesForScope:function(e){var t=CloudKit.DatabaseScope,n=t.PUBLIC,i=t.PRIVATE,r=t.SHARED;switch(e){case n:return this.publicDbZones;case i:return this.privateDbZones;case r:return this.sharedDbZones;default:throw new l.a("Invalid CloudKit DatabaseScope: "+e)}},getZonesLoadedTimeForScope:function(e){var t=CloudKit.DatabaseScope,n=t.PUBLIC,i=t.PRIVATE,r=t.SHARED;switch(e){case n:return this.publicDbZonesLoadedTime;case i:return this.privateDbZonesLoadedTime;case r:return this.sharedDbZonesLoadedTime;default:throw new l.a("Invalid CloudKit DatabaseScope: "+e)}},updateZonesLoadedTimeForScope:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now(),n=CloudKit.DatabaseScope,i=n.PUBLIC,r=n.PRIVATE,a=n.SHARED;switch(e){case i:this.publicDbZonesLoadedTime=t;break;case r:this.privateDbZonesLoadedTime=t;break;case a:this.sharedDbZonesLoadedTime=t;break;default:throw new l.a("Invalid CloudKit DatabaseScope: "+e)}},findNestedOperationHandlerForOperation:function(e){var t=this.findHandlerForOperation(e);if(t){var n=e.operation;return n?f.a(n.type,t.nestedOperationHandlers):t}}}}).call(this,n(6))},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var i=n(1185),r=n(39),a=n(65),s=n(1213),o=n(1173),c=n(854),l=n(78),u={loadData:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e||Object(a.b)("CW.Data.FastBulkLoadingSupport#loadData: No model class provided.",{dataManager:this,modelClass:e,dataHashes:t}),t||Object(a.b)('CW.Data."FastBulkLoadingSupport#loadData: No data hashes provided.',{dataManager:this,modelClass:e,dataHashes:t});var r=[];if(Array.isArray(t))for(var s=0,o=t.length;s<o;s++)r.push(d(this,e,t[s],n,o));else r.push(d(this,e,t,n,1));return this.didChangeDataForStoreIds(r),i.a.resolve(r)},persistenceDataDidUpdate:function(e){this.isDataForked(e)&&this.resetData(e)}};function d(e,t,n,i,u){var d=function(e,t){var n=e.primaryKey;n||Object(a.b)("CW.Data.FastBulkLoadingSupport getPrimaryKeyFromData: Attempted to locate primary key on a model class that does not specify one.",{data:t,modelClass:e});var i=t[e.getDataKeyForKey(n)];return void 0!==i&&null!==i||Object(a.b)("CW.Data.FastBulkLoadingSupport getPrimaryKeyFromData: Data hash does not contain primary key field that was specified by the Model class: "+n+".",{data:t,modelClass:e}),i}(t,n),f=l.a.getStoreIdForPrimaryKey(t,d);i||(e._loadedStoreIds[f]=!0);var g=e._dataHashes[f],m=e.getExistingModel(f),v=m&&function(e,t,n){var i=Object(s.a)(t,n);if(!i)return null;if(i.updated&&i.updated.length)for(var r=e.constructor,a=0,l=i.updated.length;a<l;a++){var u=r.getKeyForDataKey(i.updated[a]);if(t[u]&&n[u]){var d=e.getMetadata(u);d&&Object(o.a)(d,c.b)&&h(e[u],t[u],n[u])}}return i}(m,g,n);if(i){var _=e._persistenceStore._dataHashes,b=_[f]||(_[f]={});for(var y in n)b[y]=n[y]}else e._persistenceStore._dataHashes[f]=n;return e.persistenceDataDidUpdate(f,v),v&&m&&(r.a.pause(),v.added.length>0&&p(m,v.added),v.updated.length>0&&p(m,v.updated),!i&&v.removed.length>0&&p(m,v.removed),m.propertyChanged("storeStatus"),m.propertyChanged("loadStatus"),m.dataDidLoad(),m._fastBulkDataDidLoad&&m._fastBulkDataDidLoad(n,i,u),r.a.resume()),f}function h(e,t,n){e.changes||(e.changes=e.changesClass.acquire(e));for(var i=e.changes,r=Math.min(t.length,n.length),a=0;a<r;a++)t[a]!==n[a]&&(i.recordRemoval(a,t[a]),i.recordInsertion(a,e.encode(n[a])));var s=t.length-n.length;if(s<0)for(var o=r,c=n.length;o<c;o++)i.recordInsertion(o,e.encode(n[o]));else if(s>0)for(var l=r,u=t.length;l<u;l++)i.recordRemoval(l,t[l])}function p(e,t){for(var n=e.constructor,i=0,r=t.length;i<r;i++){var a=n.getKeyForDataKey(t[i]),s=e.getMetadata(a);if(s)if(Object(o.a)(s,c.b)){var l=e[a];l.changes&&l.changes.length?l.notifyIfNecessary():e.propertyChanged(a)}else e.propertyChanged(a)}}},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n(65),r=n(1185),a=function(e){e||i.b("CKPromise must be called with a resolver function.");var t=r.a.create();return e(t.resolve.bind(t),t.reject.bind(t)),t};a.all=function(e){return r.a.all(e)},a.race=function(e){return r.a.race(e)},a.reject=function(e){return r.a.reject(e)},a.resolve=function(e){return r.a.resolve(e)}},function(e,t,n){"use strict";var i=n(80),r=n(36),a=n(122),s=n(34),o=n(41),c=n(784),l=n(878),u=n(46),d=n(87),h=n(1224),p=n(398),f=d.a.extend({mixinDependencies:[p.a],staticMembers:{getPrimaryKey:function(e,t){return"@"+e+","+t},getPartsFromPrimaryKey:function(e){var t=e.slice(1),n=t.indexOf(","),i=t.substring(0,n),r=parseFloat(i),a=t.substring(n+1);return{lat:r,lng:parseFloat(a)}},getPrimaryKeyFromParts:function(e){var t=e.lat,n=e.lng;return this.getPrimaryKey(t,n)},findByLatLng:function(e,t,n){return this.find(this.getPrimaryKey(e,t),n)},findByLocations:function(e){var t=this,n=e.map(function(e){return t.getPrimaryKey(e.lat,e.lng)});return this.findByPrimaryKeys(n)},loadByLocations:function(e,t){var n=this,i=e.map(function(e){return n.getPrimaryKey(e.lat,e.lng)});return this.load(h.a(i),t)},__QUALIFIED_CLASS_NAME__:"PlaceResultModel"},lat:d.c({readOnly:!0}),lng:d.c({readOnly:!0}),placeResult:d.c({readOnly:!0})}),g=n(177),m=g.b("RevGeoDominantOrderTypeEnum",["Unknown","AOI","Thoroughfare","SubLocality","LargeAOI","Locality","SuperLocality","SubAdministrativeArea","SubAdministrativeLocality","SuperAOI","AdministrativeArea","AdministrativeAreaCode","Country","CountryCode","MegaAOI"]),v=g.b("GEOPlaceTypeEnum",{COUNTRY:1,STATE:2,COUNTY:4,CITY:16,TIME_ZONE:35,NEIGHBORHOOD:43,OCEAN:44,AOI:45,INLAND_WATER:46,POI:47,ISLAND:48,STREET:49,ADMIN:50,POSTAL:51,INTERSECTION:54,BUILDING:55,ADDRESS:57,ZCTAS:59,CONTINENT:61,PERDU_CITY:1016,DMA:100,CAT_10284_POSTAL:101,CAT_10285_CITY:102,CAT_10286_COUNTY:103,CAT_10287_STATE:104,CAT_10288_COUNTRY:105,CAT_10288_COUNTRY_CODE:106,CAT_10287_STATE_CODE:107}),_=function(){function e(t){for(var n in function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this.namePrefix=void 0,this.sortedNames=[],this.nameSuffix=void 0,this.suffixWhenPrefixOnly=!1,this.isContinuation=!1,t)n in this&&(this[n]=t[n])}return e.prototype.localizedSortedNames=function(){var e=this.namePrefix,t=this.nameSuffix;if("string"!=typeof e&&"string"!=typeof t)return this.sortedNames;for(var n=!1,i=[],r=0,a=this.sortedNames.length;r<a;++r){var s=this.sortedNames[r];if(n=n||s&&t&&s.includes(t),0===r&&(e||this.isContinuation)){var o=e;if(o)if(1===this.sortedNames.length&&e.includes(s)){var c=o&&t&&o.includes(t);this.suffixWhenPrefixOnly&&t&&!c&&(o=o+", "+t),s=o}else s=o+" - "+s;this.isContinuation&&(s="+ "+s)}r!==a-1||!t||this.suffixWhenPrefixOnly&&e||n||(s=s+", "+t),s&&i.push(s)}return i},e.prototype.localizedTitleForNameInfo=function(){for(var e="",t=this.localizedSortedNames(),n=0,i=t.length;n<i;++n){var r=t[n];e+=0!==n?n===i-1?" & "+r:", "+r:r}return e},e}(),b=function e(t){if(function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this.type=void 0,this.name=void 0,this.structuredAddress=void 0,this.area=0,void 0!==t){var n=t.name;"string"==typeof n&&(this.name=n);var i=t.area;Number.isFinite(i)&&(this.area=i);var r=t.type;"string"==typeof r&&(this.type=v[r].value);var a=t.address;if(void 0!==a){var s=a.structuredAddress;void 0!==s&&(this.structuredAddress=new function e(t){for(var n in function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this.country=void 0,this.countryCode=void 0,this.administrativeArea=void 0,this.administrativeAreaCode=void 0,this.subAdministrativeArea=void 0,this.locality=void 0,this.postCode=void 0,this.subLocality=void 0,this.premises=void 0,this.thoroughfare=void 0,this.subThoroughfare=void 0,this.fullThoroughfare=void 0,this.postCodeExtension=void 0,this.areaOfInterest=void 0,this.inlandWater=void 0,this.ocean=void 0,this.dependentLocalityList=void 0,this.premise=void 0,this.subPremiseList=void 0,this.postCodeFull=void 0,t)n in this&&(this[n]=t[n])}(s))}}},y=function(){function e(t){for(var n in function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this.placeName=void 0,this.minimumArea=void 0,this.geoPlaces=[],t)n in this&&(this[n]=t[n])}return e.prototype.addPlace=function(e){this.geoPlaces.push(e)},e}(),I=function(){function e(t,n){!function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this.isHome=!1,this._placeTypeInfoMap=[],this._mergeGeoPlaceData(t,n)}return e._findIndexOfPlaceInfoWithPlaceName=function(e,t){for(var n=0,i=e.length;n<i;++n)if(e[n].placeName===t)return n;return-1},e._getIsTypeWithinOrderType=function(e,t){return e<=t},e.prototype.getPlaceInfosForOrderType=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this._placeTypeInfoMap[e];return void 0===n&&t&&(n=[],this._placeTypeInfoMap[e]=n),n},e.prototype.getBestPlaceInfoForOrderType=function(e){var t=this.getPlaceInfosForOrderType(e);return void 0!==t&&t.length>0?t[0]:void 0},e.prototype._filterSortedPlace=function(e,t,n){if(t<=0)return e;for(var i=m.Unknown.value,r=-1,a=0;a<e.length;a++){var s=this._dominantOrderTypeForPlaceTypeAndLastOrderType(e[a].type,i);if(e[a].type===t){r=a,n&&(n.foundOrderType=s,n.lastOrderType=i);break}i=s}return r>0?e.slice(r):e},e.prototype._addPlaceName=function(t,n,i){if(t&&t.length&&n){var r=this.getPlaceInfosForOrderType(i,!0),a=e._findIndexOfPlaceInfoWithPlaceName(r,t);if(-1===a){var s=new y({placeName:t});r.push(s),s.addPlace(n)}else r[a].addPlace(n)}},e.prototype._removePlacesInPlaceInfos=function(t,n){var i=this.getPlaceInfosForOrderType(n);if(i)for(var r=0,a=t.length;r<a;++r){var s=t[r].placeName,o=e._findIndexOfPlaceInfoWithPlaceName(i,s);-1!==o&&i.splice(o,1)}},e.prototype._mergeGeoPlaceData=function(t,n){var i=t.place,r=m.Unknown.value,a=i.structuredAddress;if(t.additionalPlaceCount>0){var s=[i].concat(t.additionalPlaceList);s.sort(w);var o={foundOrderType:r,lastOrderType:m.Unknown.value};s=this._filterSortedPlace(s,n,o),r=o.foundOrderType;for(var c=o.lastOrderType,l=0,u=s.length;l<u;++l){var d=s[l],h=this._dominantOrderTypeForPlaceTypeAndLastOrderType(d.type,c);this._addPlaceName(d.name,d,h),c=h}var p=this._placeTypeInfoMap[m.Locality.value];p&&(this._removePlacesInPlaceInfos(p,m.AOI.value),this._removePlacesInPlaceInfos(p,m.SubLocality.value))}else{var f=a.areaOfInterest,g=a.subLocality,_=a.locality,b=a.subAdministrativeArea,y=a.administrativeArea,I=a.country;if(void 0!==f){var S=f.length,C=i.type;(C!==v.ISLAND.value&&S>0||C===v.ISLAND.value&&S>1)&&e._getIsTypeWithinOrderType(r,m.AOI.value)&&this._addPlaceName(f[0],i,m.AOI.value)}g&&e._getIsTypeWithinOrderType(r,m.SubLocality.value)&&this._addPlaceName(g,i,m.SubLocality.value),_&&e._getIsTypeWithinOrderType(r,m.Locality.value)&&this._addPlaceName(_,i,m.Locality.value),b&&e._getIsTypeWithinOrderType(r,m.SubAdministrativeArea.value)&&this._addPlaceName(b,i,m.SubAdministrativeArea.value),y&&e._getIsTypeWithinOrderType(r,m.AdministrativeArea.value)&&this._addPlaceName(y,i,m.AdministrativeArea.value),I&&e._getIsTypeWithinOrderType(r,m.Country.value)&&this._addPlaceName(I,i,m.Country.value)}var O=a.thoroughfare,A=a.administrativeAreaCode,E=a.countryCode;O&&e._getIsTypeWithinOrderType(r,m.Thoroughfare.value)&&this._addPlaceName(O,i,m.Thoroughfare.value),A&&e._getIsTypeWithinOrderType(r,m.AdministrativeAreaCode.value)&&this._addPlaceName(A,i,m.AdministrativeAreaCode.value),E&&e._getIsTypeWithinOrderType(r,m.CountryCode.value)&&this._addPlaceName(E,i,m.CountryCode.value)},e.prototype._dominantOrderTypeForPlaceTypeAndLastOrderType=function(e,t){var n=m.Unknown.value;switch(e){case v.AOI.value:case v.POI.value:case v.ISLAND.value:case v.INLAND_WATER.value:t<m.SubLocality.value?n=m.AOI.value:t<m.Locality.value?n=m.LargeAOI.value:t<m.AdministrativeArea.value?n=m.SuperAOI.value:t>=m.Country.value&&(n=m.MegaAOI.value);break;case v.NEIGHBORHOOD.value:t<m.Locality.value?n=m.SubLocality.value:t<m.SubAdministrativeArea.value?n=m.SuperLocality.value:t<m.AdministrativeArea.value&&(n=m.SubAdministrativeLocality.value);break;case v.STREET.value:case v.INTERSECTION.value:n=m.Thoroughfare.value;break;case v.CITY.value:n=m.Locality.value;break;case v.COUNTY.value:n=m.SubAdministrativeArea.value;break;case v.STATE.value:n=m.AdministrativeArea.value;break;case v.COUNTRY.value:n=m.Country.value;break;case v.OCEAN.value:n=m.MegaAOI.value;break;case v.ADMIN.value:case v.ADDRESS.value:case v.BUILDING.value:case v.CONTINENT.value:case v.TIME_ZONE.value:case v.POSTAL.value:}return n},e}();function w(e,t){var n=e.area,i=t.area,r=e.type,a=t.type;return r!==v.OCEAN.value&&a===v.OCEAN.value?-1:r===v.OCEAN.value&&a!==v.OCEAN.value?1:a!==v.INLAND_WATER.value||0!==i||r===v.INLAND_WATER.value&&0===n?r!==v.INLAND_WATER.value||0!==n||a===v.INLAND_WATER.value&&0===i?n===i?0:n<i?-1:1:1:-1}var S,C,O=function(){function e(t){for(var n in function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this.name=void 0,this.type=void 0,this.matchingCount=0,this.allEntriesAtHome=!1,this.allEntriesMatchHomeForOrderType=!1,this.addCountyIfNeeded=!1,this.geoPlaces=new Set,this.remainingGeoPlaces=void 0,t)n in this&&(this[n]=t[n])}return e.prototype.addGeoPlaces=function(e){var t=e,n=Array.isArray(t),i=0;for(t=n?t:t[Symbol.iterator]();;){var r;if(n){if(i>=t.length)break;r=t[i++]}else{if((i=t.next()).done)break;r=i.value}var a=r;this.geoPlaces.add(a)}},e.prototype.addGeoPlace=function(e){this.geoPlaces.add(e)},e.prototype.updateWithAddedNameInfo=function(e){this.addGeoPlaces(e.geoPlaces),this.matchingCount+=e.matchingCount,e.allEntriesAtHome||(this.allEntriesAtHome=!1),e.allEntriesMatchHomeForOrderType||(this.allEntriesMatchHomeForOrderType=!1)},e.prototype.prepareRemainingGeoPlaces=function(){this.remainingGeoPlaces=new Set(this.geoPlaces)},e.prototype.removeGeoPlacesFromRemaining=function(e){var t=e,n=Array.isArray(t),i=0;for(t=n?t:t[Symbol.iterator]();;){var r;if(n){if(i>=t.length)break;r=t[i++]}else{if((i=t.next()).done)break;r=i.value}var a=r;this.remainingGeoPlaces.delete(a)}},e}(),A=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),E=[m.AOI.value,m.SubLocality.value,m.LargeAOI.value,m.Locality.value,m.SuperLocality.value,m.SubAdministrativeArea.value,m.SubAdministrativeLocality.value,m.SuperAOI.value,m.AdministrativeArea.value,m.Country.value,m.MegaAOI.value,m.Unknown.value],T=[m.Thoroughfare.value,m.Locality.value,m.SubAdministrativeLocality.value,m.SuperAOI.value,m.AdministrativeArea.value,m.Country.value,m.Unknown.value],M=(C=S=function(){function e(){!function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this._otherNonDominantPlaces=[],this._ordersCheckedOrUsed=[],this._usedHome=!1,this._orderUsed=m.Unknown.value,this._homeMapItem=void 0,this._addCountyIfNeeded=!1}return e.prototype.updateInfoForMoments=function(e){for(var t=0,n=e.length;t<n;++t)this.updateInfoForMoment(e[t])},e.prototype.updateInfoForMoment=function(e){if(void 0!==e){var t=e.revGeoInfo;if(void 0!==t&&0!==t.length){var n=this._getPlaceFromRevGeoInfo(t),i=new _,r=new _;this._updateAllInfoInCompoundNameInfo(i,r,n,!0,E,T),e.title=i,e.subtitle=r}}},e.prototype._getPlaceFromRevGeoInfo=function(e){return e.reduce(function(e,t){if(void 0===t)return e;var n=t.placeResult;if(void 0===n)return e;var i=n.place;if(void 0===i)return e;var r=new function e(t){if(function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this.place=void 0,this.additionalPlaceList=void 0,this.additionalPlaceCount=0,void 0!==t){var n=t.place;void 0!==n&&(this.place=new b(n));var i=t.additionalPlace;if(void 0!==i){for(var r=[],a=0,s=i.length;a<s;++a){var o=new b(i[a]);r.push(o)}this.additionalPlaceList=r,this.additionalPlaceCount=r.length}}}(n),a=new I(r,i.type);return e.push(a),e},[])},e.prototype._updateAllInfoInCompoundNameInfo=function(e,t,n,i,r,a){this._otherNonDominantPlaces=[],this._ordersCheckedOrUsed=[],this._usedHome=!1,this._orderUsed=m.Unknown.value;var s=this._updateDominantInfoInCompoundNameInfo(e,n,r,!1,i,!1,!0,!0,!0,!0);void 0!==s&&s.length>0&&this._updateSecondaryInfoInCompoundNameInfo(t,n,e,a,s,this._otherNonDominantPlaces,this._ordersCheckedOrUsed,this._orderUsed,this._usedHome)},e.prototype._updateDominantInfoInCompoundNameInfo=function(e,t,n,i,r,a,s,o,c,l){var u=t.length;if(0!==u){var d=void 0,h=!1,p=new Map,f=void 0;void 0!==this._homeMapItem&&(f=new I(this._homeMapItem));for(var g=0,v=m.Unknown.value;!h&&(v=this._geoOrderInPriorityListAtIndex(n,g))!==m.Unknown.value;){p.clear(),s&&(this._otherNonDominantPlaces.length=0),o&&this._ordersCheckedOrUsed.push(v);for(var _=0;_<u;++_){var b=t[_],y=b.getPlaceInfosForOrderType(v);if(void 0!==y&&0!==y.length)for(var w=0,S=y.length;w<S;++w){var C=y[w].placeName;if(C.length>0){var A=new O({name:C,type:v});A.addGeoPlace(b),A.allEntriesAtHome=b.isHome,A.addCountyIfNeeded=this._addCountyIfNeeded;var E=!1;if(void 0!==f){var T=f.getBestPlaceInfoForOrderType(A.type).placeName.toLowerCase();C.toLowerCase()===T&&(E=!0)}A.allEntriesMatchHomeForOrderType=b.isHome||E,this._addOrUpdateNameInfo(A,p)}}}++g;var M=Array.from(p.values());void 0!==(d=this._dominantPlacesInPlaceInfoArray(M,v,u,i,r,a,g===n.length,s))&&d.length>0&&(h=!0)}var D=new Set,L={addedHome:!1};if(void 0!==e&&void 0!==d){var N=this._resetAndSortedNameInfoArray(d,a),P=this._localizedNamesForNameInfoArray(N,D,r,L);e.sortedNames=P}if(v===m.SubLocality.value&&!L.addedHome){var R=d[0].geoPlaces.values().next().value.getBestPlaceInfoForOrderType(m.Locality.value),x=R&&R.placeName,F=x&&x.lowercaseString,k=!0;if(F){var V=D,j=Array.isArray(V),B=0;for(V=j?V:V[Symbol.iterator]();;){var U;if(j){if(B>=V.length)break;U=V[B++]}else{if((B=V.next()).done)break;U=B.value}var W=U;if(-1!==W.indexOf(F)||-1!==F.indexOf(W)){k=!1;break}}}k&&x&&(e.namePrefix=x,o&&this._ordersCheckedOrUsed.push(m.Locality.value))}return l&&(this._usedHome=L.addedHome),c&&(this._orderUsed=v),d}},e.prototype._dominantPlacesInPlaceInfoArray=function(e,t,n,i,r,a,s,o){if(0!==e.length){var c=this._resetAndSortedNameInfoArray(e,a),l=[],u=void 0;void 0===o?u=[]:(u=this._otherNonDominantPlaces).length=0;for(var d=!1,h=0,p=0,f=void 0,g=!1,v=[].concat(c),_=!1,b=L(!1),y=v.length;y>0&&!_;){var I=v[0],w=I.remainingGeoPlaces.size;if(w>0){g&&(g=!1,d&&p===w&&(d=!1));var S=2,C=.75;switch(t){case m.AOI.value:S=3,C=.6;break;case m.SubLocality.value:var O=I.geoPlaces.values().next().value.getBestPlaceInfoForOrderType(m.Locality.value),A=O&&O.placeName;I!==c[0]&&(f&&!A||!f&&A||f&&f!==A)&&(d=!1,_=!0),f=A,S=3;break;case m.Locality.value:S=3}if(_)break;if(h+=w,l.length+u.length>6&&!s){d=!1;break}if(l.length<S||i)l.push(I),!d&&h/n>=C&&(d=!0,g=!0);else{if(!i)break;u.push(I)}}if(v.shift(),--y>0){for(var E=0;E<y;E++)v[E].removeGeoPlacesFromRemaining(I.remainingGeoPlaces);v.sort(b)}p=w}var T=l;return d?c.length-l.length>0&&t===m.Thoroughfare.value&&(T=c.length>3?void 0:c):T=void 0,T}},e.prototype._addOrUpdateNameInfo=function(e,t){if(void 0!==e){var n=e.name.toLowerCase(),i=t.get(n);void 0===i?t.set(n,e):i.updateWithAddedNameInfo(e)}},e.prototype._localizedNamesForNameInfoArray=function(e,t,n,i){var r=void 0,a=t;void 0===a&&(a=new Set);var s=e&&e.length;if(s){r=[];for(var o=0;o<s;o++){var c=e[o],l=c.name,u=l,d=l.toLowerCase();n&&c.allEntriesAtHome&&(u="_$!<Home>!$_",i&&(i.addedHome=!0),d=u.toLowerCase()),a.has(d)||(a.add(d),r.push(u))}}return r},e.prototype._resetAndSortedNameInfoArray=function(e,t){if(void 0!==e){for(var n=0,i=e.length;n<i;n++)e[n].prepareRemainingGeoPlaces();return e.sort(L(t)),e}},e.prototype._geoOrderInPriorityListAtIndex=function(e,t){var n=m.Unknown.value;return t<e.length&&(n=e[t]),n},e.prototype._suffixForNameInfoArray=function(e,t){if(void 0!==e){for(var n=void 0,i=!1,r=0,a=e.length;r<a;++r){var s=e[r].geoPlaces.values().next().value,o=this._suffixForGeoPlace(s,t);i||(n&&o!==n?(n=void 0,i=!0):n=o)}return n}},e.prototype._suffixForGeoPlace=function(e,t,n){var i=void 0,r=void 0,a=void 0,s=void 0,o=void 0,c=void 0;switch(t){case m.SubLocality.value:case m.Locality.value:case m.SuperLocality.value:case m.SubAdministrativeArea.value:case m.SubAdministrativeLocality.value:case m.SuperAOI.value:for(o=0,c=(r=[m.AdministrativeAreaCode.value,m.AdministrativeArea.value,m.CountryCode.value,m.Country.value]).length;o<c;++o)if(a=e.getBestPlaceInfoForOrderType(r[o])){i=a.placeName;break}break;case m.AdministrativeArea.value:if(n)for(o=0,c=(r=[m.CountryCode.value,m.Country.value]).length;o<c;++o)if(a=e.getBestPlaceInfoForOrderType(r[o]),s=n.getBestPlaceInfoForOrderType(r[o]),void 0!==a&&void 0!==s&&a.placeName!==s.placeName){i=a.placeName;break}}return i},e.prototype._updateSecondaryInfoInCompoundNameInfo=function(e,t,n,i,r,a,s,o,c){var l=void 0;if(a.length>0){if(e){e.isContinuation=!0,"string"==typeof(l=this._suffixForNameInfoArray(a,o))&&l.length>0&&(e.nameSuffix=l);var u=this._resetAndSortedNameInfoArray(a),d=this._localizedNamesForNameInfoArray(u);e.sortedNames=d}}else{var h=i.slice();if(s.forEach(function(e){var t=h.indexOf(e);t>-1&&h.splice(t,1)}),c||o!==m.SubLocality.value&&o!==m.Locality.value||r.length>1){var p=h.indexOf(m.Thoroughfare.value);p>-1&&h.splice(p,1)}this._orderUsed=m.Unknown.value;var f=this._updateDominantInfoInCompoundNameInfo(e,t,h,!0,!1,!1,!1,!1,!0);if("string"==typeof(l=this._suffixForNameInfoArray(f,this._orderUsed))&&l.length>0&&(e.nameSuffix=l),this._orderUsed===m.Thoroughfare.value){var g=this._suffixForNameInfoArray(r,o);"string"==typeof g&&g.length>0&&(n.nameSuffix=g,n.suffixWhenPrefixOnly=this._orderUsed===m.SubLocality.value)}}},A(e,null,[{key:"sharedInstance",get:function(){var e=this._sharedInstance;return void 0===e?this._sharedInstance=new this:e}}]),e}(),S._sharedInstance=void 0,C),D=[];function L(e){var t=e?1:0;return D[t]||(D[t]=function(t,n){var i=t.remainingGeoPlaces.size,r=n.remainingGeoPlaces.size,a=t.allEntriesAtHome||t.allEntriesMatchHomeForOrderType,s=n.allEntriesAtHome||n.allEntriesMatchHomeForOrderType,o=0;if(e&&(a&&!s?o=1:!a&&s&&(o=-1)),0===o){var c=t.minimumArea,l=n.minimumArea;c&&l&&(c>l?o=-1:c<l&&(o=1))}return 0===o&&(o=i>r?-1:i<r?1:t.name.localeCompare(n.name)),o})}var N=n(146);function P(e,t){var n=e.assetDate-t.assetDate;return 0===n?function(e,t){return e.addedDate-t.addedDate}(e,t):n}n.d(t,"a",function(){return R});var R=i.a.extend(r.a,a.a,{staticMembers:{createPlaceholder:function(e){return this.create(void 0,void 0,!0,e)},__QUALIFIED_CLASS_NAME__:"MomentData"},title:s.b(void 0),subtitle:s.b(void 0),startingDate:s.b({readOnly:!0,dependencies:["cluster"],get:function(){return this._startingDate}}),endingDate:s.b({readOnly:!0,dependencies:["cluster"],get:function(){return this._endingDate}}),itemCount:s.b({readOnly:!0,dependencies:["isPlaceholder","placeholderCount","cluster"],get:Object.assign(function(){return(this.isPlaceholder?this.placeholderCount:this.getPath("cluster.length"))||0},{__CW__getter:function(e,t,n,i){return(i.internalGet(this,t[0+n])?i.internalGet(this,t[1+n]):this.getPath("cluster.length"))||0}})}),isPlaceholder:s.b(!1),placeholderCount:s.b(0),cluster:s.b({readOnly:!0,get:function(){return this._cluster}}),identifiers:s.b({readOnly:!0,dependencies:["cluster"],get:function(){return this._identifiers}}),revGeoInfo:s.b(void 0),lowestRank:void 0,highestRank:void 0,setCluster:function(e,t,n){if(!n&&t&&t.length){var i=u.c;this._latitudes=i.getInstance(),this._longitudes=i.getInstance(),this._identifiers=i.getInstance()}if(this._cluster=t,!n&&t){var r=t.length;r>1&&l.b(t,P,function(t){return Object(N.a)(e,t)});for(var a=Number.MAX_SAFE_INTEGER,s=Number.MIN_SAFE_INTEGER,o=0;o<r;o++){var c=t[o];c<a&&(a=c),c>s&&(s=c),this._didSetRank(e,c,o)}this.lowestRank=a,this.highestRank=s;var d=Object(N.a)(e,s),h=Object(N.a)(e,a);this._startingDate=d.assetDate,this._endingDate=h.assetDate}this.propertyChanged("cluster")},initFromPool:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.__s._$1eF$initFromPool.call(this),this.placeholderCount=i,this.isPlaceholder=n,this.setCluster(e,t,n)},cleanup:function(){var e=arguments;this._cluster&&u.c.disposeInstance(this._cluster),this._identifiers&&u.c.disposeInstance(this._identifiers),this._startingDate=NaN,this._endingDate=NaN,this._cluster=void 0,this._identifiers=void 0,this._locationCount=0,this._isRequestingRevGeoInfo=!1,this.title=void 0,this.subtitle=void 0,this.revGeoInfo=void 0,this.__s._$1qL$cleanup.apply(this,e)},_cluster:void 0,_identifiers:void 0,_startingDate:NaN,_shouldProcessRevGeoInfo:!0,_locationCount:s.b(0),_latitudes:o.c(void 0),_longitudes:o.c(void 0),_didSetRank:function(e,t,n){var i=Object(N.a)(e,t);this._identifiers[n]=i.pk;var r=i.locationLatitude,a=i.locationLongitude;Number.isFinite(r)&&Number.isFinite(a)&&(this._latitudes.push(r),this._longitudes.push(a))},_requestRevGeoInfo:r.f({inputs:["cluster","isPlaceholder"],callback:function(e,t){var n=this;if(!t&&this._shouldProcessRevGeoInfo&&e&&e.length&&!this._isRequestingRevGeoInfo){var i=this._latitudes,r=this._longitudes,a=i.length;if(0!==a&&a===r.length){for(var s=u.c,o=u.h,l=s.getInstance(),d=0;d<a;d++){var h=o.getInstance();h.lat=i[d],h.lng=r[d],l.push(h)}this._locationCount=a,this._isRequestingRevGeoInfo=!0,s.disposeInstance(this._latitudes),s.disposeInstance(this._longitudes),this._latitudes=void 0,this._longitudes=void 0,f.loadByLocations(l).then(function(e){var t=e||f.findByLocations(l);t.retain(n,"MomentData: mdlArray from loadByLocations"),n.revGeoInfo=t,t.release(n,"MomentData: mdlArray from loadByLocations")}).catch(function(e){c.b.warn("PlaceResult load failed",e)}).finally(function(){n._isRequestingRevGeoInfo=!1;for(var e=0;e<a;e++)o.disposeInstance(l[e]);s.disposeInstance(l)})}}}}),_isRequestingRevGeoInfo:!1,_analyzeThis:r.f({inputs:["isPlaceholder","_locationCount","revGeoInfo.length"],callback:function(e,t,n){!e&&t&&t===n&&M.sharedInstance.updateInfoForMoment(this)}}),__superMap:{_$1eF$initFromPool:"initFromPool",_$1qL$cleanup:"cleanup"}})},function(e,t,n){"use strict";var i=n(34),r=n(410),a=n(36),s=n(409),o=n(793),c=n(180),l=n(1182),u=n(93),d=n(200).a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isOn",truevalue:"cw-on",attributes:{}}],attributes:{"aria-pressed":{type:"ATTRIBUTEOUTLET",bindingtype:"IFBINDING",name:"ariaPressed",truevalue:"true",falsevalue:"false",attributes:{},attribute:"aria-pressed"}}}},className:"cw-ui-views-controls-toggle-button",__QUALIFIED_CLASS_NAME__:"ToggleButton"},isOn:Object(i.b)(!1),wasActivated:function(){this.set("isOn",!this.get("isOn"))},ariaPressed:Object(u.c)("isOn")});n.d(t,"a",function(){return h});var h=s.a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"div",children:[{type:"MULTIVIEWOUTLET",tagname:"views",name:"_buttons"}],classes:["cw-segmented-control",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isDisabled",truevalue:"disabled",attributes:{}}]}},className:"cw-ui-views-controls-segmented",__QUALIFIED_CLASS_NAME__:"Segmented"},ariaRole:Object(i.b)("tablist"),value:Object(i.b)(),isDisabled:Object(i.b)({defaultValue:!1,type:"boolean"}),segments:Object(i.b)({get:function(e){return e},set:function(e){return o.a.create(e)}}),buttonClass:d,_buttons:Object(i.b)(Object(c.b)(r.b)),buttonAriaRole:Object(i.b)("tab"),_redraw:Object(a.f)("element","segments",function(e,t){var n=this.get("_buttons");if(e&&n){if(n.beginBatchedChanges(),n.clear(),t)for(var i=t.get("length"),r=this.get("value"),a=0,s=i;a<s;a++){var o=t.objectAt(a),c=this.buttonClass.create({additionalClassNames:Object(l.a)(o.classNames||[]),title:o.title,value:o.value,icon:o.icon,isDisabled:this.bindingFor("isDisabled"),target:this,action:"didToggle",tooltip:o.tooltip,isOn:o.value===r,ariaRole:this.bindingFor("buttonAriaRole")}),u=c.get("element").classList;0===a?u.add("cw-first"):a===i-1&&u.add("cw-last"),n.push(c)}n.endBatchedChanges()}}),_updateButtonStates:Object(a.f)("value",function(e){var t,n=this.get("_buttons");if(n)for(var i=0,r=n.get("length");i<r;i++)(t=n.objectAt(i)).set("isOn",t.get("value")===e),t.get("element").setAttribute("aria-selected",t.get("isOn"))}),didToggle:function(e){e&&this.set("value",e.get("value"))}})},function(e,t,n){"use strict";var i=n(46),r=n(80),a=n(784),s=n(146),o=r.a.extend({generateClustersInRange:function(e,t,n,r){for(var o=i.c.getInstance(),c=new Uint8Array(r),l=t;l>=n;)if(c[l])l--;else{var u=Object(s.a)(e,l);if(void 0!==u){var d=this._clusterForReferenceAsset(e,u,l,n,c);o.push(d),l--}else{a.b.debug("undefined reference asset found in clustering"),a.b.debug("undefined reference asset (oldestRank="+t+", newestRank="+n+",","totalAssetCount="+r+", rank="+l+")");var h=e._array[l],p=e.storeIds[l];a.b.debug("undefined reference asset (arrayVal="+h+", storeId="+p+","),l--}}return o},checkMaxBoundarySeparationForClusters:function(e,t,n){var i=t[0],r=t[t.length-1],a=n[0],s=n[n.length-1];return i>s?this.checkMaxBoundarySeparationForRanks(e,i,s):a>r?this.checkMaxBoundarySeparationForRanks(e,a,r):void 0},checkMaxBoundarySeparationForRanks:function(e,t,n){var i=Object(s.a)(e,t),r=Object(s.a)(e,n),a=i.assetDate,o=r.assetDate;return this._isBeyondMaxBoundary(a,o)},_clusterForReferenceAsset:function(e,t,n,r,a){var o=t.assetDate,c=i.c.getInstance(),l=n;for(c[0]=l,a[l]=1,l--;l>=r;)if(a[l])l--;else{var u=Object(s.a)(e,l).assetDate;if(this._isBeyondMaxBoundary(u,o))break;c.push(l),a[l]=1,l--}return c},_isBeyondMaxBoundary:function(e,t){return Math.abs(e-t)>=864e5},staticMembers:{__QUALIFIED_CLASS_NAME__:"BaseClusterDelegate"}});function c(e){if(Number.isFinite(e))return parseFloat(e.toFixed(6))}n.d(t,"a",function(){return l});var l=o.extend({_clusterForReferenceAsset:function(e,t,n,r,a){if(n===r){var s=i.c.getInstanceFromParams(n);return a[n]=1,s}for(var o=t.assetDate,c=this._boundaryRankForTemporalTheta(e,t,n,o,r,18e5),l=5,u=NaN,d=36e5;d<=864e5&&(c===(u=this._boundaryRankForTemporalTheta(e,t,n,o,r,d))&&l--,c=u,0!==l);d+=36e5);var h=d/36e5*16e3/111e3;return this._clusterForReferenceAssetWithSpatialSigma(e,t,n,c,h,a)},_boundaryRankForTemporalTheta:function(e,t,n,i,r,a){for(var o=n;o>r&&!(Object(s.a)(e,o-1).assetDate-i>a);)o--;return o},_clusterForReferenceAssetWithSpatialSigma:function(e,t,n,r,a,o){var l=0,u=0,d=0,h=0,p=NaN,f=NaN,g=c(t.locationLatitude),m=c(t.locationLongitude);Number.isFinite(g)&&Number.isFinite(m)&&(l=(p=g)-a,u=p+a,d=(f=m)-a,h=f+a);var v=n,_=i.c.getInstance();for(_[0]=v,o[v]=1;--v>=r;)if(!o[v]){var b=Object(s.a)(e,v),y=c(b.locationLatitude),I=c(b.locationLongitude);if(Number.isNaN(p)||Number.isNaN(f)||!Number.isFinite(y)||!Number.isFinite(I))Number.isFinite(y)&&Number.isFinite(I)&&(l=(p=y)-a,u=p+a,d=(f=I)-a,h=f+a,_.isGeoSpatial=!0);else if(_.isGeoSpatial=!0,!this._qualifyGeolocation(y,I,l,u,d,h))continue;_.push(v),o[v]=1}return _},_qualifyGeolocation:function(e,t,n,i,r,a){return e>=n&&e<=i&&t>=r&&t<=a},staticMembers:{__QUALIFIED_CLASS_NAME__:"MomentClusterDelegate"}})},,,,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(){}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n(121);function r(e){return a(e.constructor)||a(e)||"<object>"}function a(e){var t=e.__QUALIFIED_CLASS_NAME__;if(t)return e.hasOwnProperty("__QUALIFIED_CLASS_NAME__")||(e.isClass&&!e.isInitialized?t+="(Uninitialized subclass "+Object(i.a)(e)+")":t+="(Anonymous subclass "+Object(i.a)(e)+")"),t}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n(65);function r(e){for(var t=[],n=/((?:(?:\\\\)*|(?:\\\.)|[^\\.])+)(?:\.|$)/g,r=e.length;n.lastIndex<r;){var a=n.exec(e);0===(a=a[1]).length&&Object(i.b)("Cannot parse a property path with an empty component ('%{path}').",{path:e}),a=(a=a.replace(/\\\./g,".")).replace(/\\\\/g,"\\"),t.push(a)}return t}},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n(310),r=n(773),a=n(772);function s(e,t){var n=Object(a.a)(t,e);if(n)return Object(i.a)(n,Object(r.a)(t))}},function(e,t,n){"use strict";function i(e,t){return(n=e)&&n.instanceOf?e.instanceOf(t):(t===Event||"function"==typeof t)&&e instanceof t;var n}n.d(t,"a",function(){return i})},function(e,t,n){"use strict";function i(e){return e instanceof Function||!(!e||"function"!=typeof e||e instanceof Element)}n.d(t,"a",function(){return i})},function(e,t,n){"use strict";function i(e){return"boolean"==typeof e}n.d(t,"a",function(){return i})},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n(174),r=n(65),a=n(776);function s(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];var c=Object(i.a)(arguments,0,1),l="_cw_boundFunction_"+Object(a.a)(arguments);null!==t&&void 0!==t||o(t);var u=t[l];return u||(u=t[l]=e.bind.apply(e,c),t[l]||o(t)),u}function o(e){Object(r.b)("CW.Utils.bindFunction cannot bind a function to a primitive or frozen object ("+e+" in this case). Use `Function#bind` instead.")}},function(e,t,n){"use strict";function i(e){return null!==e&&void 0!==e}n.d(t,"a",function(){return i})},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(e){return e}},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=n(182).b},function(e,t,n){"use strict";n.d(t,"b",function(){return l}),n.d(t,"a",function(){return u}),n.d(t,"c",function(){return d});var i=/[&<>]/g,r=/[&<>'"]|((((j|v[^\w ]*b|l[^\w ]*i[^\w ]*v[^\w ]*e).*)?)+(?:[^\w ]*\w)+[^\w ]*s[^\w ]*c[^\w ]*r[^\w ]*i[^\w ]*p[^\w ]*t[^\w ]*:)/gi,a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},s=/[-/\\^$*+?.()|[\]{}]/g;function o(e){return a[e]||""}function c(e,t,n){if(!e)return"";if("string"!=typeof e)try{e=e.toString()}catch(e){return""}return e.replace(t,n)}function l(e){return c(e,i,o)}function u(e){return c(e,r,o)}function d(e){return c(e,s,"\\$&")}},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return b});var i=n(41),r=n(34),a=n(93),s=n(1185),o=n(803),c=n(551),l=n(130),u=n(1144),d=n(363),h=n(807),p=n(279),f=n(492),g=n(493),m=n(136),v=n(197),_=n(319),b=d.a.extend({mixinDependencies:[c.a],staticMembers:{main:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={defaultApplicationClass:b,defaultDelegateClass:h.a,defaultDelegateClassProtocol:p.a};Object(_.a)(e,t)},__QUALIFIED_CLASS_NAME__:"UIApplication"},disableTouchScrolling:i.c({type:Boolean,defaultValue:!1}),primaryInteractionMode:r.b({readOnly:!0,type:String,binding:a.c("_primaryInteractionMode")}),platformType:r.b({readOnly:!0,type:String,binding:a.c("_platformType")}),uiState:r.b({readOnly:!0,binding:a.c("_uiState")}),delegate:i.c({type:p.a}),run:function(){var e=this,t=arguments;return this._configureUIForPlatformAndInteractionMode(),this.__s._$2mG$run.apply(this,t).then(function(){e.parentProcessReference||e.invokeLater(function(){return e._transitionRootApplicationToActiveForeground()})})},stop:function(){var e=arguments;return this._uiState=m.a.NONE,this.__s._$33e$stop.apply(this,e)},didBecomeActive:function(){Object(l.b)(this.processState,l.a.RUNNING),Object(m.b)(this.uiState,m.a.INACTIVE_FOREGROUND),this._uiState=m.a.ACTIVE_FOREGROUND,this.delegate.applicationDidBecomeActive(this)},willResignActive:function(){Object(l.b)(this.processState,l.a.RUNNING),Object(m.b)(this.uiState,m.a.ACTIVE_FOREGROUND),this.delegate.applicationWillResignActive(this),this._uiState=m.a.INACTIVE_FOREGROUND},willEnterForeground:function(){var e=this;Object(l.b)(this.processState,l.a.RUNNING),Object(m.b)(this.uiState,m.a.NONE,m.a.BACKGROUND),this.invokeLater(function(){s.a.resolve().then(function(){return e.delegate.applicationWillEnterForeground(e)}).then(function(){return e._uiState=m.a.INACTIVE_FOREGROUND}).then(function(){return e._notifyParentThatProcessIsReadyToBeDisplayedIfNeeded()})})},didEnterBackground:function(){Object(l.b)(this.processState,l.a.RUNNING),Object(m.b)(this.uiState,m.a.NONE,m.a.INACTIVE_FOREGROUND),this._uiState=m.a.BACKGROUND,this.delegate.applicationDidEnterBackground(this)},didReceiveSyntheticBrowserEvent:function(e){},_primaryInteractionMode:r.b({type:String}),_platformType:r.b({type:String}),_uiState:r.b({type:m.a,defaultValue:m.a.NONE}),_createParentProcessReference:function(e){var t=arguments,n=this.__s._$4kz$_createParentProcessReference.apply(this,t);return n.createMessagingChannel(c.a,this,u.a),n},_configureUIForPlatformAndInteractionMode:function(){var t=this.hostInfo,n=t.primaryInteractionMode,i=t.platformType;if(!n||!Object.keys(v.a).includes(n))throw new TypeError("hostInfo must include a valid primary interaction mode");n===v.a.TOUCH?this._configureUIForTouchInteractionMode():this._configureUIForMouseInteractionMode(),this._primaryInteractionMode=n,this._platformType=i,o.b("data-primary-interaction-mode",n.toLowerCase(),e.document.documentElement)},_configureUIForTouchInteractionMode:function(){var e=this.disableTouchScrolling;this.Initializers.push(f.a),e&&this.Initializers.push(g.a)},_configureUIForMouseInteractionMode:function(){},_transitionRootApplicationToActiveForeground:function(){var e=this,t=this.listen("uiState",function(){e.uiState===m.a.INACTIVE_FOREGROUND&&(t.disconnect(),e.invokeLater(function(){return e.didBecomeActive()}))});this.willEnterForeground()},_notifyParentThatProcessIsReadyToBeDisplayedIfNeeded:function(){var e=this;Object(l.b)(this.processState,l.a.RUNNING),Object(m.b)(this.uiState,m.a.INACTIVE_FOREGROUND);var t=this.parentProcessReference;if(t&&t.isConnected)return t.remoteProxy.isReadyToBeDisplayed().then(function(t){var n=t.error;n&&'{"code":-32601,"message":"A JSON-RPC registration was not found for method `MessagingFromUIChildProtocol-isReadyToBeDisplayed`."}'===n.message||e.terminateIfMessagingResponseError(t)})},__superMap:{_$2mG$run:"run",_$33e$stop:"stop",_$4kz$_createParentProcessReference:"_createParentProcessReference"}})}).call(this,n(6))},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var i=n(1179),r=n(775),a=n(774),s=n(1183),o=n(65),c=n(1177),l=n(68),u=n(181),d="[CW.Property#extendedForAccumulatorDefaultValue] Cannot extend property.",h=[],p=l.a.extend({init:function(e){this.value=Object(i.a)(arguments),this.__s._$eh$init.call(this)},value:null,initializeMember:function(e,t){var n,i=e[t],l=this.value;if(Array.isArray(i))n=i.concat.apply(i,l);else if(Object(r.a)(i))l.every(r.a)?(Object(a.a)(h,l,1,0),h[0]=i,n=s.a.apply(null,h)):Object(o.b)(d+" The default value of the superclass property is a hash, but the subclass does not provide a hash.",{value:l,property:this});else if(Object(u.a)(i))l.every(r.a)?n=i.extend.apply(i,l):Object(o.b)(d+" The default value of the superclass property is a class, but the subclass does not provide a hash.",{value:l,property:this});else if(Object(c.a)(i))Object(o.b)(d+" This property class returned a default value that is not valid for aggregation.  It must be either an array or a hash object.",{property:this,previousValue:i});else if(l.every(r.a))n=s.a.apply(null,l);else if(l.every(Array.isArray)){Object(a.a)(h,l,0,1);var p=l[0];n=p.concat.apply(p,h)}else Object(o.b)(d+" If the default value of the superclass property is "+i+", the subclass must provide a hash or an array.",{value:l,property:this});return n},__superMap:{_$eh$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"Accumulator"}}),f=function(){return p.create.apply(p,arguments)}},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n(65),r=[],a=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];0===arguments.length&&Object(i.b)("[CW.Utils#merge] Must provides objects to merge");var a=arguments.length;r.length=a+1-0;for(var s=0,o=1;s<a;s++,o++)r[o]=arguments[s];var c=r;return c[0]={},Object.assign.apply(this,c)}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n(96);function r(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];return setTimeout.apply(void 0,[Object(i.a)(e),t].concat(r))}},function(e,t,n){"use strict";n.d(t,"b",function(){return p}),n.d(t,"a",function(){return m});var i=n(65),r=n(1173),a=n(1186),s=n(1143),o=n(208),c=n(1174),l=n(1184),u=n(68),d=n(177),h=[],p={then:function(e,t){var n=this.internalPromise,i=m.createEmpty();return this.isExceptionHandlingEnabled&&(e&&(e=f(i,e),i._resolveHandler=e),t&&(t=f(i,t,!0),i._rejectHandler=t,this._hasRejectionHandler=t),this._linkNestedPromise(i)),i.internalPromise=n.then(e,t),i},catch:function(e){return this.then(null,e)},finally:function(e){var t=this.internalPromise,n=m.create();n._hasRejectionHandler=!1;var i=function(t){e(t),n.resolve(t)},r=function(t){e(t),n.rejectWithExceptionHandling(t)};return e&&this.isExceptionHandlingEnabled?t.then(f(n,i),f(n,r,!0)):e&&t.then(i,r),this._linkNestedPromise(n)},promiseState:null,isExceptionHandlingEnabled:!0,resolve:function(e){if(this.promiseState===m.PENDING)if(e===this&&Object(i.b)("Promise cannot resolve with itself "+this,this),e instanceof Promise||Object(r.a)(e,m))e.then(this._resolveHandler.bind(this),this._rejectHandler.bind(this));else if(Object(a.a)(e))try{e.then(this._resolveHandler.bind(this),this._rejectHandler.bind(this))}catch(e){this._rejectHandler(e)}else this._resolveHandler(e)},reject:function(e){this.promiseState===m.PENDING&&(this._rejectHandlerWasCalledDirectly=!0,this._rejectHandler(e))},rejectWithExceptionHandling:function(e){this.promiseState===m.PENDING&&(this._hasRejectionHandlerInChain()?this._rejectHandler(e):(this._exceptionWasThrown=!0,Object(s.b)(function(){throw e})))},init:function(){var e=arguments;this.__s._$2If$init.apply(this,e),this.promiseState=m.PENDING,void 0===this.internalPromise&&(this.internalPromise=this._createPromise())},_createPromise:function(){var e=this;return new Promise(function(t,n){e.isExceptionHandlingEnabled?(e._resolveHandler=f(e,t),e._rejectHandler=f(e,n,!0)):(e._resolveHandler=function(n){e.promiseState=m.RESOLVED.FULFILLED,t(n)},e._rejectHandler=function(t){e.promiseState=m.RESOLVED.REJECTED,n(t)})})},internalPromise:void 0,_resolveHandler:null,_rejectHandler:null,_hasRejectionHandler:!1,_rejectHandlerWasCalledDirectly:!1,_exceptionWasThrown:!1,_nestedPromises:null,_parentPromise:null,_linkNestedPromise:function(e){return this._nestedPromises=this._nestedPromises||(this._nestedPromises=[]),this._nestedPromises.push(e),e._parentPromise=this,e},_hasRejectionHandlerInChain:function(e){for(var t=this;t;){if(t._hasRejectionHandler&&t._hasRejectionHandler!==e&&t.promiseState===m.PENDING)return!0;t=t._parentPromise}return function e(t){var n=t._nestedPromises;if(n)for(var i=0,r=n.length;i<r;i++){var a=n[i];if(a._hasRejectionHandler||e(a))return!0}return!1}(this)},__superMap:{_$2If$init:"init"}};function f(e,t,n){var i;return i=function(){var a,c=arguments.length;h.length=c+0-0;for(var l=0,u=0;l<c;l++,u++)h[u]=arguments[l];var d=h;try{(a=Object(o.c)(t,this,d))&&Object(r.a)(a,m)&&e._linkNestedPromise(a)}catch(t){var p=e._hasRejectionHandlerInChain(i);if(!Object(s.a)().exceptionWasHandled)throw p||(e._exceptionWasThrown=!0,Object(s.b)(function(){throw t})),t}return e.promiseState=n?m.RESOLVED.REJECTED:m.RESOLVED.FULFILLED,a}}var g=Object(d.b)("PROMISE_STATES",function(e){e("PENDING"),e("RESOLVED",function(e){e("FULFILLED"),e("REJECTED")})}),m=u.a.extend(g.toStaticMixin(),p,{staticMembers:{wrap:function(e){return e instanceof Promise?this.wrapPromise(e):Object(a.a)(e)?this.resolve(e):Object(c.a)(e)?this.wrapFunction(e):void Object(i.b)("CW.Promise.wrap can only be used with functions or thenables",e)},wrapPromise:function(e){return this.create({internalPromise:e})},wrapFunction:function(e){Object(c.a)(e)||Object(i.b)("CW.Promise.wrapFunction can only be used with a function.",e);var t=this;return function(){var n=t.create(),i=arguments;return Object(l.a)(function(){try{var t=e.apply(this,i);n.resolve(t)}catch(e){n.rejectWithExceptionHandling(e)}}.bind(this),0),n}},invokeFunction:function(e,t){var n=this.wrapFunction(e);return n.call(n,t)},createEmpty:function(){return this.create({internalPromise:null})},waterfall:function(e,t){var n=void 0!==t,i=n?this.invokeFunction(v(t)):void 0;if(0===e.length)return i||this.resolve();var r,a=0,s=e.length;for(n||(a=1,i=this.invokeFunction(v(e[0])));a<s;a++)r=v(e[a]),i=i.then(this.wrapFunction(r));return i},sequence:function(e){var t=[];if(0===e.length)return this.resolve(t);for(var n,i=function(e){t.push(e)},r=1,a=e.length,s=this.invokeFunction(v(e[0])).then(i);r<a;r++)n=v(e[r]),s=s.then(this.wrapFunction(n)).then(i);return s.then(v(t))},concurrent:function(e,t){if(t=t||1,0===e.length)return this.resolve([]);if(e.length<=t)return this.all(e);var n=this,i=this.create(),r=[],a=[],s=e;return function e(){for(var o,c,l;a.length<t&&s.length>0;)o=v(s.shift()),c=n.invokeFunction(o).then(function(t){r.push(t),l=a.indexOf(this),a.splice(l,1),e()}).catch(i.reject.bind(i)),a.push(c);a.length||s.length||i.resolve(r)}(),i},all:function(){return this.resolve(Promise.all.apply(Promise,arguments))},race:function(){return this.resolve(Promise.race.apply(Promise,arguments))},resolve:function(){var e=this.create();return e.resolve.apply(e,arguments),e},reject:function(){var e=this.create();return e.reject.apply(e,arguments),e},__QUALIFIED_CLASS_NAME__:"CorePromise"}});function v(e){return Object(c.a)(e)?e:function(){return e}}},function(e,t,n){"use strict";function i(e){return e&&"function"==typeof e.then}n.d(t,"a",function(){return i})},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n(96),r=function(e,t,n,r){return e.addEventListener(t,Object(i.a)(n),r||!1)}},function(e,t,n){"use strict";n.d(t,"b",function(){return f}),n.d(t,"a",function(){return g});var i=n(32),r=n(82),a=n(80),s=n(251),o=n(173),c=n(1173),l=n(36),u=n(791),d=n(790),h=n(93),p=n(34),f={mixinDependencies:[d.b],origin:Object(i.c)(r.a),top:Object(i.c)(r.a),bottom:Object(i.c)(r.a),left:Object(i.c)(r.a),right:Object(i.c)(r.a),isAbove:function(e){return this.bottom<=e.top},isBelow:function(e){return this.top>=e.bottom},isLeftOf:function(e){return this.right<=e.left},isRightOf:function(e){return this.left>=e.right},intersects:function(e){return!(this.isAbove(e)||this.isBelow(e)||this.isRightOf(e)||this.isLeftOf(e))},containsPoint:function(e){var t=e.x,n=e.y;return t>=this.left&&t<this.right&&n>=this.top&&n<this.bottom},toString:function(){var e=arguments;return this.__s._$12U$toString.apply(this,e)+Object(o.a)("{ origin: (%{x},%{y}) size: (%{width}, %{height}) }",this)},__superMap:{_$12U$toString:"toString"}},g=a.a.extend(l.a,f,{_origin:null,init:function(e){var t=arguments;if(Object(c.a)(e,f))return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this.__s._$1LC$init.call(this);this.__s._$1LC$init.apply(this,t)},origin:Object(p.b)({dependencies:["x","y"],strong:!0,get:Object.assign(function(){var e=this.y,t=this.x,n=this._origin;return n?(n.set("x",t),n.set("y",e)):n=this._origin=u.a.create({x:t,y:e}),n},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[1+n]),a=i.internalGet(this,t[0+n]),s=this._origin;return s?(s.set("x",a),s.set("y",r)):s=this._origin=u.a.create({x:a,y:r}),s}}),set:Object.assign(function(e){Object(s.a)(e)||(e=u.a.create(e)),this.x=e.x,this.y=e.y,this._origin=e},{__CW__setter:function(e,t,n,i,r){Object(s.a)(e)||(e=u.a.create(e)),n[0+i]=e.x,n[1+i]=e.y,this._origin=e}}),writeDependencySetPathMap:["false","false"]}),x:Object(p.b)(),y:Object(p.b)(),width:Object(p.b)(),height:Object(p.b)(),top:Object(p.b)({binding:Object(h.c)("y"),readOnly:!0}),bottom:Object(p.b)({readOnly:!0,cacheable:!0,dependencies:["height","y"],get:Object.assign(function(){return this.y+this.height},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[1+n])+i.internalGet(this,t[0+n])}})}),left:Object(p.b)({binding:Object(h.c)("x"),readOnly:!0,cacheable:!0}),right:Object(p.b)({readOnly:!0,cacheable:!0,dependencies:["width","x"],get:Object.assign(function(){return this.x+this.width},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[1+n])+i.internalGet(this,t[0+n])}})}),__superMap:{_$1LC$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"Rect"}})},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n(121);function r(e,t,n){if(!e)return f;t||null===t||!1===t||(t=a);var s=t||n?Object(i.a)(t)+p+e+p+!!n:e,v=g[s];if(v)return v;if(Array.isArray(t))return g[s]=function(e,t,n){var a=function(e){var t=Object(i.a)(e),n=m[t];if(n)return n;var r=e.map(function(e){return"i"===e[0]&&l(e[1])?"I"+e.substring(1):null}).filter(Boolean);return e=e.concat(r),m[t]=new RegExp(e.join("|"),"g")}(t),s=e.match(a);if(!s||!s.length)return r(e,null,n);for(var o=e.split(a),c=r(o[0]),d=0,p=s.length;d<p;d++){var f=s[d];n||(f=f.toLowerCase());var g=o[d+1];g&&(g=r(g,null,n)),c+=(c&&h)+f,g&&(c+=(u(g[0])?h:"")+g)}return c}(e,t,n);var _=e.length,b="",y=void 0,I=void 0,w=void 0,S=void 0,C=void 0;for(y=0;y<_;y++)I=e[y-1],S=(w=e[y]).toLowerCase(),C=e[y+1],I&&d(w)&&d(I)&&(!l(I)&&l(w)||o(I)&&u(w)||C&&l(I)&&l(w)&&c(C))?b+=h+S:b+=S;return g[s]=b}var a=["iOS","iPhone","iPad","iPod","WebKit"];function s(e,t){var n=e.charCodeAt(0),i=t.charCodeAt(0),r={};return function(e){var t=r[e];if(void 0!==t)return t;var a=e.charCodeAt(0);return r[e]=a>=n&&a<=i}}var o=s("0","9"),c=s("a","z"),l=s("A","Z"),u=function(e){return c(e)||l(e)},d=function(e){return u(e)||o(e)},h="-",p="#",f="",g={},m={}},function(e,t,n){"use strict";function i(e,t,n,i){if(t<e)return-1;for(var r=arguments.length,a=Array(r>4?r-4:0),s=4;s<r;s++)a[s-4]=arguments[s];for(var o=new Array(2).concat(a),c=void 0;e<t;){c=e+(t-e>>1),o[0]=n(c),o[1]=c;var l=i.apply(void 0,o);if(0===l)return c;l<0?t=c-1:e=c+1}return e===t&&e!==c&&(o[0]=n(e),o[1]=e,0===i.apply(void 0,o))?e:-1}n.d(t,"a",function(){return i})},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n(65);function r(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=!1;e&&(Array.isArray(e)||e._isCwCollection&&e.objectAt)||(a=!0),a&&Object(i.b)("CW.Utils.appendArrays expects an array and got: "+e);for(var s=1,o=arguments.length;s<o;s++){var c=arguments[s],l=e.length,u=c.length,d=0,h=l;if(c._isCwCollection&&c.objectAt)for(;d<u;d++,h++)e.splice(h,0,c.objectAt(d));else for(;d<u;d++,h++)e.splice(h,0,c[d])}return e}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n(182);function r(e){return Object(i.b)(e,i.b)}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n(65);function r(e,t){if((r=t)&&"function"==typeof r.remove)t.remove(e);else if(Array.isArray(t)){var n=t.indexOf(e);n>=0&&t.splice(n,1)}else Object(i.b)("removeItemFromArray: argument array must be an Array or implement a remove method");var r}},function(e,t,n){"use strict";n.d(t,"a",function(){return v}),n.d(t,"c",function(){return y}),n.d(t,"b",function(){return I}),n(801);var i=n(80),r=n(180),a=n(96),s=n(1187),o=n(1195),c=n(65),l=n(1169),u=n(784),d=n(1173),h=n(1196),p=n(190),f=n(95),g=n(184),m=n(185),v=i.a.extend(g.a,{application:null,events:null,init:function(e){var t=e&&e.element;if(t){var n=window.document,i=t;t===n&&(i=n.body),this._cursorLockElement=i,delete e.element}if(this.__s._$a5$init.call(this,e),this._eventListeners=new Map,this.events){var r=this.events,s=Array.isArray(r),o=0;for(r=s?r:r[Symbol.iterator]();;){var c;if(s){if(o>=r.length)break;c=r[o++]}else{if((o=r.next()).done)break;c=o.value}var l=c,u=l.handlers,d=l.useCapture,h=Object.entries(u),p=Array.isArray(h),f=0;for(h=p?h:h[Symbol.iterator]();;){var g;if(p){if(f>=h.length)break;g=h[f++]}else{if((f=h.next()).done)break;g=f.value}var m=g,v=m[0],_=m[1],b=Object(a.a)(_.bind(this));this._eventListeners.set(v,[b,{capture:d||!1,passive:!1}])}}}t&&this.addEventListenersToElement(t)},addEventListenersToElement:function(e){var t=window.document;!t||e!==t.body&&e!==t.documentElement||(e=window.document),_(e),this._listenedElements.push(e);var n=this._eventListeners.entries(),i=Array.isArray(n),r=0;for(n=i?n:n[Symbol.iterator]();;){var a;if(i){if(r>=n.length)break;a=n[r++]}else{if((r=n.next()).done)break;a=r.value}var o=a,c=o[0],l=o[1],u=l[0],d=l[1];Object(s.a)(e,c,u,d)}},prependEventListenerToElement:function(e,t,n,i){var r=this._listenedElements.indexOf(e)>=0;r&&this._removeEventListener(e,t),Object(s.a)(e,t,n,i),r&&this._addEventListener(e,t)},_addEventListener:function(e,t){if(this._eventListeners.has(t)){var n=this._eventListeners.get(t),i=n[0],r=n[1];Object(s.a)(e,t,i,r)}},_removeEventListener:function(e,t){if(this._eventListeners.has(t)){var n=this._eventListeners.get(t),i=n[0],r=n[1];Object(o.a)(e,t,i,r)}},_listenedElements:Object(r.b)(Array),_eventListeners:null,dispatchEvent:function(e){e||Object(c.b)("RootResponder#dispatchEvent requires an event.");var t=e.cwType;"keyDown"!==t&&"keyUp"!==t||p.a.sharedInstance[t](e),"pointerDown"===t&&p.a.sharedInstance.syncMetaKeyStateFromEvent(e);var n,i=void 0;"number"==typeof e.pointerId&&(i=this.getPointerCapture(e.pointerId));var r=y(e);if(e.targetView=r,this._synthesizePointerMoveEventsIfNecessary(e),i){if(!function(e,t){var n=t.cwType;if("pointerUp"===n||"pointerCancel"===n||"pointerMove"===n)return!0;var i=b(t.target);return!i||e.get("element")===i}(i,e))return;n=i}else(n=r)||(n=this.getPath("application.topFocusLayer.focusResponder"));n||(n=this),this.willDispatchEvent(e);var a=!1;if(e.bubbles?a=Object(m.a)(n,t,e):n.handleEvent&&(S[0]=t,S[1]=e,a=n.handleEvent.apply(n,S),S[0]="",S[1]=null),this.didDispatchEvent(e,a),e.pointerType===f.b.TOUCH&&("pointerUp"===t||"pointerCancel"===t)){if(!r||!r.isDisposed){var s=f.a.create({nativeEvent:e,cwType:"pointerOut",target:e.target});this.dispatchEvent(s)}for(var o=r;o&&!o.isDisposed;){var l=f.a.create({cwType:"pointerLeave",bubbles:!1,target:o.element});this.dispatchEvent(l),o=o.parent}}return a},_synthesizePointerMoveEventsIfNecessary:function(e){var t,n=e.cwType;if("pointerOut"===n&&this._checkIfPointerLeft(e),"pointerMove"===n&&this._dispatchPointerEnterOrLeave(e,e.targetView),e.pointerType===f.b.TOUCH&&"pointerDown"===n)for(t=e.targetView;t;){var i=f.a.create({cwType:"pointerEnter",bubbles:!1,target:t.element});this.dispatchEvent(i);var r=f.a.create({target:t.element,bubbles:!1,cwType:"pointerOver"});this.dispatchEvent(r),t=t.parent}},_checkIfPointerLeft:function(e){for(var t=e.relatedTarget,n=this._listenedElements,i=n.length,r=0;r<i;r++)if(n[r].contains(t))return;return this._pointerLeft(e)},_previousPointerMoveView:null,_previousViewAncestors:Object(r.b)(Array),_previousViewAncestorsSwap:Object(r.b)(Array),_pointerLeft:function(e){return this._dispatchPointerEnterOrLeave(e,null),!1},_dispatchPointerEnterOrLeave:function(e,t){if(t!==this._previousPointerMoveView){var n=this._previousViewAncestorsSwap;n.length=0;for(var i=t;i;)n.push(i),i=i.parent;for(var r,a=n.length-1,s=this._previousViewAncestors,o=s.length-1;s[o]===n[a]&&o>=0&&a>=0;)o--,a--;for(r=0;r<=o;r++){var c=s[r];if(!c.isDisposed){var l=f.a.create({cwType:"pointerLeave",bubbles:!1,target:c.element});this.dispatchEvent(l)}}for(r=0;r<=a;r++){var u=n[r],d=f.a.create({cwType:"pointerEnter",bubbles:!1,target:u.element});this.dispatchEvent(d)}this._previousViewAncestors=n,this._previousViewAncestorsSwap=s,this._previousPointerMoveView=t}},willDispatchEvent:l.a,didDispatchEvent:l.a,lockCursor:function(e){var t;switch(e){case"default":t="cw-global-cursor-default";break;case"pointer":t="cw-global-cursor-pointer";break;case"horizontal-resize":t="cw-global-cursor-horizontal-resize";break;case"vertical-resize":t="cw-global-cursor-vertical-resize"}var n=this._cursorLockElement;t&&n.classList.add(t),this._cursorLockClassName=t,Object(s.a)(n,"selectstart",w)},releaseCursor:function(){var e=this._cursorLockClassName,t=this._cursorLockElement;e&&t.classList.remove(e),this._cursorLockClassName=null,Object(o.a)(t,"selectstart",w)},__superMap:{_$a5$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"RootResponder"}}),_=function(e){if(h.a.isPointerSupported){var t=window.document;e===t&&(e=t.body);var n=e.style;n?(n.msTouchAction="none",n.touchAction="none"):u.b.warn("Could not attach `touch-action` property to the `RootResponder`’s element. Some touch events will be handled by default browser behavior instead of going to the `RootResponder`.")}};function b(e){return Object(d.a)(e,window.SVGElementInstance)?e.correspondingElement:e}function y(e){return I(b(e.target))}function I(e){for(var t;e&&!(t=e.view);)e=e.parentNode;return t}function w(e){return e.preventDefault&&e.preventDefault(),!1}var S=new Array(2)},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n(314),r=function(e,t,n,r){return e.removeEventListener(t,Object(i.a)(n)||n,r||!1)}},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n(80),r=n(120),a=n(192),s=i.a.extend({init:function(e){var t;this.__s._$Gb$init.call(this,e),this.isPointerSupported?t="pointer":this.isTouchSupported?t="touch":this.isMouseSupported&&(t="mouse"),this.pointerEventClass=t||null},pointerEventClass:void 0,isPointerSupported:!1,isTouchSupported:!1,isMouseSupported:!1,isMouseWheelSupported:!1,isInputSupported:!1,__superMap:{_$Gb$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"EventCapabilities"}}).create({isPointerSupported:"PointerEvent"in window,isTouchSupported:"createTouch"in document&&!a.a.sharedInstance.isWindows,isMouseSupported:"onmousedown"in document,isMouseWheelSupported:"onwheel"in document||"onmousewheel"in document,isInputSupported:!r.a.get("sharedInstance").get("isIE9OrLower")})},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n(111),r=n(123);function a(e){if(!e)return!0;if(Object(i.a)(e)||Object(r.a)(e))return!e.length;if(e._isCwCollection)return!e.length;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}},function(e,t,n){"use strict";(function(e){n.d(t,"b",function(){return r}),n.d(t,"a",function(){return a});var i=n(183);function r(){return e!==e.parent}function a(){if(r()){var t;return t=e.location!==e.parent.location?document.referrer:document.location.href,i.a.create(t).origin}return null}n(123),n(65)}).call(this,n(6))},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return f});var i=n(41),r=n(34),a=n(1185),s=n(123),o=n(1181),c=n(1198),l=n(118),u=n(495),d=n(421),h=n(225),p=n(198),f=o.a.extend({applicationRedirectName:i.c({type:String}),sizeClass:r.b({readOnly:!0,type:Object,dependencies:["hostInfo"],get:Object.assign(function(){var e=this.hostInfo.sizeClass,t=d.a.create();return e&&(t.horizontal=h.a.getItemForValue(e.horizontal),t.vertical=h.a.getItemForValue(e.vertical)),t},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]).sizeClass,a=d.a.create();return r&&(a.horizontal=h.a.getItemForValue(r.horizontal),a.vertical=h.a.getItemForValue(r.vertical)),a}})}),disableTouchScrolling:!0,init:function(){var e=arguments;this.__s._$gT$init.apply(this,e),this._redirectToCloudOSIfNeeded()},run:function(){var e=this,t=o.a.prototype.run;return this._loadRunDependencies().then(function(){return t.call(e)})},_loadRunDependencies:function(){var e=this,t=this.hostInfo,n=t.regionFormat,i=t.locale,r=[this._initializeFramework()];return a.a.all(r).then(function(){return e._initializeRegionFormatter(i,n)})},_initializeFramework:function(){var e=a.a.resolve();return l.a.initializeWithApplication(this),e},_initializeRegionFormatter:function(e,t){var n=p.a.sharedInstance.current.domain;return Object(u.a)(e,t,n)},_redirectToCloudOSIfNeeded:function(){if(!Object(c.b)()){var t=e.location.pathname.match(/\/applications\/(.*?)\//);if(t&&t[1]){var n=this.applicationRedirectName,i=s.a(n)?n:t[1];e.location="https://"+e.location.hostname+"/"+i+"/"}}},__superMap:{_$gT$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"COSK2Application"}})}).call(this,n(6))},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n(41),r=n(36),a=n(34),s={mixinDependencies:[r.a],errors:Object(a.b)(),validate:function(e){var t,n,r,a,s,o=this.getMetadataByType(i.a),c=Object.keys(o),l=!0;e&&(c=Array.isArray(e)?e:[e]);var u={};for(t in o)if(o.hasOwnProperty(t)&&-1!==c.indexOf(t)){if(!(r=(n=o[t]).validators))continue;for(s=0;s<r.length;s++)(a=r[s]).validate(n.getForObject(this),t,this)||(void 0===u[t]&&(u[t]=[]),u[t].push(a.message),l=!1)}return this.errors=u,l}}},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return l});var i=n(77),r=n(120),a=n(784),s=n(1185),o=n(1187),c=n(248),l=i.a.extend({action:function(t){if(r.a.sharedInstance.isSafari&&r.a.sharedInstance.majorVersion<=7)a.b.warn("Detected Safari 7 or earlier. Not attempting to load LPK: LPK playback will be disabled.");else{var n,i,l,u=c.a.lpkUrl.toString();(n=u,i=s.a.create(),l=document.createElement("script"),l.type="text/javascript",l.async=!0,o.a(l,"load",function(){return i.resolve()}),o.a(l,"error",function(e){return i.reject(e)}),document.body.appendChild(l),l.src=n,i).then(function(){t.isLPKLoaded||(a.b.info("LPK (v"+e.LivePhotosKit.VERSION+") loaded successfully from: "+u),t.isLPKLoaded=!0)}).catch(function(e){a.b.warn("LPK failed to load, functionality will be disabled",e)})}},staticMembers:{__QUALIFIED_CLASS_NAME__:"LPKInitializer"}})}).call(this,n(6))},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n(96);function r(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];return setInterval.apply(void 0,[Object(i.a)(e),t].concat(r))}},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n(422),r=n(410),a=r.b.extend(i.a,{changesClass:r.c,staticMembers:{__QUALIFIED_CLASS_NAME__:"StrongObservableArray"}})},function(e,t,n){"use strict";n.d(t,"a",function(){return c}),n.d(t,"b",function(){return l});var i=n(34),r=n(36),a=n(780),s=n(65),o=n(788),c=i.a.extend({type:o.a,init:function(e){var t=arguments;return"string"==typeof e?this.__s._$cn$init.call(this,{viewOutlet:e}):this.__s._$cn$init.apply(this,t)},initializeMember:function(e,t){var n=arguments,i=this.__s._$hX$initializeMember.apply(this,n),a=this,s="_"+t+"DidChange",o="_"+t,c="_"+t+"_view";return this._internalValueKey=o,this._internalViewKey=c,e.registerMetadata(s,Object(r.f)(t,t+".view",function(e,t){a.childViewControllerDidChange(this,e,t)})),i},childViewControllerDidChange:function(e,t,n){var i=e[this._internalValueKey],r=e[this._internalViewKey];e[this._internalValueKey]=t,e[this._internalViewKey]=n,i===t&&r===n||this.transition.call(e,i,r,t,n,this)},inheritFrom:function(e){var t=arguments;this.__s._$yE$inheritFrom.apply(this,t),this.viewOutlet||(this.viewOutlet=e.viewOutlet)},transition:function(e,t,n,i,r){e&&e.retain(),n&&n.retain();var o=r.viewOutlet;if(o||Object(s.b)("ChildViewController expects a `viewOutlet` to write to"),n&&(n._destinationViewOutlet=o),e!==n){e&&e.willMoveToParentViewController(null),n&&n.willMoveToParentViewController(this);var c=a.a.begin();e!==n&&this._isViewLoaded&&c.set(this.view,o,i),e&&this.removeChildViewController(e,c),n&&this.addChildViewController(n,c),c.end(),e&&e.didMoveToParentViewController(null),n&&n.didMoveToParentViewController(this)}else t!==i&&this._isViewLoaded&&(this.view[o]=i);e&&e.release(),n&&n.release()},__superMap:{_$cn$init:"init",_$hX$initializeMember:"initializeMember",_$yE$inheritFrom:"inheritFrom"},staticMembers:{__QUALIFIED_CLASS_NAME__:"ChildViewControllerProperty"}}),l=function(e){return c.define.apply(c,arguments)}},function(e,t,n){"use strict";n.d(t,"f",function(){return f}),n.d(t,"b",function(){return m}),n.d(t,"a",function(){return y}),n.d(t,"c",function(){return I}),n.d(t,"e",function(){return w}),n.d(t,"g",function(){return C}),n.d(t,"h",function(){return A}),n.d(t,"d",function(){return E});var i=0,r=0,a=null,s=null,o=null,c=null,l=null,u=null,d=null,h=new Float64Array(1),p=null,f={INT_8:a,INT_16:s,INT_32:o,UINT_8:c,UINT_16:l,UINT_32:u,FLOAT_32:d,FLOAT_64:h,typeCount:0};function g(e){p=new ArrayBuffer(e);var t=new Float64Array(p);t.set(h),h=t,f.INT_8=a=new Int8Array(p),f.INT_16=s=new Int16Array(p),f.INT_32=o=new Int32Array(p),f.UINT_8=c=new Uint8Array(p),f.UINT_16=l=new Uint16Array(p),f.UINT_32=u=new Uint32Array(p),f.FLOAT_32=d=new Float32Array(p),f.FLOAT_64=h=new Float64Array(p),r=e}function m(e,t){var n=i=Math.ceil(i/t)*t;for(i+=e;i>r;)g(2*r);return n}g(8388608),m(128,128);for(var v=new Int32Array(32),_=0;_<32;_++)v[_]=-1;function b(e){return Math.ceil(Math.log(e)/Math.LN2)}function y(e){var t=e+8,n=b(t);t=Math.pow(2,n);var i=v[n],r=-1;return i>=0?(i=o[1+((r=i)>>2)],v[n]=i):(r=m(t,8),o[r>>2]=t),r<=0&&CW.fatalError("Allocated a bad block"),r}function I(e){e<=0&&CW.fatalError("Tried to free a block that doesn't exist");var t=b(o[e>>2]);o[1+(e>>2)]=v[t],v[t]=e}function w(e,t,n){var i=e>>2,r=i+n,a=0,s=0;for(a=i,s=t>>2;a<r;a++,s++)o[s]=o[a]}var S=[];function C(e){S.push(e)}var O=[{}];function A(e,t){O[e]=t}function E(e){return O[e]}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n(96),r=function(e){return window.requestAnimationFrame(Object(i.a)(e))}},function(e,t,n){"use strict";function i(e){switch(e){case 0:return".0";case 1:return".1";case 2:return".2";default:return".More"}}n.d(t,"a",function(){return i}),n(172),n(775),n(179),n(65),n(1208),n(308),String},function(e,t,n){"use strict";function i(e){for(var t in e)e.hasOwnProperty(t)&&delete e[t];return e}n.d(t,"a",function(){return i})},function(e,t,n){"use strict";n.d(t,"a",function(){return h});var i=n(357),r=n(125),a=n(1182),s=n(180),o=n(34),c=n(845),l=n(435),u=n(281),d=n(846),h=l.a.extend({viewClass:Object(a.a)({additionalClassNames:Object(a.a)(["cw-list-view"]),mixinDependencies:[i.a]}),view:Object(o.b)({downstreamBindings:{topInset:"(owner).layoutMetrics.topInset"}}),layoutDelegate:Object(s.b)(u.a),collection:Object(o.b)(),presenter:Object(o.b)({defaultValue:Object(s.b)(c.a.extend({itemViewDidMove:function(e,t){var n=e.element.style,i=t.width,a=t.height,s=t.x,o=t.y;Object(r.b)(n,s,o),n.width=i===this.owner.viewportWidth?"100%":i+"px",n.height=a+"px"}})),downstreamBindings:{itemViewClass:"(owner).itemViewClass"}}),itemViewClass:Object(o.b)({readOnly:!0,defaultValue:d.a}),staticMembers:{__QUALIFIED_CLASS_NAME__:"ListViewController"}})},function(e,t,n){"use strict";n.d(t,"a",function(){return h});var i=n(41),r=n(180),a=n(202),s=n(81),o=s.b.Began,c=s.b.Changed,l=s.b.Ended,u=s.b.Failed;function d(e){var t=e.x,n=e.y;return Math.sqrt(t*t+n*n)}var h=s.a.extend({_correctedStartingLocation:null,translation:Object(i.c)({get:function(){var e=this.location,t=this._correctedStartingLocation;return e&&t?{x:e.x-t.x,y:e.y-t.y}:{x:NaN,y:NaN}},set:function(e){var t=this.location,n=this._correctedStartingLocation;t&&n&&(n.x=t.x-e.x,n.y=t.y-e.y)}}),velocity:Object(i.c)({readOnly:!0,get:function(){var e={x:0,y:0},t=function(t){var n=t.length-1;if(0===n)return"continue";var i=t.reduce(function(e,i,r){if(r===n)return e;var a=t[r+1],s=i.timestamp-a.timestamp,o=Math.min(s,100-e.elapsedTime),c=i.x-a.x,l=i.y-a.y,u=o/s;return e.x+=c*u,e.y+=l*u,e.elapsedTime+=o,e},{x:0,y:0,elapsedTime:0}),r=i.x,a=i.y,s=i.elapsedTime,o={x:r/s,y:a/s};d(o)>d(e)&&(e=o)},n=this._trackedPointerLocations.values(),i=Array.isArray(n),r=0;for(n=i?n:n[Symbol.iterator]();;){var a;if(i){if(r>=n.length)break;a=n[r++]}else{if((r=n.next()).done)break;a=r.value}t(a)}return e}}),location:Object(i.c)({get:function(){var e=0,t=0,n=this._trackedPointerLocations,i=n.values(),r=Array.isArray(i),a=0;for(i=r?i:i[Symbol.iterator]();;){var s;if(r){if(a>=i.length)break;s=i[a++]}else{if((a=i.next()).done)break;s=a.value}var o=s[0];e+=o.x,t+=o.y}var c=n.size;return{x:e/=c,y:t/=c}}}),stateGenerator:a.a,_trackedPointerLocations:Object(r.b)(Map),_updatePointerLocation:function(e){var t=e.pointerId,n=e.clientX,i=e.clientY,r=this._trackedPointerLocations,a=performance.now(),s=r.get(t);s||(s=[],r.set(t,s)),s.unshift({x:n,y:i,timestamp:a});for(var o=a-100,c=s.length-1;c>=0;c--)if(s[c].timestamp>=o){s.splice(c+2);break}},pointerDown:function(e){if(0===this._trackedPointerLocations.size){this._updatePointerLocation(e);var t=this.location;this._correctedStartingLocation=t,this.state=o}else{var n=this.translation;this._updatePointerLocation(e),this.translation=n,this.state=c}},pointerMove:function(e){this._updatePointerLocation(e),this.state=c},pointerUp:function(e){this._updatePointerLocation(e);var t=this._trackedPointerLocations;if(1===t.size)this.state=l;else{var n=this.translation;t.delete(e.pointerId),this.translation=n,this.state=c}},pointerCancel:function(e){this.state=u},reset:function(){this.__s._$2S2$reset.call(this),this._trackedPointerLocations.clear(),this._correctedStartingLocation=null},__superMap:{_$2S2$reset:"reset"},staticMembers:{__QUALIFIED_CLASS_NAME__:"PanGestureRecognizer"}})},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n(793),r=n(422),a=i.a.extend(r.a,{staticMembers:{__QUALIFIED_CLASS_NAME__:"StrongArray"}})},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(e){return e.charAt(0).toUpperCase()+e.slice(1)}},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n(798),r=n(252);function a(e,t,n){var a=void 0,s=void 0,o=void 0;if(e===t||!e&&!t)return!1;if(e&&!t)s=Object.keys(e);else if(!e&&t)o=Object.keys(t);else{var c=null,l=void 0;n&&(c=Object(r.a)(n));var u={},d=void 0,h=void 0,p=void 0,f=void 0;for(l in s=[],a=[],e)u[l]=!0,c&&c[l]||(d=Object.prototype.hasOwnProperty.call(e,l),h=e[l],p=Object.prototype.hasOwnProperty.call(t,l),f=t[l],!p&&d||void 0===f&&void 0!==h?s.push(l):Object(i.a)(h,f)||a.push(l));for(l in o=[],t)u[l]||o.push(l)}return!!(o&&0!==o.length||s&&0!==s.length||a&&0!==a.length)&&{updated:a||[],removed:s||[],added:o||[]}}},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return g});var i=n(80),r=n(784),a=n(1215),s=n(850),o=n(137),c=n(1216),l=n(135),u=n(426),d=n(548),h=a.b,p=s.a,f=o.b,g=i.a.extend({staticMembers:{read:function(t){if("string"==typeof t)t.slice(0,f.length)===f?h.resetWithBase64(t):h.resetWithString(t);else if(t instanceof e.DataView)h.reset(t);else{if(!(t instanceof e.ArrayBuffer))return r.b.warn("Unknown data type, can not read Exif."),null;h.reset(new e.DataView(t))}if(0===h.length)return r.b.warn("Data stream is empty, can not parse Exif."),null;var n=void 0;return Object(l.b)(h)?(n=Object(d.a)(h),u.a.create(n)):p(h)?(n=c.a(h),u.a.create(n)):(r.b.warn("No valid file type found for Exif parsing."),null)},__QUALIFIED_CLASS_NAME__:"Reader"}})}).call(this,n(6))},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return p}),n.d(t,"b",function(){return f});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=DataView.prototype,a=[1,r.getInt8,r.setInt8],s=[1,r.getUint8,r.setUint8],o=[2,r.getInt16,r.setInt16],c=[2,r.getUint16,r.setUint16],l=[4,r.getInt32,r.setInt32],u=[4,r.getUint32,r.setUint32],d=[4,r.getFloat32,r.setFloat32],h=[8,r.getFloat64,r.setFloat64],p=function(){function t(){!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),this._dv=null,this.offset=0,this.cursor=0,this.le=!1}return t.prototype.reset=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!(t instanceof e.DataView))throw new Error("`dataView` argument is not an instance of DataView, can not create ByteStream");return this._dv=t,this.le=i,this.offset=n,this.cursor=n,this},t.prototype.resetWithString=function(t){for(var n=t.length,i=new e.ArrayBuffer(n),r=new e.DataView(i),a=0;a<n;a++)r.setUint8(a,t.charCodeAt(a));return this.reset(r)},t.prototype.resetWithBase64=function(t){if("string"!=typeof t)throw new Error("Input is not a string, can not reset Bytestream");if(!e.atob)throw new Error("Platform does not support `atob`");var n=e.atob(t);return this.resetWithString(n)},t.prototype.slice=function(e){var t=this.cursor,n=t+e>this.length?this.length:t+e;return this._dv.buffer.slice(t,n)},t.prototype.sliceAsDataView=function(t){var n=this.slice(t);return new e.DataView(n)},t.prototype.uint=function(e){for(var t=this.cursor,n=t+e,i=0,r=t;r<n;r++)i<<=8,i|=255&this.uint8;return i},t.prototype.first4BitsAt=function(e){return(240&this._safeRead(s,e))>>4},t.prototype.last4BitsAt=function(e){return 15&this._safeRead(s,e)},t.prototype.charactersInRange=function(e,t){for(var n=this.cursor,i=this.cursor=e<0?0:e,r=t<this.length?t+1-i:this.length-i,a="",s=0;s<r;s++)a+=this.nextChar;return this.cursor=n,a},t.prototype.jumpTo=function(e){var t=this.cursor=this.offset+e;return t<0&&(this.cursor=0),t>=this.length&&(this.cursor=this.length-1),this},t.prototype.rewind=function(e){return(this.cursor-=e)<0&&(this.cursor=0),this},t.prototype.fastForward=function(e){var t=this.length;return(this.cursor+=e)>=t&&(this.cursor=t-1),this},t.prototype._safeRead=function(e,t){var n=void 0===t?this.cursor:t;return n+e[0]>this.length?null:e===s||e===a?e[1].call(this._dv,n):e[1].call(this._dv,n,this.le)},t.prototype._safeWrite=function(e,t,n){var i=void 0===t?this.cursor:t;return i+e[0]>this.length?null:e===s||e===a?e[2].call(this._dv,i,n):e[2].call(this._dv,i,n,this.le)},i(t,[{key:"uint8",set:function(e){this._safeWrite(s,this.cursor++,e)},get:function(){return this._safeRead(s,this.cursor++)}},{key:"int8",set:function(e){this._safeWrite(a,this.cursor++,e)},get:function(){return this._safeRead(a,this.cursor++)}},{key:"uint16",set:function(e){var t=this.cursor+=2;return this._safeWrite(c,t-2,e)},get:function(){var e=this.cursor+=2;return this._safeRead(c,e-2)}},{key:"int16",set:function(e){var t=this.cursor+=2;return this._safeWrite(o,t-2,e)},get:function(){var e=this.cursor+=2;return this._safeRead(o,e-2)}},{key:"uint32",set:function(e){var t=this.cursor+=4;return this._safeWrite(u,t-4,e)},get:function(){var e=this.cursor+=4;return this._safeRead(u,e-4)}},{key:"int32",set:function(e){var t=this.cursor+=4;return this._safeWrite(l,t-4,e)},get:function(){var e=this.cursor+=4;return this._safeRead(l,e-4)}},{key:"float32",set:function(e){var t=this.cursor+=4;return this._safeWrite(d,t-4,e)},get:function(){var e=this.cursor+=4;return this._safeRead(d,e-4)}},{key:"uint64",get:function(){return this.fastForward(4).uint32}},{key:"float64",set:function(e){var t=this.cursor+=8;return this._safeWrite(h,t-8,e)},get:function(){var e=this.cursor+=8;return this._safeRead(h,e-8)}},{key:"nextChar",get:function(){return String.fromCharCode(this.uint8)}},{key:"length",get:function(){return this._dv.byteLength}}]),t}(),f=new p}).call(this,n(6))},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n(850),r=function(e,t){if(t&&Object(i.f)(t),e.cursor=0,!Object(i.a)(e))return i.b.warn("BPlist: Data is not a binary plist, no magic number."),null;var n=Object(i.e)(e);n||i.b.warn("BPlist: data is invalid, too short.");var r={stream:e,trailer:n,offsets:Object(i.d)(e,n)};return Object(i.c)(r,n.topObject)}},function(e,t,n){"use strict";function i(e,t,n,i,r,a,s){var o=e;"fit"===o&&(o=!1),"cover"===o&&(o=!0),o=Boolean(o);var c=arguments.length;6!==c&&(s=c-1);var l=void 0,u=void 0,d=void 0,h=void 0,p=void 0;2===s||3===s?(u=t.height,l=t.width,h=n.height,d=n.width,p=i):(l=t,u=n,d=i,h=r,p=a),l=l||0,u=u||0,l||u||(l=u=1),d=d||0,h=h||0,d||h||(d=h=1);var f=l/u,g=d/h,m=o?f<g:f>g;return(p=p||{}).width=m?d:h*f,p.height=m?d/f:h,p}n.d(t,"b",function(){return i}),n.d(t,"d",function(){return r}),n.d(t,"c",function(){return a}),n.d(t,"a",function(){return s});var r=function(e,t,n,r,a){return i(!1,e,t,n,r,a,arguments.length)},a=function(e,t,n,r,a){return i(!0,e,t,n,r,a,arguments.length)};function s(e,t,n,i,r,s,c,l){isNaN(r)&&(r=.5),isNaN(s)&&(s=.5),(isNaN(c)||c<1)&&(c=1);var u=l||{},d=a(e,t,n,i,o);return u.uncroppedSourceWidth=d.width*c,u.uncroppedSourceHeight=d.height*c,u.cropWidth=n/u.uncroppedSourceWidth*e,u.cropHeight=i/u.uncroppedSourceHeight*t,u.cropX=r*(e-u.cropWidth),u.cropY=s*(t-u.cropHeight),u}var o={}},function(e,t,n){"use strict";function i(e,t){return e&&e.kindOf&&e.kindOf(t)}n.d(t,"a",function(){return i})},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return s});var i=n(1220),r=n(65),a=e.CloudKit,s=i.a.extend({retryRequestInterval:5e3,handleError:function(e,t,n){var i=e.ckErrorCode;if(!i)throw e;switch(i){case a.CKError.CONFLICT:return this.conflict(e,t,n);case a.CKError.ACCESS_DENIED:return this.accessDenied(e,t,n);case a.CKError.ATOMIC_ERROR:return this.contextError(e,t,n);case a.CKError.AUTHENTICATION_FAILED:case a.CKError.AUTHENTICATION_REQUIRED:case a.CKError.AUTH_PERSIST_ERROR:return this.authenticationError(e,t,n);case a.CKError.BAD_REQUEST:return this.clientError(e,t,n);case a.CKError.CONFIGURATION_ERROR:return this.configError(e,t,n);case a.CKError.EXISTS:return this.exists(e,t,n);case a.CKError.INTERNAL_ERROR:return this.serverError(e,t,n);case a.CKError.INVALID_ARGUMENTS:return this.clientError(e,t,n);case a.CKError.NETWORK_ERROR:return this.serverError(e,t,n);case a.CKError.NOT_FOUND:return this.contextError(e,t,n);case a.CKError.QUOTA_EXCEEDED:return this.quotaExceeded(e,t,n);case a.CKError.SERVICE_UNAVAILABLE:case a.CKError.THROTTLED:case a.CKError.TRY_AGAIN_LATER:case a.CKError.UNEXPECTED_SERVER_RESPONSE:return this.serverError(e,t,n);case a.CKError.UNIQUE_FIELD_ERROR:return this.contextError(e,t,n);case a.CKError.UNKNOWN_ERROR:return this.serverError(e,t,n);case a.CKError.VALIDATING_REFERENCE_ERROR:case a.CKError.ZONE_NOT_FOUND:return this.contextError(e,t,n);default:throw e}},contextError:function(e,t,n){r.b("CloudKit error - fatal",e,t)},conflict:function(e,t,n){r.b("CloudKit conflict (op-lock) error",e,t)},exists:function(e,t,n){r.b("CloudKit error - record exists",e,t)},accessDenied:function(e,t,n){r.b("CloudKit error - access denied",e,t)},authenticationError:function(e,t,n){r.b("CloudKit Authentication Error",e,t)},clientError:function(e,t,n){r.b("Client Error",e,t)},serverError:function(e,t,n){r.b("Server error",e,t)},quotaExceeded:function(e,t,n){r.b("CloudKit error - user has exceeded quota",e,t)},configError:function(e,t,n){r.b("CloudKit JS is not being configured correctly.",e,t)},staticMembers:{__QUALIFIED_CLASS_NAME__:"CKOperationHandler"}})}).call(this,n(6))},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n(80),r=n(65),a=n(399),s=i.a.extend({handlerResolver:a.a,handlesType:null,nestedOperationHandlers:null,action:function(e,t){var n=e&&e.operation;if(n){"function"!=typeof this.handlerResolver&&Object(r.b)("OperationHandler#handlerResolver must be a function",{operationHandler:this,handlerResolver:this.handlerResolver});var i=n.type,a=this.handlerResolver(i,this.get("nestedOperationHandlers"));return a||Object(r.b)("CW.Data.OperationHandler#action found no sub-handler to handle sub-operation: %{operationType} - %{subOperationType}",{subOperationType:n.type,operationType:e.type}),a.action(n,t)}},staticMembers:{__QUALIFIED_CLASS_NAME__:"OperationHandler"}})},function(e,t,n){"use strict";n.d(t,"b",function(){return u}),n.d(t,"a",function(){return d});var i=n(36),r=n(34),a=n(192),s=n(41),o=n(80),c=n(1217),l=n(83),u={mixinDependencies:[i.a],media:r.b({strong:!0}),areNewDerivativeRequestsAllowed:r.b(!0),derivativeContainerWidth:r.b(),derivativeContainerHeight:r.b(),derivativePriority:r.b({defaultValue:0,didChange:function(e){var t=this._derivativeLoadRef;t&&(t.priority=e),this._fastRead_derivativePriority=e}}),shouldDerivativeCoverContainer:!1,shouldCorrectDerivativeForDevicePixelRatio:!1,wantsDownsampledDerivatives:!1,nonOutdatedDerivative:r.b({readOnly:!0,strong:!0,dependencies:["media","perfectDerivativeGeometricLength","media.derivativeDidLoad","media.renderableImageDerivativeInfos"],get:function(){var e=this.media,t=this.perfectDerivativeGeometricLength;if(e&&t){var n=e.getBestLoadedDerivative(t,"renderableImage");return n&&this.wantsDownsampledDerivatives&&e.requestDownsample(t,n),n}}}),derivative:r.b({strong:!0,readOnly:!0,dependencies:["nonOutdatedDerivative"],get:Object.assign(function(){var e=this.nonOutdatedDerivative,t=this.media,n=this._derivative_lastMediaPK!==(this._derivative_lastMediaPK=t?t.pk:NaN),i=!(Math.abs(this._derivative_lastAspectRatio-(this._derivative_lastAspectRatio=t?t.aspectRatio:NaN))<.05),r=n||i?null:this._derivative_lastExistentDerivative;return this._derivative_lastExistentDerivative=e||r,this._derivative_lastExistentDerivative},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=this.media,s=this._derivative_lastMediaPK!==(this._derivative_lastMediaPK=a?a.pk:NaN),o=!(Math.abs(this._derivative_lastAspectRatio-(this._derivative_lastAspectRatio=a?a.aspectRatio:NaN))<.05),c=s||o?null:this._derivative_lastExistentDerivative;return this._derivative_lastExistentDerivative=r||c,this._derivative_lastExistentDerivative}})}),derivativeError:r.b(!1),_perfectSize_compoundInt:r.b({readOnly:!0,dependencies:["derivativeContainerWidth","derivativeContainerHeight","media.width","media.height",a.a.sharedInstance.bindingFor("devicePixelRatio")],get:Object.assign(function(){var e=this.shouldCorrectDerivativeForDevicePixelRatio,t=this.shouldDerivativeCoverContainer,n=this.getPath("media.height"),i=this.getPath("media.width"),r=this.derivativeContainerHeight,s=this.derivativeContainerWidth;if(!(s&&r&&i&&n))return NaN;if(e){var o=a.a.sharedInstance.devicePixelRatio;s*=o,r*=o}var l=c.b(t?"cover":"fit",i,n,s,r,h),u=l.width,d=l.height;return 1e9*Math.ceil(u)+Math.ceil(d)},{__CW__getter:function(e,t,n,i){var r=this.shouldCorrectDerivativeForDevicePixelRatio,a=this.shouldDerivativeCoverContainer,s=i.internalGetPath(this,t[3+n]),o=i.internalGetPath(this,t[2+n]),l=i.internalGet(this,t[1+n]),u=i.internalGet(this,t[0+n]);if(!(u&&l&&o&&s))return NaN;if(r){var d=i.internalGetPath(this,t[4+n]);u*=d,l*=d}var p=c.b(a?"cover":"fit",o,s,u,l,h),f=p.width,g=p.height;return 1e9*Math.ceil(f)+Math.ceil(g)}})}),perfectDerivativeGeometricLength:r.b({readOnly:!0,dependencies:["_perfectSize_compoundInt"],get:Object.assign(function(){var e=this._perfectSize_compoundInt,t=e/1e9|0,n=e-1e9*t;return Math.max(t,n)},{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=r/1e9|0,s=r-1e9*a;return Math.max(a,s)}})}),_manageWhetherLoading:i.f({inputs:["media","perfectDerivativeGeometricLength","areNewDerivativeRequestsAllowed","media.renderableImageDerivativeInfos"],callback:function(e,t,n){if(n){this._mwl_lastMediaPK!==(this._mwl_lastMediaPK=e&&e.pk)&&(this.derivativeError=!1);var i=this.nonOutdatedDerivative,r=Boolean(t&&(!i||i.geometricLength<t)&&!this.derivativeError);!r&&this._derivativeLoadRef&&this._ensureNotLoading(),r&&this._ensureLoading(e,t)}}}),_ensureNotLoading:function(){var e=this._derivativeLoadRef;e&&(e.cancel(),this._derivativeLoadRef=null)},_ensureLoading:function(e,t){var n=e.renderableImageDerivativeInfos,i=this._derivativeLoadRef,r=i&&i.derivative;if(r){if(r.geometricLength>=t&&n&&e.derivativeInfosByDerivativeId[r.derivativeId])return;this._ensureNotLoading()}if(e&&t&&n&&n.length){var a=this._derivativeLoadRef=e.requestDerivative(t,"renderableImage");a.priority=this.derivativePriority,a.then(this._derivativeDidLoad,this._derivativeDidError)}},_derivativeDidLoad:l.a(function(){this._derivativeLoadRef=null}),_derivativeDidError:l.a(function(e,t){t===this._derivativeLoadRef&&(this._derivativeLoadRef=null,this.derivativeError=!0)}),_derivativeLoadRef:s.c({strong:!0})},d=o.a.extend(u,{owner:r.b(),staticMembers:{__QUALIFIED_CLASS_NAME__:"PerformanceOrientedImageDerivativeLoader"}}),h={}},function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return a});var i=n(177),r=Object(i.b)("VerticalAlignment",function(e){e("Top"),e("Middle"),e("Bottom")}),a=Object(i.b)("HorizontalAlignment",function(e){e("Left"),e("Middle"),e("Right")})},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=n(177).b("DbWsFieldType",{STRING:"STRING",TIMESTAMP:"TIMESTAMP",BYTES:"BYTES",ENCRYPTED_BYTES:"ENCRYPTED_BYTES",LOCATION:"LOCATION",ASSETID:"ASSETID",INT64:"NUMBER_INT64",DOUBLE:"NUMBER_DOUBLE",REFERENCE:"REFERENCE",STRING_LIST:"STRING_LIST",TIMESTAMP_LIST:"TIMESTAMP_LIST",BYTES_LIST:"BYTES_LIST",ENCRYPTED_BYTES_LIST:"ENCRYPTED_BYTES_LIST",LOCATION_LIST:"LOCATION_LIST",ASSETID_LIST:"ASSETID_LIST",INT64_LIST:"INT64_LIST",DOUBLE_LIST:"DOUBLE_LIST",REFERENCE_LIST:"REFERENCE_LIST",PACKAGE:"PACKAGE",UNKNOWN_NUMBER:"NUMBER_ANY",UNKNOWN_LIST:"EMPTY_LIST"})},function(e,t,n){"use strict";function i(e){return Array.from(new Set(e))}n.d(t,"a",function(){return i})},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n(34),r=n(881),a={mixinDependencies:[n(357).a],horizontalScrollIndicatorClass:r.a,verticalScrollIndicatorClass:r.b,scrollIndicatorsShouldFade:Object(i.b)(!0),didScrollBy:function(e,t,n){if(e||n&&n.deltaX&&this.canScrollHorizontally){var i=this.horizontalScrollIndicator;i&&i.didScroll(n)}if(t||n&&n.deltaY&&this.canScrollVertically){var r=this.verticalScrollIndicator;r&&r.didScroll(n)}},showScrollIndicators:function(){var e=this.horizontalScrollIndicator;e&&e.renewVisibility();var t=this.verticalScrollIndicator;t&&t.renewVisibility()},createScrollIndicatorOptions:function(e){var t=arguments,n=this.__s._$jC$createScrollIndicatorOptions.apply(this,t);return n.scrollIndicatorShouldFade=this.bindingFor("scrollIndicatorsShouldFade"),n},__superMap:{_$jC$createScrollIndicatorOptions:"createScrollIndicatorOptions"}}},function(e,t,n){"use strict";function i(e,t,n){return n!==e.get(t)&&e.set(t,n),e}n.d(t,"a",function(){return i})},function(e,t,n){"use strict";n.d(t,"a",function(){return b});var i=n(1182),r=n(180),a=n(80),s=n(81),o=n(186),c=n(1228),l=n(842),u=n(34),d=n(192),h=n(429),p=n(885),f=n(884),g=n(401),m=n(428),v=s.b.Ended,_={itemViewDidMove:function(e,t){var n=arguments;this.__s._$E_$itemViewDidMove.apply(this,n);var i=this.owner.isCellSelected(t);e.isSelected=i},viewForViewClass:function(e){var t=arguments,n=this.__s._$Hi$viewForViewClass.apply(this,t),i=e.hasMixin(o.a)?n:this.owner,r=n.singleTapGestureRecognizer=c.a.create({event:"selectView",delegate:i});n.addGestureRecognizer(r);var a=n.extendGestureRecognizer=c.a.create({modifiers:[l.a.Shift],event:"extendSelectView",delegate:i});n.addGestureRecognizer(a);var s=n.toggleGestureRecognizer=c.a.create({modifiers:[d.a.sharedInstance.isWindows?l.a.Ctrl:l.a.Cmd],event:"toggleSelectView",delegate:i});return n.addGestureRecognizer(s),n},__superMap:{_$E_$itemViewDidMove:"itemViewDidMove",_$Hi$viewForViewClass:"viewForViewClass"}},b={mixinDependencies:[m.a,o.a,c.b],viewClass:Object(i.a)({init:function(){var e=arguments;this.__s._$kd$init.apply(this,e);var t=this.clearSelectionTapGestureRecognizer=l.b.create({event:"clearSelection",delegate:this});this.addGestureRecognizer(t)},__superMap:{_$kd$init:"init"}}),selectView:function(e){var t=e.state,n=e.view;if(t===v){var i=this.presenter.cellForView(n);i&&"item"===i.cellType&&this.sendEvent("userSelectionRequest",{view:n,operation:g.a.SET})}},extendSelectView:function(e){var t=e.state,n=e.view;if(t===v){var i=this.presenter.cellForView(n);i&&"item"===i.cellType&&this.sendEvent("userSelectionRequest",{view:n,operation:g.a.EXTEND})}},toggleSelectView:function(e){var t=e.state,n=e.view;if(t===v){var i=this.presenter.cellForView(n);i&&"item"===i.cellType&&this.sendEvent("userSelectionRequest",{view:n,operation:g.a.TOGGLE})}},gestureRecognizerShouldReceive:function(e,t){var n=arguments;if(e.instanceOf(c.a)){var i=e.view;return"item"===this.presenter.cellForView(i).cellType}return this.__s._$1Gx$gestureRecognizerShouldReceive.apply(this,n)},userSelectionRequest:function(e){if(e){var t=e.view,n=e.operation,i=this.presenter.cellForView(t);this.selectCell(i,n)}},itemViewClass:Object(i.a)(f.a),presenter:Object(i.a)(_),selectionController:Object(u.b)({defaultValue:Object(r.b)(h.a),downstreamBindings:{collection:"(owner).collection",isMultipleSelectionEnabled:"(owner).isMultipleSelectionEnabled",isEmptySelectionEnabled:"(owner).isEmptySelectionEnabled"}}),selectionDelegate:Object(r.b)(a.a.extend(p.a)),selectItem:function(e,t){if(this.isSelectionEnabled){var n=this.collection.indexOf(e);this.selectItemAtIndex(n,t)}},selectItemAtIndex:function(e,t){if(this.isSelectionEnabled){var n=this.collection.startHandle.at(e);this.userPerformedSelectionOperation(n,t)}},__superMap:{_$1Gx$gestureRecognizerShouldReceive:"gestureRecognizerShouldReceive"}}},function(e,t,n){"use strict";n.d(t,"b",function(){return c}),n.d(t,"a",function(){return d});var i=n(842),r=n(81),a=n(202),s=n(186),o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},c={mixinDependencies:[s.a],gestureRecognizerShouldActivateButton:function(e,t){var n=e.view.element,i=t.target;return n===i||n.contains(i)}},l=r.b.Began,u=r.b.Changed,d=i.b.extend({stateGenerator:a.a,delegate:o({},s.a,c),willGestureSucceed:!1,shouldAllowMovementOutsideTarget:!1,pointerDown:function(e){var t=arguments;this.willGestureSucceed=this._willGestureSucceed(e),this.__s._$hj$pointerDown.apply(this,t),this.state=l},pointerMove:function(e){var t=arguments;this.willGestureSucceed=this._willGestureSucceed(e),this.__s._$lK$pointerMove.apply(this,t);var n=this.state;n!==l&&n!==u||(this.state=u)},pointerUp:function(e){var t=arguments;this.willGestureSucceed=this._willGestureSucceed(e),this.__s._$tD$pointerUp.apply(this,t)},_willGestureSucceed:function(e){return this.delegate.gestureRecognizerShouldActivateButton(this,e)},shouldFailGesture:function(e){var t=arguments;return this.shouldAllowMovementOutsideTarget&&1===this.numberOfTapsRequired?"pointerUp"===e.cwType&&!this._willGestureSucceed(e):this.__s._$zA$shouldFailGesture.apply(this,t)},reset:function(){this.willGestureSucceed=!1,this.__s._$_R$reset.call(this)},didEnterPool:function(){var e=arguments;this.shouldAllowMovementOutsideTarget=!1,this.__s._$114$didEnterPool.apply(this,e)},__superMap:{_$hj$pointerDown:"pointerDown",_$lK$pointerMove:"pointerMove",_$tD$pointerUp:"pointerUp",_$zA$shouldFailGesture:"shouldFailGesture",_$_R$reset:"reset",_$114$didEnterPool:"didEnterPool"},staticMembers:{__QUALIFIED_CLASS_NAME__:"ButtonTapGestureRecognizer"}})},function(e,t,n){"use strict";n.d(t,"a",function(){return h});var i,r,a=n(1185),s=n(78),o=n(65),c=n(156),l=n(554),u=(i=a.a,(r=function(e){var t=i.create();try{e(t.resolve.bind(t),t.reject.bind(t))}catch(e){t.reject(e)}return t}).all=i.all.bind(i),r.race=i.race.bind(i),r.resolve=i.resolve.bind(i),r.reject=i.reject.bind(i),r);function d(e){return function(){var t=e.apply(this,arguments);return new u(function(e,n){return function i(r,a){try{var s=t[r](a),o=s.value}catch(e){return void n(e)}if(!s.done)return u.resolve(o).then(function(e){i("next",e)},function(e){i("throw",e)});e(o)}("next")})}}var h=function(){function e(t,n){!function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this.collection=t,this.container=n}return e.prototype.loadAllRecordsInThisCollection=(i=d(regeneratorRuntime.mark(function e(){var t,n,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!((t=this.collection.length)<=0)){e.next=3;break}return e.abrupt("return");case 3:for(n=[],i=0;i<t;i++)n.push(i);return e.next=7,this.getIncludeExcludeRecords(n);case 7:case"end":return e.stop()}},e,this)})),function(){return i.apply(this,arguments)}),e.prototype.getIncludeExcludeRecords=(n=d(regeneratorRuntime.mark(function e(t){var n,i,r,a,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.getIncludeExcludeIndices(t),i=n.includeIndices,r=n.excludeIndices,a=i||r,e.next=4,this._loadIndicesAndGetRecordNames(a);case 4:return s=e.sent,e.abrupt("return",i?{includeRecords:s}:{excludeRecords:s});case 6:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)}),e.prototype.getIncludeExcludeIndices=function(e){return{includeIndices:e}},e.prototype._loadIndicesAndGetRecordNames=(t=d(regeneratorRuntime.mark(function e(t){var n,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.collection,i=this._getRangesToLoad(t),e.next=4,a.a.all(i.map(function(e){return n.ensureRange(e[0],e[1])}));case 4:return e.abrupt("return",this._getAssetRecordNamesFromMedias(t));case 5:case"end":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)}),e.prototype._getRangesToLoad=function(e){var t=[],n=e,i=Array.isArray(n),r=0;for(n=i?n:n[Symbol.iterator]();;){var a;if(i){if(r>=n.length)break;a=n[r++]}else{if((r=n.next()).done)break;a=r.value}var s=a;void 0===this.collection.encodedObjectAt(s)&&t.push(s)}return l.a(t)},e.prototype._getAssetRecordNamesFromMedias=function(e){for(var t=[],n=0,i=e.length;n<i;n++){var r=e[n],a=this.collection.encodedObjectAt(r),l="number"==typeof a?s.a.getPrimaryKeyForStoreId(a):a,u=l&&c.a.getRecordNameFromPrimaryKey(l);u||o.b("No `recordName` found."),t.push(u)}return t},e;var t,n,i}()},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n(34),r=n(1125),a={show:function(){if(!this.isAttached)return this.paneManager.presentViewController(this)},hide:function(){if(this.isAttached)return this.paneManager.dismissViewController(this)},toggle:function(){this.isAttached?this.hide.apply(this,arguments):this.show.apply(this,arguments)},paneManager:Object(i.b)({readOnly:!0,binding:r.a.bindingFor("application")}),isActivePane:Object(i.b)({readOnly:!0,dependencies:["paneManager.activePane"],get:Object.assign(function(){return this===this.getPath("paneManager.activePane")},{__CW__getter:function(e,t,n,i){return this===i.internalGetPath(this,t[0+n])}})}),keyDown:function(e){var t=this._keyEquivalentViews;if(!t)return!1;for(var n=t.length;n--;){var i=t[n];!i.isDisposed&&i.isAttached&&i.keyEquivalent||t.splice(n,1)}return t.some(function(t){return t&&t.performKeyEquivalent&&t.performKeyEquivalent(e)})},registerKeyEquivalent:function(e){var t=this._keyEquivalentViews||(this._keyEquivalentViews=[]);-1===t.indexOf(e)&&t.push(e)}}},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var i=n(409),r=n(831),a=n(189),s=n(65),o=n(1177),c=n(1195),l=n(1187),u=n(34),d=n(93),h=n(36),p=n(41),f=i.a.extend(r.a,{staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"input",classes:["cw-text-field",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isFocused",truevalue:"cw-focused",attributes:{}}],attributes:{type:{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"type",attributes:{},attribute:"type"},maxlength:{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"maxLength",attributes:{},attribute:"maxlength"},autocomplete:{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"autocomplete",attributes:{},attribute:"autocomplete"},autocorrect:{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"autocorrect",attributes:{},attribute:"autocorrect"},autocapitalize:{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"autocapitalize",attributes:{},attribute:"autocapitalize"},spellcheck:{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"spellcheck",attributes:{},attribute:"spellcheck"},placeholder:{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"placeholder",attributes:{},attribute:"placeholder"},"aria-invalid":{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"hasInvalidValue",attributes:{},attribute:"aria-invalid"},id:{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"id",attributes:{},attribute:"id"}}}},className:"cw-ui-views-text-field",__QUALIFIED_CLASS_NAME__:"TextField"},value:Object(u.b)(""),type:"text",placeholder:void 0,action:"submit",maxLength:null,autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"default",id:null,hasInvalidValue:!1,isEditable:Object(u.b)(!0),isFocusable:Object(u.b)({readOnly:!0,dependencies:["isDisabled"],get:Object.assign(function(){return!this.isDisabled},{__CW__getter:function(e,t,n,i){return!i.internalGet(this,t[0+n])}})}),defaultFocusElement:Object(d.c)("element"),selection:Object(u.b)({cacheable:!1,dependencies:["element"],writeDependencies:["_selection"],get:function(){var e=this.controlElement,t=void 0,n=void 0,i=void 0,r=null;if(""===e.value?t=n=0:("selectionStart"in e&&(t=e.selectionStart),"selectionEnd"in e&&(n=e.selectionEnd)),null===t||null===n){var a=document.selection;if(a){var s=a.type;!s||"None"!==s&&"Text"!==s||(i=(r=a.createRange()).text.length,n=(t=Math.abs(r.moveStart("character",0-(e.value.length+1))))+i)}}return i=-1===t||-1===n?-1:n-t,Object.freeze({start:t,end:n,length:i,value:e.value.slice(t,n)})},set:Object.assign(function(e){this.set("_selection",e)},{__CW__setter:function(e,t,n,i,r){n[0+i]=e}}),writeDependencySetPathMap:["false"]}),select:function(){var e=this.controlElement;e&&e.select()},isDefaultTabbingEnabled:!0,allowedCharacters:void 0,isIMEInputActive:Object(u.b)(!1),didFocus:function(){this.controlElement.focus()},didBlur:function(){this.sendEvent("didEndEditing",this)},input:function(e){this._elementValueDidChange(),this._compositionDidEnd=!1},keyDown:function(e){if(e.which===a.a.RETURN){this.sendEvent("didEndEditing",this);var t=this.action,n=!1;return t&&(n=this.sendEvent(t,this)),this.select(),n}return!1},compositionStart:function(e){this.set("isIMEInputActive",!0)},compositionEnd:function(e){this._compositionDidEnd=!0,this.set("isIMEInputActive",!1)},_compositionDidEnd:!1,handleSelectionChange:function(e){this.propertyChanged("selection")},init:function(){var e=arguments;this.__s._$37j$init.apply(this,e);var t=this.controlElement;this.isDefaultTabbingEnabled||t.setAttribute("tabindex","-1");var n=this.placeholder;n&&t.setAttribute("aria-label",n);var i=this.allowedCharacters;!i||i instanceof RegExp||Object(s.b)("Must use only RegExp for TextField character validation.")},_isPlaceholderShowing:Object(u.b)({dependencies:["value","isIMEInputActive"],readOnly:!0,get:Object.assign(function(){if(!this.isIMEInputActive){var e=this.value;if(!Object(o.a)(e)||""===e)return!0}return!1},{__CW__getter:function(e,t,n,i){if(!i.internalGet(this,t[1+n])){var r=i.internalGet(this,t[0+n]);if(!Object(o.a)(r)||""===r)return!0}return!1}})}),_valueDidChange:Object(h.f)("value",function(e){var t=this.controlElement;t.value!==e&&(t.value=Object(o.a)(e)?e:"")}),_elementValueDidChange:function(){var e=this.controlElement,t=this.value,n=e.value;(this._compositionDidEnd||t!==n)&&(this.isIMEInputActive?this.value=n:this._isInputAllowed(n)?this.set("value",n):e.value=t||"")},_isInputAllowed:function(e){var t=this.allowedCharacters;return!t||!e||t.test(e)},_selectionEventElement:null,_attachmentDidChange:Object(h.e)("element","isAttached",function(e,t){var n=this._selectionEventElement;!n||n===e&&t||(Object(c.a)(n,"select",this._handleSelectionChangeBound),this._selectionEventElement=null),e&&t&&(this._selectionEventElement=e,Object(l.a)(e,"select",this._handleSelectionChangeBound))}),_handleSelectionChangeBound:Object(p.c)(function(){return this.handleSelectionChange.bind(this)}),_selection:Object(u.b)(),_selectionDidChange:Object(h.f)("_selection",function(e){if(e){var t=this.controlElement,n=e.start,i=e.end;this.focus();var r=null;if(t.setSelectionRange)t.setSelectionRange(n,i);else{(r=t.createTextRange()).move("character",n),r.moveEnd("character",i-n);try{r.select()}catch(e){return null}}}}),_statusDidChange:Object(h.f)("isDisabled","isEditable",function(e,t){var n=this.controlElement;e?n.setAttribute("disabled","disabled"):n.removeAttribute("disabled"),t?n.removeAttribute("readonly"):n.setAttribute("readonly","readonly")}),__superMap:{_$37j$init:"init"}})},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var i=n(121),r=n(65),a=n(436),s=n(180),o=n(41),c=n(1139),l={},u=[],d=c.a.extend(a.a,{_array:Object(s.b)(Array),encodedRawSplice:function(e,t){var n,r,a,s=this._map,o=this._array,c=e+t;for(n=e;n<c;n++)r=o[n],delete s[Object(i.a)(r)];for(u.length=2,u[0]=e,u[1]=t,c=arguments.length,n=2;n<c;n++)r=arguments[n],a=Object(i.a)(r),s.hasOwnProperty(a)||(s[a]=e+u.length-2,u.push(r));return o.splice.apply(o,u)},encodedAdd:function(e){var t=Object(i.a)(e),n=this._map;return!n.hasOwnProperty(t)&&(n[t]=this._array.push(e)-1,!0)},encodedRemove:function(e){var t=Object(i.a)(e),n=this._map;if(!n.hasOwnProperty(t))return!1;var r=n[t];delete n[t];var a=this._array,s=a[r];if(!Object.is(s,e))for(var o=this.get("length"),c=0;c<o;c++){var l=a[c];if(Object.is(l,e)){r=c;break}}return a.splice(r,1),!0},encodedContains:function(e){return c.a.prototype.encodedContains.apply(this,arguments)},encodedObjectAt:function(e){return this._array[e]},length:Object(o.c)({readOnly:!1,get:h,set:function(e){e<0&&Object(r.b)("Invalid length %{length}. Must be a positive integer.",{length:e,object:this});var t=this.get("_internalLength"),n=t-e;n>0?this.splice(e,n):n<0&&this.splice(t,0,void 0)}}),_internalLength:Object(o.c)({readOnly:!0,get:h}),swap:function(e,t){var n=this.objectAt(t),i=this.objectAt(e);return this.setIndex(e,l),this.setIndex(t,i),this.setIndex(e,n),this},staticMembers:{__QUALIFIED_CLASS_NAME__:"OrderedSet"}});function h(){return this._array.length}},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return c});var i=n(192),r=n(409),a=n(34),s=n(36),o=n(1206),c=r.a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"canvas",classes:["cw-spinner-view"],styles:{height:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"size",attributes:{},unit:"px",property:"height"},width:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"size",attributes:{},unit:"px",property:"width"},display:{type:"STYLEOUTLET",bindingtype:"IFBINDING",name:"isVisible",truevalue:"",falsevalue:"none",attributes:{},unit:null,property:"display"}},attributes:{title:{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"tooltip",attributes:{},attribute:"title"}}}},className:"cw-ui-spinner-view",__QUALIFIED_CLASS_NAME__:"SpinnerView"},size:Object(a.b)(32),color:"#000000",image:Object(a.b)({set:function(e){if("string"==typeof e){var t=new Image;return t.src=e,t}return e}}),tooltip:Object(a.b)(null),period:600,tickCount:12,tickReach:.54375,tickWidth:(12-90/255)/64,isVisible:Object(a.b)(!0),isAnimating:Object(a.b)({readOnly:!0,dependencies:["isVisible","isAttached"],get:Object.assign(function(){return this.isVisible&&this.isAttached},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])&&i.internalGet(this,t[1+n])}})}),drawStep:function(e){this._currentStep=e;var t=this._canvas,n=this._context,r=this.size*i.a.sharedInstance.devicePixelRatio;r!==t.width||r!==t.height?t.width=t.height=r:n.clearRect(0,0,r,r),this._backingSize=r,n.save(),n.translate(r/2,r/2),n.rotate(2*e*Math.PI/this.tickCount),this.image?this._drawImageContent():this._drawGeneratedContent(),n.restore()},drawTick:function(e,t,n){var i=this.tickReach*t/2,r=this.tickWidth*t/2;!function(e,t,n,i,r,a){a=Math.min(i/2,r/2,void 0===a?1/0:a),e.beginPath(),e.moveTo(t+a,n),e.arcTo(t+i,n,t+i,n+r,a),e.arcTo(t+i,n+r,t,n+r,a),e.arcTo(t,n+r,t,n,a),e.arcTo(t,n,t+i,n,a),e.closePath(),e.fill()}(e,-r/2,-t/2,r,i)},_tickOpacities:{12:[1,.90196,.76078,.65098,.54118,.43137,.38039,.32157,.25882,.21961,.2,.16863]},_animationFrameId:0,_backingSize:0,init:function(e){var t=arguments;this.__s._$27Y$init.apply(this,t),this._canvas=this.element,this._context=this._canvas.getContext("2d")},dispose:function(){var t=arguments;e.cancelAnimationFrame(this._animationFrameId),this.__s._$2Bo$dispose.apply(this,t)},_startOrStopAnimation:Object(s.f)("isAnimating",function(t){if(t){if(this._animStartTime)return;this._animStartTime=Date.now(),this.drawStep(0),this._tick()}else this._animStartTime=null,e.cancelAnimationFrame(this._animationFrameId),this._animationFrameId=null,this.isInitialized&&this.drawStep(0)}),_tick:function(){if(this.isAnimating){this._animationFrameId=Object(o.a)(this._tick.bind(this));var e=this.tickCount,t=this.period/e,n=((Date.now()-this._animStartTime)/t|0)%e;n!==this._currentStep&&this.drawStep(n)}},_drawImageContent:function(){var e=this.image,t=this._context,n=this._backingSize;t.drawImage(e,-n/2,-n/2,n,n)},_drawGeneratedContent:function(){var e=this._context,t=this._backingSize,n=this.tickCount;e.fillStyle=this.color;for(var i=0;i<n;i++)e.globalAlpha=this._opacityForTickOfCount(i,n),this.drawTick(e,t),e.rotate(-2*Math.PI/n);e.globalAlpha=1},_opacityForTickOfCount:function(e,t){var n=this._tickOpacities[t];if(n)return n[e];var i=2/t,r=e/(t-1),a=Math.pow(r,.6),s=.7*(.5-.5*Math.cos(a*Math.PI))+.3*a;return s*i+1*(1-s)},__superMap:{_$27Y$init:"init",_$2Bo$dispose:"dispose"}})}).call(this,n(6))},function(e,t,n){"use strict";function i(e){if(!(e=String(e||"")))return 0;var t=++a;if(!document.body)return document.write('<style id="runtimeStylesheet'+t+'" type="text/css">'+e+"</style>"),t;var n=document.createElement("style");if(n.setAttribute("type","text/css"),n.setAttribute("id","runtimeStylesheet"+t),document.body.appendChild(n),n.styleSheet)n.styleSheet.cssText=e;else{var i=n.childNodes[0],r=document.createTextNode(e);i?n.replaceChild(r,i):n.appendChild(r)}return t}function r(e){document.body?l("runtimeStylesheet"+e):setTimeout(l,0,"runtimeStylesheet"+e)}n.d(t,"b",function(){return i}),n.d(t,"c",function(){return r}),n.d(t,"a",function(){return u});var a=0,s=[],o=void 0,c=function(){o=null,i(s.join("\n\n")),s.length=0},l=function(e){var t=document.getElementById(e);t&&t.parentNode&&t.parentNode.removeChild(t)};function u(e,t){var n;n=e+" {\n        background-image: url('data:image/svg+xml;utf8,"+String(t).trim()+"');\n    }",s.push(n),o||(o=setTimeout(c))}},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var i=n(34),r=n(65),a=n(1179),s=n(36),o=n(1174),c=n(179),l=n(1127),u=i.a.extend({readOnly:!0,dependencies:null,writeDependencies:[],get:function(e,t,n,i){return i.internalGet(this,t[0+n])},init:function(e){e||r.b("AnimatedComputedProperty cannot be defined without a single params hash."),Object.prototype.hasOwnProperty.call(e,"duration")&&Object.prototype.hasOwnProperty.call(e,"decideDuration")&&r.b("Cannot configure both `duration` number and `decideDuration` method on AnimatedComputedProperty."),this.didChange=e.didChange,this._creationParams=e,this.__s._$Pg$init.call(this)},wasRegistered:function(e,t,n){var i=arguments;n&&r.b("Cannot override AnimatedComputedProperty properties."),this._registrationKey&&this._registrationKey!==t&&r.b("Cannot register AnimatedComputedProperty on two different keys."),this._registrationKey=t,this._createAssistantMetadatasIfNeeded(),this.__s._$YO$wasRegistered.apply(this,i),e.registerMetadata(this._sourceObservablePropertyKey,this._sourceObservableProperty),e.registerMetadata(this._semifinalAnimatedPropertyKey,this._semifinalAnimatedProperty),e.registerMetadata(this._assistantObserverKey,this._assistantObserver)},_createAssistantMetadatasIfNeeded:function(){if(!this._hasCreatedAssistants){this._hasCreatedAssistants=!0;var e=this,t=this._creationParams,n=this._registrationKey;this._sourceObservablePropertyKey="_sourceObservablePropertyFor_"+n,this._semifinalAnimatedPropertyKey="_semifinalAnimatedPropertyFor_"+n,this._assistantObserverKey="_assistantObserverFor_"+n,this.dependencies=[this._semifinalAnimatedPropertyKey];var r=a.a(t);delete r.decideDuration,delete r.duration,delete r.updatesDurationWhenTheseChange,delete r.didChange,this._sourceObservableProperty=i.b(r),this._semifinalAnimatedProperty=Object(l.b)(NaN),this._assistantObserver=s.f({inputs:[this._sourceObservablePropertyKey].concat(t.updatesDurationWhenTheseChange||[]),callback:function(n){for(var i,r=this[e._semifinalAnimatedPropertyKey],a=+n===n&&+r===r,s=arguments.length,l=Array(s>1?s-1:0),u=1;u<s;u++)l[u-1]=arguments[u];var d=a?o.a(t.decideDuration)?(i=t.decideDuration).call.apply(i,[this,n,r].concat(l)):c.a(t.duration)?t.duration:200:0;d>0?this.animate(e._semifinalAnimatedPropertyKey,n,d):this[e._semifinalAnimatedPropertyKey]=n}})}},clone:function(){return this.constructor.create(this._creationParams)},requiresSupport:l.a,__superMap:{_$Pg$init:"init",_$YO$wasRegistered:"wasRegistered"},staticMembers:{__QUALIFIED_CLASS_NAME__:"AnimatedComputedProperty"}}),d=function(){return u.create.apply(u,arguments)}},function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return a});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r={OK:200,OK_USER_CANCELLED:230,OK_WITH_ISSUES:260};Object.freeze(r);var a=function(){function e(t,n){if(function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),!(Number.isInteger(t)&&t>0))throw new Error("AsyncResult, `status` must be an unsigned integer");this.status=t,n&&(this.body=n)}return i(e,[{key:"ok",get:function(){return 2===Math.floor(this.status/100)}}]),e}();a.OK=new a(r.OK)},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=n(430).a.extend({processAction:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return e.apply(void 0,n)},staticMembers:{__QUALIFIED_CLASS_NAME__:"Processor"}})},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=[[4352,4607],[11904,12031],[12032,12255],[12288,12351],[12352,12447],[12448,12543],[12544,12591],[12592,12687],[12688,12703],[12704,12735],[12800,13055],[13056,13311],[13312,19893],[19968,40959],[40960,42127],[42128,42191],[44032,55203],[63744,64255],[65072,65103]],r=function(e){var t=i,n=void 0;if(!e)return!1;for(var r=0,a=t.length;r<a;++r)if(e>=(n=t[r])[0]&&e<=n[1])return!0;return!1},a=function(e){if(0===(e=e.trim()).length)return!1;for(var t=0,n=e.length-1;t<=n;)if(!r(e.charCodeAt(t++))||!r(e.charCodeAt(n--)))return!1;return!0}},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n(842),r=n(1184),a=n(81),s=n(403),o=n(83),c=i.b.extend(s.a).extend({requiredHoldDuration:500,pointerDown:function(){var e=arguments;return this._longPressTimeout=r.a(this._finishLongTapGesture,this.requiredHoldDuration),this.__s._$8n$pointerDown.apply(this,e)},pointerUp:function(){var e=arguments;this.pauseStateChanges();var t=this.__s._$AB$pointerUp.apply(this,e);return this.state=a.b.Failed,this.resumeStateChanges(),t},_finishLongTapGesture:Object(o.a)(function(){var e=this;this.sequence.gestureRecognizers.forEach(function(t){t!==e&&(t.state=a.b.Failed)}),this.state=a.b.Ended}),reset:function(){var e=arguments;return clearTimeout(this._longPressTimeout),this._longPressTimeout=void 0,this.__s._$Jv$reset.apply(this,e)},__superMap:{_$8n$pointerDown:"pointerDown",_$AB$pointerUp:"pointerUp",_$Jv$reset:"reset"},staticMembers:{__QUALIFIED_CLASS_NAME__:"LongPressGestureRecognizer"}})},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return f});var i=n(788),r=n(34),a=n(1178),s=n(36),o=n(189),c=n(1174),l=n(1187),u=n(1195),d=n(824),h=n(83),p=n(350),f=i.a.extend({primaryInteractionMode:r.b(),collection:r.b({strong:!0}),media:r.b({strong:!0}),shouldHideMostProminentDisplayOfMediaWithPK:r.b(),viewClass:p.a.extend(d.a),customPresenterViewModifications:r.b(),view:r.b({downstreamBindings:{collection:"(owner).collection",desiredMedia:"(owner).media",primaryInteractionMode:"(owner).primaryInteractionMode",shouldHideMostProminentDisplayOfMediaWithPK:"(owner).shouldHideMostProminentDisplayOfMediaWithPK",customPresenterViewModifications:"(owner).customPresenterViewModifications"}}),surrogateOneUpNavigee:r.b({dependencies:["view"],get:Object.assign(function(e){return e||this.view},{__CW__getter:function(e,t,n,i){return e||i.internalGet(this,t[0+n])}}),writeDependencies:[],set:a.a}),useSurrogateOneUpNavigee:function(e){this.surrogateOneUpNavigee=e},isFocusable:r.b(!0),autoFocusOnAttach:s.f("isAttached",function(e){e&&this.focus()}),keyDown:function(t){var n=this.surrogateOneUpNavigee,i="",r=void 0;switch(t.keyCode){case o.a.UP:case o.a.LEFT:i="goToPreviousUnobtrusively",n.repetitionAction!==i&&n[i](),t.preventDefault();break;case o.a.DOWN:case o.a.RIGHT:i="goToNextUnobtrusively",n.repetitionAction!==i&&n[i](),t.preventDefault();break;case o.a.EQUALS:n.zoomInOneStepIfPossible(),i="zoomInOneStepIfPossible";break;case o.a.MINUS:n.zoomOutOneStepIfPossible(),i="zoomOutOneStepIfPossible";break;case o.a.DIGIT_0:n.zoomTo1IfPossible();break;case o.a.DIGIT_9:n.zoomToFitIfPossible();break;case o.a.Z:n.toggleZoomIfPossible();break;case o.a.SPACE:case o.a.ENTER:if((r=this.getPath("view.desiredMediaView"))&&c.a(r.togglePlayback)){r.togglePlayback();break}break;case o.a.ESC:this.sendEvent("popViewController")}i&&!n.repetitionAction&&(l.a(e.document,"keyup",this._endRepetitionAction),l.a(e.document,"mousedown",this._endRepetitionAction),l.a(e,"blur",this._endRepetitionAction)),n.repetitionAction=i},_endRepetitionAction:h.a(function(){var t=this.surrogateOneUpNavigee;u.a(e.document,"keyup",this._endRepetitionAction),u.a(e.document,"mousedown",this._endRepetitionAction),u.a(e,"blur",this._endRepetitionAction),t.repetitionAction&&(t.repetitionAction="")}),staticMembers:{__QUALIFIED_CLASS_NAME__:"PhotosOneUpViewController"}})}).call(this,n(6))},function(e,t,n){"use strict";n.d(t,"a",function(){return h});var i=n(34),r=n(39),a=n(121),s=n(1173),o=n(65),c=n(36),l=n(788),u=n(409),d=n(357),h={mixinDependencies:[n(105).a],baseInsetsProvider:i.b(),automaticInsetsRecipients:[],baseInsetTop:i.b(0),baseInsetLeft:i.b(0),baseInsetRight:i.b(0),baseInsetBottom:i.b(0),insetTop:i.b({readOnly:!0,dependencies:["baseInsetTop"],get:Object.assign(function(){return this.baseInsetTop+p(this._insetTops)},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])+p(this._insetTops)}})}),insetLeft:i.b({readOnly:!0,dependencies:["baseInsetLeft"],get:Object.assign(function(){return this.baseInsetLeft+p(this._insetLefts)},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])+p(this._insetLefts)}})}),insetRight:i.b({readOnly:!0,dependencies:["baseInsetRight"],get:Object.assign(function(){return this.baseInsetRight+p(this._insetRights)},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])+p(this._insetRights)}})}),insetBottom:i.b({readOnly:!0,dependencies:["baseInsetBottom"],get:Object.assign(function(){return this.baseInsetBottom+p(this._insetBottoms)},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])+p(this._insetBottoms)}})}),registerInsetTop:function(e,t){this._registerInset("top",e,t)},registerInsetLeft:function(e,t){this._registerInset("left",e,t)},registerInsetRight:function(e,t){this._registerInset("right",e,t)},registerInsetBottom:function(e,t){this._registerInset("bottom",e,t)},insetWidth:i.b({readOnly:!0,dependencies:["viewportWidth","insetLeft","insetRight"],get:Object.assign(function(){return Math.max(0,this.viewportWidth-this.insetLeft-this.insetRight)},{__CW__getter:function(e,t,n,i){return Math.max(0,i.internalGet(this,t[0+n])-i.internalGet(this,t[1+n])-i.internalGet(this,t[2+n]))}})}),insetHeight:i.b({readOnly:!0,dependencies:["viewportHeight","insetTop","insetBottom"],get:Object.assign(function(){return Math.max(0,this.viewportHeight-this.insetTop-this.insetBottom)},{__CW__getter:function(e,t,n,i){return Math.max(0,i.internalGet(this,t[0+n])-i.internalGet(this,t[1+n])-i.internalGet(this,t[2+n]))}})}),insetCenterX:i.b({readOnly:!0,dependencies:["insetLeft","insetWidth","viewportWidth"],get:Object.assign(function(){return Math.min(this.viewportWidth,Math.round(this.insetLeft+this.insetWidth/2))},{__CW__getter:function(e,t,n,i){return Math.min(i.internalGet(this,t[2+n]),Math.round(i.internalGet(this,t[0+n])+i.internalGet(this,t[1+n])/2))}})}),insetCenterY:i.b({readOnly:!0,dependencies:["insetTop","insetHeight","viewportHeight"],get:Object.assign(function(){return Math.min(this.viewportHeight,Math.round(this.insetTop+this.insetHeight/2))},{__CW__getter:function(e,t,n,i){return Math.min(i.internalGet(this,t[2+n]),Math.round(i.internalGet(this,t[0+n])+i.internalGet(this,t[1+n])/2))}})}),insetTopCenterTop:i.b({readOnly:!0,dependencies:["insetTop"],get:Object.assign(function(){return this.insetTop/2},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])/2}})}),insetLeftCenterLeft:i.b({readOnly:!0,dependencies:["insetLeft"],get:Object.assign(function(){return this.insetLeft/2},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])/2}})}),insetRightCenterRight:i.b({readOnly:!0,dependencies:["insetRight"],get:Object.assign(function(){return this.insetRight/2},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])/2}})}),insetBottomCenterBottom:i.b({readOnly:!0,dependencies:["insetBottom"],get:Object.assign(function(){return this.insetBottom/2},{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])/2}})}),registerInsets:function(e,t,n,i,a){r.a.pause(),this.registerInsetTop(e,t),this.registerInsetLeft(e,n),this.registerInsetRight(e,i),this.registerInsetBottom(e,a),r.a.resume()},_registerInset:function(e,t,n){var i="inset"+e[0].toUpperCase()+e.slice(1),r="_"+i+"s",s=this[r];s||(s=this[r]=Object.create(null));var o=a.a(t),c=n>=0?n:n<0?n:0;s[o]!==c&&(s[o]=c,this.propertyChanged(i))},init:function(){var e=arguments;this.__s._$22m$init.apply(this,e),this._setUpInsetsRecipients()},_setUpInsetsRecipients:function(){(this.automaticInsetsRecipients||f).forEach(this._setUpInsetsRecipientAtPath,this)},_setUpInsetsRecipientAtPath:function(e){var t=e.replace(/\./g,"__"),n=t+"_recipientObject",i=t+"_insetTop",a=t+"_insetLeft",c=t+"_insetRight",l=t+"_insetBottom";this.observe(e,"insetTop","insetLeft","insetRight","insetBottom",function(e,t,u,d,p){var f=this[n],g=f!==e;g&&(f&&f.registerInsets(this,0,0,0,0),this[n]=e),e&&(s.a(e,h)||o.b("Object set up as an Insets recipient lacks InsetsSupport."),r.a.pause(),(this[i]!==t||g)&&(this[i]=t,e.registerInsetTop(this,t)),(this[a]!==u||g)&&(this[a]=u,e.registerInsetLeft(this,u)),(this[c]!==d||g)&&(this[c]=d,e.registerInsetRight(this,d)),(this[l]!==p||g)&&(this[l]=p,e.registerInsetBottom(this,p)),r.a.resume())})},_maintainBaseInsets:c.f({inputs:["baseInsetsProvider","baseInsetsProvider.insetTop","baseInsetsProvider.insetLeft","baseInsetsProvider.insetRight","baseInsetsProvider.insetBottom"],callback:function(e,t,n,i,a){var s=this._lastBIP,o=s!==e;o&&(s&&this.registerInsets(s,0,0,0,0),this._lastBIP=e),e&&(r.a.pause(),(this._lastBIT!==t||o)&&(this._lastBIT=t,this.registerInsetTop(e,t)),(this._lastBIL!==n||o)&&(this._lastBIL=n,this.registerInsetLeft(e,n)),(this._lastBIR!==i||o)&&(this._lastBIR=i,this.registerInsetRight(e,i)),(this._lastBIB!==a||o)&&(this._lastBIB=a,this.registerInsetBottom(e,a)),r.a.resume())}}),shouldRenderInsetsToScrollIndicators:i.b(!0),_automaticallyRenderInsetsToScrollIndicators:c.f("shouldRenderInsetsToScrollIndicators","insetTop","insetLeft","insetRight","insetBottom",function(){this.shouldRenderInsetsToScrollIndicators&&this.renderInsetsToScrollIndicators()}),renderInsetsToScrollIndicators:function(){var e=this.instanceOf(l.a)?this.view:this;if(s.a(e,u.a)&&e.hasMixin(d.a)&&(this===e||!e.hasMixin(h))){var t=this.insetTop,n=this.insetLeft,i=this.insetRight,r=this.insetBottom,a=e.verticalScrollIndicator;a&&a.style.set("margin-right",i).set("margin-bottom",r).set("margin-top",t).set("position","absolute");var o=e.horizontalScrollIndicator;o&&o.style.set("margin-bottom",r).set("margin-right",i).set("margin-left",n).set("position","absolute")}},shouldRenderInsetsAsPositioning:i.b(!1),_automaticallyRenderInsetsAsPositioning:c.f("shouldRenderInsetsAsPositioning","insetTop","insetLeft","insetRight","insetBottom",function(){this.shouldRenderInsetsAsPositioning&&this.renderInsetsAsPositioning()}),renderInsetsAsPositioning:function(){var e=this.instanceOf(l.a)?this.view:this;s.a(e,u.a)&&e.style.set("top",this.insetTop).set("left",this.insetLeft).set("right",this.insetRight).set("bottom",this.insetBottom)},__superMap:{_$22m$init:"init"}};function p(e){if(!e)return 0;var t=0;for(var n in e)t+=Number(e[n])||0;return t}var f=[]},function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"b",function(){return u});var i=n(1184),r=n(65),a=n(68),s=n(774),o={dispose:function(){var e=arguments;this._throttledFunctionKeys.forEach(this._cleanUpThrottledFunctionForDispose,this),this.__s._$6l$dispose.apply(this,e)},_throttledFunctionDataForKey:function(e){var t="_"+e+"_throttledFunctionData",n=this.hasOwnProperty(t)&&this[t];return n||(n=this[t]=new d(this[t])),n},_cleanUpThrottledFunctionForDispose:function(e){this._fireThrottledFunctionIfNeeded(e);var t=this._throttledFunctionDataForKey(e);clearTimeout(t.timeoutId)},_fireThrottledFunctionIfNeeded:function(e){var t=this._throttledFunctionDataForKey(e);clearTimeout(t.timeoutId);var n=t.status;if(0!==n)if(1===n)t.status=0;else if(2===n){t.status=1;var r=t.args;if(t.func.apply(this,r),1===t.status)for(var a=r.length,s=0;s<a;s++)r[s]=null;t.timeoutId=i.a(c,t.time,this,e)}},__superMap:{_$6l$dispose:"dispose"}},c=function(e,t){e||r.b("ThrottledFunction lost its object.",arguments),e._fireThrottledFunctionIfNeeded(t)},l=a.a.extend({requiresSupport:o,func:null,throttleTime:100,shouldAlwaysDefer:!1,init:function(e,t,n){this.func=e,void 0!==t&&(this.throttleTime=t),void 0!==n&&(this.shouldAlwaysDefer=n),this.__s._$_4$init.call(this)},initializeMember:function(e,t){e._throttledFunctionKeys=e._throttledFunctionKeys||[],e.hasOwnProperty("_throttledFunctionKeys")||(e._throttledFunctionKeys=e._throttledFunctionKeys.slice()),e._throttledFunctionKeys.push(t);var n=e._throttledFunctionDataForKey(t);n.time=this.throttleTime,n.shouldAlwaysDefer=this.shouldAlwaysDefer;var r=function(){var e=this._throttledFunctionDataForKey(t);(0!==e.status||(e.shouldAlwaysDefer||(e.status=1,e.func.apply(this,arguments)),e.timeoutId=i.a(c,e.time,this,t),e.shouldAlwaysDefer))&&(s.a(e.args,arguments,0,0),e.status=2)},a=this.func;return n.func=function(){a.apply(this,arguments)&&r.apply(this,arguments)},r},__superMap:{_$_4$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"ThrottledFunction"}}),u=function(e,t,n){return l.create.apply(l,arguments)},d=function(e){this.args=[],e&&Object.assign(this,e)};d.prototype={status:0,args:null,timeoutId:0,time:-1,shouldAlwaysDefer:!1,func:null}},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n(34),r=n(36),a={mixinDependencies:[n(105).a],isViewportSizeDOMWritingEnabled:i.b(!0),_renderViewportSize:r.f("viewportWidth","viewportHeight","isViewportSizeDOMWritingEnabled",function(e,t,n){this.style.set("width",n?e:void 0).set("height",n?t:void 0)})}},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n(34),r=n(39),a={mouseX:i.b(NaN),mouseY:i.b(NaN),pointerMove:function(e){var t=this.element.getBoundingClientRect();return r.a.pause(),this.mouseX=e.clientX-t.left,this.mouseY=e.clientY-t.top,r.a.resume(),!1},pointerLeave:function(){return r.a.pause(),this.mouseX=this.mouseY=NaN,r.a.resume(),!1}}},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n(1127),r=n(34),a=n(36),s={mixinDependencies:[n(105).a,i.a],retractionAttachment:r.b(null),retractionAmount:i.b(0),fadesWhileRetracting:r.b(!1),retractionAxis:r.b({readOnly:!0,dependencies:["retractionAttachment"],get:Object.assign(function(){switch(this.retractionAttachment){case"top":case"bottom":return"vertical";case"left":case"right":return"horizontal";default:return null}},{__CW__getter:function(e,t,n,i){switch(i.internalGet(this,t[0+n])){case"top":case"bottom":return"vertical";case"left":case"right":return"horizontal";default:return null}}})}),retractionDirection:r.b({readOnly:!0,dependencies:["retractionAttachment"],get:Object.assign(function(){switch(this.retractionAttachment){case"top":case"left":return-1;case"bottom":case"right":return 1;default:return 0}},{__CW__getter:function(e,t,n,i){switch(i.internalGet(this,t[0+n])){case"top":case"left":return-1;case"bottom":case"right":return 1;default:return 0}}})}),finalRetractionAmount:r.b({readOnly:!0,dependencies:["retractionAmount"],get:function(){return this.getFinalValue("retractionAmount")},writeDependencies:[]}),isFullyRetracted:r.b({readOnly:!0,dependencies:["retractionAmount"],get:Object.assign(function(){return 1===this.retractionAmount},{__CW__getter:function(e,t,n,i){return 1===i.internalGet(this,t[0+n])}}),writeDependencies:[]}),isNotFullyRetracted:r.b({readOnly:!0,dependencies:["isFullyRetracted"],get:Object.assign(function(){return!this.isFullyRetracted},{__CW__getter:function(e,t,n,i){return!i.internalGet(this,t[0+n])}})}),retractedWidth:r.b({readOnly:!0,dependencies:["retractionAmount","retractionAxis","viewportWidth"],get:Object.assign(function(){return"horizontal"!==this.retractionAxis?this.viewportWidth:Math.round((1-this.retractionAmount)*this.viewportWidth)},{__CW__getter:function(e,t,n,i){return"horizontal"!==i.internalGet(this,t[1+n])?i.internalGet(this,t[2+n]):Math.round((1-i.internalGet(this,t[0+n]))*i.internalGet(this,t[2+n]))}}),writeDependencies:[]}),finalRetractedWidth:r.b({readOnly:!0,dependencies:["finalRetractionAmount","retractionAxis","viewportWidth"],get:Object.assign(function(){return"horizontal"!==this.retractionAxis?this.viewportWidth:Math.round((1-this.finalRetractionAmount)*this.viewportWidth)},{__CW__getter:function(e,t,n,i){return"horizontal"!==i.internalGet(this,t[1+n])?i.internalGet(this,t[2+n]):Math.round((1-i.internalGet(this,t[0+n]))*i.internalGet(this,t[2+n]))}}),writeDependencies:[]}),retractedHeight:r.b({readOnly:!0,dependencies:["retractionAmount","retractionAxis","viewportHeight"],get:Object.assign(function(){return"vertical"!==this.retractionAxis?this.viewportHeight:Math.round((1-this.retractionAmount)*this.viewportHeight)},{__CW__getter:function(e,t,n,i){return"vertical"!==i.internalGet(this,t[1+n])?i.internalGet(this,t[2+n]):Math.round((1-i.internalGet(this,t[0+n]))*i.internalGet(this,t[2+n]))}}),writeDependencies:[]}),finalRetractedHeight:r.b({readOnly:!0,dependencies:["finalRetractionAmount","retractionAxis","viewportHeight"],get:Object.assign(function(){return"vertical"!==this.retractionAxis?this.viewportHeight:Math.round((1-this.finalRetractionAmount)*this.viewportHeight)},{__CW__getter:function(e,t,n,i){return"vertical"!==i.internalGet(this,t[1+n])?i.internalGet(this,t[2+n]):Math.round((1-i.internalGet(this,t[0+n]))*i.internalGet(this,t[2+n]))}}),writeDependencies:[]}),retract:function(e){1!==this.getFinalValue("retractionAmount")&&(0===e||isNaN(this.retractionAmount)?this.retractionAmount=1:this.animate("retractionAmount",1,e||250))},unretract:function(e){0!==this.getFinalValue("retractionAmount")&&(0===e||isNaN(this.retractionAmount)?this.retractionAmount=0:this.animate("retractionAmount",0,e||250))},toggleRetraction:function(e){0!==this.getFinalValue("retractionAmount")?this.unretract(e):this.retract(e)},_applyRetractionAmount:a.f({inputs:["retractionDirection","retractedWidth","retractedHeight","viewportWidth","viewportHeight","retractionAmount","fadesWhileRetracting"],callback:function(e,t,n,i,r,a,s){this.style.translateX(e*(i-t)).translateY(e*(r-n)).set("opacity",s?1-a:void 0)}})}},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var i=n(1210),r=n(81),a=n(41),s=n(65),o=n(403),c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},l=i.a.extend(o.a).extend({minimumTranslationForClinch:3,translatesPriorToClinching:!1,requiresClinchToComplete:!0,pansHorizontally:!1,pansVertically:!1,pansBiaxially:!1,cancelsHorizontally:!1,cancelsVertically:!1,cancelsBiaxially:!1,hasClinchedHorizontally:!1,hasClinchedVertically:!1,hasClinchedBiaxially:!1,hasClinched:!1,pointerMove:function(){var e=arguments;if(this.hasClinched)return this.__s._$Cr$pointerMove.apply(this,e);this.pauseStateChanges();var t=this.__s._$Cr$pointerMove.apply(this,e),n=this.translation,i=n.x,a=n.y;if(Math.sqrt(i*i+a*a)<this.minimumTranslationForClinch)return this.resumeStateChanges(),t;var s=this.pansHorizontally,o=this.cancelsHorizontally,c=this.pansVertically,l=this.cancelsVertically,d=this.pansBiaxially,h=this.cancelsBiaxially,p=180*Math.atan(Math.abs(a)/Math.abs(i))/Math.PI;return p<u(s||o,c||l,d||h)?(o&&(this.state=r.b.Cancelled),this.hasClinchedHorizontally=this.hasClinched=!0):p>90-u(c||l,s||o,d||h)?(l&&(this.state=r.b.Cancelled),this.hasClinchedVertically=this.hasClinched=!0):(h&&(this.state=r.b.Cancelled),this.hasClinchedBiaxially=this.hasClinched=!0),this._translationUponClinch=this.translation,this.resumeStateChanges(),t},pointerUp:function(){var e=arguments;return!this.hasClinched&&this.requiresClinchToComplete&&1===this._trackedPointerLocations.size?this.pointerCancel.apply(this,arguments):this.__s._$10u$pointerUp.apply(this,e)},reset:function(){this.__s._$11V$reset.call(this),this.hasClinched=this.hasClinchedHorizontally=this.hasClinchedVertically=this.hasClinchedBiaxially=!1,this._translationUponClinch=void 0},snapTranslationHashBasedOnClinchState:function(e){return this.hasClinchedHorizontally?{x:e.x,y:0}:this.hasClinchedVertically?{x:0,y:e.y}:this.translatesPriorToClinching||this.hasClinchedBiaxially?e:{x:0,y:0}},snappedTranslationSinceClinching:a.c({readOnly:!0,get:function(){return this.snapTranslationHashBasedOnClinchState(this.translationSinceClinching)}}),translationSinceClinching:a.c({get:function(){var e=this._translationUponClinch;if(!e)return{x:0,y:0};var t=this.translation;return{x:t.x-e.x,y:t.y-e.y}}}),snappedTranslation:a.c({readOnly:!0,get:function(){return this.snapTranslationHashBasedOnClinchState(this.translation)}}),translation:a.c({get:function(){var e=arguments,t=this._snappedTranslationReference;return t?c({},t):this.__s._$1PJ$get.apply(this,e)},set:function(){var e=arguments;return this._snappedTranslationReference&&s.b("Trying to set translation while presenting snapped translation reference."),this.__s._$1SR$set.apply(this,e)},__superMap:{_$1PJ$get:"get",_$1SR$set:"set"}}),_isSnappingPrimaryTranslation:0,beginSnappingPrimaryTranslation:function(){0===this._isSnappingPrimaryTranslation&&(this._snappedTranslationReference=this.snappedTranslation),this._isSnappingPrimaryTranslation++},endSnappingPrimaryTranslation:function(){0==--this._isSnappingPrimaryTranslation&&(this._snappedTranslationReference=void 0)},__superMap:{_$Cr$pointerMove:"pointerMove",_$10u$pointerUp:"pointerUp",_$11V$reset:"reset"},staticMembers:{__QUALIFIED_CLASS_NAME__:"AxisSnappingPanGestureRecognizer"}});function u(e,t,n){return e&&t&&n?15:e&&t&&!n?45:e&&!t&&n?15:!e||t||n?!e&&t&&n?1/0:!e&&t&&!n||!e&&!t&&n||!(e||t||n)?1/0:s.b("Combinatorics is broken."):0}},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n(784),r=n(412),a=n(46),s=function(e,t,n,s,l,u){if(e&&t){n&&!isNaN(n)||(n=2);var h="vertical"!==s,p="horizontal"!==s,f=e.getContext?e.getContext("2d"):e,g=e.getContext?e:e.canvas,m=0|g.width,v=0|g.height,_=0|n,b=0|(t=(t=Math.min(t,m,v))/_*.8+.2*t),y=2*b+1,I=4*m,w=b*I,S=4*b,C=S+4,O=w+I,A=void 0;try{A=f.getImageData(0,0,m,v)}catch(e){if(i.b.warn("Attempting to blur canvas contents, but unable to access image data, likely due to the canvas being tainted cross-origin. Falling back to color averaging via drawImage. Error: "+e),u)return;var E=a.d.getAutodisposingInstance();return E.width=E.height=1,Object(r.a)(E.getContext("2d"),g,0,0,1,1),f.clearRect(0,0,g.width,g.height),void f.drawImage(E,0,0,g.width,g.height)}var T=d(m,v),M=A.data,D=T.data;l||o(M);var L=void 0,N=void 0,P=void 0,R=void 0,x=void 0,F=void 0,k=void 0,V=void 0,j=void 0,B=void 0,U=void 0,W=void 0,G=void 0,H=void 0,$=void 0,z=void 0,K=void 0,Q=void 0,q=void 0,Y=void 0,Z=void 0,J=void 0;for(Y=1;Y<=_;Y++){if(h)for(J=M,M=D,D=J,U=0;U<v;U++){for(W=U*I,L=N=P=R=0,G=0;G<b;G++)L+=D[x=4*G+W],N+=D[x+1],P+=D[x+2],R+=D[x+3];for(G=0;G<m;G++)V=(k=(F=(x=4*G+W)+1)+1)+1,(z=b-G)<0&&(z=0),(Q=b-(m-1-G))<0&&(Q=0),$=y-z-Q,B=x+S,Z=!!Q,(j=x-C)<W||(L-=D[j],N-=D[j+1],P-=D[j+2],R-=D[j+3]),Z||(L+=D[B],N+=D[B+1],P+=D[B+2],R+=D[B+3]),M[x]=L/$,M[F]=N/$,M[k]=P/$,M[V]=R/$}if(p)for(J=M,M=D,D=J,G=0;G<m;G++){for(H=4*G,L=N=P=R=0,U=0;U<b;U++)L+=D[x=U*I+H],N+=D[x+1],P+=D[x+2],R+=D[x+3];for(U=0;U<v;U++)V=(k=(F=(x=H+(W=U*I))+1)+1)+1,(K=b-U)<0&&(K=0),(q=b-(v-1-U))<0&&(q=0),$=y-K-q,B=x+w,Z=!!q,(j=x-O)<0||(L-=D[j],N-=D[j+1],P-=D[j+2],R-=D[j+3]),Z||(L+=D[B],N+=D[B+1],P+=D[B+2],R+=D[B+3]),M[x]=L/$,M[F]=N/$,M[k]=P/$,M[V]=R/$}}l||c(M),f.putImageData(A,0,0)}},o=function(e,t){t||(t=e);for(var n=0,i=e.length,r=void 0,a=void 0;n<i;n+=4)r=e[n+3]/255,t[n]=e[n]*r,t[a=n+1]=e[a]*r,t[a=n+2]=e[a]*r},c=function(e,t){t||(t=e);for(var n=0,i=e.length,r=void 0,a=void 0;n<i;n+=4)r=e[n+3]/255,t[n]=e[n]/r,t[a=n+1]=e[a]/r,t[a=n+2]=e[a]/r},l=document.createElement("canvas").getContext("2d"),u={},d=function(e,t){var n=u;return(n=(n=n[e]||(n[e]={}))[t]||(n[t]={})).buffer||(n.buffer=l.createImageData(e,t))}},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n(34),r=n(65),a=i.a.extend({source:null,gate:null,readOnly:!0,get:function(e,t,n,i){var r=this[i._key_storedValue];if(r!==o&&!i.internalGet(this,t[1+n]))return r;var a=i.internalGet(this,t[0+n]);return a===r?a:(this[i._key_storedValue]=a,a)},init:function(e){var t=arguments,n=e||c;this.dependencies=[n.source||this.source,n.gate||this.gate],this.__s._$1bN$init.apply(this,t);var i=this.source,a=this.gate;i&&a||r.b("GatedProxyProperty cannot wake up without both `source` and `gate`.")},wasRegistered:function(e,t){var n=arguments,i="_gatedProxyProperty_at_"+t+"_";this._key_storedValue=i+"storedValue",e[this._key_storedValue]=o,this.__s._$1ss$wasRegistered.apply(this,n)},__superMap:{_$1bN$init:"init",_$1ss$wasRegistered:"wasRegistered"},staticMembers:{__QUALIFIED_CLASS_NAME__:"GatedProxyProperty"}});function s(){return a.define.apply(a,arguments)}var o={},c={}},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return E});var i,r,a=n(1185),s=n(80),o=n(781),c=n(36),l=n(784),u=n(1184),d=n(192),h=n(120),p=n(180),f=n(1146),g=n(69),m=n(1229),v=n(40),_=n(66),b=n(197),y=n(1017),I=n(1018),w=n(362),S=n(364),C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},O=(i=a.a,(r=function(e){var t=i.create();try{e(t.resolve.bind(t),t.reject.bind(t))}catch(e){t.reject(e)}return t}).all=i.all.bind(i),r.race=i.race.bind(i),r.resolve=i.resolve.bind(i),r.reject=i.reject.bind(i),r);function A(e){return function(){var t=e.apply(this,arguments);return new O(function(e,n){return function i(r,a){try{var s=t[r](a),o=s.value}catch(e){return void n(e)}if(!s.done)return O.resolve(o).then(function(e){i("next",e)},function(e){i("throw",e)});e(o)}("next")})}}var E=s.a.extend(o.a,c.a,{prepareAndDownload:function(e){var t=this,n=e.collection,i=e.container,r=e.selectedIndicesArray,a=e.primaryInteractionMode,s=e.useNewWindowForRedirects,o=e.downloadDetailsGenerator,c=e.includeExcludeRecordsLoader,l=e.feedbackStatGenerator,u=e.originalsOnly,d=e.showSpinner,h=e.spinnerHideDelay;return A(regeneratorRuntime.mark(function e(){var p;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.prepareDownloadURL({collection:n,container:i,selectedIndicesArray:r,primaryInteractionMode:a,useNewWindowForRedirects:s,downloadDetailsGenerator:o,includeExcludeRecordsLoader:c,originalsOnly:u,showSpinner:d,spinnerHideDelay:h});case 2:if(!(p=e.sent).hasError){e.next=7;break}Object(y.a)(),e.next=9;break;case 7:return e.next=9,t.downloadFromURL({downloadCount:r.length,downloadURL:p.downloadURL,primaryInteractionMode:a,feedbackStatGenerator:l,downloadWindow:p.downloadWindow});case 9:case"end":return e.stop()}},e,t)}))()},prepareDownloadURL:function(t){var n=this,i=t.collection,r=t.container,a=t.selectedIndicesArray,s=t.primaryInteractionMode,o=t.useNewWindowForRedirects,c=t.downloadDetailsGenerator,u=t.includeExcludeRecordsLoader,d=t.originalsOnly,h=t.showSpinner,p=t.spinnerHideDelay;return A(regeneratorRuntime.mark(function t(){var f,g,v,_,b;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(l.b.debug("Preparing download..."),f=c||new I.a,!(g=n._prepareSingleMediaDownloadURLIfPossible(i,a,d,s,f)).hasError){t.next=5;break}return t.abrupt("return",g);case 5:if(v=Boolean(g.downloadURL),_=void 0,o&&n._shouldRedirectToDownloadInNewWindow(s,v)&&(_=e.top.open()),v){t.next=13;break}return b=u||new m.a(i,r),t.next=12,n._prepareMultipleMediaDownloadURL(r,a,f,b,d,h,p);case 12:g=t.sent;case 13:return g.hasError&&_&&_.close(),g.downloadWindow=_,t.abrupt("return",g);case 16:case"end":return t.stop()}},t,n)}))()},downloadFromURL:function(e){var t=this,n=e.downloadURL,i=e.downloadCount,r=e.primaryInteractionMode,a=e.downloadWindow,s=e.feedbackStatGenerator;return A(regeneratorRuntime.mark(function e(){var o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t._captureFeedbackStats(s,i),o={},!t._shouldRedirectToDownload(r)){e.next=6;break}t._setTopLocationHref(n,a),e.next=15;break;case 6:return e.prev=6,e.next=9,t._downloadManager.downloadFromURL(n);case 9:o=e.sent,e.next=15;break;case 12:e.prev=12,e.t0=e.catch(6),o.hasError=!0;case 15:return e.abrupt("return",o);case 16:case"end":return e.stop()}},e,t,[[6,12]])}))()},getZipURLGenerationParameters:function(e){var t={};return e?t.originalsOnly={value:1,type:"INT64"}:(t.itemTypes=Object(w.c)(),t.codecs=Object(w.b)()),{pluginFields:t}},_prepareSingleMediaDownloadURLIfPossible:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments[3],r=arguments[4],a={};if(1!==t.length)return a;var s={wantsOriginalFormats:n,wantsMostCompatibleFormats:!n,wantsEditedVersions:!n,wantsUneditedVersions:n,wantsLivePhotoVideoComplement:!0,allowsLocationMetadata:!0,isDeviceH265Compatible:Object(w.a)()},o=e.objectAt(t[0]);if(!o)return l.b.error("Single item download media is undfined",t[0]),{hasError:!0};var c=o.genericType===v.a.Type.VIDEO,u=i===b.a.TOUCH,d=o.getDerivativeInfosForDownload(s);if(1!==d.length||c&&u)return a;l.b.debug("Initiate single item download...");var h=r.createDownloadDetailsForSingleFile(o);return{downloadURL:d[0].downloadUrl,archiveDetails:h}},_prepareMultipleMediaDownloadURL:function(e,t,n,i,r,a){var s=this,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:500;return A(regeneratorRuntime.mark(function c(){var u,d,h,p,f;return regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return l.b.debug("Initiate multiple media zip download..."),u=e.zone.pk,d=void 0,h=void 0,a&&s._showSpinner(),c.prev=5,c.next=8,i.getIncludeExcludeRecords(t);case 8:return p=c.sent,h=n.createDownloadDetailsForArchive(),f=s.getZipURLGenerationParameters(r),c.next=13,_.a.generateZipURLForRecords(u,h.filename,C({},p,f));case 13:d=c.sent,c.next=21;break;case 16:return c.prev=16,c.t0=c.catch(5),l.b.error(c.t0 instanceof Error?c.t0.stack||c.t0.message:String(c.t0)),a&&s._hideSpinner(o),c.abrupt("return",{hasError:!0});case 21:return a&&s._hideSpinner(o),c.abrupt("return",{downloadURL:d,archiveDetails:h});case 23:case"end":return c.stop()}},c,s,[[5,16]])}))()},_showSpinner:function(){S.a.sharedInstance.fadeIn()},_hideSpinner:function(e){e>0?u.a(function(){return S.a.sharedInstance.fadeOut()},e):S.a.sharedInstance.fadeOut()},_setTopLocationHref:function(t,n){(n||e.top).location.href=t},_shouldRedirectToDownload:function(e){return e===b.a.TOUCH},_shouldRedirectToDownloadInNewWindow:function(e,t){return this._shouldRedirectToDownload(e)&&d.a.sharedInstance.isiOS&&(h.a.sharedInstance.isSafari||t)},_downloadManager:p.b(f.a,{msToWaitForDownloadToStart:25e3}),_captureFeedbackStats:function(e,t){var n=g.b().feedbackService;if(n){var i=(e||this._defaultFeedbackStatsGenerator)(t,n);i&&n.report(i.eventName,i.stats)}},_defaultFeedbackStatsGenerator:function(e,t){return{eventName:"downloadEvent",stats:{fileCount:t.getSignificantNum(e)}}},staticMembers:{__QUALIFIED_CLASS_NAME__:"DownloadMediasManager"}})}).call(this,n(6))},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return b});var i=n(409),r=n(34),a=n(93),s=n(95),o=n(1125),c=n(189),l=n(1276),u=n(1134),d=n(1182),h=n(36),p=n(180),f=n(1188),g=n(120),m=n(1149),v=n(824),_=(n(1045),i.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"popoverView"}],classes:["photos-popover-modal"]},className:"photos-modal-view",__QUALIFIED_CLASS_NAME__:"ModalView"},layout:r.b(),anchorLayout:r.b(),arrowLength:r.b(),arrowWidth:r.b(),arrowAlignment:r.b(),verticalAlignment:r.b(),horizontalAlignment:r.b(),popoverView:r.b({downstreamBindings:{layout:"(owner).layout",anchorLayout:"(owner).anchorLayout",arrowLength:"(owner).arrowLength",arrowWidth:"(owner).arrowWidth",arrowAlignment:"(owner).arrowAlignment",verticalAlignment:"(owner).verticalAlignment",horizontalAlignment:"(owner).horizontalAlignment"}}),contentView:r.b(a.c("popoverView.contentView")),pointerDown:function(t){var n=this.element.style.display;this.element.style.display="none";var i=e.document.elementFromPoint(t.clientX,t.clientY),r=s.a.create({type:"pointerMove",target:i,nativeEvent:t});return o.a.application.rootResponder.dispatchEvent(r),this.element.style.display=n,this.sendEvent("hidePopover"),!0},keyUp:function(e){e.which===c.a.ESC&&this.sendEvent("hidePopover")}})),b=l.b.extend(m.a,v.a,{allowedLayouts:[u.b,u.a,u.d],isAlignmentRequired:!1,resolutionStrategy:l.a,arrowLength:13,arrowWidth:29,insetFromWindow:30,viewClass:d.a({additionalClassNames:d.a(["photos-popover-view"]),pointerDown:function(){return!0}}),updateLayout:function(){this.propertyChanged("anchor")},createView:function(){var e=arguments,t=this.__s._$112$createView.apply(this,e);return t.style.set("transform-origin","50% 0"),_.create({popoverView:t})},pathToScaledView:"view.popoverView",hidePopover:function(){return this.hide(),!0},_viewportDimensionObserver:h.f({inputs:["viewportHeight","viewportWidth"],callback:function(){this.anchorLayoutMeasurer.recomputeLayoutIfNecessary()}}),spaceLayout:p.b(f.a.extend({owner:r.b(),window:r.b(g.a.sharedInstance.window),x:r.b({readOnly:!0,dependencies:["window.x","owner"],get:Object.assign(function(){return this.getPath("window.x")+this.owner.insetFromWindow},{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])+i.internalGet(this,t[1+n]).insetFromWindow}})}),y:r.b({readOnly:!0,dependencies:["window.y","owner"],get:Object.assign(function(){return this.getPath("window.y")+this.owner.insetFromWindow},{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])+i.internalGet(this,t[1+n]).insetFromWindow}})}),width:r.b({readOnly:!0,dependencies:["window.width","owner"],get:Object.assign(function(){return this.getPath("window.width")-2*this.owner.insetFromWindow},{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])-2*i.internalGet(this,t[1+n]).insetFromWindow}})}),height:r.b({readOnly:!0,dependencies:["window.height","owner"],get:Object.assign(function(){return this.getPath("window.height")-2*this.owner.insetFromWindow},{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])-2*i.internalGet(this,t[1+n]).insetFromWindow}})})})),__superMap:{_$112$createView:"createView"},staticMembers:{__QUALIFIED_CLASS_NAME__:"PopoverViewController"}})}).call(this,n(6))},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return A});var i,r,a=n(1185),s=n(34),o=n(86),c=n(1182),l=n(1275),u=n(559),d=n(107),h=n(66),p=n(170),f=n(156),g=n(1150),m=n(33),v=n(407),_=n(163),b=n(540),y=n(413),I=n(526),w=n(207),S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},C=(i=a.a,(r=function(e){var t=i.create();try{e(t.resolve.bind(t),t.reject.bind(t))}catch(e){t.reject(e)}return t}).all=i.all.bind(i),r.race=i.race.bind(i),r.resolve=i.resolve.bind(i),r.reject=i.reject.bind(i),r);function O(e){return function(){var t=e.apply(this,arguments);return new C(function(e,n){return function i(r,a){try{var s=t[r](a),o=s.value}catch(e){return void n(e)}if(!s.done)return C.resolve(o).then(function(e){i("next",e)},function(e){i("throw",e)});e(o)}("next")})}}var A={mixinDependencies:[u.a,g.a],ckShareServiceReportSpamUrl:s.b({dependencies:["ckEnvironment","ckContainerId"],readOnly:!0,get:function(){var e=this.ckEnvironment,t=this.ckContainerId;return w.a.ckShareServiceUrlPrefix+"/"+t+"/"+e+"/"+w.a.ckShareServiceReportAsSpamSuffix}}),reportShareAsSpam:function(e){return this.ckFetch(this.ckShareServiceReportSpamUrl,{method:o.a.POST,body:JSON.stringify({shortGUID:e})})},operationHandlers:c.a([b.a.create()]),createCMMZone:function(){var e="CMM-"+l.a().toUpperCase(),t=this.cplZone.zoneID.ownerRecordName,n=d.a.create({ownerRecordName:t,zoneName:e}),i=h.a.getPrimaryKey(n);return h.a.createFromDataHash({pk:i,scope:CloudKit.DatabaseScope.PRIVATE,zoneID:n},this)},createCMMRootRecord:function(e,t){var n=e.zoneID,i=n.ownerRecordName,r={zoneName:n.zoneName,ownerRecordName:i},a=S({},t,{recordName:_.a.RECORD_NAME,pk:_.a.getPrimaryKeyWithZonePK(e.pk,_.a.RECORD_NAME),zoneID:r,recordType:_.a.CK_RECORD_TYPE,scope:CloudKit.DatabaseScope.PRIVATE});return _.a.createFromDataHash(a,this)},loadCMMRootFromRecordInfo:function(e){var t=e.databaseScope,n=e.rootRecord,i=e.share,r=e.zoneID,a=h.a.getPrimaryKey(r),s=h.a.getDataValuesFromServiceValues({},{scope:t,zoneID:r});this.loadData(h.a,s);var o=h.a.find(a),c=p.a.getDataValuesFromServiceValues(e);this.loadData(p.a,c,!0),m.a.loadPredefinedContainers(o);var l={pk:f.a.getPrimaryKeyWithZonePK(a,m.a.PredefinedName.MOMENTS),sortAscending:!0};this.loadData(m.a,l,!0);var u=y.a.getDataValuesFromServiceValues(i,{zone:a,zoneID:r});this.loadData(y.a,u,!1);var d=_.a.getDataValuesFromServiceValues(n,{share:u.pk,zone:a,zoneID:r});return this.loadData(_.a,d,!1),_.a.find(d.pk)},resolveShortGUID:function(t){var n=this;return O(regeneratorRuntime.mark(function i(){var r,a,s,o;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(t){i.next=2;break}throw new Error("Please provide a shortGUID");case 2:return n.sharedDatabase,r=e.CloudKit.getDefaultContainer(),a=Array.isArray(t)?t:[t],i.next=7,r.fetchRecordInfos(a);case 7:return s=i.sent,o=s.results,i.abrupt("return",o&&o[0]);case 10:case"end":return i.stop()}},i,n)}))()},acceptShortGUID:function(e){var t=this;return O(regeneratorRuntime.mark(function n(){var i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,CloudKit.getDefaultContainer().acceptShares([e]);case 2:return i=t.sent,t.abrupt("return",i&&i[0]);case 4:case"end":return t.stop()}},n,t)}))()},transactionProcessor:c.a(I.a),isZoneNameForCMM:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").startsWith("CMM-")},loadAllRecordsForCMMZone:function(e,t){var n=this;return O(regeneratorRuntime.mark(function i(){var r,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=[_.a.RECORD_NAME,y.a.RECORD_NAME,v.a.CK_RECORD_NAME_FOR_OTHER],a=[_.a,y.a,v.a],n.next=5,h.a.fetchRecords({zonePK:e,recordNames:r,recordClassNames:a,scope:t});case 5:case"end":return n.stop()}},i,n)}))()}}}).call(this,n(6))},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return o});var i=n(80),r=n(69),a=e.performance||e.Date,s=a.now(),o=e.P2Timing=i.a.extend({staticMembers:{LOAD:s,MAIN:0,_storage:{},record:function(e){"MAIN"===e&&0===o.MAIN?o.MAIN=a.now():this._storage[e]=a.now()},print:function(e){var t=this,n=e||o.MAIN,i="Timer marks recorded from main.js execution:\n";Object.keys(this._storage).forEach(function(e){i+="\n    "+e+": ",i+=c(n,t._storage[e])+"ms"}),i+="\n",console.log(i)},printScriptExecution:function(){console.log("Script execution in: %s",c(o.LOAD,o.MAIN))},getTimeAgainstMain:function(e){return c(o.MAIN,this._storage[e])},report:function(e){this.record(e);var t="timeTo"+e,n=this.getTimeAgainstMain(e),i=r.b().feedbackService;i&&i.report(t,{count:n})}}});function c(e,t){return(t-e).toFixed(0)}}).call(this,n(6))},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";var i=n(65),r=n(127),a=n(80),s=n(1173),o=n(128),c=n(41),l=a.a.extend(o.a,{_index:0,_original:null,_queue:null,_references:null,_clones:null,init:function(e,t){if(this.source=e,this.__s._$Ry$init.call(this),Object(s.a)(t,this.constructor)){this._original=t._original,this._container=t._container;var n=this._index=t._index;(this._clones=t._clones).push(this),this._queue=t._queue,(this._references=t._references)[n]++}else this._clones=[this],this._queue=[],this._references=[1],this._original=t,this.moveToNext()},moveToNext:function(){if(this._isValid){var e,t=this._index,n=this._queue,i=this._references;if(e=t<n.length?n[t]:this._advanceOriginal(),0==--i[t]&&0===t){i.shift(),n.shift();for(var r=this._clones,a=0,s=r.length;a<s;a++)r[a].index--}else t++;i[t]++,this._index=t,this._container=e}},add:function(e){if(this.isValid){var t,n=this._queue;if(0===n.length||!n[n.length-1].done)do{t=this._advanceOriginal()}while(!t.done)}return this._container={done:!1,value:e},!0},_advanceOriginal:function(){var e=this._original.next();return this._references.push(0),this._queue.push(e),e},_container:null,isValid:Object(c.c)({readOnly:!0,defaultValue:!0,get:function(){return!this._container.done}}),value:Object(c.c)({readOnly:!0,get:function(){return this.source.decode(this._container.value)}}),encodedValue:Object(c.c)({readOnly:!0,get:function(){return this._container.value}}),clone:function(){return this.constructor.create(this,this)},__superMap:{_$Ry$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"NativeIteratorWrapper"}}).extend({_iterator:null,clone:function(){return this.constructor.create(this._map,this)},staticMembers:{__QUALIFIED_CLASS_NAME__:"BaseMapIterator"}}),u=n(129),d=l.extend(u.a,{init:function(e,t){t||(t=e._map.entries()),this.__s._$A5$init.call(this,e,t)},add:function(e){var t=arguments,n=e[0],i=e[1],r=this.source;if(r.has(n))return!1;var a=this.__s._$DL$add.apply(this,t);return r.set(n,i),a},remove:function(){if(this.isValid){var e=this.value;return this.source.delete(e[0]),this.moveToNext(),e}},value:Object(c.c)({readOnly:!1,set:function(e){var t=this.source,n=this._container.value;return t.delete(n[0]),this.add(e),e}}),__superMap:{_$A5$init:"init",_$DL$add:"add"},staticMembers:{__QUALIFIED_CLASS_NAME__:"MapEntryIterator"}}),h=l.extend(u.a,{init:function(e,t){t||(t=e._map.keys()),this.__s._$9N$init.call(this,e,t)},add:function(e,t){var n=arguments,i=this.source;if(i.has(e))return!1;var r=this.__s._$Bp$add.apply(this,n);return i.set(e,t),r},remove:function(){if(this.isValid){var e=this.value;return this.source.delete(e),this.moveToNext(),e}},value:Object(c.c)({readOnly:!1,set:function(e){var t=this.source,n=this._container.value,i=t.get(n);return t.delete(n),this.add(e,i),e}}),__superMap:{_$9N$init:"init",_$Bp$add:"add"},staticMembers:{__QUALIFIED_CLASS_NAME__:"MapKeyIterator"}}),p=l.extend({init:function(e,t){t||(t=e._map.values()),this.__s._$89$init.call(this,e,t)},__superMap:{_$89$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"MapValueIterator"}}),f=n(32),g=n(180);n.d(t,"a",function(){return b});var m=c.a.extend({get:function(){return this._map.size},staticMembers:{__QUALIFIED_CLASS_NAME__:"SizeProperty"}});function v(e){return this._map.has(e)}function _(e){return this._map.delete(e)}var b=a.a.extend(r.a,{_map:Object(g.b)(Map),get:function(e){return this.decode(this.encodedGet(e))},encodedGet:function(e){return this._map.get(e)},set:function(e,t){return this.encodedSet(e,this.encode(t))},encodedSet:function(e,t){return this._map.set(e,t),this},encodedContains:function(e){for(var t=this.values().retain();t.isValid;){if(e===t.encodedValue)return t.release(),!0;t.moveToNext()}return t.release(),!1},forEach:function(e,t){for(var n=this.createIterator().retain();n.isValid;){var i=n.value;e.call(t,i[1],i[0],this),n.moveToNext()}n.release()},reduce:function(e,t,n){var r,a=this.createIterator().retain();for(arguments.length>=2?r=t:a.isValid?(r=a.value[1],a.moveToNext()):Object(i.b)("reduce of empty array with no initial value");a.isValid;){var s=a.value;r=e.call(n,r,s[1],s[0],this),a.moveToNext()}return a.release(),r},find:function(e,t){for(var n=this.createIterator().retain();n.isValid;){var i=n.value;if(e.call(t,i[1],i[0],this))return n.release(),i;n.moveToNext()}n.release()},every:function(e,t){for(var n=this.createIterator().retain();n.isValid;){var i=n.value;if(!e.call(t,i[1],i[0],this))return n.release(),!1;n.moveToNext()}return n.release(),!0},some:function(e,t){for(var n=this.createIterator().retain();n.isValid;){var i=n.value;if(e.call(t,i[1],i[0],this))return n.release(),!0;n.moveToNext()}return n.release(),!1},containsKey:v,has:v,removeKey:_,delete:_,clear:function(){this._map.clear()},length:Object(f.c)(m),size:Object(f.c)(m),iteratorClass:Object(c.c)({readOnly:!0,defaultValue:d}),keys:function(){return h.create(this)},values:function(){return p.create(this)},entries:function(){return d.create(this)},staticMembers:{__QUALIFIED_CLASS_NAME__:"CoreMap"}})},function(e,t,n){"use strict";var i=n(80),r=n(1200),a=n(41),s=n(311),o=i.a.extend(s.a,{staticMembers:{__QUALIFIED_CLASS_NAME__:"BaseValidator"}}).extend({message:"Validation.InvalidPattern",pattern:Object(a.c)({type:RegExp,defaultValue:/.*/i}),validate:function(e){return this.get("pattern").test(e)},staticMembers:{__QUALIFIED_CLASS_NAME__:"PatternValidator"}}).extend({message:"INVALID_URL_ERROR",pattern:/[a-zA-Z0-9]{1,256}:\/\/[a-zA-Z0-9\-./]{1,256}/i,staticMembers:{__QUALIFIED_CLASS_NAME__:"URLValidator"}});n.d(t,"a",function(){return c});var c=i.a.extend(r.a,{urlString:a.c({defaultValue:"",validators:[o]}),requestProperties:{},staticMembers:{__QUALIFIED_CLASS_NAME__:"HostInfo"}})},function(e,t,n){"use strict";var i=n(156),r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a={mixinDependencies:[{mixinDependencies:[{staticMembers:{isMergeableByDefault:!0,isOperationMergeable:function(e){if(!(e instanceof Object))return this.isMergeableByDefault;var t=e.isMergeable;return void 0===t?this.isMergeableByDefault:t},isOperationPairMergeable:function(e,t){return(void 0===e?"undefined":r(e))===(void 0===t?"undefined":r(t))},merge:function(e,t){return e===t}}},n(347).a],staticMembers:{isOperationMergeable:function(e){var t=this.getNestedOperationContext(e);return this.__s._$9v$isOperationMergeable.call(this,t)},isOperationPairMergeable:function(e,t){for(var n=e,i=t;n.type===i.type;){if(n.context instanceof Object&&i.context instanceof Object)return!0;if(!((n=n.operation)instanceof Object&&(i=i.operation)instanceof Object))return!1}return!1},merge:function(e,t){var n=this.getNestedOperationContext(e),i=this.getNestedOperationContext(t);return this.mergeContexts(n,i)},mergeContexts:function(e,t){return e===t},__superMap:{_$9v$isOperationMergeable:"isOperationMergeable"}}}],staticMembers:{mergeContexts:function(e,t){for(var n=e.primaryKeys,i=t.primaryKeys,r=0,a=i.length;r<a;r++){var s=i[r];n.includes(s)||n.push(s)}return!0}}};n.d(t,"a",function(){return s});var s={mixinDependencies:[a],staticMembers:{isMergeableAcrossZones:!1,mergeContexts:function(e,t){var n=arguments;if(!this.isMergeableAcrossZones){for(var r=e.primaryKeys,a=t.primaryKeys,s=new Set,o=0,c=a.length;o<c;o++){var l=i.a.getZonePrimaryKeyFromPrimaryKey(a[o]);s.add(l)}for(var u=0,d=r.length;u<d;u++){var h=i.a.getZonePrimaryKeyFromPrimaryKey(r[u]);if(!s.has(h))return!1}}return this.__s._$Tz$mergeContexts.apply(this,n)},__superMap:{_$Tz$mergeContexts:"mergeContexts"}}}},function(e,t,n){"use strict";var i=Uint8Array||Array,r=void 0;r=window.crypto&&window.crypto.getRandomValues?function(e){window.crypto.getRandomValues(e)}:function(e){for(var t=0,n=void 0,i=void 0,r=void 0;t<16;)for(i=Math.random(),n=0;n<4;t++,n++)r=0|(i*=256),e[t]=r,i-=r};var a=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function s(){var e;return e=(e=o)||new i(16),r(e),e[6]=15&e[6]|64,e[8]=63&e[8]|128,function(e){var t="",n=void 0,i=void 0;for(n=0;n<16;n++)i=e[n],t+=a[i>>4],t+=a[15&i],3!==n&&5!==n&&7!==n&&9!==n||(t+="-");return t}(o=e)}n.d(t,"a",function(){return s});var o=void 0},function(e,t,n){"use strict";var i=n(120),r=n(34),a=n(36),s=n(93),o=n(790),c=n(65),l=n(1179),u=n(180),d=n(1188),h=n(1206),p=n(80),f=n(1169),g=p.a.extend(a.a,{target:Object(r.b)(),targetLayout:Object(r.b)(),targetIsHidden:Object(r.b)(!1),recomputeLayoutIfNecessary:f.a,shouldMeasure:Object(r.b)(),staticMembers:{__QUALIFIED_CLASS_NAME__:"LayoutMeasurer"}}).extend({dispose:function(){var e=arguments;this.__s._$AZ$dispose.apply(this,e),cancelAnimationFrame(this._scheduledMeasurement)},targetLayout:Object(u.b)(d.a),targetIsHidden:Object(r.b)({dependencies:["target.isAttached","_targetMeasurementFailed"],readOnly:!0,get:Object.assign(function(){return!this.getPath("target.isAttached")||this._targetMeasurementFailed},{__CW__getter:function(e,t,n,i){return!i.internalGetPath(this,t[0+n])||i.internalGet(this,t[1+n])}})}),_targetMeasurementFailed:Object(r.b)(!1),recomputeLayoutIfNecessary:Object(a.f)({inputs:["shouldMeasure"],callback:function(e){if(cancelAnimationFrame(this._scheduledMeasurement),this._targetMeasurementFailed=!1,e){var t=function(){var e=this.target,n=this.targetLayout,i=e.element;if(i){var r=i.getBoundingClientRect(),a=r.left,s=r.top,o=r.width,c=r.height;0===a&&0===s&&0===o&&0===c?this._targetMeasurementFailed=!0:(this._targetMeasurementFailed=!1,n.beginBatchSet().setIfChanged("x",a).setIfChanged("y",s).setIfChanged("width",o).setIfChanged("height",c).end())}this._scheduledMeasurement=Object(h.a)(t)}.bind(this);t()}}}),__superMap:{_$AZ$dispose:"dispose"},staticMembers:{__QUALIFIED_CLASS_NAME__:"DOMLayoutMeasurer"}}),m=n(1222),v=n(125),_=n(414),b=n(1134),y=n(415);n.d(t,"b",function(){return I}),n.d(t,"a",function(){return w});var I=y.a.extend({view:Object(r.b)({downstreamBindings:{layout:"(owner).matchedLayout.layout",anchorLayout:"(owner).anchorLayout",arrowLength:"(owner).arrowLength",arrowWidth:"(owner).arrowWidth",arrowAlignment:"(owner).arrowAlignment",verticalAlignment:"(owner).verticalAlignment",horizontalAlignment:"(owner).horizontalAlignment"}}),anchorLayoutMeasurer:Object(r.b)({strong:!0,defaultValue:Object(u.b)(g),downstreamBindings:{target:"(owner).anchor",shouldMeasure:"(owner)._shouldMeasure"}}),_hideOnAnchorDetach:Object(a.f)("anchorLayoutMeasurer.targetIsHidden",function(e){e&&this.hide()}),_shouldMeasure:Object(r.b)(!1),anchor:Object(r.b)(),anchorLayout:Object(r.b)(Object(s.c)("anchorLayoutMeasurer.targetLayout")),spaceLayout:Object(r.b)(i.a.sharedInstance.window),spaceInset:Object(r.b)(10),allowedLayouts:Object(r.b)([b.c,b.b,b.d,b.a]),fallbackLayout:b.a,arrowLength:Object(r.b)(10),arrowWidth:Object(r.b)(10),arrowAlignment:Object(r.b)({defaultValue:_.a.TargetMiddle,type:_.a}),verticalAlignment:Object(r.b)(m.b.Middle),horizontalAlignment:Object(r.b)(m.a.Middle),isAlignmentRequired:Object(r.b)(!0),resolutionStrategy:w,shouldAutosize:Object(r.b)({type:"boolean",defaultValue:!1}),desiredSize:Object(r.b)({strong:!0,defaultValue:Object(u.b)(o.a,{height:100,width:50})}),minimumSize:Object(r.b)({strong:!0,defaultValue:Object(u.b)(o.a,{height:10,width:10})}),show:function(e){var t=arguments;if(!this.isAttached)return e&&(this.anchor=e),this.anchor||Object(c.b)("PopoverViewController#show requires an anchor view: %{popover}",{popover:this}),this._shouldMeasure=!0,this.__s._$3eX$show.apply(this,t)},hide:function(){var e=arguments;if(this.isAttached)return this._shouldMeasure=!1,this.__s._$3kV$hide.apply(this,e)},init:function(){var e=arguments;this.__s._$3lc$init.apply(this,e),this.anchorLayout||this.anchorLayoutMeasurer.bind("target",this.bindingFor("anchor"))},willAppear:function(){var e=arguments;return this.shouldAutosize&&this._calculateSize(),this.__s._$3vx$willAppear.apply(this,e)},_calculateSize:function(){var e=this.getPath("view.popoverView")||this.view;if(e){var t=e.element,n=e.container;if(t&&n){var i=Object(v.a)(t),r=Object(v.a)(n),a=r.getInline("position"),s=i.getInline("height"),c=i.getInline("width");i.set({width:"auto",height:"auto"}),r.set("position","static");var l=n.getBoundingClientRect(),u=l.width,d=l.height;i.set({height:s,width:c}),r.set("position",a);var h=o.a.create({width:u,height:d});this.beginBatchSet().set("minimumSize",h).set("desiredSize",h).end()}}},_reconnectAllowedLayouts:Object(a.f)("allowedLayouts",function(e){var t=this.fitObserver;t&&t.disconnect();for(var n=Object(l.a)(e),i=n.length,r=[],a=0;a<i;a++){var s=n[a];s=s.create({config:this}),r.push(s.bindingFor("fit")),n[a]=s}this.allowedLayoutsInstances=n,r.push(this._resolveLayouts),this.fitObserver=this.observe.apply(this,r)}),_resolveLayouts:function(){var e,t=this.resolutionStrategy.apply(this,arguments);e=null!==t?this.allowedLayoutsInstances[t]:this._fallbackLayoutInstance||(this._fallbackLayoutInstance=this.fallbackLayout.create({config:this})),this.matchedLayout=e},matchedLayout:Object(r.b)(),viewClass:_.b,__superMap:{_$3eX$show:"show",_$3kV$hide:"hide",_$3lc$init:"init",_$3vx$willAppear:"willAppear"},staticMembers:{__QUALIFIED_CLASS_NAME__:"PopoverViewController"}});function w(){for(var e=arguments,t=e.length,n=0,i=null,r=0;r<t;r++){var a=e[r];a>n&&(n=a,i=r)}return i}},function(e,t,n){"use strict";var i=n(80),r=n(36),a=n(781),s=n(34),o=n(1185),c=n(1186),l=n(1128),u=n(1177),d={1:"us",7:"ru",20:"eg",27:"za",30:"gr",31:"nl",32:"be",33:"fr",34:"es",36:"hu",39:"it",40:"ro",41:"ch",43:"at",44:"gb",45:"dk",46:"se",47:"no",48:"pl",49:"de",51:"pe",52:"mx",53:"cu",54:"ar",55:"br",56:"cl",57:"co",58:"ve",60:"my",61:"au",62:"id",63:"ph",64:"nz",65:"sg",66:"th",81:"jp",82:"kr",84:"vn",86:"cn",90:"tr",91:"in",92:"pk",93:"af",94:"lk",95:"mm",98:"ir",211:"ss",212:"ma",213:"dz",216:"tn",218:"ly",220:"gm",221:"sn",222:"mr",223:"ml",224:"gn",225:"ci",226:"bf",227:"ne",228:"tg",229:"bj",230:"mu",231:"lr",232:"sl",233:"gh",234:"ng",235:"td",236:"cf",237:"cm",238:"cv",239:"st",240:"gq",241:"ga",242:"cg",243:"cd",244:"ao",245:"gw",246:"io",247:"ac",248:"sc",249:"sd",250:"rw",251:"et",252:"so",253:"dj",254:"ke",255:"tz",256:"ug",257:"bi",258:"mz",260:"zm",261:"mg",262:"re",263:"zw",264:"na",265:"mw",266:"ls",267:"bw",268:"sz",269:"km",290:"sh",291:"er",297:"aw",298:"fo",299:"gl",350:"gi",351:"pt",352:"lu",353:"ie",354:"is",355:"al",356:"mt",357:"cy",358:"fi",359:"bg",370:"lt",371:"lv",372:"ee",373:"md",374:"am",375:"by",376:"ad",377:"mc",378:"sm",379:"va",380:"ua",381:"rs",382:"me",385:"hr",386:"si",387:"ba",389:"mk",420:"cz",421:"sk",423:"li",500:"fk",501:"bz",502:"gt",503:"sv",504:"hn",505:"ni",506:"cr",507:"pa",508:"pm",509:"ht",590:"gp",591:"bo",592:"gy",593:"ec",594:"gf",595:"py",596:"mq",597:"sr",598:"uy",599:"bq",672:"aq",673:"bn",674:"nr",675:"pg",676:"to",677:"sb",678:"vu",679:"fj",680:"pw",681:"wf",682:"ck",683:"nu",685:"ws",686:"ki",687:"nc",688:"tv",689:"pf",690:"tk",691:"fm",692:"mh",800:"xt",850:"kp",852:"hk",853:"mo",855:"kh",856:"la",880:"bd",886:"tw",960:"mv",961:"lb",962:"jo",963:"sy",964:"iq",965:"kw",966:"sa",967:"ye",968:"om",970:"ps",971:"ae",972:"il",973:"bh",974:"qa",975:"bt",976:"mn",977:"np",992:"tj",993:"tm",994:"az",995:"ge",996:"kg",998:"uz"},h={createFormattedString:function(e,t,n,i,r,a,s){if(!e||!t)return"";var o,c,l,d,h,p,f,g,m,v,_,b=!1,y=!1;p=-1!==(f=this.getIndexOfPauses(e,",;")),h=e,e=-1!==f?e.substr(0,f):e,c=u.a(t)?t.length:0,v=e.length,g=/[a-zA-Z*#]/.exec(e),m=e.indexOf(g),o="",_=-1!==t.indexOf("c"),r&&!_&&(o+="+"===s?s+i+" ":s+" "+i+" ",r=!1,a=!1,d=!0),-1===t.indexOf("n")&&a&&(o+=n,d=!0);for(var I=0,w=0;I<c&&w<v;++I)switch(t[I]){case"#":isNaN(this.convertFullWidthDigits(e[w]))?(b&&u.a(/[a-zA-Z*#]/.exec(e[w]))&&(o=o.replace("(",""),b=!1),o+=e[w],++w):(o+=e[w],y=!0,++w);break;case"(":b=!0,o+=t[I];break;case")":b&&(o+=t[I],b=!1);break;case" ":y&&""!==o&&(-1===m||w<=m)&&(o+=t[I]);break;case"n":n&&!d&&(r||a)&&(o+=n,a=!1,d=!0,y=!0);break;case"c":i&&!l&&r&&!d&&(o+=i,l=!0,y=!0);break;default:(-1===m||w<=m)&&(o+=t[I])}if(b){var S,C,O=t.indexOf(")")-t.indexOf("(")-1,A="";S=o.indexOf("("),C=o.length-1-S;for(var E=0;E<O-C;E++)A+=" ";o+=A,o+=")",b=!1}return r&&l&&(o="+"===s?s+o:s+" "+o),o=o.replace("()",""),(o+=p?h.substr(f):"")?o.replace(/\[\[9\]\]|\[\[8\]\]/g,""):""},getInternationalOrNationalAccessCode:function(e,t,n){var i,r,a,s,o,c,l,d,h;if(!t)return"";if(e=e.replace(" ",""),!(r=n?t.nationalAccessCode:t.internationalAccessCode))return"";a="",r=r.split(",");for(var p=0;p<r.length;++p)if(d=(o=(o=r[p])?o.replace(/\"/g,""):"").length,l=(c=this.normalizeString(o)).length,c.split("#").length,-1!==(s=c.indexOf("#"))&&(c=c.substr(0,s)),e.substr(0,c.length).trim()===c){var f=-1===s?c:e.substr(0,l);u.a(o)&&-1!==(i=o.toString().indexOf(" "))&&(f=f.substr(0,i)+" "+f.substr(i)),h=f;for(var g=0;g<d;g++)"#"===o[g]&&(h=h.substr(0,g)+"#"+h.substr(g+1));if(h===o){a=f;break}}return a},getCountryCodeFromInput:function(e,t){var n,i=d,r=this.normalizeString(e);if((r=r.substr(t,e.length))&&0!==t&&i){r=this.convertFullWidthDigits(r);for(var a=0;a<=3&&(n=i[r.substr(0,a)],!u.a(n));++a);return n}return null},internationalPrefixForDigits:function(e,t){if(e)return"+"===e.charAt(0)?"+":this.getInternationalOrNationalAccessCode(e,t,!1).trim()},getMatchedFormatFromFormatsArray:function(e,t,n,i,r,a,s){for(var o,c,l,d,h,p,f,g,m,v,_,b,y=i.phoneFormats,I=y.length,w=0,S=!1,C=0;C<I;C++)if(c=(o=y[C]).format,d=(e=-1!==(l=this.getIndexOfPauses(e,",;"))?e.substr(0,l):e).length,f=c?c.split("#").length-1:0,p=d<(h=o.rangeBegin.toString().length)?"":e.substr(0,h),(p=this.convertFullWidthDigits(p))>=o.rangeBegin&&p<=o.rangeEnd&&d<=f){if(S&&f>w)continue;var O=-1!==o.format.indexOf("n"),A=-1!==o.format.indexOf("c");S=!0,w=f,g=!!r,(!u.a(m)||a&&!b&&O||g&&!v&&A||!g&&!a&&_<h||_<h&&!b||_<h&&(g&A||a&O)||b&&O&&_<h)&&(m=o,v=A,b=O,_=h)}return m},getFormattedStringUsingMatchedFormat:function(e,t,n,i,r,a,s,o){var c,l=e,d=this.getMatchedFormatFromFormatsArray(e,t,n,i,r,a,s);if(u.a(d)&&(c=d.format),o&&(o.format=c,o.nationalAccessCode=t,o.countryCode=n),!u.a(c)){var h=l.indexOf("x");if(-1!==h){var p=l.substring(0,h),f=l.substring(h,l.length),g=this.getFormattedStringUsingMatchedFormat(p,t,n,i,r,a,s,o);return g&&g!==p?g+" "+f:l}var m=this.getInternationalOrNationalAccessCode(l,i,!0),v=this.normalizeString(m),_=v.length;if(m&&s&&n&&"+"===s){l=l.substr(_,l.length);var b=this.getFormattedStringUsingMatchedFormat(l,"",n,i,!1,!1,"",o);if(b&&b!==l){var y=s+n+" ("+v+") "+b;return-1!==y.indexOf(") (")&&(y=y.replace(") (","")),y}return s+n+" ("+v+") "+l}return this.createFormattedString(l,c,t,n,r,a,s)||""}return this.createFormattedString(l,c,t,n,r,a,s)||""},getIndexOfPauses:function(e,t){for(var n=e.length,i=n,r=-1,a=0;a<t.length;a++)-1!==(r=e.indexOf(t[a]))&&i>r&&(i=r);return i===n?-1:i},formatEntryforDigits:function(e,t,n,i){var r,a,s,o,c,l,u=this.normalizeString(t).length,d=this.normalizeString(e),h=d.length,p=d,f=!1,g=!1;0===u&&(n=""),a=this.getInternationalOrNationalAccessCode(d,i,!0),s=this.normalizeString(a).length,a&&0!==s&&0===u&&(g=!0,p=d.substr(s,h)),l=i.numericCountryCode,o=this.getIndexOfPauses(e,",;"),t&&n&&1!==o?(p=d.substr(u+l.length,h),f=!0):f=!1;var m={};if(0===(r=this.getFormattedStringUsingMatchedFormat(p,a,l,i,f,g,t,m)).length&&f){var v=u+l.length,_=-1!==o?e.substr(0,o):e;c=_.length===v||isNaN(_[u])?e:"+"!==t?t+" "+l+" "+p:t+l+" "+p}return{formatted:r=r?r.trim():c,canonical:"+"+l+" "+((this.getFormattedStringUsingMatchedFormat(p,"","",i,f,g,"")||"").trim()||p),nationalNumber:p,prefix:t,numericCode:l,format:m.format,nationalAccessCode:m.nationalAccessCode,countryCode:m.countryCode}},normalizeString:function(e){return e?e.replace(/[^a-zA-Z0-9０-９०-९+,;@.*#\'\"<>\[\]]/g,""):""},convertFullWidthDigits:function(e){return e.replace(/[０-９]/g,function(e){switch(e){case"０":return"0";case"１":return"1";case"２":return"2";case"３":return"3";case"４":return"4";case"５":return"5";case"６":return"6";case"７":return"7";case"８":return"8";case"９":return"9";default:return e}})}};n.d(t,"a",function(){return p});var p=i.a.extend(r.a,a.a,{basePhoneNumberDataPath:"/phone_numbers/2/",defaultCountryCode:s.b(),format:function(e,t,n){var i=this,r=(t=t||this.defaultCountryCode)&&this._loadedFormats[t];if(t&&!r)return this.load(t).then(function(n){return i.format(e,t)});var a=h.normalizeString(e),s=this._getCountryCodeFromNumber(a,r)||t;return s?this.load(s).then(function(t){var a=h.internationalPrefixForDigits(e,r),o=t.numericCountryCode,c=h.formatEntryforDigits(e,a,s,t),l=c.formatted;l||(l=e);var u={countryCode:s,numericCountryCode:o,internationalPrefix:a,input:e,output:l,canonical:c.canonical,format:c.format,nationalPart:c.nationalNumber};return u.isValid=!!n||i.isResultValid(u),u}):o.a.resolve({countryCode:void 0,internationalPrefix:void 0,input:e,output:e,canonical:e,format:void 0,isValid:!1})},load:function(e){var t=this._loadedFormats[e];if(c.a(t))return t;if(t)return t.failure?o.a.reject(t.error):o.a.resolve(t);var n=this.basePhoneNumberDataPath+e+".json",i=l.a.create({method:"GET",timeout:15e3,url:n}),r=this;return this._loadedFormats[e]=i.send().then(function(t){var n=JSON.parse(t.encodedBody.replace(/^'/,"").replace(/'\s*$/,""));return n=r._decompressFormats(n),r._loadedFormats[e]=n,n}).catch(function(t){throw r._loadedFormats[e]={failure:!0,error:t},t})},_loadedFormats:{},_decompressFormat:function(e){var t=/^\[(\d+)](.*)$/.exec(e),n=/^\[(\d+)-(\d+)](.*)$/.exec(e);return n&&4===n.length?{rangeBegin:n[1],rangeEnd:n[2],format:n[3]}:t&&3===t.length?{rangeBegin:t[1],rangeEnd:t[1],format:t[2]}:e},_decompressFormats:function(e){for(var t=e.split("|"),n=t.slice(4),i=n.length;i--;)n[i]=this._decompressFormat(n[i]);return{countryCode:t[0],numericCountryCode:t[1],internationalAccessCode:t[2],nationalAccessCode:t[3],phoneFormats:n}},_getCountryCodeFromNumber:function(e,t){if(!e)return this.defaultCountryCode;var n=h.internationalPrefixForDigits(e,t);return(n=n.replace(/\s+/g,""))?h.getCountryCodeFromInput(e,n.length):this.defaultCountryCode},isResultValid:function(e){var t=e.nationalPart,n=e.format;if(!(t&&n&&e.countryCode&&e.canonical))return!1;var i=(t.match(/[0-9]/g)||[]).length,r=n.match(/#+/g);if(!r||!r.length)return!1;for(var a=0,s=0,o=r.length;o--;){var c=r[o].length;s?a+=c:s=c}return i>=a+Math.max(s-2,.5*s)},staticMembers:{__QUALIFIED_CLASS_NAME__:"PhoneNumberFormatter"}})},function(e,t,n){"use strict";var i=n(80),r=n(781),a=n(36),s=n(65),o=n(784),c=i.a.extend(r.a,{init:function(e){e||Object(s.b)("Storage#init requires a storage type."),this.__s._$Iy$init.call(this),this.storageType=e},storageType:null,getItem:function(e,t){var n=l(this.storageType);return n&&n.getItem?(t&&(e=t+"."+e),n.getItem(e)):null},setItem:function(e,t,n){var i=l(this.storageType);if(i&&i.setItem){n&&(e=n+"."+e);try{return i.setItem(e,t),!0}catch(e){}}return!1},getKeys:function(e){var t=l(this.storageType),n=[];if(t){var i=(e=e?e+".":"").length,r=function(t){return 0===t.indexOf(e)},a=function(e){return e.substring(i)};if(void 0!==t.length&&"function"==typeof t.key)for(var s=0,o=t.length;s<o;s++){var c=t.key(s);r(c)&&n.push(a(c))}else n=Object.keys(t).filter(r).map(a)}return n},removeItem:function(e,t){var n=l(this.storageType);if(n&&n.removeItem){t&&(e=t+"."+e);try{return n.removeItem(e),!0}catch(e){}}return!1},clear:function(e){var t=l(this.storageType);if(t){if(e){for(var n=this.getKeys(e),i=0,r=n.length;i<r;i++)this.removeItem(n[i],e);return!0}try{return t.clear(),!0}catch(e){}}return!1},__superMap:{_$Iy$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"StorageManager"}}).extend({init:function(){this.__s._$1mM$init.call(this,"sessionStorage")},__superMap:{_$1mM$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"SessionStorage"}});function l(e){try{return window[e]}catch(t){o.b.warn("Could not get storage object for %@: %@",e,t)}}var u=n(1187),d=n(34),h=n(84),p=n(39),f=n(85),g=n(775),m=d.a.extend({staticMembers:{booleanProperty:function(e){return v.create(e)},numberProperty:function(e){return _.create(e)},stringProperty:function(e){return b.create(e)},enumProperty:function(e,t){return y.create(e,t)},__QUALIFIED_CLASS_NAME__:"ConfigProperty"},downstreamNodeManagerClass:h.a.extend({calculateValueForNode:function(e,t,n){if(n){var i=p.a.getStateIDForNode(t);i>0&&p.a.getValueForNode(i)}var r=e._config_debugValues[this.key];return void 0===r&&(r=this.get.call(e)),r},debugType:"Config"}),upstreamNodeManagerClass:f.b.extend({calculateValueForNode:function(e,t,n){var i,r=this.key;if(n){var a=p.a.getStateIDForNode(t);p.a.setStateDataForNode(void 0,t),p.a.getValueForNode(a)}void 0===(i=p.a.getStateDataForNode(t))?delete e._config_debugValues[r]:e._config_debugValues[r]=i},debugType:"Config"}),wasRegistered:function(){var e=arguments;this.__s._$vi$wasRegistered.apply(this,e),this.readOnly=!1},setInitialValueForObject:function(e,t,n){this.usesBuiltinGet?e._config_defaultValues[t]=n:e._config_defaultValues[t]=void 0},didChange:function(e){this.writeToSessionStorage&&this.writeToSessionStorage()},__superMap:{_$vi$wasRegistered:"wasRegistered"}}),v=m.extend({type:"boolean",configType:"boolean",parse:function(e){return"boolean"==typeof e?e:"true"===e},staticMembers:{__QUALIFIED_CLASS_NAME__:"BooleanConfigProperty"}}),_=m.extend({type:"number",configType:"number",parse:function(e){return e=parseFloat(e),isNaN(e)?void 0:e},staticMembers:{__QUALIFIED_CLASS_NAME__:"NumberConfigProperty"}}),b=m.extend({type:"string",configType:"string",parse:function(e){return e+""},staticMembers:{__QUALIFIED_CLASS_NAME__:"StringConfigProperty"}}),y=m.extend({configType:"enum",allowedValues:null,parse:function(e){if(""!==e){var t=this.allowedValues;if(t.indexOf(e)>-1)return e;Object(s.b)("Not a recognized value in enum: "+e,{value:e,allowedValues:t})}},init:function(e,t){1===arguments.length&&Object(g.a)(e)?this.__s._$1ZG$init.call(this,e):(this.allowedValues=e,this.__s._$1ZG$init.call(this,t))},__superMap:{_$1ZG$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"EnumConfigProperty"}});n.d(t,"a",function(){return I});var I=i.a.extend(a.a,r.a,{staticMembers:{booleanProperty:m.booleanProperty,numberProperty:m.numberProperty,stringProperty:m.stringProperty,enumProperty:m.enumProperty,__QUALIFIED_CLASS_NAME__:"Config"},_config_debugValues:null,_config_urlValues:null,_config_defaultValues:null,_shouldWriteChangesToSessionStorage:!1,init:function(){this._config_defaultValues={},this._config_urlValues=Object.create(this._config_defaultValues),this._config_debugValues=Object.create(this._config_urlValues),this.__s._$1JS$init.call(this),this.constructor===I?Object(s.b)("CW.Config cannot be instantiated directly, must subclass."):this.constructor.storageKey||Object(s.b)("Must define a `storageKey` static member for CW.Config subclasses."),this._computedStorageKey="Apple:Config:"+this.constructor.storageKey,w.call(this),function(){var e=S.getItem(this._computedStorageKey),t=this._config_defaultValues,n=!1;if(e)try{for(var i in e=JSON.parse(e))e.hasOwnProperty(i)&&t.hasOwnProperty(i)&&(this.set(i,e[i]),n=!0)}catch(e){}return n}.call(this)&&this.didLoadConfigFromSessionStorage(),this._shouldWriteChangesToSessionStorage=!0,Object(u.a)(window,"hashchange",w.bind(this))},didLoadConfigFromSessionStorage:function(){},setFromString:function(e,t){this.set(e,this.getMetadata(e).parse(t))},typeOf:function(e){return this.getMetadata(e).configType},dump:function(e){e||(e="");var t=this._config_debugValues,n=this._config_urlValues,i="",r="",a="",s=[],o=this.getMetadataByType(m);for(i in o)o.hasOwnProperty(i)&&(r=e+i+": ",a="",t.hasOwnProperty(i)&&(a+=this.getDebugValue(i)+" (Debug); "),n.hasOwnProperty(i)&&(a+=this.getURLValue(i)+" (URL); "),a+=this.getDefaultValue(i)+" (Default)",s.push(r+a));return s.join("\n")},getDefaultValue:function(e){return void 0!==this._config_defaultValues[e]?this._config_defaultValues[e]:this.getMetadata(e).getForObject(this,e)},setDefaultValue:function(e,t){this._config_defaultValues[e]=t,this.propertyChanged(e)},getURLValue:function(e){if(this._config_urlValues.hasOwnProperty(e))return this._config_urlValues[e]},getDebugValue:function(e){if(this._config_debugValues.hasOwnProperty(e))return this._config_debugValues[e]},clearDebugValues:function(){var e=this.getMetadataByType(m);for(var t in e)e.hasOwnProperty(t)&&this.set(t,void 0)},writeToSessionStorage:function(){this._shouldWriteChangesToSessionStorage&&this._computedStorageKey&&S.setItem(this._computedStorageKey,JSON.stringify(this._config_debugValues))},__superMap:{_$1JS$init:"init"}});function w(){var e=function(e){var t={};if("#cw_config:"!==e.substr(0,"#cw_config:".length))return t;var n,i,r,a,s=(e=e.substr("#cw_config:".length)).split("&"),o=s.length;for(i=0;i<o;i++){var c=(n=s[i]).indexOf("=");c<0?(r=n,a="true"):(r=n.substr(0,c),a=n.substr(c+1)),r=decodeURIComponent(r),a=decodeURIComponent(a),t[r]=a}return t}(window.location.hash);for(var t in e)if(e.hasOwnProperty(t)){var n=e[t],i=this.getMetadata(t);i&&(void 0!==(n=i.parse(n))?this._config_urlValues[t]=n:delete this._config_urlValues[t],this.propertyChanged(t))}}var S=c.get("sharedInstance")},function(e,t,n){"use strict";var i=n(80),r=n(180),a=n(776),s=n(121),o=n(181),c=n(65),l=n(88),u=function(){this.init()};Object.assign(u.prototype,{firstItem:null,lastItem:null,length:0,init:function(){this._nextMap=new Map,this._prevMap=new Map},unshift:function(e,t){var n=this._nextMap,i=this._prevMap;if(n.has(e)){if(!t)return;this.remove(e)}var r=this.firstItem;n.set(e,r),i.set(e,null),r&&i.set(r,e),this.firstItem=e,this.length++,1===this.length&&(this.lastItem=e)},shift:function(){var e=this.firstItem;return e&&this.remove(e),e},push:function(e,t){var n=this._nextMap,i=this._prevMap;if(n.has(e)){if(!t)return;this.remove(e)}var r=this.lastItem;i.set(e,r),n.set(e,null),r&&n.set(r,e),this.lastItem=e,this.length++,1===this.length&&(this.firstItem=e)},pop:function(){var e=this._nextMap,t=this._prevMap;if(0===this.length)return null;var n=this.lastItem,i=this.lastItem=t.get(n)||null;return i?e.set(i,null):this.firstItem=null,this.length--,e.delete(n),t.delete(n),n},remove:function(e){var t=this._nextMap,n=this._prevMap;if(!t.has(e))return!1;var i=n.get(e),r=t.get(e);return i&&t.set(i,r),r&&n.set(r,i),this.lastItem===e&&(this.lastItem=i||null),this.firstItem===e&&(this.firstItem=r||null),this.length--,t.delete(e),n.delete(e),!0},clear:function(){var e=this._nextMap,t=this._prevMap,n=this.firstItem,i=void 0;for(this.firstItem=this.lastItem=null,this.length=0;n;)i=e.get(n),e.delete(n),t.delete(n),n=i},contains:function(e){return this._nextMap.has(e)},toArray:function(){var e=this._arrayRepresentation||(this._arrayRepresentation=[]);e.length=0;var t=this.firstItem,n=this._nextMap;if(!t)return e;do{e.push(t)}while(t=n.get(t));return e}}),n.d(t,"a",function(){return d});var d=i.a.extend({staticMembers:{Support:{isCacheableInStore:!0,isActiveOutsideStore:!1,ownerObjectStore:null,_objectStore_retainCount:0,retain:function(){var e=arguments,t=this.__s._$Mf$retain.apply(this,e);return this._retainInStore(),t},release:function(){var e=arguments,t=this._releaseInStore(),n=this.__s._$PB$release.apply(this,e);return t&&!this.ownerObjectStore&&delete this.ownerObjectStore,n},_retainInStore:function(){if(1==this._objectStore_retainCount++){this.isActiveOutsideStore||(this.isActiveOutsideStore=!0);var e=this.ownerObjectStore;e&&e._handleInitialExternalRetainOfItem(this)}},_releaseInStore:function(){var e=--this._objectStore_retainCount;if(1!==e)return 0===e;var t=this.ownerObjectStore;return t&&(this.isActiveOutsideStore&&(this.isActiveOutsideStore=!1),t._handleFullExternalReleaseOfItem(this)),0===e},_cleanUpObjectStoreSupport:function(){this.isActiveOutsideStore&&(this.isActiveOutsideStore=!1)},cleanup:function(){var e=arguments;this._cleanUpObjectStoreSupport(),this.__s._$vy$cleanup.apply(this,e)},__superMap:{_$Mf$retain:"retain",_$PB$release:"release",_$vy$cleanup:"cleanup"}},__QUALIFIED_CLASS_NAME__:"ObjectStore"},maxCachedItemCount:500,itemClass:null,items:null,cachedItems:null,_storeMap:r.b(Object),computeStoreKey:function(){return a.a(arguments)},init:function(e){var t=arguments,n=s.a(this);this._storeKeyKey="_"+n+"_storeKey",this.items=new l.a,this.cachedItems=new u,o.a(e)?(this.itemClass=e,this.__s._$2YK$init.call(this)):this.__s._$2YK$init.apply(this,t),this._ownItemClass=this.itemClass.extend(this.constructor.Support,{ownerObjectStore:this})},peekItem:function(){return this._peekItem(this.computeStoreKey.apply(this,arguments))},_peekItem:function(e){return this._storeMap[e]||null},getItem:function(){var e=this.computeStoreKey.apply(this,arguments),t=this._peekItem(e);if(t)return t;var n=this._ownItemClass;return(t=n.create.apply(n,arguments))[this._storeKeyKey]=e,this.items.add(t),this._storeMap[e]=t,t._objectStore_retainCount||(this.cachedItems.unshift(t),this.itemDidEnterCache(t)),t.retain(this,"Ownership by ObjectStore"),t},purgeItem:function(e){this.cachedItems.contains(e)||c.b("Cannot purge item that is not cached.");var t=e[this._storeKeyKey];e[this._storeKeyKey]=void 0,delete this._storeMap[t],this.items.remove(e),this.cachedItems.remove(e),this.itemDidLeaveCache(e),e.release(this,"Ownership by ObjectStore")},disownItem:function(e){if(e.willBeDisownedByStore&&e.willBeDisownedByStore(),e.ownerObjectStore=null,this.cachedItems.contains(e))this.purgeItem(e);else{var t=e[this._storeKeyKey];e[this._storeKeyKey]=void 0,delete this._storeMap[t],this.items.remove(e),e.release(this,"Ownership by ObjectStore")}},_handleInitialExternalRetainOfItem:function(e){this.cachedItems.remove(e),this.itemDidLeaveCache(e)},_handleFullExternalReleaseOfItem:function(e){this.cachedItems.unshift(e),this.itemDidEnterCache(e),e.isCacheableInStore?this.pruneCache():this.purgeItem(e)},itemDidEnterCache:function(e){},itemDidLeaveCache:function(e){},pruneCache:function(){if(!this._isPruningCache){for(this._isPruningCache=!0;this.cachedItems.length&&!this.isCacheSizeAcceptable();)this.purgeItem(this.getLeastValuableCachedItem());this._isPruningCache=!1}},isCacheSizeAcceptable:function(){return this.cachedItems.length<=this.maxCachedItemCount},getLeastValuableCachedItem:function(){return this.cachedItems.lastItem},__superMap:{_$2YK$init:"init"}})},function(e,t,n){"use strict";var i={staticMembers:{isDelayableByDefault:!0,getIsDelayable:function(e){if(!(e instanceof Object))return this.isDelayableByDefault;var t=e.isDelayable;return void 0===t?this.isDelayableByDefault:t},defaultDelayMs:50,getDelay:function(e){if(!(e instanceof Object))return this.defaultDelayMs;var t=e.delayMs;return void 0===t?this.defaultDelayMs:t}}},r=n(347);n.d(t,"a",function(){return a});var a={mixinDependencies:[r.a,i],staticMembers:{getIsDelayable:function(e){var t=this.getNestedOperationContext(e);return this.__s._$AA$getIsDelayable.call(this,t)},getDelay:function(e){var t=this.getNestedOperationContext(e);return this.__s._$F1$getDelay.call(this,t)},__superMap:{_$AA$getIsDelayable:"getIsDelayable",_$F1$getDelay:"getDelay"}}}},function(e,t,n){"use strict";var i=n(177),r=n(80),a=n(36),s=n(34),o=n(180),c=n(41),l=n(1182),u=n(784),d=n(65),h=n(1202),p=n(814),f={getSignificantNum:function(e){if("number"!=typeof e||isNaN(e))return"";for(var t=e.toString().length-2,n=1;t>0;)n*=10,t--;return Math.round(e/n)*n},roundToNearestTen:function(e){return"number"!=typeof e||isNaN(e)?"":(e<0&&(e=Math.abs(e)),e<10?e:10*Math.ceil(e/10))},getDaysRemaining:function(e){if(e)return Math.ceil((e-Date.now())/1e3/60/60/24)}};n.d(t,"a",function(){return g}),n.d(t,"b",function(){return m});var g=i.b("Feedback.FeedbackEventType",function(e){e("REPORT_ONCE"),e("REPORT_ALL"),e("REPORT_SUM")}),m=r.a.extend(f,{mixinDependencies:[a.a,p.a],routeSelected:s.b(),_reportedState:o.b(Object),_eventSumCount:{},eventSumFlushTime:1e4,eventsToReport:c.c(l.a({})),doNotReportStat:s.b(!1),coskService:s.b(),report:function(e,t,n){if(this.doNotReportStat)u.b.debug("Feedback service:",e,t);else{var i=this.coskService;if(i)if(n)i.recordStat(e,t);else{var r=this.eventsToReport[e];r&&(r===g.REPORT_ONCE?this._reportedState[e]||(i.recordStat(e,t),this._reportedState[e]=!0):r===g.REPORT_ALL?i.recordStat(e,t):r===g.REPORT_SUM&&(t&&d.b("Cannot use `params` with FeedbackEventType: REPORT_SUM"),void 0!==this._eventSumCount[e]?this._eventSumCount[e]++:(this._eventSumCount[e]=1,h.a(function(e){this._eventSumCount[e]>0&&(i.recordStat(e,{count:this._eventSumCount[e]}),this._eventSumCount[e]=0)}.bind(this,e),this.eventSumFlushTime))))}}},reportError:function(e){if(this.doNotReportStat)u.b.debug("Feedback service: ","Error",e);else{var t=this.coskService;t&&e&&t.recordStat("Error",e)}},staticMembers:{__QUALIFIED_CLASS_NAME__:"FeedbackService"}})},function(e,t,n){"use strict";var i=n(1187),r=n(80),a=n(122),s=n(65),o=n(358),c=(a.a,o.a,r.a.extend(o.a,{init:function(){var e=arguments;this.__s._$HO$init.apply(this,e),this.retain(this,"permanent self-retain")},cancel:s.b.bind(void 0,"Cannot cancel a shared thenable."),__superMap:{_$HO$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"SharedThenable"}}));function l(e){var t=d[e];if(!t){var n=(t=d[e]=new Image)._thenable=c.create();i.a(t,"load",function(){t.naturalWidth||t.width||(document.body.appendChild(t),t.width=t.offsetWidth,t.height=t.offsetHeight,document.body.removeChild(t)),n.resolve(t)}),i.a(t,"error",n.reject.bind(n)),t.src=e}return t._thenable}function u(e){var t=d[e];return t&&t.complete&&t.naturalWidth?t:null}n.d(t,"a",function(){return l}),n.d(t,"b",function(){return u});var d={}},function(e,t,n){"use strict";var i=n(788),r=n(1141),a=n(189),s=n(1173),o=n(65),c=n(34),l=n(410),u=n(180),d=n(41),h=n(1135),p=n(200),f=n(415),g=n(335),m=f.a.extend({modalDialogDidDismiss:function(){this.hide()},dismissModalDialog:function(){this.view&&this.view.instanceOf(g.a)&&this.view.animateClosed()},staticMembers:{__QUALIFIED_CLASS_NAME__:"ModalDialogViewController"}}),v=n(891);n.d(t,"a",function(){return b});var _=i.a.extend({viewClass:h.a,view:Object(c.b)({downstreamBindings:{iconNames:"(owner).iconNames",message:"(owner).message",description:"(owner).description",alertStyle:"(owner).alertStyle",accessoryView:"(owner).accessoryView",buttonViews:"(owner).buttonViews"}}),iconNames:Object(c.b)(),message:Object(c.b)(),description:Object(c.b)(),alertStyle:Object(c.b)(),accessoryView:Object(c.b)(),buttonViews:Object(c.b)(),staticMembers:{__QUALIFIED_CLASS_NAME__:"AlertContentController"}}),b=m.extend({staticMembers:{show:function(e){var t=this.create(e);return t.show(),t},__QUALIFIED_CLASS_NAME__:"AlertViewController"},message:Object(c.b)(),description:Object(c.b)(),iconNames:Object(c.b)(),alertStyle:Object(c.b)(v.a.ALERT),accessoryView:Object(c.b)({strong:!0,didChange:function(e){if(e){e.alertView=this.view;var t=this._previousAccessoryView;t&&(t.alertView=null,this._previousAccessoryView=e)}}}),buttons:Object(c.b)({type:l.b}),primaryButton:Object(c.b)({set:function(e){if(e)return e.isPrimary=!0,this.createButton(e)}}),alternateButton:Object(c.b)({set:function(e){if(e)return e.isAlternate=!0,this.createButton(e)}}),otherButton:Object(c.b)({set:function(e){if(e)return e._isOther=!0,this.createButton(e)}}),createButtonView:function(e){return p.a.create(e)},createButton:function(e){if(e){!1===Object(s.a)(e,r.a)&&(e=this.createButtonView(e));var t=e.element.classList;return!0===e.isPrimary&&(t.add("primary"),void 0===e.keyEquivalent&&(e.keyEquivalent=a.a.RETURN)),!0===e.isAlternate&&(!0===e.isPrimary&&Object(o.b)("AlertButton cannot be configured as both `isPrimary` and `isAlternate`.",{button:e}),t.add("alternate"),void 0===e.keyEquivalent&&(e.keyEquivalent=a.a.ESC)),!0===e.isDestructive&&t.add("destructive"),e._isOther&&t.add("other"),e}},viewClass:h.b,contentController:Object(c.b)({defaultValue:Object(u.b)(_),downstreamBindings:{iconNames:"(owner).iconNames",message:"(owner).message",description:"(owner).description",alertStyle:"(owner).alertStyle",accessoryView:"(owner).accessoryView",buttonViews:"(owner).buttonViews"}}),_previousAccessoryView:Object(d.c)({strong:!0}),_buttonViewsArray0:Object(d.c)({get:function(){return l.b.create()}}),_buttonViewsArray1:Object(d.c)({get:function(){return l.b.create()}}),_currentlyUsingButtonViewsArray1:!0,buttonViews:Object(c.b)({readOnly:!0,dependencies:["primaryButton","alternateButton","otherButton","buttons","buttons.contentsDidChange"],get:function(){var e=this,t=this.primaryButton,n=this.alternateButton,i=this.otherButton,r=this.buttons;r&&(t||n||i)&&Object(o.b)("Cannot use `primaryButton`/`alternateButton`/`otherButton` API in conjunction with the `buttons[]` API.",{primaryButton:t,alternateButton:n,otherButton:i,buttons:r});var a=this._currentlyUsingButtonViewsArray1,s=a?this._buttonViewsArray0:this._buttonViewsArray1;return s.length=0,r?r.forEach(function(t){t&&s.push(e.createButton(t))}):(t&&s.push(t),n&&s.push(n),i&&s.push(i)),this._currentlyUsingButtonViewsArray1=!a,s}})})},function(e,t,n){"use strict";var i=n(65),r=n(172);r.b(r.c(),{"Date.Era.AD.Abbreviated":"AD","Date.Era.AD.Full":"Anno Domini","Date.Era.AD.Letter":"A","Date.Era.BC.Abbreviated":"BC","Date.Era.BC.Full":"Before Christ","Date.Era.BC.Letter":"B","Date.Quarter.Q1.Abbreviated":"Q1","Date.Quarter.Q1.Full":"1st quarter","Date.Quarter.StandAlone.Q1.Abbreviated":"Q1","Date.Quarter.StandAlone.Q1.Full":"1st Quarter","Date.Quarter.Q2.Abbreviated":"Q2","Date.Quarter.Q2.Full":"2nd quarter","Date.Quarter.StandAlone.Q2.Abbreviated":"Q2","Date.Quarter.StandAlone.Q2.Full":"2nd Quarter","Date.Quarter.Q3.Abbreviated":"Q3","Date.Quarter.Q3.Full":"3rd quarter","Date.Quarter.StandAlone.Q3.Abbreviated":"Q3","Date.Quarter.StandAlone.Q3.Full":"3rd Quarter","Date.Quarter.Q4.Abbreviated":"Q4","Date.Quarter.Q4.Full":"4th quarter","Date.Quarter.StandAlone.Q4.Abbreviated":"Q4","Date.Quarter.StandAlone.Q4.Full":"4th Quarter","Date.Month.January.Abbreviated":"Jan","Date.Month.January.Full":"January","Date.Month.January.Letter":"J","Date.Month.StandAlone.January.Abbreviated":"Jan","Date.Month.StandAlone.January.Full":"January","Date.Month.StandAlone.January.Letter":"J","Date.Month.Prepositional.January.Abbreviated":"Jan","Date.Month.Prepositional.January.Full":"January","Date.Month.Prepositional.January.Letter":"J","Date.Month.February.Abbreviated":"Feb","Date.Month.February.Full":"February","Date.Month.February.Letter":"F","Date.Month.StandAlone.February.Abbreviated":"Feb","Date.Month.StandAlone.February.Full":"February","Date.Month.StandAlone.February.Letter":"F","Date.Month.Prepositional.February.Abbreviated":"Feb","Date.Month.Prepositional.February.Full":"February","Date.Month.Prepositional.February.Letter":"F","Date.Month.March.Abbreviated":"Mar","Date.Month.March.Full":"March","Date.Month.March.Letter":"M","Date.Month.StandAlone.March.Abbreviated":"Mar","Date.Month.StandAlone.March.Full":"March","Date.Month.StandAlone.March.Letter":"M","Date.Month.Prepositional.March.Abbreviated":"Mar","Date.Month.Prepositional.March.Full":"March","Date.Month.Prepositional.March.Letter":"M","Date.Month.April.Abbreviated":"Apr","Date.Month.April.Full":"April","Date.Month.April.Letter":"A","Date.Month.StandAlone.April.Abbreviated":"Apr","Date.Month.StandAlone.April.Full":"April","Date.Month.StandAlone.April.Letter":"A","Date.Month.Prepositional.April.Abbreviated":"Apr","Date.Month.Prepositional.April.Full":"April","Date.Month.Prepositional.April.Letter":"A","Date.Month.May.Abbreviated":"May","Date.Month.May.Full":"May","Date.Month.May.Letter":"M","Date.Month.StandAlone.May.Abbreviated":"May","Date.Month.StandAlone.May.Full":"May","Date.Month.StandAlone.May.Letter":"M","Date.Month.Prepositional.May.Abbreviated":"May","Date.Month.Prepositional.May.Full":"May","Date.Month.Prepositional.May.Letter":"M","Date.Month.June.Abbreviated":"Jun","Date.Month.June.Full":"June","Date.Month.June.Letter":"J","Date.Month.StandAlone.June.Abbreviated":"Jun","Date.Month.StandAlone.June.Full":"June","Date.Month.StandAlone.June.Letter":"J","Date.Month.Prepositional.June.Abbreviated":"Jun","Date.Month.Prepositional.June.Full":"June","Date.Month.Prepositional.June.Letter":"J","Date.Month.July.Abbreviated":"Jul","Date.Month.July.Full":"July","Date.Month.July.Letter":"J","Date.Month.StandAlone.July.Abbreviated":"Jul","Date.Month.StandAlone.July.Full":"July","Date.Month.StandAlone.July.Letter":"J","Date.Month.Prepositional.July.Abbreviated":"Jul","Date.Month.Prepositional.July.Full":"July","Date.Month.Prepositional.July.Letter":"J","Date.Month.August.Abbreviated":"Aug","Date.Month.August.Full":"August","Date.Month.August.Letter":"A","Date.Month.StandAlone.August.Abbreviated":"Aug","Date.Month.StandAlone.August.Full":"August","Date.Month.StandAlone.August.Letter":"A","Date.Month.Prepositional.August.Abbreviated":"Aug","Date.Month.Prepositional.August.Full":"August","Date.Month.Prepositional.August.Letter":"A","Date.Month.September.Abbreviated":"Sep","Date.Month.September.Full":"September","Date.Month.September.Letter":"S","Date.Month.StandAlone.September.Abbreviated":"Sep","Date.Month.StandAlone.September.Full":"September","Date.Month.StandAlone.September.Letter":"S","Date.Month.Prepositional.September.Abbreviated":"Sep","Date.Month.Prepositional.September.Full":"September","Date.Month.Prepositional.September.Letter":"S","Date.Month.October.Abbreviated":"Oct","Date.Month.October.Full":"October","Date.Month.October.Letter":"O","Date.Month.StandAlone.October.Abbreviated":"Oct","Date.Month.StandAlone.October.Full":"October","Date.Month.StandAlone.October.Letter":"O","Date.Month.Prepositional.October.Abbreviated":"Oct","Date.Month.Prepositional.October.Full":"October","Date.Month.Prepositional.October.Letter":"O","Date.Month.November.Abbreviated":"Nov","Date.Month.November.Full":"November","Date.Month.November.Letter":"N","Date.Month.StandAlone.November.Abbreviated":"Nov","Date.Month.StandAlone.November.Full":"November","Date.Month.StandAlone.November.Letter":"N","Date.Month.Prepositional.November.Abbreviated":"Nov","Date.Month.Prepositional.November.Full":"November","Date.Month.Prepositional.November.Letter":"N","Date.Month.December.Abbreviated":"Dec","Date.Month.December.Full":"December","Date.Month.December.Letter":"D","Date.Month.StandAlone.December.Abbreviated":"Dec","Date.Month.StandAlone.December.Full":"December","Date.Month.StandAlone.December.Letter":"D","Date.Month.Prepositional.December.Abbreviated":"Dec","Date.Month.Prepositional.December.Full":"December","Date.Month.Prepositional.December.Letter":"D","Date.Day.Monday.Abbreviated":"Mon","Date.Day.Monday.Full":"Monday","Date.Day.Monday.Letter":"M","Date.Day.StandAlone.Monday.Abbreviated":"Mon","Date.Day.StandAlone.Monday.Full":"Monday","Date.Day.StandAlone.Monday.Letter":"M","Date.Day.Tuesday.Abbreviated":"Tue","Date.Day.Tuesday.Full":"Tuesday","Date.Day.Tuesday.Letter":"T","Date.Day.StandAlone.Tuesday.Abbreviated":"Tue","Date.Day.StandAlone.Tuesday.Full":"Tuesday","Date.Day.StandAlone.Tuesday.Letter":"T","Date.Day.Wednesday.Abbreviated":"Wed","Date.Day.Wednesday.Full":"Wednesday","Date.Day.Wednesday.Letter":"W","Date.Day.StandAlone.Wednesday.Abbreviated":"Wed","Date.Day.StandAlone.Wednesday.Full":"Wednesday","Date.Day.StandAlone.Wednesday.Letter":"W","Date.Day.Thursday.Abbreviated":"Thu","Date.Day.Thursday.Full":"Thursday","Date.Day.Thursday.Letter":"R","Date.Day.StandAlone.Thursday.Abbreviated":"Thu","Date.Day.StandAlone.Thursday.Full":"Thursday","Date.Day.StandAlone.Thursday.Letter":"R","Date.Day.Friday.Abbreviated":"Fri","Date.Day.Friday.Full":"Friday","Date.Day.Friday.Letter":"F","Date.Day.StandAlone.Friday.Abbreviated":"Fri","Date.Day.StandAlone.Friday.Full":"Friday","Date.Day.StandAlone.Friday.Letter":"F","Date.Day.Saturday.Abbreviated":"Sat","Date.Day.Saturday.Full":"Saturday","Date.Day.Saturday.Letter":"S","Date.Day.StandAlone.Saturday.Abbreviated":"Sat","Date.Day.StandAlone.Saturday.Full":"Saturday","Date.Day.StandAlone.Saturday.Letter":"S","Date.Day.Sunday.Abbreviated":"Sun","Date.Day.Sunday.Full":"Sunday","Date.Day.Sunday.Letter":"S","Date.Day.StandAlone.Sunday.Abbreviated":"Sun","Date.Day.StandAlone.Sunday.Full":"Sunday","Date.Day.StandAlone.Sunday.Letter":"S","Date.Period.AM":"AM","Date.Period.PM":"PM","ReorderableSimpleListViewController.CancelledMove":"Cancelled move","ReorderableSimpleListViewController.GrabbedItem.MovedUp":"Moved above %{itemTitle}","ReorderableSimpleListViewController.GrabbedItem.MovedDown":"Moved below %{itemTitle}","ReorderableSimpleListViewController.ItemDropped":"Moved %{itemTitle} to position %{positionNumber}","AXGrabToggleButton.AriaLabel.Ungrabbed":"Reorder %{title}","AXGrabToggleButton.AriaLabel.Grabbed":"Use arrow keys to move. Press Return or Enter to commit or Escape to cancel."}),n.d(t,"a",function(){return a});var a=function e(t,n){if(t){if(!t.getFullYear)throw new TypeError("Object passed to date formatter was not a date!");isNaN(t.getTime())&&Object(i.b)("Invalid date passed to date formatter")}else Object(i.b)("No date passed to date formatter.");n||Object(i.b)("No formatting string passed to date formatter. Date: "+t);for(var r=n.length,a=n[0],s=1;s<r;s++)n[s]!==a&&Object(i.b)("Invalid format string for a date; all characters mustbe the same: "+n+"; date: "+t);var o=e[a];return o||Object(i.b)("Formatter `"+a+"` not supported for date: "+t),o(t,r)};a.G=function(e,t){var n="Date.Era.";return n+=e.getFullYear()>=0?"AD":"BC",t<=3?Object(r.d)(n+".Abbreviated"):4===t?Object(r.d)(n+".Full"):5===t?Object(r.d)(n+".Letter"):void Object(i.b)("Invalid era format: Expected at most 5 digits; found "+t+".")},a.y=function(e,t){var n=e.getFullYear();1===t&&(t=n.length);for(var i=Math.abs(n).toString();i.length<t;)i="0"+i;return i.substr(i.length-t)},a.Y=a.y,a.u=function(e,t){var n=e.getFullYear();1===t&&(t=n.length);for(var i=e.getFullYear()<0,r=Math.abs(n).toString();r.length<t;)r="0"+r;return r=r.substr(r.length-t),(i?"-":"")+r},a.Q=function(e,t,n){var a=e.getMonth(),s=Math.floor(a/3)+1,o="Date.Quarter."+(n?"StandAlone.":"")+"Q"+s;return 1===t?""+s:2===t?"0"+s:3===t?Object(r.d)(o+".Abbreviated"):4===t?Object(r.d)(o+".Full"):void Object(i.b)("Unrecognized number of characters for quarter: "+t)},a.q=function(e,t){return a.Q(e,t,!0)},a.ENGLISH_MONTH_NAMES=["January","February","March","April","May","June","July","August","September","October","November","December"],a.M=function(e,t,n){var s=e.getMonth(),o=""+(s+1),c="Date.Month."+(n||"")+a.ENGLISH_MONTH_NAMES[s];return 1===t?o:2===t?(o.length<2&&(o="0"+o),o):3===t?Object(r.d)(c+".Abbreviated"):4===t?Object(r.d)(c+".Full"):5===t?Object(r.d)(c+".Letter"):void Object(i.b)("The # of Ms or Ls must be 1 to 5. Supplied: "+t)},a.L=function(e,t){return a.M(e,t,"StandAlone.")},a.P=function(e,t){return a.M(e,t,"Prepositional.")},a.d=function(e,t){var n=""+e.getDate();return t>n.length&&(n="0"+n),n},a.D=function(e,t){var n=new Date(e.getFullYear(),0,1).getTime(),i=e.getTime()-n,r=Math.floor(i/864e5)+1;for(r=""+r;r.length<t;)r="0"+r;return r},a.ENGLISH_DAY_NAMES=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],a.E=function(e,t){return t<3&&(t=3),a.e(e,t)},a.e=function(e,t,n){var s=e.getDay(),o=""+(s+1),c="Date.Day."+(n?"StandAlone.":"")+a.ENGLISH_DAY_NAMES[s];return 1===t?o:2===t?o="0"+o:3===t?Object(r.d)(c+".Abbreviated"):4===t?Object(r.d)(c+".Full"):5===t?Object(r.d)(c+".Letter"):void Object(i.b)("Unrecognized number of `e`s, `c`s, or `E`s in date format string.")},a.c=function(e,t){return a.e(e,t,!0)},a.a=function(e,t){1!==t&&Object(i.b)("`a` can only be included in a date format string once.");var n="Date.Period."+(e.getHours()>11?"PM":"AM");return Object(r.d)(n)},a._h=function(e,t,n,i){var r=e.getHours();n||(r%=12),i&&(n?0===r&&(r=24):0===r&&(r=12));var a=""+r;return a.length<t&&(a="0"+a),a},a.h=function(e,t){return a._h(e,t,!1,1)},a.H=function(e,t){return a._h(e,t,!0,0)},a.K=function(e,t){return a._h(e,t,!1,0)},a.k=function(e,t){return a._h(e,t,!0,1)},a.m=function(e,t){for(var n=""+e.getMinutes();n.length<t;)n="0"+n;return n},a.s=function(e,t){for(var n=""+e.getSeconds();n.length<t;)n="0"+n;return n},a.S=function(e,t){var n=e.getMilliseconds()/1e3,i=Math.pow(10,t);for(n=""+(n=Math.round(n*i));n.length<t;)n="0"+n;return n},a.A=function(e,t){var n=new Date(e.getFullYear(),e.getMonth(),e.getDay()).getTime(),i=e.getTime()-n;for(i=""+i;i.length<t;)i="0"+i;return i}}]);